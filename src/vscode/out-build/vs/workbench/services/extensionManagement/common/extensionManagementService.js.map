{"version":3,"sources":["vs/workbench/services/extensionManagement/common/extensionManagementService.ts"],"names":[],"mappings":"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","file":"extensionManagementService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event, EventMultiplexer } from '../../../../base/common/event.js';\nimport {\n\tILocalExtension, IGalleryExtension, IExtensionIdentifier, IExtensionsControlManifest, IExtensionGalleryService, InstallOptions, UninstallOptions, InstallExtensionResult, ExtensionManagementError, ExtensionManagementErrorCode, Metadata, InstallOperation, EXTENSION_INSTALL_SOURCE_CONTEXT, InstallExtensionInfo,\n\tIProductVersion,\n\tExtensionInstallSource,\n\tDidUpdateExtensionMetadata,\n\tUninstallExtensionInfo,\n\tIAllowedExtensionsService,\n\tEXTENSION_INSTALL_SKIP_PUBLISHER_TRUST_CONTEXT,\n} from '../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { DidChangeProfileForServerEvent, DidUninstallExtensionOnServerEvent, IExtensionManagementServer, IExtensionManagementServerService, InstallExtensionOnServerEvent, IPublisherInfo, IResourceExtension, IWorkbenchExtensionManagementService, UninstallExtensionOnServerEvent } from './extensionManagement.js';\nimport { ExtensionType, isLanguagePackExtension, IExtensionManifest, getWorkspaceSupportTypeMessage, TargetPlatform } from '../../../../platform/extensions/common/extensions.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { areSameExtensions, computeTargetPlatform } from '../../../../platform/extensionManagement/common/extensionManagementUtil.js';\nimport { localize } from '../../../../nls.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { IDownloadService } from '../../../../platform/download/common/download.js';\nimport { coalesce, distinct, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { IDialogService, IPromptButton } from '../../../../platform/dialogs/common/dialogs.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { IUserDataSyncEnablementService, SyncResource } from '../../../../platform/userDataSync/common/userDataSync.js';\nimport { Promises } from '../../../../base/common/async.js';\nimport { IWorkspaceTrustRequestService, WorkspaceTrustRequestButton } from '../../../../platform/workspace/common/workspaceTrust.js';\nimport { IExtensionManifestPropertiesService } from '../../extensions/common/extensionManifestPropertiesService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { isString, isUndefined } from '../../../../base/common/types.js';\nimport { FileChangesEvent, IFileService } from '../../../../platform/files/common/files.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { CancellationError, getErrorMessage } from '../../../../base/common/errors.js';\nimport { IUserDataProfileService } from '../../userDataProfile/common/userDataProfile.js';\nimport { IWorkspaceContextService, WorkbenchState } from '../../../../platform/workspace/common/workspace.js';\nimport { IExtensionsScannerService, IScannedExtension } from '../../../../platform/extensionManagement/common/extensionsScannerService.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IUserDataProfilesService } from '../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { createCommandUri, IMarkdownString, MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { verifiedPublisherIcon } from './extensionsIcons.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { IStringDictionary } from '../../../../base/common/collections.js';\nimport { CommontExtensionManagementService } from '../../../../platform/extensionManagement/common/abstractExtensionManagementService.js';\n\nconst TrustedPublishersStorageKey = 'extensions.trustedPublishers';\n\nfunction isGalleryExtension(extension: IResourceExtension | IGalleryExtension): extension is IGalleryExtension {\n\treturn extension.type === 'gallery';\n}\n\nexport class ExtensionManagementService extends CommontExtensionManagementService implements IWorkbenchExtensionManagementService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly defaultTrustedPublishers: readonly string[];\n\n\tprivate readonly _onInstallExtension = this._register(new Emitter<InstallExtensionOnServerEvent>());\n\treadonly onInstallExtension: Event<InstallExtensionOnServerEvent>;\n\n\tprivate readonly _onDidInstallExtensions = this._register(new Emitter<readonly InstallExtensionResult[]>());\n\treadonly onDidInstallExtensions: Event<readonly InstallExtensionResult[]>;\n\n\tprivate readonly _onUninstallExtension = this._register(new Emitter<UninstallExtensionOnServerEvent>());\n\treadonly onUninstallExtension: Event<UninstallExtensionOnServerEvent>;\n\n\tprivate readonly _onDidUninstallExtension = this._register(new Emitter<DidUninstallExtensionOnServerEvent>());\n\treadonly onDidUninstallExtension: Event<DidUninstallExtensionOnServerEvent>;\n\n\treadonly onDidUpdateExtensionMetadata: Event<DidUpdateExtensionMetadata>;\n\n\tprivate readonly _onDidProfileAwareInstallExtensions = this._register(new Emitter<readonly InstallExtensionResult[]>());\n\treadonly onProfileAwareDidInstallExtensions: Event<readonly InstallExtensionResult[]>;\n\n\tprivate readonly _onDidProfileAwareUninstallExtension = this._register(new Emitter<DidUninstallExtensionOnServerEvent>());\n\treadonly onProfileAwareDidUninstallExtension: Event<DidUninstallExtensionOnServerEvent>;\n\n\treadonly onProfileAwareDidUpdateExtensionMetadata: Event<DidUpdateExtensionMetadata>;\n\n\treadonly onDidChangeProfile: Event<DidChangeProfileForServerEvent>;\n\n\treadonly onDidEnableExtensions: Event<ILocalExtension[]>;\n\n\tprotected readonly servers: IExtensionManagementServer[] = [];\n\n\tprivate readonly workspaceExtensionManagementService: WorkspaceExtensionsManagementService;\n\n\tconstructor(\n\t\t@IExtensionManagementServerService protected readonly extensionManagementServerService: IExtensionManagementServerService,\n\t\t@IExtensionGalleryService private readonly extensionGalleryService: IExtensionGalleryService,\n\t\t@IUserDataProfileService private readonly userDataProfileService: IUserDataProfileService,\n\t\t@IUserDataProfilesService private readonly userDataProfilesService: IUserDataProfilesService,\n\t\t@IConfigurationService protected readonly configurationService: IConfigurationService,\n\t\t@IProductService productService: IProductService,\n\t\t@IDownloadService protected readonly downloadService: IDownloadService,\n\t\t@IUserDataSyncEnablementService private readonly userDataSyncEnablementService: IUserDataSyncEnablementService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@IWorkspaceTrustRequestService private readonly workspaceTrustRequestService: IWorkspaceTrustRequestService,\n\t\t@IExtensionManifestPropertiesService private readonly extensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IExtensionsScannerService private readonly extensionsScannerService: IExtensionsScannerService,\n\t\t@IAllowedExtensionsService allowedExtensionsService: IAllowedExtensionsService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t) {\n\t\tsuper(productService, allowedExtensionsService);\n\n\t\tthis.defaultTrustedPublishers = productService.trustedExtensionPublishers ?? [];\n\t\tthis.workspaceExtensionManagementService = this._register(this.instantiationService.createInstance(WorkspaceExtensionsManagementService));\n\t\tthis.onDidEnableExtensions = this.workspaceExtensionManagementService.onDidChangeInvalidExtensions;\n\n\t\tif (this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\tthis.servers.push(this.extensionManagementServerService.localExtensionManagementServer);\n\t\t}\n\t\tif (this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\tthis.servers.push(this.extensionManagementServerService.remoteExtensionManagementServer);\n\t\t}\n\t\tif (this.extensionManagementServerService.webExtensionManagementServer) {\n\t\t\tthis.servers.push(this.extensionManagementServerService.webExtensionManagementServer);\n\t\t}\n\n\t\tconst onInstallExtensionEventMultiplexer = this._register(new EventMultiplexer<InstallExtensionOnServerEvent>());\n\t\tthis._register(onInstallExtensionEventMultiplexer.add(this._onInstallExtension.event));\n\t\tthis.onInstallExtension = onInstallExtensionEventMultiplexer.event;\n\n\t\tconst onDidInstallExtensionsEventMultiplexer = this._register(new EventMultiplexer<readonly InstallExtensionResult[]>());\n\t\tthis._register(onDidInstallExtensionsEventMultiplexer.add(this._onDidInstallExtensions.event));\n\t\tthis.onDidInstallExtensions = onDidInstallExtensionsEventMultiplexer.event;\n\n\t\tconst onDidProfileAwareInstallExtensionsEventMultiplexer = this._register(new EventMultiplexer<readonly InstallExtensionResult[]>());\n\t\tthis._register(onDidProfileAwareInstallExtensionsEventMultiplexer.add(this._onDidProfileAwareInstallExtensions.event));\n\t\tthis.onProfileAwareDidInstallExtensions = onDidProfileAwareInstallExtensionsEventMultiplexer.event;\n\n\t\tconst onUninstallExtensionEventMultiplexer = this._register(new EventMultiplexer<UninstallExtensionOnServerEvent>());\n\t\tthis._register(onUninstallExtensionEventMultiplexer.add(this._onUninstallExtension.event));\n\t\tthis.onUninstallExtension = onUninstallExtensionEventMultiplexer.event;\n\n\t\tconst onDidUninstallExtensionEventMultiplexer = this._register(new EventMultiplexer<DidUninstallExtensionOnServerEvent>());\n\t\tthis._register(onDidUninstallExtensionEventMultiplexer.add(this._onDidUninstallExtension.event));\n\t\tthis.onDidUninstallExtension = onDidUninstallExtensionEventMultiplexer.event;\n\n\t\tconst onDidProfileAwareUninstallExtensionEventMultiplexer = this._register(new EventMultiplexer<DidUninstallExtensionOnServerEvent>());\n\t\tthis._register(onDidProfileAwareUninstallExtensionEventMultiplexer.add(this._onDidProfileAwareUninstallExtension.event));\n\t\tthis.onProfileAwareDidUninstallExtension = onDidProfileAwareUninstallExtensionEventMultiplexer.event;\n\n\t\tconst onDidUpdateExtensionMetadaEventMultiplexer = this._register(new EventMultiplexer<DidUpdateExtensionMetadata>());\n\t\tthis.onDidUpdateExtensionMetadata = onDidUpdateExtensionMetadaEventMultiplexer.event;\n\n\t\tconst onDidProfileAwareUpdateExtensionMetadaEventMultiplexer = this._register(new EventMultiplexer<DidUpdateExtensionMetadata>());\n\t\tthis.onProfileAwareDidUpdateExtensionMetadata = onDidProfileAwareUpdateExtensionMetadaEventMultiplexer.event;\n\n\t\tconst onDidChangeProfileEventMultiplexer = this._register(new EventMultiplexer<DidChangeProfileForServerEvent>());\n\t\tthis.onDidChangeProfile = onDidChangeProfileEventMultiplexer.event;\n\n\t\tfor (const server of this.servers) {\n\t\t\tthis._register(onInstallExtensionEventMultiplexer.add(Event.map(server.extensionManagementService.onInstallExtension, e => ({ ...e, server }))));\n\t\t\tthis._register(onDidInstallExtensionsEventMultiplexer.add(server.extensionManagementService.onDidInstallExtensions));\n\t\t\tthis._register(onDidProfileAwareInstallExtensionsEventMultiplexer.add(server.extensionManagementService.onProfileAwareDidInstallExtensions));\n\t\t\tthis._register(onUninstallExtensionEventMultiplexer.add(Event.map(server.extensionManagementService.onUninstallExtension, e => ({ ...e, server }))));\n\t\t\tthis._register(onDidUninstallExtensionEventMultiplexer.add(Event.map(server.extensionManagementService.onDidUninstallExtension, e => ({ ...e, server }))));\n\t\t\tthis._register(onDidProfileAwareUninstallExtensionEventMultiplexer.add(Event.map(server.extensionManagementService.onProfileAwareDidUninstallExtension, e => ({ ...e, server }))));\n\t\t\tthis._register(onDidUpdateExtensionMetadaEventMultiplexer.add(server.extensionManagementService.onDidUpdateExtensionMetadata));\n\t\t\tthis._register(onDidProfileAwareUpdateExtensionMetadaEventMultiplexer.add(server.extensionManagementService.onProfileAwareDidUpdateExtensionMetadata));\n\t\t\tthis._register(onDidChangeProfileEventMultiplexer.add(Event.map(server.extensionManagementService.onDidChangeProfile, e => ({ ...e, server }))));\n\t\t}\n\n\t\tthis._register(this.onProfileAwareDidInstallExtensions(results => {\n\t\t\tconst untrustedPublishers = new Map<string, IPublisherInfo>();\n\t\t\tfor (const result of results) {\n\t\t\t\tif (result.local && result.source && !URI.isUri(result.source) && !this.isPublisherTrusted(result.source)) {\n\t\t\t\t\tuntrustedPublishers.set(result.source.publisher, { publisher: result.source.publisher, publisherDisplayName: result.source.publisherDisplayName });\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (untrustedPublishers.size) {\n\t\t\t\tthis.trustPublishers(...untrustedPublishers.values());\n\t\t\t}\n\t\t}));\n\t}\n\n\tasync getInstalled(type?: ExtensionType, profileLocation?: URI, productVersion?: IProductVersion): Promise<ILocalExtension[]> {\n\t\tconst result: ILocalExtension[] = [];\n\t\tawait Promise.all(this.servers.map(async server => {\n\t\t\tconst installed = await server.extensionManagementService.getInstalled(type, profileLocation, productVersion);\n\t\t\tif (server === this.getWorkspaceExtensionsServer()) {\n\t\t\t\tconst workspaceExtensions = await this.getInstalledWorkspaceExtensions(true);\n\t\t\t\tinstalled.push(...workspaceExtensions);\n\t\t\t}\n\t\t\tresult.push(...installed);\n\t\t}));\n\t\treturn result;\n\t}\n\n\tuninstall(extension: ILocalExtension, options: UninstallOptions): Promise<void> {\n\t\treturn this.uninstallExtensions([{ extension, options }]);\n\t}\n\n\tasync uninstallExtensions(extensions: UninstallExtensionInfo[]): Promise<void> {\n\t\tconst workspaceExtensions: ILocalExtension[] = [];\n\t\tconst groupedExtensions = new Map<IExtensionManagementServer, UninstallExtensionInfo[]>();\n\n\t\tconst addExtensionToServer = (server: IExtensionManagementServer, extension: ILocalExtension, options?: UninstallOptions) => {\n\t\t\tlet extensions = groupedExtensions.get(server);\n\t\t\tif (!extensions) {\n\t\t\t\tgroupedExtensions.set(server, extensions = []);\n\t\t\t}\n\t\t\textensions.push({ extension, options });\n\t\t};\n\n\t\tfor (const { extension, options } of extensions) {\n\t\t\tif (extension.isWorkspaceScoped) {\n\t\t\t\tworkspaceExtensions.push(extension);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst server = this.getServer(extension);\n\t\t\tif (!server) {\n\t\t\t\tthrow new Error(`Invalid location ${extension.location.toString()}`);\n\t\t\t}\n\t\t\taddExtensionToServer(server, extension, options);\n\t\t\tif (this.servers.length > 1 && isLanguagePackExtension(extension.manifest)) {\n\t\t\t\tconst otherServers: IExtensionManagementServer[] = this.servers.filter(s => s !== server);\n\t\t\t\tfor (const otherServer of otherServers) {\n\t\t\t\t\tconst installed = await otherServer.extensionManagementService.getInstalled();\n\t\t\t\t\tconst extensionInOtherServer = installed.find(i => !i.isBuiltin && areSameExtensions(i.identifier, extension.identifier));\n\t\t\t\t\tif (extensionInOtherServer) {\n\t\t\t\t\t\taddExtensionToServer(otherServer, extensionInOtherServer, options);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst promises: Promise<void>[] = [];\n\t\tfor (const workspaceExtension of workspaceExtensions) {\n\t\t\tpromises.push(this.uninstallExtensionFromWorkspace(workspaceExtension));\n\t\t}\n\t\tfor (const [server, extensions] of groupedExtensions.entries()) {\n\t\t\tpromises.push(this.uninstallInServer(server, extensions));\n\t\t}\n\n\t\tconst result = await Promise.allSettled(promises);\n\t\tconst errors = result.filter(r => r.status === 'rejected').map(r => r.reason);\n\t\tif (errors.length) {\n\t\t\tthrow new Error(errors.map(e => e.message).join('\\n'));\n\t\t}\n\t}\n\n\tprivate async uninstallInServer(server: IExtensionManagementServer, extensions: UninstallExtensionInfo[]): Promise<void> {\n\t\tif (server === this.extensionManagementServerService.localExtensionManagementServer && this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\tfor (const { extension } of extensions) {\n\t\t\t\tconst installedExtensions = await this.extensionManagementServerService.remoteExtensionManagementServer.extensionManagementService.getInstalled(ExtensionType.User);\n\t\t\t\tconst dependentNonUIExtensions = installedExtensions.filter(i => !this.extensionManifestPropertiesService.prefersExecuteOnUI(i.manifest)\n\t\t\t\t\t&& i.manifest.extensionDependencies && i.manifest.extensionDependencies.some(id => areSameExtensions({ id }, extension.identifier)));\n\t\t\t\tif (dependentNonUIExtensions.length) {\n\t\t\t\t\tthrow (new Error(this.getDependentsErrorMessage(extension, dependentNonUIExtensions)));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn server.extensionManagementService.uninstallExtensions(extensions);\n\t}\n\n\tprivate getDependentsErrorMessage(extension: ILocalExtension, dependents: ILocalExtension[]): string {\n\t\tif (dependents.length === 1) {\n\t\t\treturn localize('singleDependentError', \"Cannot uninstall extension '{0}'. Extension '{1}' depends on this.\",\n\t\t\t\textension.manifest.displayName || extension.manifest.name, dependents[0].manifest.displayName || dependents[0].manifest.name);\n\t\t}\n\t\tif (dependents.length === 2) {\n\t\t\treturn localize('twoDependentsError', \"Cannot uninstall extension '{0}'. Extensions '{1}' and '{2}' depend on this.\",\n\t\t\t\textension.manifest.displayName || extension.manifest.name, dependents[0].manifest.displayName || dependents[0].manifest.name, dependents[1].manifest.displayName || dependents[1].manifest.name);\n\t\t}\n\t\treturn localize('multipleDependentsError', \"Cannot uninstall extension '{0}'. Extensions '{1}', '{2}' and others depend on this.\",\n\t\t\textension.manifest.displayName || extension.manifest.name, dependents[0].manifest.displayName || dependents[0].manifest.name, dependents[1].manifest.displayName || dependents[1].manifest.name);\n\n\t}\n\n\tupdateMetadata(extension: ILocalExtension, metadata: Partial<Metadata>): Promise<ILocalExtension> {\n\t\tconst server = this.getServer(extension);\n\t\tif (server) {\n\t\t\tconst profile = extension.isApplicationScoped ? this.userDataProfilesService.defaultProfile : this.userDataProfileService.currentProfile;\n\t\t\treturn server.extensionManagementService.updateMetadata(extension, metadata, profile.extensionsResource);\n\t\t}\n\t\treturn Promise.reject(`Invalid location ${extension.location.toString()}`);\n\t}\n\n\tasync resetPinnedStateForAllUserExtensions(pinned: boolean): Promise<void> {\n\t\tawait Promise.allSettled(this.servers.map(server => server.extensionManagementService.resetPinnedStateForAllUserExtensions(pinned)));\n\t}\n\n\tzip(extension: ILocalExtension): Promise<URI> {\n\t\tconst server = this.getServer(extension);\n\t\tif (server) {\n\t\t\treturn server.extensionManagementService.zip(extension);\n\t\t}\n\t\treturn Promise.reject(`Invalid location ${extension.location.toString()}`);\n\t}\n\n\tdownload(extension: IGalleryExtension, operation: InstallOperation, donotVerifySignature: boolean): Promise<URI> {\n\t\tif (this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\treturn this.extensionManagementServerService.localExtensionManagementServer.extensionManagementService.download(extension, operation, donotVerifySignature);\n\t\t}\n\t\tthrow new Error('Cannot download extension');\n\t}\n\n\tasync install(vsix: URI, options?: InstallOptions): Promise<ILocalExtension> {\n\t\tconst manifest = await this.getManifest(vsix);\n\t\treturn this.installVSIX(vsix, manifest, options);\n\t}\n\n\tasync installVSIX(vsix: URI, manifest: IExtensionManifest, options?: InstallOptions): Promise<ILocalExtension> {\n\t\tconst serversToInstall = this.getServersToInstall(manifest);\n\t\tif (serversToInstall?.length) {\n\t\t\tawait this.checkForWorkspaceTrust(manifest, false);\n\t\t\tconst [local] = await Promises.settled(serversToInstall.map(server => this.installVSIXInServer(vsix, server, options)));\n\t\t\treturn local;\n\t\t}\n\t\treturn Promise.reject('No Servers to Install');\n\t}\n\n\tprivate getServersToInstall(manifest: IExtensionManifest): IExtensionManagementServer[] | undefined {\n\t\tif (this.extensionManagementServerService.localExtensionManagementServer && this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\tif (isLanguagePackExtension(manifest)) {\n\t\t\t\t// Install on both servers\n\t\t\t\treturn [this.extensionManagementServerService.localExtensionManagementServer, this.extensionManagementServerService.remoteExtensionManagementServer];\n\t\t\t}\n\t\t\tif (this.extensionManifestPropertiesService.prefersExecuteOnUI(manifest)) {\n\t\t\t\t// Install only on local server\n\t\t\t\treturn [this.extensionManagementServerService.localExtensionManagementServer];\n\t\t\t}\n\t\t\t// Install only on remote server\n\t\t\treturn [this.extensionManagementServerService.remoteExtensionManagementServer];\n\t\t}\n\t\tif (this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\treturn [this.extensionManagementServerService.localExtensionManagementServer];\n\t\t}\n\t\tif (this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\treturn [this.extensionManagementServerService.remoteExtensionManagementServer];\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tasync installFromLocation(location: URI): Promise<ILocalExtension> {\n\t\tif (location.scheme === Schemas.file) {\n\t\t\tif (this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\t\treturn this.extensionManagementServerService.localExtensionManagementServer.extensionManagementService.installFromLocation(location, this.userDataProfileService.currentProfile.extensionsResource);\n\t\t\t}\n\t\t\tthrow new Error('Local extension management server is not found');\n\t\t}\n\t\tif (location.scheme === Schemas.vscodeRemote) {\n\t\t\tif (this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\t\treturn this.extensionManagementServerService.remoteExtensionManagementServer.extensionManagementService.installFromLocation(location, this.userDataProfileService.currentProfile.extensionsResource);\n\t\t\t}\n\t\t\tthrow new Error('Remote extension management server is not found');\n\t\t}\n\t\tif (!this.extensionManagementServerService.webExtensionManagementServer) {\n\t\t\tthrow new Error('Web extension management server is not found');\n\t\t}\n\t\treturn this.extensionManagementServerService.webExtensionManagementServer.extensionManagementService.installFromLocation(location, this.userDataProfileService.currentProfile.extensionsResource);\n\t}\n\n\tprotected installVSIXInServer(vsix: URI, server: IExtensionManagementServer, options: InstallOptions | undefined): Promise<ILocalExtension> {\n\t\treturn server.extensionManagementService.install(vsix, options);\n\t}\n\n\tgetManifest(vsix: URI): Promise<IExtensionManifest> {\n\t\tif (vsix.scheme === Schemas.file && this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\treturn this.extensionManagementServerService.localExtensionManagementServer.extensionManagementService.getManifest(vsix);\n\t\t}\n\t\tif (vsix.scheme === Schemas.file && this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\treturn this.extensionManagementServerService.remoteExtensionManagementServer.extensionManagementService.getManifest(vsix);\n\t\t}\n\t\tif (vsix.scheme === Schemas.vscodeRemote && this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\treturn this.extensionManagementServerService.remoteExtensionManagementServer.extensionManagementService.getManifest(vsix);\n\t\t}\n\t\treturn Promise.reject('No Servers');\n\t}\n\n\toverride async canInstall(extension: IGalleryExtension | IResourceExtension): Promise<true | IMarkdownString> {\n\t\tif (isGalleryExtension(extension)) {\n\t\t\treturn this.canInstallGalleryExtension(extension);\n\t\t}\n\t\treturn this.canInstallResourceExtension(extension);\n\t}\n\n\tprivate async canInstallGalleryExtension(gallery: IGalleryExtension): Promise<true | IMarkdownString> {\n\t\tif (this.extensionManagementServerService.localExtensionManagementServer\n\t\t\t&& await this.extensionManagementServerService.localExtensionManagementServer.extensionManagementService.canInstall(gallery) === true) {\n\t\t\treturn true;\n\t\t}\n\t\tconst manifest = await this.extensionGalleryService.getManifest(gallery, CancellationToken.None);\n\t\tif (!manifest) {\n\t\t\treturn new MarkdownString().appendText(localize('manifest is not found', \"Manifest is not found\"));\n\t\t}\n\t\tif (this.extensionManagementServerService.remoteExtensionManagementServer\n\t\t\t&& await this.extensionManagementServerService.remoteExtensionManagementServer.extensionManagementService.canInstall(gallery) === true\n\t\t\t&& this.extensionManifestPropertiesService.canExecuteOnWorkspace(manifest)) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this.extensionManagementServerService.webExtensionManagementServer\n\t\t\t&& await this.extensionManagementServerService.webExtensionManagementServer.extensionManagementService.canInstall(gallery) === true\n\t\t\t&& this.extensionManifestPropertiesService.canExecuteOnWeb(manifest)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn new MarkdownString().appendText(localize('cannot be installed', \"Cannot install the '{0}' extension because it is not available in this setup.\", gallery.displayName || gallery.name));\n\t}\n\n\tprivate async canInstallResourceExtension(extension: IResourceExtension): Promise<true | IMarkdownString> {\n\t\tif (this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this.extensionManagementServerService.remoteExtensionManagementServer && this.extensionManifestPropertiesService.canExecuteOnWorkspace(extension.manifest)) {\n\t\t\treturn true;\n\t\t}\n\t\tif (this.extensionManagementServerService.webExtensionManagementServer && this.extensionManifestPropertiesService.canExecuteOnWeb(extension.manifest)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn new MarkdownString().appendText(localize('cannot be installed', \"Cannot install the '{0}' extension because it is not available in this setup.\", extension.manifest.displayName ?? extension.identifier.id));\n\t}\n\n\tasync updateFromGallery(gallery: IGalleryExtension, extension: ILocalExtension, installOptions?: InstallOptions): Promise<ILocalExtension> {\n\t\tconst server = this.getServer(extension);\n\t\tif (!server) {\n\t\t\treturn Promise.reject(`Invalid location ${extension.location.toString()}`);\n\t\t}\n\n\t\tconst servers: IExtensionManagementServer[] = [];\n\n\t\t// Update Language pack on local and remote servers\n\t\tif (isLanguagePackExtension(extension.manifest)) {\n\t\t\tservers.push(...this.servers.filter(server => server !== this.extensionManagementServerService.webExtensionManagementServer));\n\t\t} else {\n\t\t\tservers.push(server);\n\t\t}\n\n\t\tinstallOptions = { ...(installOptions || {}), isApplicationScoped: extension.isApplicationScoped };\n\t\treturn Promises.settled(servers.map(server => server.extensionManagementService.installFromGallery(gallery, installOptions))).then(([local]) => local);\n\t}\n\n\tasync installGalleryExtensions(extensions: InstallExtensionInfo[]): Promise<InstallExtensionResult[]> {\n\t\tconst results = new Map<string, InstallExtensionResult>();\n\n\t\tconst extensionsByServer = new Map<IExtensionManagementServer, InstallExtensionInfo[]>();\n\t\tconst manifests = await Promise.all(extensions.map(async ({ extension }) => {\n\t\t\tconst manifest = await this.extensionGalleryService.getManifest(extension, CancellationToken.None);\n\t\t\tif (!manifest) {\n\t\t\t\tthrow new Error(localize('Manifest is not found', \"Installing Extension {0} failed: Manifest is not found.\", extension.displayName || extension.name));\n\t\t\t}\n\t\t\treturn manifest;\n\t\t}));\n\n\t\tif (extensions.some(e => e.options?.context?.[EXTENSION_INSTALL_SKIP_PUBLISHER_TRUST_CONTEXT] !== true)) {\n\t\t\tawait this.checkForTrustedPublishers(extensions.map((e, index) => ({ extension: e.extension, manifest: manifests[index], checkForPackAndDependencies: !e.options?.donotIncludePackAndDependencies })));\n\t\t}\n\n\t\tawait Promise.all(extensions.map(async ({ extension, options }) => {\n\t\t\ttry {\n\t\t\t\tconst manifest = await this.extensionGalleryService.getManifest(extension, CancellationToken.None);\n\t\t\t\tif (!manifest) {\n\t\t\t\t\tthrow new Error(localize('Manifest is not found', \"Installing Extension {0} failed: Manifest is not found.\", extension.displayName || extension.name));\n\t\t\t\t}\n\n\t\t\t\tif (options?.context?.[EXTENSION_INSTALL_SOURCE_CONTEXT] !== ExtensionInstallSource.SETTINGS_SYNC) {\n\t\t\t\t\tawait this.checkForWorkspaceTrust(manifest, false);\n\n\t\t\t\t\tif (!options?.donotIncludePackAndDependencies) {\n\t\t\t\t\t\tawait this.checkInstallingExtensionOnWeb(extension, manifest);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst servers = await this.getExtensionManagementServersToInstall(extension, manifest);\n\t\t\t\tif (!options.isMachineScoped && this.isExtensionsSyncEnabled()) {\n\t\t\t\t\tif (this.extensionManagementServerService.localExtensionManagementServer\n\t\t\t\t\t\t&& !servers.includes(this.extensionManagementServerService.localExtensionManagementServer)\n\t\t\t\t\t\t&& await this.extensionManagementServerService.localExtensionManagementServer.extensionManagementService.canInstall(extension) === true) {\n\t\t\t\t\t\tservers.push(this.extensionManagementServerService.localExtensionManagementServer);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const server of servers) {\n\t\t\t\t\tlet exensions = extensionsByServer.get(server);\n\t\t\t\t\tif (!exensions) {\n\t\t\t\t\t\textensionsByServer.set(server, exensions = []);\n\t\t\t\t\t}\n\t\t\t\t\texensions.push({ extension, options });\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tresults.set(extension.identifier.id.toLowerCase(), {\n\t\t\t\t\tidentifier: extension.identifier,\n\t\t\t\t\tsource: extension, error,\n\t\t\t\t\toperation: InstallOperation.Install,\n\t\t\t\t\tprofileLocation: options.profileLocation ?? this.userDataProfileService.currentProfile.extensionsResource\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\n\t\tawait Promise.all([...extensionsByServer.entries()].map(async ([server, extensions]) => {\n\t\t\tconst serverResults = await server.extensionManagementService.installGalleryExtensions(extensions);\n\t\t\tfor (const result of serverResults) {\n\t\t\t\tresults.set(result.identifier.id.toLowerCase(), result);\n\t\t\t}\n\t\t}));\n\n\t\treturn [...results.values()];\n\t}\n\n\tasync installFromGallery(gallery: IGalleryExtension, installOptions?: InstallOptions, servers?: IExtensionManagementServer[]): Promise<ILocalExtension> {\n\t\tconst manifest = await this.extensionGalleryService.getManifest(gallery, CancellationToken.None);\n\t\tif (!manifest) {\n\t\t\tthrow new Error(localize('Manifest is not found', \"Installing Extension {0} failed: Manifest is not found.\", gallery.displayName || gallery.name));\n\t\t}\n\n\t\tif (installOptions?.context?.[EXTENSION_INSTALL_SKIP_PUBLISHER_TRUST_CONTEXT] !== true) {\n\t\t\tawait this.checkForTrustedPublishers([{ extension: gallery, manifest, checkForPackAndDependencies: !installOptions?.donotIncludePackAndDependencies }],);\n\t\t}\n\n\t\tif (installOptions?.context?.[EXTENSION_INSTALL_SOURCE_CONTEXT] !== ExtensionInstallSource.SETTINGS_SYNC) {\n\n\t\t\tawait this.checkForWorkspaceTrust(manifest, false);\n\n\t\t\tif (!installOptions?.donotIncludePackAndDependencies) {\n\t\t\t\tawait this.checkInstallingExtensionOnWeb(gallery, manifest);\n\t\t\t}\n\t\t}\n\n\t\tservers = servers?.length ? this.validServers(gallery, manifest, servers) : await this.getExtensionManagementServersToInstall(gallery, manifest);\n\t\tif (!installOptions || isUndefined(installOptions.isMachineScoped)) {\n\t\t\tconst isMachineScoped = await this.hasToFlagExtensionsMachineScoped([gallery]);\n\t\t\tinstallOptions = { ...(installOptions || {}), isMachineScoped };\n\t\t}\n\n\t\tif (!installOptions.isMachineScoped && this.isExtensionsSyncEnabled()) {\n\t\t\tif (this.extensionManagementServerService.localExtensionManagementServer\n\t\t\t\t&& !servers.includes(this.extensionManagementServerService.localExtensionManagementServer)\n\t\t\t\t&& await this.extensionManagementServerService.localExtensionManagementServer.extensionManagementService.canInstall(gallery) === true) {\n\t\t\t\tservers.push(this.extensionManagementServerService.localExtensionManagementServer);\n\t\t\t}\n\t\t}\n\n\t\treturn Promises.settled(servers.map(server => server.extensionManagementService.installFromGallery(gallery, installOptions))).then(([local]) => local);\n\t}\n\n\tasync getExtensions(locations: URI[]): Promise<IResourceExtension[]> {\n\t\tconst scannedExtensions = await this.extensionsScannerService.scanMultipleExtensions(locations, ExtensionType.User, { includeInvalid: true });\n\t\tconst result: IResourceExtension[] = [];\n\t\tawait Promise.all(scannedExtensions.map(async scannedExtension => {\n\t\t\tconst workspaceExtension = await this.workspaceExtensionManagementService.toLocalWorkspaceExtension(scannedExtension);\n\t\t\tif (workspaceExtension) {\n\t\t\t\tresult.push({\n\t\t\t\t\ttype: 'resource',\n\t\t\t\t\tidentifier: workspaceExtension.identifier,\n\t\t\t\t\tlocation: workspaceExtension.location,\n\t\t\t\t\tmanifest: workspaceExtension.manifest,\n\t\t\t\t\tchangelogUri: workspaceExtension.changelogUrl,\n\t\t\t\t\treadmeUri: workspaceExtension.readmeUrl,\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\t\treturn result;\n\t}\n\n\tgetInstalledWorkspaceExtensionLocations(): URI[] {\n\t\treturn this.workspaceExtensionManagementService.getInstalledWorkspaceExtensionsLocations();\n\t}\n\n\tasync getInstalledWorkspaceExtensions(includeInvalid: boolean): Promise<ILocalExtension[]> {\n\t\treturn this.workspaceExtensionManagementService.getInstalled(includeInvalid);\n\t}\n\n\tasync installResourceExtension(extension: IResourceExtension, installOptions: InstallOptions): Promise<ILocalExtension> {\n\t\tif (!this.canInstallResourceExtension(extension)) {\n\t\t\tthrow new Error('This extension cannot be installed in the current workspace.');\n\t\t}\n\t\tif (!installOptions.isWorkspaceScoped) {\n\t\t\treturn this.installFromLocation(extension.location);\n\t\t}\n\n\t\tthis.logService.info(`Installing the extension ${extension.identifier.id} from ${extension.location.toString()} in workspace`);\n\t\tconst server = this.getWorkspaceExtensionsServer();\n\t\tthis._onInstallExtension.fire({\n\t\t\tidentifier: extension.identifier,\n\t\t\tsource: extension.location,\n\t\t\tserver,\n\t\t\tapplicationScoped: false,\n\t\t\tprofileLocation: this.userDataProfileService.currentProfile.extensionsResource,\n\t\t\tworkspaceScoped: true\n\t\t});\n\n\t\ttry {\n\t\t\tawait this.checkForWorkspaceTrust(extension.manifest, true);\n\n\t\t\tconst workspaceExtension = await this.workspaceExtensionManagementService.install(extension);\n\n\t\t\tthis.logService.info(`Successfully installed the extension ${workspaceExtension.identifier.id} from ${extension.location.toString()} in the workspace`);\n\t\t\tthis._onDidInstallExtensions.fire([{\n\t\t\t\tidentifier: workspaceExtension.identifier,\n\t\t\t\tsource: extension.location,\n\t\t\t\toperation: InstallOperation.Install,\n\t\t\t\tapplicationScoped: false,\n\t\t\t\tprofileLocation: this.userDataProfileService.currentProfile.extensionsResource,\n\t\t\t\tlocal: workspaceExtension,\n\t\t\t\tworkspaceScoped: true\n\t\t\t}]);\n\t\t\treturn workspaceExtension;\n\t\t} catch (error) {\n\t\t\tthis.logService.error(`Failed to install the extension ${extension.identifier.id} from ${extension.location.toString()} in the workspace`, getErrorMessage(error));\n\t\t\tthis._onDidInstallExtensions.fire([{\n\t\t\t\tidentifier: extension.identifier,\n\t\t\t\tsource: extension.location,\n\t\t\t\toperation: InstallOperation.Install,\n\t\t\t\tapplicationScoped: false,\n\t\t\t\tprofileLocation: this.userDataProfileService.currentProfile.extensionsResource,\n\t\t\t\terror,\n\t\t\t\tworkspaceScoped: true\n\t\t\t}]);\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\tasync getInstallableServers(gallery: IGalleryExtension): Promise<IExtensionManagementServer[]> {\n\t\tconst manifest = await this.extensionGalleryService.getManifest(gallery, CancellationToken.None);\n\t\tif (!manifest) {\n\t\t\treturn Promise.reject(localize('Manifest is not found', \"Installing Extension {0} failed: Manifest is not found.\", gallery.displayName || gallery.name));\n\t\t}\n\t\treturn this.getInstallableExtensionManagementServers(manifest);\n\t}\n\n\tprivate async uninstallExtensionFromWorkspace(extension: ILocalExtension): Promise<void> {\n\t\tif (!extension.isWorkspaceScoped) {\n\t\t\tthrow new Error('The extension is not a workspace extension');\n\t\t}\n\n\t\tthis.logService.info(`Uninstalling the workspace extension ${extension.identifier.id} from ${extension.location.toString()}`);\n\t\tconst server = this.getWorkspaceExtensionsServer();\n\t\tthis._onUninstallExtension.fire({\n\t\t\tidentifier: extension.identifier,\n\t\t\tserver,\n\t\t\tapplicationScoped: false,\n\t\t\tworkspaceScoped: true,\n\t\t\tprofileLocation: this.userDataProfileService.currentProfile.extensionsResource\n\t\t});\n\n\t\ttry {\n\t\t\tawait this.workspaceExtensionManagementService.uninstall(extension);\n\t\t\tthis.logService.info(`Successfully uninstalled the workspace extension ${extension.identifier.id} from ${extension.location.toString()}`);\n\t\t\tthis.telemetryService.publicLog2<{}, {\n\t\t\t\towner: 'sandy081';\n\t\t\t\tcomment: 'Uninstall workspace extension';\n\t\t\t}>('workspaceextension:uninstall');\n\t\t\tthis._onDidUninstallExtension.fire({\n\t\t\t\tidentifier: extension.identifier,\n\t\t\t\tserver,\n\t\t\t\tapplicationScoped: false,\n\t\t\t\tworkspaceScoped: true,\n\t\t\t\tprofileLocation: this.userDataProfileService.currentProfile.extensionsResource\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tthis.logService.error(`Failed to uninstall the workspace extension ${extension.identifier.id} from ${extension.location.toString()}`, getErrorMessage(error));\n\t\t\tthis._onDidUninstallExtension.fire({\n\t\t\t\tidentifier: extension.identifier,\n\t\t\t\tserver,\n\t\t\t\terror,\n\t\t\t\tapplicationScoped: false,\n\t\t\t\tworkspaceScoped: true,\n\t\t\t\tprofileLocation: this.userDataProfileService.currentProfile.extensionsResource\n\t\t\t});\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\tprivate validServers(gallery: IGalleryExtension, manifest: IExtensionManifest, servers: IExtensionManagementServer[]): IExtensionManagementServer[] {\n\t\tconst installableServers = this.getInstallableExtensionManagementServers(manifest);\n\t\tfor (const server of servers) {\n\t\t\tif (!installableServers.includes(server)) {\n\t\t\t\tconst error = new Error(localize('cannot be installed in server', \"Cannot install the '{0}' extension because it is not available in the '{1}' setup.\", gallery.displayName || gallery.name, server.label));\n\t\t\t\terror.name = ExtensionManagementErrorCode.Unsupported;\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\t\treturn servers;\n\t}\n\n\tprivate async getExtensionManagementServersToInstall(gallery: IGalleryExtension, manifest: IExtensionManifest): Promise<IExtensionManagementServer[]> {\n\t\tconst servers: IExtensionManagementServer[] = [];\n\n\t\t// Language packs should be installed on both local and remote servers\n\t\tif (isLanguagePackExtension(manifest)) {\n\t\t\tservers.push(...this.servers.filter(server => server !== this.extensionManagementServerService.webExtensionManagementServer));\n\t\t}\n\n\t\telse {\n\t\t\tconst [server] = this.getInstallableExtensionManagementServers(manifest);\n\t\t\tif (server) {\n\t\t\t\tservers.push(server);\n\t\t\t}\n\t\t}\n\n\t\tif (!servers.length) {\n\t\t\tconst error = new Error(localize('cannot be installed', \"Cannot install the '{0}' extension because it is not available in this setup.\", gallery.displayName || gallery.name));\n\t\t\terror.name = ExtensionManagementErrorCode.Unsupported;\n\t\t\tthrow error;\n\t\t}\n\n\t\treturn servers;\n\t}\n\n\tprivate getInstallableExtensionManagementServers(manifest: IExtensionManifest): IExtensionManagementServer[] {\n\t\t// Only local server\n\t\tif (this.servers.length === 1 && this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\treturn [this.extensionManagementServerService.localExtensionManagementServer];\n\t\t}\n\n\t\tconst servers: IExtensionManagementServer[] = [];\n\n\t\tconst extensionKind = this.extensionManifestPropertiesService.getExtensionKind(manifest);\n\t\tfor (const kind of extensionKind) {\n\t\t\tif (kind === 'ui' && this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\t\tservers.push(this.extensionManagementServerService.localExtensionManagementServer);\n\t\t\t}\n\t\t\tif (kind === 'workspace' && this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\t\tservers.push(this.extensionManagementServerService.remoteExtensionManagementServer);\n\t\t\t}\n\t\t\tif (kind === 'web' && this.extensionManagementServerService.webExtensionManagementServer) {\n\t\t\t\tservers.push(this.extensionManagementServerService.webExtensionManagementServer);\n\t\t\t}\n\t\t}\n\n\t\t// Local server can accept any extension.\n\t\tif (this.extensionManagementServerService.localExtensionManagementServer && !servers.includes(this.extensionManagementServerService.localExtensionManagementServer)) {\n\t\t\tservers.push(this.extensionManagementServerService.localExtensionManagementServer);\n\t\t}\n\n\t\treturn servers;\n\t}\n\n\tprivate isExtensionsSyncEnabled(): boolean {\n\t\treturn this.userDataSyncEnablementService.isEnabled() && this.userDataSyncEnablementService.isResourceEnabled(SyncResource.Extensions);\n\t}\n\n\tprivate async hasToFlagExtensionsMachineScoped(extensions: IGalleryExtension[]): Promise<boolean> {\n\t\tif (this.isExtensionsSyncEnabled()) {\n\t\t\tconst { result } = await this.dialogService.prompt<boolean>({\n\t\t\t\ttype: Severity.Info,\n\t\t\t\tmessage: extensions.length === 1 ? localize('install extension', \"Install Extension\") : localize('install extensions', \"Install Extensions\"),\n\t\t\t\tdetail: extensions.length === 1\n\t\t\t\t\t? localize('install single extension', \"Would you like to install and synchronize '{0}' extension across your devices?\", extensions[0].displayName)\n\t\t\t\t\t: localize('install multiple extensions', \"Would you like to install and synchronize extensions across your devices?\"),\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: localize({ key: 'install', comment: ['&& denotes a mnemonic'] }, \"&&Install\"),\n\t\t\t\t\t\trun: () => false\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: localize({ key: 'install and do no sync', comment: ['&& denotes a mnemonic'] }, \"Install (Do &&not sync)\"),\n\t\t\t\t\t\trun: () => true\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tcancelButton: {\n\t\t\t\t\trun: () => {\n\t\t\t\t\t\tthrow new CancellationError();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t}\n\t\treturn false;\n\t}\n\n\tgetExtensionsControlManifest(): Promise<IExtensionsControlManifest> {\n\t\tif (this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\treturn this.extensionManagementServerService.localExtensionManagementServer.extensionManagementService.getExtensionsControlManifest();\n\t\t}\n\t\tif (this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\treturn this.extensionManagementServerService.remoteExtensionManagementServer.extensionManagementService.getExtensionsControlManifest();\n\t\t}\n\t\tif (this.extensionManagementServerService.webExtensionManagementServer) {\n\t\t\treturn this.extensionManagementServerService.webExtensionManagementServer.extensionManagementService.getExtensionsControlManifest();\n\t\t}\n\t\treturn this.extensionGalleryService.getExtensionsControlManifest();\n\t}\n\n\tprivate getServer(extension: ILocalExtension): IExtensionManagementServer | null {\n\t\tif (extension.isWorkspaceScoped) {\n\t\t\treturn this.getWorkspaceExtensionsServer();\n\t\t}\n\t\treturn this.extensionManagementServerService.getExtensionManagementServer(extension);\n\t}\n\n\tprivate getWorkspaceExtensionsServer(): IExtensionManagementServer {\n\t\tif (this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\treturn this.extensionManagementServerService.remoteExtensionManagementServer;\n\t\t}\n\t\tif (this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\treturn this.extensionManagementServerService.localExtensionManagementServer;\n\t\t}\n\t\tif (this.extensionManagementServerService.webExtensionManagementServer) {\n\t\t\treturn this.extensionManagementServerService.webExtensionManagementServer;\n\t\t}\n\t\tthrow new Error('No extension server found');\n\t}\n\n\tasync requestPublisherTrust(extensions: InstallExtensionInfo[]): Promise<void> {\n\t\tconst manifests = await Promise.all(extensions.map(async ({ extension }) => {\n\t\t\tconst manifest = await this.extensionGalleryService.getManifest(extension, CancellationToken.None);\n\t\t\tif (!manifest) {\n\t\t\t\tthrow new Error(localize('Manifest is not found', \"Installing Extension {0} failed: Manifest is not found.\", extension.displayName || extension.name));\n\t\t\t}\n\t\t\treturn manifest;\n\t\t}));\n\n\t\tawait this.checkForTrustedPublishers(extensions.map((e, index) => ({ extension: e.extension, manifest: manifests[index], checkForPackAndDependencies: !e.options?.donotIncludePackAndDependencies })));\n\t}\n\n\tprivate async checkForTrustedPublishers(extensions: { extension: IGalleryExtension; manifest: IExtensionManifest; checkForPackAndDependencies: boolean }[]): Promise<void> {\n\t\tconst untrustedExtensions: IGalleryExtension[] = [];\n\t\tconst untrustedExtensionManifests: IExtensionManifest[] = [];\n\t\tconst manifestsToGetOtherUntrustedPublishers: IExtensionManifest[] = [];\n\t\tfor (const { extension, manifest, checkForPackAndDependencies } of extensions) {\n\t\t\tif (!extension.private && !this.isPublisherTrusted(extension)) {\n\t\t\t\tuntrustedExtensions.push(extension);\n\t\t\t\tuntrustedExtensionManifests.push(manifest);\n\t\t\t\tif (checkForPackAndDependencies) {\n\t\t\t\t\tmanifestsToGetOtherUntrustedPublishers.push(manifest);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!untrustedExtensions.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst otherUntrustedPublishers = manifestsToGetOtherUntrustedPublishers.length ? await this.getOtherUntrustedPublishers(manifestsToGetOtherUntrustedPublishers) : [];\n\t\tconst allPublishers = [...distinct(untrustedExtensions, e => e.publisher), ...otherUntrustedPublishers];\n\t\tconst unverfiiedPublishers = allPublishers.filter(p => !p.publisherDomain?.verified);\n\t\tconst verifiedPublishers = allPublishers.filter(p => p.publisherDomain?.verified);\n\n\t\ttype TrustPublisherClassification = {\n\t\t\towner: 'sandy081';\n\t\t\tcomment: 'Report the action taken by the user on the publisher trust dialog';\n\t\t\taction: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The action taken by the user on the publisher trust dialog. Can be trust, learn more or cancel.' };\n\t\t\textensionId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The identifiers of the extension for which the publisher trust dialog was shown.' };\n\t\t};\n\t\ttype TrustPublisherEvent = {\n\t\t\taction: string;\n\t\t\textensionId: string;\n\t\t};\n\n\t\tconst installButton: IPromptButton<void> = {\n\t\t\tlabel: allPublishers.length > 1 ? localize({ key: 'trust publishers and install', comment: ['&& denotes a mnemonic'] }, \"Trust Publishers & &&Install\") : localize({ key: 'trust and install', comment: ['&& denotes a mnemonic'] }, \"Trust Publisher & &&Install\"),\n\t\t\trun: () => {\n\t\t\t\tthis.telemetryService.publicLog2<TrustPublisherEvent, TrustPublisherClassification>('extensions:trustPublisher', { action: 'trust', extensionId: untrustedExtensions.map(e => e.identifier.id).join(',') });\n\t\t\t\tthis.trustPublishers(...allPublishers.map(p => ({ publisher: p.publisher, publisherDisplayName: p.publisherDisplayName })));\n\t\t\t}\n\t\t};\n\n\t\tconst learnMoreButton: IPromptButton<void> = {\n\t\t\tlabel: localize({ key: 'learnMore', comment: ['&& denotes a mnemonic'] }, \"&&Learn More\"),\n\t\t\trun: () => {\n\t\t\t\tthis.telemetryService.publicLog2<TrustPublisherEvent, TrustPublisherClassification>('extensions:trustPublisher', { action: 'learn', extensionId: untrustedExtensions.map(e => e.identifier.id).join(',') });\n\t\t\t\tthis.instantiationService.invokeFunction(accessor => accessor.get(ICommandService).executeCommand('vscode.open', URI.parse('https://aka.ms/vscode-extension-security')));\n\t\t\t\tthrow new CancellationError();\n\t\t\t}\n\t\t};\n\n\t\tconst getPublisherLink = ({ publisherDisplayName, publisherLink }: { publisherDisplayName: string; publisherLink?: string }) => {\n\t\t\treturn publisherLink ? `[${publisherDisplayName}](${publisherLink})` : publisherDisplayName;\n\t\t};\n\n\t\tconst unverifiedLink = 'https://aka.ms/vscode-verify-publisher';\n\n\t\tconst title = allPublishers.length === 1\n\t\t\t? localize('checkTrustedPublisherTitle', \"Do you trust the publisher \\\"{0}\\\"?\", allPublishers[0].publisherDisplayName)\n\t\t\t: allPublishers.length === 2\n\t\t\t\t? localize('checkTwoTrustedPublishersTitle', \"Do you trust publishers \\\"{0}\\\" and \\\"{1}\\\"?\", allPublishers[0].publisherDisplayName, allPublishers[1].publisherDisplayName)\n\t\t\t\t: localize('checkAllTrustedPublishersTitle', \"Do you trust the publisher \\\"{0}\\\" and {1} others?\", allPublishers[0].publisherDisplayName, allPublishers.length - 1);\n\n\t\tconst customMessage = new MarkdownString('', { supportThemeIcons: true, isTrusted: true });\n\n\t\tif (untrustedExtensions.length === 1) {\n\t\t\tconst extension = untrustedExtensions[0];\n\t\t\tconst manifest = untrustedExtensionManifests[0];\n\t\t\tif (otherUntrustedPublishers.length) {\n\t\t\t\tcustomMessage.appendMarkdown(localize('extension published by message', \"The extension {0} is published by {1}.\", `[${extension.displayName}](${extension.detailsLink})`, getPublisherLink(extension)));\n\t\t\t\tcustomMessage.appendMarkdown('&nbsp;');\n\t\t\t\tconst commandUri = createCommandUri('extension.open', extension.identifier.id, manifest.extensionPack?.length ? 'extensionPack' : 'dependencies').toString();\n\t\t\t\tif (otherUntrustedPublishers.length === 1) {\n\t\t\t\t\tcustomMessage.appendMarkdown(localize('singleUntrustedPublisher', \"Installing this extension will also install [extensions]({0}) published by {1}.\", commandUri, getPublisherLink(otherUntrustedPublishers[0])));\n\t\t\t\t} else {\n\t\t\t\t\tcustomMessage.appendMarkdown(localize('message3', \"Installing this extension will also install [extensions]({0}) published by {1} and {2}.\", commandUri, otherUntrustedPublishers.slice(0, otherUntrustedPublishers.length - 1).map(p => getPublisherLink(p)).join(', '), getPublisherLink(otherUntrustedPublishers[otherUntrustedPublishers.length - 1])));\n\t\t\t\t}\n\t\t\t\tcustomMessage.appendMarkdown('&nbsp;');\n\t\t\t\tcustomMessage.appendMarkdown(localize('firstTimeInstallingMessage', \"This is the first time you're installing extensions from these publishers.\"));\n\t\t\t} else {\n\t\t\t\tcustomMessage.appendMarkdown(localize('message1', \"The extension {0} is published by {1}. This is the first extension you're installing from this publisher.\", `[${extension.displayName}](${extension.detailsLink})`, getPublisherLink(extension)));\n\t\t\t}\n\t\t} else {\n\t\t\tcustomMessage.appendMarkdown(localize('multiInstallMessage', \"This is the first time you're installing extensions from publishers {0} and {1}.\", getPublisherLink(allPublishers[0]), getPublisherLink(allPublishers[allPublishers.length - 1])));\n\t\t}\n\n\t\tif (verifiedPublishers.length || unverfiiedPublishers.length === 1) {\n\t\t\tfor (const publisher of verifiedPublishers) {\n\t\t\t\tcustomMessage.appendText('\\n');\n\t\t\t\tconst publisherVerifiedMessage = localize('verifiedPublisherWithName', \"{0} has verified ownership of {1}.\", getPublisherLink(publisher), `[$(link-external) ${URI.parse(publisher.publisherDomain!.link).authority}](${publisher.publisherDomain!.link})`);\n\t\t\t\tcustomMessage.appendMarkdown(`$(${verifiedPublisherIcon.id})&nbsp;${publisherVerifiedMessage}`);\n\t\t\t}\n\t\t\tif (unverfiiedPublishers.length) {\n\t\t\t\tcustomMessage.appendText('\\n');\n\t\t\t\tif (unverfiiedPublishers.length === 1) {\n\t\t\t\t\tcustomMessage.appendMarkdown(`$(${Codicon.unverified.id})&nbsp;${localize('unverifiedPublisherWithName', \"{0} is [**not** verified]({1}).\", getPublisherLink(unverfiiedPublishers[0]), unverifiedLink)}`);\n\t\t\t\t} else {\n\t\t\t\t\tcustomMessage.appendMarkdown(`$(${Codicon.unverified.id})&nbsp;${localize('unverifiedPublishers', \"{0} and {1} are [**not** verified]({2}).\", unverfiiedPublishers.slice(0, unverfiiedPublishers.length - 1).map(p => getPublisherLink(p)).join(', '), getPublisherLink(unverfiiedPublishers[unverfiiedPublishers.length - 1]), unverifiedLink)}`);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tcustomMessage.appendText('\\n');\n\t\t\tcustomMessage.appendMarkdown(`$(${Codicon.unverified.id})&nbsp;${localize('allUnverifed', \"All publishers are [**not** verified]({0}).\", unverifiedLink)}`);\n\t\t}\n\n\t\tcustomMessage.appendText('\\n');\n\t\tif (allPublishers.length > 1) {\n\t\t\tcustomMessage.appendMarkdown(localize('message4', \"{0} has no control over the behavior of third-party extensions, including how they manage your personal data. Proceed only if you trust the publishers.\", this.productService.nameLong));\n\t\t} else {\n\t\t\tcustomMessage.appendMarkdown(localize('message2', \"{0} has no control over the behavior of third-party extensions, including how they manage your personal data. Proceed only if you trust the publisher.\", this.productService.nameLong));\n\t\t}\n\n\t\tawait this.dialogService.prompt({\n\t\t\tmessage: title,\n\t\t\ttype: Severity.Warning,\n\t\t\tbuttons: [installButton, learnMoreButton],\n\t\t\tcancelButton: {\n\t\t\t\trun: () => {\n\t\t\t\t\tthis.telemetryService.publicLog2<TrustPublisherEvent, TrustPublisherClassification>('extensions:trustPublisher', { action: 'cancel', extensionId: untrustedExtensions.map(e => e.identifier.id).join(',') });\n\t\t\t\t\tthrow new CancellationError();\n\t\t\t\t}\n\t\t\t},\n\t\t\tcustom: {\n\t\t\t\tmarkdownDetails: [{ markdown: customMessage, classes: ['extensions-management-publisher-trust-dialog'] }],\n\t\t\t}\n\t\t});\n\n\t}\n\n\tprivate async getOtherUntrustedPublishers(manifests: IExtensionManifest[]): Promise<{ publisher: string; publisherDisplayName: string; publisherLink?: string; publisherDomain?: { link: string; verified: boolean } }[]> {\n\t\tconst extensionIds = new Set<string>();\n\t\tfor (const manifest of manifests) {\n\t\t\tfor (const id of [...(manifest.extensionPack ?? []), ...(manifest.extensionDependencies ?? [])]) {\n\t\t\t\tconst [publisherId] = id.split('.');\n\t\t\t\tif (publisherId.toLowerCase() === manifest.publisher.toLowerCase()) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (this.isPublisherUserTrusted(publisherId.toLowerCase())) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\textensionIds.add(id.toLowerCase());\n\t\t\t}\n\t\t}\n\t\tif (!extensionIds.size) {\n\t\t\treturn [];\n\t\t}\n\t\tconst extensions = new Map<string, IGalleryExtension>();\n\t\tawait this.getDependenciesAndPackedExtensionsRecursively([...extensionIds], extensions, CancellationToken.None);\n\t\tconst publishers = new Map<string, IGalleryExtension>();\n\t\tfor (const [, extension] of extensions) {\n\t\t\tif (extension.private || this.isPublisherTrusted(extension)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tpublishers.set(extension.publisherDisplayName, extension);\n\t\t}\n\t\treturn [...publishers.values()];\n\t}\n\n\tprivate async getDependenciesAndPackedExtensionsRecursively(toGet: string[], result: Map<string, IGalleryExtension>, token: CancellationToken): Promise<void> {\n\t\tif (toGet.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst extensions = await this.extensionGalleryService.getExtensions(toGet.map(id => ({ id })), token);\n\t\tfor (let idx = 0; idx < extensions.length; idx++) {\n\t\t\tconst extension = extensions[idx];\n\t\t\tresult.set(extension.identifier.id.toLowerCase(), extension);\n\t\t}\n\t\ttoGet = [];\n\t\tfor (const extension of extensions) {\n\t\t\tif (isNonEmptyArray(extension.properties.dependencies)) {\n\t\t\t\tfor (const id of extension.properties.dependencies) {\n\t\t\t\t\tif (!result.has(id.toLowerCase())) {\n\t\t\t\t\t\ttoGet.push(id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isNonEmptyArray(extension.properties.extensionPack)) {\n\t\t\t\tfor (const id of extension.properties.extensionPack) {\n\t\t\t\t\tif (!result.has(id.toLowerCase())) {\n\t\t\t\t\t\ttoGet.push(id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.getDependenciesAndPackedExtensionsRecursively(toGet, result, token);\n\t}\n\n\tprivate async checkForWorkspaceTrust(manifest: IExtensionManifest, requireTrust: boolean): Promise<void> {\n\t\tif (requireTrust || this.extensionManifestPropertiesService.getExtensionUntrustedWorkspaceSupportType(manifest) === false) {\n\t\t\tconst buttons: WorkspaceTrustRequestButton[] = [];\n\t\t\tbuttons.push({ label: localize('extensionInstallWorkspaceTrustButton', \"Trust Workspace & Install\"), type: 'ContinueWithTrust' });\n\t\t\tif (!requireTrust) {\n\t\t\t\tbuttons.push({ label: localize('extensionInstallWorkspaceTrustContinueButton', \"Install\"), type: 'ContinueWithoutTrust' });\n\t\t\t}\n\t\t\tbuttons.push({ label: localize('extensionInstallWorkspaceTrustManageButton', \"Learn More\"), type: 'Manage' });\n\t\t\tconst trustState = await this.workspaceTrustRequestService.requestWorkspaceTrust({\n\t\t\t\tmessage: localize('extensionInstallWorkspaceTrustMessage', \"Enabling this extension requires a trusted workspace.\"),\n\t\t\t\tbuttons\n\t\t\t});\n\n\t\t\tif (trustState === undefined) {\n\t\t\t\tthrow new CancellationError();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async checkInstallingExtensionOnWeb(extension: IGalleryExtension, manifest: IExtensionManifest): Promise<void> {\n\t\tif (this.servers.length !== 1 || this.servers[0] !== this.extensionManagementServerService.webExtensionManagementServer) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst nonWebExtensions = [];\n\t\tif (manifest.extensionPack?.length) {\n\t\t\tconst extensions = await this.extensionGalleryService.getExtensions(manifest.extensionPack.map(id => ({ id })), CancellationToken.None);\n\t\t\tfor (const extension of extensions) {\n\t\t\t\tif (await this.servers[0].extensionManagementService.canInstall(extension) !== true) {\n\t\t\t\t\tnonWebExtensions.push(extension);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (nonWebExtensions.length && nonWebExtensions.length === extensions.length) {\n\t\t\t\tthrow new ExtensionManagementError('Not supported in Web', ExtensionManagementErrorCode.Unsupported);\n\t\t\t}\n\t\t}\n\n\t\tconst productName = localize('VS Code for Web', \"{0} for the Web\", this.productService.nameLong);\n\t\tconst virtualWorkspaceSupport = this.extensionManifestPropertiesService.getExtensionVirtualWorkspaceSupportType(manifest);\n\t\tconst virtualWorkspaceSupportReason = getWorkspaceSupportTypeMessage(manifest.capabilities?.virtualWorkspaces);\n\t\tconst hasLimitedSupport = virtualWorkspaceSupport === 'limited' || !!virtualWorkspaceSupportReason;\n\n\t\tif (!nonWebExtensions.length && !hasLimitedSupport) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst limitedSupportMessage = localize('limited support', \"'{0}' has limited functionality in {1}.\", extension.displayName || extension.identifier.id, productName);\n\t\tlet message: string;\n\t\tlet buttons: IPromptButton<void>[] = [];\n\t\tlet detail: string | undefined;\n\n\t\tconst installAnywayButton: IPromptButton<void> = {\n\t\t\tlabel: localize({ key: 'install anyways', comment: ['&& denotes a mnemonic'] }, \"&&Install Anyway\"),\n\t\t\trun: () => { }\n\t\t};\n\n\t\tconst showExtensionsButton: IPromptButton<void> = {\n\t\t\tlabel: localize({ key: 'showExtensions', comment: ['&& denotes a mnemonic'] }, \"&&Show Extensions\"),\n\t\t\trun: () => this.instantiationService.invokeFunction(accessor => accessor.get(ICommandService).executeCommand('extension.open', extension.identifier.id, 'extensionPack'))\n\t\t};\n\n\t\tif (nonWebExtensions.length && hasLimitedSupport) {\n\t\t\tmessage = limitedSupportMessage;\n\t\t\tdetail = `${virtualWorkspaceSupportReason ? `${virtualWorkspaceSupportReason}\\n` : ''}${localize('non web extensions detail', \"Contains extensions which are not supported.\")}`;\n\t\t\tbuttons = [\n\t\t\t\tinstallAnywayButton,\n\t\t\t\tshowExtensionsButton\n\t\t\t];\n\t\t}\n\n\t\telse if (hasLimitedSupport) {\n\t\t\tmessage = limitedSupportMessage;\n\t\t\tdetail = virtualWorkspaceSupportReason || undefined;\n\t\t\tbuttons = [installAnywayButton];\n\t\t}\n\n\t\telse {\n\t\t\tmessage = localize('non web extensions', \"'{0}' contains extensions which are not supported in {1}.\", extension.displayName || extension.identifier.id, productName);\n\t\t\tbuttons = [\n\t\t\t\tinstallAnywayButton,\n\t\t\t\tshowExtensionsButton\n\t\t\t];\n\t\t}\n\n\t\tawait this.dialogService.prompt({\n\t\t\ttype: Severity.Info,\n\t\t\tmessage,\n\t\t\tdetail,\n\t\t\tbuttons,\n\t\t\tcancelButton: {\n\t\t\t\trun: () => { throw new CancellationError(); }\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _targetPlatformPromise: Promise<TargetPlatform> | undefined;\n\tgetTargetPlatform(): Promise<TargetPlatform> {\n\t\tif (!this._targetPlatformPromise) {\n\t\t\tthis._targetPlatformPromise = computeTargetPlatform(this.fileService, this.logService);\n\t\t}\n\t\treturn this._targetPlatformPromise;\n\t}\n\n\tasync cleanUp(): Promise<void> {\n\t\tawait Promise.allSettled(this.servers.map(server => server.extensionManagementService.cleanUp()));\n\t}\n\n\ttoggleApplicationScope(extension: ILocalExtension, fromProfileLocation: URI): Promise<ILocalExtension> {\n\t\tconst server = this.getServer(extension);\n\t\tif (server) {\n\t\t\treturn server.extensionManagementService.toggleApplicationScope(extension, fromProfileLocation);\n\t\t}\n\t\tthrow new Error('Not Supported');\n\t}\n\n\tcopyExtensions(from: URI, to: URI): Promise<void> {\n\t\tif (this.extensionManagementServerService.remoteExtensionManagementServer) {\n\t\t\tthrow new Error('Not Supported');\n\t\t}\n\t\tif (this.extensionManagementServerService.localExtensionManagementServer) {\n\t\t\treturn this.extensionManagementServerService.localExtensionManagementServer.extensionManagementService.copyExtensions(from, to);\n\t\t}\n\t\tif (this.extensionManagementServerService.webExtensionManagementServer) {\n\t\t\treturn this.extensionManagementServerService.webExtensionManagementServer.extensionManagementService.copyExtensions(from, to);\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\tregisterParticipant() { throw new Error('Not Supported'); }\n\tinstallExtensionsFromProfile(extensions: IExtensionIdentifier[], fromProfileLocation: URI, toProfileLocation: URI): Promise<ILocalExtension[]> { throw new Error('Not Supported'); }\n\n\tisPublisherTrusted(extension: IGalleryExtension): boolean {\n\t\tconst publisher = extension.publisher.toLowerCase();\n\t\tif (this.defaultTrustedPublishers.includes(publisher) || this.defaultTrustedPublishers.includes(extension.publisherDisplayName.toLowerCase())) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check if the extension is allowed by publisher or extension id\n\t\tif (this.allowedExtensionsService.allowedExtensionsConfigValue && this.allowedExtensionsService.isAllowed(extension)) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn this.isPublisherUserTrusted(publisher);\n\t}\n\n\tprivate isPublisherUserTrusted(publisher: string): boolean {\n\t\tconst trustedPublishers = this.getTrustedPublishersFromStorage();\n\t\treturn !!trustedPublishers[publisher];\n\t}\n\n\tgetTrustedPublishers(): IPublisherInfo[] {\n\t\tconst trustedPublishers = this.getTrustedPublishersFromStorage();\n\t\treturn Object.keys(trustedPublishers).map(publisher => trustedPublishers[publisher]);\n\t}\n\n\ttrustPublishers(...publishers: IPublisherInfo[]): void {\n\t\tconst trustedPublishers = this.getTrustedPublishersFromStorage();\n\t\tfor (const publisher of publishers) {\n\t\t\ttrustedPublishers[publisher.publisher.toLowerCase()] = publisher;\n\t\t}\n\t\tthis.storageService.store(TrustedPublishersStorageKey, JSON.stringify(trustedPublishers), StorageScope.APPLICATION, StorageTarget.USER);\n\t}\n\n\tuntrustPublishers(...publishers: string[]): void {\n\t\tconst trustedPublishers = this.getTrustedPublishersFromStorage();\n\t\tfor (const publisher of publishers) {\n\t\t\tdelete trustedPublishers[publisher.toLowerCase()];\n\t\t}\n\t\tthis.storageService.store(TrustedPublishersStorageKey, JSON.stringify(trustedPublishers), StorageScope.APPLICATION, StorageTarget.USER);\n\t}\n\n\tprivate getTrustedPublishersFromStorage(): IStringDictionary<IPublisherInfo> {\n\t\tconst trustedPublishers = this.storageService.getObject<IStringDictionary<IPublisherInfo>>(TrustedPublishersStorageKey, StorageScope.APPLICATION, {});\n\t\tif (Array.isArray(trustedPublishers)) {\n\t\t\tthis.storageService.remove(TrustedPublishersStorageKey, StorageScope.APPLICATION);\n\t\t\treturn {};\n\t\t}\n\t\treturn Object.keys(trustedPublishers).reduce<IStringDictionary<IPublisherInfo>>((result, publisher) => {\n\t\t\tresult[publisher.toLowerCase()] = trustedPublishers[publisher];\n\t\t\treturn result;\n\t\t}, {});\n\t}\n}\n\nclass WorkspaceExtensionsManagementService extends Disposable {\n\n\tprivate static readonly WORKSPACE_EXTENSIONS_KEY = 'workspaceExtensions.locations';\n\n\tprivate readonly _onDidChangeInvalidExtensions = this._register(new Emitter<ILocalExtension[]>());\n\treadonly onDidChangeInvalidExtensions = this._onDidChangeInvalidExtensions.event;\n\n\tprivate readonly extensions: ILocalExtension[] = [];\n\tprivate readonly initializePromise: Promise<void>;\n\n\tprivate readonly invalidExtensionWatchers = this._register(new DisposableStore());\n\n\tconstructor(\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IWorkspaceContextService private readonly workspaceService: IWorkspaceContextService,\n\t\t@IExtensionsScannerService private readonly extensionsScannerService: IExtensionsScannerService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(Event.debounce<FileChangesEvent, FileChangesEvent[]>(this.fileService.onDidFilesChange, (last, e) => {\n\t\t\t(last = last ?? []).push(e);\n\t\t\treturn last;\n\t\t}, 1000)(events => {\n\t\t\tconst changedInvalidExtensions = this.extensions.filter(extension => !extension.isValid && events.some(e => e.affects(extension.location)));\n\t\t\tif (changedInvalidExtensions.length) {\n\t\t\t\tthis.checkExtensionsValidity(changedInvalidExtensions);\n\t\t\t}\n\t\t}));\n\n\t\tthis.initializePromise = this.initialize();\n\t}\n\n\tprivate async initialize(): Promise<void> {\n\t\tconst existingLocations = this.getInstalledWorkspaceExtensionsLocations();\n\t\tif (!existingLocations.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait Promise.allSettled(existingLocations.map(async location => {\n\t\t\tif (!this.workspaceService.isInsideWorkspace(location)) {\n\t\t\t\tthis.logService.info(`Removing the workspace extension ${location.toString()} as it is not inside the workspace`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!(await this.fileService.exists(location))) {\n\t\t\t\tthis.logService.info(`Removing the workspace extension ${location.toString()} as it does not exist`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tconst extension = await this.scanWorkspaceExtension(location);\n\t\t\t\tif (extension) {\n\t\t\t\t\tthis.extensions.push(extension);\n\t\t\t\t} else {\n\t\t\t\t\tthis.logService.info(`Skipping workspace extension ${location.toString()} as it does not exist`);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis.logService.error('Skipping the workspace extension', location.toString(), error);\n\t\t\t}\n\t\t}));\n\n\t\tthis.saveWorkspaceExtensions();\n\t}\n\n\tprivate watchInvalidExtensions(): void {\n\t\tthis.invalidExtensionWatchers.clear();\n\t\tfor (const extension of this.extensions) {\n\t\t\tif (!extension.isValid) {\n\t\t\t\tthis.invalidExtensionWatchers.add(this.fileService.watch(extension.location));\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async checkExtensionsValidity(extensions: ILocalExtension[]): Promise<void> {\n\t\tconst validExtensions: ILocalExtension[] = [];\n\t\tawait Promise.all(extensions.map(async extension => {\n\t\t\tconst newExtension = await this.scanWorkspaceExtension(extension.location);\n\t\t\tif (newExtension?.isValid) {\n\t\t\t\tvalidExtensions.push(newExtension);\n\t\t\t}\n\t\t}));\n\n\t\tlet changed = false;\n\t\tfor (const extension of validExtensions) {\n\t\t\tconst index = this.extensions.findIndex(e => this.uriIdentityService.extUri.isEqual(e.location, extension.location));\n\t\t\tif (index !== -1) {\n\t\t\t\tchanged = true;\n\t\t\t\tthis.extensions.splice(index, 1, extension);\n\t\t\t}\n\t\t}\n\n\t\tif (changed) {\n\t\t\tthis.saveWorkspaceExtensions();\n\t\t\tthis._onDidChangeInvalidExtensions.fire(validExtensions);\n\t\t}\n\t}\n\n\tasync getInstalled(includeInvalid: boolean): Promise<ILocalExtension[]> {\n\t\tawait this.initializePromise;\n\t\treturn this.extensions.filter(e => includeInvalid || e.isValid);\n\t}\n\n\tasync install(extension: IResourceExtension): Promise<ILocalExtension> {\n\t\tawait this.initializePromise;\n\n\t\tconst workspaceExtension = await this.scanWorkspaceExtension(extension.location);\n\t\tif (!workspaceExtension) {\n\t\t\tthrow new Error('Cannot install the extension as it does not exist.');\n\t\t}\n\n\t\tconst existingExtensionIndex = this.extensions.findIndex(e => areSameExtensions(e.identifier, extension.identifier));\n\t\tif (existingExtensionIndex === -1) {\n\t\t\tthis.extensions.push(workspaceExtension);\n\t\t} else {\n\t\t\tthis.extensions.splice(existingExtensionIndex, 1, workspaceExtension);\n\t\t}\n\n\t\tthis.saveWorkspaceExtensions();\n\t\tthis.telemetryService.publicLog2<{}, {\n\t\t\towner: 'sandy081';\n\t\t\tcomment: 'Install workspace extension';\n\t\t}>('workspaceextension:install');\n\n\t\treturn workspaceExtension;\n\t}\n\n\tasync uninstall(extension: ILocalExtension): Promise<void> {\n\t\tawait this.initializePromise;\n\n\t\tconst existingExtensionIndex = this.extensions.findIndex(e => areSameExtensions(e.identifier, extension.identifier));\n\t\tif (existingExtensionIndex !== -1) {\n\t\t\tthis.extensions.splice(existingExtensionIndex, 1);\n\t\t\tthis.saveWorkspaceExtensions();\n\t\t}\n\n\t\tthis.telemetryService.publicLog2<{}, {\n\t\t\towner: 'sandy081';\n\t\t\tcomment: 'Uninstall workspace extension';\n\t\t}>('workspaceextension:uninstall');\n\t}\n\n\tgetInstalledWorkspaceExtensionsLocations(): URI[] {\n\t\tconst locations: URI[] = [];\n\t\ttry {\n\t\t\tconst parsed = JSON.parse(this.storageService.get(WorkspaceExtensionsManagementService.WORKSPACE_EXTENSIONS_KEY, StorageScope.WORKSPACE, '[]'));\n\t\t\tif (Array.isArray(locations)) {\n\t\t\t\tfor (const location of parsed) {\n\t\t\t\t\tif (isString(location)) {\n\t\t\t\t\t\tif (this.workspaceService.getWorkbenchState() === WorkbenchState.FOLDER) {\n\t\t\t\t\t\t\tlocations.push(this.workspaceService.getWorkspace().folders[0].toResource(location));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.logService.warn(`Invalid value for 'extensions' in workspace storage: ${location}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlocations.push(URI.revive(location));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.logService.warn(`Invalid value for 'extensions' in workspace storage: ${locations}`);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.logService.warn(`Error parsing workspace extensions locations: ${getErrorMessage(error)}`);\n\t\t}\n\t\treturn locations;\n\t}\n\n\tprivate saveWorkspaceExtensions(): void {\n\t\tconst locations = this.extensions.map(extension => extension.location);\n\t\tif (this.workspaceService.getWorkbenchState() === WorkbenchState.FOLDER) {\n\t\t\tthis.storageService.store(WorkspaceExtensionsManagementService.WORKSPACE_EXTENSIONS_KEY,\n\t\t\t\tJSON.stringify(coalesce(locations\n\t\t\t\t\t.map(location => this.uriIdentityService.extUri.relativePath(this.workspaceService.getWorkspace().folders[0].uri, location)))),\n\t\t\t\tStorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\t} else {\n\t\t\tthis.storageService.store(WorkspaceExtensionsManagementService.WORKSPACE_EXTENSIONS_KEY, JSON.stringify(locations), StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\t}\n\t\tthis.watchInvalidExtensions();\n\t}\n\n\tasync scanWorkspaceExtension(location: URI): Promise<ILocalExtension | null> {\n\t\tconst scannedExtension = await this.extensionsScannerService.scanExistingExtension(location, ExtensionType.User, { includeInvalid: true });\n\t\treturn scannedExtension ? this.toLocalWorkspaceExtension(scannedExtension) : null;\n\t}\n\n\tasync toLocalWorkspaceExtension(extension: IScannedExtension): Promise<ILocalExtension> {\n\t\tconst stat = await this.fileService.resolve(extension.location);\n\t\tlet readmeUrl: URI | undefined;\n\t\tlet changelogUrl: URI | undefined;\n\t\tif (stat.children) {\n\t\t\treadmeUrl = stat.children.find(({ name }) => /^readme(\\.txt|\\.md|)$/i.test(name))?.resource;\n\t\t\tchangelogUrl = stat.children.find(({ name }) => /^changelog(\\.txt|\\.md|)$/i.test(name))?.resource;\n\t\t}\n\t\tconst validations: [Severity, string][] = [...extension.validations];\n\t\tlet isValid = extension.isValid;\n\t\tif (extension.manifest.main) {\n\t\t\tif (!(await this.fileService.exists(this.uriIdentityService.extUri.joinPath(extension.location, extension.manifest.main)))) {\n\t\t\t\tisValid = false;\n\t\t\t\tvalidations.push([Severity.Error, localize('main.notFound', \"Cannot activate because {0} not found\", extension.manifest.main)]);\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\tidentifier: extension.identifier,\n\t\t\ttype: extension.type,\n\t\t\tisBuiltin: extension.isBuiltin || !!extension.metadata?.isBuiltin,\n\t\t\tlocation: extension.location,\n\t\t\tmanifest: extension.manifest,\n\t\t\ttargetPlatform: extension.targetPlatform,\n\t\t\tvalidations,\n\t\t\tisValid,\n\t\t\treadmeUrl,\n\t\t\tchangelogUrl,\n\t\t\tpublisherDisplayName: extension.metadata?.publisherDisplayName,\n\t\t\tpublisherId: extension.metadata?.publisherId || null,\n\t\t\tisApplicationScoped: !!extension.metadata?.isApplicationScoped,\n\t\t\tisMachineScoped: !!extension.metadata?.isMachineScoped,\n\t\t\tisPreReleaseVersion: !!extension.metadata?.isPreReleaseVersion,\n\t\t\thasPreReleaseVersion: !!extension.metadata?.hasPreReleaseVersion,\n\t\t\tpreRelease: !!extension.metadata?.preRelease,\n\t\t\tinstalledTimestamp: extension.metadata?.installedTimestamp,\n\t\t\tupdated: !!extension.metadata?.updated,\n\t\t\tpinned: !!extension.metadata?.pinned,\n\t\t\tisWorkspaceScoped: true,\n\t\t\tprivate: false,\n\t\t\tsource: 'resource',\n\t\t\tsize: extension.metadata?.size ?? 0,\n\t\t};\n\t}\n}\n"]}