{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/textMate/browser/textMateTokenizationFeature.contribution.ts","vs/workbench/services/textMate/browser/textMateTokenizationFeature.contribution.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,iBAAiB,EAAqB,MAAM,yDAAyD,CAAC;AAC/G,OAAO,EAAE,4BAA4B,EAAE,MAAM,kCAAkC,CAAC;AAChF,OAAO,EAAE,2BAA2B,EAAE,MAAM,sCAAsC,CAAC;AACnF,OAAO,EAA0C,8BAA8B,EAAE,MAAM,kCAAkC,CAAC;AAC1H,OAAO,EAAE,gBAAgB,EAAE,MAAM,kDAAkD,CAAC;AAGpF,OAAO,EAAE,oBAAoB,EAAE,MAAM,wCAAwC,CAAC;AAC9E,OAAO,EAAE,gBAAgB,EAAE,MAAM,oCAAoC,CAAC;AACtE,OAAO,EAAE,SAAS,EAAE,MAAM,sCAAsC,CAAC;AAEjE;;GAEG;AACH,IAAM,gCAAgC,GAAtC,MAAM,gCAAgC;aAErB,OAAE,GAAG,oDAAH,AAAuD,CAAC;IAE1E,YAC+B,4BAA0D,IACrF,CAAC;;AANA,gCAAgC;IAKnC,WAAA,4BAA4B,CAAA;GALzB,gCAAgC,CAOrC;AAED,iBAAiB,CAAC,4BAA4B,EAAE,2BAA2B,kCAA0B,CAAC;AAEtG,8BAA8B,CAAC,gCAAgC,CAAC,EAAE,EAAE,gCAAgC,sCAA8B,CAAC;AAEnI,gBAAgB,CAAC,eAAe,CAAC,mCAAmC,EAAE,KAAK,EAAE,QAA0B,EAAE,QAAc,EAAqC,EAAE;IAC7J,MAAM,gBAAgB,GAAG,QAAQ,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;IACxD,MAAM,SAAS,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,gBAAgB,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,SAAS,CAAC;IAC1G,IAAI,CAAC,SAAS,EAAE,CAAC;QAChB,MAAM,IAAI,KAAK,CAAC,0CAA0C,QAAQ,EAAE,CAAC,CAAC;IACvE,CAAC;IAED,MAAM,SAAS,GAAG,MAAM,oBAAoB,CAAC,WAAW,CAAC,SAAS,CAAC,aAAa,EAAE,CAAC,CAAC;IACpF,IAAI,CAAC,SAAS,EAAE,CAAC;QAChB,MAAM,IAAI,KAAK,CAAC,yCAAyC,SAAS,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;IACvF,CAAC;IAED,MAAM,SAAS,GAAG,IAAI,SAAS,EAAE,CAAC;IAClC,IAAI,KAAK,GAAG,SAAS,CAAC,eAAe,EAAE,CAAC;IACxC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,SAAS,CAAC,YAAY,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC;QACpD,KAAK,GAAG,SAAS,CAAC,eAAe,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC,QAAQ,CAAC;IACtF,CAAC;IACD,SAAS,CAAC,IAAI,EAAE,CAAC;IACjB,OAAO,EAAE,YAAY,EAAE,SAAS,CAAC,OAAO,EAAE,EAAE,CAAC;AAC9C,CAAC,CAAC,CAAC","file":"textMateTokenizationFeature.contribution.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { registerSingleton, InstantiationType } from '../../../../platform/instantiation/common/extensions.js';\nimport { ITextMateTokenizationService } from './textMateTokenizationFeature.js';\nimport { TextMateTokenizationFeature } from './textMateTokenizationFeatureImpl.js';\nimport { IWorkbenchContribution, WorkbenchPhase, registerWorkbenchContribution2 } from '../../../common/contributions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ServicesAccessor } from '../../../../editor/browser/editorExtensions.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { TokenizationRegistry } from '../../../../editor/common/languages.js';\nimport { ITextFileService } from '../../textfile/common/textfiles.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\n\n/**\n * Makes sure the ITextMateTokenizationService is instantiated\n */\nclass TextMateTokenizationInstantiator implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.textMateTokenizationInstantiator';\n\n\tconstructor(\n\t\t@ITextMateTokenizationService _textMateTokenizationService: ITextMateTokenizationService\n\t) { }\n}\n\nregisterSingleton(ITextMateTokenizationService, TextMateTokenizationFeature, InstantiationType.Eager);\n\nregisterWorkbenchContribution2(TextMateTokenizationInstantiator.ID, TextMateTokenizationInstantiator, WorkbenchPhase.BlockRestore);\n\nCommandsRegistry.registerCommand('_workbench.colorizeTextMateTokens', async (accessor: ServicesAccessor, resource?: URI): Promise<{ tokenizeTime: number }> => {\n\tconst textModelService = accessor.get(ITextFileService);\n\tconst textModel = resource ? (await textModelService.files.resolve(resource)).textEditorModel : undefined;\n\tif (!textModel) {\n\t\tthrow new Error(`Cannot resolve text model for resource ${resource}`);\n\t}\n\n\tconst tokenizer = await TokenizationRegistry.getOrCreate(textModel.getLanguageId());\n\tif (!tokenizer) {\n\t\tthrow new Error(`Cannot resolve tokenizer for language ${textModel.getLanguageId()}`);\n\t}\n\n\tconst stopwatch = new StopWatch();\n\tlet state = tokenizer.getInitialState();\n\tfor (let i = 1; i <= textModel.getLineCount(); i++) {\n\t\tstate = tokenizer.tokenizeEncoded(textModel.getLineContent(i), true, state).endState;\n\t}\n\tstopwatch.stop();\n\treturn { tokenizeTime: stopwatch.elapsed() };\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { registerSingleton, InstantiationType } from '../../../../platform/instantiation/common/extensions.js';\nimport { ITextMateTokenizationService } from './textMateTokenizationFeature.js';\nimport { TextMateTokenizationFeature } from './textMateTokenizationFeatureImpl.js';\nimport { IWorkbenchContribution, WorkbenchPhase, registerWorkbenchContribution2 } from '../../../common/contributions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ServicesAccessor } from '../../../../editor/browser/editorExtensions.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { TokenizationRegistry } from '../../../../editor/common/languages.js';\nimport { ITextFileService } from '../../textfile/common/textfiles.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\n\n/**\n * Makes sure the ITextMateTokenizationService is instantiated\n */\nclass TextMateTokenizationInstantiator implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.textMateTokenizationInstantiator';\n\n\tconstructor(\n\t\t@ITextMateTokenizationService _textMateTokenizationService: ITextMateTokenizationService\n\t) { }\n}\n\nregisterSingleton(ITextMateTokenizationService, TextMateTokenizationFeature, InstantiationType.Eager);\n\nregisterWorkbenchContribution2(TextMateTokenizationInstantiator.ID, TextMateTokenizationInstantiator, WorkbenchPhase.BlockRestore);\n\nCommandsRegistry.registerCommand('_workbench.colorizeTextMateTokens', async (accessor: ServicesAccessor, resource?: URI): Promise<{ tokenizeTime: number }> => {\n\tconst textModelService = accessor.get(ITextFileService);\n\tconst textModel = resource ? (await textModelService.files.resolve(resource)).textEditorModel : undefined;\n\tif (!textModel) {\n\t\tthrow new Error(`Cannot resolve text model for resource ${resource}`);\n\t}\n\n\tconst tokenizer = await TokenizationRegistry.getOrCreate(textModel.getLanguageId());\n\tif (!tokenizer) {\n\t\tthrow new Error(`Cannot resolve tokenizer for language ${textModel.getLanguageId()}`);\n\t}\n\n\tconst stopwatch = new StopWatch();\n\tlet state = tokenizer.getInitialState();\n\tfor (let i = 1; i <= textModel.getLineCount(); i++) {\n\t\tstate = tokenizer.tokenizeEncoded(textModel.getLineContent(i), true, state).endState;\n\t}\n\tstopwatch.stop();\n\treturn { tokenizeTime: stopwatch.elapsed() };\n});\n"]}