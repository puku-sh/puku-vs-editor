{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/label/test/browser/label.test.ts","vs/workbench/services/label/test/browser/label.test.ts"],"names":[],"mappings":"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","file":"label.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as resources from '../../../../../base/common/resources.js';\nimport assert from 'assert';\nimport { TestEnvironmentService, TestLifecycleService, TestPathService, TestRemoteAgentService } from '../../../../test/browser/workbenchTestServices.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { LabelService } from '../../common/labelService.js';\nimport { TestContextService, TestStorageService } from '../../../../test/common/workbenchTestServices.js';\nimport { WorkspaceFolder } from '../../../../../platform/workspace/common/workspace.js';\nimport { TestWorkspace, Workspace } from '../../../../../platform/workspace/test/common/testWorkspace.js';\nimport { isWindows } from '../../../../../base/common/platform.js';\nimport { StorageScope, StorageTarget } from '../../../../../platform/storage/common/storage.js';\nimport { Memento } from '../../../../common/memento.js';\nimport { ResourceLabelFormatter } from '../../../../../platform/label/common/label.js';\nimport { sep } from '../../../../../base/common/path.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\n\nsuite('URI Label', () => {\n\tlet labelService: LabelService;\n\tlet storageService: TestStorageService;\n\n\tsetup(() => {\n\t\tstorageService = new TestStorageService();\n\t\tlabelService = new LabelService(TestEnvironmentService, new TestContextService(), new TestPathService(URI.file('/foobar')), new TestRemoteAgentService(), storageService, new TestLifecycleService());\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('custom scheme', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'LABEL/${path}/${authority}/END',\n\t\t\t\tseparator: '/',\n\t\t\t\ttildify: true,\n\t\t\t\tnormalizeDriveLetter: true\n\t\t\t}\n\t\t});\n\n\t\tconst uri1 = URI.parse('vscode://microsoft.com/1/2/3/4/5');\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), 'LABEL//1/2/3/4/5/microsoft.com/END');\n\t\tassert.strictEqual(labelService.getUriBasenameLabel(uri1), 'END');\n\t});\n\n\ttest('file scheme', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'file',\n\t\t\tformatting: {\n\t\t\t\tlabel: '${path}',\n\t\t\t\tseparator: sep,\n\t\t\t\ttildify: !isWindows,\n\t\t\t\tnormalizeDriveLetter: isWindows\n\t\t\t}\n\t\t});\n\n\t\tconst uri1 = TestWorkspace.folders[0].uri.with({ path: TestWorkspace.folders[0].uri.path.concat('/a/b/c/d') });\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: true }), isWindows ? 'a\\\\b\\\\c\\\\d' : 'a/b/c/d');\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), isWindows ? 'C:\\\\testWorkspace\\\\a\\\\b\\\\c\\\\d' : '/testWorkspace/a/b/c/d');\n\t\tassert.strictEqual(labelService.getUriBasenameLabel(uri1), 'd');\n\n\t\tconst uri2 = URI.file('c:\\\\1/2/3');\n\t\tassert.strictEqual(labelService.getUriLabel(uri2, { relative: false }), isWindows ? 'C:\\\\1\\\\2\\\\3' : '/c:\\\\1/2/3');\n\t\tassert.strictEqual(labelService.getUriBasenameLabel(uri2), '3');\n\t});\n\n\ttest('separator', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'LABEL\\\\${path}\\\\${authority}\\\\END',\n\t\t\t\tseparator: '\\\\',\n\t\t\t\ttildify: true,\n\t\t\t\tnormalizeDriveLetter: true\n\t\t\t}\n\t\t});\n\n\t\tconst uri1 = URI.parse('vscode://microsoft.com/1/2/3/4/5');\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), 'LABEL\\\\\\\\1\\\\2\\\\3\\\\4\\\\5\\\\microsoft.com\\\\END');\n\t\tassert.strictEqual(labelService.getUriBasenameLabel(uri1), 'END');\n\t});\n\n\ttest('custom authority', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tauthority: 'micro*',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'LABEL/${path}/${authority}/END',\n\t\t\t\tseparator: '/'\n\t\t\t}\n\t\t});\n\n\t\tconst uri1 = URI.parse('vscode://microsoft.com/1/2/3/4/5');\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), 'LABEL//1/2/3/4/5/microsoft.com/END');\n\t\tassert.strictEqual(labelService.getUriBasenameLabel(uri1), 'END');\n\t});\n\n\ttest('mulitple authority', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tauthority: 'not_matching_but_long',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'first',\n\t\t\t\tseparator: '/'\n\t\t\t}\n\t\t});\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tauthority: 'microsof*',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'second',\n\t\t\t\tseparator: '/'\n\t\t\t}\n\t\t});\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tauthority: 'mi*',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'third',\n\t\t\t\tseparator: '/'\n\t\t\t}\n\t\t});\n\n\t\t// Make sure the most specific authority is picked\n\t\tconst uri1 = URI.parse('vscode://microsoft.com/1/2/3/4/5');\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), 'second');\n\t\tassert.strictEqual(labelService.getUriBasenameLabel(uri1), 'second');\n\t});\n\n\ttest('custom query', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'LABEL${query.prefix}: ${query.path}/END',\n\t\t\t\tseparator: '/',\n\t\t\t\ttildify: true,\n\t\t\t\tnormalizeDriveLetter: true\n\t\t\t}\n\t\t});\n\n\t\tconst uri1 = URI.parse(`vscode://microsoft.com/1/2/3/4/5?${encodeURIComponent(JSON.stringify({ prefix: 'prefix', path: 'path' }))}`);\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), 'LABELprefix: path/END');\n\t});\n\n\ttest('custom query without value', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'LABEL${query.prefix}: ${query.path}/END',\n\t\t\t\tseparator: '/',\n\t\t\t\ttildify: true,\n\t\t\t\tnormalizeDriveLetter: true\n\t\t\t}\n\t\t});\n\n\t\tconst uri1 = URI.parse(`vscode://microsoft.com/1/2/3/4/5?${encodeURIComponent(JSON.stringify({ path: 'path' }))}`);\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), 'LABEL: path/END');\n\t});\n\n\ttest('custom query without query json', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'LABEL${query.prefix}: ${query.path}/END',\n\t\t\t\tseparator: '/',\n\t\t\t\ttildify: true,\n\t\t\t\tnormalizeDriveLetter: true\n\t\t\t}\n\t\t});\n\n\t\tconst uri1 = URI.parse('vscode://microsoft.com/1/2/3/4/5?path=foo');\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), 'LABEL: /END');\n\t});\n\n\ttest('custom query without query', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'LABEL${query.prefix}: ${query.path}/END',\n\t\t\t\tseparator: '/',\n\t\t\t\ttildify: true,\n\t\t\t\tnormalizeDriveLetter: true\n\t\t\t}\n\t\t});\n\n\t\tconst uri1 = URI.parse('vscode://microsoft.com/1/2/3/4/5');\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), 'LABEL: /END');\n\t});\n\n\n\ttest('label caching', () => {\n\t\tconst m = new Memento('cachedResourceLabelFormatters2', storageService).getMemento(StorageScope.PROFILE, StorageTarget.MACHINE);\n\t\tconst makeFormatter = (scheme: string): ResourceLabelFormatter => ({ formatting: { label: `\\${path} (${scheme})`, separator: '/' }, scheme });\n\t\tassert.deepStrictEqual(m, {});\n\n\t\t// registers a new formatter:\n\t\tlabelService.registerCachedFormatter(makeFormatter('a'));\n\t\tassert.deepStrictEqual(m, { formatters: [makeFormatter('a')] });\n\n\t\t// registers a 2nd formatter:\n\t\tlabelService.registerCachedFormatter(makeFormatter('b'));\n\t\tassert.deepStrictEqual(m, { formatters: [makeFormatter('b'), makeFormatter('a')] });\n\n\t\t// promotes a formatter on re-register:\n\t\tlabelService.registerCachedFormatter(makeFormatter('a'));\n\t\tassert.deepStrictEqual(m, { formatters: [makeFormatter('a'), makeFormatter('b')] });\n\n\t\t// no-ops if already in first place:\n\t\tlabelService.registerCachedFormatter(makeFormatter('a'));\n\t\tassert.deepStrictEqual(m, { formatters: [makeFormatter('a'), makeFormatter('b')] });\n\n\t\t// limits the cache:\n\t\tfor (let i = 0; i < 100; i++) {\n\t\t\tlabelService.registerCachedFormatter(makeFormatter(`i${i}`));\n\t\t}\n\t\tconst expected: ResourceLabelFormatter[] = [];\n\t\tfor (let i = 50; i < 100; i++) {\n\t\t\texpected.unshift(makeFormatter(`i${i}`));\n\t\t}\n\t\tassert.deepStrictEqual(m, { formatters: expected });\n\n\t\tdelete (m as { formatters: unknown }).formatters;\n\t});\n});\n\n\nsuite('multi-root workspace', () => {\n\tlet labelService: LabelService;\n\tconst disposables = new DisposableStore();\n\n\tsetup(() => {\n\t\tconst sources = URI.file('folder1/src');\n\t\tconst tests = URI.file('folder1/test');\n\t\tconst other = URI.file('folder2');\n\n\t\tlabelService = disposables.add(new LabelService(\n\t\t\tTestEnvironmentService,\n\t\t\tnew TestContextService(\n\t\t\t\tnew Workspace('test-workspace', [\n\t\t\t\t\tnew WorkspaceFolder({ uri: sources, index: 0, name: 'Sources' }),\n\t\t\t\t\tnew WorkspaceFolder({ uri: tests, index: 1, name: 'Tests' }),\n\t\t\t\t\tnew WorkspaceFolder({ uri: other, index: 2, name: resources.basename(other) }),\n\t\t\t\t])),\n\t\t\tnew TestPathService(),\n\t\t\tnew TestRemoteAgentService(),\n\t\t\tdisposables.add(new TestStorageService()),\n\t\t\tdisposables.add(new TestLifecycleService())\n\t\t));\n\t});\n\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\ttest('labels of files in multiroot workspaces are the foldername followed by offset from the folder', () => {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'file',\n\t\t\tformatting: {\n\t\t\t\tlabel: '${authority}${path}',\n\t\t\t\tseparator: '/',\n\t\t\t\ttildify: false,\n\t\t\t\tnormalizeDriveLetter: false,\n\t\t\t\tauthorityPrefix: '//',\n\t\t\t\tworkspaceSuffix: ''\n\t\t\t}\n\t\t});\n\n\t\tconst tests = {\n\t\t\t'folder1/src/file': 'Sources • file',\n\t\t\t'folder1/src/folder/file': 'Sources • folder/file',\n\t\t\t'folder1/src': 'Sources',\n\t\t\t'folder1/other': '/folder1/other',\n\t\t\t'folder2/other': 'folder2 • other',\n\t\t};\n\n\t\tObject.entries(tests).forEach(([path, label]) => {\n\t\t\tconst generated = labelService.getUriLabel(URI.file(path), { relative: true });\n\t\t\tassert.strictEqual(generated, label);\n\t\t});\n\t});\n\n\ttest('labels with context after path', () => {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'file',\n\t\t\tformatting: {\n\t\t\t\tlabel: '${path} (${scheme})',\n\t\t\t\tseparator: '/',\n\t\t\t}\n\t\t});\n\n\t\tconst tests = {\n\t\t\t'folder1/src/file': 'Sources • file (file)',\n\t\t\t'folder1/src/folder/file': 'Sources • folder/file (file)',\n\t\t\t'folder1/src': 'Sources',\n\t\t\t'folder1/other': '/folder1/other (file)',\n\t\t\t'folder2/other': 'folder2 • other (file)',\n\t\t};\n\n\t\tObject.entries(tests).forEach(([path, label]) => {\n\t\t\tconst generated = labelService.getUriLabel(URI.file(path), { relative: true });\n\t\t\tassert.strictEqual(generated, label, path);\n\t\t});\n\t});\n\n\ttest('stripPathStartingSeparator', () => {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'file',\n\t\t\tformatting: {\n\t\t\t\tlabel: '${path}',\n\t\t\t\tseparator: '/',\n\t\t\t\tstripPathStartingSeparator: true\n\t\t\t}\n\t\t});\n\n\t\tconst tests = {\n\t\t\t'folder1/src/file': 'Sources • file',\n\t\t\t'other/blah': 'other/blah',\n\t\t};\n\n\t\tObject.entries(tests).forEach(([path, label]) => {\n\t\t\tconst generated = labelService.getUriLabel(URI.file(path), { relative: true });\n\t\t\tassert.strictEqual(generated, label, path);\n\t\t});\n\t});\n\n\ttest('relative label without formatter', () => {\n\t\tconst rootFolder = URI.parse('myscheme://myauthority/');\n\n\t\tlabelService = disposables.add(new LabelService(\n\t\t\tTestEnvironmentService,\n\t\t\tnew TestContextService(\n\t\t\t\tnew Workspace('test-workspace', [\n\t\t\t\t\tnew WorkspaceFolder({ uri: rootFolder, index: 0, name: 'FSProotFolder' }),\n\t\t\t\t])),\n\t\t\tnew TestPathService(undefined, rootFolder.scheme),\n\t\t\tnew TestRemoteAgentService(),\n\t\t\tdisposables.add(new TestStorageService()),\n\t\t\tdisposables.add(new TestLifecycleService())\n\t\t));\n\n\t\tconst generated = labelService.getUriLabel(URI.parse('myscheme://myauthority/some/folder/test.txt'), { relative: true });\n\t\tif (isWindows) {\n\t\t\tassert.strictEqual(generated, 'some\\\\folder\\\\test.txt');\n\t\t} else {\n\t\t\tassert.strictEqual(generated, 'some/folder/test.txt');\n\t\t}\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n\nsuite('workspace at FSP root', () => {\n\tlet labelService: LabelService;\n\n\tsetup(() => {\n\t\tconst rootFolder = URI.parse('myscheme://myauthority/');\n\n\t\tlabelService = new LabelService(\n\t\t\tTestEnvironmentService,\n\t\t\tnew TestContextService(\n\t\t\t\tnew Workspace('test-workspace', [\n\t\t\t\t\tnew WorkspaceFolder({ uri: rootFolder, index: 0, name: 'FSProotFolder' }),\n\t\t\t\t])),\n\t\t\tnew TestPathService(),\n\t\t\tnew TestRemoteAgentService(),\n\t\t\tnew TestStorageService(),\n\t\t\tnew TestLifecycleService()\n\t\t);\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'myscheme',\n\t\t\tformatting: {\n\t\t\t\tlabel: '${scheme}://${authority}${path}',\n\t\t\t\tseparator: '/',\n\t\t\t\ttildify: false,\n\t\t\t\tnormalizeDriveLetter: false,\n\t\t\t\tworkspaceSuffix: '',\n\t\t\t\tauthorityPrefix: '',\n\t\t\t\tstripPathStartingSeparator: false\n\t\t\t}\n\t\t});\n\t});\n\n\ttest('non-relative label', () => {\n\n\t\tconst tests = {\n\t\t\t'myscheme://myauthority/myFile1.txt': 'myscheme://myauthority/myFile1.txt',\n\t\t\t'myscheme://myauthority/folder/myFile2.txt': 'myscheme://myauthority/folder/myFile2.txt',\n\t\t};\n\n\t\tObject.entries(tests).forEach(([uriString, label]) => {\n\t\t\tconst generated = labelService.getUriLabel(URI.parse(uriString), { relative: false });\n\t\t\tassert.strictEqual(generated, label);\n\t\t});\n\t});\n\n\ttest('relative label', () => {\n\n\t\tconst tests = {\n\t\t\t'myscheme://myauthority/myFile1.txt': 'myFile1.txt',\n\t\t\t'myscheme://myauthority/folder/myFile2.txt': 'folder/myFile2.txt',\n\t\t};\n\n\t\tObject.entries(tests).forEach(([uriString, label]) => {\n\t\t\tconst generated = labelService.getUriLabel(URI.parse(uriString), { relative: true });\n\t\t\tassert.strictEqual(generated, label);\n\t\t});\n\t});\n\n\ttest('relative label with explicit path separator', () => {\n\t\tlet generated = labelService.getUriLabel(URI.parse('myscheme://myauthority/some/folder/test.txt'), { relative: true, separator: '/' });\n\t\tassert.strictEqual(generated, 'some/folder/test.txt');\n\n\t\tgenerated = labelService.getUriLabel(URI.parse('myscheme://myauthority/some/folder/test.txt'), { relative: true, separator: '\\\\' });\n\t\tassert.strictEqual(generated, 'some\\\\folder\\\\test.txt');\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as resources from '../../../../../base/common/resources.js';\nimport assert from 'assert';\nimport { TestEnvironmentService, TestLifecycleService, TestPathService, TestRemoteAgentService } from '../../../../test/browser/workbenchTestServices.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { LabelService } from '../../common/labelService.js';\nimport { TestContextService, TestStorageService } from '../../../../test/common/workbenchTestServices.js';\nimport { WorkspaceFolder } from '../../../../../platform/workspace/common/workspace.js';\nimport { TestWorkspace, Workspace } from '../../../../../platform/workspace/test/common/testWorkspace.js';\nimport { isWindows } from '../../../../../base/common/platform.js';\nimport { StorageScope, StorageTarget } from '../../../../../platform/storage/common/storage.js';\nimport { Memento } from '../../../../common/memento.js';\nimport { ResourceLabelFormatter } from '../../../../../platform/label/common/label.js';\nimport { sep } from '../../../../../base/common/path.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\n\nsuite('URI Label', () => {\n\tlet labelService: LabelService;\n\tlet storageService: TestStorageService;\n\n\tsetup(() => {\n\t\tstorageService = new TestStorageService();\n\t\tlabelService = new LabelService(TestEnvironmentService, new TestContextService(), new TestPathService(URI.file('/foobar')), new TestRemoteAgentService(), storageService, new TestLifecycleService());\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('custom scheme', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'LABEL/${path}/${authority}/END',\n\t\t\t\tseparator: '/',\n\t\t\t\ttildify: true,\n\t\t\t\tnormalizeDriveLetter: true\n\t\t\t}\n\t\t});\n\n\t\tconst uri1 = URI.parse('vscode://microsoft.com/1/2/3/4/5');\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), 'LABEL//1/2/3/4/5/microsoft.com/END');\n\t\tassert.strictEqual(labelService.getUriBasenameLabel(uri1), 'END');\n\t});\n\n\ttest('file scheme', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'file',\n\t\t\tformatting: {\n\t\t\t\tlabel: '${path}',\n\t\t\t\tseparator: sep,\n\t\t\t\ttildify: !isWindows,\n\t\t\t\tnormalizeDriveLetter: isWindows\n\t\t\t}\n\t\t});\n\n\t\tconst uri1 = TestWorkspace.folders[0].uri.with({ path: TestWorkspace.folders[0].uri.path.concat('/a/b/c/d') });\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: true }), isWindows ? 'a\\\\b\\\\c\\\\d' : 'a/b/c/d');\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), isWindows ? 'C:\\\\testWorkspace\\\\a\\\\b\\\\c\\\\d' : '/testWorkspace/a/b/c/d');\n\t\tassert.strictEqual(labelService.getUriBasenameLabel(uri1), 'd');\n\n\t\tconst uri2 = URI.file('c:\\\\1/2/3');\n\t\tassert.strictEqual(labelService.getUriLabel(uri2, { relative: false }), isWindows ? 'C:\\\\1\\\\2\\\\3' : '/c:\\\\1/2/3');\n\t\tassert.strictEqual(labelService.getUriBasenameLabel(uri2), '3');\n\t});\n\n\ttest('separator', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'LABEL\\\\${path}\\\\${authority}\\\\END',\n\t\t\t\tseparator: '\\\\',\n\t\t\t\ttildify: true,\n\t\t\t\tnormalizeDriveLetter: true\n\t\t\t}\n\t\t});\n\n\t\tconst uri1 = URI.parse('vscode://microsoft.com/1/2/3/4/5');\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), 'LABEL\\\\\\\\1\\\\2\\\\3\\\\4\\\\5\\\\microsoft.com\\\\END');\n\t\tassert.strictEqual(labelService.getUriBasenameLabel(uri1), 'END');\n\t});\n\n\ttest('custom authority', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tauthority: 'micro*',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'LABEL/${path}/${authority}/END',\n\t\t\t\tseparator: '/'\n\t\t\t}\n\t\t});\n\n\t\tconst uri1 = URI.parse('vscode://microsoft.com/1/2/3/4/5');\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), 'LABEL//1/2/3/4/5/microsoft.com/END');\n\t\tassert.strictEqual(labelService.getUriBasenameLabel(uri1), 'END');\n\t});\n\n\ttest('mulitple authority', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tauthority: 'not_matching_but_long',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'first',\n\t\t\t\tseparator: '/'\n\t\t\t}\n\t\t});\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tauthority: 'microsof*',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'second',\n\t\t\t\tseparator: '/'\n\t\t\t}\n\t\t});\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tauthority: 'mi*',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'third',\n\t\t\t\tseparator: '/'\n\t\t\t}\n\t\t});\n\n\t\t// Make sure the most specific authority is picked\n\t\tconst uri1 = URI.parse('vscode://microsoft.com/1/2/3/4/5');\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), 'second');\n\t\tassert.strictEqual(labelService.getUriBasenameLabel(uri1), 'second');\n\t});\n\n\ttest('custom query', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'LABEL${query.prefix}: ${query.path}/END',\n\t\t\t\tseparator: '/',\n\t\t\t\ttildify: true,\n\t\t\t\tnormalizeDriveLetter: true\n\t\t\t}\n\t\t});\n\n\t\tconst uri1 = URI.parse(`vscode://microsoft.com/1/2/3/4/5?${encodeURIComponent(JSON.stringify({ prefix: 'prefix', path: 'path' }))}`);\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), 'LABELprefix: path/END');\n\t});\n\n\ttest('custom query without value', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'LABEL${query.prefix}: ${query.path}/END',\n\t\t\t\tseparator: '/',\n\t\t\t\ttildify: true,\n\t\t\t\tnormalizeDriveLetter: true\n\t\t\t}\n\t\t});\n\n\t\tconst uri1 = URI.parse(`vscode://microsoft.com/1/2/3/4/5?${encodeURIComponent(JSON.stringify({ path: 'path' }))}`);\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), 'LABEL: path/END');\n\t});\n\n\ttest('custom query without query json', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'LABEL${query.prefix}: ${query.path}/END',\n\t\t\t\tseparator: '/',\n\t\t\t\ttildify: true,\n\t\t\t\tnormalizeDriveLetter: true\n\t\t\t}\n\t\t});\n\n\t\tconst uri1 = URI.parse('vscode://microsoft.com/1/2/3/4/5?path=foo');\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), 'LABEL: /END');\n\t});\n\n\ttest('custom query without query', function () {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'vscode',\n\t\t\tformatting: {\n\t\t\t\tlabel: 'LABEL${query.prefix}: ${query.path}/END',\n\t\t\t\tseparator: '/',\n\t\t\t\ttildify: true,\n\t\t\t\tnormalizeDriveLetter: true\n\t\t\t}\n\t\t});\n\n\t\tconst uri1 = URI.parse('vscode://microsoft.com/1/2/3/4/5');\n\t\tassert.strictEqual(labelService.getUriLabel(uri1, { relative: false }), 'LABEL: /END');\n\t});\n\n\n\ttest('label caching', () => {\n\t\tconst m = new Memento('cachedResourceLabelFormatters2', storageService).getMemento(StorageScope.PROFILE, StorageTarget.MACHINE);\n\t\tconst makeFormatter = (scheme: string): ResourceLabelFormatter => ({ formatting: { label: `\\${path} (${scheme})`, separator: '/' }, scheme });\n\t\tassert.deepStrictEqual(m, {});\n\n\t\t// registers a new formatter:\n\t\tlabelService.registerCachedFormatter(makeFormatter('a'));\n\t\tassert.deepStrictEqual(m, { formatters: [makeFormatter('a')] });\n\n\t\t// registers a 2nd formatter:\n\t\tlabelService.registerCachedFormatter(makeFormatter('b'));\n\t\tassert.deepStrictEqual(m, { formatters: [makeFormatter('b'), makeFormatter('a')] });\n\n\t\t// promotes a formatter on re-register:\n\t\tlabelService.registerCachedFormatter(makeFormatter('a'));\n\t\tassert.deepStrictEqual(m, { formatters: [makeFormatter('a'), makeFormatter('b')] });\n\n\t\t// no-ops if already in first place:\n\t\tlabelService.registerCachedFormatter(makeFormatter('a'));\n\t\tassert.deepStrictEqual(m, { formatters: [makeFormatter('a'), makeFormatter('b')] });\n\n\t\t// limits the cache:\n\t\tfor (let i = 0; i < 100; i++) {\n\t\t\tlabelService.registerCachedFormatter(makeFormatter(`i${i}`));\n\t\t}\n\t\tconst expected: ResourceLabelFormatter[] = [];\n\t\tfor (let i = 50; i < 100; i++) {\n\t\t\texpected.unshift(makeFormatter(`i${i}`));\n\t\t}\n\t\tassert.deepStrictEqual(m, { formatters: expected });\n\n\t\tdelete (m as { formatters: unknown }).formatters;\n\t});\n});\n\n\nsuite('multi-root workspace', () => {\n\tlet labelService: LabelService;\n\tconst disposables = new DisposableStore();\n\n\tsetup(() => {\n\t\tconst sources = URI.file('folder1/src');\n\t\tconst tests = URI.file('folder1/test');\n\t\tconst other = URI.file('folder2');\n\n\t\tlabelService = disposables.add(new LabelService(\n\t\t\tTestEnvironmentService,\n\t\t\tnew TestContextService(\n\t\t\t\tnew Workspace('test-workspace', [\n\t\t\t\t\tnew WorkspaceFolder({ uri: sources, index: 0, name: 'Sources' }),\n\t\t\t\t\tnew WorkspaceFolder({ uri: tests, index: 1, name: 'Tests' }),\n\t\t\t\t\tnew WorkspaceFolder({ uri: other, index: 2, name: resources.basename(other) }),\n\t\t\t\t])),\n\t\t\tnew TestPathService(),\n\t\t\tnew TestRemoteAgentService(),\n\t\t\tdisposables.add(new TestStorageService()),\n\t\t\tdisposables.add(new TestLifecycleService())\n\t\t));\n\t});\n\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\ttest('labels of files in multiroot workspaces are the foldername followed by offset from the folder', () => {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'file',\n\t\t\tformatting: {\n\t\t\t\tlabel: '${authority}${path}',\n\t\t\t\tseparator: '/',\n\t\t\t\ttildify: false,\n\t\t\t\tnormalizeDriveLetter: false,\n\t\t\t\tauthorityPrefix: '//',\n\t\t\t\tworkspaceSuffix: ''\n\t\t\t}\n\t\t});\n\n\t\tconst tests = {\n\t\t\t'folder1/src/file': 'Sources • file',\n\t\t\t'folder1/src/folder/file': 'Sources • folder/file',\n\t\t\t'folder1/src': 'Sources',\n\t\t\t'folder1/other': '/folder1/other',\n\t\t\t'folder2/other': 'folder2 • other',\n\t\t};\n\n\t\tObject.entries(tests).forEach(([path, label]) => {\n\t\t\tconst generated = labelService.getUriLabel(URI.file(path), { relative: true });\n\t\t\tassert.strictEqual(generated, label);\n\t\t});\n\t});\n\n\ttest('labels with context after path', () => {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'file',\n\t\t\tformatting: {\n\t\t\t\tlabel: '${path} (${scheme})',\n\t\t\t\tseparator: '/',\n\t\t\t}\n\t\t});\n\n\t\tconst tests = {\n\t\t\t'folder1/src/file': 'Sources • file (file)',\n\t\t\t'folder1/src/folder/file': 'Sources • folder/file (file)',\n\t\t\t'folder1/src': 'Sources',\n\t\t\t'folder1/other': '/folder1/other (file)',\n\t\t\t'folder2/other': 'folder2 • other (file)',\n\t\t};\n\n\t\tObject.entries(tests).forEach(([path, label]) => {\n\t\t\tconst generated = labelService.getUriLabel(URI.file(path), { relative: true });\n\t\t\tassert.strictEqual(generated, label, path);\n\t\t});\n\t});\n\n\ttest('stripPathStartingSeparator', () => {\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'file',\n\t\t\tformatting: {\n\t\t\t\tlabel: '${path}',\n\t\t\t\tseparator: '/',\n\t\t\t\tstripPathStartingSeparator: true\n\t\t\t}\n\t\t});\n\n\t\tconst tests = {\n\t\t\t'folder1/src/file': 'Sources • file',\n\t\t\t'other/blah': 'other/blah',\n\t\t};\n\n\t\tObject.entries(tests).forEach(([path, label]) => {\n\t\t\tconst generated = labelService.getUriLabel(URI.file(path), { relative: true });\n\t\t\tassert.strictEqual(generated, label, path);\n\t\t});\n\t});\n\n\ttest('relative label without formatter', () => {\n\t\tconst rootFolder = URI.parse('myscheme://myauthority/');\n\n\t\tlabelService = disposables.add(new LabelService(\n\t\t\tTestEnvironmentService,\n\t\t\tnew TestContextService(\n\t\t\t\tnew Workspace('test-workspace', [\n\t\t\t\t\tnew WorkspaceFolder({ uri: rootFolder, index: 0, name: 'FSProotFolder' }),\n\t\t\t\t])),\n\t\t\tnew TestPathService(undefined, rootFolder.scheme),\n\t\t\tnew TestRemoteAgentService(),\n\t\t\tdisposables.add(new TestStorageService()),\n\t\t\tdisposables.add(new TestLifecycleService())\n\t\t));\n\n\t\tconst generated = labelService.getUriLabel(URI.parse('myscheme://myauthority/some/folder/test.txt'), { relative: true });\n\t\tif (isWindows) {\n\t\t\tassert.strictEqual(generated, 'some\\\\folder\\\\test.txt');\n\t\t} else {\n\t\t\tassert.strictEqual(generated, 'some/folder/test.txt');\n\t\t}\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n\nsuite('workspace at FSP root', () => {\n\tlet labelService: LabelService;\n\n\tsetup(() => {\n\t\tconst rootFolder = URI.parse('myscheme://myauthority/');\n\n\t\tlabelService = new LabelService(\n\t\t\tTestEnvironmentService,\n\t\t\tnew TestContextService(\n\t\t\t\tnew Workspace('test-workspace', [\n\t\t\t\t\tnew WorkspaceFolder({ uri: rootFolder, index: 0, name: 'FSProotFolder' }),\n\t\t\t\t])),\n\t\t\tnew TestPathService(),\n\t\t\tnew TestRemoteAgentService(),\n\t\t\tnew TestStorageService(),\n\t\t\tnew TestLifecycleService()\n\t\t);\n\t\tlabelService.registerFormatter({\n\t\t\tscheme: 'myscheme',\n\t\t\tformatting: {\n\t\t\t\tlabel: '${scheme}://${authority}${path}',\n\t\t\t\tseparator: '/',\n\t\t\t\ttildify: false,\n\t\t\t\tnormalizeDriveLetter: false,\n\t\t\t\tworkspaceSuffix: '',\n\t\t\t\tauthorityPrefix: '',\n\t\t\t\tstripPathStartingSeparator: false\n\t\t\t}\n\t\t});\n\t});\n\n\ttest('non-relative label', () => {\n\n\t\tconst tests = {\n\t\t\t'myscheme://myauthority/myFile1.txt': 'myscheme://myauthority/myFile1.txt',\n\t\t\t'myscheme://myauthority/folder/myFile2.txt': 'myscheme://myauthority/folder/myFile2.txt',\n\t\t};\n\n\t\tObject.entries(tests).forEach(([uriString, label]) => {\n\t\t\tconst generated = labelService.getUriLabel(URI.parse(uriString), { relative: false });\n\t\t\tassert.strictEqual(generated, label);\n\t\t});\n\t});\n\n\ttest('relative label', () => {\n\n\t\tconst tests = {\n\t\t\t'myscheme://myauthority/myFile1.txt': 'myFile1.txt',\n\t\t\t'myscheme://myauthority/folder/myFile2.txt': 'folder/myFile2.txt',\n\t\t};\n\n\t\tObject.entries(tests).forEach(([uriString, label]) => {\n\t\t\tconst generated = labelService.getUriLabel(URI.parse(uriString), { relative: true });\n\t\t\tassert.strictEqual(generated, label);\n\t\t});\n\t});\n\n\ttest('relative label with explicit path separator', () => {\n\t\tlet generated = labelService.getUriLabel(URI.parse('myscheme://myauthority/some/folder/test.txt'), { relative: true, separator: '/' });\n\t\tassert.strictEqual(generated, 'some/folder/test.txt');\n\n\t\tgenerated = labelService.getUriLabel(URI.parse('myscheme://myauthority/some/folder/test.txt'), { relative: true, separator: '\\\\' });\n\t\tassert.strictEqual(generated, 'some\\\\folder\\\\test.txt');\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"]}