{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/preferences/test/browser/preferencesService.test.ts","vs/workbench/services/preferences/test/browser/preferencesService.test.ts"],"names":[],"mappings":"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","file":"preferencesService.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { TestCommandService } from '../../../../../editor/test/browser/editorTestServices.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { SyncDescriptor } from '../../../../../platform/instantiation/common/descriptors.js';\nimport { ServiceCollection } from '../../../../../platform/instantiation/common/serviceCollection.js';\nimport { IURLService } from '../../../../../platform/url/common/url.js';\nimport { DEFAULT_EDITOR_ASSOCIATION, IEditorPane } from '../../../../common/editor.js';\nimport { IJSONEditingService } from '../../../configuration/common/jsonEditing.js';\nimport { TestJSONEditingService } from '../../../configuration/test/common/testServices.js';\nimport { PreferencesService } from '../../browser/preferencesService.js';\nimport { IPreferencesService, ISettingsEditorOptions } from '../../common/preferences.js';\nimport { IRemoteAgentService } from '../../../remote/common/remoteAgentService.js';\nimport { TestRemoteAgentService, ITestInstantiationService, workbenchInstantiationService, TestEditorGroupView, TestEditorGroupsService } from '../../../../test/browser/workbenchTestServices.js';\nimport { IEditorGroupsService } from '../../../editor/common/editorGroupsService.js';\nimport { IEditorOptions } from '../../../../../platform/editor/common/editor.js';\nimport { SettingsEditor2Input } from '../../common/preferencesEditorInput.js';\n\nsuite('PreferencesService', () => {\n\tlet testInstantiationService: ITestInstantiationService;\n\tlet testObject: PreferencesService;\n\tlet lastOpenEditorOptions: IEditorOptions | undefined;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\ttestInstantiationService = workbenchInstantiationService({}, disposables);\n\n\t\tclass TestOpenEditorGroupView extends TestEditorGroupView {\n\t\t\tlastOpenEditorOptions: any;\n\t\t\toverride openEditor(_editor: SettingsEditor2Input, options?: IEditorOptions): Promise<IEditorPane> {\n\t\t\t\tlastOpenEditorOptions = options;\n\t\t\t\t_editor.dispose();\n\t\t\t\treturn Promise.resolve(undefined!);\n\t\t\t}\n\t\t}\n\n\t\tconst testEditorGroupService = new TestEditorGroupsService([new TestOpenEditorGroupView(0)]);\n\t\ttestInstantiationService.stub(IEditorGroupsService, testEditorGroupService);\n\t\ttestInstantiationService.stub(IJSONEditingService, TestJSONEditingService);\n\t\ttestInstantiationService.stub(IRemoteAgentService, TestRemoteAgentService);\n\t\ttestInstantiationService.stub(ICommandService, TestCommandService);\n\t\ttestInstantiationService.stub(IURLService, { registerHandler: () => { } });\n\n\t\t// PreferencesService creates a PreferencesEditorInput which depends on IPreferencesService, add the real one, not a stub\n\t\tconst collection = new ServiceCollection();\n\t\tcollection.set(IPreferencesService, new SyncDescriptor(PreferencesService));\n\t\tconst instantiationService = disposables.add(testInstantiationService.createChild(collection));\n\t\ttestObject = disposables.add(instantiationService.createInstance(PreferencesService));\n\t});\n\ttest('options are preserved when calling openEditor', async () => {\n\t\tawait testObject.openSettings({ jsonEditor: false, query: 'test query' });\n\t\tconst options = lastOpenEditorOptions as ISettingsEditorOptions;\n\t\tassert.strictEqual(options.focusSearch, true);\n\t\tassert.strictEqual(options.override, DEFAULT_EDITOR_ASSOCIATION.id);\n\t\tassert.strictEqual(options.query, 'test query');\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { TestCommandService } from '../../../../../editor/test/browser/editorTestServices.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { SyncDescriptor } from '../../../../../platform/instantiation/common/descriptors.js';\nimport { ServiceCollection } from '../../../../../platform/instantiation/common/serviceCollection.js';\nimport { IURLService } from '../../../../../platform/url/common/url.js';\nimport { DEFAULT_EDITOR_ASSOCIATION, IEditorPane } from '../../../../common/editor.js';\nimport { IJSONEditingService } from '../../../configuration/common/jsonEditing.js';\nimport { TestJSONEditingService } from '../../../configuration/test/common/testServices.js';\nimport { PreferencesService } from '../../browser/preferencesService.js';\nimport { IPreferencesService, ISettingsEditorOptions } from '../../common/preferences.js';\nimport { IRemoteAgentService } from '../../../remote/common/remoteAgentService.js';\nimport { TestRemoteAgentService, ITestInstantiationService, workbenchInstantiationService, TestEditorGroupView, TestEditorGroupsService } from '../../../../test/browser/workbenchTestServices.js';\nimport { IEditorGroupsService } from '../../../editor/common/editorGroupsService.js';\nimport { IEditorOptions } from '../../../../../platform/editor/common/editor.js';\nimport { SettingsEditor2Input } from '../../common/preferencesEditorInput.js';\n\nsuite('PreferencesService', () => {\n\tlet testInstantiationService: ITestInstantiationService;\n\tlet testObject: PreferencesService;\n\tlet lastOpenEditorOptions: IEditorOptions | undefined;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(() => {\n\t\ttestInstantiationService = workbenchInstantiationService({}, disposables);\n\n\t\tclass TestOpenEditorGroupView extends TestEditorGroupView {\n\t\t\tlastOpenEditorOptions: any;\n\t\t\toverride openEditor(_editor: SettingsEditor2Input, options?: IEditorOptions): Promise<IEditorPane> {\n\t\t\t\tlastOpenEditorOptions = options;\n\t\t\t\t_editor.dispose();\n\t\t\t\treturn Promise.resolve(undefined!);\n\t\t\t}\n\t\t}\n\n\t\tconst testEditorGroupService = new TestEditorGroupsService([new TestOpenEditorGroupView(0)]);\n\t\ttestInstantiationService.stub(IEditorGroupsService, testEditorGroupService);\n\t\ttestInstantiationService.stub(IJSONEditingService, TestJSONEditingService);\n\t\ttestInstantiationService.stub(IRemoteAgentService, TestRemoteAgentService);\n\t\ttestInstantiationService.stub(ICommandService, TestCommandService);\n\t\ttestInstantiationService.stub(IURLService, { registerHandler: () => { } });\n\n\t\t// PreferencesService creates a PreferencesEditorInput which depends on IPreferencesService, add the real one, not a stub\n\t\tconst collection = new ServiceCollection();\n\t\tcollection.set(IPreferencesService, new SyncDescriptor(PreferencesService));\n\t\tconst instantiationService = disposables.add(testInstantiationService.createChild(collection));\n\t\ttestObject = disposables.add(instantiationService.createInstance(PreferencesService));\n\t});\n\ttest('options are preserved when calling openEditor', async () => {\n\t\tawait testObject.openSettings({ jsonEditor: false, query: 'test query' });\n\t\tconst options = lastOpenEditorOptions as ISettingsEditorOptions;\n\t\tassert.strictEqual(options.focusSearch, true);\n\t\tassert.strictEqual(options.override, DEFAULT_EDITOR_ASSOCIATION.id);\n\t\tassert.strictEqual(options.query, 'test query');\n\t});\n});\n"]}