{"version":3,"sources":["vs/workbench/services/views/browser/viewDescriptorService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;AAEhG,OAAO,EAAyB,sBAAsB,EAA2E,UAAU,IAAI,cAAc,EAAE,mBAAmB,EAAE,eAAe,EAAE,6BAA6B,EAAE,YAAY,EAAE,cAAc,EAAE,MAAM,0BAA0B,CAAC;AACnS,OAAO,EAAe,aAAa,EAAE,kBAAkB,EAAE,cAAc,EAAE,MAAM,sDAAsD,CAAC;AACtI,OAAO,EAAE,eAAe,EAA+B,MAAM,gDAAgD,CAAC;AAC9G,OAAO,EAAE,iBAAiB,EAAE,MAAM,uCAAuC,CAAC;AAC1E,OAAO,EAAE,QAAQ,EAAE,MAAM,kDAAkD,CAAC;AAC5E,OAAO,EAAE,YAAY,EAAE,eAAe,EAAE,UAAU,EAAe,aAAa,EAAE,MAAM,sCAAsC,CAAC;AAC7H,OAAO,EAAE,iBAAiB,EAAE,uBAAuB,EAAE,YAAY,EAAE,MAAM,mDAAmD,CAAC;AAC7H,OAAO,EAAE,cAAc,EAAE,MAAM,0DAA0D,CAAC;AAC1F,OAAO,EAAqB,iBAAiB,EAAE,MAAM,yDAAyD,CAAC;AAC/G,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,kCAAkC,CAAC;AAClE,OAAO,EAAE,iBAAiB,EAAE,MAAM,oDAAoD,CAAC;AACvF,OAAO,EAAE,YAAY,EAAE,MAAM,iCAAiC,CAAC;AAC/D,OAAO,EAAE,qBAAqB,EAAoB,MAAM,4DAA4D,CAAC;AACrH,OAAO,EAAE,sBAAsB,EAAE,kBAAkB,EAAE,MAAM,iCAAiC,CAAC;AAC7F,OAAO,EAAE,eAAe,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,gDAAgD,CAAC;AAClG,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,oBAAoB,CAAC;AAEzD,OAAO,EAAW,cAAc,EAAE,MAAM,wCAAwC,CAAC;AACjF,OAAO,EAAE,IAAI,EAAE,MAAM,iCAAiC,CAAC;AACvD,OAAO,EAAE,aAAa,EAAE,MAAM,2BAA2B,CAAC;AAC1D,OAAO,EAAE,cAAc,EAAE,MAAM,kCAAkC,CAAC;AAQlE,SAAS,yBAAyB,CAAC,eAAuB,IAAY,OAAO,GAAG,eAAe,QAAQ,CAAC,CAAC,CAAC;AAEnG,IAAM,qBAAqB,GAA3B,MAAM,qBAAsB,SAAQ,UAAU;;aAI5B,yBAAoB,GAAG,sBAAH,AAAyB,CAAC;aAC9C,+BAA0B,GAAG,yBAAH,AAA4B,CAAC;IA4B/E,IAAI,cAAc,KAAmC,OAAO,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,CAAC,CAAC;IAI9F,YACwB,oBAA4D,EAC/D,iBAAsD,EACzD,cAAgD,EAC9C,gBAAoD,EACpD,gBAAoD,EACvD,aAA6B;QAE7C,KAAK,EAAE,CAAC;QAPgC,yBAAoB,GAApB,oBAAoB,CAAuB;QAC9C,sBAAiB,GAAjB,iBAAiB,CAAoB;QACxC,mBAAc,GAAd,cAAc,CAAiB;QAC7B,qBAAgB,GAAhB,gBAAgB,CAAmB;QACnC,qBAAgB,GAAhB,gBAAgB,CAAmB;QAnCvD,0BAAqB,GAAkF,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAAwE,CAAC,CAAC;QACnN,yBAAoB,GAAgF,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC;QAE7H,yBAAoB,GAAkG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAAwF,CAAC,CAAC;QAClP,wBAAmB,GAAgG,IAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC;QAE3I,kCAA6B,GAAsG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAA4F,CAAC,CAAC;QACnQ,iCAA4B,GAAoG,IAAI,CAAC,6BAA6B,CAAC,KAAK,CAAC;QAEjK,wBAAmB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,aAAa,EAAyG,CAAC,CAAC;QACjK,qCAAgC,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,aAAa,EAA8B,CAAC,CAAC;QAC5G,sCAAiC,GAAY,KAAK,CAAC;QAa1C,+BAA0B,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAAkL,CAAC,CAAC;QACnP,8BAAyB,GAAG,IAAI,CAAC,0BAA0B,CAAC,KAAK,CAAC;QAe1E,IAAI,CAAC,MAAM,GAAG,IAAI,IAAI,CAAC,GAAG,EAAE,CAAC,aAAa,CAAC,YAAY,CAAC,YAAY,EAAE,EAAE,IAAI,EAAE,cAAc,EAAE,KAAK,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC;QAExH,IAAI,CAAC,qBAAqB,GAAG,IAAI,GAAG,EAAgC,CAAC;QACrE,IAAI,CAAC,sBAAsB,GAAG,IAAI,GAAG,EAAgC,CAAC;QACtE,IAAI,CAAC,8BAA8B,GAAG,IAAI,GAAG,EAAgC,CAAC;QAC9E,IAAI,CAAC,uCAAuC,GAAG,IAAI,GAAG,EAAgC,CAAC;QAEvF,IAAI,CAAC,sBAAsB,GAAG,QAAQ,CAAC,EAAE,CAA0B,cAAc,CAAC,sBAAsB,CAAC,CAAC;QAC1G,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC,EAAE,CAAiB,cAAc,CAAC,aAAa,CAAC,CAAC;QAE/E,IAAI,CAAC,mCAAmC,EAAE,CAAC;QAC3C,IAAI,CAAC,6BAA6B,GAAG,IAAI,GAAG,CAAgC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,CAAC,CAAC,CAAC;QAC5I,IAAI,CAAC,8BAA8B,GAAG,IAAI,GAAG,CAAiB,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,CAAC,CAAC;QACrH,IAAI,CAAC,kCAAkC,GAAG,IAAI,GAAG,CAAkB,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,kCAAkC,CAAC,CAAC,CAAC;QAE/I,gEAAgE;QAChE,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE,CAAC,IAAI,CAAC,0BAA0B,CAAC,aAAa,CAAC,CAAC,CAAC;QAE7F,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,iBAAiB,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAC9F,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,mBAAmB,CAAC,CAAC,EAAE,KAAK,EAAE,aAAa,EAAE,EAAE,EAAE,CAAC,IAAI,CAAC,oBAAoB,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC;QAEtI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,oBAAoB,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,IAAI,CAAC,2BAA2B,CAAC,KAAK,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;QAEpI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,sBAAsB,CAAC,aAAa,CAAC,CAAC,EAAE,aAAa,EAAE,EAAE,EAAE;YAC9E,IAAI,CAAC,0BAA0B,CAAC,aAAa,CAAC,CAAC;YAC/C,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,SAAS,EAAE,aAAa,EAAE,QAAQ,EAAE,IAAI,CAAC,wBAAwB,CAAC,aAAa,CAAC,EAAE,CAAC,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;QACtJ,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,sBAAsB,CAAC,eAAe,CAAC,CAAC,EAAE,aAAa,EAAE,qBAAqB,EAAE,EAAE,EAAE;YACvG,IAAI,CAAC,4BAA4B,CAAC,aAAa,CAAC,CAAC;YACjD,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,aAAa,EAAE,QAAQ,EAAE,qBAAqB,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,CAAC;QAC/H,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,+BAAuB,uBAAqB,CAAC,oBAAoB,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;QAErK,IAAI,CAAC,gBAAgB,CAAC,iCAAiC,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,wBAAwB,EAAE,CAAC,CAAC;IAEvG,CAAC;IAEO,mCAAmC;QAC1C,IAAI,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,uBAAqB,CAAC,oBAAoB,+BAAuB,EAAE,CAAC;YAC/F,OAAO;QACR,CAAC;QAED,MAAM,2BAA2B,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,oCAAoC,+BAAuB,CAAC;QACxH,MAAM,4BAA4B,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,2BAA2B,+BAAuB,CAAC;QAChH,IAAI,CAAC,2BAA2B,IAAI,CAAC,4BAA4B,EAAE,CAAC;YACnE,OAAO;QACR,CAAC;QAED,MAAM,sBAAsB,GAAsC,2BAA2B,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,2BAA2B,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAC7I,MAAM,uBAAuB,GAAwC,4BAA4B,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,4BAA4B,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAClJ,MAAM,mBAAmB,GAAyB;YACjD,sBAAsB,EAAE,sBAAsB,CAAC,MAAM,CAA2C,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,QAAQ,CAAC,EAAE,EAAE,GAAG,MAAM,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,CAAC,OAAO,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;YAC1K,aAAa,EAAE,uBAAuB,CAAC,MAAM,CAA4B,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,EAAE,WAAW,EAAE,CAAC,EAAE,EAAE,GAAG,MAAM,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,CAAC,OAAO,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;YAC7J,kCAAkC,EAAE,EAAE;SACtC,CAAC;QACF,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,uBAAqB,CAAC,oBAAoB,EAAE,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,2DAA2C,CAAC;QACrJ,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,oCAAoC,+BAAuB,CAAC;QACvF,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,2BAA2B,+BAAuB,CAAC;IAC/E,CAAC;IAEO,oBAAoB,CAAC,YAA4C;QACxE,KAAK,MAAM,CAAC,WAAW,EAAE,KAAK,CAAC,IAAI,YAAY,CAAC,OAAO,EAAE,EAAE,CAAC;YAC3D,MAAM,aAAa,GAAG,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YAEnE,4CAA4C;YAC5C,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,CAAC;gBACpE,qDAAqD;gBACrD,IAAI,IAAI,CAAC,sBAAsB,CAAC,WAAW,CAAC,EAAE,CAAC;oBAC9C,MAAM,qBAAqB,GAAG,IAAI,CAAC,6BAA6B,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;oBAClF,IAAI,qBAAqB,KAAK,SAAS,EAAE,CAAC;wBACzC,IAAI,CAAC,8BAA8B,CAAC,qBAAqB,EAAE,WAAW,CAAC,CAAC;oBACzE,CAAC;gBACF,CAAC;gBACD,kEAAkE;gBAClE,SAAS;YACV,CAAC;YAED,4EAA4E;YAC5E,+DAA+D;YAC/D,iFAAiF;YACjF,MAAM,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,aAAa,CAAC,CAAC,kBAAkB,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;YACnJ,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC;QAC1C,CAAC;IACF,CAAC;IAEO,sBAAsB,CAAC,YAA4C;QAC1E,KAAK,MAAM,CAAC,eAAe,EAAE,KAAK,CAAC,IAAI,YAAY,CAAC,OAAO,EAAE,EAAE,CAAC;YAC/D,MAAM,aAAa,GAAG,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;YAEvE,4CAA4C;YAC5C,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,CAAC;gBACpE,SAAS;YACV,CAAC;YAED,IAAI,CAAC,WAAW,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;QACxC,CAAC;IACF,CAAC;IAEO,gCAAgC;QACvC,KAAK,MAAM,CAAC,MAAM,EAAE,WAAW,CAAC,IAAI,IAAI,CAAC,8BAA8B,CAAC,OAAO,EAAE,EAAE,CAAC;YACnF,qCAAqC;YACrC,IAAI,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC;gBAClD,SAAS;YACV,CAAC;YAED,wDAAwD;YACxD,MAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;YAClE,MAAM,cAAc,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;YAC1D,IAAI,aAAa,IAAI,cAAc,EAAE,CAAC;gBACrC,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE,CAAC,cAAc,CAAC,CAAC,CAAC;YAChD,CAAC;QACF,CAAC;IACF,CAAC;IAED,wBAAwB;QAEvB,+EAA+E;QAC/E,+EAA+E;QAC/E,qEAAqE;QACrE,IAAI,CAAC,gCAAgC,EAAE,CAAC;QAExC,2CAA2C;QAC3C,KAAK,MAAM,eAAe,IAAI,CAAC,GAAG,IAAI,CAAC,6BAA6B,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;YAC9E,IAAI,CAAC,6BAA6B,CAAC,eAAe,CAAC,CAAC;QACrD,CAAC;QAED,iDAAiD;QACjD,IAAI,CAAC,sBAAsB,EAAE,CAAC;QAE9B,4CAA4C;QAC5C,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,IAAI,CAAC,mBAAmB,EAAE,CAAC;YACrD,IAAI,CAAC,8BAA8B,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;QACjD,CAAC;QACD,IAAI,CAAC,iCAAiC,GAAG,IAAI,CAAC;IAC/C,CAAC;IAEO,kBAAkB,CAAC,KAAmE;QAC7F,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,GAAG,EAAE;YAC9C,KAAK,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK,EAAE,aAAa,EAAE,EAAE,EAAE;gBAC1C,iFAAiF;gBACjF,MAAM,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;gBAElE,2DAA2D;gBAC3D,mEAAmE;gBACnE,2DAA2D;gBAC3D,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,CAAC;gBAE1C,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC,IAAI,CAAC,gCAAgC,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,CAAC;YAC1H,CAAC,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,sBAAsB,CAAC,EAAU;QACxC,OAAO,EAAE,CAAC,UAAU,CAAC,uBAAqB,CAAC,0BAA0B,CAAC,CAAC;IACxE,CAAC;IAEO,oBAAoB,CAAC,KAAwB,EAAE,aAA4B;QAClF,iFAAiF;QACjF,MAAM,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;QAClE,IAAI,CAAC,sBAAsB,CAAC,cAAc,CAAC,CAAC;QAC5C,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,GAAG,EAAE;YAC9C,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC,IAAI,CAAC,gCAAgC,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;QACnG,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,YAAY,CAAC,WAAmB,EAAE,KAAwB;QACjE,MAAM,gBAAgB,GAAG,IAAI,GAAG,EAA6B,CAAC;QAE9D,KAAK,MAAM,cAAc,IAAI,KAAK,EAAE,CAAC;YACpC,MAAM,kBAAkB,GAAG,IAAI,CAAC,8BAA8B,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,CAAC,IAAI,WAAW,CAAC;YACrG,IAAI,cAAc,GAAG,gBAAgB,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;YAC9D,IAAI,CAAC,cAAc,EAAE,CAAC;gBACrB,gBAAgB,CAAC,GAAG,CAAC,kBAAkB,EAAE,cAAc,GAAG,EAAE,CAAC,CAAC;YAC/D,CAAC;YACD,cAAc,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QACrC,CAAC;QAED,OAAO,gBAAgB,CAAC;IACzB,CAAC;IAED,qBAAqB,CAAC,MAAc;QACnC,OAAO,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;IAC3C,CAAC;IAED,mBAAmB,CAAC,MAAc;QACjC,MAAM,SAAS,GAAG,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC;QACxD,IAAI,SAAS,KAAK,IAAI,EAAE,CAAC;YACxB,OAAO,IAAI,CAAC;QACb,CAAC;QAED,OAAO,IAAI,CAAC,wBAAwB,CAAC,SAAS,CAAC,CAAC;IACjD,CAAC;IAED,wBAAwB,CAAC,MAAc;QACtC,MAAM,WAAW,GAAG,IAAI,CAAC,8BAA8B,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAEpE,OAAO,WAAW,CAAC,CAAC;YACnB,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,CAAC;YACtD,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC,CAAC;IACvC,CAAC;IAED,wBAAwB,CAAC,aAA4B;QACpD,OAAO,IAAI,CAAC,6BAA6B,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,+BAA+B,CAAC,aAAa,CAAC,CAAC;IACxH,CAAC;IAED,+BAA+B,CAAC,aAA4B;QAC3D,OAAO,IAAI,CAAC,sBAAsB,CAAC,wBAAwB,CAAC,aAAa,CAAC,CAAC;IAC5E,CAAC;IAED,uBAAuB,CAAC,MAAc;QACrC,OAAO,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC;IAC5D,CAAC;IAED,qBAAqB,CAAC,SAAwB;QAC7C,OAAO,IAAI,CAAC,+BAA+B,CAAC,SAAS,CAAC,CAAC;IACxD,CAAC;IAED,oBAAoB,CAAC,EAAU;QAC9B,OAAO,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC;IACpD,CAAC;IAED,2BAA2B,CAAC,QAA+B;QAC1D,OAAO,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC,KAAK,QAAQ,CAAC,CAAC;IACvF,CAAC;IAED,uBAAuB,CAAC,QAA+B;QACtD,OAAO,IAAI,CAAC,sBAAsB,CAAC,uBAAuB,CAAC,QAAQ,CAAC,CAAC;IACtE,CAAC;IAED,2BAA2B,CAAC,aAA4B,EAAE,QAA+B,EAAE,cAAuB,EAAE,MAAe;QAClI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,8CAA8C,aAAa,CAAC,EAAE,aAAa,QAAQ,WAAW,MAAM,EAAE,CAAC,CAAC;QAChI,IAAI,CAAC,wCAAwC,CAAC,aAAa,EAAE,QAAQ,EAAE,cAAc,CAAC,CAAC;QACvF,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAC/B,CAAC;IAED,oCAAoC,CAAC,EAAU;QAC9C,OAAO,IAAI,CAAC,kCAAkC,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC;IAChE,CAAC;IAED,oCAAoC,CAAC,EAAU,EAAE,aAAsB;QACtE,IAAI,CAAC,kCAAkC,CAAC,GAAG,CAAC,EAAE,EAAE,aAAa,CAAC,CAAC;QAC/D,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAC/B,CAAC;IAED,kBAAkB,CAAC,IAAqB,EAAE,QAA+B,EAAE,MAAe;QACzF,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,4BAA4B,IAAI,CAAC,EAAE,aAAa,QAAQ,WAAW,MAAM,EAAE,CAAC,CAAC;QACrG,MAAM,SAAS,GAAG,IAAI,CAAC,8BAA8B,CAAC,QAAQ,CAAC,CAAC;QAChE,IAAI,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,EAAE,SAAS,CAAC,CAAC;IAC9C,CAAC;IAED,oBAAoB,CAAC,KAAwB,EAAE,aAA4B,EAAE,eAAqC,EAAE,MAAe;QAClI,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;YACnB,OAAO;QACR,CAAC;QAED,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,+BAA+B,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,kBAAkB,aAAa,CAAC,EAAE,WAAW,MAAM,EAAE,CAAC,CAAC;QAElJ,MAAM,IAAI,GAAG,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QACxD,MAAM,EAAE,GAAG,aAAa,CAAC;QAEzB,IAAI,IAAI,IAAI,EAAE,IAAI,IAAI,KAAK,EAAE,EAAE,CAAC;YAC/B,aAAa;YACb,IAAI,CAAC,sBAAsB,CAAC,KAAK,EAAE,IAAI,EAAE,EAAE,EAAE,eAAe,CAAC,CAAC;YAC9D,IAAI,CAAC,6BAA6B,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YAE5C,qBAAqB;YACrB,IAAI,CAAC,sBAAsB,EAAE,CAAC;YAE9B,mBAAmB;YACnB,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;QACxC,CAAC;IACF,CAAC;IAED,KAAK;QACJ,KAAK,MAAM,aAAa,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;YACjD,MAAM,kBAAkB,GAAG,IAAI,CAAC,qBAAqB,CAAC,aAAa,CAAC,CAAC;YAErE,KAAK,MAAM,cAAc,IAAI,kBAAkB,CAAC,kBAAkB,EAAE,CAAC;gBACpE,MAAM,gBAAgB,GAAG,IAAI,CAAC,uBAAuB,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;gBACzE,MAAM,gBAAgB,GAAG,IAAI,CAAC,wBAAwB,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;gBAC1E,IAAI,gBAAgB,IAAI,gBAAgB,IAAI,gBAAgB,KAAK,gBAAgB,EAAE,CAAC;oBACnF,IAAI,CAAC,sBAAsB,CAAC,CAAC,cAAc,CAAC,EAAE,gBAAgB,EAAE,gBAAgB,CAAC,CAAC;gBACnF,CAAC;YACF,CAAC;YAED,MAAM,wBAAwB,GAAG,IAAI,CAAC,+BAA+B,CAAC,aAAa,CAAC,CAAC;YACrF,MAAM,wBAAwB,GAAG,IAAI,CAAC,wBAAwB,CAAC,aAAa,CAAC,CAAC;YAC9E,IAAI,wBAAwB,KAAK,IAAI,IAAI,wBAAwB,KAAK,wBAAwB,EAAE,CAAC;gBAChG,IAAI,CAAC,wCAAwC,CAAC,aAAa,EAAE,wBAAwB,CAAC,CAAC;YACxF,CAAC;YAED,IAAI,CAAC,6BAA6B,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC;QAED,IAAI,CAAC,6BAA6B,CAAC,KAAK,EAAE,CAAC;QAC3C,IAAI,CAAC,8BAA8B,CAAC,KAAK,EAAE,CAAC;QAC5C,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAC/B,CAAC;IAED,iCAAiC,CAAC,eAAuB;QACxD,OAAO,IAAI,CAAC,sBAAsB,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,6BAA6B,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;IACjH,CAAC;IAEO,2BAA2B,CAAC,KAAwB,EAAE,IAAmB,EAAE,EAAiB;QACnG,MAAM,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CACvC,CAAC,IAAI,CAAC,8BAA8B,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,yCAAyC;eACxF,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,8BAA8B,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC,sDAAsD;SAC/J,CAAC;QACF,IAAI,WAAW,CAAC,MAAM,EAAE,CAAC;YACxB,IAAI,CAAC,sBAAsB,CAAC,WAAW,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;QACpD,CAAC;IACF,CAAC;IAEO,gBAAgB,CAAC,KAAwB,EAAE,IAAmB,EAAE,EAAiB;QACxF,MAAM,iBAAiB,GAAG,CAAC,SAAwB,EAAU,EAAE;YAC9D,IAAI,SAAS,CAAC,EAAE,CAAC,UAAU,CAAC,uBAAqB,CAAC,0BAA0B,CAAC,EAAE,CAAC;gBAC/E,OAAO,QAAQ,CAAC;YACjB,CAAC;YAED,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;gBAC5B,OAAO,SAAS,CAAC,EAAE,CAAC;YACrB,CAAC;YAED,OAAO,WAAW,CAAC;QACpB,CAAC,CAAC;QAEF,MAAM,WAAW,GAAG,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,CAAC;QACxD,MAAM,WAAW,GAAG,IAAI,CAAC,wBAAwB,CAAC,EAAE,CAAC,CAAC;QACtD,MAAM,SAAS,GAAG,KAAK,CAAC,MAAM,CAAC;QAC/B,MAAM,aAAa,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAC9C,MAAM,WAAW,GAAG,iBAAiB,CAAC,EAAE,CAAC,CAAC;QAC1C,MAAM,YAAY,GAAG,WAAW,wCAAgC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC;QACvF,MAAM,UAAU,GAAG,WAAW,wCAAgC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC;QAoBrF,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAoF,iCAAiC,EAAE,EAAE,SAAS,EAAE,aAAa,EAAE,WAAW,EAAE,YAAY,EAAE,UAAU,EAAE,CAAC,CAAC;IAC7N,CAAC;IAEO,sBAAsB,CAAC,KAAwB,EAAE,IAAmB,EAAE,EAAiB,EAAE,kBAAuC,mBAAmB,CAAC,MAAM;QACjK,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QAC9B,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE,KAAK,EAAE,eAAe,CAAC,CAAC;QAE1C,MAAM,WAAW,GAAG,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,CAAC;QACxD,MAAM,WAAW,GAAG,IAAI,CAAC,wBAAwB,CAAC,EAAE,CAAC,CAAC;QAEtD,IAAI,WAAW,KAAK,WAAW,EAAE,CAAC;YACjC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,WAAW,EAAE,EAAE,EAAE,WAAW,EAAE,CAAC,CAAC;QAC/E,CAAC;QAED,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;IACtD,CAAC;IAEO,wCAAwC,CAAC,aAA4B,EAAE,QAA+B,EAAE,cAAuB;QACtI,MAAM,IAAI,GAAG,IAAI,CAAC,wBAAwB,CAAC,aAAa,CAAC,CAAC;QAC1D,MAAM,EAAE,GAAG,QAAQ,CAAC;QACpB,IAAI,IAAI,KAAK,EAAE,EAAE,CAAC;YACjB,MAAM,wBAAwB,GAAG,IAAI,CAAC,sBAAsB,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;YAC/E,MAAM,8BAA8B,GAAG,EAAE,KAAK,IAAI,CAAC,+BAA+B,CAAC,aAAa,CAAC,CAAC;YAClG,IAAI,wBAAwB,IAAI,CAAC,8BAA8B,EAAE,CAAC;gBACjE,IAAI,CAAC,6BAA6B,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;YAC9D,CAAC;iBAAM,CAAC;gBACP,IAAI,CAAC,6BAA6B,CAAC,MAAM,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;YAC7D,CAAC;YACD,IAAI,CAAC,iDAAiD,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,wBAAwB,IAAI,8BAA8B,CAAC,CAAC;YAEtI,aAAa,CAAC,cAAc,GAAG,cAAc,CAAC;YAC9C,IAAI,CAAC,6BAA6B,CAAC,IAAI,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;YAErE,MAAM,KAAK,GAAG,IAAI,CAAC,mBAAmB,CAAC,aAAa,CAAC,CAAC;YACtD,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;QACrD,CAAC;IACF,CAAC;IAEO,6BAA6B,CAAC,eAAuB;QAC5D,qCAAqC;QACrC,IAAI,CAAC,IAAI,CAAC,sBAAsB,CAAC,eAAe,CAAC,EAAE,CAAC;YACnD,OAAO;QACR,CAAC;QAED,yCAAyC;QACzC,MAAM,aAAa,GAAG,IAAI,CAAC,oBAAoB,CAAC,eAAe,CAAC,CAAC;QACjE,IAAI,aAAa,IAAI,IAAI,CAAC,qBAAqB,CAAC,aAAa,CAAC,EAAE,kBAAkB,CAAC,MAAM,EAAE,CAAC;YAC3F,OAAO;QACR,CAAC;QAED,oCAAoC;QACpC,IAAI,CAAC,GAAG,IAAI,CAAC,8BAA8B,CAAC,MAAM,EAAE,CAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,EAAE,CAAC;YACjF,OAAO;QACR,CAAC;QAED,2BAA2B;QAC3B,IAAI,aAAa,EAAE,CAAC;YACnB,IAAI,CAAC,sBAAsB,CAAC,uBAAuB,CAAC,aAAa,CAAC,CAAC;QACpE,CAAC;QAED,IAAI,CAAC,6BAA6B,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;QAC3D,IAAI,CAAC,kCAAkC,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;QAEhE,+BAA+B;QAC/B,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,sBAAsB,CAAC,aAAa,EAAE,SAAS,IAAI,yBAAyB,CAAC,eAAe,CAAC,CAAC,+BAAuB,CAAC;IAClJ,CAAC;IAEO,8BAA8B,CAAC,QAA+B,EAAE,UAAmB;QAC1F,MAAM,EAAE,GAAG,UAAU,IAAI,IAAI,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC;QAE5D,MAAM,SAAS,GAAG,IAAI,CAAC,sBAAsB,CAAC,qBAAqB,CAAC;YACnE,EAAE;YACF,cAAc,EAAE,IAAI,cAAc,CAAC,iBAAiB,EAAE,CAAC,EAAE,EAAE,EAAE,oCAAoC,EAAE,IAAI,EAAE,CAAC,CAAC;YAC3G,KAAK,EAAE,EAAE,KAAK,EAAE,QAAQ,CAAC,KAAM,EAAE,IAAqB,CAAC,EAAE,QAAQ,EAAE,qBAAqB,EAAE,EAAE,iEAAiE;YAC7J,IAAI,EAAE,QAAQ,0CAAkC,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,SAAS;YAC9E,SAAS,EAAE,yBAAyB,CAAC,EAAE,CAAC;YACxC,WAAW,EAAE,IAAI;SACjB,EAAE,QAAQ,EAAE,EAAE,wBAAwB,EAAE,IAAI,EAAE,CAAC,CAAC;QAEjD,IAAI,IAAI,CAAC,6BAA6B,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC,KAAK,QAAQ,EAAE,CAAC;YACvE,IAAI,CAAC,6BAA6B,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;QAChE,CAAC;QAED,IAAI,CAAC,iDAAiD,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAE5E,OAAO,SAAS,CAAC;IAClB,CAAC;IAEO,kBAAkB;QACzB,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAK,IAAI,CAAC,gCAAgC,EAAE,CAAC,4DAA4D,EAAE,CAAC;YACtJ,IAAI,CAAC,oCAAoC,EAAE,CAAC;QAC7C,CAAC;IACF,CAAC;IAEO,oCAAoC;QAC3C,IAAI,CAAC,mBAAmB,GAAG,SAAS,CAAC;QAErC,MAAM,8BAA8B,GAAG,IAAI,GAAG,CAAgC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,CAAC,CAAC,CAAC;QAC9I,MAAM,+BAA+B,GAAG,IAAI,GAAG,CAAiB,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,CAAC,CAAC;QACvH,MAAM,oBAAoB,GAA6C,EAAE,CAAC;QAC1E,MAAM,WAAW,GAA2E,EAAE,CAAC;QAE/F,KAAK,MAAM,CAAC,WAAW,EAAE,QAAQ,CAAC,IAAI,8BAA8B,CAAC,OAAO,EAAE,EAAE,CAAC;YAChF,MAAM,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,CAAC;YACzD,IAAI,SAAS,EAAE,CAAC;gBACf,IAAI,QAAQ,KAAK,IAAI,CAAC,wBAAwB,CAAC,SAAS,CAAC,EAAE,CAAC;oBAC3D,oBAAoB,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;gBAClD,CAAC;YACF,CAAC;YACD,uEAAuE;iBAClE,IAAI,IAAI,CAAC,sBAAsB,CAAC,WAAW,CAAC,EAAE,CAAC;gBACnD,IAAI,CAAC,8BAA8B,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;YAC5D,CAAC;QACF,CAAC;QAED,KAAK,MAAM,aAAa,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;YACjD,IAAI,CAAC,8BAA8B,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,CAAC,EAAE,CAAC;gBAC3D,MAAM,eAAe,GAAG,IAAI,CAAC,wBAAwB,CAAC,aAAa,CAAC,CAAC;gBACrE,MAAM,eAAe,GAAG,IAAI,CAAC,+BAA+B,CAAC,aAAa,CAAC,CAAC;gBAC5E,IAAI,eAAe,KAAK,eAAe,EAAE,CAAC;oBACzC,oBAAoB,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,eAAe,CAAC,CAAC,CAAC;gBAC7D,CAAC;YACF,CAAC;QACF,CAAC;QAED,KAAK,MAAM,CAAC,MAAM,EAAE,eAAe,CAAC,IAAI,+BAA+B,CAAC,OAAO,EAAE,EAAE,CAAC;YACnF,MAAM,cAAc,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;YAC1D,IAAI,cAAc,EAAE,CAAC;gBACpB,MAAM,iBAAiB,GAAG,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC;gBAChE,MAAM,gBAAgB,GAAG,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;gBAC1E,IAAI,iBAAiB,IAAI,gBAAgB,IAAI,gBAAgB,KAAK,iBAAiB,EAAE,CAAC;oBACrF,WAAW,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC,cAAc,CAAC,EAAE,IAAI,EAAE,iBAAiB,EAAE,EAAE,EAAE,gBAAgB,EAAE,CAAC,CAAC;gBAC9F,CAAC;YACF,CAAC;QACF,CAAC;QAED,sEAAsE;QACtE,KAAK,MAAM,aAAa,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;YACjD,MAAM,kBAAkB,GAAG,IAAI,CAAC,qBAAqB,CAAC,aAAa,CAAC,CAAC;YACrE,KAAK,MAAM,cAAc,IAAI,kBAAkB,CAAC,kBAAkB,EAAE,CAAC;gBACpE,IAAI,CAAC,+BAA+B,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE,CAAC;oBAC7D,MAAM,gBAAgB,GAAG,IAAI,CAAC,wBAAwB,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;oBAC1E,MAAM,gBAAgB,GAAG,IAAI,CAAC,uBAAuB,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;oBACzE,IAAI,gBAAgB,IAAI,gBAAgB,IAAI,gBAAgB,KAAK,gBAAgB,EAAE,CAAC;wBACnF,WAAW,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC,cAAc,CAAC,EAAE,IAAI,EAAE,gBAAgB,EAAE,EAAE,EAAE,gBAAgB,EAAE,CAAC,CAAC;oBAC7F,CAAC;gBACF,CAAC;YACF,CAAC;QACF,CAAC;QAED,mCAAmC;QACnC,KAAK,MAAM,CAAC,SAAS,EAAE,QAAQ,CAAC,IAAI,oBAAoB,EAAE,CAAC;YAC1D,IAAI,CAAC,wCAAwC,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;QACpE,CAAC;QACD,yBAAyB;QACzB,KAAK,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,WAAW,EAAE,CAAC;YAC/C,IAAI,CAAC,sBAAsB,CAAC,KAAK,EAAE,IAAI,EAAE,EAAE,EAAE,mBAAmB,CAAC,OAAO,CAAC,CAAC;QAC3E,CAAC;QAED,IAAI,CAAC,6BAA6B,GAAG,8BAA8B,CAAC;QACpE,IAAI,CAAC,8BAA8B,GAAG,+BAA+B,CAAC;IACvE,CAAC;IAED,gCAAgC;IAChC,6CAA6C;IAC7C,0BAA0B;IAC1B,mDAAmD;IAC3C,mBAAmB,CAAC,QAA+B;QAC1D,OAAO,GAAG,uBAAqB,CAAC,0BAA0B,IAAI,6BAA6B,CAAC,QAAQ,CAAC,IAAI,YAAY,EAAE,EAAE,CAAC;IAC3H,CAAC;IAEO,sBAAsB;QAC7B,MAAM,kBAAkB,GAAyB,EAAE,sBAAsB,EAAE,EAAE,EAAE,aAAa,EAAE,EAAE,EAAE,kCAAkC,EAAE,EAAE,EAAE,CAAC;QAE3I,KAAK,MAAM,CAAC,WAAW,EAAE,QAAQ,CAAC,IAAI,IAAI,CAAC,6BAA6B,EAAE,CAAC;YAC1E,MAAM,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,CAAC;YACzD,kFAAkF;YAClF,IAAI,SAAS,IAAI,CAAC,IAAI,CAAC,sBAAsB,CAAC,WAAW,CAAC,IAAI,QAAQ,KAAK,IAAI,CAAC,+BAA+B,CAAC,SAAS,CAAC,EAAE,CAAC;gBAC5H,SAAS;YACV,CAAC;YACD,kBAAkB,CAAC,sBAAsB,CAAC,WAAW,CAAC,GAAG,QAAQ,CAAC;QACnE,CAAC;QAED,KAAK,MAAM,CAAC,MAAM,EAAE,eAAe,CAAC,IAAI,IAAI,CAAC,8BAA8B,EAAE,CAAC;YAC7E,MAAM,aAAa,GAAG,IAAI,CAAC,oBAAoB,CAAC,eAAe,CAAC,CAAC;YACjE,IAAI,aAAa,EAAE,CAAC;gBACnB,MAAM,gBAAgB,GAAG,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC,CAAC;gBAC9D,0CAA0C;gBAC1C,mDAAmD;gBACnD,IAAI,gBAAgB,EAAE,EAAE,KAAK,aAAa,CAAC,EAAE,EAAE,CAAC;oBAC/C,SAAS;gBACV,CAAC;YACF,CAAC;YACD,kBAAkB,CAAC,aAAa,CAAC,MAAM,CAAC,GAAG,eAAe,CAAC;QAC5D,CAAC;QAED,2FAA2F;QAC3F,KAAK,MAAM,CAAC,eAAe,EAAE,oBAAoB,CAAC,IAAI,IAAI,CAAC,kCAAkC,EAAE,CAAC;YAC/F,IAAI,oBAAoB,KAAK,KAAK,EAAE,CAAC;gBACpC,kBAAkB,CAAC,kCAAkC,CAAC,eAAe,CAAC,GAAG,oBAAoB,CAAC;YAC/F,CAAC;QACF,CAAC;QACD,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;IAC9C,CAAC;IAGD,IAAY,kBAAkB;QAC7B,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAC/B,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,gCAAgC,EAAE,CAAyB,CAAC;YACvG,IAAI,CAAC,mBAAmB,CAAC,sBAAsB,GAAG,IAAI,CAAC,mBAAmB,CAAC,sBAAsB,IAAI,EAAE,CAAC;YACxG,IAAI,CAAC,mBAAmB,CAAC,aAAa,GAAG,IAAI,CAAC,mBAAmB,CAAC,aAAa,IAAI,EAAE,CAAC;YACtF,IAAI,CAAC,mBAAmB,CAAC,kCAAkC,GAAG,IAAI,CAAC,mBAAmB,CAAC,kCAAkC,IAAI,EAAE,CAAC;QACjI,CAAC;QACD,OAAO,IAAI,CAAC,mBAAmB,CAAC;IACjC,CAAC;IAED,IAAY,kBAAkB,CAAC,kBAAwC;QACtE,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC;QACjD,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAK,KAAK,EAAE,CAAC;YACvD,IAAI,CAAC,mBAAmB,GAAG,kBAAkB,CAAC;YAC9C,IAAI,CAAC,gCAAgC,CAAC,KAAK,CAAC,CAAC;QAC9C,CAAC;IACF,CAAC;IAEO,gCAAgC;QACvC,OAAO,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,uBAAqB,CAAC,oBAAoB,gCAAwB,IAAI,CAAC,CAAC;IACxG,CAAC;IAEO,gCAAgC,CAAC,KAAa;QACrD,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,uBAAqB,CAAC,oBAAoB,EAAE,KAAK,2DAA2C,CAAC;IACxH,CAAC;IAEO,mBAAmB,CAAC,aAA4B;QACvD,MAAM,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE;YACjF,MAAM,6BAA6B,GAAG,IAAI,CAAC,8BAA8B,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,CAAC,IAAI,aAAa,CAAC,EAAE,CAAC;YACrH,OAAO,6BAA6B,KAAK,aAAa,CAAC,EAAE,CAAC;QAC3D,CAAC,CAAC,CAAC;QAEH,KAAK,MAAM,CAAC,MAAM,EAAE,eAAe,CAAC,IAAI,IAAI,CAAC,8BAA8B,CAAC,OAAO,EAAE,EAAE,CAAC;YACvF,IAAI,eAAe,KAAK,aAAa,CAAC,EAAE,EAAE,CAAC;gBAC1C,SAAS;YACV,CAAC;YAED,IAAI,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,MAAM,CAAC,KAAK,aAAa,EAAE,CAAC;gBACnE,SAAS;YACV,CAAC;YAED,MAAM,cAAc,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC;YAC1D,IAAI,cAAc,EAAE,CAAC;gBACpB,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAC7B,CAAC;QACF,CAAC;QAED,OAAO,MAAM,CAAC;IACf,CAAC;IAEO,0BAA0B,CAAC,aAA4B;QAC9D,MAAM,eAAe,GAAG,IAAI,CAAC,sBAAsB,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,wBAAwB,CAAC,aAAa,CAAC,KAAK,IAAI,CAAC,+BAA+B,CAAC,aAAa,CAAC,CAAC;QACpL,IAAI,CAAC,iDAAiD,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QAC3F,IAAI,CAAC,+BAA+B,CAAC,aAAa,CAAC,CAAC;IACrD,CAAC;IAEO,+BAA+B,CAAC,aAA4B;QACnE,IAAI,kBAAkB,GAAG,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,kBAAkB,CAAC;QAEzF,IAAI,CAAC,kBAAkB,EAAE,CAAC;YACzB,MAAM,WAAW,GAAG,IAAI,eAAe,EAAE,CAAC;YAC1C,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,kBAAkB,EAAE,aAAa,CAAC,CAAC,CAAC;YAElH,IAAI,CAAC,sBAAsB,CAAC,EAAE,KAAK,EAAE,kBAAkB,CAAC,qBAAqB,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;YAC9F,kBAAkB,CAAC,gCAAgC,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,WAAW,CAAC,CAAC;YAExH,IAAI,CAAC,uBAAuB,CAAC,EAAE,KAAK,EAAE,CAAC,GAAG,kBAAkB,CAAC,sBAAsB,CAAC,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;YACrG,kBAAkB,CAAC,8BAA8B,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,cAAc,EAAE,EAAE,EAAE,CAAC,cAAc,CAAC,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,WAAW,CAAC,CAAC;YACvL,kBAAkB,CAAC,iCAAiC,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,OAAO,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,cAAc,EAAE,EAAE,EAAE,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,WAAW,CAAC,CAAC;YAE9L,WAAW,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,gCAAgC,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;YAE3G,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,gCAAgC,CAAC,aAAa,CAAC,CAAC,CAAC;YAEtE,MAAM,KAAK,GAAG,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,WAAW,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,OAAO,EAAE,EAAE,CAAC;YAC5G,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;YAEnD,uEAAuE;YACvE,mFAAmF;YACnF,yEAAyE;YACzE,IAAI,CAAC,kBAAkB,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE,aAAa,EAAE,CAAC,CAAC,CAAC;YAEhG,8DAA8D;YAC9D,MAAM,eAAe,GAAG,IAAI,CAAC,mBAAmB,CAAC,aAAa,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,aAAa,CAAC,CAAC;YACxI,IAAI,eAAe,CAAC,MAAM,EAAE,CAAC;gBAC5B,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE,eAAe,CAAC,CAAC;gBAC9C,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,GAAG,EAAE;oBAC9C,eAAe,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC,IAAI,CAAC,gCAAgC,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,CAAC;gBACpI,CAAC,CAAC,CAAC;YACJ,CAAC;YAED,IAAI,IAAI,CAAC,iCAAiC,EAAE,CAAC;gBAC5C,IAAI,CAAC,8BAA8B,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;YAC3D,CAAC;QACF,CAAC;QAED,OAAO,kBAAkB,CAAC;IAC3B,CAAC;IAEO,4BAA4B,CAAC,aAA4B;QAChE,IAAI,CAAC,mBAAmB,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;QACzD,IAAI,CAAC,gCAAgC,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;IACvE,CAAC;IAEO,sBAAsB,CAAC,EAAE,KAAK,EAAE,OAAO,EAAsF;QACpI,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,GAAG,EAAE;YAC9C,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC,IAAI,CAAC,+BAA+B,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;YAChG,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC,IAAI,CAAC,+BAA+B,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;QACpG,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,uBAAuB,CAAC,EAAE,KAAK,EAAE,OAAO,EAA4D;QAC3G,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,GAAG,EAAE;YAC9C,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC,IAAI,CAAC,gCAAgC,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;YACjG,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC,IAAI,CAAC,gCAAgC,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;QACrG,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,8BAA8B,CAAC,aAA4B,EAAE,EAAE,kBAAkB,EAAE,WAAW,EAA4E;QACjL,IAAI,CAAC,gCAAgC,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;QACtE,IAAI,CAAC,gCAAgC,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,0CAA0C,CAAC,kBAAkB,CAAC,CAAC,CAAC;QAC9H,WAAW,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CACxB,kBAAkB,CAAC,gCAAgC,EACnD,kBAAkB,CAAC,8BAA8B,EACjD,kBAAkB,CAAC,iCAAiC,EACpD,kBAAkB,CAAC,+BAA+B,CAClD,CAAC,CAAC,CAAC,EAAE;YACL,IAAI,CAAC,gCAAgC,CAAC,gBAAgB,CAAC,aAAa,CAAC,CAAC;YACtE,IAAI,CAAC,gCAAgC,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,0CAA0C,CAAC,kBAAkB,CAAC,CAAC,CAAC;QAC/H,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,0CAA0C,CAAC,kBAAsC;QACxF,MAAM,WAAW,GAAG,IAAI,eAAe,EAAE,CAAC;QAC1C,kBAAkB,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC,cAAc,EAAE,KAAK,EAAE,EAAE;YAC1E,IAAI,CAAC,cAAc,CAAC,eAAe,EAAE,CAAC;gBACrC,WAAW,CAAC,GAAG,CAAC,eAAe,CAAC,KAAM,SAAQ,uBAA0C;oBACvF;wBACC,KAAK,CAAC;4BACL,EAAE,EAAE,GAAG,cAAc,CAAC,EAAE,mBAAmB;4BAC3C,mBAAmB,EAAE,kBAAkB,CAAC,aAAa,CAAC,EAAE;4BACxD,YAAY,EAAE,cAAc,CAAC,mBAAmB,IAAI,CAAC,CAAC,kBAAkB,CAAC,SAAS,CAAC,cAAc,CAAC,EAAE,CAAC,IAAI,kBAAkB,CAAC,sBAAsB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC,KAAK,EAAE;4BAC/M,OAAO,EAAE,cAAc,CAAC,GAAG,CAAC,GAAG,cAAc,CAAC,EAAE,UAAU,CAAC;4BAC3D,KAAK,EAAE,cAAc,CAAC,IAAI;4BAC1B,QAAQ,EAAE;gCACT,WAAW,EAAE,SAAS,CAAC,KAA6B,EAAE,0FAA0F,EAAE,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC;6BAC5K;4BACD,IAAI,EAAE,CAAC;oCACN,EAAE,EAAE,YAAY;oCAChB,IAAI,EAAE,cAAc,CAAC,MAAM,CAAC,eAAe,EAAE,kBAAkB,CAAC,aAAa,CAAC,EAAE,CAAC;oCACjF,KAAK,EAAE,KAAK;iCACZ,EAAE;oCACF,EAAE,EAAE,MAAM,CAAC,yBAAyB;oCACpC,IAAI,EAAE,cAAc,CAAC,MAAM,CAAC,eAAe,EAAE,kBAAkB,CAAC,aAAa,CAAC,EAAE,CAAC;oCACjF,KAAK,EAAE,KAAK;oCACZ,KAAK,EAAE,oBAAoB;iCAC3B,EAAE;oCACF,EAAE,EAAE,MAAM,CAAC,gBAAgB;oCAC3B,IAAI,EAAE,cAAc,CAAC,EAAE,CAAC,GAAG,kBAAkB,CAAC,sBAAsB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,cAAc,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oCACnH,KAAK,EAAE,KAAK;oCACZ,KAAK,EAAE,oBAAoB;iCAC3B,CAAC;yBACF,CAAC,CAAC;oBACJ,CAAC;oBACD,KAAK,CAAC,sBAAsB,CAAC,eAAiC,EAAE,iBAAoC;wBACnG,iBAAiB,CAAC,oBAAoB,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;oBAC3D,CAAC;iBACD,CAAC,CAAC,CAAC;gBACJ,WAAW,CAAC,GAAG,CAAC,eAAe,CAAC,KAAM,SAAQ,uBAA0C;oBACvF;wBACC,KAAK,CAAC;4BACL,EAAE,EAAE,GAAG,cAAc,CAAC,EAAE,aAAa;4BACrC,mBAAmB,EAAE,kBAAkB,CAAC,aAAa,CAAC,EAAE;4BACxD,KAAK,EAAE,QAAQ,CAAC,KAAU,EAAE,IAAY,EAAE,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC;4BACpE,QAAQ,EAAE;gCACT,WAAW,EAAE,SAAS,CAAC,KAAqB,EAAE,wFAAwF,EAAE,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC;6BAClK;4BACD,YAAY,EAAE,cAAc,CAAC,mBAAmB,IAAI,CAAC,CAAC,kBAAkB,CAAC,SAAS,CAAC,cAAc,CAAC,EAAE,CAAC,IAAI,kBAAkB,CAAC,sBAAsB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC,KAAK,EAAE;4BAC/M,IAAI,EAAE,CAAC;oCACN,EAAE,EAAE,MAAM,CAAC,gBAAgB;oCAC3B,IAAI,EAAE,cAAc,CAAC,GAAG,CACvB,cAAc,CAAC,MAAM,CAAC,MAAM,EAAE,cAAc,CAAC,EAAE,CAAC,EAChD,cAAc,CAAC,GAAG,CAAC,GAAG,cAAc,CAAC,EAAE,UAAU,CAAC,CAClD;oCACD,KAAK,EAAE,QAAQ;oCACf,KAAK,EAAE,CAAC;iCACR,CAAC;yBACF,CAAC,CAAC;oBACJ,CAAC;oBACD,KAAK,CAAC,sBAAsB,CAAC,eAAiC,EAAE,iBAAoC;wBACnG,IAAI,iBAAiB,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE,SAAS,EAAE,EAAE,CAAC;4BAC/D,iBAAiB,CAAC,oBAAoB,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;wBAC3D,CAAC;oBACF,CAAC;iBACD,CAAC,CAAC,CAAC;YACL,CAAC;QACF,CAAC,CAAC,CAAC;QACH,OAAO,WAAW,CAAC;IACpB,CAAC;IAEO,gCAAgC,CAAC,aAA4B;QACpE,MAAM,IAAI,GAAG,IAAI,CAAC;QAClB,OAAO,eAAe,CAAC,MAAM,uBAAwB,SAAQ,OAAO;YACnE;gBACC,KAAK,CAAC;oBACL,EAAE,EAAE,GAAG,aAAa,CAAC,EAAE,6BAA6B;oBACpD,KAAK,EAAE,SAAS,CAAC,KAAmB,EAAE,gBAAgB,CAAC;oBACvD,IAAI,EAAE,CAAC;4BACN,EAAE,EAAE,MAAM,CAAC,yBAAyB;4BACpC,KAAK,EAAE,eAAe;4BACtB,IAAI,EAAE,cAAc,CAAC,EAAE,CACtB,cAAc,CAAC,GAAG,CACjB,cAAc,CAAC,MAAM,CAAC,eAAe,EAAE,aAAa,CAAC,EAAE,CAAC,EACxD,cAAc,CAAC,MAAM,CAAC,GAAG,aAAa,CAAC,EAAE,+BAA+B,EAAE,KAAK,CAAC,CAChF,CACD;yBACD,CAAC;iBACF,CAAC,CAAC;YACJ,CAAC;YACD,GAAG,CAAC,QAA0B;gBAC7B,IAAI,CAAC,2BAA2B,CAAC,aAAa,EAAE,IAAI,CAAC,+BAA+B,CAAC,aAAa,CAAC,EAAE,SAAS,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBAC9H,QAAQ,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,iBAAiB,CAAC,aAAa,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;YACvE,CAAC;SACD,CAAC,CAAC;IACJ,CAAC;IAEO,QAAQ,CAAC,SAAwB,EAAE,KAAwB,EAAE,kBAAuC,mBAAmB,CAAC,OAAO;QACtI,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,GAAG,EAAE;YAC9C,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gBACpB,MAAM,kBAAkB,GAAG,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,SAAS,CAAC;gBAC/E,IAAI,CAAC,wCAAwC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;gBAC5E,IAAI,kBAAkB,EAAE,CAAC;oBACxB,IAAI,CAAC,8BAA8B,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACrD,CAAC;qBAAM,CAAC;oBACP,IAAI,CAAC,8BAA8B,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;gBAChE,CAAC;YACF,CAAC,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YAC1D,OAAO;gBACN,cAAc,EAAE,IAAI;gBACpB,SAAS,EAAE,eAAe,KAAK,mBAAmB,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK;gBAC9E,OAAO,EAAE,eAAe,KAAK,mBAAmB,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI;aAC3E,CAAC;QACH,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,WAAW,CAAC,SAAwB,EAAE,KAAwB;QACrE,0CAA0C;QAC1C,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,GAAG,EAAE;YAC9C,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gBACpB,IAAI,IAAI,CAAC,8BAA8B,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,SAAS,CAAC,EAAE,EAAE,CAAC;oBACvE,IAAI,CAAC,8BAA8B,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACrD,CAAC;gBACD,IAAI,CAAC,wCAAwC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YAChE,CAAC,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,mBAAmB;QACnB,IAAI,CAAC,qBAAqB,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IACrD,CAAC;IAEO,+BAA+B,CAAC,cAA+B;QACtE,MAAM,kBAAkB,GAAG,GAAG,cAAc,CAAC,EAAE,SAAS,CAAC;QACzD,IAAI,UAAU,GAAG,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;QACpE,IAAI,CAAC,UAAU,EAAE,CAAC;YACjB,UAAU,GAAG,IAAI,aAAa,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;YACzF,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC;QAChE,CAAC;QACD,OAAO,UAAU,CAAC;IACnB,CAAC;IAEO,gCAAgC,CAAC,cAA+B;QACvE,MAAM,kBAAkB,GAAG,GAAG,cAAc,CAAC,EAAE,UAAU,CAAC;QAC1D,IAAI,UAAU,GAAG,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;QACpE,IAAI,CAAC,UAAU,EAAE,CAAC;YACjB,UAAU,GAAG,IAAI,aAAa,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;YACzF,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC;QAChE,CAAC;QACD,OAAO,UAAU,CAAC;IACnB,CAAC;IAEO,gCAAgC,CAAC,cAA+B;QACvE,MAAM,uBAAuB,GAAG,GAAG,cAAc,CAAC,EAAE,UAAU,CAAC;QAC/D,IAAI,UAAU,GAAG,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;QAC1E,IAAI,CAAC,UAAU,EAAE,CAAC;YACjB,UAAU,GAAG,IAAI,aAAa,CAAC,uBAAuB,EAAE,KAAK,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;YAC9F,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,uBAAuB,EAAE,UAAU,CAAC,CAAC;QACtE,CAAC;QACD,OAAO,UAAU,CAAC;IACnB,CAAC;IAEO,wCAAwC,CAAC,cAA+B;QAC/E,MAAM,+BAA+B,GAAG,GAAG,cAAc,CAAC,EAAE,sBAAsB,CAAC;QACnF,IAAI,UAAU,GAAG,IAAI,CAAC,8BAA8B,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;QAC1F,IAAI,CAAC,UAAU,EAAE,CAAC;YACjB,UAAU,GAAG,IAAI,aAAa,CAAC,+BAA+B,EAAE,KAAK,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;YACtG,IAAI,CAAC,8BAA8B,CAAC,GAAG,CAAC,+BAA+B,EAAE,UAAU,CAAC,CAAC;QACtF,CAAC;QACD,OAAO,UAAU,CAAC;IACnB,CAAC;IAEO,iDAAiD,CAAC,aAA4B;QACrF,MAAM,wCAAwC,GAAG,GAAG,aAAa,CAAC,EAAE,+BAA+B,CAAC;QACpG,IAAI,UAAU,GAAG,IAAI,CAAC,uCAAuC,CAAC,GAAG,CAAC,wCAAwC,CAAC,CAAC;QAC5G,IAAI,CAAC,UAAU,EAAE,CAAC;YACjB,UAAU,GAAG,IAAI,aAAa,CAAC,wCAAwC,EAAE,KAAK,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;YAC/G,IAAI,CAAC,uCAAuC,CAAC,GAAG,CAAC,wCAAwC,EAAE,UAAU,CAAC,CAAC;QACxG,CAAC;QACD,OAAO,UAAU,CAAC;IACnB,CAAC;;AAt5BW,qBAAqB;IAsC/B,WAAA,qBAAqB,CAAA;IACrB,WAAA,kBAAkB,CAAA;IAClB,WAAA,eAAe,CAAA;IACf,WAAA,iBAAiB,CAAA;IACjB,WAAA,iBAAiB,CAAA;IACjB,WAAA,cAAc,CAAA;GA3CJ,qBAAqB,CAu5BjC;;AAED,iBAAiB,CAAC,sBAAsB,EAAE,qBAAqB,oCAA4B,CAAC","file":"viewDescriptorService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ViewContainerLocation, IViewDescriptorService, ViewContainer, IViewsRegistry, IViewContainersRegistry, IViewDescriptor, Extensions as ViewExtensions, ViewVisibilityState, defaultViewIcon, ViewContainerLocationToString, VIEWS_LOG_ID, VIEWS_LOG_NAME } from '../../../common/views.js';\nimport { IContextKey, RawContextKey, IContextKeyService, ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IExtensionService } from '../../extensions/common/extensions.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { toDisposable, DisposableStore, Disposable, IDisposable, DisposableMap } from '../../../../base/common/lifecycle.js';\nimport { ViewPaneContainer, ViewPaneContainerAction, ViewsSubMenu } from '../../../browser/parts/views/viewPaneContainer.js';\nimport { SyncDescriptor } from '../../../../platform/instantiation/common/descriptors.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { Event, Emitter } from '../../../../base/common/event.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { getViewsStateStorageId, ViewContainerModel } from '../common/viewContainerModel.js';\nimport { registerAction2, Action2, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { IStringDictionary } from '../../../../base/common/collections.js';\nimport { ILogger, ILoggerService } from '../../../../platform/log/common/log.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { IViewsService } from '../common/viewsService.js';\nimport { windowLogGroup } from '../../log/common/logConstants.js';\n\ninterface IViewsCustomizations {\n\tviewContainerLocations: IStringDictionary<ViewContainerLocation>;\n\tviewLocations: IStringDictionary<string>;\n\tviewContainerBadgeEnablementStates: IStringDictionary<boolean>;\n}\n\nfunction getViewContainerStorageId(viewContainerId: string): string { return `${viewContainerId}.state`; }\n\nexport class ViewDescriptorService extends Disposable implements IViewDescriptorService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate static readonly VIEWS_CUSTOMIZATIONS = 'views.customizations';\n\tprivate static readonly COMMON_CONTAINER_ID_PREFIX = 'workbench.views.service';\n\n\tprivate readonly _onDidChangeContainer: Emitter<{ views: IViewDescriptor[]; from: ViewContainer; to: ViewContainer }> = this._register(new Emitter<{ views: IViewDescriptor[]; from: ViewContainer; to: ViewContainer }>());\n\treadonly onDidChangeContainer: Event<{ views: IViewDescriptor[]; from: ViewContainer; to: ViewContainer }> = this._onDidChangeContainer.event;\n\n\tprivate readonly _onDidChangeLocation: Emitter<{ views: IViewDescriptor[]; from: ViewContainerLocation; to: ViewContainerLocation }> = this._register(new Emitter<{ views: IViewDescriptor[]; from: ViewContainerLocation; to: ViewContainerLocation }>());\n\treadonly onDidChangeLocation: Event<{ views: IViewDescriptor[]; from: ViewContainerLocation; to: ViewContainerLocation }> = this._onDidChangeLocation.event;\n\n\tprivate readonly _onDidChangeContainerLocation: Emitter<{ viewContainer: ViewContainer; from: ViewContainerLocation; to: ViewContainerLocation }> = this._register(new Emitter<{ viewContainer: ViewContainer; from: ViewContainerLocation; to: ViewContainerLocation }>());\n\treadonly onDidChangeContainerLocation: Event<{ viewContainer: ViewContainer; from: ViewContainerLocation; to: ViewContainerLocation }> = this._onDidChangeContainerLocation.event;\n\n\tprivate readonly viewContainerModels = this._register(new DisposableMap<ViewContainer, { viewContainerModel: ViewContainerModel; disposables: DisposableStore } & IDisposable>());\n\tprivate readonly viewsVisibilityActionDisposables = this._register(new DisposableMap<ViewContainer, IDisposable>());\n\tprivate canRegisterViewsVisibilityActions: boolean = false;\n\tprivate readonly activeViewContextKeys: Map<string, IContextKey<boolean>>;\n\tprivate readonly movableViewContextKeys: Map<string, IContextKey<boolean>>;\n\tprivate readonly defaultViewLocationContextKeys: Map<string, IContextKey<boolean>>;\n\tprivate readonly defaultViewContainerLocationContextKeys: Map<string, IContextKey<boolean>>;\n\n\tprivate readonly viewsRegistry: IViewsRegistry;\n\tprivate readonly viewContainersRegistry: IViewContainersRegistry;\n\n\tprivate viewContainersCustomLocations: Map<string, ViewContainerLocation>;\n\tprivate viewDescriptorsCustomLocations: Map<string, string>;\n\tprivate viewContainerBadgeEnablementStates: Map<string, boolean>;\n\n\tprivate readonly _onDidChangeViewContainers = this._register(new Emitter<{ added: ReadonlyArray<{ container: ViewContainer; location: ViewContainerLocation }>; removed: ReadonlyArray<{ container: ViewContainer; location: ViewContainerLocation }> }>());\n\treadonly onDidChangeViewContainers = this._onDidChangeViewContainers.event;\n\tget viewContainers(): ReadonlyArray<ViewContainer> { return this.viewContainersRegistry.all; }\n\n\tprivate readonly logger: Lazy<ILogger>;\n\n\tconstructor(\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@ILoggerService loggerService: ILoggerService,\n\t) {\n\t\tsuper();\n\n\t\tthis.logger = new Lazy(() => loggerService.createLogger(VIEWS_LOG_ID, { name: VIEWS_LOG_NAME, group: windowLogGroup }));\n\n\t\tthis.activeViewContextKeys = new Map<string, IContextKey<boolean>>();\n\t\tthis.movableViewContextKeys = new Map<string, IContextKey<boolean>>();\n\t\tthis.defaultViewLocationContextKeys = new Map<string, IContextKey<boolean>>();\n\t\tthis.defaultViewContainerLocationContextKeys = new Map<string, IContextKey<boolean>>();\n\n\t\tthis.viewContainersRegistry = Registry.as<IViewContainersRegistry>(ViewExtensions.ViewContainersRegistry);\n\t\tthis.viewsRegistry = Registry.as<IViewsRegistry>(ViewExtensions.ViewsRegistry);\n\n\t\tthis.migrateToViewsCustomizationsStorage();\n\t\tthis.viewContainersCustomLocations = new Map<string, ViewContainerLocation>(Object.entries(this.viewCustomizations.viewContainerLocations));\n\t\tthis.viewDescriptorsCustomLocations = new Map<string, string>(Object.entries(this.viewCustomizations.viewLocations));\n\t\tthis.viewContainerBadgeEnablementStates = new Map<string, boolean>(Object.entries(this.viewCustomizations.viewContainerBadgeEnablementStates));\n\n\t\t// Register all containers that were registered before this ctor\n\t\tthis.viewContainers.forEach(viewContainer => this.onDidRegisterViewContainer(viewContainer));\n\n\t\tthis._register(this.viewsRegistry.onViewsRegistered(views => this.onDidRegisterViews(views)));\n\t\tthis._register(this.viewsRegistry.onViewsDeregistered(({ views, viewContainer }) => this.onDidDeregisterViews(views, viewContainer)));\n\n\t\tthis._register(this.viewsRegistry.onDidChangeContainer(({ views, from, to }) => this.onDidChangeDefaultContainer(views, from, to)));\n\n\t\tthis._register(this.viewContainersRegistry.onDidRegister(({ viewContainer }) => {\n\t\t\tthis.onDidRegisterViewContainer(viewContainer);\n\t\t\tthis._onDidChangeViewContainers.fire({ added: [{ container: viewContainer, location: this.getViewContainerLocation(viewContainer) }], removed: [] });\n\t\t}));\n\n\t\tthis._register(this.viewContainersRegistry.onDidDeregister(({ viewContainer, viewContainerLocation }) => {\n\t\t\tthis.onDidDeregisterViewContainer(viewContainer);\n\t\t\tthis._onDidChangeViewContainers.fire({ removed: [{ container: viewContainer, location: viewContainerLocation }], added: [] });\n\t\t}));\n\n\t\tthis._register(this.storageService.onDidChangeValue(StorageScope.PROFILE, ViewDescriptorService.VIEWS_CUSTOMIZATIONS, this._store)(() => this.onDidStorageChange()));\n\n\t\tthis.extensionService.whenInstalledExtensionsRegistered().then(() => this.whenExtensionsRegistered());\n\n\t}\n\n\tprivate migrateToViewsCustomizationsStorage(): void {\n\t\tif (this.storageService.get(ViewDescriptorService.VIEWS_CUSTOMIZATIONS, StorageScope.PROFILE)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewContainerLocationsValue = this.storageService.get('views.cachedViewContainerLocations', StorageScope.PROFILE);\n\t\tconst viewDescriptorLocationsValue = this.storageService.get('views.cachedViewPositions', StorageScope.PROFILE);\n\t\tif (!viewContainerLocationsValue && !viewDescriptorLocationsValue) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewContainerLocations: [string, ViewContainerLocation][] = viewContainerLocationsValue ? JSON.parse(viewContainerLocationsValue) : [];\n\t\tconst viewDescriptorLocations: [string, { containerId: string }][] = viewDescriptorLocationsValue ? JSON.parse(viewDescriptorLocationsValue) : [];\n\t\tconst viewsCustomizations: IViewsCustomizations = {\n\t\t\tviewContainerLocations: viewContainerLocations.reduce<IStringDictionary<ViewContainerLocation>>((result, [id, location]) => { result[id] = location; return result; }, {}),\n\t\t\tviewLocations: viewDescriptorLocations.reduce<IStringDictionary<string>>((result, [id, { containerId }]) => { result[id] = containerId; return result; }, {}),\n\t\t\tviewContainerBadgeEnablementStates: {}\n\t\t};\n\t\tthis.storageService.store(ViewDescriptorService.VIEWS_CUSTOMIZATIONS, JSON.stringify(viewsCustomizations), StorageScope.PROFILE, StorageTarget.USER);\n\t\tthis.storageService.remove('views.cachedViewContainerLocations', StorageScope.PROFILE);\n\t\tthis.storageService.remove('views.cachedViewPositions', StorageScope.PROFILE);\n\t}\n\n\tprivate registerGroupedViews(groupedViews: Map<string, IViewDescriptor[]>): void {\n\t\tfor (const [containerId, views] of groupedViews.entries()) {\n\t\t\tconst viewContainer = this.viewContainersRegistry.get(containerId);\n\n\t\t\t// The container has not been registered yet\n\t\t\tif (!viewContainer || !this.viewContainerModels.has(viewContainer)) {\n\t\t\t\t// Register if the container is a genarated container\n\t\t\t\tif (this.isGeneratedContainerId(containerId)) {\n\t\t\t\t\tconst viewContainerLocation = this.viewContainersCustomLocations.get(containerId);\n\t\t\t\t\tif (viewContainerLocation !== undefined) {\n\t\t\t\t\t\tthis.registerGeneratedViewContainer(viewContainerLocation, containerId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Registration of the container handles registration of its views\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Filter out views that have already been added to the view container model\n\t\t\t// This is needed when statically-registered views are moved to\n\t\t\t// other statically registered containers as they will both try to add on startup\n\t\t\tconst viewsToAdd = views.filter(view => this.getViewContainerModel(viewContainer).allViewDescriptors.filter(vd => vd.id === view.id).length === 0);\n\t\t\tthis.addViews(viewContainer, viewsToAdd);\n\t\t}\n\t}\n\n\tprivate deregisterGroupedViews(groupedViews: Map<string, IViewDescriptor[]>): void {\n\t\tfor (const [viewContainerId, views] of groupedViews.entries()) {\n\t\t\tconst viewContainer = this.viewContainersRegistry.get(viewContainerId);\n\n\t\t\t// The container has not been registered yet\n\t\t\tif (!viewContainer || !this.viewContainerModels.has(viewContainer)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.removeViews(viewContainer, views);\n\t\t}\n\t}\n\n\tprivate moveOrphanViewsToDefaultLocation(): void {\n\t\tfor (const [viewId, containerId] of this.viewDescriptorsCustomLocations.entries()) {\n\t\t\t// check if the view container exists\n\t\t\tif (this.viewContainersRegistry.get(containerId)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// check if view has been registered to default location\n\t\t\tconst viewContainer = this.viewsRegistry.getViewContainer(viewId);\n\t\t\tconst viewDescriptor = this.getViewDescriptorById(viewId);\n\t\t\tif (viewContainer && viewDescriptor) {\n\t\t\t\tthis.addViews(viewContainer, [viewDescriptor]);\n\t\t\t}\n\t\t}\n\t}\n\n\twhenExtensionsRegistered(): void {\n\n\t\t// Handle those views whose custom parent view container does not exist anymore\n\t\t// May be the extension contributing this view container is no longer installed\n\t\t// Or the parent view container is generated and no longer available.\n\t\tthis.moveOrphanViewsToDefaultLocation();\n\n\t\t// Clean up empty generated view containers\n\t\tfor (const viewContainerId of [...this.viewContainersCustomLocations.keys()]) {\n\t\t\tthis.cleanUpGeneratedViewContainer(viewContainerId);\n\t\t}\n\n\t\t// Save updated view customizations after cleanup\n\t\tthis.saveViewCustomizations();\n\n\t\t// Register visibility actions for all views\n\t\tfor (const [key, value] of this.viewContainerModels) {\n\t\t\tthis.registerViewsVisibilityActions(key, value);\n\t\t}\n\t\tthis.canRegisterViewsVisibilityActions = true;\n\t}\n\n\tprivate onDidRegisterViews(views: { views: IViewDescriptor[]; viewContainer: ViewContainer }[]): void {\n\t\tthis.contextKeyService.bufferChangeEvents(() => {\n\t\t\tviews.forEach(({ views, viewContainer }) => {\n\t\t\t\t// When views are registered, we need to regroup them based on the customizations\n\t\t\t\tconst regroupedViews = this.regroupViews(viewContainer.id, views);\n\n\t\t\t\t// Once they are grouped, try registering them which occurs\n\t\t\t\t// if the container has already been registered within this service\n\t\t\t\t// or we can generate the container from the source view id\n\t\t\t\tthis.registerGroupedViews(regroupedViews);\n\n\t\t\t\tviews.forEach(viewDescriptor => this.getOrCreateMovableViewContextKey(viewDescriptor).set(!!viewDescriptor.canMoveView));\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate isGeneratedContainerId(id: string): boolean {\n\t\treturn id.startsWith(ViewDescriptorService.COMMON_CONTAINER_ID_PREFIX);\n\t}\n\n\tprivate onDidDeregisterViews(views: IViewDescriptor[], viewContainer: ViewContainer): void {\n\t\t// When views are registered, we need to regroup them based on the customizations\n\t\tconst regroupedViews = this.regroupViews(viewContainer.id, views);\n\t\tthis.deregisterGroupedViews(regroupedViews);\n\t\tthis.contextKeyService.bufferChangeEvents(() => {\n\t\t\tviews.forEach(viewDescriptor => this.getOrCreateMovableViewContextKey(viewDescriptor).set(false));\n\t\t});\n\t}\n\n\tprivate regroupViews(containerId: string, views: IViewDescriptor[]): Map<string, IViewDescriptor[]> {\n\t\tconst viewsByContainer = new Map<string, IViewDescriptor[]>();\n\n\t\tfor (const viewDescriptor of views) {\n\t\t\tconst correctContainerId = this.viewDescriptorsCustomLocations.get(viewDescriptor.id) ?? containerId;\n\t\t\tlet containerViews = viewsByContainer.get(correctContainerId);\n\t\t\tif (!containerViews) {\n\t\t\t\tviewsByContainer.set(correctContainerId, containerViews = []);\n\t\t\t}\n\t\t\tcontainerViews.push(viewDescriptor);\n\t\t}\n\n\t\treturn viewsByContainer;\n\t}\n\n\tgetViewDescriptorById(viewId: string): IViewDescriptor | null {\n\t\treturn this.viewsRegistry.getView(viewId);\n\t}\n\n\tgetViewLocationById(viewId: string): ViewContainerLocation | null {\n\t\tconst container = this.getViewContainerByViewId(viewId);\n\t\tif (container === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.getViewContainerLocation(container);\n\t}\n\n\tgetViewContainerByViewId(viewId: string): ViewContainer | null {\n\t\tconst containerId = this.viewDescriptorsCustomLocations.get(viewId);\n\n\t\treturn containerId ?\n\t\t\tthis.viewContainersRegistry.get(containerId) ?? null :\n\t\t\tthis.getDefaultContainerById(viewId);\n\t}\n\n\tgetViewContainerLocation(viewContainer: ViewContainer): ViewContainerLocation {\n\t\treturn this.viewContainersCustomLocations.get(viewContainer.id) ?? this.getDefaultViewContainerLocation(viewContainer);\n\t}\n\n\tgetDefaultViewContainerLocation(viewContainer: ViewContainer): ViewContainerLocation {\n\t\treturn this.viewContainersRegistry.getViewContainerLocation(viewContainer);\n\t}\n\n\tgetDefaultContainerById(viewId: string): ViewContainer | null {\n\t\treturn this.viewsRegistry.getViewContainer(viewId) ?? null;\n\t}\n\n\tgetViewContainerModel(container: ViewContainer): ViewContainerModel {\n\t\treturn this.getOrRegisterViewContainerModel(container);\n\t}\n\n\tgetViewContainerById(id: string): ViewContainer | null {\n\t\treturn this.viewContainersRegistry.get(id) || null;\n\t}\n\n\tgetViewContainersByLocation(location: ViewContainerLocation): ViewContainer[] {\n\t\treturn this.viewContainers.filter(v => this.getViewContainerLocation(v) === location);\n\t}\n\n\tgetDefaultViewContainer(location: ViewContainerLocation): ViewContainer | undefined {\n\t\treturn this.viewContainersRegistry.getDefaultViewContainer(location);\n\t}\n\n\tmoveViewContainerToLocation(viewContainer: ViewContainer, location: ViewContainerLocation, requestedIndex?: number, reason?: string): void {\n\t\tthis.logger.value.trace(`moveViewContainerToLocation: viewContainer:${viewContainer.id} location:${location} reason:${reason}`);\n\t\tthis.moveViewContainerToLocationWithoutSaving(viewContainer, location, requestedIndex);\n\t\tthis.saveViewCustomizations();\n\t}\n\n\tgetViewContainerBadgeEnablementState(id: string): boolean {\n\t\treturn this.viewContainerBadgeEnablementStates.get(id) ?? true;\n\t}\n\n\tsetViewContainerBadgeEnablementState(id: string, badgesEnabled: boolean): void {\n\t\tthis.viewContainerBadgeEnablementStates.set(id, badgesEnabled);\n\t\tthis.saveViewCustomizations();\n\t}\n\n\tmoveViewToLocation(view: IViewDescriptor, location: ViewContainerLocation, reason?: string): void {\n\t\tthis.logger.value.trace(`moveViewToLocation: view:${view.id} location:${location} reason:${reason}`);\n\t\tconst container = this.registerGeneratedViewContainer(location);\n\t\tthis.moveViewsToContainer([view], container);\n\t}\n\n\tmoveViewsToContainer(views: IViewDescriptor[], viewContainer: ViewContainer, visibilityState?: ViewVisibilityState, reason?: string): void {\n\t\tif (!views.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.logger.value.trace(`moveViewsToContainer: views:${views.map(view => view.id).join(',')} viewContainer:${viewContainer.id} reason:${reason}`);\n\n\t\tconst from = this.getViewContainerByViewId(views[0].id);\n\t\tconst to = viewContainer;\n\n\t\tif (from && to && from !== to) {\n\t\t\t// Move views\n\t\t\tthis.moveViewsWithoutSaving(views, from, to, visibilityState);\n\t\t\tthis.cleanUpGeneratedViewContainer(from.id);\n\n\t\t\t// Save new locations\n\t\t\tthis.saveViewCustomizations();\n\n\t\t\t// Log to telemetry\n\t\t\tthis.reportMovedViews(views, from, to);\n\t\t}\n\t}\n\n\treset(): void {\n\t\tfor (const viewContainer of this.viewContainers) {\n\t\t\tconst viewContainerModel = this.getViewContainerModel(viewContainer);\n\n\t\t\tfor (const viewDescriptor of viewContainerModel.allViewDescriptors) {\n\t\t\t\tconst defaultContainer = this.getDefaultContainerById(viewDescriptor.id);\n\t\t\t\tconst currentContainer = this.getViewContainerByViewId(viewDescriptor.id);\n\t\t\t\tif (currentContainer && defaultContainer && currentContainer !== defaultContainer) {\n\t\t\t\t\tthis.moveViewsWithoutSaving([viewDescriptor], currentContainer, defaultContainer);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst defaultContainerLocation = this.getDefaultViewContainerLocation(viewContainer);\n\t\t\tconst currentContainerLocation = this.getViewContainerLocation(viewContainer);\n\t\t\tif (defaultContainerLocation !== null && currentContainerLocation !== defaultContainerLocation) {\n\t\t\t\tthis.moveViewContainerToLocationWithoutSaving(viewContainer, defaultContainerLocation);\n\t\t\t}\n\n\t\t\tthis.cleanUpGeneratedViewContainer(viewContainer.id);\n\t\t}\n\n\t\tthis.viewContainersCustomLocations.clear();\n\t\tthis.viewDescriptorsCustomLocations.clear();\n\t\tthis.saveViewCustomizations();\n\t}\n\n\tisViewContainerRemovedPermanently(viewContainerId: string): boolean {\n\t\treturn this.isGeneratedContainerId(viewContainerId) && !this.viewContainersCustomLocations.has(viewContainerId);\n\t}\n\n\tprivate onDidChangeDefaultContainer(views: IViewDescriptor[], from: ViewContainer, to: ViewContainer): void {\n\t\tconst viewsToMove = views.filter(view =>\n\t\t\t!this.viewDescriptorsCustomLocations.has(view.id) // Move views which are not already moved\n\t\t\t|| (!this.viewContainers.includes(from) && this.viewDescriptorsCustomLocations.get(view.id) === from.id) // Move views which are moved from a removed container\n\t\t);\n\t\tif (viewsToMove.length) {\n\t\t\tthis.moveViewsWithoutSaving(viewsToMove, from, to);\n\t\t}\n\t}\n\n\tprivate reportMovedViews(views: IViewDescriptor[], from: ViewContainer, to: ViewContainer): void {\n\t\tconst containerToString = (container: ViewContainer): string => {\n\t\t\tif (container.id.startsWith(ViewDescriptorService.COMMON_CONTAINER_ID_PREFIX)) {\n\t\t\t\treturn 'custom';\n\t\t\t}\n\n\t\t\tif (!container.extensionId) {\n\t\t\t\treturn container.id;\n\t\t\t}\n\n\t\t\treturn 'extension';\n\t\t};\n\n\t\tconst oldLocation = this.getViewContainerLocation(from);\n\t\tconst newLocation = this.getViewContainerLocation(to);\n\t\tconst viewCount = views.length;\n\t\tconst fromContainer = containerToString(from);\n\t\tconst toContainer = containerToString(to);\n\t\tconst fromLocation = oldLocation === ViewContainerLocation.Panel ? 'panel' : 'sidebar';\n\t\tconst toLocation = newLocation === ViewContainerLocation.Panel ? 'panel' : 'sidebar';\n\n\t\tinterface ViewDescriptorServiceMoveViewsEvent {\n\t\t\tviewCount: number;\n\t\t\tfromContainer: string;\n\t\t\ttoContainer: string;\n\t\t\tfromLocation: string;\n\t\t\ttoLocation: string;\n\t\t}\n\n\t\ttype ViewDescriptorServiceMoveViewsClassification = {\n\t\t\towner: 'benibenj';\n\t\t\tcomment: 'Logged when views are moved from one view container to another';\n\t\t\tviewCount: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The number of views moved' };\n\t\t\tfromContainer: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The starting view container of the moved views' };\n\t\t\ttoContainer: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The destination view container of the moved views' };\n\t\t\tfromLocation: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The location of the starting view container. e.g. Primary Side Bar' };\n\t\t\ttoLocation: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The location of the destination view container. e.g. Panel' };\n\t\t};\n\n\t\tthis.telemetryService.publicLog2<ViewDescriptorServiceMoveViewsEvent, ViewDescriptorServiceMoveViewsClassification>('viewDescriptorService.moveViews', { viewCount, fromContainer, toContainer, fromLocation, toLocation });\n\t}\n\n\tprivate moveViewsWithoutSaving(views: IViewDescriptor[], from: ViewContainer, to: ViewContainer, visibilityState: ViewVisibilityState = ViewVisibilityState.Expand): void {\n\t\tthis.removeViews(from, views);\n\t\tthis.addViews(to, views, visibilityState);\n\n\t\tconst oldLocation = this.getViewContainerLocation(from);\n\t\tconst newLocation = this.getViewContainerLocation(to);\n\n\t\tif (oldLocation !== newLocation) {\n\t\t\tthis._onDidChangeLocation.fire({ views, from: oldLocation, to: newLocation });\n\t\t}\n\n\t\tthis._onDidChangeContainer.fire({ views, from, to });\n\t}\n\n\tprivate moveViewContainerToLocationWithoutSaving(viewContainer: ViewContainer, location: ViewContainerLocation, requestedIndex?: number): void {\n\t\tconst from = this.getViewContainerLocation(viewContainer);\n\t\tconst to = location;\n\t\tif (from !== to) {\n\t\t\tconst isGeneratedViewContainer = this.isGeneratedContainerId(viewContainer.id);\n\t\t\tconst isDefaultViewContainerLocation = to === this.getDefaultViewContainerLocation(viewContainer);\n\t\t\tif (isGeneratedViewContainer || !isDefaultViewContainerLocation) {\n\t\t\t\tthis.viewContainersCustomLocations.set(viewContainer.id, to);\n\t\t\t} else {\n\t\t\t\tthis.viewContainersCustomLocations.delete(viewContainer.id);\n\t\t\t}\n\t\t\tthis.getOrCreateDefaultViewContainerLocationContextKey(viewContainer).set(isGeneratedViewContainer || isDefaultViewContainerLocation);\n\n\t\t\tviewContainer.requestedIndex = requestedIndex;\n\t\t\tthis._onDidChangeContainerLocation.fire({ viewContainer, from, to });\n\n\t\t\tconst views = this.getViewsByContainer(viewContainer);\n\t\t\tthis._onDidChangeLocation.fire({ views, from, to });\n\t\t}\n\t}\n\n\tprivate cleanUpGeneratedViewContainer(viewContainerId: string): void {\n\t\t// Skip if container is not generated\n\t\tif (!this.isGeneratedContainerId(viewContainerId)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Skip if container has views registered\n\t\tconst viewContainer = this.getViewContainerById(viewContainerId);\n\t\tif (viewContainer && this.getViewContainerModel(viewContainer)?.allViewDescriptors.length) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Skip if container has moved views\n\t\tif ([...this.viewDescriptorsCustomLocations.values()].includes(viewContainerId)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Deregister the container\n\t\tif (viewContainer) {\n\t\t\tthis.viewContainersRegistry.deregisterViewContainer(viewContainer);\n\t\t}\n\n\t\tthis.viewContainersCustomLocations.delete(viewContainerId);\n\t\tthis.viewContainerBadgeEnablementStates.delete(viewContainerId);\n\n\t\t// Clean up caches of container\n\t\tthis.storageService.remove(getViewsStateStorageId(viewContainer?.storageId || getViewContainerStorageId(viewContainerId)), StorageScope.PROFILE);\n\t}\n\n\tprivate registerGeneratedViewContainer(location: ViewContainerLocation, existingId?: string): ViewContainer {\n\t\tconst id = existingId || this.generateContainerId(location);\n\n\t\tconst container = this.viewContainersRegistry.registerViewContainer({\n\t\t\tid,\n\t\t\tctorDescriptor: new SyncDescriptor(ViewPaneContainer, [id, { mergeViewWithContainerWhenSingleView: true }]),\n\t\t\ttitle: { value: localize('user', \"User View Container\"), original: 'User View Container' }, // having a placeholder title - this should not be shown anywhere\n\t\t\ticon: location === ViewContainerLocation.Sidebar ? defaultViewIcon : undefined,\n\t\t\tstorageId: getViewContainerStorageId(id),\n\t\t\thideIfEmpty: true\n\t\t}, location, { doNotRegisterOpenCommand: true });\n\n\t\tif (this.viewContainersCustomLocations.get(container.id) !== location) {\n\t\t\tthis.viewContainersCustomLocations.set(container.id, location);\n\t\t}\n\n\t\tthis.getOrCreateDefaultViewContainerLocationContextKey(container).set(true);\n\n\t\treturn container;\n\t}\n\n\tprivate onDidStorageChange(): void {\n\t\tif (JSON.stringify(this.viewCustomizations) !== this.getStoredViewCustomizationsValue() /* This checks if current window changed the value or not */) {\n\t\t\tthis.onDidViewCustomizationsStorageChange();\n\t\t}\n\t}\n\n\tprivate onDidViewCustomizationsStorageChange(): void {\n\t\tthis._viewCustomizations = undefined;\n\n\t\tconst newViewContainerCustomizations = new Map<string, ViewContainerLocation>(Object.entries(this.viewCustomizations.viewContainerLocations));\n\t\tconst newViewDescriptorCustomizations = new Map<string, string>(Object.entries(this.viewCustomizations.viewLocations));\n\t\tconst viewContainersToMove: [ViewContainer, ViewContainerLocation][] = [];\n\t\tconst viewsToMove: { views: IViewDescriptor[]; from: ViewContainer; to: ViewContainer }[] = [];\n\n\t\tfor (const [containerId, location] of newViewContainerCustomizations.entries()) {\n\t\t\tconst container = this.getViewContainerById(containerId);\n\t\t\tif (container) {\n\t\t\t\tif (location !== this.getViewContainerLocation(container)) {\n\t\t\t\t\tviewContainersToMove.push([container, location]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If the container is generated and not registered, we register it now\n\t\t\telse if (this.isGeneratedContainerId(containerId)) {\n\t\t\t\tthis.registerGeneratedViewContainer(location, containerId);\n\t\t\t}\n\t\t}\n\n\t\tfor (const viewContainer of this.viewContainers) {\n\t\t\tif (!newViewContainerCustomizations.has(viewContainer.id)) {\n\t\t\t\tconst currentLocation = this.getViewContainerLocation(viewContainer);\n\t\t\t\tconst defaultLocation = this.getDefaultViewContainerLocation(viewContainer);\n\t\t\t\tif (currentLocation !== defaultLocation) {\n\t\t\t\t\tviewContainersToMove.push([viewContainer, defaultLocation]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (const [viewId, viewContainerId] of newViewDescriptorCustomizations.entries()) {\n\t\t\tconst viewDescriptor = this.getViewDescriptorById(viewId);\n\t\t\tif (viewDescriptor) {\n\t\t\t\tconst prevViewContainer = this.getViewContainerByViewId(viewId);\n\t\t\t\tconst newViewContainer = this.viewContainersRegistry.get(viewContainerId);\n\t\t\t\tif (prevViewContainer && newViewContainer && newViewContainer !== prevViewContainer) {\n\t\t\t\t\tviewsToMove.push({ views: [viewDescriptor], from: prevViewContainer, to: newViewContainer });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// If a value is not present in the cache, it must be reset to default\n\t\tfor (const viewContainer of this.viewContainers) {\n\t\t\tconst viewContainerModel = this.getViewContainerModel(viewContainer);\n\t\t\tfor (const viewDescriptor of viewContainerModel.allViewDescriptors) {\n\t\t\t\tif (!newViewDescriptorCustomizations.has(viewDescriptor.id)) {\n\t\t\t\t\tconst currentContainer = this.getViewContainerByViewId(viewDescriptor.id);\n\t\t\t\t\tconst defaultContainer = this.getDefaultContainerById(viewDescriptor.id);\n\t\t\t\t\tif (currentContainer && defaultContainer && currentContainer !== defaultContainer) {\n\t\t\t\t\t\tviewsToMove.push({ views: [viewDescriptor], from: currentContainer, to: defaultContainer });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Execute View Container Movements\n\t\tfor (const [container, location] of viewContainersToMove) {\n\t\t\tthis.moveViewContainerToLocationWithoutSaving(container, location);\n\t\t}\n\t\t// Execute View Movements\n\t\tfor (const { views, from, to } of viewsToMove) {\n\t\t\tthis.moveViewsWithoutSaving(views, from, to, ViewVisibilityState.Default);\n\t\t}\n\n\t\tthis.viewContainersCustomLocations = newViewContainerCustomizations;\n\t\tthis.viewDescriptorsCustomLocations = newViewDescriptorCustomizations;\n\t}\n\n\t// Generated Container Id Format\n\t// {Common Prefix}.{Location}.{Uniqueness Id}\n\t// Old Format (deprecated)\n\t// {Common Prefix}.{Uniqueness Id}.{Source View Id}\n\tprivate generateContainerId(location: ViewContainerLocation): string {\n\t\treturn `${ViewDescriptorService.COMMON_CONTAINER_ID_PREFIX}.${ViewContainerLocationToString(location)}.${generateUuid()}`;\n\t}\n\n\tprivate saveViewCustomizations(): void {\n\t\tconst viewCustomizations: IViewsCustomizations = { viewContainerLocations: {}, viewLocations: {}, viewContainerBadgeEnablementStates: {} };\n\n\t\tfor (const [containerId, location] of this.viewContainersCustomLocations) {\n\t\t\tconst container = this.getViewContainerById(containerId);\n\t\t\t// Skip if the view container is not a generated container and in default location\n\t\t\tif (container && !this.isGeneratedContainerId(containerId) && location === this.getDefaultViewContainerLocation(container)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tviewCustomizations.viewContainerLocations[containerId] = location;\n\t\t}\n\n\t\tfor (const [viewId, viewContainerId] of this.viewDescriptorsCustomLocations) {\n\t\t\tconst viewContainer = this.getViewContainerById(viewContainerId);\n\t\t\tif (viewContainer) {\n\t\t\t\tconst defaultContainer = this.getDefaultContainerById(viewId);\n\t\t\t\t// Skip if the view is at default location\n\t\t\t\t// https://github.com/microsoft/vscode/issues/90414\n\t\t\t\tif (defaultContainer?.id === viewContainer.id) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tviewCustomizations.viewLocations[viewId] = viewContainerId;\n\t\t}\n\n\t\t// Loop through viewContainerBadgeEnablementStates and save only the ones that are disabled\n\t\tfor (const [viewContainerId, badgeEnablementState] of this.viewContainerBadgeEnablementStates) {\n\t\t\tif (badgeEnablementState === false) {\n\t\t\t\tviewCustomizations.viewContainerBadgeEnablementStates[viewContainerId] = badgeEnablementState;\n\t\t\t}\n\t\t}\n\t\tthis.viewCustomizations = viewCustomizations;\n\t}\n\n\tprivate _viewCustomizations: IViewsCustomizations | undefined;\n\tprivate get viewCustomizations(): IViewsCustomizations {\n\t\tif (!this._viewCustomizations) {\n\t\t\tthis._viewCustomizations = JSON.parse(this.getStoredViewCustomizationsValue()) as IViewsCustomizations;\n\t\t\tthis._viewCustomizations.viewContainerLocations = this._viewCustomizations.viewContainerLocations ?? {};\n\t\t\tthis._viewCustomizations.viewLocations = this._viewCustomizations.viewLocations ?? {};\n\t\t\tthis._viewCustomizations.viewContainerBadgeEnablementStates = this._viewCustomizations.viewContainerBadgeEnablementStates ?? {};\n\t\t}\n\t\treturn this._viewCustomizations;\n\t}\n\n\tprivate set viewCustomizations(viewCustomizations: IViewsCustomizations) {\n\t\tconst value = JSON.stringify(viewCustomizations);\n\t\tif (JSON.stringify(this.viewCustomizations) !== value) {\n\t\t\tthis._viewCustomizations = viewCustomizations;\n\t\t\tthis.setStoredViewCustomizationsValue(value);\n\t\t}\n\t}\n\n\tprivate getStoredViewCustomizationsValue(): string {\n\t\treturn this.storageService.get(ViewDescriptorService.VIEWS_CUSTOMIZATIONS, StorageScope.PROFILE, '{}');\n\t}\n\n\tprivate setStoredViewCustomizationsValue(value: string): void {\n\t\tthis.storageService.store(ViewDescriptorService.VIEWS_CUSTOMIZATIONS, value, StorageScope.PROFILE, StorageTarget.USER);\n\t}\n\n\tprivate getViewsByContainer(viewContainer: ViewContainer): IViewDescriptor[] {\n\t\tconst result = this.viewsRegistry.getViews(viewContainer).filter(viewDescriptor => {\n\t\t\tconst viewDescriptorViewContainerId = this.viewDescriptorsCustomLocations.get(viewDescriptor.id) ?? viewContainer.id;\n\t\t\treturn viewDescriptorViewContainerId === viewContainer.id;\n\t\t});\n\n\t\tfor (const [viewId, viewContainerId] of this.viewDescriptorsCustomLocations.entries()) {\n\t\t\tif (viewContainerId !== viewContainer.id) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (this.viewsRegistry.getViewContainer(viewId) === viewContainer) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst viewDescriptor = this.getViewDescriptorById(viewId);\n\t\t\tif (viewDescriptor) {\n\t\t\t\tresult.push(viewDescriptor);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate onDidRegisterViewContainer(viewContainer: ViewContainer): void {\n\t\tconst defaultLocation = this.isGeneratedContainerId(viewContainer.id) ? true : this.getViewContainerLocation(viewContainer) === this.getDefaultViewContainerLocation(viewContainer);\n\t\tthis.getOrCreateDefaultViewContainerLocationContextKey(viewContainer).set(defaultLocation);\n\t\tthis.getOrRegisterViewContainerModel(viewContainer);\n\t}\n\n\tprivate getOrRegisterViewContainerModel(viewContainer: ViewContainer): ViewContainerModel {\n\t\tlet viewContainerModel = this.viewContainerModels.get(viewContainer)?.viewContainerModel;\n\n\t\tif (!viewContainerModel) {\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tviewContainerModel = disposables.add(this.instantiationService.createInstance(ViewContainerModel, viewContainer));\n\n\t\t\tthis.onDidChangeActiveViews({ added: viewContainerModel.activeViewDescriptors, removed: [] });\n\t\t\tviewContainerModel.onDidChangeActiveViewDescriptors(changed => this.onDidChangeActiveViews(changed), this, disposables);\n\n\t\t\tthis.onDidChangeVisibleViews({ added: [...viewContainerModel.visibleViewDescriptors], removed: [] });\n\t\t\tviewContainerModel.onDidAddVisibleViewDescriptors(added => this.onDidChangeVisibleViews({ added: added.map(({ viewDescriptor }) => viewDescriptor), removed: [] }), this, disposables);\n\t\t\tviewContainerModel.onDidRemoveVisibleViewDescriptors(removed => this.onDidChangeVisibleViews({ added: [], removed: removed.map(({ viewDescriptor }) => viewDescriptor) }), this, disposables);\n\n\t\t\tdisposables.add(toDisposable(() => this.viewsVisibilityActionDisposables.deleteAndDispose(viewContainer)));\n\n\t\t\tdisposables.add(this.registerResetViewContainerAction(viewContainer));\n\n\t\t\tconst value = { viewContainerModel: viewContainerModel, disposables, dispose: () => disposables.dispose() };\n\t\t\tthis.viewContainerModels.set(viewContainer, value);\n\n\t\t\t// Register all views that were statically registered to this container\n\t\t\t// Potentially, this is registering something that was handled by another container\n\t\t\t// addViews() handles this by filtering views that are already registered\n\t\t\tthis.onDidRegisterViews([{ views: this.viewsRegistry.getViews(viewContainer), viewContainer }]);\n\n\t\t\t// Add views that were registered prior to this view container\n\t\t\tconst viewsToRegister = this.getViewsByContainer(viewContainer).filter(view => this.getDefaultContainerById(view.id) !== viewContainer);\n\t\t\tif (viewsToRegister.length) {\n\t\t\t\tthis.addViews(viewContainer, viewsToRegister);\n\t\t\t\tthis.contextKeyService.bufferChangeEvents(() => {\n\t\t\t\t\tviewsToRegister.forEach(viewDescriptor => this.getOrCreateMovableViewContextKey(viewDescriptor).set(!!viewDescriptor.canMoveView));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.canRegisterViewsVisibilityActions) {\n\t\t\t\tthis.registerViewsVisibilityActions(viewContainer, value);\n\t\t\t}\n\t\t}\n\n\t\treturn viewContainerModel;\n\t}\n\n\tprivate onDidDeregisterViewContainer(viewContainer: ViewContainer): void {\n\t\tthis.viewContainerModels.deleteAndDispose(viewContainer);\n\t\tthis.viewsVisibilityActionDisposables.deleteAndDispose(viewContainer);\n\t}\n\n\tprivate onDidChangeActiveViews({ added, removed }: { added: ReadonlyArray<IViewDescriptor>; removed: ReadonlyArray<IViewDescriptor> }): void {\n\t\tthis.contextKeyService.bufferChangeEvents(() => {\n\t\t\tadded.forEach(viewDescriptor => this.getOrCreateActiveViewContextKey(viewDescriptor).set(true));\n\t\t\tremoved.forEach(viewDescriptor => this.getOrCreateActiveViewContextKey(viewDescriptor).set(false));\n\t\t});\n\t}\n\n\tprivate onDidChangeVisibleViews({ added, removed }: { added: IViewDescriptor[]; removed: IViewDescriptor[] }): void {\n\t\tthis.contextKeyService.bufferChangeEvents(() => {\n\t\t\tadded.forEach(viewDescriptor => this.getOrCreateVisibleViewContextKey(viewDescriptor).set(true));\n\t\t\tremoved.forEach(viewDescriptor => this.getOrCreateVisibleViewContextKey(viewDescriptor).set(false));\n\t\t});\n\t}\n\n\tprivate registerViewsVisibilityActions(viewContainer: ViewContainer, { viewContainerModel, disposables }: { viewContainerModel: ViewContainerModel; disposables: DisposableStore }): void {\n\t\tthis.viewsVisibilityActionDisposables.deleteAndDispose(viewContainer);\n\t\tthis.viewsVisibilityActionDisposables.set(viewContainer, this.registerViewsVisibilityActionsForContainer(viewContainerModel));\n\t\tdisposables.add(Event.any(\n\t\t\tviewContainerModel.onDidChangeActiveViewDescriptors,\n\t\t\tviewContainerModel.onDidAddVisibleViewDescriptors,\n\t\t\tviewContainerModel.onDidRemoveVisibleViewDescriptors,\n\t\t\tviewContainerModel.onDidMoveVisibleViewDescriptors\n\t\t)(e => {\n\t\t\tthis.viewsVisibilityActionDisposables.deleteAndDispose(viewContainer);\n\t\t\tthis.viewsVisibilityActionDisposables.set(viewContainer, this.registerViewsVisibilityActionsForContainer(viewContainerModel));\n\t\t}));\n\t}\n\n\tprivate registerViewsVisibilityActionsForContainer(viewContainerModel: ViewContainerModel): IDisposable {\n\t\tconst disposables = new DisposableStore();\n\t\tviewContainerModel.activeViewDescriptors.forEach((viewDescriptor, index) => {\n\t\t\tif (!viewDescriptor.remoteAuthority) {\n\t\t\t\tdisposables.add(registerAction2(class extends ViewPaneContainerAction<ViewPaneContainer> {\n\t\t\t\t\tconstructor() {\n\t\t\t\t\t\tsuper({\n\t\t\t\t\t\t\tid: `${viewDescriptor.id}.toggleVisibility`,\n\t\t\t\t\t\t\tviewPaneContainerId: viewContainerModel.viewContainer.id,\n\t\t\t\t\t\t\tprecondition: viewDescriptor.canToggleVisibility && (!viewContainerModel.isVisible(viewDescriptor.id) || viewContainerModel.visibleViewDescriptors.length > 1) ? ContextKeyExpr.true() : ContextKeyExpr.false(),\n\t\t\t\t\t\t\ttoggled: ContextKeyExpr.has(`${viewDescriptor.id}.visible`),\n\t\t\t\t\t\t\ttitle: viewDescriptor.name,\n\t\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\t\tdescription: localize2('toggleVisibilityDescription', 'Toggles the visibility of the {0} view if the view container it is located in is visible', viewDescriptor.name.value)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmenu: [{\n\t\t\t\t\t\t\t\tid: ViewsSubMenu,\n\t\t\t\t\t\t\t\twhen: ContextKeyExpr.equals('viewContainer', viewContainerModel.viewContainer.id),\n\t\t\t\t\t\t\t\torder: index,\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tid: MenuId.ViewContainerTitleContext,\n\t\t\t\t\t\t\t\twhen: ContextKeyExpr.equals('viewContainer', viewContainerModel.viewContainer.id),\n\t\t\t\t\t\t\t\torder: index,\n\t\t\t\t\t\t\t\tgroup: '1_toggleVisibility'\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tid: MenuId.ViewTitleContext,\n\t\t\t\t\t\t\t\twhen: ContextKeyExpr.or(...viewContainerModel.visibleViewDescriptors.map(v => ContextKeyExpr.equals('view', v.id))),\n\t\t\t\t\t\t\t\torder: index,\n\t\t\t\t\t\t\t\tgroup: '2_toggleVisibility'\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tasync runInViewPaneContainer(serviceAccessor: ServicesAccessor, viewPaneContainer: ViewPaneContainer): Promise<void> {\n\t\t\t\t\t\tviewPaneContainer.toggleViewVisibility(viewDescriptor.id);\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\tdisposables.add(registerAction2(class extends ViewPaneContainerAction<ViewPaneContainer> {\n\t\t\t\t\tconstructor() {\n\t\t\t\t\t\tsuper({\n\t\t\t\t\t\t\tid: `${viewDescriptor.id}.removeView`,\n\t\t\t\t\t\t\tviewPaneContainerId: viewContainerModel.viewContainer.id,\n\t\t\t\t\t\t\ttitle: localize('hideView', \"Hide '{0}'\", viewDescriptor.name.value),\n\t\t\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t\t\tdescription: localize2('hideViewDescription', 'Hides the {0} view if it is visible and the view container it is located in is visible', viewDescriptor.name.value)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tprecondition: viewDescriptor.canToggleVisibility && (!viewContainerModel.isVisible(viewDescriptor.id) || viewContainerModel.visibleViewDescriptors.length > 1) ? ContextKeyExpr.true() : ContextKeyExpr.false(),\n\t\t\t\t\t\t\tmenu: [{\n\t\t\t\t\t\t\t\tid: MenuId.ViewTitleContext,\n\t\t\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\t\t\tContextKeyExpr.equals('view', viewDescriptor.id),\n\t\t\t\t\t\t\t\t\tContextKeyExpr.has(`${viewDescriptor.id}.visible`),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tgroup: '1_hide',\n\t\t\t\t\t\t\t\torder: 1\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tasync runInViewPaneContainer(serviceAccessor: ServicesAccessor, viewPaneContainer: ViewPaneContainer): Promise<void> {\n\t\t\t\t\t\tif (viewPaneContainer.getView(viewDescriptor.id)?.isVisible()) {\n\t\t\t\t\t\t\tviewPaneContainer.toggleViewVisibility(viewDescriptor.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t});\n\t\treturn disposables;\n\t}\n\n\tprivate registerResetViewContainerAction(viewContainer: ViewContainer): IDisposable {\n\t\tconst that = this;\n\t\treturn registerAction2(class ResetViewLocationAction extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: `${viewContainer.id}.resetViewContainerLocation`,\n\t\t\t\t\ttitle: localize2('resetViewLocation', \"Reset Location\"),\n\t\t\t\t\tmenu: [{\n\t\t\t\t\t\tid: MenuId.ViewContainerTitleContext,\n\t\t\t\t\t\tgroup: '1_viewActions',\n\t\t\t\t\t\twhen: ContextKeyExpr.or(\n\t\t\t\t\t\t\tContextKeyExpr.and(\n\t\t\t\t\t\t\t\tContextKeyExpr.equals('viewContainer', viewContainer.id),\n\t\t\t\t\t\t\t\tContextKeyExpr.equals(`${viewContainer.id}.defaultViewContainerLocation`, false)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t}],\n\t\t\t\t});\n\t\t\t}\n\t\t\trun(accessor: ServicesAccessor) {\n\t\t\t\tthat.moveViewContainerToLocation(viewContainer, that.getDefaultViewContainerLocation(viewContainer), undefined, this.desc.id);\n\t\t\t\taccessor.get(IViewsService).openViewContainer(viewContainer.id, true);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate addViews(container: ViewContainer, views: IViewDescriptor[], visibilityState: ViewVisibilityState = ViewVisibilityState.Default): void {\n\t\tthis.contextKeyService.bufferChangeEvents(() => {\n\t\t\tviews.forEach(view => {\n\t\t\t\tconst isDefaultContainer = this.getDefaultContainerById(view.id) === container;\n\t\t\t\tthis.getOrCreateDefaultViewLocationContextKey(view).set(isDefaultContainer);\n\t\t\t\tif (isDefaultContainer) {\n\t\t\t\t\tthis.viewDescriptorsCustomLocations.delete(view.id);\n\t\t\t\t} else {\n\t\t\t\t\tthis.viewDescriptorsCustomLocations.set(view.id, container.id);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tthis.getViewContainerModel(container).add(views.map(view => {\n\t\t\treturn {\n\t\t\t\tviewDescriptor: view,\n\t\t\t\tcollapsed: visibilityState === ViewVisibilityState.Default ? undefined : false,\n\t\t\t\tvisible: visibilityState === ViewVisibilityState.Default ? undefined : true\n\t\t\t};\n\t\t}));\n\t}\n\n\tprivate removeViews(container: ViewContainer, views: IViewDescriptor[]): void {\n\t\t// Set view default location keys to false\n\t\tthis.contextKeyService.bufferChangeEvents(() => {\n\t\t\tviews.forEach(view => {\n\t\t\t\tif (this.viewDescriptorsCustomLocations.get(view.id) === container.id) {\n\t\t\t\t\tthis.viewDescriptorsCustomLocations.delete(view.id);\n\t\t\t\t}\n\t\t\t\tthis.getOrCreateDefaultViewLocationContextKey(view).set(false);\n\t\t\t});\n\t\t});\n\n\t\t// Remove the views\n\t\tthis.getViewContainerModel(container).remove(views);\n\t}\n\n\tprivate getOrCreateActiveViewContextKey(viewDescriptor: IViewDescriptor): IContextKey<boolean> {\n\t\tconst activeContextKeyId = `${viewDescriptor.id}.active`;\n\t\tlet contextKey = this.activeViewContextKeys.get(activeContextKeyId);\n\t\tif (!contextKey) {\n\t\t\tcontextKey = new RawContextKey(activeContextKeyId, false).bindTo(this.contextKeyService);\n\t\t\tthis.activeViewContextKeys.set(activeContextKeyId, contextKey);\n\t\t}\n\t\treturn contextKey;\n\t}\n\n\tprivate getOrCreateVisibleViewContextKey(viewDescriptor: IViewDescriptor): IContextKey<boolean> {\n\t\tconst activeContextKeyId = `${viewDescriptor.id}.visible`;\n\t\tlet contextKey = this.activeViewContextKeys.get(activeContextKeyId);\n\t\tif (!contextKey) {\n\t\t\tcontextKey = new RawContextKey(activeContextKeyId, false).bindTo(this.contextKeyService);\n\t\t\tthis.activeViewContextKeys.set(activeContextKeyId, contextKey);\n\t\t}\n\t\treturn contextKey;\n\t}\n\n\tprivate getOrCreateMovableViewContextKey(viewDescriptor: IViewDescriptor): IContextKey<boolean> {\n\t\tconst movableViewContextKeyId = `${viewDescriptor.id}.canMove`;\n\t\tlet contextKey = this.movableViewContextKeys.get(movableViewContextKeyId);\n\t\tif (!contextKey) {\n\t\t\tcontextKey = new RawContextKey(movableViewContextKeyId, false).bindTo(this.contextKeyService);\n\t\t\tthis.movableViewContextKeys.set(movableViewContextKeyId, contextKey);\n\t\t}\n\t\treturn contextKey;\n\t}\n\n\tprivate getOrCreateDefaultViewLocationContextKey(viewDescriptor: IViewDescriptor): IContextKey<boolean> {\n\t\tconst defaultViewLocationContextKeyId = `${viewDescriptor.id}.defaultViewLocation`;\n\t\tlet contextKey = this.defaultViewLocationContextKeys.get(defaultViewLocationContextKeyId);\n\t\tif (!contextKey) {\n\t\t\tcontextKey = new RawContextKey(defaultViewLocationContextKeyId, false).bindTo(this.contextKeyService);\n\t\t\tthis.defaultViewLocationContextKeys.set(defaultViewLocationContextKeyId, contextKey);\n\t\t}\n\t\treturn contextKey;\n\t}\n\n\tprivate getOrCreateDefaultViewContainerLocationContextKey(viewContainer: ViewContainer): IContextKey<boolean> {\n\t\tconst defaultViewContainerLocationContextKeyId = `${viewContainer.id}.defaultViewContainerLocation`;\n\t\tlet contextKey = this.defaultViewContainerLocationContextKeys.get(defaultViewContainerLocationContextKeyId);\n\t\tif (!contextKey) {\n\t\t\tcontextKey = new RawContextKey(defaultViewContainerLocationContextKeyId, false).bindTo(this.contextKeyService);\n\t\t\tthis.defaultViewContainerLocationContextKeys.set(defaultViewContainerLocationContextKeyId, contextKey);\n\t\t}\n\t\treturn contextKey;\n\t}\n}\n\nregisterSingleton(IViewDescriptorService, ViewDescriptorService, InstantiationType.Delayed);\n"]}