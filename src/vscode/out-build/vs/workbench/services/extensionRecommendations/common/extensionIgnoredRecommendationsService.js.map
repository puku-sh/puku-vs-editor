{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/extensionRecommendations/common/extensionIgnoredRecommendationsService.ts","vs/workbench/services/extensionRecommendations/common/extensionIgnoredRecommendationsService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,QAAQ,EAAE,MAAM,mCAAmC,CAAC;AAC7D,OAAO,EAAE,OAAO,EAAE,MAAM,kCAAkC,CAAC;AAC3D,OAAO,EAAE,UAAU,EAAE,MAAM,sCAAsC,CAAC;AAClE,OAAO,EAAqB,iBAAiB,EAAE,MAAM,yDAAyD,CAAC;AAC/G,OAAO,EAAE,eAAe,EAA+B,MAAM,gDAAgD,CAAC;AAC9G,OAAO,EAAE,uCAAuC,EAA2C,MAAM,+BAA+B,CAAC;AACjI,OAAO,EAAE,iCAAiC,EAAE,MAAM,gCAAgC,CAAC;AAEnF,MAAM,gCAAgC,GAAG,6CAA6C,CAAC;AAEhF,IAAM,sCAAsC,GAA5C,MAAM,sCAAuC,SAAQ,UAAU;IASrE,IAAI,4BAA4B,KAAe,OAAO,CAAC,GAAG,IAAI,CAAC,6BAA6B,CAAC,CAAC,CAAC,CAAC;IAOhG,IAAI,sBAAsB,KAAe,OAAO,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,4BAA4B,EAAE,GAAG,IAAI,CAAC,+BAA+B,CAAC,CAAC,CAAC,CAAC,CAAC;IAE5I,YACoC,gCAAoF,EACtG,cAAgD;QAEjE,KAAK,EAAE,CAAC;QAH4C,qCAAgC,GAAhC,gCAAgC,CAAmC;QACrF,mBAAc,GAAd,cAAc,CAAiB;QAhB1D,uCAAkC,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAAQ,CAAC,CAAC;QACxE,sCAAiC,GAAG,IAAI,CAAC,kCAAkC,CAAC,KAAK,CAAC;QAE3F,iCAAiC;QACzB,kCAA6B,GAAa,EAAE,CAAC;QAE7C,4CAAuC,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAA2C,CAAC,CAAC;QAChH,2CAAsC,GAAG,IAAI,CAAC,uCAAuC,CAAC,KAAK,CAAC;QAErG,oCAAoC;QAC5B,oCAA+B,GAAa,EAAE,CAAC;QAStD,IAAI,CAAC,6BAA6B,GAAG,IAAI,CAAC,+BAA+B,EAAE,CAAC;QAC5E,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,+BAAuB,gCAAgC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;QAE3J,IAAI,CAAC,mCAAmC,EAAE,CAAC;IAC5C,CAAC;IAEO,KAAK,CAAC,mCAAmC;QAChD,IAAI,CAAC,+BAA+B,GAAG,MAAM,IAAI,CAAC,gCAAgC,CAAC,0BAA0B,EAAE,CAAC;QAChH,IAAI,CAAC,kCAAkC,CAAC,IAAI,EAAE,CAAC;QAC/C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,KAAK,IAAI,EAAE;YAC5F,IAAI,CAAC,+BAA+B,GAAG,MAAM,IAAI,CAAC,gCAAgC,CAAC,0BAA0B,EAAE,CAAC;YAChH,IAAI,CAAC,kCAAkC,CAAC,IAAI,EAAE,CAAC;QAChD,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,iCAAiC,CAAC,WAAmB,EAAE,YAAqB;QAC3E,WAAW,GAAG,WAAW,CAAC,WAAW,EAAE,CAAC;QACxC,MAAM,OAAO,GAAG,IAAI,CAAC,6BAA6B,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC;QAC/E,IAAI,OAAO,KAAK,YAAY,EAAE,CAAC;YAC9B,OAAO;QACR,CAAC;QAED,IAAI,CAAC,6BAA6B,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,6BAA6B,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,6BAA6B,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,WAAW,CAAC,CAAC;QAC/K,IAAI,CAAC,iCAAiC,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC;QAC3E,IAAI,CAAC,uCAAuC,CAAC,IAAI,CAAC,EAAE,WAAW,EAAE,aAAa,EAAE,CAAC,YAAY,EAAE,CAAC,CAAC;QACjG,IAAI,CAAC,kCAAkC,CAAC,IAAI,EAAE,CAAC;IAChD,CAAC;IAEO,+BAA+B;QACtC,MAAM,sBAAsB,GAAa,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;QACtF,OAAO,sBAAsB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC;IACzD,CAAC;IAEO,kBAAkB;QACzB,IAAI,IAAI,CAAC,2BAA2B,KAAK,IAAI,CAAC,oCAAoC,EAAE,CAAC,4DAA4D,EAAE,CAAC;YACnJ,IAAI,CAAC,4BAA4B,GAAG,SAAS,CAAC;YAC9C,IAAI,CAAC,6BAA6B,GAAG,IAAI,CAAC,+BAA+B,EAAE,CAAC;YAC5E,IAAI,CAAC,kCAAkC,CAAC,IAAI,EAAE,CAAC;QAChD,CAAC;IACF,CAAC;IAEO,iCAAiC,CAAC,sBAAgC;QACzE,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC;IAC3E,CAAC;IAGD,IAAY,2BAA2B;QACtC,IAAI,CAAC,IAAI,CAAC,4BAA4B,EAAE,CAAC;YACxC,IAAI,CAAC,4BAA4B,GAAG,IAAI,CAAC,oCAAoC,EAAE,CAAC;QACjF,CAAC;QAED,OAAO,IAAI,CAAC,4BAA4B,CAAC;IAC1C,CAAC;IAED,IAAY,2BAA2B,CAAC,2BAAmC;QAC1E,IAAI,IAAI,CAAC,2BAA2B,KAAK,2BAA2B,EAAE,CAAC;YACtE,IAAI,CAAC,4BAA4B,GAAG,2BAA2B,CAAC;YAChE,IAAI,CAAC,oCAAoC,CAAC,2BAA2B,CAAC,CAAC;QACxE,CAAC;IACF,CAAC;IAEO,oCAAoC;QAC3C,OAAO,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,gCAAgC,gCAAwB,IAAI,CAAC,CAAC;IAC9F,CAAC;IAEO,oCAAoC,CAAC,KAAa;QACzD,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,gCAAgC,EAAE,KAAK,2DAA2C,CAAC;IAC9G,CAAC;CAED,CAAA;AA5FY,sCAAsC;IAmBhD,WAAA,iCAAiC,CAAA;IACjC,WAAA,eAAe,CAAA;GApBL,sCAAsC,CA4FlD;;AAED,iBAAiB,CAAC,uCAAuC,EAAE,sCAAsC,oCAA4B,CAAC","file":"extensionIgnoredRecommendationsService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { distinct } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IExtensionIgnoredRecommendationsService, IgnoredRecommendationChangeNotification } from './extensionRecommendations.js';\nimport { IWorkspaceExtensionsConfigService } from './workspaceExtensionsConfig.js';\n\nconst ignoredRecommendationsStorageKey = 'extensionsAssistant/ignored_recommendations';\n\nexport class ExtensionIgnoredRecommendationsService extends Disposable implements IExtensionIgnoredRecommendationsService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate _onDidChangeIgnoredRecommendations = this._register(new Emitter<void>());\n\treadonly onDidChangeIgnoredRecommendations = this._onDidChangeIgnoredRecommendations.event;\n\n\t// Global Ignored Recommendations\n\tprivate _globalIgnoredRecommendations: string[] = [];\n\tget globalIgnoredRecommendations(): string[] { return [...this._globalIgnoredRecommendations]; }\n\tprivate _onDidChangeGlobalIgnoredRecommendation = this._register(new Emitter<IgnoredRecommendationChangeNotification>());\n\treadonly onDidChangeGlobalIgnoredRecommendation = this._onDidChangeGlobalIgnoredRecommendation.event;\n\n\t// Ignored Workspace Recommendations\n\tprivate ignoredWorkspaceRecommendations: string[] = [];\n\n\tget ignoredRecommendations(): string[] { return distinct([...this.globalIgnoredRecommendations, ...this.ignoredWorkspaceRecommendations]); }\n\n\tconstructor(\n\t\t@IWorkspaceExtensionsConfigService private readonly workspaceExtensionsConfigService: IWorkspaceExtensionsConfigService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t) {\n\t\tsuper();\n\t\tthis._globalIgnoredRecommendations = this.getCachedIgnoredRecommendations();\n\t\tthis._register(this.storageService.onDidChangeValue(StorageScope.PROFILE, ignoredRecommendationsStorageKey, this._store)(() => this.onDidStorageChange()));\n\n\t\tthis.initIgnoredWorkspaceRecommendations();\n\t}\n\n\tprivate async initIgnoredWorkspaceRecommendations(): Promise<void> {\n\t\tthis.ignoredWorkspaceRecommendations = await this.workspaceExtensionsConfigService.getUnwantedRecommendations();\n\t\tthis._onDidChangeIgnoredRecommendations.fire();\n\t\tthis._register(this.workspaceExtensionsConfigService.onDidChangeExtensionsConfigs(async () => {\n\t\t\tthis.ignoredWorkspaceRecommendations = await this.workspaceExtensionsConfigService.getUnwantedRecommendations();\n\t\t\tthis._onDidChangeIgnoredRecommendations.fire();\n\t\t}));\n\t}\n\n\ttoggleGlobalIgnoredRecommendation(extensionId: string, shouldIgnore: boolean): void {\n\t\textensionId = extensionId.toLowerCase();\n\t\tconst ignored = this._globalIgnoredRecommendations.indexOf(extensionId) !== -1;\n\t\tif (ignored === shouldIgnore) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._globalIgnoredRecommendations = shouldIgnore ? [...this._globalIgnoredRecommendations, extensionId] : this._globalIgnoredRecommendations.filter(id => id !== extensionId);\n\t\tthis.storeCachedIgnoredRecommendations(this._globalIgnoredRecommendations);\n\t\tthis._onDidChangeGlobalIgnoredRecommendation.fire({ extensionId, isRecommended: !shouldIgnore });\n\t\tthis._onDidChangeIgnoredRecommendations.fire();\n\t}\n\n\tprivate getCachedIgnoredRecommendations(): string[] {\n\t\tconst ignoredRecommendations: string[] = JSON.parse(this.ignoredRecommendationsValue);\n\t\treturn ignoredRecommendations.map(e => e.toLowerCase());\n\t}\n\n\tprivate onDidStorageChange(): void {\n\t\tif (this.ignoredRecommendationsValue !== this.getStoredIgnoredRecommendationsValue() /* This checks if current window changed the value or not */) {\n\t\t\tthis._ignoredRecommendationsValue = undefined;\n\t\t\tthis._globalIgnoredRecommendations = this.getCachedIgnoredRecommendations();\n\t\t\tthis._onDidChangeIgnoredRecommendations.fire();\n\t\t}\n\t}\n\n\tprivate storeCachedIgnoredRecommendations(ignoredRecommendations: string[]): void {\n\t\tthis.ignoredRecommendationsValue = JSON.stringify(ignoredRecommendations);\n\t}\n\n\tprivate _ignoredRecommendationsValue: string | undefined;\n\tprivate get ignoredRecommendationsValue(): string {\n\t\tif (!this._ignoredRecommendationsValue) {\n\t\t\tthis._ignoredRecommendationsValue = this.getStoredIgnoredRecommendationsValue();\n\t\t}\n\n\t\treturn this._ignoredRecommendationsValue;\n\t}\n\n\tprivate set ignoredRecommendationsValue(ignoredRecommendationsValue: string) {\n\t\tif (this.ignoredRecommendationsValue !== ignoredRecommendationsValue) {\n\t\t\tthis._ignoredRecommendationsValue = ignoredRecommendationsValue;\n\t\t\tthis.setStoredIgnoredRecommendationsValue(ignoredRecommendationsValue);\n\t\t}\n\t}\n\n\tprivate getStoredIgnoredRecommendationsValue(): string {\n\t\treturn this.storageService.get(ignoredRecommendationsStorageKey, StorageScope.PROFILE, '[]');\n\t}\n\n\tprivate setStoredIgnoredRecommendationsValue(value: string): void {\n\t\tthis.storageService.store(ignoredRecommendationsStorageKey, value, StorageScope.PROFILE, StorageTarget.USER);\n\t}\n\n}\n\nregisterSingleton(IExtensionIgnoredRecommendationsService, ExtensionIgnoredRecommendationsService, InstantiationType.Delayed);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { distinct } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IExtensionIgnoredRecommendationsService, IgnoredRecommendationChangeNotification } from './extensionRecommendations.js';\nimport { IWorkspaceExtensionsConfigService } from './workspaceExtensionsConfig.js';\n\nconst ignoredRecommendationsStorageKey = 'extensionsAssistant/ignored_recommendations';\n\nexport class ExtensionIgnoredRecommendationsService extends Disposable implements IExtensionIgnoredRecommendationsService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate _onDidChangeIgnoredRecommendations = this._register(new Emitter<void>());\n\treadonly onDidChangeIgnoredRecommendations = this._onDidChangeIgnoredRecommendations.event;\n\n\t// Global Ignored Recommendations\n\tprivate _globalIgnoredRecommendations: string[] = [];\n\tget globalIgnoredRecommendations(): string[] { return [...this._globalIgnoredRecommendations]; }\n\tprivate _onDidChangeGlobalIgnoredRecommendation = this._register(new Emitter<IgnoredRecommendationChangeNotification>());\n\treadonly onDidChangeGlobalIgnoredRecommendation = this._onDidChangeGlobalIgnoredRecommendation.event;\n\n\t// Ignored Workspace Recommendations\n\tprivate ignoredWorkspaceRecommendations: string[] = [];\n\n\tget ignoredRecommendations(): string[] { return distinct([...this.globalIgnoredRecommendations, ...this.ignoredWorkspaceRecommendations]); }\n\n\tconstructor(\n\t\t@IWorkspaceExtensionsConfigService private readonly workspaceExtensionsConfigService: IWorkspaceExtensionsConfigService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t) {\n\t\tsuper();\n\t\tthis._globalIgnoredRecommendations = this.getCachedIgnoredRecommendations();\n\t\tthis._register(this.storageService.onDidChangeValue(StorageScope.PROFILE, ignoredRecommendationsStorageKey, this._store)(() => this.onDidStorageChange()));\n\n\t\tthis.initIgnoredWorkspaceRecommendations();\n\t}\n\n\tprivate async initIgnoredWorkspaceRecommendations(): Promise<void> {\n\t\tthis.ignoredWorkspaceRecommendations = await this.workspaceExtensionsConfigService.getUnwantedRecommendations();\n\t\tthis._onDidChangeIgnoredRecommendations.fire();\n\t\tthis._register(this.workspaceExtensionsConfigService.onDidChangeExtensionsConfigs(async () => {\n\t\t\tthis.ignoredWorkspaceRecommendations = await this.workspaceExtensionsConfigService.getUnwantedRecommendations();\n\t\t\tthis._onDidChangeIgnoredRecommendations.fire();\n\t\t}));\n\t}\n\n\ttoggleGlobalIgnoredRecommendation(extensionId: string, shouldIgnore: boolean): void {\n\t\textensionId = extensionId.toLowerCase();\n\t\tconst ignored = this._globalIgnoredRecommendations.indexOf(extensionId) !== -1;\n\t\tif (ignored === shouldIgnore) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._globalIgnoredRecommendations = shouldIgnore ? [...this._globalIgnoredRecommendations, extensionId] : this._globalIgnoredRecommendations.filter(id => id !== extensionId);\n\t\tthis.storeCachedIgnoredRecommendations(this._globalIgnoredRecommendations);\n\t\tthis._onDidChangeGlobalIgnoredRecommendation.fire({ extensionId, isRecommended: !shouldIgnore });\n\t\tthis._onDidChangeIgnoredRecommendations.fire();\n\t}\n\n\tprivate getCachedIgnoredRecommendations(): string[] {\n\t\tconst ignoredRecommendations: string[] = JSON.parse(this.ignoredRecommendationsValue);\n\t\treturn ignoredRecommendations.map(e => e.toLowerCase());\n\t}\n\n\tprivate onDidStorageChange(): void {\n\t\tif (this.ignoredRecommendationsValue !== this.getStoredIgnoredRecommendationsValue() /* This checks if current window changed the value or not */) {\n\t\t\tthis._ignoredRecommendationsValue = undefined;\n\t\t\tthis._globalIgnoredRecommendations = this.getCachedIgnoredRecommendations();\n\t\t\tthis._onDidChangeIgnoredRecommendations.fire();\n\t\t}\n\t}\n\n\tprivate storeCachedIgnoredRecommendations(ignoredRecommendations: string[]): void {\n\t\tthis.ignoredRecommendationsValue = JSON.stringify(ignoredRecommendations);\n\t}\n\n\tprivate _ignoredRecommendationsValue: string | undefined;\n\tprivate get ignoredRecommendationsValue(): string {\n\t\tif (!this._ignoredRecommendationsValue) {\n\t\t\tthis._ignoredRecommendationsValue = this.getStoredIgnoredRecommendationsValue();\n\t\t}\n\n\t\treturn this._ignoredRecommendationsValue;\n\t}\n\n\tprivate set ignoredRecommendationsValue(ignoredRecommendationsValue: string) {\n\t\tif (this.ignoredRecommendationsValue !== ignoredRecommendationsValue) {\n\t\t\tthis._ignoredRecommendationsValue = ignoredRecommendationsValue;\n\t\t\tthis.setStoredIgnoredRecommendationsValue(ignoredRecommendationsValue);\n\t\t}\n\t}\n\n\tprivate getStoredIgnoredRecommendationsValue(): string {\n\t\treturn this.storageService.get(ignoredRecommendationsStorageKey, StorageScope.PROFILE, '[]');\n\t}\n\n\tprivate setStoredIgnoredRecommendationsValue(value: string): void {\n\t\tthis.storageService.store(ignoredRecommendationsStorageKey, value, StorageScope.PROFILE, StorageTarget.USER);\n\t}\n\n}\n\nregisterSingleton(IExtensionIgnoredRecommendationsService, ExtensionIgnoredRecommendationsService, InstantiationType.Delayed);\n"]}