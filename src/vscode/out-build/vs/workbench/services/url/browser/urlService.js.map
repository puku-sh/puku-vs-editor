{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/url/browser/urlService.ts","vs/workbench/services/url/browser/urlService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,WAAW,EAAE,MAAM,wCAAwC,CAAC;AACrE,OAAO,EAAE,GAAG,EAAiB,MAAM,gCAAgC,CAAC;AACpE,OAAO,EAAqB,iBAAiB,EAAE,MAAM,yDAAyD,CAAC;AAC/G,OAAO,EAAE,kBAAkB,EAAE,MAAM,+CAA+C,CAAC;AAEnF,OAAO,EAAE,mCAAmC,EAAE,MAAM,iDAAiD,CAAC;AACtG,OAAO,EAAE,cAAc,EAAqD,MAAM,8CAA8C,CAAC;AACjI,OAAO,EAAE,aAAa,EAAE,MAAM,oCAAoC,CAAC;AACnE,OAAO,EAAE,eAAe,EAAE,MAAM,uDAAuD,CAAC;AA4BxF,MAAM,gBAAgB;IAErB,YACS,UAAuB,EACvB,cAA+B;QAD/B,eAAU,GAAV,UAAU,CAAa;QACvB,mBAAc,GAAd,cAAc,CAAiB;IACpC,CAAC;IAEL,KAAK,CAAC,IAAI,CAAC,QAAsB,EAAE,OAAmD;QACrF,IAAK,OAA2C,EAAE,YAAY,EAAE,CAAC;YAChE,OAAO,KAAK,CAAC;QACd,CAAC;QAED,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,EAAE,CAAC;YAC/D,OAAO,KAAK,CAAC;QACd,CAAC;QAED,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE,CAAC;YAClC,QAAQ,GAAG,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAChC,CAAC;QAED,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;IAC1D,CAAC;CACD;AAEM,IAAM,iBAAiB,GAAvB,MAAM,iBAAkB,SAAQ,kBAAkB;IAIxD,YACsC,kBAAuD,EAC5E,aAA6B,EAC5B,cAA+B;QAEhD,KAAK,EAAE,CAAC;QAER,IAAI,CAAC,QAAQ,GAAG,kBAAkB,CAAC,OAAO,EAAE,mBAAmB,CAAC;QAEhE,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YACnB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;QACpF,CAAC;QAED,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,cAAc,CAAC,IAAI,gBAAgB,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC;IAC1F,CAAC;IAED,MAAM,CAAC,OAAgC;QACtC,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YACnB,OAAO,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACtC,CAAC;QAED,OAAO,GAAG,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;IACpC,CAAC;CACD,CAAA;AA3BY,iBAAiB;IAK3B,WAAA,mCAAmC,CAAA;IACnC,WAAA,cAAc,CAAA;IACd,WAAA,eAAe,CAAA;GAPL,iBAAiB,CA2B7B;;AAED,iBAAiB,CAAC,WAAW,EAAE,iBAAiB,oCAA4B,CAAC","file":"urlService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IURLService } from '../../../../platform/url/common/url.js';\nimport { URI, UriComponents } from '../../../../base/common/uri.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { AbstractURLService } from '../../../../platform/url/common/urlService.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { IBrowserWorkbenchEnvironmentService } from '../../environment/browser/environmentService.js';\nimport { IOpenerService, IOpener, OpenExternalOptions, OpenInternalOptions } from '../../../../platform/opener/common/opener.js';\nimport { matchesScheme } from '../../../../base/common/network.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\n\nexport interface IURLCallbackProvider {\n\n\t/**\n\t * Indicates that a Uri has been opened outside of VSCode. The Uri\n\t * will be forwarded to all installed Uri handlers in the system.\n\t */\n\treadonly onCallback: Event<URI>;\n\n\t/**\n\t * Creates a Uri that - if opened in a browser - must result in\n\t * the `onCallback` to fire.\n\t *\n\t * The optional `Partial<UriComponents>` must be properly restored for\n\t * the Uri passed to the `onCallback` handler.\n\t *\n\t * For example: if a Uri is to be created with `scheme:\"vscode\"`,\n\t * `authority:\"foo\"` and `path:\"bar\"` the `onCallback` should fire\n\t * with a Uri `vscode://foo/bar`.\n\t *\n\t * If there are additional `query` values in the Uri, they should\n\t * be added to the list of provided `query` arguments from the\n\t * `Partial<UriComponents>`.\n\t */\n\tcreate(options?: Partial<UriComponents>): URI;\n}\n\nclass BrowserURLOpener implements IOpener {\n\n\tconstructor(\n\t\tprivate urlService: IURLService,\n\t\tprivate productService: IProductService\n\t) { }\n\n\tasync open(resource: string | URI, options?: OpenInternalOptions | OpenExternalOptions): Promise<boolean> {\n\t\tif ((options as OpenExternalOptions | undefined)?.openExternal) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!matchesScheme(resource, this.productService.urlProtocol)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (typeof resource === 'string') {\n\t\t\tresource = URI.parse(resource);\n\t\t}\n\n\t\treturn this.urlService.open(resource, { trusted: true });\n\t}\n}\n\nexport class BrowserURLService extends AbstractURLService {\n\n\tprivate provider: IURLCallbackProvider | undefined;\n\n\tconstructor(\n\t\t@IBrowserWorkbenchEnvironmentService environmentService: IBrowserWorkbenchEnvironmentService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IProductService productService: IProductService\n\t) {\n\t\tsuper();\n\n\t\tthis.provider = environmentService.options?.urlCallbackProvider;\n\n\t\tif (this.provider) {\n\t\t\tthis._register(this.provider.onCallback(uri => this.open(uri, { trusted: true })));\n\t\t}\n\n\t\tthis._register(openerService.registerOpener(new BrowserURLOpener(this, productService)));\n\t}\n\n\tcreate(options?: Partial<UriComponents>): URI {\n\t\tif (this.provider) {\n\t\t\treturn this.provider.create(options);\n\t\t}\n\n\t\treturn URI.parse('unsupported://');\n\t}\n}\n\nregisterSingleton(IURLService, BrowserURLService, InstantiationType.Delayed);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IURLService } from '../../../../platform/url/common/url.js';\nimport { URI, UriComponents } from '../../../../base/common/uri.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { AbstractURLService } from '../../../../platform/url/common/urlService.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { IBrowserWorkbenchEnvironmentService } from '../../environment/browser/environmentService.js';\nimport { IOpenerService, IOpener, OpenExternalOptions, OpenInternalOptions } from '../../../../platform/opener/common/opener.js';\nimport { matchesScheme } from '../../../../base/common/network.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\n\nexport interface IURLCallbackProvider {\n\n\t/**\n\t * Indicates that a Uri has been opened outside of VSCode. The Uri\n\t * will be forwarded to all installed Uri handlers in the system.\n\t */\n\treadonly onCallback: Event<URI>;\n\n\t/**\n\t * Creates a Uri that - if opened in a browser - must result in\n\t * the `onCallback` to fire.\n\t *\n\t * The optional `Partial<UriComponents>` must be properly restored for\n\t * the Uri passed to the `onCallback` handler.\n\t *\n\t * For example: if a Uri is to be created with `scheme:\"vscode\"`,\n\t * `authority:\"foo\"` and `path:\"bar\"` the `onCallback` should fire\n\t * with a Uri `vscode://foo/bar`.\n\t *\n\t * If there are additional `query` values in the Uri, they should\n\t * be added to the list of provided `query` arguments from the\n\t * `Partial<UriComponents>`.\n\t */\n\tcreate(options?: Partial<UriComponents>): URI;\n}\n\nclass BrowserURLOpener implements IOpener {\n\n\tconstructor(\n\t\tprivate urlService: IURLService,\n\t\tprivate productService: IProductService\n\t) { }\n\n\tasync open(resource: string | URI, options?: OpenInternalOptions | OpenExternalOptions): Promise<boolean> {\n\t\tif ((options as OpenExternalOptions | undefined)?.openExternal) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!matchesScheme(resource, this.productService.urlProtocol)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (typeof resource === 'string') {\n\t\t\tresource = URI.parse(resource);\n\t\t}\n\n\t\treturn this.urlService.open(resource, { trusted: true });\n\t}\n}\n\nexport class BrowserURLService extends AbstractURLService {\n\n\tprivate provider: IURLCallbackProvider | undefined;\n\n\tconstructor(\n\t\t@IBrowserWorkbenchEnvironmentService environmentService: IBrowserWorkbenchEnvironmentService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IProductService productService: IProductService\n\t) {\n\t\tsuper();\n\n\t\tthis.provider = environmentService.options?.urlCallbackProvider;\n\n\t\tif (this.provider) {\n\t\t\tthis._register(this.provider.onCallback(uri => this.open(uri, { trusted: true })));\n\t\t}\n\n\t\tthis._register(openerService.registerOpener(new BrowserURLOpener(this, productService)));\n\t}\n\n\tcreate(options?: Partial<UriComponents>): URI {\n\t\tif (this.provider) {\n\t\t\treturn this.provider.create(options);\n\t\t}\n\n\t\treturn URI.parse('unsupported://');\n\t}\n}\n\nregisterSingleton(IURLService, BrowserURLService, InstantiationType.Delayed);\n"]}