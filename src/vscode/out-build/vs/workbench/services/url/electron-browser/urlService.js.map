{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/url/electron-browser/urlService.ts","vs/workbench/services/url/electron-browser/urlService.ts"],"names":[],"mappings":"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","file":"urlService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IURLService, IURLHandler, IOpenURLOptions } from '../../../../platform/url/common/url.js';\nimport { URI, UriComponents } from '../../../../base/common/uri.js';\nimport { IMainProcessService } from '../../../../platform/ipc/common/mainProcessService.js';\nimport { URLHandlerChannel } from '../../../../platform/url/common/urlIpc.js';\nimport { IOpenerService, IOpener } from '../../../../platform/opener/common/opener.js';\nimport { matchesScheme } from '../../../../base/common/network.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { ProxyChannel } from '../../../../base/parts/ipc/common/ipc.js';\nimport { FocusMode, INativeHostService } from '../../../../platform/native/common/native.js';\nimport { NativeURLService } from '../../../../platform/url/common/urlService.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\n\nexport interface IRelayOpenURLOptions extends IOpenURLOptions {\n\topenToSide?: boolean;\n\topenExternal?: boolean;\n}\n\nexport class RelayURLService extends NativeURLService implements IURLHandler, IOpener {\n\n\tprivate urlService: IURLService;\n\n\tconstructor(\n\t\t@IMainProcessService mainProcessService: IMainProcessService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@INativeHostService private readonly nativeHostService: INativeHostService,\n\t\t@IProductService productService: IProductService,\n\t\t@ILogService private readonly logService: ILogService\n\t) {\n\t\tsuper(productService);\n\n\t\tthis.urlService = ProxyChannel.toService<IURLService>(mainProcessService.getChannel('url'));\n\n\t\tmainProcessService.registerChannel('urlHandler', new URLHandlerChannel(this));\n\t\topenerService.registerOpener(this);\n\t}\n\n\toverride create(options?: Partial<UriComponents>): URI {\n\t\tconst uri = super.create(options);\n\n\t\tlet query = uri.query;\n\t\tif (!query) {\n\t\t\tquery = `windowId=${encodeURIComponent(this.nativeHostService.windowId)}`;\n\t\t} else {\n\t\t\tquery += `&windowId=${encodeURIComponent(this.nativeHostService.windowId)}`;\n\t\t}\n\n\t\treturn uri.with({ query });\n\t}\n\n\toverride async open(resource: URI | string, options?: IRelayOpenURLOptions): Promise<boolean> {\n\n\t\tif (!matchesScheme(resource, this.productService.urlProtocol)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (typeof resource === 'string') {\n\t\t\tresource = URI.parse(resource);\n\t\t}\n\t\treturn await this.urlService.open(resource, options);\n\t}\n\n\tasync handleURL(uri: URI, options?: IOpenURLOptions): Promise<boolean> {\n\t\tconst result = await super.open(uri, options);\n\n\t\tif (result) {\n\t\t\tthis.logService.trace('URLService#handleURL(): handled', uri.toString(true));\n\n\t\t\tawait this.nativeHostService.focusWindow({ mode: FocusMode.Force /* Application may not be active */, targetWindowId: this.nativeHostService.windowId });\n\t\t} else {\n\t\t\tthis.logService.trace('URLService#handleURL(): not handled', uri.toString(true));\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nregisterSingleton(IURLService, RelayURLService, InstantiationType.Eager);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IURLService, IURLHandler, IOpenURLOptions } from '../../../../platform/url/common/url.js';\nimport { URI, UriComponents } from '../../../../base/common/uri.js';\nimport { IMainProcessService } from '../../../../platform/ipc/common/mainProcessService.js';\nimport { URLHandlerChannel } from '../../../../platform/url/common/urlIpc.js';\nimport { IOpenerService, IOpener } from '../../../../platform/opener/common/opener.js';\nimport { matchesScheme } from '../../../../base/common/network.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { ProxyChannel } from '../../../../base/parts/ipc/common/ipc.js';\nimport { FocusMode, INativeHostService } from '../../../../platform/native/common/native.js';\nimport { NativeURLService } from '../../../../platform/url/common/urlService.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\n\nexport interface IRelayOpenURLOptions extends IOpenURLOptions {\n\topenToSide?: boolean;\n\topenExternal?: boolean;\n}\n\nexport class RelayURLService extends NativeURLService implements IURLHandler, IOpener {\n\n\tprivate urlService: IURLService;\n\n\tconstructor(\n\t\t@IMainProcessService mainProcessService: IMainProcessService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@INativeHostService private readonly nativeHostService: INativeHostService,\n\t\t@IProductService productService: IProductService,\n\t\t@ILogService private readonly logService: ILogService\n\t) {\n\t\tsuper(productService);\n\n\t\tthis.urlService = ProxyChannel.toService<IURLService>(mainProcessService.getChannel('url'));\n\n\t\tmainProcessService.registerChannel('urlHandler', new URLHandlerChannel(this));\n\t\topenerService.registerOpener(this);\n\t}\n\n\toverride create(options?: Partial<UriComponents>): URI {\n\t\tconst uri = super.create(options);\n\n\t\tlet query = uri.query;\n\t\tif (!query) {\n\t\t\tquery = `windowId=${encodeURIComponent(this.nativeHostService.windowId)}`;\n\t\t} else {\n\t\t\tquery += `&windowId=${encodeURIComponent(this.nativeHostService.windowId)}`;\n\t\t}\n\n\t\treturn uri.with({ query });\n\t}\n\n\toverride async open(resource: URI | string, options?: IRelayOpenURLOptions): Promise<boolean> {\n\n\t\tif (!matchesScheme(resource, this.productService.urlProtocol)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (typeof resource === 'string') {\n\t\t\tresource = URI.parse(resource);\n\t\t}\n\t\treturn await this.urlService.open(resource, options);\n\t}\n\n\tasync handleURL(uri: URI, options?: IOpenURLOptions): Promise<boolean> {\n\t\tconst result = await super.open(uri, options);\n\n\t\tif (result) {\n\t\t\tthis.logService.trace('URLService#handleURL(): handled', uri.toString(true));\n\n\t\t\tawait this.nativeHostService.focusWindow({ mode: FocusMode.Force /* Application may not be active */, targetWindowId: this.nativeHostService.windowId });\n\t\t} else {\n\t\t\tthis.logService.trace('URLService#handleURL(): not handled', uri.toString(true));\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nregisterSingleton(IURLService, RelayURLService, InstantiationType.Eager);\n"]}