{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/themes/test/node/tokenStyleResolving.test.ts","vs/workbench/services/themes/test/node/tokenStyleResolving.test.ts"],"names":[],"mappings":"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","file":"tokenStyleResolving.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ColorThemeData } from '../../common/colorThemeData.js';\nimport assert from 'assert';\nimport { ITokenColorCustomizations } from '../../common/workbenchThemeService.js';\nimport { TokenStyle, getTokenClassificationRegistry } from '../../../../../platform/theme/common/tokenClassificationRegistry.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { isString } from '../../../../../base/common/types.js';\nimport { FileService } from '../../../../../platform/files/common/fileService.js';\nimport { NullLogService } from '../../../../../platform/log/common/log.js';\nimport { DiskFileSystemProvider } from '../../../../../platform/files/node/diskFileSystemProvider.js';\nimport { FileAccess, Schemas } from '../../../../../base/common/network.js';\nimport { ExtensionResourceLoaderService } from '../../../../../platform/extensionResourceLoader/common/extensionResourceLoaderService.js';\nimport { ITokenStyle } from '../../../../../platform/theme/common/themeService.js';\nimport { mock, TestProductService } from '../../../../test/common/workbenchTestServices.js';\nimport { IRequestService } from '../../../../../platform/request/common/request.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { IEnvironmentService } from '../../../../../platform/environment/common/environment.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ExtensionGalleryManifestService } from '../../../../../platform/extensionManagement/common/extensionGalleryManifestService.js';\n\nconst undefinedStyle = { bold: undefined, underline: undefined, italic: undefined };\nconst unsetStyle = { bold: false, underline: false, italic: false };\n\nfunction ts(foreground: string | undefined, styleFlags: { bold?: boolean; underline?: boolean; strikethrough?: boolean; italic?: boolean } | undefined): TokenStyle {\n\tconst foregroundColor = isString(foreground) ? Color.fromHex(foreground) : undefined;\n\treturn new TokenStyle(foregroundColor, styleFlags?.bold, styleFlags?.underline, styleFlags?.strikethrough, styleFlags?.italic);\n}\n\nfunction tokenStyleAsString(ts: TokenStyle | undefined | null) {\n\tif (!ts) {\n\t\treturn 'tokenstyle-undefined';\n\t}\n\tlet str = ts.foreground ? ts.foreground.toString() : 'no-foreground';\n\tif (ts.bold !== undefined) {\n\t\tstr += ts.bold ? '+B' : '-B';\n\t}\n\tif (ts.underline !== undefined) {\n\t\tstr += ts.underline ? '+U' : '-U';\n\t}\n\tif (ts.italic !== undefined) {\n\t\tstr += ts.italic ? '+I' : '-I';\n\t}\n\treturn str;\n}\n\nfunction assertTokenStyle(actual: TokenStyle | undefined | null, expected: TokenStyle | undefined | null, message?: string) {\n\tassert.strictEqual(tokenStyleAsString(actual), tokenStyleAsString(expected), message);\n}\n\nfunction assertTokenStyleMetaData(colorIndex: string[], actual: ITokenStyle | undefined, expected: TokenStyle | undefined | null, message = '') {\n\tif (expected === undefined || expected === null || actual === undefined) {\n\t\tassert.strictEqual(actual, expected, message);\n\t\treturn;\n\t}\n\tassert.strictEqual(actual.bold, expected.bold, 'bold ' + message);\n\tassert.strictEqual(actual.italic, expected.italic, 'italic ' + message);\n\tassert.strictEqual(actual.underline, expected.underline, 'underline ' + message);\n\n\tconst actualForegroundIndex = actual.foreground;\n\tif (actualForegroundIndex && expected.foreground) {\n\t\tassert.strictEqual(colorIndex[actualForegroundIndex], Color.Format.CSS.formatHexA(expected.foreground, true).toUpperCase(), 'foreground ' + message);\n\t} else {\n\t\tassert.strictEqual(actualForegroundIndex, expected.foreground || 0, 'foreground ' + message);\n\t}\n}\n\n\nfunction assertTokenStyles(themeData: ColorThemeData, expected: { [qualifiedClassifier: string]: TokenStyle }, language = 'typescript') {\n\tconst colorIndex = themeData.tokenColorMap;\n\n\tfor (const qualifiedClassifier in expected) {\n\t\tconst [type, ...modifiers] = qualifiedClassifier.split('.');\n\n\t\tconst expectedTokenStyle = expected[qualifiedClassifier];\n\n\t\tconst tokenStyleMetaData = themeData.getTokenStyleMetadata(type, modifiers, language);\n\t\tassertTokenStyleMetaData(colorIndex, tokenStyleMetaData, expectedTokenStyle, qualifiedClassifier);\n\t}\n}\n\nsuite('Themes - TokenStyleResolving', () => {\n\tconst fileService = new FileService(new NullLogService());\n\tconst requestService = new (mock<IRequestService>())();\n\tconst storageService = new (mock<IStorageService>())();\n\tconst environmentService = new (mock<IEnvironmentService>())();\n\tconst configurationService = new (mock<IConfigurationService>())();\n\n\tconst extensionResourceLoaderService = new ExtensionResourceLoaderService(fileService, storageService, TestProductService, environmentService, configurationService, new ExtensionGalleryManifestService(TestProductService), requestService, new NullLogService());\n\n\tconst diskFileSystemProvider = new DiskFileSystemProvider(new NullLogService());\n\tfileService.registerProvider(Schemas.file, diskFileSystemProvider);\n\n\tteardown(() => {\n\t\tdiskFileSystemProvider.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('color defaults', async () => {\n\t\tconst themeData = ColorThemeData.createUnloadedTheme('foo');\n\t\tthemeData.location = FileAccess.asFileUri('vs/workbench/services/themes/test/node/color-theme.json');\n\t\tawait themeData.ensureLoaded(extensionResourceLoaderService);\n\n\t\tassert.strictEqual(themeData.isLoaded, true);\n\n\t\tassertTokenStyles(themeData, {\n\t\t\t'comment': ts('#000000', undefinedStyle),\n\t\t\t'variable': ts('#111111', unsetStyle),\n\t\t\t'type': ts('#333333', { bold: false, underline: true, italic: false }),\n\t\t\t'function': ts('#333333', unsetStyle),\n\t\t\t'string': ts('#444444', undefinedStyle),\n\t\t\t'number': ts('#555555', undefinedStyle),\n\t\t\t'keyword': ts('#666666', undefinedStyle)\n\t\t});\n\t});\n\n\ttest('resolveScopes', async () => {\n\t\tconst themeData = ColorThemeData.createLoadedEmptyTheme('test', 'test');\n\n\t\tconst customTokenColors: ITokenColorCustomizations = {\n\t\t\ttextMateRules: [\n\t\t\t\t{\n\t\t\t\t\tscope: 'variable',\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tfontStyle: '',\n\t\t\t\t\t\tforeground: '#F8F8F2'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tscope: 'keyword.operator',\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tfontStyle: 'italic bold underline',\n\t\t\t\t\t\tforeground: '#F92672'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tscope: 'storage',\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tfontStyle: 'italic',\n\t\t\t\t\t\tforeground: '#F92672'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tscope: ['storage.type', 'meta.structure.dictionary.json string.quoted.double.json'],\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tforeground: '#66D9EF'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tscope: 'entity.name.type, entity.name.class, entity.name.namespace, entity.name.scope-resolution',\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tfontStyle: 'underline',\n\t\t\t\t\t\tforeground: '#A6E22E'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t]\n\t\t};\n\n\t\tthemeData.setCustomTokenColors(customTokenColors);\n\n\t\tlet tokenStyle;\n\t\tconst defaultTokenStyle = undefined;\n\n\t\ttokenStyle = themeData.resolveScopes([['variable']]);\n\t\tassertTokenStyle(tokenStyle, ts('#F8F8F2', unsetStyle), 'variable');\n\n\t\ttokenStyle = themeData.resolveScopes([['keyword.operator']]);\n\t\tassertTokenStyle(tokenStyle, ts('#F92672', { italic: true, bold: true, underline: true }), 'keyword');\n\n\t\ttokenStyle = themeData.resolveScopes([['keyword']]);\n\t\tassertTokenStyle(tokenStyle, defaultTokenStyle, 'keyword');\n\n\t\ttokenStyle = themeData.resolveScopes([['keyword.operator']]);\n\t\tassertTokenStyle(tokenStyle, ts('#F92672', { italic: true, bold: true, underline: true }), 'keyword.operator');\n\n\t\ttokenStyle = themeData.resolveScopes([['keyword.operators']]);\n\t\tassertTokenStyle(tokenStyle, defaultTokenStyle, 'keyword.operators');\n\n\t\ttokenStyle = themeData.resolveScopes([['storage']]);\n\t\tassertTokenStyle(tokenStyle, ts('#F92672', { italic: true, bold: false, underline: false }), 'storage');\n\n\t\ttokenStyle = themeData.resolveScopes([['storage.type']]);\n\t\tassertTokenStyle(tokenStyle, ts('#66D9EF', { italic: true, bold: false, underline: false }), 'storage.type');\n\n\t\ttokenStyle = themeData.resolveScopes([['entity.name.class']]);\n\t\tassertTokenStyle(tokenStyle, ts('#A6E22E', { italic: false, bold: false, underline: true }), 'entity.name.class');\n\n\t\ttokenStyle = themeData.resolveScopes([['meta.structure.dictionary.json', 'string.quoted.double.json']]);\n\t\tassertTokenStyle(tokenStyle, ts('#66D9EF', undefined), 'json property');\n\n\t\ttokenStyle = themeData.resolveScopes([['source.json', 'meta.structure.dictionary.json', 'string.quoted.double.json']]);\n\t\tassertTokenStyle(tokenStyle, ts('#66D9EF', undefined), 'json property');\n\n\t\ttokenStyle = themeData.resolveScopes([['keyword'], ['storage.type'], ['entity.name.class']]);\n\t\tassertTokenStyle(tokenStyle, ts('#66D9EF', { italic: true, bold: false, underline: false }), 'storage.type');\n\n\t});\n\n\n\ttest('resolveScopes - match most specific', async () => {\n\t\tconst themeData = ColorThemeData.createLoadedEmptyTheme('test', 'test');\n\n\t\tconst customTokenColors: ITokenColorCustomizations = {\n\t\t\ttextMateRules: [\n\t\t\t\t{\n\t\t\t\t\tscope: 'entity.name.type',\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tfontStyle: 'underline',\n\t\t\t\t\t\tforeground: '#A6E22E'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tscope: 'entity.name.type.class',\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tforeground: '#FF00FF'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tscope: 'entity.name',\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tforeground: '#FFFFFF'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t]\n\t\t};\n\n\t\tthemeData.setCustomTokenColors(customTokenColors);\n\n\t\tconst tokenStyle = themeData.resolveScopes([['entity.name.type.class']]);\n\t\tassertTokenStyle(tokenStyle, ts('#FF00FF', { italic: false, bold: false, underline: true }), 'entity.name.type.class');\n\n\t});\n\n\n\ttest('rule matching', async () => {\n\t\tconst themeData = ColorThemeData.createLoadedEmptyTheme('test', 'test');\n\t\tthemeData.setCustomColors({ 'editor.foreground': '#000000' });\n\t\tthemeData.setCustomSemanticTokenColors({\n\t\t\tenabled: true,\n\t\t\trules: {\n\t\t\t\t'type': '#ff0000',\n\t\t\t\t'class': { foreground: '#0000ff', italic: true },\n\t\t\t\t'*.static': { bold: true },\n\t\t\t\t'*.declaration': { italic: true },\n\t\t\t\t'*.async.static': { italic: true, underline: true },\n\t\t\t\t'*.async': { foreground: '#000fff', underline: true }\n\t\t\t}\n\t\t});\n\n\t\tassertTokenStyles(themeData, {\n\t\t\t'type': ts('#ff0000', undefinedStyle),\n\t\t\t'type.static': ts('#ff0000', { bold: true }),\n\t\t\t'type.static.declaration': ts('#ff0000', { bold: true, italic: true }),\n\t\t\t'class': ts('#0000ff', { italic: true }),\n\t\t\t'class.static.declaration': ts('#0000ff', { bold: true, italic: true, }),\n\t\t\t'class.declaration': ts('#0000ff', { italic: true }),\n\t\t\t'class.declaration.async': ts('#000fff', { underline: true, italic: true }),\n\t\t\t'class.declaration.async.static': ts('#000fff', { italic: true, underline: true, bold: true }),\n\t\t});\n\n\t});\n\n\ttest('super type', async () => {\n\t\tconst registry = getTokenClassificationRegistry();\n\n\t\tregistry.registerTokenType('myTestInterface', 'A type just for testing', 'interface');\n\t\tregistry.registerTokenType('myTestSubInterface', 'A type just for testing', 'myTestInterface');\n\n\t\ttry {\n\t\t\tconst themeData = ColorThemeData.createLoadedEmptyTheme('test', 'test');\n\t\t\tthemeData.setCustomColors({ 'editor.foreground': '#000000' });\n\t\t\tthemeData.setCustomSemanticTokenColors({\n\t\t\t\tenabled: true,\n\t\t\t\trules: {\n\t\t\t\t\t'interface': '#ff0000',\n\t\t\t\t\t'myTestInterface': { italic: true },\n\t\t\t\t\t'interface.static': { bold: true }\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tassertTokenStyles(themeData, { 'myTestSubInterface': ts('#ff0000', { italic: true }) });\n\t\t\tassertTokenStyles(themeData, { 'myTestSubInterface.static': ts('#ff0000', { italic: true, bold: true }) });\n\n\t\t\tthemeData.setCustomSemanticTokenColors({\n\t\t\t\tenabled: true,\n\t\t\t\trules: {\n\t\t\t\t\t'interface': '#ff0000',\n\t\t\t\t\t'myTestInterface': { foreground: '#ff00ff', italic: true }\n\t\t\t\t}\n\t\t\t});\n\t\t\tassertTokenStyles(themeData, { 'myTestSubInterface': ts('#ff00ff', { italic: true }) });\n\t\t} finally {\n\t\t\tregistry.deregisterTokenType('myTestInterface');\n\t\t\tregistry.deregisterTokenType('myTestSubInterface');\n\t\t}\n\t});\n\n\ttest('language', async () => {\n\t\ttry {\n\t\t\tconst themeData = ColorThemeData.createLoadedEmptyTheme('test', 'test');\n\t\t\tthemeData.setCustomColors({ 'editor.foreground': '#000000' });\n\t\t\tthemeData.setCustomSemanticTokenColors({\n\t\t\t\tenabled: true,\n\t\t\t\trules: {\n\t\t\t\t\t'interface': '#fff000',\n\t\t\t\t\t'interface:java': '#ff0000',\n\t\t\t\t\t'interface.static': { bold: true },\n\t\t\t\t\t'interface.static:typescript': { italic: true }\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tassertTokenStyles(themeData, { 'interface': ts('#ff0000', undefined) }, 'java');\n\t\t\tassertTokenStyles(themeData, { 'interface': ts('#fff000', undefined) }, 'typescript');\n\t\t\tassertTokenStyles(themeData, { 'interface.static': ts('#ff0000', { bold: true }) }, 'java');\n\t\t\tassertTokenStyles(themeData, { 'interface.static': ts('#fff000', { bold: true, italic: true }) }, 'typescript');\n\t\t} finally {\n\t\t}\n\t});\n\n\ttest('language - scope resolving', async () => {\n\t\tconst registry = getTokenClassificationRegistry();\n\n\t\tconst numberOfDefaultRules = registry.getTokenStylingDefaultRules().length;\n\n\t\tregistry.registerTokenStyleDefault(registry.parseTokenSelector('type', 'typescript1'), { scopesToProbe: [['entity.name.type.ts1']] });\n\t\tregistry.registerTokenStyleDefault(registry.parseTokenSelector('type:javascript1'), { scopesToProbe: [['entity.name.type.js1']] });\n\n\t\ttry {\n\t\t\tconst themeData = ColorThemeData.createLoadedEmptyTheme('test', 'test');\n\t\t\tthemeData.setCustomColors({ 'editor.foreground': '#000000' });\n\t\t\tthemeData.setCustomTokenColors({\n\t\t\t\ttextMateRules: [\n\t\t\t\t\t{\n\t\t\t\t\t\tscope: 'entity.name.type',\n\t\t\t\t\t\tsettings: { foreground: '#aa0000' }\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tscope: 'entity.name.type.ts1',\n\t\t\t\t\t\tsettings: { foreground: '#bb0000' }\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tassertTokenStyles(themeData, { 'type': ts('#aa0000', undefined) }, 'javascript1');\n\t\t\tassertTokenStyles(themeData, { 'type': ts('#bb0000', undefined) }, 'typescript1');\n\n\t\t} finally {\n\t\t\tregistry.deregisterTokenStyleDefault(registry.parseTokenSelector('type', 'typescript1'));\n\t\t\tregistry.deregisterTokenStyleDefault(registry.parseTokenSelector('type:javascript1'));\n\n\t\t\tassert.strictEqual(registry.getTokenStylingDefaultRules().length, numberOfDefaultRules);\n\t\t}\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ColorThemeData } from '../../common/colorThemeData.js';\nimport assert from 'assert';\nimport { ITokenColorCustomizations } from '../../common/workbenchThemeService.js';\nimport { TokenStyle, getTokenClassificationRegistry } from '../../../../../platform/theme/common/tokenClassificationRegistry.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { isString } from '../../../../../base/common/types.js';\nimport { FileService } from '../../../../../platform/files/common/fileService.js';\nimport { NullLogService } from '../../../../../platform/log/common/log.js';\nimport { DiskFileSystemProvider } from '../../../../../platform/files/node/diskFileSystemProvider.js';\nimport { FileAccess, Schemas } from '../../../../../base/common/network.js';\nimport { ExtensionResourceLoaderService } from '../../../../../platform/extensionResourceLoader/common/extensionResourceLoaderService.js';\nimport { ITokenStyle } from '../../../../../platform/theme/common/themeService.js';\nimport { mock, TestProductService } from '../../../../test/common/workbenchTestServices.js';\nimport { IRequestService } from '../../../../../platform/request/common/request.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { IEnvironmentService } from '../../../../../platform/environment/common/environment.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ExtensionGalleryManifestService } from '../../../../../platform/extensionManagement/common/extensionGalleryManifestService.js';\n\nconst undefinedStyle = { bold: undefined, underline: undefined, italic: undefined };\nconst unsetStyle = { bold: false, underline: false, italic: false };\n\nfunction ts(foreground: string | undefined, styleFlags: { bold?: boolean; underline?: boolean; strikethrough?: boolean; italic?: boolean } | undefined): TokenStyle {\n\tconst foregroundColor = isString(foreground) ? Color.fromHex(foreground) : undefined;\n\treturn new TokenStyle(foregroundColor, styleFlags?.bold, styleFlags?.underline, styleFlags?.strikethrough, styleFlags?.italic);\n}\n\nfunction tokenStyleAsString(ts: TokenStyle | undefined | null) {\n\tif (!ts) {\n\t\treturn 'tokenstyle-undefined';\n\t}\n\tlet str = ts.foreground ? ts.foreground.toString() : 'no-foreground';\n\tif (ts.bold !== undefined) {\n\t\tstr += ts.bold ? '+B' : '-B';\n\t}\n\tif (ts.underline !== undefined) {\n\t\tstr += ts.underline ? '+U' : '-U';\n\t}\n\tif (ts.italic !== undefined) {\n\t\tstr += ts.italic ? '+I' : '-I';\n\t}\n\treturn str;\n}\n\nfunction assertTokenStyle(actual: TokenStyle | undefined | null, expected: TokenStyle | undefined | null, message?: string) {\n\tassert.strictEqual(tokenStyleAsString(actual), tokenStyleAsString(expected), message);\n}\n\nfunction assertTokenStyleMetaData(colorIndex: string[], actual: ITokenStyle | undefined, expected: TokenStyle | undefined | null, message = '') {\n\tif (expected === undefined || expected === null || actual === undefined) {\n\t\tassert.strictEqual(actual, expected, message);\n\t\treturn;\n\t}\n\tassert.strictEqual(actual.bold, expected.bold, 'bold ' + message);\n\tassert.strictEqual(actual.italic, expected.italic, 'italic ' + message);\n\tassert.strictEqual(actual.underline, expected.underline, 'underline ' + message);\n\n\tconst actualForegroundIndex = actual.foreground;\n\tif (actualForegroundIndex && expected.foreground) {\n\t\tassert.strictEqual(colorIndex[actualForegroundIndex], Color.Format.CSS.formatHexA(expected.foreground, true).toUpperCase(), 'foreground ' + message);\n\t} else {\n\t\tassert.strictEqual(actualForegroundIndex, expected.foreground || 0, 'foreground ' + message);\n\t}\n}\n\n\nfunction assertTokenStyles(themeData: ColorThemeData, expected: { [qualifiedClassifier: string]: TokenStyle }, language = 'typescript') {\n\tconst colorIndex = themeData.tokenColorMap;\n\n\tfor (const qualifiedClassifier in expected) {\n\t\tconst [type, ...modifiers] = qualifiedClassifier.split('.');\n\n\t\tconst expectedTokenStyle = expected[qualifiedClassifier];\n\n\t\tconst tokenStyleMetaData = themeData.getTokenStyleMetadata(type, modifiers, language);\n\t\tassertTokenStyleMetaData(colorIndex, tokenStyleMetaData, expectedTokenStyle, qualifiedClassifier);\n\t}\n}\n\nsuite('Themes - TokenStyleResolving', () => {\n\tconst fileService = new FileService(new NullLogService());\n\tconst requestService = new (mock<IRequestService>())();\n\tconst storageService = new (mock<IStorageService>())();\n\tconst environmentService = new (mock<IEnvironmentService>())();\n\tconst configurationService = new (mock<IConfigurationService>())();\n\n\tconst extensionResourceLoaderService = new ExtensionResourceLoaderService(fileService, storageService, TestProductService, environmentService, configurationService, new ExtensionGalleryManifestService(TestProductService), requestService, new NullLogService());\n\n\tconst diskFileSystemProvider = new DiskFileSystemProvider(new NullLogService());\n\tfileService.registerProvider(Schemas.file, diskFileSystemProvider);\n\n\tteardown(() => {\n\t\tdiskFileSystemProvider.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('color defaults', async () => {\n\t\tconst themeData = ColorThemeData.createUnloadedTheme('foo');\n\t\tthemeData.location = FileAccess.asFileUri('vs/workbench/services/themes/test/node/color-theme.json');\n\t\tawait themeData.ensureLoaded(extensionResourceLoaderService);\n\n\t\tassert.strictEqual(themeData.isLoaded, true);\n\n\t\tassertTokenStyles(themeData, {\n\t\t\t'comment': ts('#000000', undefinedStyle),\n\t\t\t'variable': ts('#111111', unsetStyle),\n\t\t\t'type': ts('#333333', { bold: false, underline: true, italic: false }),\n\t\t\t'function': ts('#333333', unsetStyle),\n\t\t\t'string': ts('#444444', undefinedStyle),\n\t\t\t'number': ts('#555555', undefinedStyle),\n\t\t\t'keyword': ts('#666666', undefinedStyle)\n\t\t});\n\t});\n\n\ttest('resolveScopes', async () => {\n\t\tconst themeData = ColorThemeData.createLoadedEmptyTheme('test', 'test');\n\n\t\tconst customTokenColors: ITokenColorCustomizations = {\n\t\t\ttextMateRules: [\n\t\t\t\t{\n\t\t\t\t\tscope: 'variable',\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tfontStyle: '',\n\t\t\t\t\t\tforeground: '#F8F8F2'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tscope: 'keyword.operator',\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tfontStyle: 'italic bold underline',\n\t\t\t\t\t\tforeground: '#F92672'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tscope: 'storage',\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tfontStyle: 'italic',\n\t\t\t\t\t\tforeground: '#F92672'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tscope: ['storage.type', 'meta.structure.dictionary.json string.quoted.double.json'],\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tforeground: '#66D9EF'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tscope: 'entity.name.type, entity.name.class, entity.name.namespace, entity.name.scope-resolution',\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tfontStyle: 'underline',\n\t\t\t\t\t\tforeground: '#A6E22E'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t]\n\t\t};\n\n\t\tthemeData.setCustomTokenColors(customTokenColors);\n\n\t\tlet tokenStyle;\n\t\tconst defaultTokenStyle = undefined;\n\n\t\ttokenStyle = themeData.resolveScopes([['variable']]);\n\t\tassertTokenStyle(tokenStyle, ts('#F8F8F2', unsetStyle), 'variable');\n\n\t\ttokenStyle = themeData.resolveScopes([['keyword.operator']]);\n\t\tassertTokenStyle(tokenStyle, ts('#F92672', { italic: true, bold: true, underline: true }), 'keyword');\n\n\t\ttokenStyle = themeData.resolveScopes([['keyword']]);\n\t\tassertTokenStyle(tokenStyle, defaultTokenStyle, 'keyword');\n\n\t\ttokenStyle = themeData.resolveScopes([['keyword.operator']]);\n\t\tassertTokenStyle(tokenStyle, ts('#F92672', { italic: true, bold: true, underline: true }), 'keyword.operator');\n\n\t\ttokenStyle = themeData.resolveScopes([['keyword.operators']]);\n\t\tassertTokenStyle(tokenStyle, defaultTokenStyle, 'keyword.operators');\n\n\t\ttokenStyle = themeData.resolveScopes([['storage']]);\n\t\tassertTokenStyle(tokenStyle, ts('#F92672', { italic: true, bold: false, underline: false }), 'storage');\n\n\t\ttokenStyle = themeData.resolveScopes([['storage.type']]);\n\t\tassertTokenStyle(tokenStyle, ts('#66D9EF', { italic: true, bold: false, underline: false }), 'storage.type');\n\n\t\ttokenStyle = themeData.resolveScopes([['entity.name.class']]);\n\t\tassertTokenStyle(tokenStyle, ts('#A6E22E', { italic: false, bold: false, underline: true }), 'entity.name.class');\n\n\t\ttokenStyle = themeData.resolveScopes([['meta.structure.dictionary.json', 'string.quoted.double.json']]);\n\t\tassertTokenStyle(tokenStyle, ts('#66D9EF', undefined), 'json property');\n\n\t\ttokenStyle = themeData.resolveScopes([['source.json', 'meta.structure.dictionary.json', 'string.quoted.double.json']]);\n\t\tassertTokenStyle(tokenStyle, ts('#66D9EF', undefined), 'json property');\n\n\t\ttokenStyle = themeData.resolveScopes([['keyword'], ['storage.type'], ['entity.name.class']]);\n\t\tassertTokenStyle(tokenStyle, ts('#66D9EF', { italic: true, bold: false, underline: false }), 'storage.type');\n\n\t});\n\n\n\ttest('resolveScopes - match most specific', async () => {\n\t\tconst themeData = ColorThemeData.createLoadedEmptyTheme('test', 'test');\n\n\t\tconst customTokenColors: ITokenColorCustomizations = {\n\t\t\ttextMateRules: [\n\t\t\t\t{\n\t\t\t\t\tscope: 'entity.name.type',\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tfontStyle: 'underline',\n\t\t\t\t\t\tforeground: '#A6E22E'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tscope: 'entity.name.type.class',\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tforeground: '#FF00FF'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tscope: 'entity.name',\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tforeground: '#FFFFFF'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t]\n\t\t};\n\n\t\tthemeData.setCustomTokenColors(customTokenColors);\n\n\t\tconst tokenStyle = themeData.resolveScopes([['entity.name.type.class']]);\n\t\tassertTokenStyle(tokenStyle, ts('#FF00FF', { italic: false, bold: false, underline: true }), 'entity.name.type.class');\n\n\t});\n\n\n\ttest('rule matching', async () => {\n\t\tconst themeData = ColorThemeData.createLoadedEmptyTheme('test', 'test');\n\t\tthemeData.setCustomColors({ 'editor.foreground': '#000000' });\n\t\tthemeData.setCustomSemanticTokenColors({\n\t\t\tenabled: true,\n\t\t\trules: {\n\t\t\t\t'type': '#ff0000',\n\t\t\t\t'class': { foreground: '#0000ff', italic: true },\n\t\t\t\t'*.static': { bold: true },\n\t\t\t\t'*.declaration': { italic: true },\n\t\t\t\t'*.async.static': { italic: true, underline: true },\n\t\t\t\t'*.async': { foreground: '#000fff', underline: true }\n\t\t\t}\n\t\t});\n\n\t\tassertTokenStyles(themeData, {\n\t\t\t'type': ts('#ff0000', undefinedStyle),\n\t\t\t'type.static': ts('#ff0000', { bold: true }),\n\t\t\t'type.static.declaration': ts('#ff0000', { bold: true, italic: true }),\n\t\t\t'class': ts('#0000ff', { italic: true }),\n\t\t\t'class.static.declaration': ts('#0000ff', { bold: true, italic: true, }),\n\t\t\t'class.declaration': ts('#0000ff', { italic: true }),\n\t\t\t'class.declaration.async': ts('#000fff', { underline: true, italic: true }),\n\t\t\t'class.declaration.async.static': ts('#000fff', { italic: true, underline: true, bold: true }),\n\t\t});\n\n\t});\n\n\ttest('super type', async () => {\n\t\tconst registry = getTokenClassificationRegistry();\n\n\t\tregistry.registerTokenType('myTestInterface', 'A type just for testing', 'interface');\n\t\tregistry.registerTokenType('myTestSubInterface', 'A type just for testing', 'myTestInterface');\n\n\t\ttry {\n\t\t\tconst themeData = ColorThemeData.createLoadedEmptyTheme('test', 'test');\n\t\t\tthemeData.setCustomColors({ 'editor.foreground': '#000000' });\n\t\t\tthemeData.setCustomSemanticTokenColors({\n\t\t\t\tenabled: true,\n\t\t\t\trules: {\n\t\t\t\t\t'interface': '#ff0000',\n\t\t\t\t\t'myTestInterface': { italic: true },\n\t\t\t\t\t'interface.static': { bold: true }\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tassertTokenStyles(themeData, { 'myTestSubInterface': ts('#ff0000', { italic: true }) });\n\t\t\tassertTokenStyles(themeData, { 'myTestSubInterface.static': ts('#ff0000', { italic: true, bold: true }) });\n\n\t\t\tthemeData.setCustomSemanticTokenColors({\n\t\t\t\tenabled: true,\n\t\t\t\trules: {\n\t\t\t\t\t'interface': '#ff0000',\n\t\t\t\t\t'myTestInterface': { foreground: '#ff00ff', italic: true }\n\t\t\t\t}\n\t\t\t});\n\t\t\tassertTokenStyles(themeData, { 'myTestSubInterface': ts('#ff00ff', { italic: true }) });\n\t\t} finally {\n\t\t\tregistry.deregisterTokenType('myTestInterface');\n\t\t\tregistry.deregisterTokenType('myTestSubInterface');\n\t\t}\n\t});\n\n\ttest('language', async () => {\n\t\ttry {\n\t\t\tconst themeData = ColorThemeData.createLoadedEmptyTheme('test', 'test');\n\t\t\tthemeData.setCustomColors({ 'editor.foreground': '#000000' });\n\t\t\tthemeData.setCustomSemanticTokenColors({\n\t\t\t\tenabled: true,\n\t\t\t\trules: {\n\t\t\t\t\t'interface': '#fff000',\n\t\t\t\t\t'interface:java': '#ff0000',\n\t\t\t\t\t'interface.static': { bold: true },\n\t\t\t\t\t'interface.static:typescript': { italic: true }\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tassertTokenStyles(themeData, { 'interface': ts('#ff0000', undefined) }, 'java');\n\t\t\tassertTokenStyles(themeData, { 'interface': ts('#fff000', undefined) }, 'typescript');\n\t\t\tassertTokenStyles(themeData, { 'interface.static': ts('#ff0000', { bold: true }) }, 'java');\n\t\t\tassertTokenStyles(themeData, { 'interface.static': ts('#fff000', { bold: true, italic: true }) }, 'typescript');\n\t\t} finally {\n\t\t}\n\t});\n\n\ttest('language - scope resolving', async () => {\n\t\tconst registry = getTokenClassificationRegistry();\n\n\t\tconst numberOfDefaultRules = registry.getTokenStylingDefaultRules().length;\n\n\t\tregistry.registerTokenStyleDefault(registry.parseTokenSelector('type', 'typescript1'), { scopesToProbe: [['entity.name.type.ts1']] });\n\t\tregistry.registerTokenStyleDefault(registry.parseTokenSelector('type:javascript1'), { scopesToProbe: [['entity.name.type.js1']] });\n\n\t\ttry {\n\t\t\tconst themeData = ColorThemeData.createLoadedEmptyTheme('test', 'test');\n\t\t\tthemeData.setCustomColors({ 'editor.foreground': '#000000' });\n\t\t\tthemeData.setCustomTokenColors({\n\t\t\t\ttextMateRules: [\n\t\t\t\t\t{\n\t\t\t\t\t\tscope: 'entity.name.type',\n\t\t\t\t\t\tsettings: { foreground: '#aa0000' }\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tscope: 'entity.name.type.ts1',\n\t\t\t\t\t\tsettings: { foreground: '#bb0000' }\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tassertTokenStyles(themeData, { 'type': ts('#aa0000', undefined) }, 'javascript1');\n\t\t\tassertTokenStyles(themeData, { 'type': ts('#bb0000', undefined) }, 'typescript1');\n\n\t\t} finally {\n\t\t\tregistry.deregisterTokenStyleDefault(registry.parseTokenSelector('type', 'typescript1'));\n\t\t\tregistry.deregisterTokenStyleDefault(registry.parseTokenSelector('type:javascript1'));\n\n\t\t\tassert.strictEqual(registry.getTokenStylingDefaultRules().length, numberOfDefaultRules);\n\t\t}\n\t});\n});\n"]}