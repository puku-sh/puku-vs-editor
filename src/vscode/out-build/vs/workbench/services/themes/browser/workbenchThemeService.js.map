{"version":3,"sources":["vs/workbench/services/themes/browser/workbenchThemeService.ts"],"names":[],"mappings":"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","file":"workbenchThemeService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport * as types from '../../../../base/common/types.js';\nimport { IExtensionService } from '../../extensions/common/extensions.js';\nimport { IWorkbenchThemeService, IWorkbenchColorTheme, IWorkbenchFileIconTheme, ExtensionData, ThemeSettings, IWorkbenchProductIconTheme, ThemeSettingTarget, ThemeSettingDefaults, COLOR_THEME_DARK_INITIAL_COLORS, COLOR_THEME_LIGHT_INITIAL_COLORS } from '../common/workbenchThemeService.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport * as errors from '../../../../base/common/errors.js';\nimport { IConfigurationService, ConfigurationTarget } from '../../../../platform/configuration/common/configuration.js';\nimport { ColorThemeData } from '../common/colorThemeData.js';\nimport { IColorTheme, Extensions as ThemingExtensions, IThemingRegistry } from '../../../../platform/theme/common/themeService.js';\nimport { Event, Emitter } from '../../../../base/common/event.js';\nimport { registerFileIconThemeSchemas } from '../common/fileIconThemeSchema.js';\nimport { IDisposable, Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { FileIconThemeData, FileIconThemeLoader } from './fileIconThemeData.js';\nimport { createStyleSheet } from '../../../../base/browser/domStylesheets.js';\nimport { IBrowserWorkbenchEnvironmentService } from '../../environment/browser/environmentService.js';\nimport { IFileService, FileChangeType } from '../../../../platform/files/common/files.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport * as resources from '../../../../base/common/resources.js';\nimport { registerColorThemeSchemas } from '../common/colorThemeSchema.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { getRemoteAuthority } from '../../../../platform/remote/common/remoteHosts.js';\nimport { IWorkbenchLayoutService } from '../../layout/browser/layoutService.js';\nimport { IExtensionResourceLoaderService } from '../../../../platform/extensionResourceLoader/common/extensionResourceLoader.js';\nimport { ThemeRegistry, registerColorThemeExtensionPoint, registerFileIconThemeExtensionPoint, registerProductIconThemeExtensionPoint } from '../common/themeExtensionPoints.js';\nimport { updateColorThemeConfigurationSchemas, updateFileIconThemeConfigurationSchemas, ThemeConfiguration, updateProductIconThemeConfigurationSchemas } from '../common/themeConfiguration.js';\nimport { ProductIconThemeData, DEFAULT_PRODUCT_ICON_THEME_ID } from './productIconThemeData.js';\nimport { registerProductIconThemeSchemas } from '../common/productIconThemeSchema.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { isWeb } from '../../../../base/common/platform.js';\nimport { ColorScheme, ThemeTypeSelector } from '../../../../platform/theme/common/theme.js';\nimport { IHostColorSchemeService } from '../common/hostColorSchemeService.js';\nimport { RunOnceScheduler, Sequencer } from '../../../../base/common/async.js';\nimport { IUserDataInitializationService } from '../../userData/browser/userDataInit.js';\nimport { getIconsStyleSheet } from '../../../../platform/theme/browser/iconsStyleSheet.js';\nimport { asCssVariableName, getColorRegistry } from '../../../../platform/theme/common/colorRegistry.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\n\n// implementation\n\nconst defaultThemeExtensionId = 'vscode-theme-defaults';\n\nconst DEFAULT_FILE_ICON_THEME_ID = 'vscode.vscode-theme-seti-vs-seti';\nconst fileIconsEnabledClass = 'file-icons-enabled';\n\nconst colorThemeRulesClassName = 'contributedColorTheme';\nconst fileIconThemeRulesClassName = 'contributedFileIconTheme';\nconst productIconThemeRulesClassName = 'contributedProductIconTheme';\n\nconst themingRegistry = Registry.as<IThemingRegistry>(ThemingExtensions.ThemingContribution);\n\nfunction validateThemeId(theme: string): string {\n\t// migrations\n\tswitch (theme) {\n\t\tcase ThemeTypeSelector.VS: return `vs ${defaultThemeExtensionId}-themes-light_vs-json`;\n\t\tcase ThemeTypeSelector.VS_DARK: return `vs-dark ${defaultThemeExtensionId}-themes-dark_vs-json`;\n\t\tcase ThemeTypeSelector.HC_BLACK: return `hc-black ${defaultThemeExtensionId}-themes-hc_black-json`;\n\t\tcase ThemeTypeSelector.HC_LIGHT: return `hc-light ${defaultThemeExtensionId}-themes-hc_light-json`;\n\t}\n\treturn theme;\n}\n\nconst colorThemesExtPoint = registerColorThemeExtensionPoint();\nconst fileIconThemesExtPoint = registerFileIconThemeExtensionPoint();\nconst productIconThemesExtPoint = registerProductIconThemeExtensionPoint();\n\nexport class WorkbenchThemeService extends Disposable implements IWorkbenchThemeService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly container: HTMLElement;\n\tprivate settings: ThemeConfiguration;\n\n\tprivate readonly colorThemeRegistry: ThemeRegistry<ColorThemeData>;\n\tprivate currentColorTheme: ColorThemeData;\n\tprivate readonly onColorThemeChange: Emitter<IWorkbenchColorTheme>;\n\tprivate readonly colorThemeWatcher: ThemeFileWatcher;\n\tprivate colorThemingParticipantChangeListener: IDisposable | undefined;\n\tprivate readonly colorThemeSequencer: Sequencer;\n\n\tprivate readonly fileIconThemeRegistry: ThemeRegistry<FileIconThemeData>;\n\tprivate currentFileIconTheme: FileIconThemeData;\n\tprivate readonly onFileIconThemeChange: Emitter<IWorkbenchFileIconTheme>;\n\tprivate readonly fileIconThemeLoader: FileIconThemeLoader;\n\tprivate readonly fileIconThemeWatcher: ThemeFileWatcher;\n\tprivate readonly fileIconThemeSequencer: Sequencer;\n\n\tprivate readonly productIconThemeRegistry: ThemeRegistry<ProductIconThemeData>;\n\tprivate currentProductIconTheme: ProductIconThemeData;\n\tprivate readonly onProductIconThemeChange: Emitter<IWorkbenchProductIconTheme>;\n\tprivate readonly productIconThemeWatcher: ThemeFileWatcher;\n\tprivate readonly productIconThemeSequencer: Sequencer;\n\n\tconstructor(\n\t\t@IExtensionService extensionService: IExtensionService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@IBrowserWorkbenchEnvironmentService private readonly environmentService: IBrowserWorkbenchEnvironmentService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IExtensionResourceLoaderService private readonly extensionResourceLoaderService: IExtensionResourceLoaderService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IHostColorSchemeService private readonly hostColorService: IHostColorSchemeService,\n\t\t@IUserDataInitializationService private readonly userDataInitializationService: IUserDataInitializationService,\n\t\t@ILanguageService private readonly languageService: ILanguageService\n\t) {\n\t\tsuper();\n\t\tthis.container = layoutService.mainContainer;\n\t\tthis.settings = new ThemeConfiguration(configurationService, hostColorService);\n\n\t\tthis.colorThemeRegistry = this._register(new ThemeRegistry(colorThemesExtPoint, ColorThemeData.fromExtensionTheme));\n\t\tthis.colorThemeWatcher = this._register(new ThemeFileWatcher(fileService, environmentService, this.reloadCurrentColorTheme.bind(this)));\n\t\tthis.onColorThemeChange = new Emitter<IWorkbenchColorTheme>({ leakWarningThreshold: 400 });\n\t\tthis.currentColorTheme = ColorThemeData.createUnloadedTheme('');\n\t\tthis.colorThemeSequencer = new Sequencer();\n\n\t\tthis.fileIconThemeWatcher = this._register(new ThemeFileWatcher(fileService, environmentService, this.reloadCurrentFileIconTheme.bind(this)));\n\t\tthis.fileIconThemeRegistry = this._register(new ThemeRegistry(fileIconThemesExtPoint, FileIconThemeData.fromExtensionTheme, true, FileIconThemeData.noIconTheme));\n\t\tthis.fileIconThemeLoader = new FileIconThemeLoader(extensionResourceLoaderService, languageService);\n\t\tthis.onFileIconThemeChange = new Emitter<IWorkbenchFileIconTheme>({ leakWarningThreshold: 400 });\n\t\tthis.currentFileIconTheme = FileIconThemeData.createUnloadedTheme('');\n\t\tthis.fileIconThemeSequencer = new Sequencer();\n\n\t\tthis.productIconThemeWatcher = this._register(new ThemeFileWatcher(fileService, environmentService, this.reloadCurrentProductIconTheme.bind(this)));\n\t\tthis.productIconThemeRegistry = this._register(new ThemeRegistry(productIconThemesExtPoint, ProductIconThemeData.fromExtensionTheme, true, ProductIconThemeData.defaultTheme));\n\t\tthis.onProductIconThemeChange = new Emitter<IWorkbenchProductIconTheme>();\n\t\tthis.currentProductIconTheme = ProductIconThemeData.createUnloadedTheme('');\n\t\tthis.productIconThemeSequencer = new Sequencer();\n\n\t\tthis._register(this.onDidColorThemeChange(theme => getColorRegistry().notifyThemeUpdate(theme)));\n\n\t\t// In order to avoid paint flashing for tokens, because\n\t\t// themes are loaded asynchronously, we need to initialize\n\t\t// a color theme document with good defaults until the theme is loaded\n\t\tlet themeData: ColorThemeData | undefined = ColorThemeData.fromStorageData(this.storageService);\n\t\tconst colorThemeSetting = this.settings.colorTheme;\n\t\tif (themeData && colorThemeSetting !== themeData.settingsId) {\n\t\t\tthemeData = undefined;\n\t\t}\n\n\t\tconst defaultColorMap = colorThemeSetting === ThemeSettingDefaults.COLOR_THEME_LIGHT ? COLOR_THEME_LIGHT_INITIAL_COLORS : colorThemeSetting === ThemeSettingDefaults.COLOR_THEME_DARK ? COLOR_THEME_DARK_INITIAL_COLORS : undefined;\n\t\tif (!themeData) {\n\t\t\tconst initialColorTheme = environmentService.options?.initialColorTheme;\n\t\t\tif (initialColorTheme) {\n\t\t\t\tthemeData = ColorThemeData.createUnloadedThemeForThemeType(initialColorTheme.themeType, initialColorTheme.colors ?? defaultColorMap);\n\t\t\t}\n\t\t}\n\t\tif (!themeData) {\n\t\t\tconst colorScheme = this.settings.getPreferredColorScheme() ?? (isWeb ? ColorScheme.LIGHT : ColorScheme.DARK);\n\t\t\tthemeData = ColorThemeData.createUnloadedThemeForThemeType(colorScheme, defaultColorMap);\n\t\t}\n\t\tthemeData.setCustomizations(this.settings);\n\t\tthis.applyTheme(themeData, undefined, true);\n\n\t\tconst fileIconData = FileIconThemeData.fromStorageData(this.storageService);\n\t\tif (fileIconData) {\n\t\t\tthis.applyAndSetFileIconTheme(fileIconData, true);\n\t\t}\n\n\t\tconst productIconData = ProductIconThemeData.fromStorageData(this.storageService);\n\t\tif (productIconData) {\n\t\t\tthis.applyAndSetProductIconTheme(productIconData, true);\n\t\t}\n\n\t\textensionService.whenInstalledExtensionsRegistered().then(_ => {\n\t\t\tthis.installConfigurationListener();\n\t\t\tthis.installPreferredSchemeListener();\n\t\t\tthis.installRegistryListeners();\n\t\t\tthis.initialize().catch(errors.onUnexpectedError);\n\t\t});\n\n\t\tconst codiconStyleSheet = createStyleSheet();\n\t\tcodiconStyleSheet.id = 'codiconStyles';\n\n\t\tconst iconsStyleSheet = this._register(getIconsStyleSheet(this));\n\t\tfunction updateAll() {\n\t\t\tcodiconStyleSheet.textContent = iconsStyleSheet.getCSS();\n\t\t}\n\n\t\tconst delayer = this._register(new RunOnceScheduler(updateAll, 0));\n\t\tthis._register(iconsStyleSheet.onDidChange(() => delayer.schedule()));\n\t\tdelayer.schedule();\n\t}\n\n\tprivate initialize(): Promise<[IWorkbenchColorTheme | null, IWorkbenchFileIconTheme | null, IWorkbenchProductIconTheme | null]> {\n\t\tconst extDevLocs = this.environmentService.extensionDevelopmentLocationURI;\n\t\tconst extDevLoc = extDevLocs && extDevLocs.length === 1 ? extDevLocs[0] : undefined; // in dev mode, switch to a theme provided by the extension under dev.\n\n\t\tconst initializeColorTheme = async () => {\n\t\t\tconst devThemes = this.colorThemeRegistry.findThemeByExtensionLocation(extDevLoc);\n\t\t\tif (devThemes.length) {\n\t\t\t\tconst matchedColorTheme = devThemes.find(theme => theme.type === this.currentColorTheme.type);\n\t\t\t\treturn this.setColorTheme(matchedColorTheme ? matchedColorTheme.id : devThemes[0].id, undefined);\n\t\t\t}\n\t\t\tlet theme = this.colorThemeRegistry.findThemeBySettingsId(this.settings.colorTheme, undefined);\n\t\t\tif (!theme) {\n\t\t\t\t// If the current theme is not available, first make sure setting sync is complete\n\t\t\t\tawait this.userDataInitializationService.whenInitializationFinished();\n\t\t\t\t// try to get the theme again, now with a fallback to the default themes\n\t\t\t\tconst fallbackTheme = this.currentColorTheme.type === ColorScheme.LIGHT ? ThemeSettingDefaults.COLOR_THEME_LIGHT : ThemeSettingDefaults.COLOR_THEME_DARK;\n\t\t\t\ttheme = this.colorThemeRegistry.findThemeBySettingsId(this.settings.colorTheme, fallbackTheme);\n\t\t\t}\n\t\t\treturn this.setColorTheme(theme && theme.id, undefined);\n\t\t};\n\n\t\tconst initializeFileIconTheme = async () => {\n\t\t\tconst devThemes = this.fileIconThemeRegistry.findThemeByExtensionLocation(extDevLoc);\n\t\t\tif (devThemes.length) {\n\t\t\t\treturn this.setFileIconTheme(devThemes[0].id, ConfigurationTarget.MEMORY);\n\t\t\t}\n\t\t\tlet theme = this.fileIconThemeRegistry.findThemeBySettingsId(this.settings.fileIconTheme);\n\t\t\tif (!theme) {\n\t\t\t\t// If the current theme is not available, first make sure setting sync is complete\n\t\t\t\tawait this.userDataInitializationService.whenInitializationFinished();\n\t\t\t\ttheme = this.fileIconThemeRegistry.findThemeBySettingsId(this.settings.fileIconTheme);\n\t\t\t}\n\t\t\treturn this.setFileIconTheme(theme ? theme.id : DEFAULT_FILE_ICON_THEME_ID, undefined);\n\t\t};\n\n\t\tconst initializeProductIconTheme = async () => {\n\t\t\tconst devThemes = this.productIconThemeRegistry.findThemeByExtensionLocation(extDevLoc);\n\t\t\tif (devThemes.length) {\n\t\t\t\treturn this.setProductIconTheme(devThemes[0].id, ConfigurationTarget.MEMORY);\n\t\t\t}\n\t\t\tlet theme = this.productIconThemeRegistry.findThemeBySettingsId(this.settings.productIconTheme);\n\t\t\tif (!theme) {\n\t\t\t\t// If the current theme is not available, first make sure setting sync is complete\n\t\t\t\tawait this.userDataInitializationService.whenInitializationFinished();\n\t\t\t\ttheme = this.productIconThemeRegistry.findThemeBySettingsId(this.settings.productIconTheme);\n\t\t\t}\n\t\t\treturn this.setProductIconTheme(theme ? theme.id : DEFAULT_PRODUCT_ICON_THEME_ID, undefined);\n\t\t};\n\n\n\t\treturn Promise.all([initializeColorTheme(), initializeFileIconTheme(), initializeProductIconTheme()]);\n\t}\n\n\tprivate installConfigurationListener() {\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(ThemeSettings.COLOR_THEME)\n\t\t\t\t|| e.affectsConfiguration(ThemeSettings.PREFERRED_DARK_THEME)\n\t\t\t\t|| e.affectsConfiguration(ThemeSettings.PREFERRED_LIGHT_THEME)\n\t\t\t\t|| e.affectsConfiguration(ThemeSettings.PREFERRED_HC_DARK_THEME)\n\t\t\t\t|| e.affectsConfiguration(ThemeSettings.PREFERRED_HC_LIGHT_THEME)\n\t\t\t\t|| e.affectsConfiguration(ThemeSettings.DETECT_COLOR_SCHEME)\n\t\t\t\t|| e.affectsConfiguration(ThemeSettings.DETECT_HC)\n\t\t\t\t|| e.affectsConfiguration(ThemeSettings.SYSTEM_COLOR_THEME)\n\t\t\t) {\n\t\t\t\tthis.restoreColorTheme();\n\t\t\t}\n\t\t\tif (e.affectsConfiguration(ThemeSettings.FILE_ICON_THEME)) {\n\t\t\t\tthis.restoreFileIconTheme();\n\t\t\t}\n\t\t\tif (e.affectsConfiguration(ThemeSettings.PRODUCT_ICON_THEME)) {\n\t\t\t\tthis.restoreProductIconTheme();\n\t\t\t}\n\t\t\tif (this.currentColorTheme) {\n\t\t\t\tlet hasColorChanges = false;\n\t\t\t\tif (e.affectsConfiguration(ThemeSettings.COLOR_CUSTOMIZATIONS)) {\n\t\t\t\t\tthis.currentColorTheme.setCustomColors(this.settings.colorCustomizations);\n\t\t\t\t\thasColorChanges = true;\n\t\t\t\t}\n\t\t\t\tif (e.affectsConfiguration(ThemeSettings.TOKEN_COLOR_CUSTOMIZATIONS)) {\n\t\t\t\t\tthis.currentColorTheme.setCustomTokenColors(this.settings.tokenColorCustomizations);\n\t\t\t\t\thasColorChanges = true;\n\t\t\t\t}\n\t\t\t\tif (e.affectsConfiguration(ThemeSettings.SEMANTIC_TOKEN_COLOR_CUSTOMIZATIONS)) {\n\t\t\t\t\tthis.currentColorTheme.setCustomSemanticTokenColors(this.settings.semanticTokenColorCustomizations);\n\t\t\t\t\thasColorChanges = true;\n\t\t\t\t}\n\t\t\t\tif (hasColorChanges) {\n\t\t\t\t\tthis.updateDynamicCSSRules(this.currentColorTheme);\n\t\t\t\t\tthis.onColorThemeChange.fire(this.currentColorTheme);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate installRegistryListeners(): Promise<void> {\n\n\t\tlet prevColorId: string | undefined = undefined;\n\n\t\t// update settings schema setting for theme specific settings\n\t\tthis._register(this.colorThemeRegistry.onDidChange(async event => {\n\t\t\tupdateColorThemeConfigurationSchemas(event.themes);\n\t\t\tif (await this.restoreColorTheme()) { // checks if theme from settings exists and is set\n\t\t\t\t// restore theme\n\t\t\t\tif (this.currentColorTheme.settingsId === ThemeSettingDefaults.COLOR_THEME_DARK && !types.isUndefined(prevColorId) && await this.colorThemeRegistry.findThemeById(prevColorId)) {\n\t\t\t\t\tawait this.setColorTheme(prevColorId, 'auto');\n\t\t\t\t\tprevColorId = undefined;\n\t\t\t\t} else if (event.added.some(t => t.settingsId === this.currentColorTheme.settingsId)) {\n\t\t\t\t\tawait this.reloadCurrentColorTheme();\n\t\t\t\t}\n\t\t\t} else if (event.removed.some(t => t.settingsId === this.currentColorTheme.settingsId)) {\n\t\t\t\t// current theme is no longer available\n\t\t\t\tprevColorId = this.currentColorTheme.id;\n\t\t\t\tconst defaultTheme = this.colorThemeRegistry.findThemeBySettingsId(ThemeSettingDefaults.COLOR_THEME_DARK);\n\t\t\t\tawait this.setColorTheme(defaultTheme, 'auto');\n\t\t\t}\n\t\t}));\n\n\t\tlet prevFileIconId: string | undefined = undefined;\n\t\tthis._register(this._register(this.fileIconThemeRegistry.onDidChange(async event => {\n\t\t\tupdateFileIconThemeConfigurationSchemas(event.themes);\n\t\t\tif (await this.restoreFileIconTheme()) { // checks if theme from settings exists and is set\n\t\t\t\t// restore theme\n\t\t\t\tif (this.currentFileIconTheme.id === DEFAULT_FILE_ICON_THEME_ID && !types.isUndefined(prevFileIconId) && this.fileIconThemeRegistry.findThemeById(prevFileIconId)) {\n\t\t\t\t\tawait this.setFileIconTheme(prevFileIconId, 'auto');\n\t\t\t\t\tprevFileIconId = undefined;\n\t\t\t\t} else if (event.added.some(t => t.settingsId === this.currentFileIconTheme.settingsId)) {\n\t\t\t\t\tawait this.reloadCurrentFileIconTheme();\n\t\t\t\t}\n\t\t\t} else if (event.removed.some(t => t.settingsId === this.currentFileIconTheme.settingsId)) {\n\t\t\t\t// current theme is no longer available\n\t\t\t\tprevFileIconId = this.currentFileIconTheme.id;\n\t\t\t\tawait this.setFileIconTheme(DEFAULT_FILE_ICON_THEME_ID, 'auto');\n\t\t\t}\n\n\t\t})));\n\n\t\tlet prevProductIconId: string | undefined = undefined;\n\t\tthis._register(this.productIconThemeRegistry.onDidChange(async event => {\n\t\t\tupdateProductIconThemeConfigurationSchemas(event.themes);\n\t\t\tif (await this.restoreProductIconTheme()) { // checks if theme from settings exists and is set\n\t\t\t\t// restore theme\n\t\t\t\tif (this.currentProductIconTheme.id === DEFAULT_PRODUCT_ICON_THEME_ID && !types.isUndefined(prevProductIconId) && this.productIconThemeRegistry.findThemeById(prevProductIconId)) {\n\t\t\t\t\tawait this.setProductIconTheme(prevProductIconId, 'auto');\n\t\t\t\t\tprevProductIconId = undefined;\n\t\t\t\t} else if (event.added.some(t => t.settingsId === this.currentProductIconTheme.settingsId)) {\n\t\t\t\t\tawait this.reloadCurrentProductIconTheme();\n\t\t\t\t}\n\t\t\t} else if (event.removed.some(t => t.settingsId === this.currentProductIconTheme.settingsId)) {\n\t\t\t\t// current theme is no longer available\n\t\t\t\tprevProductIconId = this.currentProductIconTheme.id;\n\t\t\t\tawait this.setProductIconTheme(DEFAULT_PRODUCT_ICON_THEME_ID, 'auto');\n\t\t\t}\n\t\t}));\n\t\tthis._register(this.languageService.onDidChange(() => this.reloadCurrentFileIconTheme()));\n\n\t\treturn Promise.all([this.getColorThemes(), this.getFileIconThemes(), this.getProductIconThemes()]).then(([ct, fit, pit]) => {\n\t\t\tupdateColorThemeConfigurationSchemas(ct);\n\t\t\tupdateFileIconThemeConfigurationSchemas(fit);\n\t\t\tupdateProductIconThemeConfigurationSchemas(pit);\n\t\t});\n\t}\n\n\n\t// preferred scheme handling\n\n\tprivate installPreferredSchemeListener() {\n\t\tthis._register(this.hostColorService.onDidChangeColorScheme(() => {\n\t\t\tif (this.settings.isDetectingColorScheme()) {\n\t\t\t\tthis.restoreColorTheme();\n\t\t\t}\n\t\t}));\n\t}\n\n\tpublic getColorTheme(): IWorkbenchColorTheme {\n\t\treturn this.currentColorTheme;\n\t}\n\n\tpublic async getColorThemes(): Promise<IWorkbenchColorTheme[]> {\n\t\treturn this.colorThemeRegistry.getThemes();\n\t}\n\n\tpublic getPreferredColorScheme(): ColorScheme | undefined {\n\t\treturn this.settings.getPreferredColorScheme();\n\t}\n\n\tpublic async getMarketplaceColorThemes(publisher: string, name: string, version: string): Promise<IWorkbenchColorTheme[]> {\n\t\tconst extensionLocation = await this.extensionResourceLoaderService.getExtensionGalleryResourceURL({ publisher, name, version }, 'extension');\n\t\tif (extensionLocation) {\n\t\t\ttry {\n\t\t\t\tconst manifestContent = await this.extensionResourceLoaderService.readExtensionResource(resources.joinPath(extensionLocation, 'package.json'));\n\t\t\t\treturn this.colorThemeRegistry.getMarketplaceThemes(JSON.parse(manifestContent), extensionLocation, ExtensionData.fromName(publisher, name));\n\t\t\t} catch (e) {\n\t\t\t\tthis.logService.error('Problem loading themes from marketplace', e);\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t}\n\n\tpublic get onDidColorThemeChange(): Event<IWorkbenchColorTheme> {\n\t\treturn this.onColorThemeChange.event;\n\t}\n\n\tpublic setColorTheme(themeIdOrTheme: string | undefined | IWorkbenchColorTheme, settingsTarget: ThemeSettingTarget): Promise<IWorkbenchColorTheme | null> {\n\t\treturn this.colorThemeSequencer.queue(async () => {\n\t\t\treturn this.internalSetColorTheme(themeIdOrTheme, settingsTarget);\n\t\t});\n\t}\n\n\tprivate async internalSetColorTheme(themeIdOrTheme: string | undefined | IWorkbenchColorTheme, settingsTarget: ThemeSettingTarget): Promise<IWorkbenchColorTheme | null> {\n\t\tif (!themeIdOrTheme) {\n\t\t\treturn null;\n\t\t}\n\t\tconst themeId = types.isString(themeIdOrTheme) ? validateThemeId(themeIdOrTheme) : themeIdOrTheme.id;\n\t\tif (this.currentColorTheme.isLoaded && themeId === this.currentColorTheme.id) {\n\t\t\tif (settingsTarget !== 'preview') {\n\t\t\t\tthis.currentColorTheme.toStorage(this.storageService);\n\t\t\t}\n\t\t\treturn this.settings.setColorTheme(this.currentColorTheme, settingsTarget);\n\t\t}\n\n\t\tlet themeData = this.colorThemeRegistry.findThemeById(themeId);\n\t\tif (!themeData) {\n\t\t\tif (themeIdOrTheme instanceof ColorThemeData) {\n\t\t\t\tthemeData = themeIdOrTheme;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\ttry {\n\t\t\tawait themeData.ensureLoaded(this.extensionResourceLoaderService);\n\t\t\tthemeData.setCustomizations(this.settings);\n\t\t\treturn this.applyTheme(themeData, settingsTarget);\n\t\t} catch (error) {\n\t\t\tthrow new Error(nls.localize('error.cannotloadtheme', \"Unable to load {0}: {1}\", themeData.location?.toString(), error.message));\n\t\t}\n\n\t}\n\n\tprivate reloadCurrentColorTheme() {\n\t\treturn this.colorThemeSequencer.queue(async () => {\n\t\t\ttry {\n\t\t\t\tconst theme = this.colorThemeRegistry.findThemeBySettingsId(this.currentColorTheme.settingsId) || this.currentColorTheme;\n\t\t\t\tawait theme.reload(this.extensionResourceLoaderService);\n\t\t\t\ttheme.setCustomizations(this.settings);\n\t\t\t\tawait this.applyTheme(theme, undefined, false);\n\t\t\t} catch (error) {\n\t\t\t\tthis.logService.info('Unable to reload {0}: {1}', this.currentColorTheme.location?.toString());\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic async restoreColorTheme(): Promise<boolean> {\n\t\treturn this.colorThemeSequencer.queue(async () => {\n\t\t\tconst settingId = this.settings.colorTheme;\n\t\t\tconst theme = this.colorThemeRegistry.findThemeBySettingsId(settingId);\n\t\t\tif (theme) {\n\t\t\t\tif (settingId !== this.currentColorTheme.settingsId) {\n\t\t\t\t\tawait this.internalSetColorTheme(theme.id, undefined);\n\t\t\t\t} else if (theme !== this.currentColorTheme) {\n\t\t\t\t\tawait theme.ensureLoaded(this.extensionResourceLoaderService);\n\t\t\t\t\ttheme.setCustomizations(this.settings);\n\t\t\t\t\tawait this.applyTheme(theme, undefined, true);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tprivate updateDynamicCSSRules(themeData: IColorTheme) {\n\t\tconst cssRules = new Set<string>();\n\t\tconst ruleCollector = {\n\t\t\taddRule: (rule: string) => {\n\t\t\t\tif (!cssRules.has(rule)) {\n\t\t\t\t\tcssRules.add(rule);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\truleCollector.addRule(`.monaco-workbench { forced-color-adjust: none; }`);\n\t\tthemingRegistry.getThemingParticipants().forEach(p => p(themeData, ruleCollector, this.environmentService));\n\n\t\tconst colorVariables: string[] = [];\n\t\tfor (const item of getColorRegistry().getColors()) {\n\t\t\tconst color = themeData.getColor(item.id, true);\n\t\t\tif (color) {\n\t\t\t\tcolorVariables.push(`${asCssVariableName(item.id)}: ${color.toString()};`);\n\t\t\t}\n\t\t}\n\t\truleCollector.addRule(`.monaco-workbench { ${colorVariables.join('\\n')} }`);\n\n\t\t_applyRules([...cssRules].join('\\n'), colorThemeRulesClassName);\n\t}\n\n\tprivate applyTheme(newTheme: ColorThemeData, settingsTarget: ThemeSettingTarget, silent = false): Promise<IWorkbenchColorTheme | null> {\n\t\tthis.updateDynamicCSSRules(newTheme);\n\n\t\tif (this.currentColorTheme.id) {\n\t\t\tthis.container.classList.remove(...this.currentColorTheme.classNames);\n\t\t} else {\n\t\t\tthis.container.classList.remove(ThemeTypeSelector.VS, ThemeTypeSelector.VS_DARK, ThemeTypeSelector.HC_BLACK, ThemeTypeSelector.HC_LIGHT);\n\t\t}\n\t\tthis.container.classList.add(...newTheme.classNames);\n\n\t\tthis.currentColorTheme.clearCaches();\n\t\tthis.currentColorTheme = newTheme;\n\t\tif (!this.colorThemingParticipantChangeListener) {\n\t\t\tthis.colorThemingParticipantChangeListener = themingRegistry.onThemingParticipantAdded(_ => this.updateDynamicCSSRules(this.currentColorTheme));\n\t\t}\n\n\t\tthis.colorThemeWatcher.update(newTheme);\n\n\t\tthis.sendTelemetry(newTheme.id, newTheme.extensionData, 'color');\n\n\t\tif (silent) {\n\t\t\treturn Promise.resolve(null);\n\t\t}\n\n\t\tthis.onColorThemeChange.fire(this.currentColorTheme);\n\n\t\t// remember theme data for a quick restore\n\t\tif (newTheme.isLoaded && settingsTarget !== 'preview') {\n\t\t\tnewTheme.toStorage(this.storageService);\n\t\t}\n\n\t\treturn this.settings.setColorTheme(this.currentColorTheme, settingsTarget);\n\t}\n\n\n\tprivate themeExtensionsActivated = new Map<string, boolean>();\n\tprivate sendTelemetry(themeId: string, themeData: ExtensionData | undefined, themeType: string) {\n\t\tif (themeData) {\n\t\t\tconst key = themeType + themeData.extensionId;\n\t\t\tif (!this.themeExtensionsActivated.get(key)) {\n\t\t\t\ttype ActivatePluginClassification = {\n\t\t\t\t\towner: 'aeschli';\n\t\t\t\t\tcomment: 'An event is fired when an color theme extension is first used as it provides the currently shown color theme.';\n\t\t\t\t\tid: { classification: 'PublicNonPersonalData'; purpose: 'FeatureInsight'; comment: 'The extension id.' };\n\t\t\t\t\tname: { classification: 'PublicNonPersonalData'; purpose: 'FeatureInsight'; comment: 'The extension name.' };\n\t\t\t\t\tisBuiltin: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Whether the extension is a built-in extension.' };\n\t\t\t\t\tpublisherDisplayName: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The extension publisher id.' };\n\t\t\t\t\tthemeId: { classification: 'PublicNonPersonalData'; purpose: 'FeatureInsight'; comment: 'The id of the theme that triggered the first extension use.' };\n\t\t\t\t};\n\t\t\t\ttype ActivatePluginEvent = {\n\t\t\t\t\tid: string;\n\t\t\t\t\tname: string;\n\t\t\t\t\tisBuiltin: boolean;\n\t\t\t\t\tpublisherDisplayName: string;\n\t\t\t\t\tthemeId: string;\n\t\t\t\t};\n\t\t\t\tthis.telemetryService.publicLog2<ActivatePluginEvent, ActivatePluginClassification>('activatePlugin', {\n\t\t\t\t\tid: themeData.extensionId,\n\t\t\t\t\tname: themeData.extensionName,\n\t\t\t\t\tisBuiltin: themeData.extensionIsBuiltin,\n\t\t\t\t\tpublisherDisplayName: themeData.extensionPublisher,\n\t\t\t\t\tthemeId: themeId\n\t\t\t\t});\n\t\t\t\tthis.themeExtensionsActivated.set(key, true);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic async getFileIconThemes(): Promise<IWorkbenchFileIconTheme[]> {\n\t\treturn this.fileIconThemeRegistry.getThemes();\n\t}\n\n\tpublic getFileIconTheme() {\n\t\treturn this.currentFileIconTheme;\n\t}\n\n\tpublic get onDidFileIconThemeChange(): Event<IWorkbenchFileIconTheme> {\n\t\treturn this.onFileIconThemeChange.event;\n\t}\n\n\tpublic async setFileIconTheme(iconThemeOrId: string | undefined | IWorkbenchFileIconTheme, settingsTarget: ThemeSettingTarget): Promise<IWorkbenchFileIconTheme> {\n\t\treturn this.fileIconThemeSequencer.queue(async () => {\n\t\t\treturn this.internalSetFileIconTheme(iconThemeOrId, settingsTarget);\n\t\t});\n\t}\n\n\tprivate async internalSetFileIconTheme(iconThemeOrId: string | undefined | IWorkbenchFileIconTheme, settingsTarget: ThemeSettingTarget): Promise<IWorkbenchFileIconTheme> {\n\t\tif (iconThemeOrId === undefined) {\n\t\t\ticonThemeOrId = '';\n\t\t}\n\t\tconst themeId = types.isString(iconThemeOrId) ? iconThemeOrId : iconThemeOrId.id;\n\t\tif (themeId !== this.currentFileIconTheme.id || !this.currentFileIconTheme.isLoaded) {\n\n\t\t\tlet newThemeData = this.fileIconThemeRegistry.findThemeById(themeId);\n\t\t\tif (!newThemeData && iconThemeOrId instanceof FileIconThemeData) {\n\t\t\t\tnewThemeData = iconThemeOrId;\n\t\t\t}\n\t\t\tif (!newThemeData) {\n\t\t\t\tnewThemeData = FileIconThemeData.noIconTheme;\n\t\t\t}\n\t\t\tawait newThemeData.ensureLoaded(this.fileIconThemeLoader);\n\n\t\t\tthis.applyAndSetFileIconTheme(newThemeData); // updates this.currentFileIconTheme\n\t\t}\n\n\t\tconst themeData = this.currentFileIconTheme;\n\n\t\t// remember theme data for a quick restore\n\t\tif (themeData.isLoaded && settingsTarget !== 'preview' && (!themeData.location || !getRemoteAuthority(themeData.location))) {\n\t\t\tthemeData.toStorage(this.storageService);\n\t\t}\n\t\tawait this.settings.setFileIconTheme(this.currentFileIconTheme, settingsTarget);\n\n\t\treturn themeData;\n\t}\n\n\tpublic async getMarketplaceFileIconThemes(publisher: string, name: string, version: string): Promise<IWorkbenchFileIconTheme[]> {\n\t\tconst extensionLocation = await this.extensionResourceLoaderService.getExtensionGalleryResourceURL({ publisher, name, version }, 'extension');\n\t\tif (extensionLocation) {\n\t\t\ttry {\n\t\t\t\tconst manifestContent = await this.extensionResourceLoaderService.readExtensionResource(resources.joinPath(extensionLocation, 'package.json'));\n\t\t\t\treturn this.fileIconThemeRegistry.getMarketplaceThemes(JSON.parse(manifestContent), extensionLocation, ExtensionData.fromName(publisher, name));\n\t\t\t} catch (e) {\n\t\t\t\tthis.logService.error('Problem loading themes from marketplace', e);\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t}\n\n\tprivate async reloadCurrentFileIconTheme() {\n\t\treturn this.fileIconThemeSequencer.queue(async () => {\n\t\t\tawait this.currentFileIconTheme.reload(this.fileIconThemeLoader);\n\t\t\tthis.applyAndSetFileIconTheme(this.currentFileIconTheme);\n\t\t});\n\t}\n\n\tpublic async restoreFileIconTheme(): Promise<boolean> {\n\t\treturn this.fileIconThemeSequencer.queue(async () => {\n\t\t\tconst settingId = this.settings.fileIconTheme;\n\t\t\tconst theme = this.fileIconThemeRegistry.findThemeBySettingsId(settingId);\n\t\t\tif (theme) {\n\t\t\t\tif (settingId !== this.currentFileIconTheme.settingsId) {\n\t\t\t\t\tawait this.internalSetFileIconTheme(theme.id, undefined);\n\t\t\t\t} else if (theme !== this.currentFileIconTheme) {\n\t\t\t\t\tawait theme.ensureLoaded(this.fileIconThemeLoader);\n\t\t\t\t\tthis.applyAndSetFileIconTheme(theme, true);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tprivate applyAndSetFileIconTheme(iconThemeData: FileIconThemeData, silent = false): void {\n\t\tthis.currentFileIconTheme = iconThemeData;\n\n\t\t_applyRules(iconThemeData.styleSheetContent!, fileIconThemeRulesClassName);\n\n\t\tif (iconThemeData.id) {\n\t\t\tthis.container.classList.add(fileIconsEnabledClass);\n\t\t} else {\n\t\t\tthis.container.classList.remove(fileIconsEnabledClass);\n\t\t}\n\n\t\tthis.fileIconThemeWatcher.update(iconThemeData);\n\n\t\tif (iconThemeData.id) {\n\t\t\tthis.sendTelemetry(iconThemeData.id, iconThemeData.extensionData, 'fileIcon');\n\t\t}\n\n\t\tif (!silent) {\n\t\t\tthis.onFileIconThemeChange.fire(this.currentFileIconTheme);\n\t\t}\n\t}\n\n\tpublic async getProductIconThemes(): Promise<IWorkbenchProductIconTheme[]> {\n\t\treturn this.productIconThemeRegistry.getThemes();\n\t}\n\n\tpublic getProductIconTheme() {\n\t\treturn this.currentProductIconTheme;\n\t}\n\n\tpublic get onDidProductIconThemeChange(): Event<IWorkbenchProductIconTheme> {\n\t\treturn this.onProductIconThemeChange.event;\n\t}\n\n\tpublic async setProductIconTheme(iconThemeOrId: string | undefined | IWorkbenchProductIconTheme, settingsTarget: ThemeSettingTarget): Promise<IWorkbenchProductIconTheme> {\n\t\treturn this.productIconThemeSequencer.queue(async () => {\n\t\t\treturn this.internalSetProductIconTheme(iconThemeOrId, settingsTarget);\n\t\t});\n\t}\n\n\tprivate async internalSetProductIconTheme(iconThemeOrId: string | undefined | IWorkbenchProductIconTheme, settingsTarget: ThemeSettingTarget): Promise<IWorkbenchProductIconTheme> {\n\t\tif (iconThemeOrId === undefined) {\n\t\t\ticonThemeOrId = '';\n\t\t}\n\t\tconst themeId = types.isString(iconThemeOrId) ? iconThemeOrId : iconThemeOrId.id;\n\t\tif (themeId !== this.currentProductIconTheme.id || !this.currentProductIconTheme.isLoaded) {\n\t\t\tlet newThemeData = this.productIconThemeRegistry.findThemeById(themeId);\n\t\t\tif (!newThemeData && iconThemeOrId instanceof ProductIconThemeData) {\n\t\t\t\tnewThemeData = iconThemeOrId;\n\t\t\t}\n\t\t\tif (!newThemeData) {\n\t\t\t\tnewThemeData = ProductIconThemeData.defaultTheme;\n\t\t\t}\n\t\t\tawait newThemeData.ensureLoaded(this.extensionResourceLoaderService, this.logService);\n\n\t\t\tthis.applyAndSetProductIconTheme(newThemeData); // updates this.currentProductIconTheme\n\t\t}\n\t\tconst themeData = this.currentProductIconTheme;\n\n\t\t// remember theme data for a quick restore\n\t\tif (themeData.isLoaded && settingsTarget !== 'preview' && (!themeData.location || !getRemoteAuthority(themeData.location))) {\n\t\t\tthemeData.toStorage(this.storageService);\n\t\t}\n\t\tawait this.settings.setProductIconTheme(this.currentProductIconTheme, settingsTarget);\n\n\t\treturn themeData;\n\n\t}\n\n\tpublic async getMarketplaceProductIconThemes(publisher: string, name: string, version: string): Promise<IWorkbenchProductIconTheme[]> {\n\t\tconst extensionLocation = await this.extensionResourceLoaderService.getExtensionGalleryResourceURL({ publisher, name, version }, 'extension');\n\t\tif (extensionLocation) {\n\t\t\ttry {\n\t\t\t\tconst manifestContent = await this.extensionResourceLoaderService.readExtensionResource(resources.joinPath(extensionLocation, 'package.json'));\n\t\t\t\treturn this.productIconThemeRegistry.getMarketplaceThemes(JSON.parse(manifestContent), extensionLocation, ExtensionData.fromName(publisher, name));\n\t\t\t} catch (e) {\n\t\t\t\tthis.logService.error('Problem loading themes from marketplace', e);\n\t\t\t}\n\t\t}\n\t\treturn [];\n\t}\n\n\tprivate async reloadCurrentProductIconTheme() {\n\t\treturn this.productIconThemeSequencer.queue(async () => {\n\t\t\tawait this.currentProductIconTheme.reload(this.extensionResourceLoaderService, this.logService);\n\t\t\tthis.applyAndSetProductIconTheme(this.currentProductIconTheme);\n\t\t});\n\t}\n\n\tpublic async restoreProductIconTheme(): Promise<boolean> {\n\t\treturn this.productIconThemeSequencer.queue(async () => {\n\t\t\tconst settingId = this.settings.productIconTheme;\n\t\t\tconst theme = this.productIconThemeRegistry.findThemeBySettingsId(settingId);\n\t\t\tif (theme) {\n\t\t\t\tif (settingId !== this.currentProductIconTheme.settingsId) {\n\t\t\t\t\tawait this.internalSetProductIconTheme(theme.id, undefined);\n\t\t\t\t} else if (theme !== this.currentProductIconTheme) {\n\t\t\t\t\tawait theme.ensureLoaded(this.extensionResourceLoaderService, this.logService);\n\t\t\t\t\tthis.applyAndSetProductIconTheme(theme, true);\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tprivate applyAndSetProductIconTheme(iconThemeData: ProductIconThemeData, silent = false): void {\n\n\t\tthis.currentProductIconTheme = iconThemeData;\n\n\t\t_applyRules(iconThemeData.styleSheetContent!, productIconThemeRulesClassName);\n\n\t\tthis.productIconThemeWatcher.update(iconThemeData);\n\n\t\tif (iconThemeData.id) {\n\t\t\tthis.sendTelemetry(iconThemeData.id, iconThemeData.extensionData, 'productIcon');\n\t\t}\n\t\tif (!silent) {\n\t\t\tthis.onProductIconThemeChange.fire(this.currentProductIconTheme);\n\t\t}\n\t}\n}\n\nclass ThemeFileWatcher {\n\n\tprivate watchedLocation: URI | undefined;\n\tprivate readonly watcherDisposables = new DisposableStore();\n\n\tconstructor(\n\t\tprivate readonly fileService: IFileService,\n\t\tprivate readonly environmentService: IBrowserWorkbenchEnvironmentService,\n\t\tprivate readonly onUpdate: () => void\n\t) { }\n\n\tupdate(theme: { location?: URI; watch?: boolean }) {\n\t\tif (!resources.isEqual(theme.location, this.watchedLocation)) {\n\t\t\tthis.watchedLocation = undefined;\n\t\t\tthis.watcherDisposables.clear();\n\n\t\t\tif (theme.location && (theme.watch || this.environmentService.isExtensionDevelopment)) {\n\t\t\t\tthis.watchedLocation = theme.location;\n\t\t\t\tthis.watcherDisposables.add(this.fileService.watch(theme.location));\n\t\t\t\tthis.watcherDisposables.add(this.fileService.onDidFilesChange(e => {\n\t\t\t\t\tif (this.watchedLocation && e.contains(this.watchedLocation, FileChangeType.UPDATED)) {\n\t\t\t\t\t\tthis.onUpdate();\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t}\n\n\tdispose() {\n\t\tthis.watcherDisposables.dispose();\n\t\tthis.watchedLocation = undefined;\n\t}\n}\n\nfunction _applyRules(styleSheetContent: string, rulesClassName: string) {\n\t// eslint-disable-next-line no-restricted-syntax\n\tconst themeStyles = mainWindow.document.head.getElementsByClassName(rulesClassName);\n\tif (themeStyles.length === 0) {\n\t\tconst elStyle = createStyleSheet();\n\t\telStyle.className = rulesClassName;\n\t\telStyle.textContent = styleSheetContent;\n\t} else {\n\t\t(<HTMLStyleElement>themeStyles[0]).textContent = styleSheetContent;\n\t}\n}\n\nregisterColorThemeSchemas();\nregisterFileIconThemeSchemas();\nregisterProductIconThemeSchemas();\n\n// The WorkbenchThemeService should stay eager as the constructor restores the\n// last used colors / icons from storage. This needs to happen as quickly as possible\n// for a flicker-free startup experience.\nregisterSingleton(IWorkbenchThemeService, WorkbenchThemeService, InstantiationType.Eager);\n"]}