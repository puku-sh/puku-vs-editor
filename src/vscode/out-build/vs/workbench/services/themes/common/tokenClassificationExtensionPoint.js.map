{"version":3,"sources":["vs/workbench/services/themes/common/tokenClassificationExtensionPoint.ts"],"names":[],"mappings":"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","file":"tokenClassificationExtensionPoint.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport { ExtensionsRegistry, ExtensionMessageCollector } from '../../extensions/common/extensionsRegistry.js';\nimport { getTokenClassificationRegistry, ITokenClassificationRegistry, typeAndModifierIdPattern } from '../../../../platform/theme/common/tokenClassificationRegistry.js';\n\ninterface ITokenTypeExtensionPoint {\n\tid: string;\n\tdescription: string;\n\tsuperType?: string;\n}\n\ninterface ITokenModifierExtensionPoint {\n\tid: string;\n\tdescription: string;\n}\n\ninterface ITokenStyleDefaultExtensionPoint {\n\tlanguage?: string;\n\tscopes: { [selector: string]: string[] };\n}\n\nconst tokenClassificationRegistry: ITokenClassificationRegistry = getTokenClassificationRegistry();\n\nconst tokenTypeExtPoint = ExtensionsRegistry.registerExtensionPoint<ITokenTypeExtensionPoint[]>({\n\textensionPoint: 'semanticTokenTypes',\n\tjsonSchema: {\n\t\tdescription: nls.localize('contributes.semanticTokenTypes', 'Contributes semantic token types.'),\n\t\ttype: 'array',\n\t\titems: {\n\t\t\ttype: 'object',\n\t\t\tproperties: {\n\t\t\t\tid: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tdescription: nls.localize('contributes.semanticTokenTypes.id', 'The identifier of the semantic token type'),\n\t\t\t\t\tpattern: typeAndModifierIdPattern,\n\t\t\t\t\tpatternErrorMessage: nls.localize('contributes.semanticTokenTypes.id.format', 'Identifiers should be in the form letterOrDigit[_-letterOrDigit]*'),\n\t\t\t\t},\n\t\t\t\tsuperType: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tdescription: nls.localize('contributes.semanticTokenTypes.superType', 'The super type of the semantic token type'),\n\t\t\t\t\tpattern: typeAndModifierIdPattern,\n\t\t\t\t\tpatternErrorMessage: nls.localize('contributes.semanticTokenTypes.superType.format', 'Super types should be in the form letterOrDigit[_-letterOrDigit]*'),\n\t\t\t\t},\n\t\t\t\tdescription: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tdescription: nls.localize('contributes.color.description', 'The description of the semantic token type'),\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\nconst tokenModifierExtPoint = ExtensionsRegistry.registerExtensionPoint<ITokenModifierExtensionPoint[]>({\n\textensionPoint: 'semanticTokenModifiers',\n\tjsonSchema: {\n\t\tdescription: nls.localize('contributes.semanticTokenModifiers', 'Contributes semantic token modifiers.'),\n\t\ttype: 'array',\n\t\titems: {\n\t\t\ttype: 'object',\n\t\t\tproperties: {\n\t\t\t\tid: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tdescription: nls.localize('contributes.semanticTokenModifiers.id', 'The identifier of the semantic token modifier'),\n\t\t\t\t\tpattern: typeAndModifierIdPattern,\n\t\t\t\t\tpatternErrorMessage: nls.localize('contributes.semanticTokenModifiers.id.format', 'Identifiers should be in the form letterOrDigit[_-letterOrDigit]*')\n\t\t\t\t},\n\t\t\t\tdescription: {\n\t\t\t\t\tdescription: nls.localize('contributes.semanticTokenModifiers.description', 'The description of the semantic token modifier')\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\nconst tokenStyleDefaultsExtPoint = ExtensionsRegistry.registerExtensionPoint<ITokenStyleDefaultExtensionPoint[]>({\n\textensionPoint: 'semanticTokenScopes',\n\tjsonSchema: {\n\t\tdescription: nls.localize('contributes.semanticTokenScopes', 'Contributes semantic token scope maps.'),\n\t\ttype: 'array',\n\t\titems: {\n\t\t\ttype: 'object',\n\t\t\tproperties: {\n\t\t\t\tlanguage: {\n\t\t\t\t\tdescription: nls.localize('contributes.semanticTokenScopes.languages', 'Lists the languge for which the defaults are.'),\n\t\t\t\t\ttype: 'string'\n\t\t\t\t},\n\t\t\t\tscopes: {\n\t\t\t\t\tdescription: nls.localize('contributes.semanticTokenScopes.scopes', 'Maps a semantic token (described by semantic token selector) to one or more textMate scopes used to represent that token.'),\n\t\t\t\t\ttype: 'object',\n\t\t\t\t\tadditionalProperties: {\n\t\t\t\t\t\ttype: 'array',\n\t\t\t\t\t\titems: {\n\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});\n\n\nexport class TokenClassificationExtensionPoints {\n\n\tconstructor() {\n\t\tfunction validateTypeOrModifier(contribution: ITokenTypeExtensionPoint | ITokenModifierExtensionPoint, extensionPoint: string, collector: ExtensionMessageCollector): boolean {\n\t\t\tif (typeof contribution.id !== 'string' || contribution.id.length === 0) {\n\t\t\t\tcollector.error(nls.localize('invalid.id', \"'configuration.{0}.id' must be defined and can not be empty\", extensionPoint));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!contribution.id.match(typeAndModifierIdPattern)) {\n\t\t\t\tcollector.error(nls.localize('invalid.id.format', \"'configuration.{0}.id' must follow the pattern letterOrDigit[-_letterOrDigit]*\", extensionPoint));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst superType = (contribution as ITokenTypeExtensionPoint).superType;\n\t\t\tif (superType && !superType.match(typeAndModifierIdPattern)) {\n\t\t\t\tcollector.error(nls.localize('invalid.superType.format', \"'configuration.{0}.superType' must follow the pattern letterOrDigit[-_letterOrDigit]*\", extensionPoint));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (typeof contribution.description !== 'string' || contribution.id.length === 0) {\n\t\t\t\tcollector.error(nls.localize('invalid.description', \"'configuration.{0}.description' must be defined and can not be empty\", extensionPoint));\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\ttokenTypeExtPoint.setHandler((extensions, delta) => {\n\t\t\tfor (const extension of delta.added) {\n\t\t\t\tconst extensionValue = <ITokenTypeExtensionPoint[]>extension.value;\n\t\t\t\tconst collector = extension.collector;\n\n\t\t\t\tif (!extensionValue || !Array.isArray(extensionValue)) {\n\t\t\t\t\tcollector.error(nls.localize('invalid.semanticTokenTypeConfiguration', \"'configuration.semanticTokenType' must be an array\"));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfor (const contribution of extensionValue) {\n\t\t\t\t\tif (validateTypeOrModifier(contribution, 'semanticTokenType', collector)) {\n\t\t\t\t\t\ttokenClassificationRegistry.registerTokenType(contribution.id, contribution.description, contribution.superType);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const extension of delta.removed) {\n\t\t\t\tconst extensionValue = <ITokenTypeExtensionPoint[]>extension.value;\n\t\t\t\tfor (const contribution of extensionValue) {\n\t\t\t\t\ttokenClassificationRegistry.deregisterTokenType(contribution.id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\ttokenModifierExtPoint.setHandler((extensions, delta) => {\n\t\t\tfor (const extension of delta.added) {\n\t\t\t\tconst extensionValue = <ITokenModifierExtensionPoint[]>extension.value;\n\t\t\t\tconst collector = extension.collector;\n\n\t\t\t\tif (!extensionValue || !Array.isArray(extensionValue)) {\n\t\t\t\t\tcollector.error(nls.localize('invalid.semanticTokenModifierConfiguration', \"'configuration.semanticTokenModifier' must be an array\"));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfor (const contribution of extensionValue) {\n\t\t\t\t\tif (validateTypeOrModifier(contribution, 'semanticTokenModifier', collector)) {\n\t\t\t\t\t\ttokenClassificationRegistry.registerTokenModifier(contribution.id, contribution.description);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const extension of delta.removed) {\n\t\t\t\tconst extensionValue = <ITokenModifierExtensionPoint[]>extension.value;\n\t\t\t\tfor (const contribution of extensionValue) {\n\t\t\t\t\ttokenClassificationRegistry.deregisterTokenModifier(contribution.id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\ttokenStyleDefaultsExtPoint.setHandler((extensions, delta) => {\n\t\t\tfor (const extension of delta.added) {\n\t\t\t\tconst extensionValue = <ITokenStyleDefaultExtensionPoint[]>extension.value;\n\t\t\t\tconst collector = extension.collector;\n\n\t\t\t\tif (!extensionValue || !Array.isArray(extensionValue)) {\n\t\t\t\t\tcollector.error(nls.localize('invalid.semanticTokenScopes.configuration', \"'configuration.semanticTokenScopes' must be an array\"));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfor (const contribution of extensionValue) {\n\t\t\t\t\tif (contribution.language && typeof contribution.language !== 'string') {\n\t\t\t\t\t\tcollector.error(nls.localize('invalid.semanticTokenScopes.language', \"'configuration.semanticTokenScopes.language' must be a string\"));\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (!contribution.scopes || typeof contribution.scopes !== 'object') {\n\t\t\t\t\t\tcollector.error(nls.localize('invalid.semanticTokenScopes.scopes', \"'configuration.semanticTokenScopes.scopes' must be defined as an object\"));\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tfor (const selectorString in contribution.scopes) {\n\t\t\t\t\t\tconst tmScopes = contribution.scopes[selectorString];\n\t\t\t\t\t\tif (!Array.isArray(tmScopes) || tmScopes.some(l => typeof l !== 'string')) {\n\t\t\t\t\t\t\tcollector.error(nls.localize('invalid.semanticTokenScopes.scopes.value', \"'configuration.semanticTokenScopes.scopes' values must be an array of strings\"));\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst selector = tokenClassificationRegistry.parseTokenSelector(selectorString, contribution.language);\n\t\t\t\t\t\t\ttokenClassificationRegistry.registerTokenStyleDefault(selector, { scopesToProbe: tmScopes.map(s => s.split(' ')) });\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tcollector.error(nls.localize('invalid.semanticTokenScopes.scopes.selector', \"configuration.semanticTokenScopes.scopes': Problems parsing selector {0}.\", selectorString));\n\t\t\t\t\t\t\t// invalid selector, ignore\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const extension of delta.removed) {\n\t\t\t\tconst extensionValue = <ITokenStyleDefaultExtensionPoint[]>extension.value;\n\t\t\t\tfor (const contribution of extensionValue) {\n\t\t\t\t\tfor (const selectorString in contribution.scopes) {\n\t\t\t\t\t\tconst tmScopes = contribution.scopes[selectorString];\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst selector = tokenClassificationRegistry.parseTokenSelector(selectorString, contribution.language);\n\t\t\t\t\t\t\ttokenClassificationRegistry.registerTokenStyleDefault(selector, { scopesToProbe: tmScopes.map(s => s.split(' ')) });\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t// invalid selector, ignore\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\n\n\n"]}