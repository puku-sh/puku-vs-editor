{"version":3,"sources":["vs/workbench/services/themes/common/colorThemeData.ts"],"names":[],"mappings":"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","file":"colorThemeData.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { basename } from '../../../../base/common/path.js';\nimport * as Json from '../../../../base/common/json.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { ExtensionData, ITokenColorCustomizations, ITextMateThemingRule, IWorkbenchColorTheme, IColorMap, IThemeExtensionPoint, IColorCustomizations, ISemanticTokenRules, ISemanticTokenColorizationSetting, ISemanticTokenColorCustomizations, IThemeScopableCustomizations, IThemeScopedCustomizations, THEME_SCOPE_CLOSE_PAREN, THEME_SCOPE_OPEN_PAREN, themeScopeRegex, THEME_SCOPE_WILDCARD } from './workbenchThemeService.js';\nimport { convertSettings } from './themeCompatibility.js';\nimport * as nls from '../../../../nls.js';\nimport * as types from '../../../../base/common/types.js';\nimport * as resources from '../../../../base/common/resources.js';\nimport { Extensions as ColorRegistryExtensions, IColorRegistry, ColorIdentifier, editorBackground, editorForeground, DEFAULT_COLOR_CONFIG_VALUE } from '../../../../platform/theme/common/colorRegistry.js';\nimport { ITokenStyle, getThemeTypeSelector } from '../../../../platform/theme/common/themeService.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { getParseErrorMessage } from '../../../../base/common/jsonErrorMessages.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { parse as parsePList } from './plistParser.js';\nimport { TokenStyle, SemanticTokenRule, ProbeScope, getTokenClassificationRegistry, TokenStyleValue, TokenStyleData, parseClassifierString } from '../../../../platform/theme/common/tokenClassificationRegistry.js';\nimport { MatcherWithPriority, Matcher, createMatchers } from './textMateScopeMatcher.js';\nimport { IExtensionResourceLoaderService } from '../../../../platform/extensionResourceLoader/common/extensionResourceLoader.js';\nimport { CharCode } from '../../../../base/common/charCode.js';\nimport { StorageScope, IStorageService, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { ThemeConfiguration } from './themeConfiguration.js';\nimport { ColorScheme, ThemeTypeSelector } from '../../../../platform/theme/common/theme.js';\nimport { ColorId, FontStyle, MetadataConsts } from '../../../../editor/common/encodedTokenAttributes.js';\nimport { toStandardTokenType } from '../../../../editor/common/languages/supports/tokenization.js';\n\nconst colorRegistry = Registry.as<IColorRegistry>(ColorRegistryExtensions.ColorContribution);\n\nconst tokenClassificationRegistry = getTokenClassificationRegistry();\n\nconst tokenGroupToScopesMap = {\n\tcomments: ['comment', 'punctuation.definition.comment'],\n\tstrings: ['string', 'meta.embedded.assembly'],\n\tkeywords: ['keyword - keyword.operator', 'keyword.control', 'storage', 'storage.type'],\n\tnumbers: ['constant.numeric'],\n\ttypes: ['entity.name.type', 'entity.name.class', 'support.type', 'support.class'],\n\tfunctions: ['entity.name.function', 'support.function'],\n\tvariables: ['variable', 'entity.name.variable']\n};\n\n\nexport type TokenStyleDefinition = SemanticTokenRule | ProbeScope[] | TokenStyleValue;\nexport type TokenStyleDefinitions = { [P in keyof TokenStyleData]?: TokenStyleDefinition | undefined };\n\nexport type TextMateThemingRuleDefinitions = { [P in keyof TokenStyleData]?: ITextMateThemingRule | undefined; } & { scope?: ProbeScope };\n\ninterface IColorOrDefaultMap {\n\t[id: string]: Color | typeof DEFAULT_COLOR_CONFIG_VALUE;\n}\n\nexport class ColorThemeData implements IWorkbenchColorTheme {\n\n\tstatic readonly STORAGE_KEY = 'colorThemeData';\n\n\tid: string;\n\tlabel: string;\n\tsettingsId: string;\n\tdescription?: string;\n\tisLoaded: boolean;\n\tlocation?: URI; // only set for extension from the registry, not for themes restored from the storage\n\twatch?: boolean;\n\textensionData?: ExtensionData;\n\n\tprivate themeSemanticHighlighting: boolean | undefined;\n\tprivate customSemanticHighlighting: boolean | undefined;\n\tprivate customSemanticHighlightingDeprecated: boolean | undefined;\n\n\tprivate themeTokenColors: ITextMateThemingRule[] = [];\n\tprivate customTokenColors: ITextMateThemingRule[] = [];\n\tprivate colorMap: IColorMap = {};\n\tprivate customColorMap: IColorOrDefaultMap = {};\n\n\tprivate semanticTokenRules: SemanticTokenRule[] = [];\n\tprivate customSemanticTokenRules: SemanticTokenRule[] = [];\n\n\tprivate themeTokenScopeMatchers: Matcher<ProbeScope>[] | undefined;\n\tprivate customTokenScopeMatchers: Matcher<ProbeScope>[] | undefined;\n\n\tprivate textMateThemingRules: ITextMateThemingRule[] | undefined = undefined; // created on demand\n\tprivate tokenColorIndex: TokenColorIndex | undefined = undefined; // created on demand\n\n\tprivate constructor(id: string, label: string, settingsId: string) {\n\t\tthis.id = id;\n\t\tthis.label = label;\n\t\tthis.settingsId = settingsId;\n\t\tthis.isLoaded = false;\n\t}\n\n\tget semanticHighlighting(): boolean {\n\t\tif (this.customSemanticHighlighting !== undefined) {\n\t\t\treturn this.customSemanticHighlighting;\n\t\t}\n\t\tif (this.customSemanticHighlightingDeprecated !== undefined) {\n\t\t\treturn this.customSemanticHighlightingDeprecated;\n\t\t}\n\t\treturn !!this.themeSemanticHighlighting;\n\t}\n\n\tget tokenColors(): ITextMateThemingRule[] {\n\t\tif (!this.textMateThemingRules) {\n\t\t\tconst result: ITextMateThemingRule[] = [];\n\n\t\t\t// the default rule (scope empty) is always the first rule. Ignore all other default rules.\n\t\t\tconst foreground = this.getColor(editorForeground) || this.getDefault(editorForeground)!;\n\t\t\tconst background = this.getColor(editorBackground) || this.getDefault(editorBackground)!;\n\t\t\tresult.push({\n\t\t\t\tsettings: {\n\t\t\t\t\tforeground: normalizeColor(foreground),\n\t\t\t\t\tbackground: normalizeColor(background)\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tlet hasDefaultTokens = false;\n\n\t\t\tfunction addRule(rule: ITextMateThemingRule) {\n\t\t\t\tif (rule.scope && rule.settings) {\n\t\t\t\t\tif (rule.scope === 'token.info-token') {\n\t\t\t\t\t\thasDefaultTokens = true;\n\t\t\t\t\t}\n\t\t\t\t\tresult.push({ scope: rule.scope, settings: { foreground: normalizeColor(rule.settings.foreground), background: normalizeColor(rule.settings.background), fontStyle: rule.settings.fontStyle } });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.themeTokenColors.forEach(addRule);\n\t\t\t// Add the custom colors after the theme colors\n\t\t\t// so that they will override them\n\t\t\tthis.customTokenColors.forEach(addRule);\n\n\t\t\tif (!hasDefaultTokens) {\n\t\t\t\tdefaultThemeColors[this.type].forEach(addRule);\n\t\t\t}\n\t\t\tthis.textMateThemingRules = result;\n\t\t}\n\t\treturn this.textMateThemingRules;\n\t}\n\n\tpublic getColor(colorId: ColorIdentifier, useDefault?: boolean): Color | undefined {\n\t\tconst customColor = this.customColorMap[colorId];\n\t\tif (customColor instanceof Color) {\n\t\t\treturn customColor;\n\t\t}\n\t\tif (customColor === undefined) { /* !== DEFAULT_COLOR_CONFIG_VALUE */\n\t\t\tconst color = this.colorMap[colorId];\n\t\t\tif (color !== undefined) {\n\t\t\t\treturn color;\n\t\t\t}\n\t\t}\n\t\tif (useDefault !== false) {\n\t\t\treturn this.getDefault(colorId);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate getTokenStyle(type: string, modifiers: string[], language: string, useDefault = true, definitions: TokenStyleDefinitions = {}): TokenStyle | undefined {\n\t\tconst result: any = {\n\t\t\tforeground: undefined,\n\t\t\tbold: undefined,\n\t\t\tunderline: undefined,\n\t\t\tstrikethrough: undefined,\n\t\t\titalic: undefined\n\t\t};\n\t\tconst score = {\n\t\t\tforeground: -1,\n\t\t\tbold: -1,\n\t\t\tunderline: -1,\n\t\t\tstrikethrough: -1,\n\t\t\titalic: -1\n\t\t};\n\n\t\tfunction _processStyle(matchScore: number, style: TokenStyle, definition: TokenStyleDefinition) {\n\t\t\tif (style.foreground && score.foreground <= matchScore) {\n\t\t\t\tscore.foreground = matchScore;\n\t\t\t\tresult.foreground = style.foreground;\n\t\t\t\tdefinitions.foreground = definition;\n\t\t\t}\n\t\t\tfor (const p of ['bold', 'underline', 'strikethrough', 'italic']) {\n\t\t\t\tconst property = p as keyof TokenStyle;\n\t\t\t\tconst info = style[property];\n\t\t\t\tif (info !== undefined) {\n\t\t\t\t\tif (score[property] <= matchScore) {\n\t\t\t\t\t\tscore[property] = matchScore;\n\t\t\t\t\t\tresult[property] = info;\n\t\t\t\t\t\tdefinitions[property] = definition;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfunction _processSemanticTokenRule(rule: SemanticTokenRule) {\n\t\t\tconst matchScore = rule.selector.match(type, modifiers, language);\n\t\t\tif (matchScore >= 0) {\n\t\t\t\t_processStyle(matchScore, rule.style, rule);\n\t\t\t}\n\t\t}\n\n\t\tthis.semanticTokenRules.forEach(_processSemanticTokenRule);\n\t\tthis.customSemanticTokenRules.forEach(_processSemanticTokenRule);\n\n\t\tlet hasUndefinedStyleProperty = false;\n\t\tfor (const k in score) {\n\t\t\tconst key = k as keyof TokenStyle;\n\t\t\tif (score[key] === -1) {\n\t\t\t\thasUndefinedStyleProperty = true;\n\t\t\t} else {\n\t\t\t\tscore[key] = Number.MAX_VALUE; // set it to the max, so it won't be replaced by a default\n\t\t\t}\n\t\t}\n\t\tif (hasUndefinedStyleProperty) {\n\t\t\tfor (const rule of tokenClassificationRegistry.getTokenStylingDefaultRules()) {\n\t\t\t\tconst matchScore = rule.selector.match(type, modifiers, language);\n\t\t\t\tif (matchScore >= 0) {\n\t\t\t\t\tlet style: TokenStyle | undefined;\n\t\t\t\t\tif (rule.defaults.scopesToProbe) {\n\t\t\t\t\t\tstyle = this.resolveScopes(rule.defaults.scopesToProbe);\n\t\t\t\t\t\tif (style) {\n\t\t\t\t\t\t\t_processStyle(matchScore, style, rule.defaults.scopesToProbe);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!style && useDefault !== false) {\n\t\t\t\t\t\tconst tokenStyleValue = rule.defaults[this.type];\n\t\t\t\t\t\tstyle = this.resolveTokenStyleValue(tokenStyleValue);\n\t\t\t\t\t\tif (style) {\n\t\t\t\t\t\t\t_processStyle(matchScore, style, tokenStyleValue!);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn TokenStyle.fromData(result);\n\n\t}\n\n\t/**\n\t * @param tokenStyleValue Resolve a tokenStyleValue in the context of a theme\n\t */\n\tpublic resolveTokenStyleValue(tokenStyleValue: TokenStyleValue | undefined): TokenStyle | undefined {\n\t\tif (tokenStyleValue === undefined) {\n\t\t\treturn undefined;\n\t\t} else if (typeof tokenStyleValue === 'string') {\n\t\t\tconst { type, modifiers, language } = parseClassifierString(tokenStyleValue, '');\n\t\t\treturn this.getTokenStyle(type, modifiers, language);\n\t\t} else if (typeof tokenStyleValue === 'object') {\n\t\t\treturn tokenStyleValue;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tpublic getTokenColorIndex(): TokenColorIndex {\n\t\t// collect all colors that tokens can have\n\t\tif (!this.tokenColorIndex) {\n\t\t\tconst index = new TokenColorIndex();\n\t\t\tthis.tokenColors.forEach(rule => {\n\t\t\t\tindex.add(rule.settings.foreground);\n\t\t\t\tindex.add(rule.settings.background);\n\t\t\t});\n\n\t\t\tthis.semanticTokenRules.forEach(r => index.add(r.style.foreground));\n\t\t\ttokenClassificationRegistry.getTokenStylingDefaultRules().forEach(r => {\n\t\t\t\tconst defaultColor = r.defaults[this.type];\n\t\t\t\tif (defaultColor && typeof defaultColor === 'object') {\n\t\t\t\t\tindex.add(defaultColor.foreground);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.customSemanticTokenRules.forEach(r => index.add(r.style.foreground));\n\n\t\t\tthis.tokenColorIndex = index;\n\t\t}\n\t\treturn this.tokenColorIndex;\n\t}\n\n\tpublic get tokenColorMap(): string[] {\n\t\treturn this.getTokenColorIndex().asArray();\n\t}\n\n\tpublic getTokenStyleMetadata(typeWithLanguage: string, modifiers: string[], defaultLanguage: string, useDefault = true, definitions: TokenStyleDefinitions = {}): ITokenStyle | undefined {\n\t\tconst { type, language } = parseClassifierString(typeWithLanguage, defaultLanguage);\n\t\tconst style = this.getTokenStyle(type, modifiers, language, useDefault, definitions);\n\t\tif (!style) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tforeground: this.getTokenColorIndex().get(style.foreground),\n\t\t\tbold: style.bold,\n\t\t\tunderline: style.underline,\n\t\t\tstrikethrough: style.strikethrough,\n\t\t\titalic: style.italic,\n\t\t};\n\t}\n\n\tpublic getTokenStylingRuleScope(rule: SemanticTokenRule): 'setting' | 'theme' | undefined {\n\t\tif (this.customSemanticTokenRules.indexOf(rule) !== -1) {\n\t\t\treturn 'setting';\n\t\t}\n\t\tif (this.semanticTokenRules.indexOf(rule) !== -1) {\n\t\t\treturn 'theme';\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tpublic getDefault(colorId: ColorIdentifier): Color | undefined {\n\t\treturn colorRegistry.resolveDefaultColor(colorId, this);\n\t}\n\n\n\tpublic resolveScopes(scopes: ProbeScope[], definitions?: TextMateThemingRuleDefinitions): TokenStyle | undefined {\n\n\t\tif (!this.themeTokenScopeMatchers) {\n\t\t\tthis.themeTokenScopeMatchers = this.themeTokenColors.map(getScopeMatcher);\n\t\t}\n\t\tif (!this.customTokenScopeMatchers) {\n\t\t\tthis.customTokenScopeMatchers = this.customTokenColors.map(getScopeMatcher);\n\t\t}\n\n\t\tfor (const scope of scopes) {\n\t\t\tlet foreground: string | undefined = undefined;\n\t\t\tlet fontStyle: string | undefined = undefined;\n\t\t\tlet foregroundScore = -1;\n\t\t\tlet fontStyleScore = -1;\n\t\t\tlet fontStyleThemingRule: ITextMateThemingRule | undefined = undefined;\n\t\t\tlet foregroundThemingRule: ITextMateThemingRule | undefined = undefined;\n\n\t\t\tfunction findTokenStyleForScopeInScopes(scopeMatchers: Matcher<ProbeScope>[], themingRules: ITextMateThemingRule[]) {\n\t\t\t\tfor (let i = 0; i < scopeMatchers.length; i++) {\n\t\t\t\t\tconst score = scopeMatchers[i](scope);\n\t\t\t\t\tif (score >= 0) {\n\t\t\t\t\t\tconst themingRule = themingRules[i];\n\t\t\t\t\t\tconst settings = themingRules[i].settings;\n\t\t\t\t\t\tif (score >= foregroundScore && settings.foreground) {\n\t\t\t\t\t\t\tforeground = settings.foreground;\n\t\t\t\t\t\t\tforegroundScore = score;\n\t\t\t\t\t\t\tforegroundThemingRule = themingRule;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (score >= fontStyleScore && types.isString(settings.fontStyle)) {\n\t\t\t\t\t\t\tfontStyle = settings.fontStyle;\n\t\t\t\t\t\t\tfontStyleScore = score;\n\t\t\t\t\t\t\tfontStyleThemingRule = themingRule;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfindTokenStyleForScopeInScopes(this.themeTokenScopeMatchers, this.themeTokenColors);\n\t\t\tfindTokenStyleForScopeInScopes(this.customTokenScopeMatchers, this.customTokenColors);\n\t\t\tif (foreground !== undefined || fontStyle !== undefined) {\n\t\t\t\tif (definitions) {\n\t\t\t\t\tdefinitions.foreground = foregroundThemingRule;\n\t\t\t\t\tdefinitions.bold = definitions.italic = definitions.underline = definitions.strikethrough = fontStyleThemingRule;\n\t\t\t\t\tdefinitions.scope = scope;\n\t\t\t\t}\n\n\t\t\t\treturn TokenStyle.fromSettings(foreground, fontStyle);\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tpublic defines(colorId: ColorIdentifier): boolean {\n\t\tconst customColor = this.customColorMap[colorId];\n\t\tif (customColor instanceof Color) {\n\t\t\treturn true;\n\t\t}\n\t\treturn customColor === undefined /* !== DEFAULT_COLOR_CONFIG_VALUE */ && this.colorMap.hasOwnProperty(colorId);\n\t}\n\n\tpublic setCustomizations(settings: ThemeConfiguration) {\n\t\tthis.setCustomColors(settings.colorCustomizations);\n\t\tthis.setCustomTokenColors(settings.tokenColorCustomizations);\n\t\tthis.setCustomSemanticTokenColors(settings.semanticTokenColorCustomizations);\n\t}\n\n\tpublic setCustomColors(colors: IColorCustomizations) {\n\t\tthis.customColorMap = {};\n\t\tthis.overwriteCustomColors(colors);\n\n\t\tconst themeSpecificColors = this.getThemeSpecificColors(colors) as IColorCustomizations;\n\t\tif (types.isObject(themeSpecificColors)) {\n\t\t\tthis.overwriteCustomColors(themeSpecificColors);\n\t\t}\n\n\t\tthis.tokenColorIndex = undefined;\n\t\tthis.textMateThemingRules = undefined;\n\t\tthis.customTokenScopeMatchers = undefined;\n\t}\n\n\tprivate overwriteCustomColors(colors: IColorCustomizations) {\n\t\tfor (const id in colors) {\n\t\t\tconst colorVal = colors[id];\n\t\t\tif (colorVal === DEFAULT_COLOR_CONFIG_VALUE) {\n\t\t\t\tthis.customColorMap[id] = DEFAULT_COLOR_CONFIG_VALUE;\n\t\t\t} else if (typeof colorVal === 'string') {\n\t\t\t\tthis.customColorMap[id] = Color.fromHex(colorVal);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic setCustomTokenColors(customTokenColors: ITokenColorCustomizations) {\n\t\tthis.customTokenColors = [];\n\t\tthis.customSemanticHighlightingDeprecated = undefined;\n\n\t\t// first add the non-theme specific settings\n\t\tthis.addCustomTokenColors(customTokenColors);\n\n\t\t// append theme specific settings. Last rules will win.\n\t\tconst themeSpecificTokenColors = this.getThemeSpecificColors(customTokenColors) as ITokenColorCustomizations;\n\t\tif (types.isObject(themeSpecificTokenColors)) {\n\t\t\tthis.addCustomTokenColors(themeSpecificTokenColors);\n\t\t}\n\n\t\tthis.tokenColorIndex = undefined;\n\t\tthis.textMateThemingRules = undefined;\n\t\tthis.customTokenScopeMatchers = undefined;\n\t}\n\n\tpublic setCustomSemanticTokenColors(semanticTokenColors: ISemanticTokenColorCustomizations | undefined) {\n\t\tthis.customSemanticTokenRules = [];\n\t\tthis.customSemanticHighlighting = undefined;\n\n\t\tif (semanticTokenColors) {\n\t\t\tthis.customSemanticHighlighting = semanticTokenColors.enabled;\n\t\t\tif (semanticTokenColors.rules) {\n\t\t\t\tthis.readSemanticTokenRules(semanticTokenColors.rules);\n\t\t\t}\n\t\t\tconst themeSpecificColors = this.getThemeSpecificColors(semanticTokenColors) as ISemanticTokenColorCustomizations;\n\t\t\tif (types.isObject(themeSpecificColors)) {\n\t\t\t\tif (themeSpecificColors.enabled !== undefined) {\n\t\t\t\t\tthis.customSemanticHighlighting = themeSpecificColors.enabled;\n\t\t\t\t}\n\t\t\t\tif (themeSpecificColors.rules) {\n\t\t\t\t\tthis.readSemanticTokenRules(themeSpecificColors.rules);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.tokenColorIndex = undefined;\n\t\tthis.textMateThemingRules = undefined;\n\t}\n\n\tpublic isThemeScope(key: string): boolean {\n\t\treturn key.charAt(0) === THEME_SCOPE_OPEN_PAREN && key.charAt(key.length - 1) === THEME_SCOPE_CLOSE_PAREN;\n\t}\n\n\tpublic isThemeScopeMatch(themeId: string): boolean {\n\t\tconst themeIdFirstChar = themeId.charAt(0);\n\t\tconst themeIdLastChar = themeId.charAt(themeId.length - 1);\n\t\tconst themeIdPrefix = themeId.slice(0, -1);\n\t\tconst themeIdInfix = themeId.slice(1, -1);\n\t\tconst themeIdSuffix = themeId.slice(1);\n\t\treturn themeId === this.settingsId\n\t\t\t|| (this.settingsId.includes(themeIdInfix) && themeIdFirstChar === THEME_SCOPE_WILDCARD && themeIdLastChar === THEME_SCOPE_WILDCARD)\n\t\t\t|| (this.settingsId.startsWith(themeIdPrefix) && themeIdLastChar === THEME_SCOPE_WILDCARD)\n\t\t\t|| (this.settingsId.endsWith(themeIdSuffix) && themeIdFirstChar === THEME_SCOPE_WILDCARD);\n\t}\n\n\tpublic getThemeSpecificColors(colors: IThemeScopableCustomizations): IThemeScopedCustomizations | undefined {\n\t\tlet themeSpecificColors: IThemeScopedCustomizations | undefined;\n\t\tfor (const key in colors) {\n\t\t\tconst scopedColors = colors[key];\n\t\t\tif (this.isThemeScope(key) && scopedColors instanceof Object && !Array.isArray(scopedColors)) {\n\t\t\t\tconst themeScopeList = key.match(themeScopeRegex) || [];\n\t\t\t\tfor (const themeScope of themeScopeList) {\n\t\t\t\t\tconst themeId = themeScope.substring(1, themeScope.length - 1);\n\t\t\t\t\tif (this.isThemeScopeMatch(themeId)) {\n\t\t\t\t\t\tif (!themeSpecificColors) {\n\t\t\t\t\t\t\tthemeSpecificColors = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst scopedThemeSpecificColors = scopedColors as IThemeScopedCustomizations;\n\t\t\t\t\t\tfor (const subkey in scopedThemeSpecificColors) {\n\t\t\t\t\t\t\tconst originalColors = themeSpecificColors[subkey];\n\t\t\t\t\t\t\tconst overrideColors = scopedThemeSpecificColors[subkey];\n\t\t\t\t\t\t\tif (Array.isArray(originalColors) && Array.isArray(overrideColors)) {\n\t\t\t\t\t\t\t\tthemeSpecificColors[subkey] = originalColors.concat(overrideColors);\n\t\t\t\t\t\t\t} else if (overrideColors) {\n\t\t\t\t\t\t\t\tthemeSpecificColors[subkey] = overrideColors;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn themeSpecificColors;\n\t}\n\n\tprivate readSemanticTokenRules(tokenStylingRuleSection: ISemanticTokenRules) {\n\t\tfor (const key in tokenStylingRuleSection) {\n\t\t\tif (!this.isThemeScope(key)) { // still do this test until experimental settings are gone\n\t\t\t\ttry {\n\t\t\t\t\tconst rule = readSemanticTokenRule(key, tokenStylingRuleSection[key]);\n\t\t\t\t\tif (rule) {\n\t\t\t\t\t\tthis.customSemanticTokenRules.push(rule);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// invalid selector, ignore\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate addCustomTokenColors(customTokenColors: ITokenColorCustomizations) {\n\t\t// Put the general customizations such as comments, strings, etc. first so that\n\t\t// they can be overridden by specific customizations like \"string.interpolated\"\n\t\tfor (const tokenGroup in tokenGroupToScopesMap) {\n\t\t\tconst group = <keyof typeof tokenGroupToScopesMap>tokenGroup; // TS doesn't type 'tokenGroup' properly\n\t\t\tconst value = customTokenColors[group];\n\t\t\tif (value) {\n\t\t\t\tconst settings = typeof value === 'string' ? { foreground: value } : value;\n\t\t\t\tconst scopes = tokenGroupToScopesMap[group];\n\t\t\t\tfor (const scope of scopes) {\n\t\t\t\t\tthis.customTokenColors.push({ scope, settings });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// specific customizations\n\t\tif (Array.isArray(customTokenColors.textMateRules)) {\n\t\t\tfor (const rule of customTokenColors.textMateRules) {\n\t\t\t\tif (rule.scope && rule.settings) {\n\t\t\t\t\tthis.customTokenColors.push(rule);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (customTokenColors.semanticHighlighting !== undefined) {\n\t\t\tthis.customSemanticHighlightingDeprecated = customTokenColors.semanticHighlighting;\n\t\t}\n\t}\n\n\tpublic ensureLoaded(extensionResourceLoaderService: IExtensionResourceLoaderService): Promise<void> {\n\t\treturn !this.isLoaded ? this.load(extensionResourceLoaderService) : Promise.resolve(undefined);\n\t}\n\n\tpublic reload(extensionResourceLoaderService: IExtensionResourceLoaderService): Promise<void> {\n\t\treturn this.load(extensionResourceLoaderService);\n\t}\n\n\tprivate load(extensionResourceLoaderService: IExtensionResourceLoaderService): Promise<void> {\n\t\tif (!this.location) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\t\tthis.themeTokenColors = [];\n\t\tthis.clearCaches();\n\n\t\tconst result = {\n\t\t\tcolors: {},\n\t\t\ttextMateRules: [],\n\t\t\tsemanticTokenRules: [],\n\t\t\tsemanticHighlighting: false\n\t\t};\n\t\treturn _loadColorTheme(extensionResourceLoaderService, this.location, result).then(_ => {\n\t\t\tthis.isLoaded = true;\n\t\t\tthis.semanticTokenRules = result.semanticTokenRules;\n\t\t\tthis.colorMap = result.colors;\n\t\t\tthis.themeTokenColors = result.textMateRules;\n\t\t\tthis.themeSemanticHighlighting = result.semanticHighlighting;\n\t\t});\n\t}\n\n\tpublic clearCaches() {\n\t\tthis.tokenColorIndex = undefined;\n\t\tthis.textMateThemingRules = undefined;\n\t\tthis.themeTokenScopeMatchers = undefined;\n\t\tthis.customTokenScopeMatchers = undefined;\n\t}\n\n\ttoStorage(storageService: IStorageService) {\n\t\tconst colorMapData: { [key: string]: string } = {};\n\t\tfor (const key in this.colorMap) {\n\t\t\tcolorMapData[key] = Color.Format.CSS.formatHexA(this.colorMap[key], true);\n\t\t}\n\t\t// no need to persist custom colors, they will be taken from the settings\n\t\tconst value = JSON.stringify({\n\t\t\tid: this.id,\n\t\t\tlabel: this.label,\n\t\t\tsettingsId: this.settingsId,\n\t\t\tthemeTokenColors: this.themeTokenColors.map(tc => ({ settings: tc.settings, scope: tc.scope })), // don't persist names\n\t\t\tsemanticTokenRules: this.semanticTokenRules.map(SemanticTokenRule.toJSONObject),\n\t\t\textensionData: ExtensionData.toJSONObject(this.extensionData),\n\t\t\tthemeSemanticHighlighting: this.themeSemanticHighlighting,\n\t\t\tcolorMap: colorMapData,\n\t\t\twatch: this.watch\n\t\t});\n\n\t\t// roam persisted color theme colors. Don't enable for icons as they contain references to fonts and images.\n\t\tstorageService.store(ColorThemeData.STORAGE_KEY, value, StorageScope.PROFILE, StorageTarget.USER);\n\t}\n\n\tget themeTypeSelector(): ThemeTypeSelector {\n\t\treturn this.classNames[0] as ThemeTypeSelector;\n\t}\n\n\tget classNames(): string[] {\n\t\treturn this.id.split(' ');\n\t}\n\n\tget type(): ColorScheme {\n\t\tswitch (this.themeTypeSelector) {\n\t\t\tcase ThemeTypeSelector.VS: return ColorScheme.LIGHT;\n\t\t\tcase ThemeTypeSelector.HC_BLACK: return ColorScheme.HIGH_CONTRAST_DARK;\n\t\t\tcase ThemeTypeSelector.HC_LIGHT: return ColorScheme.HIGH_CONTRAST_LIGHT;\n\t\t\tdefault: return ColorScheme.DARK;\n\t\t}\n\t}\n\n\t// constructors\n\n\tstatic createUnloadedThemeForThemeType(themeType: ColorScheme, colorMap?: { [id: string]: string }): ColorThemeData {\n\t\treturn ColorThemeData.createUnloadedTheme(getThemeTypeSelector(themeType), colorMap);\n\t}\n\n\tstatic createUnloadedTheme(id: string, colorMap?: { [id: string]: string }): ColorThemeData {\n\t\tconst themeData = new ColorThemeData(id, '', '__' + id);\n\t\tthemeData.isLoaded = false;\n\t\tthemeData.themeTokenColors = [];\n\t\tthemeData.watch = false;\n\t\tif (colorMap) {\n\t\t\tfor (const id in colorMap) {\n\t\t\t\tthemeData.colorMap[id] = Color.fromHex(colorMap[id]);\n\t\t\t}\n\t\t}\n\t\treturn themeData;\n\t}\n\n\tstatic createLoadedEmptyTheme(id: string, settingsId: string): ColorThemeData {\n\t\tconst themeData = new ColorThemeData(id, '', settingsId);\n\t\tthemeData.isLoaded = true;\n\t\tthemeData.themeTokenColors = [];\n\t\tthemeData.watch = false;\n\t\treturn themeData;\n\t}\n\n\tstatic fromStorageData(storageService: IStorageService): ColorThemeData | undefined {\n\t\tconst input = storageService.get(ColorThemeData.STORAGE_KEY, StorageScope.PROFILE);\n\t\tif (!input) {\n\t\t\treturn undefined;\n\t\t}\n\t\ttry {\n\t\t\tconst data = JSON.parse(input);\n\t\t\tconst theme = new ColorThemeData('', '', '');\n\t\t\tfor (const key in data) {\n\t\t\t\tswitch (key) {\n\t\t\t\t\tcase 'colorMap': {\n\t\t\t\t\t\tconst colorMapData = data[key];\n\t\t\t\t\t\tfor (const id in colorMapData) {\n\t\t\t\t\t\t\ttheme.colorMap[id] = Color.fromHex(colorMapData[id]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'themeTokenColors':\n\t\t\t\t\tcase 'id': case 'label': case 'settingsId': case 'watch': case 'themeSemanticHighlighting':\n\t\t\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\t\t\t(theme as any)[key] = data[key];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'semanticTokenRules': {\n\t\t\t\t\t\tconst rulesData = data[key];\n\t\t\t\t\t\tif (Array.isArray(rulesData)) {\n\t\t\t\t\t\t\tfor (const d of rulesData) {\n\t\t\t\t\t\t\t\tconst rule = SemanticTokenRule.fromJSONObject(tokenClassificationRegistry, d);\n\t\t\t\t\t\t\t\tif (rule) {\n\t\t\t\t\t\t\t\t\ttheme.semanticTokenRules.push(rule);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'location':\n\t\t\t\t\t\t// ignore, no longer restore\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'extensionData':\n\t\t\t\t\t\ttheme.extensionData = ExtensionData.fromJSONObject(data.extensionData);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!theme.id || !theme.settingsId) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn theme;\n\t\t} catch (e) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tstatic fromExtensionTheme(theme: IThemeExtensionPoint, colorThemeLocation: URI, extensionData: ExtensionData): ColorThemeData {\n\t\tconst baseTheme: string = theme['uiTheme'] || 'vs-dark';\n\t\tconst themeSelector = toCSSSelector(extensionData.extensionId, theme.path);\n\t\tconst id = `${baseTheme} ${themeSelector}`;\n\t\tconst label = theme.label || basename(theme.path);\n\t\tconst settingsId = theme.id || label;\n\t\tconst themeData = new ColorThemeData(id, label, settingsId);\n\t\tthemeData.description = theme.description;\n\t\tthemeData.watch = theme._watch === true;\n\t\tthemeData.location = colorThemeLocation;\n\t\tthemeData.extensionData = extensionData;\n\t\tthemeData.isLoaded = false;\n\t\treturn themeData;\n\t}\n}\n\nfunction toCSSSelector(extensionId: string, path: string) {\n\tif (path.startsWith('./')) {\n\t\tpath = path.substr(2);\n\t}\n\tlet str = `${extensionId}-${path}`;\n\n\t//remove all characters that are not allowed in css\n\tstr = str.replace(/[^_a-zA-Z0-9-]/g, '-');\n\tif (str.charAt(0).match(/[0-9-]/)) {\n\t\tstr = '_' + str;\n\t}\n\treturn str;\n}\n\nasync function _loadColorTheme(extensionResourceLoaderService: IExtensionResourceLoaderService, themeLocation: URI, result: { textMateRules: ITextMateThemingRule[]; colors: IColorMap; semanticTokenRules: SemanticTokenRule[]; semanticHighlighting: boolean }): Promise<any> {\n\tif (resources.extname(themeLocation) === '.json') {\n\t\tconst content = await extensionResourceLoaderService.readExtensionResource(themeLocation);\n\t\tconst errors: Json.ParseError[] = [];\n\t\tconst contentValue = Json.parse(content, errors);\n\t\tif (errors.length > 0) {\n\t\t\treturn Promise.reject(new Error(nls.localize('error.cannotparsejson', \"Problems parsing JSON theme file: {0}\", errors.map(e => getParseErrorMessage(e.error)).join(', '))));\n\t\t} else if (Json.getNodeType(contentValue) !== 'object') {\n\t\t\treturn Promise.reject(new Error(nls.localize('error.invalidformat', \"Invalid format for JSON theme file: Object expected.\")));\n\t\t}\n\t\tif (contentValue.include) {\n\t\t\tawait _loadColorTheme(extensionResourceLoaderService, resources.joinPath(resources.dirname(themeLocation), contentValue.include), result);\n\t\t}\n\t\tif (Array.isArray(contentValue.settings)) {\n\t\t\tconvertSettings(contentValue.settings, result);\n\t\t\treturn null;\n\t\t}\n\t\tresult.semanticHighlighting = result.semanticHighlighting || contentValue.semanticHighlighting;\n\t\tconst colors = contentValue.colors;\n\t\tif (colors) {\n\t\t\tif (typeof colors !== 'object') {\n\t\t\t\treturn Promise.reject(new Error(nls.localize({ key: 'error.invalidformat.colors', comment: ['{0} will be replaced by a path. Values in quotes should not be translated.'] }, \"Problem parsing color theme file: {0}. Property 'colors' is not of type 'object'.\", themeLocation.toString())));\n\t\t\t}\n\t\t\t// new JSON color themes format\n\t\t\tfor (const colorId in colors) {\n\t\t\t\tconst colorVal = colors[colorId];\n\t\t\t\tif (colorVal === DEFAULT_COLOR_CONFIG_VALUE) { // ignore colors that are set to to default\n\t\t\t\t\tdelete result.colors[colorId];\n\t\t\t\t} else if (typeof colorVal === 'string') {\n\t\t\t\t\tresult.colors[colorId] = Color.fromHex(colors[colorId]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst tokenColors = contentValue.tokenColors;\n\t\tif (tokenColors) {\n\t\t\tif (Array.isArray(tokenColors)) {\n\t\t\t\tresult.textMateRules.push(...tokenColors);\n\t\t\t} else if (typeof tokenColors === 'string') {\n\t\t\t\tawait _loadSyntaxTokens(extensionResourceLoaderService, resources.joinPath(resources.dirname(themeLocation), tokenColors), result);\n\t\t\t} else {\n\t\t\t\treturn Promise.reject(new Error(nls.localize({ key: 'error.invalidformat.tokenColors', comment: ['{0} will be replaced by a path. Values in quotes should not be translated.'] }, \"Problem parsing color theme file: {0}. Property 'tokenColors' should be either an array specifying colors or a path to a TextMate theme file\", themeLocation.toString())));\n\t\t\t}\n\t\t}\n\t\tconst semanticTokenColors = contentValue.semanticTokenColors;\n\t\tif (semanticTokenColors && typeof semanticTokenColors === 'object') {\n\t\t\tfor (const key in semanticTokenColors) {\n\t\t\t\ttry {\n\t\t\t\t\tconst rule = readSemanticTokenRule(key, semanticTokenColors[key]);\n\t\t\t\t\tif (rule) {\n\t\t\t\t\t\tresult.semanticTokenRules.push(rule);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn Promise.reject(new Error(nls.localize({ key: 'error.invalidformat.semanticTokenColors', comment: ['{0} will be replaced by a path. Values in quotes should not be translated.'] }, \"Problem parsing color theme file: {0}. Property 'semanticTokenColors' contains a invalid selector\", themeLocation.toString())));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn _loadSyntaxTokens(extensionResourceLoaderService, themeLocation, result);\n\t}\n}\n\nfunction _loadSyntaxTokens(extensionResourceLoaderService: IExtensionResourceLoaderService, themeLocation: URI, result: { textMateRules: ITextMateThemingRule[]; colors: IColorMap }): Promise<any> {\n\treturn extensionResourceLoaderService.readExtensionResource(themeLocation).then(content => {\n\t\ttry {\n\t\t\tconst contentValue = parsePList(content);\n\t\t\tconst settings: ITextMateThemingRule[] = contentValue.settings;\n\t\t\tif (!Array.isArray(settings)) {\n\t\t\t\treturn Promise.reject(new Error(nls.localize('error.plist.invalidformat', \"Problem parsing tmTheme file: {0}. 'settings' is not array.\")));\n\t\t\t}\n\t\t\tconvertSettings(settings, result);\n\t\t\treturn Promise.resolve(null);\n\t\t} catch (e) {\n\t\t\treturn Promise.reject(new Error(nls.localize('error.cannotparse', \"Problems parsing tmTheme file: {0}\", e.message)));\n\t\t}\n\t}, error => {\n\t\treturn Promise.reject(new Error(nls.localize('error.cannotload', \"Problems loading tmTheme file {0}: {1}\", themeLocation.toString(), error.message)));\n\t});\n}\n\nconst defaultThemeColors: { [baseTheme: string]: ITextMateThemingRule[] } = {\n\t'light': [\n\t\t{ scope: 'token.info-token', settings: { foreground: '#316bcd' } },\n\t\t{ scope: 'token.warn-token', settings: { foreground: '#cd9731' } },\n\t\t{ scope: 'token.error-token', settings: { foreground: '#cd3131' } },\n\t\t{ scope: 'token.debug-token', settings: { foreground: '#800080' } }\n\t],\n\t'dark': [\n\t\t{ scope: 'token.info-token', settings: { foreground: '#6796e6' } },\n\t\t{ scope: 'token.warn-token', settings: { foreground: '#cd9731' } },\n\t\t{ scope: 'token.error-token', settings: { foreground: '#f44747' } },\n\t\t{ scope: 'token.debug-token', settings: { foreground: '#b267e6' } }\n\t],\n\t'hcLight': [\n\t\t{ scope: 'token.info-token', settings: { foreground: '#316bcd' } },\n\t\t{ scope: 'token.warn-token', settings: { foreground: '#cd9731' } },\n\t\t{ scope: 'token.error-token', settings: { foreground: '#cd3131' } },\n\t\t{ scope: 'token.debug-token', settings: { foreground: '#800080' } }\n\t],\n\t'hcDark': [\n\t\t{ scope: 'token.info-token', settings: { foreground: '#6796e6' } },\n\t\t{ scope: 'token.warn-token', settings: { foreground: '#008000' } },\n\t\t{ scope: 'token.error-token', settings: { foreground: '#FF0000' } },\n\t\t{ scope: 'token.debug-token', settings: { foreground: '#b267e6' } }\n\t]\n};\n\nconst noMatch = (_scope: ProbeScope) => -1;\n\nfunction nameMatcher(identifiers: string[], scopes: ProbeScope): number {\n\tif (scopes.length < identifiers.length) {\n\t\treturn -1;\n\t}\n\n\tlet score: number | undefined = undefined;\n\tconst every = identifiers.every((identifier) => {\n\t\tfor (let i = scopes.length - 1; i >= 0; i--) {\n\t\t\tif (scopesAreMatching(scopes[i], identifier)) {\n\t\t\t\tscore = (i + 1) * 0x10000 + identifier.length;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t});\n\treturn every && score !== undefined ? score : -1;\n}\nfunction scopesAreMatching(thisScopeName: string, scopeName: string): boolean {\n\tif (!thisScopeName) {\n\t\treturn false;\n\t}\n\tif (thisScopeName === scopeName) {\n\t\treturn true;\n\t}\n\tconst len = scopeName.length;\n\treturn thisScopeName.length > len && thisScopeName.substr(0, len) === scopeName && thisScopeName[len] === '.';\n}\n\nfunction getScopeMatcher(rule: ITextMateThemingRule): Matcher<ProbeScope> {\n\tconst ruleScope = rule.scope;\n\tif (!ruleScope || !rule.settings) {\n\t\treturn noMatch;\n\t}\n\tconst matchers: MatcherWithPriority<ProbeScope>[] = [];\n\tif (Array.isArray(ruleScope)) {\n\t\tfor (const rs of ruleScope) {\n\t\t\tcreateMatchers(rs, nameMatcher, matchers);\n\t\t}\n\t} else {\n\t\tcreateMatchers(ruleScope, nameMatcher, matchers);\n\t}\n\n\tif (matchers.length === 0) {\n\t\treturn noMatch;\n\t}\n\treturn (scope: ProbeScope) => {\n\t\tlet max = matchers[0].matcher(scope);\n\t\tfor (let i = 1; i < matchers.length; i++) {\n\t\t\tmax = Math.max(max, matchers[i].matcher(scope));\n\t\t}\n\t\treturn max;\n\t};\n}\n\nfunction readSemanticTokenRule(selectorString: string, settings: ISemanticTokenColorizationSetting | string | boolean | undefined): SemanticTokenRule | undefined {\n\tconst selector = tokenClassificationRegistry.parseTokenSelector(selectorString);\n\tlet style: TokenStyle | undefined;\n\tif (typeof settings === 'string') {\n\t\tstyle = TokenStyle.fromSettings(settings, undefined);\n\t} else if (isSemanticTokenColorizationSetting(settings)) {\n\t\tstyle = TokenStyle.fromSettings(settings.foreground, settings.fontStyle, settings.bold, settings.underline, settings.strikethrough, settings.italic);\n\t}\n\tif (style) {\n\t\treturn { selector, style };\n\t}\n\treturn undefined;\n}\n\nfunction isSemanticTokenColorizationSetting(style: any): style is ISemanticTokenColorizationSetting {\n\treturn style && (types.isString(style.foreground) || types.isString(style.fontStyle) || types.isBoolean(style.italic)\n\t\t|| types.isBoolean(style.underline) || types.isBoolean(style.strikethrough) || types.isBoolean(style.bold));\n}\n\nexport function findMetadata(colorThemeData: ColorThemeData, captureNames: string[], languageId: number, bracket: boolean): number {\n\tlet metadata = 0;\n\n\tmetadata |= (languageId << MetadataConsts.LANGUAGEID_OFFSET);\n\n\tconst definitions: TextMateThemingRuleDefinitions = {};\n\tconst tokenStyle = colorThemeData.resolveScopes([captureNames], definitions);\n\n\tif (captureNames.length > 0) {\n\t\tconst standardToken = toStandardTokenType(captureNames[captureNames.length - 1]);\n\t\tmetadata |= (standardToken << MetadataConsts.TOKEN_TYPE_OFFSET);\n\t}\n\n\tconst fontStyle = definitions.foreground?.settings.fontStyle || definitions.bold?.settings.fontStyle;\n\tif (fontStyle?.includes('italic')) {\n\t\tmetadata |= FontStyle.Italic | MetadataConsts.ITALIC_MASK;\n\t}\n\tif (fontStyle?.includes('bold')) {\n\t\tmetadata |= FontStyle.Bold | MetadataConsts.BOLD_MASK;\n\t}\n\tif (fontStyle?.includes('underline')) {\n\t\tmetadata |= FontStyle.Underline | MetadataConsts.UNDERLINE_MASK;\n\t}\n\tif (fontStyle?.includes('strikethrough')) {\n\t\tmetadata |= FontStyle.Strikethrough | MetadataConsts.STRIKETHROUGH_MASK;\n\t}\n\n\tconst foreground = tokenStyle?.foreground;\n\tconst tokenStyleForeground = (foreground !== undefined) ? colorThemeData.getTokenColorIndex().get(foreground) : ColorId.DefaultForeground;\n\tmetadata |= tokenStyleForeground << MetadataConsts.FOREGROUND_OFFSET;\n\n\tif (bracket) {\n\t\tmetadata |= MetadataConsts.BALANCED_BRACKETS_MASK;\n\t}\n\n\treturn metadata;\n}\n\nclass TokenColorIndex {\n\n\tprivate _lastColorId: number;\n\tprivate _id2color: string[];\n\tprivate _color2id: { [color: string]: number };\n\n\tconstructor() {\n\t\tthis._lastColorId = 0;\n\t\tthis._id2color = [];\n\t\tthis._color2id = Object.create(null);\n\t}\n\n\tpublic add(color: string | Color | undefined): number {\n\t\tcolor = normalizeColor(color);\n\t\tif (color === undefined) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet value = this._color2id[color];\n\t\tif (value) {\n\t\t\treturn value;\n\t\t}\n\t\tvalue = ++this._lastColorId;\n\t\tthis._color2id[color] = value;\n\t\tthis._id2color[value] = color;\n\t\treturn value;\n\t}\n\n\tpublic get(color: string | Color | undefined): number {\n\t\tcolor = normalizeColor(color);\n\t\tif (color === undefined) {\n\t\t\treturn 0;\n\t\t}\n\t\tconst value = this._color2id[color];\n\t\tif (value) {\n\t\t\treturn value;\n\t\t}\n\t\tconsole.log(`Color ${color} not in index.`);\n\t\treturn 0;\n\t}\n\n\tpublic asArray(): string[] {\n\t\treturn this._id2color.slice(0);\n\t}\n\n}\n\nfunction normalizeColor(color: string | Color | undefined | null): string | undefined {\n\tif (!color) {\n\t\treturn undefined;\n\t}\n\tif (typeof color !== 'string') {\n\t\tcolor = Color.Format.CSS.formatHexA(color, true);\n\t}\n\tconst len = color.length;\n\tif (color.charCodeAt(0) !== CharCode.Hash || (len !== 4 && len !== 5 && len !== 7 && len !== 9)) {\n\t\treturn undefined;\n\t}\n\tconst result = [CharCode.Hash];\n\n\tfor (let i = 1; i < len; i++) {\n\t\tconst upper = hexUpper(color.charCodeAt(i));\n\t\tif (!upper) {\n\t\t\treturn undefined;\n\t\t}\n\t\tresult.push(upper);\n\t\tif (len === 4 || len === 5) {\n\t\t\tresult.push(upper);\n\t\t}\n\t}\n\n\tif (result.length === 9 && result[7] === CharCode.F && result[8] === CharCode.F) {\n\t\tresult.length = 7;\n\t}\n\treturn String.fromCharCode(...result);\n}\n\nfunction hexUpper(charCode: CharCode): number {\n\tif (charCode >= CharCode.Digit0 && charCode <= CharCode.Digit9 || charCode >= CharCode.A && charCode <= CharCode.F) {\n\t\treturn charCode;\n\t} else if (charCode >= CharCode.a && charCode <= CharCode.f) {\n\t\treturn charCode - CharCode.a + CharCode.A;\n\t}\n\treturn 0;\n}\n"]}