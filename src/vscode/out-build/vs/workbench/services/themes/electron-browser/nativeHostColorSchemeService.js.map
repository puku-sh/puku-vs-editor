{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/themes/electron-browser/nativeHostColorSchemeService.ts","vs/workbench/services/themes/electron-browser/nativeHostColorSchemeService.ts"],"names":[],"mappings":"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","file":"nativeHostColorSchemeService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../../base/common/event.js';\nimport { INativeHostService } from '../../../../platform/native/common/native.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IHostColorSchemeService } from '../common/hostColorSchemeService.js';\nimport { INativeWorkbenchEnvironmentService } from '../../environment/electron-browser/environmentService.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { isBoolean, isObject } from '../../../../base/common/types.js';\nimport { IColorScheme } from '../../../../platform/window/common/window.js';\nimport { ILifecycleService, StartupKind } from '../../lifecycle/common/lifecycle.js';\n\nexport class NativeHostColorSchemeService extends Disposable implements IHostColorSchemeService {\n\n\t// we remember the last color scheme value to restore for reloaded window\n\tstatic readonly STORAGE_KEY = 'HostColorSchemeData';\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _onDidChangeColorScheme = this._register(new Emitter<void>());\n\treadonly onDidChangeColorScheme = this._onDidChangeColorScheme.event;\n\n\tpublic dark: boolean;\n\tpublic highContrast: boolean;\n\n\tconstructor(\n\t\t@INativeHostService private readonly nativeHostService: INativeHostService,\n\t\t@INativeWorkbenchEnvironmentService environmentService: INativeWorkbenchEnvironmentService,\n\t\t@IStorageService private storageService: IStorageService,\n\t\t@ILifecycleService lifecycleService: ILifecycleService\n\t) {\n\t\tsuper();\n\n\t\t// register listener with the OS\n\t\tthis._register(this.nativeHostService.onDidChangeColorScheme(scheme => this.update(scheme)));\n\n\t\tlet initial = environmentService.window.colorScheme;\n\t\tif (lifecycleService.startupKind === StartupKind.ReloadedWindow) {\n\t\t\tinitial = this.getStoredValue(initial);\n\t\t}\n\t\tthis.dark = initial.dark;\n\t\tthis.highContrast = initial.highContrast;\n\n\t\t// fetch the actual value from the OS\n\t\tthis.nativeHostService.getOSColorScheme().then(scheme => this.update(scheme));\n\t}\n\n\tprivate getStoredValue(dftl: IColorScheme): IColorScheme {\n\t\tconst stored = this.storageService.get(NativeHostColorSchemeService.STORAGE_KEY, StorageScope.APPLICATION);\n\t\tif (stored) {\n\t\t\ttry {\n\t\t\t\tconst scheme = JSON.parse(stored);\n\t\t\t\tif (isObject(scheme) && isBoolean(scheme.highContrast) && isBoolean(scheme.dark)) {\n\t\t\t\t\treturn scheme as IColorScheme;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t// ignore\n\t\t\t}\n\t\t}\n\t\treturn dftl;\n\t}\n\n\tprivate update({ highContrast, dark }: IColorScheme) {\n\t\tif (dark !== this.dark || highContrast !== this.highContrast) {\n\n\t\t\tthis.dark = dark;\n\t\t\tthis.highContrast = highContrast;\n\t\t\tthis.storageService.store(NativeHostColorSchemeService.STORAGE_KEY, JSON.stringify({ highContrast, dark }), StorageScope.APPLICATION, StorageTarget.MACHINE);\n\t\t\tthis._onDidChangeColorScheme.fire();\n\t\t}\n\t}\n\n}\n\nregisterSingleton(IHostColorSchemeService, NativeHostColorSchemeService, InstantiationType.Delayed);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../../base/common/event.js';\nimport { INativeHostService } from '../../../../platform/native/common/native.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IHostColorSchemeService } from '../common/hostColorSchemeService.js';\nimport { INativeWorkbenchEnvironmentService } from '../../environment/electron-browser/environmentService.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { isBoolean, isObject } from '../../../../base/common/types.js';\nimport { IColorScheme } from '../../../../platform/window/common/window.js';\nimport { ILifecycleService, StartupKind } from '../../lifecycle/common/lifecycle.js';\n\nexport class NativeHostColorSchemeService extends Disposable implements IHostColorSchemeService {\n\n\t// we remember the last color scheme value to restore for reloaded window\n\tstatic readonly STORAGE_KEY = 'HostColorSchemeData';\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _onDidChangeColorScheme = this._register(new Emitter<void>());\n\treadonly onDidChangeColorScheme = this._onDidChangeColorScheme.event;\n\n\tpublic dark: boolean;\n\tpublic highContrast: boolean;\n\n\tconstructor(\n\t\t@INativeHostService private readonly nativeHostService: INativeHostService,\n\t\t@INativeWorkbenchEnvironmentService environmentService: INativeWorkbenchEnvironmentService,\n\t\t@IStorageService private storageService: IStorageService,\n\t\t@ILifecycleService lifecycleService: ILifecycleService\n\t) {\n\t\tsuper();\n\n\t\t// register listener with the OS\n\t\tthis._register(this.nativeHostService.onDidChangeColorScheme(scheme => this.update(scheme)));\n\n\t\tlet initial = environmentService.window.colorScheme;\n\t\tif (lifecycleService.startupKind === StartupKind.ReloadedWindow) {\n\t\t\tinitial = this.getStoredValue(initial);\n\t\t}\n\t\tthis.dark = initial.dark;\n\t\tthis.highContrast = initial.highContrast;\n\n\t\t// fetch the actual value from the OS\n\t\tthis.nativeHostService.getOSColorScheme().then(scheme => this.update(scheme));\n\t}\n\n\tprivate getStoredValue(dftl: IColorScheme): IColorScheme {\n\t\tconst stored = this.storageService.get(NativeHostColorSchemeService.STORAGE_KEY, StorageScope.APPLICATION);\n\t\tif (stored) {\n\t\t\ttry {\n\t\t\t\tconst scheme = JSON.parse(stored);\n\t\t\t\tif (isObject(scheme) && isBoolean(scheme.highContrast) && isBoolean(scheme.dark)) {\n\t\t\t\t\treturn scheme as IColorScheme;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t// ignore\n\t\t\t}\n\t\t}\n\t\treturn dftl;\n\t}\n\n\tprivate update({ highContrast, dark }: IColorScheme) {\n\t\tif (dark !== this.dark || highContrast !== this.highContrast) {\n\n\t\t\tthis.dark = dark;\n\t\t\tthis.highContrast = highContrast;\n\t\t\tthis.storageService.store(NativeHostColorSchemeService.STORAGE_KEY, JSON.stringify({ highContrast, dark }), StorageScope.APPLICATION, StorageTarget.MACHINE);\n\t\t\tthis._onDidChangeColorScheme.fire();\n\t\t}\n\t}\n\n}\n\nregisterSingleton(IHostColorSchemeService, NativeHostColorSchemeService, InstantiationType.Delayed);\n"]}