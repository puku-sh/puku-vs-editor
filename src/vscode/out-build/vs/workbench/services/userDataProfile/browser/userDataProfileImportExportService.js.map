{"version":3,"sources":["vs/workbench/services/userDataProfile/browser/userDataProfileImportExportService.ts"],"names":[],"mappings":"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","file":"userDataProfileImportExportService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/userDataProfileView.css';\nimport { localize } from '../../../../nls.js';\nimport { isMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { IUserDataProfileImportExportService, PROFILE_FILTER, PROFILE_EXTENSION, IUserDataProfileContentHandler, IUserDataProfileService, IProfileResourceTreeItem, PROFILES_CATEGORY, IUserDataProfileManagementService, ISaveProfileResult, IProfileImportOptions, PROFILE_URL_AUTHORITY, toUserDataProfileUri, IUserDataProfileCreateOptions, isProfileURL, PROFILE_URL_AUTHORITY_PREFIX } from '../common/userDataProfile.js';\nimport { Disposable, DisposableStore, IDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { IDialogService, IFileDialogService, IPromptButton } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { ITextFileService } from '../../textfile/common/textfiles.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ITreeItem, ITreeViewDataProvider } from '../../../common/views.js';\nimport { IUserDataProfile, IUserDataProfileOptions, IUserDataProfilesService, ProfileResourceType, ProfileResourceTypeFlags } from '../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { SettingsResource, SettingsResourceTreeItem } from './settingsResource.js';\nimport { KeybindingsResource, KeybindingsResourceTreeItem } from './keybindingsResource.js';\nimport { SnippetsResource, SnippetsResourceTreeItem } from './snippetsResource.js';\nimport { TasksResource, TasksResourceTreeItem } from './tasksResource.js';\nimport { ExtensionsResource, ExtensionsResourceExportTreeItem, ExtensionsResourceTreeItem } from './extensionsResource.js';\nimport { GlobalStateResource, GlobalStateResourceExportTreeItem, GlobalStateResourceTreeItem } from './globalStateResource.js';\nimport { InMemoryFileSystemProvider } from '../../../../platform/files/common/inMemoryFilesystemProvider.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IProgressService, ProgressLocation } from '../../../../platform/progress/common/progress.js';\nimport { IExtensionService } from '../../extensions/common/extensions.js';\nimport { IQuickInputService, QuickPickItem } from '../../../../platform/quickinput/common/quickInput.js';\nimport { VSBuffer } from '../../../../base/common/buffer.js';\nimport { joinPath } from '../../../../base/common/resources.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { asText, IRequestService } from '../../../../platform/request/common/request.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { Mutable, isUndefined } from '../../../../base/common/types.js';\nimport { CancelablePromise, createCancelablePromise } from '../../../../base/common/async.js';\n\ninterface IUserDataProfileTemplate {\n\treadonly name: string;\n\treadonly icon?: string;\n\treadonly settings?: string;\n\treadonly keybindings?: string;\n\treadonly tasks?: string;\n\treadonly snippets?: string;\n\treadonly globalState?: string;\n\treadonly extensions?: string;\n}\n\nfunction isUserDataProfileTemplate(thing: unknown): thing is IUserDataProfileTemplate {\n\tconst candidate = thing as IUserDataProfileTemplate | undefined;\n\n\treturn !!(candidate && typeof candidate === 'object'\n\t\t&& (candidate.name && typeof candidate.name === 'string')\n\t\t&& (isUndefined(candidate.icon) || typeof candidate.icon === 'string')\n\t\t&& (isUndefined(candidate.settings) || typeof candidate.settings === 'string')\n\t\t&& (isUndefined(candidate.globalState) || typeof candidate.globalState === 'string')\n\t\t&& (isUndefined(candidate.extensions) || typeof candidate.extensions === 'string'));\n}\n\nexport class UserDataProfileImportExportService extends Disposable implements IUserDataProfileImportExportService {\n\n\treadonly _serviceBrand: undefined;\n\n\tprivate profileContentHandlers = new Map<string, IUserDataProfileContentHandler>();\n\n\tprivate readonly fileUserDataProfileContentHandler: FileUserDataProfileContentHandler;\n\n\tconstructor(\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IUserDataProfileService private readonly userDataProfileService: IUserDataProfileService,\n\t\t@IUserDataProfileManagementService private readonly userDataProfileManagementService: IUserDataProfileManagementService,\n\t\t@IUserDataProfilesService private readonly userDataProfilesService: IUserDataProfilesService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@IClipboardService private readonly clipboardService: IClipboardService,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t\t@IRequestService private readonly requestService: IRequestService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t) {\n\t\tsuper();\n\t\tthis.registerProfileContentHandler(Schemas.file, this.fileUserDataProfileContentHandler = instantiationService.createInstance(FileUserDataProfileContentHandler));\n\t}\n\n\tregisterProfileContentHandler(id: string, profileContentHandler: IUserDataProfileContentHandler): IDisposable {\n\t\tif (this.profileContentHandlers.has(id)) {\n\t\t\tthrow new Error(`Profile content handler with id '${id}' already registered.`);\n\t\t}\n\t\tthis.profileContentHandlers.set(id, profileContentHandler);\n\t\treturn toDisposable(() => this.unregisterProfileContentHandler(id));\n\t}\n\n\tunregisterProfileContentHandler(id: string): void {\n\t\tthis.profileContentHandlers.delete(id);\n\t}\n\n\tasync createFromProfile(from: IUserDataProfile, options: IUserDataProfileCreateOptions, token: CancellationToken): Promise<IUserDataProfile | undefined> {\n\t\tconst disposables = new DisposableStore();\n\t\tlet creationPromise: CancelablePromise<void>;\n\t\tdisposables.add(token.onCancellationRequested(() => creationPromise.cancel()));\n\t\tlet profile: IUserDataProfile | undefined;\n\t\treturn this.progressService.withProgress({\n\t\t\tlocation: ProgressLocation.Notification,\n\t\t\tdelay: 500,\n\t\t\tsticky: true,\n\t\t\tcancellable: true,\n\t\t}, async progress => {\n\t\t\tconst reportProgress = (message: string) => progress.report({ message: localize('create from profile', \"Create Profile: {0}\", message) });\n\t\t\tcreationPromise = createCancelablePromise(async token => {\n\t\t\t\tconst userDataProfilesExportState = disposables.add(this.instantiationService.createInstance(UserDataProfileExportState, from, { ...options?.resourceTypeFlags, extensions: false }));\n\t\t\t\tconst profileTemplate = await userDataProfilesExportState.getProfileTemplate(options.name ?? from.name, options?.icon);\n\t\t\t\tprofile = await this.getProfileToImport({ ...profileTemplate, name: options.name ?? profileTemplate.name }, !!options.transient, options);\n\t\t\t\tif (!profile) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tawait this.applyProfileTemplate(profileTemplate, profile, options, reportProgress, token);\n\t\t\t});\n\t\t\ttry {\n\t\t\t\tawait creationPromise;\n\t\t\t\tif (profile && (options?.resourceTypeFlags?.extensions ?? true)) {\n\t\t\t\t\treportProgress(localize('installing extensions', \"Installing Extensions...\"));\n\t\t\t\t\tawait this.instantiationService.createInstance(ExtensionsResource).copy(from, profile, false);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tif (profile) {\n\t\t\t\t\tawait this.userDataProfilesService.removeProfile(profile);\n\t\t\t\t\tprofile = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn profile;\n\n\t\t}, () => creationPromise.cancel()).finally(() => disposables.dispose());\n\t}\n\n\tasync createProfileFromTemplate(profileTemplate: IUserDataProfileTemplate, options: IUserDataProfileCreateOptions, token: CancellationToken): Promise<IUserDataProfile | undefined> {\n\t\tconst disposables = new DisposableStore();\n\t\tlet creationPromise: CancelablePromise<void>;\n\t\tdisposables.add(token.onCancellationRequested(() => creationPromise.cancel()));\n\t\tlet profile: IUserDataProfile | undefined;\n\t\treturn this.progressService.withProgress({\n\t\t\tlocation: ProgressLocation.Notification,\n\t\t\tdelay: 500,\n\t\t\tsticky: true,\n\t\t\tcancellable: true,\n\t\t}, async progress => {\n\t\t\tconst reportProgress = (message: string) => progress.report({ message: localize('create from profile', \"Create Profile: {0}\", message) });\n\t\t\tcreationPromise = createCancelablePromise(async token => {\n\t\t\t\tprofile = await this.getProfileToImport({ ...profileTemplate, name: options.name ?? profileTemplate.name }, !!options.transient, options);\n\t\t\t\tif (!profile) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tawait this.applyProfileTemplate(profileTemplate, profile, options, reportProgress, token);\n\t\t\t});\n\t\t\ttry {\n\t\t\t\tawait creationPromise;\n\t\t\t} catch (error) {\n\t\t\t\tif (profile) {\n\t\t\t\t\tawait this.userDataProfilesService.removeProfile(profile);\n\t\t\t\t\tprofile = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn profile;\n\t\t}, () => creationPromise.cancel()).finally(() => disposables.dispose());\n\t}\n\n\tprivate async applyProfileTemplate(profileTemplate: IUserDataProfileTemplate, profile: IUserDataProfile, options: IUserDataProfileCreateOptions, reportProgress: (message: string) => void, token: CancellationToken): Promise<void> {\n\t\tif (profileTemplate.settings && (options.resourceTypeFlags?.settings ?? true) && !profile.useDefaultFlags?.settings) {\n\t\t\treportProgress(localize('creating settings', \"Creating Settings...\"));\n\t\t\tawait this.instantiationService.createInstance(SettingsResource).apply(profileTemplate.settings, profile);\n\t\t}\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\t\tif (profileTemplate.keybindings && (options.resourceTypeFlags?.keybindings ?? true) && !profile.useDefaultFlags?.keybindings) {\n\t\t\treportProgress(localize('create keybindings', \"Creating Keyboard Shortcuts...\"));\n\t\t\tawait this.instantiationService.createInstance(KeybindingsResource).apply(profileTemplate.keybindings, profile);\n\t\t}\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\t\tif (profileTemplate.tasks && (options.resourceTypeFlags?.tasks ?? true) && !profile.useDefaultFlags?.tasks) {\n\t\t\treportProgress(localize('create tasks', \"Creating Tasks...\"));\n\t\t\tawait this.instantiationService.createInstance(TasksResource).apply(profileTemplate.tasks, profile);\n\t\t}\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\t\tif (profileTemplate.snippets && (options.resourceTypeFlags?.snippets ?? true) && !profile.useDefaultFlags?.snippets) {\n\t\t\treportProgress(localize('create snippets', \"Creating Snippets...\"));\n\t\t\tawait this.instantiationService.createInstance(SnippetsResource).apply(profileTemplate.snippets, profile);\n\t\t}\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\t\tif (profileTemplate.globalState && !profile.useDefaultFlags?.globalState) {\n\t\t\treportProgress(localize('applying global state', \"Applying UI State...\"));\n\t\t\tawait this.instantiationService.createInstance(GlobalStateResource).apply(profileTemplate.globalState, profile);\n\t\t}\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\t\tif (profileTemplate.extensions && (options.resourceTypeFlags?.extensions ?? true) && !profile.useDefaultFlags?.extensions) {\n\t\t\treportProgress(localize('installing extensions', \"Installing Extensions...\"));\n\t\t\tawait this.instantiationService.createInstance(ExtensionsResource).apply(profileTemplate.extensions, profile, reportProgress, token);\n\t\t}\n\t}\n\n\tasync exportProfile(profile: IUserDataProfile, exportFlags?: ProfileResourceTypeFlags): Promise<void> {\n\t\tconst disposables = new DisposableStore();\n\t\ttry {\n\t\t\tconst userDataProfilesExportState = disposables.add(this.instantiationService.createInstance(UserDataProfileExportState, profile, exportFlags));\n\t\t\tawait this.doExportProfile(userDataProfilesExportState, ProgressLocation.Notification);\n\t\t} finally {\n\t\t\tdisposables.dispose();\n\t\t}\n\t}\n\n\tasync createTroubleshootProfile(): Promise<void> {\n\t\tconst userDataProfilesExportState = this.instantiationService.createInstance(UserDataProfileExportState, this.userDataProfileService.currentProfile, undefined);\n\t\ttry {\n\t\t\tconst profileTemplate = await userDataProfilesExportState.getProfileTemplate(localize('troubleshoot issue', \"Troubleshoot Issue\"), undefined);\n\t\t\tawait this.progressService.withProgress({\n\t\t\t\tlocation: ProgressLocation.Notification,\n\t\t\t\tdelay: 1000,\n\t\t\t\tsticky: true,\n\t\t\t}, async progress => {\n\t\t\t\tconst reportProgress = (message: string) => progress.report({ message: localize('troubleshoot profile progress', \"Setting up Troubleshoot Profile: {0}\", message) });\n\t\t\t\tconst profile = await this.doCreateProfile(profileTemplate, true, false, { useDefaultFlags: this.userDataProfileService.currentProfile.useDefaultFlags }, reportProgress);\n\t\t\t\tif (profile) {\n\t\t\t\t\treportProgress(localize('progress extensions', \"Applying Extensions...\"));\n\t\t\t\t\tawait this.instantiationService.createInstance(ExtensionsResource).copy(this.userDataProfileService.currentProfile, profile, true);\n\n\t\t\t\t\treportProgress(localize('switching profile', \"Switching Profile...\"));\n\t\t\t\t\tawait this.userDataProfileManagementService.switchProfile(profile);\n\t\t\t\t}\n\t\t\t});\n\t\t} finally {\n\t\t\tuserDataProfilesExportState.dispose();\n\t\t}\n\t}\n\n\tprivate async doExportProfile(userDataProfilesExportState: UserDataProfileExportState, location: ProgressLocation | string): Promise<void> {\n\t\tconst profile = await userDataProfilesExportState.getProfileToExport();\n\t\tif (!profile) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst disposables = new DisposableStore();\n\n\t\ttry {\n\t\t\tawait this.progressService.withProgress({\n\t\t\t\tlocation,\n\t\t\t\ttitle: localize('profiles.exporting', \"{0}: Exporting...\", PROFILES_CATEGORY.value),\n\t\t\t}, async progress => {\n\t\t\t\tconst id = await this.pickProfileContentHandler(profile.name);\n\t\t\t\tif (!id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst profileContentHandler = this.profileContentHandlers.get(id);\n\t\t\t\tif (!profileContentHandler) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst saveResult = await profileContentHandler.saveProfile(profile.name.replace('/', '-'), JSON.stringify(profile), CancellationToken.None);\n\t\t\t\tif (!saveResult) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst message = localize('export success', \"Profile '{0}' was exported successfully.\", profile.name);\n\t\t\t\tif (profileContentHandler.extensionId) {\n\t\t\t\t\tconst buttons: IPromptButton<void>[] = [];\n\t\t\t\t\tconst link = this.productService.webUrl ? `${this.productService.webUrl}/${PROFILE_URL_AUTHORITY}/${id}/${saveResult.id}` : toUserDataProfileUri(`/${id}/${saveResult.id}`, this.productService).toString();\n\t\t\t\t\tbuttons.push({\n\t\t\t\t\t\tlabel: localize({ key: 'copy', comment: ['&& denotes a mnemonic'] }, \"&&Copy Link\"),\n\t\t\t\t\t\trun: () => this.clipboardService.writeText(link)\n\t\t\t\t\t});\n\t\t\t\t\tif (this.productService.webUrl) {\n\t\t\t\t\t\tbuttons.push({\n\t\t\t\t\t\t\tlabel: localize({ key: 'open', comment: ['&& denotes a mnemonic'] }, \"&&Open Link\"),\n\t\t\t\t\t\t\trun: async () => {\n\t\t\t\t\t\t\t\tawait this.openerService.open(link);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbuttons.push({\n\t\t\t\t\t\t\tlabel: localize({ key: 'open in', comment: ['&& denotes a mnemonic'] }, \"&&Open in {0}\", profileContentHandler.name),\n\t\t\t\t\t\t\trun: async () => {\n\t\t\t\t\t\t\t\tawait this.openerService.open(saveResult.link.toString());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tawait this.dialogService.prompt({\n\t\t\t\t\t\ttype: Severity.Info,\n\t\t\t\t\t\tmessage,\n\t\t\t\t\t\tbuttons,\n\t\t\t\t\t\tcancelButton: localize('close', \"Close\")\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tawait this.dialogService.info(message);\n\t\t\t\t}\n\t\t\t});\n\t\t} finally {\n\t\t\tdisposables.dispose();\n\t\t}\n\t}\n\n\tasync resolveProfileTemplate(uri: URI, options?: IProfileImportOptions): Promise<IUserDataProfileTemplate | null> {\n\t\tconst profileContent = await this.resolveProfileContent(uri);\n\t\tif (profileContent === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet profileTemplate: Mutable<IUserDataProfileTemplate>;\n\n\t\ttry {\n\t\t\tprofileTemplate = JSON.parse(profileContent);\n\t\t} catch (error) {\n\t\t\tthrow new Error(localize('invalid profile content', \"This profile is not valid.\"));\n\t\t}\n\n\t\tif (!isUserDataProfileTemplate(profileTemplate)) {\n\t\t\tthrow new Error(localize('invalid profile content', \"This profile is not valid.\"));\n\t\t}\n\n\t\tif (options?.name) {\n\t\t\tprofileTemplate.name = options.name;\n\t\t}\n\n\t\tif (options?.icon) {\n\t\t\tprofileTemplate.icon = options.icon;\n\t\t}\n\n\t\tif (options?.resourceTypeFlags?.settings === false) {\n\t\t\tprofileTemplate.settings = undefined;\n\t\t}\n\n\t\tif (options?.resourceTypeFlags?.keybindings === false) {\n\t\t\tprofileTemplate.keybindings = undefined;\n\t\t}\n\n\t\tif (options?.resourceTypeFlags?.snippets === false) {\n\t\t\tprofileTemplate.snippets = undefined;\n\t\t}\n\n\t\tif (options?.resourceTypeFlags?.tasks === false) {\n\t\t\tprofileTemplate.tasks = undefined;\n\t\t}\n\n\t\tif (options?.resourceTypeFlags?.globalState === false) {\n\t\t\tprofileTemplate.globalState = undefined;\n\t\t}\n\n\t\tif (options?.resourceTypeFlags?.extensions === false) {\n\t\t\tprofileTemplate.extensions = undefined;\n\t\t}\n\n\t\treturn profileTemplate;\n\t}\n\n\tprivate async doCreateProfile(profileTemplate: IUserDataProfileTemplate, temporaryProfile: boolean, extensions: boolean, options: IUserDataProfileOptions | undefined, progress: (message: string) => void): Promise<IUserDataProfile | undefined> {\n\t\tconst profile = await this.getProfileToImport(profileTemplate, temporaryProfile, options);\n\t\tif (!profile) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (profileTemplate.settings && !profile.useDefaultFlags?.settings) {\n\t\t\tprogress(localize('progress settings', \"Applying Settings...\"));\n\t\t\tawait this.instantiationService.createInstance(SettingsResource).apply(profileTemplate.settings, profile);\n\t\t}\n\t\tif (profileTemplate.keybindings && !profile.useDefaultFlags?.keybindings) {\n\t\t\tprogress(localize('progress keybindings', \"Applying Keyboard Shortcuts...\"));\n\t\t\tawait this.instantiationService.createInstance(KeybindingsResource).apply(profileTemplate.keybindings, profile);\n\t\t}\n\t\tif (profileTemplate.tasks && !profile.useDefaultFlags?.tasks) {\n\t\t\tprogress(localize('progress tasks', \"Applying Tasks...\"));\n\t\t\tawait this.instantiationService.createInstance(TasksResource).apply(profileTemplate.tasks, profile);\n\t\t}\n\t\tif (profileTemplate.snippets && !profile.useDefaultFlags?.snippets) {\n\t\t\tprogress(localize('progress snippets', \"Applying Snippets...\"));\n\t\t\tawait this.instantiationService.createInstance(SnippetsResource).apply(profileTemplate.snippets, profile);\n\t\t}\n\t\tif (profileTemplate.globalState && !profile.useDefaultFlags?.globalState) {\n\t\t\tprogress(localize('progress global state', \"Applying State...\"));\n\t\t\tawait this.instantiationService.createInstance(GlobalStateResource).apply(profileTemplate.globalState, profile);\n\t\t}\n\t\tif (profileTemplate.extensions && extensions && !profile.useDefaultFlags?.extensions) {\n\t\t\tprogress(localize('progress extensions', \"Applying Extensions...\"));\n\t\t\tawait this.instantiationService.createInstance(ExtensionsResource).apply(profileTemplate.extensions, profile);\n\t\t}\n\n\t\treturn profile;\n\t}\n\n\tprivate async resolveProfileContent(resource: URI): Promise<string | null> {\n\t\tif (await this.fileUserDataProfileContentHandler.canHandle(resource)) {\n\t\t\treturn this.fileUserDataProfileContentHandler.readProfile(resource, CancellationToken.None);\n\t\t}\n\n\t\tif (isProfileURL(resource)) {\n\t\t\tlet handlerId: string, idOrUri: string | URI;\n\t\t\tif (resource.authority === PROFILE_URL_AUTHORITY) {\n\t\t\t\tidOrUri = this.uriIdentityService.extUri.basename(resource);\n\t\t\t\thandlerId = this.uriIdentityService.extUri.basename(this.uriIdentityService.extUri.dirname(resource));\n\t\t\t} else {\n\t\t\t\thandlerId = resource.authority.substring(PROFILE_URL_AUTHORITY_PREFIX.length);\n\t\t\t\tidOrUri = URI.parse(resource.path.substring(1));\n\t\t\t}\n\t\t\tawait this.extensionService.activateByEvent(`onProfile:${handlerId}`);\n\t\t\tconst profileContentHandler = this.profileContentHandlers.get(handlerId);\n\t\t\tif (profileContentHandler) {\n\t\t\t\treturn profileContentHandler.readProfile(idOrUri, CancellationToken.None);\n\t\t\t}\n\t\t}\n\n\t\tawait this.extensionService.activateByEvent('onProfile');\n\t\tfor (const profileContentHandler of this.profileContentHandlers.values()) {\n\t\t\tconst content = await profileContentHandler.readProfile(resource, CancellationToken.None);\n\t\t\tif (content !== null) {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}\n\n\t\tconst context = await this.requestService.request({ type: 'GET', url: resource.toString(true) }, CancellationToken.None);\n\t\tif (context.res.statusCode === 200) {\n\t\t\treturn await asText(context);\n\t\t} else {\n\t\t\tconst message = await asText(context);\n\t\t\tthrow new Error(`Failed to get profile from URL: ${resource.toString()}. Status code: ${context.res.statusCode}. Message: ${message}`);\n\t\t}\n\t}\n\n\tprivate async pickProfileContentHandler(name: string): Promise<string | undefined> {\n\t\tawait this.extensionService.activateByEvent('onProfile');\n\t\tif (this.profileContentHandlers.size === 1) {\n\t\t\treturn this.profileContentHandlers.keys().next().value;\n\t\t}\n\t\tconst options: QuickPickItem[] = [];\n\t\tfor (const [id, profileContentHandler] of this.profileContentHandlers) {\n\t\t\toptions.push({ id, label: profileContentHandler.name, description: profileContentHandler.description });\n\t\t}\n\t\tconst result = await this.quickInputService.pick(options.reverse(),\n\t\t\t{\n\t\t\t\ttitle: localize('select profile content handler', \"Export '{0}' profile as...\", name),\n\t\t\t\thideInput: true\n\t\t\t});\n\t\treturn result?.id;\n\t}\n\n\tprivate async getProfileToImport(profileTemplate: IUserDataProfileTemplate, temp: boolean, options: IUserDataProfileOptions | undefined): Promise<IUserDataProfile | undefined> {\n\t\tconst profileName = profileTemplate.name;\n\t\tconst profile = this.userDataProfilesService.profiles.find(p => p.name === profileName);\n\t\tif (profile) {\n\t\t\tif (temp) {\n\t\t\t\treturn this.userDataProfilesService.createNamedProfile(`${profileName} ${this.getProfileNameIndex(profileName)}`, { ...options, transient: temp });\n\t\t\t}\n\t\t\tconst { confirmed } = await this.dialogService.confirm({\n\t\t\t\ttype: Severity.Info,\n\t\t\t\tmessage: localize('profile already exists', \"Profile with name '{0}' already exists. Do you want to replace its contents?\", profileName),\n\t\t\t\tprimaryButton: localize({ key: 'overwrite', comment: ['&& denotes a mnemonic'] }, \"&&Replace\")\n\t\t\t});\n\t\t\tif (!confirmed) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn profile.isDefault ? profile : this.userDataProfilesService.updateProfile(profile, options);\n\t\t} else {\n\t\t\treturn this.userDataProfilesService.createNamedProfile(profileName, { ...options, transient: temp });\n\t\t}\n\t}\n\n\tprivate getProfileNameIndex(name: string): number {\n\t\tconst nameRegEx = new RegExp(`${escapeRegExpCharacters(name)}\\\\s(\\\\d+)`);\n\t\tlet nameIndex = 0;\n\t\tfor (const profile of this.userDataProfilesService.profiles) {\n\t\t\tconst matches = nameRegEx.exec(profile.name);\n\t\t\tconst index = matches ? parseInt(matches[1]) : 0;\n\t\t\tnameIndex = index > nameIndex ? index : nameIndex;\n\t\t}\n\t\treturn nameIndex + 1;\n\t}\n\n}\n\nclass FileUserDataProfileContentHandler implements IUserDataProfileContentHandler {\n\n\treadonly name = localize('local', \"Local\");\n\treadonly description = localize('file', \"file\");\n\n\tconstructor(\n\t\t@IFileDialogService private readonly fileDialogService: IFileDialogService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@ITextFileService private readonly textFileService: ITextFileService,\n\t) { }\n\n\tasync saveProfile(name: string, content: string, token: CancellationToken): Promise<ISaveProfileResult | null> {\n\t\tconst link = await this.fileDialogService.showSaveDialog({\n\t\t\ttitle: localize('export profile dialog', \"Save Profile\"),\n\t\t\tfilters: PROFILE_FILTER,\n\t\t\tdefaultUri: this.uriIdentityService.extUri.joinPath(await this.fileDialogService.defaultFilePath(), `${name}.${PROFILE_EXTENSION}`),\n\t\t});\n\t\tif (!link) {\n\t\t\treturn null;\n\t\t}\n\t\tawait this.textFileService.create([{ resource: link, value: content, options: { overwrite: true } }]);\n\t\treturn { link, id: link.toString() };\n\t}\n\n\tasync canHandle(uri: URI): Promise<boolean> {\n\t\treturn uri.scheme !== Schemas.http && uri.scheme !== Schemas.https && uri.scheme !== this.productService.urlProtocol && await this.fileService.canHandleResource(uri);\n\t}\n\n\tasync readProfile(uri: URI, token: CancellationToken): Promise<string | null> {\n\t\tif (await this.canHandle(uri)) {\n\t\t\treturn (await this.fileService.readFile(uri, undefined, token)).value.toString();\n\t\t}\n\t\treturn null;\n\t}\n\n\tasync selectProfile(): Promise<URI | null> {\n\t\tconst profileLocation = await this.fileDialogService.showOpenDialog({\n\t\t\tcanSelectFolders: false,\n\t\t\tcanSelectFiles: true,\n\t\t\tcanSelectMany: false,\n\t\t\tfilters: PROFILE_FILTER,\n\t\t\ttitle: localize('select profile', \"Select Profile\"),\n\t\t});\n\t\treturn profileLocation ? profileLocation[0] : null;\n\t}\n\n}\n\nconst USER_DATA_PROFILE_EXPORT_SCHEME = 'userdataprofileexport';\nconst USER_DATA_PROFILE_EXPORT_PREVIEW_SCHEME = 'userdataprofileexportpreview';\n\nabstract class UserDataProfileImportExportState extends Disposable implements ITreeViewDataProvider {\n\n\tprivate readonly _onDidChangeRoots = this._register(new Emitter<void>());\n\treadonly onDidChangeRoots = this._onDidChangeRoots.event;\n\n\tconstructor(\n\t\t@IQuickInputService protected readonly quickInputService: IQuickInputService,\n\t) {\n\t\tsuper();\n\t}\n\n\tasync getChildren(element?: ITreeItem): Promise<ITreeItem[] | undefined> {\n\t\tif (element) {\n\t\t\tconst children = await (<IProfileResourceTreeItem>element).getChildren();\n\t\t\tif (children) {\n\t\t\t\tfor (const child of children) {\n\t\t\t\t\tif (child.parent.checkbox && child.checkbox) {\n\t\t\t\t\t\tchild.checkbox.isChecked = child.parent.checkbox.isChecked && child.checkbox.isChecked;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn children;\n\t\t} else {\n\t\t\tthis.rootsPromise = undefined;\n\t\t\tthis._onDidChangeRoots.fire();\n\t\t\treturn this.getRoots();\n\t\t}\n\t}\n\n\tprivate roots: IProfileResourceTreeItem[] = [];\n\tprivate rootsPromise: Promise<IProfileResourceTreeItem[]> | undefined;\n\tgetRoots(): Promise<IProfileResourceTreeItem[]> {\n\t\tif (!this.rootsPromise) {\n\t\t\tthis.rootsPromise = (async () => {\n\t\t\t\tthis.roots = await this.fetchRoots();\n\t\t\t\tfor (const root of this.roots) {\n\t\t\t\t\tconst labelText = isMarkdownString(root.label.label) ? root.label.label.value : root.label.label;\n\t\t\t\t\troot.checkbox = {\n\t\t\t\t\t\tisChecked: !root.isFromDefaultProfile(),\n\t\t\t\t\t\ttooltip: localize('select', \"Select {0}\", labelText),\n\t\t\t\t\t\taccessibilityInformation: {\n\t\t\t\t\t\t\tlabel: localize('select', \"Select {0}\", labelText),\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tif (root.isFromDefaultProfile()) {\n\t\t\t\t\t\troot.description = localize('from default', \"From Default Profile\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this.roots;\n\t\t\t})();\n\t\t}\n\t\treturn this.rootsPromise;\n\t}\n\n\tisEnabled(resourceType?: ProfileResourceType): boolean {\n\t\tif (resourceType !== undefined) {\n\t\t\treturn this.roots.some(root => root.type === resourceType && this.isSelected(root));\n\t\t}\n\t\treturn this.roots.some(root => this.isSelected(root));\n\t}\n\n\tasync getProfileTemplate(name: string, icon: string | undefined): Promise<IUserDataProfileTemplate> {\n\t\tconst roots = await this.getRoots();\n\t\tlet settings: string | undefined;\n\t\tlet keybindings: string | undefined;\n\t\tlet tasks: string | undefined;\n\t\tlet snippets: string | undefined;\n\t\tlet extensions: string | undefined;\n\t\tlet globalState: string | undefined;\n\t\tfor (const root of roots) {\n\t\t\tif (!this.isSelected(root)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (root instanceof SettingsResourceTreeItem) {\n\t\t\t\tsettings = await root.getContent();\n\t\t\t} else if (root instanceof KeybindingsResourceTreeItem) {\n\t\t\t\tkeybindings = await root.getContent();\n\t\t\t} else if (root instanceof TasksResourceTreeItem) {\n\t\t\t\ttasks = await root.getContent();\n\t\t\t} else if (root instanceof SnippetsResourceTreeItem) {\n\t\t\t\tsnippets = await root.getContent();\n\t\t\t} else if (root instanceof ExtensionsResourceTreeItem) {\n\t\t\t\textensions = await root.getContent();\n\t\t\t} else if (root instanceof GlobalStateResourceTreeItem) {\n\t\t\t\tglobalState = await root.getContent();\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tname,\n\t\t\ticon,\n\t\t\tsettings,\n\t\t\tkeybindings,\n\t\t\ttasks,\n\t\t\tsnippets,\n\t\t\textensions,\n\t\t\tglobalState\n\t\t};\n\t}\n\n\tprivate isSelected(treeItem: IProfileResourceTreeItem): boolean {\n\t\tif (treeItem.checkbox) {\n\t\t\treturn treeItem.checkbox.isChecked || !!treeItem.children?.some(child => child.checkbox?.isChecked);\n\t\t}\n\t\treturn true;\n\t}\n\n\tprotected abstract fetchRoots(): Promise<IProfileResourceTreeItem[]>;\n}\n\nclass UserDataProfileExportState extends UserDataProfileImportExportState {\n\n\tprivate readonly disposables = this._register(new DisposableStore());\n\n\tconstructor(\n\t\treadonly profile: IUserDataProfile,\n\t\tprivate readonly exportFlags: ProfileResourceTypeFlags | undefined,\n\t\t@IQuickInputService quickInputService: IQuickInputService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) {\n\t\tsuper(quickInputService);\n\t}\n\n\tprotected async fetchRoots(): Promise<IProfileResourceTreeItem[]> {\n\t\tthis.disposables.clear();\n\t\tthis.disposables.add(this.fileService.registerProvider(USER_DATA_PROFILE_EXPORT_SCHEME, this._register(new InMemoryFileSystemProvider())));\n\t\tconst previewFileSystemProvider = this._register(new InMemoryFileSystemProvider());\n\t\tthis.disposables.add(this.fileService.registerProvider(USER_DATA_PROFILE_EXPORT_PREVIEW_SCHEME, previewFileSystemProvider));\n\t\tconst roots: IProfileResourceTreeItem[] = [];\n\t\tconst exportPreviewProfle = this.createExportPreviewProfile(this.profile);\n\n\t\tif (this.exportFlags?.settings ?? true) {\n\t\t\tconst settingsResource = this.instantiationService.createInstance(SettingsResource);\n\t\t\tconst settingsContent = await settingsResource.getContent(this.profile);\n\t\t\tawait settingsResource.apply(settingsContent, exportPreviewProfle);\n\t\t\tconst settingsResourceTreeItem = this.instantiationService.createInstance(SettingsResourceTreeItem, exportPreviewProfle);\n\t\t\tif (await settingsResourceTreeItem.hasContent()) {\n\t\t\t\troots.push(settingsResourceTreeItem);\n\t\t\t}\n\t\t}\n\n\t\tif (this.exportFlags?.keybindings ?? true) {\n\t\t\tconst keybindingsResource = this.instantiationService.createInstance(KeybindingsResource);\n\t\t\tconst keybindingsContent = await keybindingsResource.getContent(this.profile);\n\t\t\tawait keybindingsResource.apply(keybindingsContent, exportPreviewProfle);\n\t\t\tconst keybindingsResourceTreeItem = this.instantiationService.createInstance(KeybindingsResourceTreeItem, exportPreviewProfle);\n\t\t\tif (await keybindingsResourceTreeItem.hasContent()) {\n\t\t\t\troots.push(keybindingsResourceTreeItem);\n\t\t\t}\n\t\t}\n\n\t\tif (this.exportFlags?.snippets ?? true) {\n\t\t\tconst snippetsResource = this.instantiationService.createInstance(SnippetsResource);\n\t\t\tconst snippetsContent = await snippetsResource.getContent(this.profile);\n\t\t\tawait snippetsResource.apply(snippetsContent, exportPreviewProfle);\n\t\t\tconst snippetsResourceTreeItem = this.instantiationService.createInstance(SnippetsResourceTreeItem, exportPreviewProfle);\n\t\t\tif (await snippetsResourceTreeItem.hasContent()) {\n\t\t\t\troots.push(snippetsResourceTreeItem);\n\t\t\t}\n\t\t}\n\n\t\tif (this.exportFlags?.tasks ?? true) {\n\t\t\tconst tasksResource = this.instantiationService.createInstance(TasksResource);\n\t\t\tconst tasksContent = await tasksResource.getContent(this.profile);\n\t\t\tawait tasksResource.apply(tasksContent, exportPreviewProfle);\n\t\t\tconst tasksResourceTreeItem = this.instantiationService.createInstance(TasksResourceTreeItem, exportPreviewProfle);\n\t\t\tif (await tasksResourceTreeItem.hasContent()) {\n\t\t\t\troots.push(tasksResourceTreeItem);\n\t\t\t}\n\t\t}\n\n\t\tif (this.exportFlags?.globalState ?? true) {\n\t\t\tconst globalStateResource = joinPath(exportPreviewProfle.globalStorageHome, 'globalState.json').with({ scheme: USER_DATA_PROFILE_EXPORT_PREVIEW_SCHEME });\n\t\t\tconst globalStateResourceTreeItem = this.instantiationService.createInstance(GlobalStateResourceExportTreeItem, exportPreviewProfle, globalStateResource);\n\t\t\tconst content = await globalStateResourceTreeItem.getContent();\n\t\t\tif (content) {\n\t\t\t\tawait this.fileService.writeFile(globalStateResource, VSBuffer.fromString(JSON.stringify(JSON.parse(content), null, '\\t')));\n\t\t\t\troots.push(globalStateResourceTreeItem);\n\t\t\t}\n\t\t}\n\n\t\tif (this.exportFlags?.extensions ?? true) {\n\t\t\tconst extensionsResourceTreeItem = this.instantiationService.createInstance(ExtensionsResourceExportTreeItem, exportPreviewProfle);\n\t\t\tif (await extensionsResourceTreeItem.hasContent()) {\n\t\t\t\troots.push(extensionsResourceTreeItem);\n\t\t\t}\n\t\t}\n\n\t\tpreviewFileSystemProvider.setReadOnly(true);\n\n\t\treturn roots;\n\t}\n\n\tprivate createExportPreviewProfile(profile: IUserDataProfile): IUserDataProfile {\n\t\treturn {\n\t\t\tid: profile.id,\n\t\t\tname: profile.name,\n\t\t\tlocation: profile.location,\n\t\t\tisDefault: profile.isDefault,\n\t\t\ticon: profile.icon,\n\t\t\tglobalStorageHome: profile.globalStorageHome,\n\t\t\tsettingsResource: profile.settingsResource.with({ scheme: USER_DATA_PROFILE_EXPORT_SCHEME }),\n\t\t\tkeybindingsResource: profile.keybindingsResource.with({ scheme: USER_DATA_PROFILE_EXPORT_SCHEME }),\n\t\t\ttasksResource: profile.tasksResource.with({ scheme: USER_DATA_PROFILE_EXPORT_SCHEME }),\n\t\t\tmcpResource: profile.mcpResource.with({ scheme: USER_DATA_PROFILE_EXPORT_SCHEME }),\n\t\t\tsnippetsHome: profile.snippetsHome.with({ scheme: USER_DATA_PROFILE_EXPORT_SCHEME }),\n\t\t\tpromptsHome: profile.promptsHome.with({ scheme: USER_DATA_PROFILE_EXPORT_SCHEME }),\n\t\t\textensionsResource: profile.extensionsResource,\n\t\t\tcacheHome: profile.cacheHome,\n\t\t\tuseDefaultFlags: profile.useDefaultFlags,\n\t\t\tisTransient: profile.isTransient\n\t\t};\n\t}\n\n\tasync getProfileToExport(): Promise<IUserDataProfileTemplate | null> {\n\t\tlet name: string | undefined = this.profile.name;\n\t\tif (this.profile.isDefault) {\n\t\t\tname = await this.quickInputService.input({\n\t\t\t\tplaceHolder: localize('export profile name', \"Name the profile\"),\n\t\t\t\ttitle: localize('export profile title', \"Export Profile\"),\n\t\t\t\tasync validateInput(input) {\n\t\t\t\t\tif (!input.trim()) {\n\t\t\t\t\t\treturn localize('profile name required', \"Profile name must be provided.\");\n\t\t\t\t\t}\n\t\t\t\t\treturn undefined;\n\t\t\t\t},\n\t\t\t});\n\t\t\tif (!name) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\n\t\treturn super.getProfileTemplate(name, this.profile.icon);\n\t}\n\n}\n\nregisterSingleton(IUserDataProfileImportExportService, UserDataProfileImportExportService, InstantiationType.Delayed);\n"]}