{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/languageStatus/common/languageStatusService.ts","vs/workbench/services/languageStatus/common/languageStatusService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAGhG,OAAO,EAAE,KAAK,EAAE,MAAM,kCAAkC,CAAC;AAGzD,OAAO,EAAE,OAAO,EAAE,MAAM,oCAAoC,CAAC;AAG7D,OAAO,EAAE,uBAAuB,EAAE,MAAM,sDAAsD,CAAC;AAG/F,OAAO,EAAqB,iBAAiB,EAAE,MAAM,yDAAyD,CAAC;AAC/G,OAAO,EAAE,eAAe,EAAE,MAAM,4DAA4D,CAAC;AAmB7F,MAAM,CAAC,MAAM,sBAAsB,GAAG,eAAe,CAAyB,wBAAwB,CAAC,CAAC;AAcxG,MAAM,yBAAyB;IAA/B;QAIkB,cAAS,GAAG,IAAI,uBAAuB,EAAmB,CAAC;QAEnE,gBAAW,GAAG,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,GAAG,EAAE,CAAC,SAAS,CAAC,CAAC;IAkB/E,CAAC;IAhBA,SAAS,CAAC,MAAuB;QAChC,OAAO,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;IACzD,CAAC;IAED,iBAAiB,CAAC,KAAiB;QAClC,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;YAClD,IAAI,GAAG,GAAG,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,QAAQ,CAAC;YAClC,IAAI,GAAG,KAAK,CAAC,EAAE,CAAC;gBACf,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC;YACnC,CAAC;YACD,IAAI,GAAG,KAAK,CAAC,EAAE,CAAC;gBACf,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;YAC3B,CAAC;YACD,OAAO,GAAG,CAAC;QACZ,CAAC,CAAC,CAAC;IACJ,CAAC;CACD;AAED,iBAAiB,CAAC,sBAAsB,EAAE,yBAAyB,oCAA4B,CAAC","file":"languageStatusService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { IDisposable } from '../../../../base/common/lifecycle.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { compare } from '../../../../base/common/strings.js';\nimport { ITextModel } from '../../../../editor/common/model.js';\nimport { Command } from '../../../../editor/common/languages.js';\nimport { LanguageFeatureRegistry } from '../../../../editor/common/languageFeatureRegistry.js';\nimport { LanguageSelector } from '../../../../editor/common/languageSelector.js';\nimport { IAccessibilityInformation } from '../../../../platform/accessibility/common/accessibility.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\n\nexport interface ILanguageStatus {\n\treadonly id: string;\n\treadonly name: string;\n\treadonly selector: LanguageSelector;\n\treadonly severity: Severity;\n\treadonly label: string | { value: string; shortValue: string };\n\treadonly detail: string;\n\treadonly busy: boolean;\n\treadonly source: string;\n\treadonly command: Command | undefined;\n\treadonly accessibilityInfo: IAccessibilityInformation | undefined;\n}\n\nexport interface ILanguageStatusProvider {\n\tprovideLanguageStatus(langId: string, token: CancellationToken): Promise<ILanguageStatus | undefined>;\n}\n\nexport const ILanguageStatusService = createDecorator<ILanguageStatusService>('ILanguageStatusService');\n\nexport interface ILanguageStatusService {\n\n\t_serviceBrand: undefined;\n\n\treadonly onDidChange: Event<void>;\n\n\taddStatus(status: ILanguageStatus): IDisposable;\n\n\tgetLanguageStatus(model: ITextModel): ILanguageStatus[];\n}\n\n\nclass LanguageStatusServiceImpl implements ILanguageStatusService {\n\n\tdeclare _serviceBrand: undefined;\n\n\tprivate readonly _provider = new LanguageFeatureRegistry<ILanguageStatus>();\n\n\treadonly onDidChange = Event.map(this._provider.onDidChange, () => undefined);\n\n\taddStatus(status: ILanguageStatus): IDisposable {\n\t\treturn this._provider.register(status.selector, status);\n\t}\n\n\tgetLanguageStatus(model: ITextModel): ILanguageStatus[] {\n\t\treturn this._provider.ordered(model).sort((a, b) => {\n\t\t\tlet res = b.severity - a.severity;\n\t\t\tif (res === 0) {\n\t\t\t\tres = compare(a.source, b.source);\n\t\t\t}\n\t\t\tif (res === 0) {\n\t\t\t\tres = compare(a.id, b.id);\n\t\t\t}\n\t\t\treturn res;\n\t\t});\n\t}\n}\n\nregisterSingleton(ILanguageStatusService, LanguageStatusServiceImpl, InstantiationType.Delayed);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { IDisposable } from '../../../../base/common/lifecycle.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { compare } from '../../../../base/common/strings.js';\nimport { ITextModel } from '../../../../editor/common/model.js';\nimport { Command } from '../../../../editor/common/languages.js';\nimport { LanguageFeatureRegistry } from '../../../../editor/common/languageFeatureRegistry.js';\nimport { LanguageSelector } from '../../../../editor/common/languageSelector.js';\nimport { IAccessibilityInformation } from '../../../../platform/accessibility/common/accessibility.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\n\nexport interface ILanguageStatus {\n\treadonly id: string;\n\treadonly name: string;\n\treadonly selector: LanguageSelector;\n\treadonly severity: Severity;\n\treadonly label: string | { value: string; shortValue: string };\n\treadonly detail: string;\n\treadonly busy: boolean;\n\treadonly source: string;\n\treadonly command: Command | undefined;\n\treadonly accessibilityInfo: IAccessibilityInformation | undefined;\n}\n\nexport interface ILanguageStatusProvider {\n\tprovideLanguageStatus(langId: string, token: CancellationToken): Promise<ILanguageStatus | undefined>;\n}\n\nexport const ILanguageStatusService = createDecorator<ILanguageStatusService>('ILanguageStatusService');\n\nexport interface ILanguageStatusService {\n\n\t_serviceBrand: undefined;\n\n\treadonly onDidChange: Event<void>;\n\n\taddStatus(status: ILanguageStatus): IDisposable;\n\n\tgetLanguageStatus(model: ITextModel): ILanguageStatus[];\n}\n\n\nclass LanguageStatusServiceImpl implements ILanguageStatusService {\n\n\tdeclare _serviceBrand: undefined;\n\n\tprivate readonly _provider = new LanguageFeatureRegistry<ILanguageStatus>();\n\n\treadonly onDidChange = Event.map(this._provider.onDidChange, () => undefined);\n\n\taddStatus(status: ILanguageStatus): IDisposable {\n\t\treturn this._provider.register(status.selector, status);\n\t}\n\n\tgetLanguageStatus(model: ITextModel): ILanguageStatus[] {\n\t\treturn this._provider.ordered(model).sort((a, b) => {\n\t\t\tlet res = b.severity - a.severity;\n\t\t\tif (res === 0) {\n\t\t\t\tres = compare(a.source, b.source);\n\t\t\t}\n\t\t\tif (res === 0) {\n\t\t\t\tres = compare(a.id, b.id);\n\t\t\t}\n\t\t\treturn res;\n\t\t});\n\t}\n}\n\nregisterSingleton(ILanguageStatusService, LanguageStatusServiceImpl, InstantiationType.Delayed);\n"]}