{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/extensions/test/browser/extensionService.test.ts","vs/workbench/services/extensions/test/browser/extensionService.test.ts"],"names":[],"mappings":"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","file":"extensionService.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Event } from '../../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { TestDialogService } from '../../../../../platform/dialogs/test/common/testDialogService.js';\nimport { ExtensionKind, IEnvironmentService } from '../../../../../platform/environment/common/environment.js';\nimport { ExtensionIdentifier, IExtension, IExtensionDescription } from '../../../../../platform/extensions/common/extensions.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { TestInstantiationService, createServices } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ILogService, NullLogService } from '../../../../../platform/log/common/log.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { TestNotificationService } from '../../../../../platform/notification/test/common/testNotificationService.js';\nimport product from '../../../../../platform/product/common/product.js';\nimport { IProductService } from '../../../../../platform/product/common/productService.js';\nimport { RemoteAuthorityResolverService } from '../../../../../platform/remote/browser/remoteAuthorityResolverService.js';\nimport { IRemoteAuthorityResolverService, ResolverResult } from '../../../../../platform/remote/common/remoteAuthorityResolver.js';\nimport { IRemoteExtensionsScannerService } from '../../../../../platform/remote/common/remoteExtensionsScanner.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { NullTelemetryService } from '../../../../../platform/telemetry/common/telemetryUtils.js';\nimport { IUriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { UriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentityService.js';\nimport { IUserDataProfilesService, UserDataProfilesService } from '../../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { IWorkspaceTrustEnablementService } from '../../../../../platform/workspace/common/workspaceTrust.js';\nimport { IWorkbenchEnvironmentService } from '../../../environment/common/environmentService.js';\nimport { IWebExtensionsScannerService, IWorkbenchExtensionEnablementService, IWorkbenchExtensionManagementService } from '../../../extensionManagement/common/extensionManagement.js';\nimport { BrowserExtensionHostKindPicker } from '../../browser/extensionService.js';\nimport { AbstractExtensionService, IExtensionHostFactory, ResolvedExtensions } from '../../common/abstractExtensionService.js';\nimport { ExtensionHostKind, ExtensionRunningPreference } from '../../common/extensionHostKind.js';\nimport { IExtensionHostManager } from '../../common/extensionHostManagers.js';\nimport { ExtensionManifestPropertiesService, IExtensionManifestPropertiesService } from '../../common/extensionManifestPropertiesService.js';\nimport { ExtensionRunningLocation } from '../../common/extensionRunningLocation.js';\nimport { ExtensionRunningLocationTracker } from '../../common/extensionRunningLocationTracker.js';\nimport { IExtensionHost, IExtensionService } from '../../common/extensions.js';\nimport { ExtensionsProposedApi } from '../../common/extensionsProposedApi.js';\nimport { ILifecycleService } from '../../../lifecycle/common/lifecycle.js';\nimport { IRemoteAgentService } from '../../../remote/common/remoteAgentService.js';\nimport { IUserDataProfileService } from '../../../userDataProfile/common/userDataProfile.js';\nimport { WorkspaceTrustEnablementService } from '../../../workspaces/common/workspaceTrust.js';\nimport { TestEnvironmentService, TestLifecycleService, TestRemoteAgentService, TestRemoteExtensionsScannerService, TestWebExtensionsScannerService, TestWorkbenchExtensionEnablementService, TestWorkbenchExtensionManagementService } from '../../../../test/browser/workbenchTestServices.js';\nimport { TestContextService, TestFileService, TestUserDataProfileService } from '../../../../test/common/workbenchTestServices.js';\n\nsuite('BrowserExtensionService', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('pickRunningLocation', () => {\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation([], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation([], false, true, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation([], true, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation([], true, true, ExtensionRunningPreference.None), null);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui'], true, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace'], true, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace'], true, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui'], true, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web', 'workspace'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web', 'workspace'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web', 'workspace'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web', 'workspace'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace', 'web'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace', 'web'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace', 'web'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace', 'web'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui', 'workspace'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui', 'workspace'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui', 'workspace'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui', 'workspace'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace', 'ui'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace', 'ui'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace', 'ui'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace', 'ui'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui', 'web'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui', 'web'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui', 'web'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui', 'web'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web', 'ui'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web', 'ui'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web', 'ui'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web', 'ui'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t});\n});\n\nsuite('ExtensionService', () => {\n\n\tclass MyTestExtensionService extends AbstractExtensionService {\n\n\t\tconstructor(\n\t\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t\t@INotificationService notificationService: INotificationService,\n\t\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t\t@IWorkbenchExtensionEnablementService extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t\t@IFileService fileService: IFileService,\n\t\t\t@IProductService productService: IProductService,\n\t\t\t@IWorkbenchExtensionManagementService extensionManagementService: IWorkbenchExtensionManagementService,\n\t\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t\t@IExtensionManifestPropertiesService extensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t\t\t@ILogService logService: ILogService,\n\t\t\t@IRemoteAgentService remoteAgentService: IRemoteAgentService,\n\t\t\t@IRemoteExtensionsScannerService remoteExtensionsScannerService: IRemoteExtensionsScannerService,\n\t\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t\t\t@IRemoteAuthorityResolverService remoteAuthorityResolverService: IRemoteAuthorityResolverService,\n\t\t) {\n\t\t\tconst extensionsProposedApi = instantiationService.createInstance(ExtensionsProposedApi);\n\t\t\tconst extensionHostFactory = new class implements IExtensionHostFactory {\n\t\t\t\tcreateExtensionHost(runningLocations: ExtensionRunningLocationTracker, runningLocation: ExtensionRunningLocation, isInitialStart: boolean): IExtensionHost | null {\n\t\t\t\t\treturn new class extends mock<IExtensionHost>() {\n\t\t\t\t\t\toverride runningLocation = runningLocation;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t};\n\t\t\tsuper(\n\t\t\t\t{ allowRemoteExtensionsInLocalWebWorker: false, hasLocalProcess: true },\n\t\t\t\textensionsProposedApi,\n\t\t\t\textensionHostFactory,\n\t\t\t\tnull!,\n\t\t\t\tinstantiationService,\n\t\t\t\tnotificationService,\n\t\t\t\tenvironmentService,\n\t\t\t\ttelemetryService,\n\t\t\t\textensionEnablementService,\n\t\t\t\tfileService,\n\t\t\t\tproductService,\n\t\t\t\textensionManagementService,\n\t\t\t\tcontextService,\n\t\t\t\tconfigurationService,\n\t\t\t\textensionManifestPropertiesService,\n\t\t\t\tlogService,\n\t\t\t\tremoteAgentService,\n\t\t\t\tremoteExtensionsScannerService,\n\t\t\t\tlifecycleService,\n\t\t\t\tremoteAuthorityResolverService,\n\t\t\t\tnew TestDialogService()\n\t\t\t);\n\t\t}\n\n\t\tprivate _extHostId = 0;\n\t\tpublic readonly order: string[] = [];\n\t\tprotected _pickExtensionHostKind(extensionId: ExtensionIdentifier, extensionKinds: ExtensionKind[], isInstalledLocally: boolean, isInstalledRemotely: boolean, preference: ExtensionRunningPreference): ExtensionHostKind | null {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\t\tprotected override _doCreateExtensionHostManager(extensionHost: IExtensionHost, initialActivationEvents: string[]): IExtensionHostManager {\n\t\t\tconst order = this.order;\n\t\t\tconst extensionHostId = ++this._extHostId;\n\t\t\torder.push(`create ${extensionHostId}`);\n\t\t\treturn new class extends mock<IExtensionHostManager>() {\n\t\t\t\toverride onDidExit = Event.None;\n\t\t\t\toverride onDidChangeResponsiveState = Event.None;\n\t\t\t\toverride disconnect() {\n\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t}\n\t\t\t\toverride start(): Promise<void> {\n\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t}\n\t\t\t\toverride dispose(): void {\n\t\t\t\t\torder.push(`dispose ${extensionHostId}`);\n\t\t\t\t}\n\t\t\t\toverride representsRunningLocation(runningLocation: ExtensionRunningLocation): boolean {\n\t\t\t\t\treturn extensionHost.runningLocation.equals(runningLocation);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tprotected _resolveExtensions(): AsyncIterable<ResolvedExtensions> {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\t\tprotected _scanSingleExtension(extension: IExtension): Promise<IExtensionDescription | null> {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\t\tprotected _onExtensionHostExit(code: number): Promise<void> {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\t\tprotected _resolveAuthority(remoteAuthority: string): Promise<ResolverResult> {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\t}\n\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\tlet extService: MyTestExtensionService;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst testProductService = { _serviceBrand: undefined, ...product };\n\t\tdisposables.add(instantiationService = createServices(disposables, [\n\t\t\t// custom\n\t\t\t[IExtensionService, MyTestExtensionService],\n\t\t\t// default\n\t\t\t[ILifecycleService, TestLifecycleService],\n\t\t\t[IWorkbenchExtensionManagementService, TestWorkbenchExtensionManagementService],\n\t\t\t[INotificationService, TestNotificationService],\n\t\t\t[IRemoteAgentService, TestRemoteAgentService],\n\t\t\t[ILogService, NullLogService],\n\t\t\t[IWebExtensionsScannerService, TestWebExtensionsScannerService],\n\t\t\t[IExtensionManifestPropertiesService, ExtensionManifestPropertiesService],\n\t\t\t[IConfigurationService, TestConfigurationService],\n\t\t\t[IWorkspaceContextService, TestContextService],\n\t\t\t[IProductService, testProductService],\n\t\t\t[IFileService, TestFileService],\n\t\t\t[IWorkbenchExtensionEnablementService, TestWorkbenchExtensionEnablementService],\n\t\t\t[ITelemetryService, NullTelemetryService],\n\t\t\t[IEnvironmentService, TestEnvironmentService],\n\t\t\t[IWorkspaceTrustEnablementService, WorkspaceTrustEnablementService],\n\t\t\t[IUserDataProfilesService, UserDataProfilesService],\n\t\t\t[IUserDataProfileService, TestUserDataProfileService],\n\t\t\t[IUriIdentityService, UriIdentityService],\n\t\t\t[IRemoteExtensionsScannerService, TestRemoteExtensionsScannerService],\n\t\t\t[IRemoteAuthorityResolverService, new RemoteAuthorityResolverService(false, undefined, undefined, undefined, testProductService, new NullLogService())]\n\t\t]));\n\t\textService = <MyTestExtensionService>instantiationService.get(IExtensionService);\n\t});\n\n\tteardown(async () => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('issue #152204: Remote extension host not disposed after closing vscode client', async () => {\n\t\tawait extService.startExtensionHosts();\n\t\tawait extService.stopExtensionHosts('foo');\n\t\tassert.deepStrictEqual(extService.order, (['create 1', 'create 2', 'create 3', 'dispose 3', 'dispose 2', 'dispose 1']));\n\t});\n\n\ttest('Extension host disposed when awaited', async () => {\n\t\tawait extService.startExtensionHosts();\n\t\tawait extService.stopExtensionHosts('foo');\n\t\tassert.deepStrictEqual(extService.order, (['create 1', 'create 2', 'create 3', 'dispose 3', 'dispose 2', 'dispose 1']));\n\t});\n\n\ttest('Extension host not disposed when vetoed (sync)', async () => {\n\t\tawait extService.startExtensionHosts();\n\n\t\tdisposables.add(extService.onWillStop(e => e.veto(true, 'test 1')));\n\t\tdisposables.add(extService.onWillStop(e => e.veto(false, 'test 2')));\n\n\t\tawait extService.stopExtensionHosts('foo');\n\t\tassert.deepStrictEqual(extService.order, (['create 1', 'create 2', 'create 3']));\n\t});\n\n\ttest('Extension host not disposed when vetoed (async)', async () => {\n\t\tawait extService.startExtensionHosts();\n\n\t\tdisposables.add(extService.onWillStop(e => e.veto(false, 'test 1')));\n\t\tdisposables.add(extService.onWillStop(e => e.veto(Promise.resolve(true), 'test 2')));\n\t\tdisposables.add(extService.onWillStop(e => e.veto(Promise.resolve(false), 'test 3')));\n\n\t\tawait extService.stopExtensionHosts('foo');\n\t\tassert.deepStrictEqual(extService.order, (['create 1', 'create 2', 'create 3']));\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Event } from '../../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { TestDialogService } from '../../../../../platform/dialogs/test/common/testDialogService.js';\nimport { ExtensionKind, IEnvironmentService } from '../../../../../platform/environment/common/environment.js';\nimport { ExtensionIdentifier, IExtension, IExtensionDescription } from '../../../../../platform/extensions/common/extensions.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { TestInstantiationService, createServices } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ILogService, NullLogService } from '../../../../../platform/log/common/log.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { TestNotificationService } from '../../../../../platform/notification/test/common/testNotificationService.js';\nimport product from '../../../../../platform/product/common/product.js';\nimport { IProductService } from '../../../../../platform/product/common/productService.js';\nimport { RemoteAuthorityResolverService } from '../../../../../platform/remote/browser/remoteAuthorityResolverService.js';\nimport { IRemoteAuthorityResolverService, ResolverResult } from '../../../../../platform/remote/common/remoteAuthorityResolver.js';\nimport { IRemoteExtensionsScannerService } from '../../../../../platform/remote/common/remoteExtensionsScanner.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { NullTelemetryService } from '../../../../../platform/telemetry/common/telemetryUtils.js';\nimport { IUriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { UriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentityService.js';\nimport { IUserDataProfilesService, UserDataProfilesService } from '../../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { IWorkspaceTrustEnablementService } from '../../../../../platform/workspace/common/workspaceTrust.js';\nimport { IWorkbenchEnvironmentService } from '../../../environment/common/environmentService.js';\nimport { IWebExtensionsScannerService, IWorkbenchExtensionEnablementService, IWorkbenchExtensionManagementService } from '../../../extensionManagement/common/extensionManagement.js';\nimport { BrowserExtensionHostKindPicker } from '../../browser/extensionService.js';\nimport { AbstractExtensionService, IExtensionHostFactory, ResolvedExtensions } from '../../common/abstractExtensionService.js';\nimport { ExtensionHostKind, ExtensionRunningPreference } from '../../common/extensionHostKind.js';\nimport { IExtensionHostManager } from '../../common/extensionHostManagers.js';\nimport { ExtensionManifestPropertiesService, IExtensionManifestPropertiesService } from '../../common/extensionManifestPropertiesService.js';\nimport { ExtensionRunningLocation } from '../../common/extensionRunningLocation.js';\nimport { ExtensionRunningLocationTracker } from '../../common/extensionRunningLocationTracker.js';\nimport { IExtensionHost, IExtensionService } from '../../common/extensions.js';\nimport { ExtensionsProposedApi } from '../../common/extensionsProposedApi.js';\nimport { ILifecycleService } from '../../../lifecycle/common/lifecycle.js';\nimport { IRemoteAgentService } from '../../../remote/common/remoteAgentService.js';\nimport { IUserDataProfileService } from '../../../userDataProfile/common/userDataProfile.js';\nimport { WorkspaceTrustEnablementService } from '../../../workspaces/common/workspaceTrust.js';\nimport { TestEnvironmentService, TestLifecycleService, TestRemoteAgentService, TestRemoteExtensionsScannerService, TestWebExtensionsScannerService, TestWorkbenchExtensionEnablementService, TestWorkbenchExtensionManagementService } from '../../../../test/browser/workbenchTestServices.js';\nimport { TestContextService, TestFileService, TestUserDataProfileService } from '../../../../test/common/workbenchTestServices.js';\n\nsuite('BrowserExtensionService', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('pickRunningLocation', () => {\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation([], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation([], false, true, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation([], true, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation([], true, true, ExtensionRunningPreference.None), null);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui'], true, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace'], true, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace'], true, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui'], true, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web', 'workspace'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web', 'workspace'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web', 'workspace'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'web', 'workspace'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace', 'web'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace', 'web'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace', 'web'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['ui', 'workspace', 'web'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui', 'workspace'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui', 'workspace'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui', 'workspace'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'ui', 'workspace'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace', 'ui'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace', 'ui'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace', 'ui'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['web', 'workspace', 'ui'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui', 'web'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui', 'web'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui', 'web'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'ui', 'web'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web', 'ui'], false, false, ExtensionRunningPreference.None), null);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web', 'ui'], false, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web', 'ui'], true, false, ExtensionRunningPreference.None), ExtensionHostKind.LocalWebWorker);\n\t\tassert.deepStrictEqual(BrowserExtensionHostKindPicker.pickRunningLocation(['workspace', 'web', 'ui'], true, true, ExtensionRunningPreference.None), ExtensionHostKind.Remote);\n\t});\n});\n\nsuite('ExtensionService', () => {\n\n\tclass MyTestExtensionService extends AbstractExtensionService {\n\n\t\tconstructor(\n\t\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t\t@INotificationService notificationService: INotificationService,\n\t\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t\t@IWorkbenchExtensionEnablementService extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t\t@IFileService fileService: IFileService,\n\t\t\t@IProductService productService: IProductService,\n\t\t\t@IWorkbenchExtensionManagementService extensionManagementService: IWorkbenchExtensionManagementService,\n\t\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t\t@IExtensionManifestPropertiesService extensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t\t\t@ILogService logService: ILogService,\n\t\t\t@IRemoteAgentService remoteAgentService: IRemoteAgentService,\n\t\t\t@IRemoteExtensionsScannerService remoteExtensionsScannerService: IRemoteExtensionsScannerService,\n\t\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t\t\t@IRemoteAuthorityResolverService remoteAuthorityResolverService: IRemoteAuthorityResolverService,\n\t\t) {\n\t\t\tconst extensionsProposedApi = instantiationService.createInstance(ExtensionsProposedApi);\n\t\t\tconst extensionHostFactory = new class implements IExtensionHostFactory {\n\t\t\t\tcreateExtensionHost(runningLocations: ExtensionRunningLocationTracker, runningLocation: ExtensionRunningLocation, isInitialStart: boolean): IExtensionHost | null {\n\t\t\t\t\treturn new class extends mock<IExtensionHost>() {\n\t\t\t\t\t\toverride runningLocation = runningLocation;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t};\n\t\t\tsuper(\n\t\t\t\t{ allowRemoteExtensionsInLocalWebWorker: false, hasLocalProcess: true },\n\t\t\t\textensionsProposedApi,\n\t\t\t\textensionHostFactory,\n\t\t\t\tnull!,\n\t\t\t\tinstantiationService,\n\t\t\t\tnotificationService,\n\t\t\t\tenvironmentService,\n\t\t\t\ttelemetryService,\n\t\t\t\textensionEnablementService,\n\t\t\t\tfileService,\n\t\t\t\tproductService,\n\t\t\t\textensionManagementService,\n\t\t\t\tcontextService,\n\t\t\t\tconfigurationService,\n\t\t\t\textensionManifestPropertiesService,\n\t\t\t\tlogService,\n\t\t\t\tremoteAgentService,\n\t\t\t\tremoteExtensionsScannerService,\n\t\t\t\tlifecycleService,\n\t\t\t\tremoteAuthorityResolverService,\n\t\t\t\tnew TestDialogService()\n\t\t\t);\n\t\t}\n\n\t\tprivate _extHostId = 0;\n\t\tpublic readonly order: string[] = [];\n\t\tprotected _pickExtensionHostKind(extensionId: ExtensionIdentifier, extensionKinds: ExtensionKind[], isInstalledLocally: boolean, isInstalledRemotely: boolean, preference: ExtensionRunningPreference): ExtensionHostKind | null {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\t\tprotected override _doCreateExtensionHostManager(extensionHost: IExtensionHost, initialActivationEvents: string[]): IExtensionHostManager {\n\t\t\tconst order = this.order;\n\t\t\tconst extensionHostId = ++this._extHostId;\n\t\t\torder.push(`create ${extensionHostId}`);\n\t\t\treturn new class extends mock<IExtensionHostManager>() {\n\t\t\t\toverride onDidExit = Event.None;\n\t\t\t\toverride onDidChangeResponsiveState = Event.None;\n\t\t\t\toverride disconnect() {\n\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t}\n\t\t\t\toverride start(): Promise<void> {\n\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t}\n\t\t\t\toverride dispose(): void {\n\t\t\t\t\torder.push(`dispose ${extensionHostId}`);\n\t\t\t\t}\n\t\t\t\toverride representsRunningLocation(runningLocation: ExtensionRunningLocation): boolean {\n\t\t\t\t\treturn extensionHost.runningLocation.equals(runningLocation);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tprotected _resolveExtensions(): AsyncIterable<ResolvedExtensions> {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\t\tprotected _scanSingleExtension(extension: IExtension): Promise<IExtensionDescription | null> {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\t\tprotected _onExtensionHostExit(code: number): Promise<void> {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\t\tprotected _resolveAuthority(remoteAuthority: string): Promise<ResolverResult> {\n\t\t\tthrow new Error('Method not implemented.');\n\t\t}\n\t}\n\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\tlet extService: MyTestExtensionService;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst testProductService = { _serviceBrand: undefined, ...product };\n\t\tdisposables.add(instantiationService = createServices(disposables, [\n\t\t\t// custom\n\t\t\t[IExtensionService, MyTestExtensionService],\n\t\t\t// default\n\t\t\t[ILifecycleService, TestLifecycleService],\n\t\t\t[IWorkbenchExtensionManagementService, TestWorkbenchExtensionManagementService],\n\t\t\t[INotificationService, TestNotificationService],\n\t\t\t[IRemoteAgentService, TestRemoteAgentService],\n\t\t\t[ILogService, NullLogService],\n\t\t\t[IWebExtensionsScannerService, TestWebExtensionsScannerService],\n\t\t\t[IExtensionManifestPropertiesService, ExtensionManifestPropertiesService],\n\t\t\t[IConfigurationService, TestConfigurationService],\n\t\t\t[IWorkspaceContextService, TestContextService],\n\t\t\t[IProductService, testProductService],\n\t\t\t[IFileService, TestFileService],\n\t\t\t[IWorkbenchExtensionEnablementService, TestWorkbenchExtensionEnablementService],\n\t\t\t[ITelemetryService, NullTelemetryService],\n\t\t\t[IEnvironmentService, TestEnvironmentService],\n\t\t\t[IWorkspaceTrustEnablementService, WorkspaceTrustEnablementService],\n\t\t\t[IUserDataProfilesService, UserDataProfilesService],\n\t\t\t[IUserDataProfileService, TestUserDataProfileService],\n\t\t\t[IUriIdentityService, UriIdentityService],\n\t\t\t[IRemoteExtensionsScannerService, TestRemoteExtensionsScannerService],\n\t\t\t[IRemoteAuthorityResolverService, new RemoteAuthorityResolverService(false, undefined, undefined, undefined, testProductService, new NullLogService())]\n\t\t]));\n\t\textService = <MyTestExtensionService>instantiationService.get(IExtensionService);\n\t});\n\n\tteardown(async () => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('issue #152204: Remote extension host not disposed after closing vscode client', async () => {\n\t\tawait extService.startExtensionHosts();\n\t\tawait extService.stopExtensionHosts('foo');\n\t\tassert.deepStrictEqual(extService.order, (['create 1', 'create 2', 'create 3', 'dispose 3', 'dispose 2', 'dispose 1']));\n\t});\n\n\ttest('Extension host disposed when awaited', async () => {\n\t\tawait extService.startExtensionHosts();\n\t\tawait extService.stopExtensionHosts('foo');\n\t\tassert.deepStrictEqual(extService.order, (['create 1', 'create 2', 'create 3', 'dispose 3', 'dispose 2', 'dispose 1']));\n\t});\n\n\ttest('Extension host not disposed when vetoed (sync)', async () => {\n\t\tawait extService.startExtensionHosts();\n\n\t\tdisposables.add(extService.onWillStop(e => e.veto(true, 'test 1')));\n\t\tdisposables.add(extService.onWillStop(e => e.veto(false, 'test 2')));\n\n\t\tawait extService.stopExtensionHosts('foo');\n\t\tassert.deepStrictEqual(extService.order, (['create 1', 'create 2', 'create 3']));\n\t});\n\n\ttest('Extension host not disposed when vetoed (async)', async () => {\n\t\tawait extService.startExtensionHosts();\n\n\t\tdisposables.add(extService.onWillStop(e => e.veto(false, 'test 1')));\n\t\tdisposables.add(extService.onWillStop(e => e.veto(Promise.resolve(true), 'test 2')));\n\t\tdisposables.add(extService.onWillStop(e => e.veto(Promise.resolve(false), 'test 3')));\n\n\t\tawait extService.stopExtensionHosts('foo');\n\t\tassert.deepStrictEqual(extService.order, (['create 1', 'create 2', 'create 3']));\n\t});\n});\n"]}