{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/extensions/test/common/extensionDescriptionRegistry.test.ts","vs/workbench/services/extensions/test/common/extensionDescriptionRegistry.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,MAAM,MAAM,QAAQ,CAAC;AAC5B,OAAO,EAAE,GAAG,EAAE,MAAM,mCAAmC,CAAC;AACxD,OAAO,EAAE,uCAAuC,EAAE,MAAM,0CAA0C,CAAC;AACnG,OAAO,EAAE,mBAAmB,EAAyC,MAAM,yDAAyD,CAAC;AACrI,OAAO,EAAE,4BAA4B,EAA2B,MAAM,8CAA8C,CAAC;AAErH,KAAK,CAAC,8BAA8B,EAAE,GAAG,EAAE;IAE1C,uCAAuC,EAAE,CAAC;IAE1C,IAAI,CAAC,qEAAqE,EAAE,GAAG,EAAE;QAChF,MAAM,GAAG,GAAG,IAAI,mBAAmB,CAAC,GAAG,CAAC,CAAC;QACzC,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;QACvC,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;QAEvC,MAAM,2BAA2B,GAA4B;YAC5D,oBAAoB,EAAE,CAAC,oBAA2C,EAAY,EAAE;gBAC/E,OAAO,oBAAoB,CAAC,gBAAgB,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;YAC7D,CAAC;SACD,CAAC;QAEF,MAAM,QAAQ,GAAG,IAAI,4BAA4B,CAAC,2BAA2B,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;QAC9F,QAAQ,CAAC,eAAe,CAAC,CAAC,WAAW,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;QAE/C,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,2BAA2B,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;QAE9E,QAAQ,CAAC,OAAO,EAAE,CAAC;IACpB,CAAC,CAAC,CAAC;IAEH,SAAS,IAAI,CAAC,EAAuB,EAAE,OAAe,EAAE,mBAA6B,CAAC,GAAG,CAAC;QACzF,OAAO;YACN,IAAI,EAAE,EAAE,CAAC,KAAK;YACd,SAAS,EAAE,MAAM;YACjB,OAAO,EAAE,OAAO;YAChB,OAAO,EAAE,EAAE,MAAM,EAAE,QAAQ,EAAE;YAC7B,UAAU,EAAE,EAAE;YACd,iBAAiB,EAAE,GAAG,CAAC,KAAK,CAAC,mBAAmB,CAAC;YACjD,SAAS,EAAE,KAAK;YAChB,kBAAkB,EAAE,KAAK;YACzB,aAAa,EAAE,KAAK;YACpB,gBAAgB;YAChB,IAAI,EAAE,UAAU;YAChB,cAAc,4CAA0B;YACxC,qBAAqB,EAAE,EAAE;YACzB,mBAAmB,EAAE,SAAS;YAC9B,UAAU,EAAE,KAAK;SACjB,CAAC;IACH,CAAC;AACF,CAAC,CAAC,CAAC","file":"extensionDescriptionRegistry.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ExtensionIdentifier, IExtensionDescription, TargetPlatform } from '../../../../../platform/extensions/common/extensions.js';\nimport { ExtensionDescriptionRegistry, IActivationEventsReader } from '../../common/extensionDescriptionRegistry.js';\n\nsuite('ExtensionDescriptionRegistry', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('allow removing and adding the same extension at a different version', () => {\n\t\tconst idA = new ExtensionIdentifier('a');\n\t\tconst extensionA1 = desc(idA, '1.0.0');\n\t\tconst extensionA2 = desc(idA, '2.0.0');\n\n\t\tconst basicActivationEventsReader: IActivationEventsReader = {\n\t\t\treadActivationEvents: (extensionDescription: IExtensionDescription): string[] => {\n\t\t\t\treturn extensionDescription.activationEvents?.slice() ?? [];\n\t\t\t}\n\t\t};\n\n\t\tconst registry = new ExtensionDescriptionRegistry(basicActivationEventsReader, [extensionA1]);\n\t\tregistry.deltaExtensions([extensionA2], [idA]);\n\n\t\tassert.deepStrictEqual(registry.getAllExtensionDescriptions(), [extensionA2]);\n\n\t\tregistry.dispose();\n\t});\n\n\tfunction desc(id: ExtensionIdentifier, version: string, activationEvents: string[] = ['*']): IExtensionDescription {\n\t\treturn {\n\t\t\tname: id.value,\n\t\t\tpublisher: 'test',\n\t\t\tversion: '0.0.0',\n\t\t\tengines: { vscode: '^1.0.0' },\n\t\t\tidentifier: id,\n\t\t\textensionLocation: URI.parse(`nothing://nowhere`),\n\t\t\tisBuiltin: false,\n\t\t\tisUnderDevelopment: false,\n\t\t\tisUserBuiltin: false,\n\t\t\tactivationEvents,\n\t\t\tmain: 'index.js',\n\t\t\ttargetPlatform: TargetPlatform.UNDEFINED,\n\t\t\textensionDependencies: [],\n\t\t\tenabledApiProposals: undefined,\n\t\t\tpreRelease: false,\n\t\t};\n\t}\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ExtensionIdentifier, IExtensionDescription, TargetPlatform } from '../../../../../platform/extensions/common/extensions.js';\nimport { ExtensionDescriptionRegistry, IActivationEventsReader } from '../../common/extensionDescriptionRegistry.js';\n\nsuite('ExtensionDescriptionRegistry', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('allow removing and adding the same extension at a different version', () => {\n\t\tconst idA = new ExtensionIdentifier('a');\n\t\tconst extensionA1 = desc(idA, '1.0.0');\n\t\tconst extensionA2 = desc(idA, '2.0.0');\n\n\t\tconst basicActivationEventsReader: IActivationEventsReader = {\n\t\t\treadActivationEvents: (extensionDescription: IExtensionDescription): string[] => {\n\t\t\t\treturn extensionDescription.activationEvents?.slice() ?? [];\n\t\t\t}\n\t\t};\n\n\t\tconst registry = new ExtensionDescriptionRegistry(basicActivationEventsReader, [extensionA1]);\n\t\tregistry.deltaExtensions([extensionA2], [idA]);\n\n\t\tassert.deepStrictEqual(registry.getAllExtensionDescriptions(), [extensionA2]);\n\n\t\tregistry.dispose();\n\t});\n\n\tfunction desc(id: ExtensionIdentifier, version: string, activationEvents: string[] = ['*']): IExtensionDescription {\n\t\treturn {\n\t\t\tname: id.value,\n\t\t\tpublisher: 'test',\n\t\t\tversion: '0.0.0',\n\t\t\tengines: { vscode: '^1.0.0' },\n\t\t\tidentifier: id,\n\t\t\textensionLocation: URI.parse(`nothing://nowhere`),\n\t\t\tisBuiltin: false,\n\t\t\tisUnderDevelopment: false,\n\t\t\tisUserBuiltin: false,\n\t\t\tactivationEvents,\n\t\t\tmain: 'index.js',\n\t\t\ttargetPlatform: TargetPlatform.UNDEFINED,\n\t\t\textensionDependencies: [],\n\t\t\tenabledApiProposals: undefined,\n\t\t\tpreRelease: false,\n\t\t};\n\t}\n});\n"]}