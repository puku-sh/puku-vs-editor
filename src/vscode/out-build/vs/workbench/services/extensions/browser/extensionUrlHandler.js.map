{"version":3,"sources":["vs/workbench/services/extensions/browser/extensionUrlHandler.ts"],"names":[],"mappings":"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","file":"extensionUrlHandler.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize, localize2 } from '../../../../nls.js';\nimport { IDisposable, combinedDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { createDecorator, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IURLHandler, IURLService, IOpenURLOptions } from '../../../../platform/url/common/url.js';\nimport { IHostService } from '../../host/browser/host.js';\nimport { ActivationKind, IExtensionService } from '../common/extensions.js';\nimport { ExtensionIdentifier } from '../../../../platform/extensions/common/extensions.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IWorkbenchContribution, WorkbenchPhase, registerWorkbenchContribution2 } from '../../../common/contributions.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { IQuickInputService, IQuickPickItem } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IsWebContext } from '../../../../platform/contextkey/common/contextkeys.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { disposableWindowInterval } from '../../../../base/browser/dom.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { isCancellationError } from '../../../../base/common/errors.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { equalsIgnoreCase } from '../../../../base/common/strings.js';\n\nconst FIVE_MINUTES = 5 * 60 * 1000;\nconst THIRTY_SECONDS = 30 * 1000;\nconst URL_TO_HANDLE = 'extensionUrlHandler.urlToHandle';\nconst USER_TRUSTED_EXTENSIONS_CONFIGURATION_KEY = 'extensions.confirmedUriHandlerExtensionIds';\nconst USER_TRUSTED_EXTENSIONS_STORAGE_KEY = 'extensionUrlHandler.confirmedExtensions';\n\nfunction isExtensionId(value: string): boolean {\n\treturn /^[a-z0-9][a-z0-9\\-]*\\.[a-z0-9][a-z0-9\\-]*$/i.test(value);\n}\n\nclass UserTrustedExtensionIdStorage {\n\n\tget extensions(): string[] {\n\t\tconst userTrustedExtensionIdsJson = this.storageService.get(USER_TRUSTED_EXTENSIONS_STORAGE_KEY, StorageScope.PROFILE, '[]');\n\n\t\ttry {\n\t\t\treturn JSON.parse(userTrustedExtensionIdsJson);\n\t\t} catch {\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tconstructor(private storageService: IStorageService) { }\n\n\thas(id: string): boolean {\n\t\treturn this.extensions.indexOf(id) > -1;\n\t}\n\n\tadd(id: string): void {\n\t\tthis.set([...this.extensions, id]);\n\t}\n\n\tset(ids: string[]): void {\n\t\tthis.storageService.store(USER_TRUSTED_EXTENSIONS_STORAGE_KEY, JSON.stringify(ids), StorageScope.PROFILE, StorageTarget.MACHINE);\n\t}\n}\n\nexport const IExtensionUrlHandler = createDecorator<IExtensionUrlHandler>('extensionUrlHandler');\n\nexport interface IExtensionContributedURLHandler extends IURLHandler {\n\textensionDisplayName: string;\n}\n\nexport interface IExtensionUrlHandler {\n\treadonly _serviceBrand: undefined;\n\tregisterExtensionHandler(extensionId: ExtensionIdentifier, handler: IExtensionContributedURLHandler): void;\n\tunregisterExtensionHandler(extensionId: ExtensionIdentifier): void;\n}\n\nexport interface IExtensionUrlHandlerOverride {\n\tcanHandleURL(uri: URI): boolean;\n\thandleURL(uri: URI): Promise<boolean>;\n}\n\nexport class ExtensionUrlHandlerOverrideRegistry {\n\n\tprivate static readonly handlers = new Set<IExtensionUrlHandlerOverride>();\n\n\tstatic registerHandler(handler: IExtensionUrlHandlerOverride): IDisposable {\n\t\tthis.handlers.add(handler);\n\n\t\treturn toDisposable(() => this.handlers.delete(handler));\n\t}\n\n\tstatic getHandler(uri: URI): IExtensionUrlHandlerOverride | undefined {\n\t\tfor (const handler of this.handlers) {\n\t\t\tif (handler.canHandleURL(uri)) {\n\t\t\t\treturn handler;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n}\n\n/**\n * This class handles URLs which are directed towards extensions.\n * If a URL is directed towards an inactive extension, it buffers it,\n * activates the extension and re-opens the URL once the extension registers\n * a URL handler. If the extension never registers a URL handler, the urls\n * will eventually be garbage collected.\n *\n * It also makes sure the user confirms opening URLs directed towards extensions.\n */\nclass ExtensionUrlHandler implements IExtensionUrlHandler, IURLHandler {\n\n\treadonly _serviceBrand: undefined;\n\n\tprivate extensionHandlers = new Map<string, IExtensionContributedURLHandler>();\n\tprivate uriBuffer = new Map<string, { timestamp: number; uri: URI }[]>();\n\tprivate userTrustedExtensionsStorage: UserTrustedExtensionIdStorage;\n\tprivate disposable: IDisposable;\n\n\tconstructor(\n\t\t@IURLService urlService: IURLService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IProductService private readonly productService: IProductService,\n\t) {\n\t\tthis.userTrustedExtensionsStorage = new UserTrustedExtensionIdStorage(storageService);\n\n\t\tconst interval = disposableWindowInterval(mainWindow, () => this.garbageCollect(), THIRTY_SECONDS);\n\t\tconst urlToHandleValue = this.storageService.get(URL_TO_HANDLE, StorageScope.WORKSPACE);\n\t\tif (urlToHandleValue) {\n\t\t\tthis.storageService.remove(URL_TO_HANDLE, StorageScope.WORKSPACE);\n\t\t\tthis.handleURL(URI.revive(JSON.parse(urlToHandleValue)), { trusted: true });\n\t\t}\n\n\t\tthis.disposable = combinedDisposable(\n\t\t\turlService.registerHandler(this),\n\t\t\tinterval\n\t\t);\n\n\t\tconst cache = ExtensionUrlBootstrapHandler.cache;\n\t\tsetTimeout(() => cache.forEach(([uri, option]) => this.handleURL(uri, option)));\n\t}\n\n\tasync handleURL(uri: URI, options?: IOpenURLOptions): Promise<boolean> {\n\t\tif (!isExtensionId(uri.authority)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst overrideHandler = ExtensionUrlHandlerOverrideRegistry.getHandler(uri);\n\t\tif (overrideHandler) {\n\t\t\tconst handled = await overrideHandler.handleURL(uri);\n\t\t\tif (handled) {\n\t\t\t\treturn handled;\n\t\t\t}\n\t\t}\n\n\t\tconst extensionId = uri.authority;\n\n\t\tconst initialHandler = this.extensionHandlers.get(ExtensionIdentifier.toKey(extensionId));\n\t\tlet extensionDisplayName: string;\n\n\t\tif (!initialHandler) {\n\t\t\t// The extension is not yet activated, so let's check if it is installed and enabled\n\t\t\tconst extension = await this.extensionService.getExtension(extensionId);\n\t\t\tif (!extension) {\n\t\t\t\tawait this.handleUnhandledURL(uri, extensionId, options);\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\textensionDisplayName = extension.displayName ?? '';\n\t\t\t}\n\t\t} else {\n\t\t\textensionDisplayName = initialHandler.extensionDisplayName;\n\t\t}\n\n\t\tconst trusted = options?.trusted\n\t\t\t|| this.productService.trustedExtensionProtocolHandlers?.some(value => equalsIgnoreCase(value, extensionId))\n\t\t\t|| this.didUserTrustExtension(ExtensionIdentifier.toKey(extensionId));\n\n\t\tif (!trusted) {\n\t\t\tconst uriString = uri.toString(false);\n\t\t\tlet uriLabel = uriString;\n\n\t\t\tif (uriLabel.length > 40) {\n\t\t\t\turiLabel = `${uriLabel.substring(0, 30)}...${uriLabel.substring(uriLabel.length - 5)}`;\n\t\t\t}\n\n\t\t\tconst result = await this.dialogService.confirm({\n\t\t\t\tmessage: localize('confirmUrl', \"Allow '{0}' extension to open this URI?\", extensionDisplayName),\n\t\t\t\tcheckbox: {\n\t\t\t\t\tlabel: localize('rememberConfirmUrl', \"Do not ask me again for this extension\"),\n\t\t\t\t},\n\t\t\t\tprimaryButton: localize({ key: 'open', comment: ['&& denotes a mnemonic'] }, \"&&Open\"),\n\t\t\t\tcustom: {\n\t\t\t\t\tmarkdownDetails: [{\n\t\t\t\t\t\tmarkdown: new MarkdownString(`<div title=\"${uriString}\" aria-label='${uriString}'>${uriLabel}</div>`, { supportHtml: true }),\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!result.confirmed) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (result.checkboxChecked) {\n\t\t\t\tthis.userTrustedExtensionsStorage.add(ExtensionIdentifier.toKey(extensionId));\n\t\t\t}\n\t\t}\n\n\t\tconst handler = this.extensionHandlers.get(ExtensionIdentifier.toKey(extensionId));\n\n\t\tif (handler) {\n\t\t\tif (!initialHandler) {\n\t\t\t\t// forward it directly\n\t\t\t\treturn await this.handleURLByExtension(extensionId, handler, uri, options);\n\t\t\t}\n\n\t\t\t// let the ExtensionUrlHandler instance handle this\n\t\t\treturn false;\n\t\t}\n\n\t\t// collect URI for eventual extension activation\n\t\tconst timestamp = new Date().getTime();\n\t\tlet uris = this.uriBuffer.get(ExtensionIdentifier.toKey(extensionId));\n\n\t\tif (!uris) {\n\t\t\turis = [];\n\t\t\tthis.uriBuffer.set(ExtensionIdentifier.toKey(extensionId), uris);\n\t\t}\n\n\t\turis.push({ timestamp, uri });\n\n\t\t// activate the extension using ActivationKind.Immediate because URI handling might be part\n\t\t// of resolving authorities (via authentication extensions)\n\t\tawait this.extensionService.activateByEvent(`onUri:${ExtensionIdentifier.toKey(extensionId)}`, ActivationKind.Immediate);\n\t\treturn true;\n\t}\n\n\tregisterExtensionHandler(extensionId: ExtensionIdentifier, handler: IExtensionContributedURLHandler): void {\n\t\tthis.extensionHandlers.set(ExtensionIdentifier.toKey(extensionId), handler);\n\n\t\tconst uris = this.uriBuffer.get(ExtensionIdentifier.toKey(extensionId)) || [];\n\n\t\tfor (const { uri } of uris) {\n\t\t\tthis.handleURLByExtension(extensionId, handler, uri);\n\t\t}\n\n\t\tthis.uriBuffer.delete(ExtensionIdentifier.toKey(extensionId));\n\t}\n\n\tunregisterExtensionHandler(extensionId: ExtensionIdentifier): void {\n\t\tthis.extensionHandlers.delete(ExtensionIdentifier.toKey(extensionId));\n\t}\n\n\tprivate async handleURLByExtension(extensionId: ExtensionIdentifier | string, handler: IURLHandler, uri: URI, options?: IOpenURLOptions): Promise<boolean> {\n\t\treturn await handler.handleURL(uri, options);\n\t}\n\n\tprivate async handleUnhandledURL(uri: URI, extensionId: string, options?: IOpenURLOptions): Promise<void> {\n\t\ttry {\n\t\t\tawait this.commandService.executeCommand('workbench.extensions.installExtension', extensionId, {\n\t\t\t\tjustification: {\n\t\t\t\t\treason: `${localize('installDetail', \"This extension wants to open a URI:\")}\\n${uri.toString()}`,\n\t\t\t\t\taction: localize('openUri', \"Open URI\")\n\t\t\t\t},\n\t\t\t\tenable: true,\n\t\t\t\tinstallPreReleaseVersion: this.productService.quality !== 'stable'\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tif (!isCancellationError(error)) {\n\t\t\t\tthis.notificationService.error(error);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tconst extension = await this.extensionService.getExtension(extensionId);\n\n\t\tif (extension) {\n\t\t\tawait this.handleURL(uri, { ...options, trusted: true });\n\t\t}\n\n\t\t/* Extension cannot be added and require window reload */\n\t\telse {\n\t\t\tconst result = await this.dialogService.confirm({\n\t\t\t\tmessage: localize('reloadAndHandle', \"Extension '{0}' is not loaded. Would you like to reload the window to load the extension and open the URL?\", extensionId),\n\t\t\t\tprimaryButton: localize({ key: 'reloadAndOpen', comment: ['&& denotes a mnemonic'] }, \"&&Reload Window and Open\")\n\t\t\t});\n\n\t\t\tif (!result.confirmed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.storageService.store(URL_TO_HANDLE, JSON.stringify(uri.toJSON()), StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t\t\tawait this.hostService.reload();\n\t\t}\n\t}\n\n\t// forget about all uris buffered more than 5 minutes ago\n\tprivate garbageCollect(): void {\n\t\tconst now = new Date().getTime();\n\t\tconst uriBuffer = new Map<string, { timestamp: number; uri: URI }[]>();\n\n\t\tthis.uriBuffer.forEach((uris, extensionId) => {\n\t\t\turis = uris.filter(({ timestamp }) => now - timestamp < FIVE_MINUTES);\n\n\t\t\tif (uris.length > 0) {\n\t\t\t\turiBuffer.set(extensionId, uris);\n\t\t\t}\n\t\t});\n\n\t\tthis.uriBuffer = uriBuffer;\n\t}\n\n\tprivate didUserTrustExtension(id: string): boolean {\n\t\tif (this.userTrustedExtensionsStorage.has(id)) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn this.getConfirmedTrustedExtensionIdsFromConfiguration().indexOf(id) > -1;\n\t}\n\n\tprivate getConfirmedTrustedExtensionIdsFromConfiguration(): Array<string> {\n\t\tconst trustedExtensionIds = this.configurationService.getValue(USER_TRUSTED_EXTENSIONS_CONFIGURATION_KEY);\n\n\t\tif (!Array.isArray(trustedExtensionIds)) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn trustedExtensionIds;\n\t}\n\n\tdispose(): void {\n\t\tthis.disposable.dispose();\n\t\tthis.extensionHandlers.clear();\n\t\tthis.uriBuffer.clear();\n\t}\n}\n\nregisterSingleton(IExtensionUrlHandler, ExtensionUrlHandler, InstantiationType.Eager);\n\n/**\n * This class handles URLs before `ExtensionUrlHandler` is instantiated.\n * More info: https://github.com/microsoft/vscode/issues/73101\n */\nclass ExtensionUrlBootstrapHandler implements IWorkbenchContribution, IURLHandler {\n\n\tstatic readonly ID = 'workbench.contrib.extensionUrlBootstrapHandler';\n\n\tprivate static _cache: [URI, IOpenURLOptions | undefined][] = [];\n\tprivate static disposable: IDisposable;\n\n\tstatic get cache(): [URI, IOpenURLOptions | undefined][] {\n\t\tExtensionUrlBootstrapHandler.disposable.dispose();\n\n\t\tconst result = ExtensionUrlBootstrapHandler._cache;\n\t\tExtensionUrlBootstrapHandler._cache = [];\n\t\treturn result;\n\t}\n\n\tconstructor(@IURLService urlService: IURLService) {\n\t\tExtensionUrlBootstrapHandler.disposable = urlService.registerHandler(this);\n\t}\n\n\tasync handleURL(uri: URI, options?: IOpenURLOptions): Promise<boolean> {\n\t\tif (!isExtensionId(uri.authority)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tExtensionUrlBootstrapHandler._cache.push([uri, options]);\n\t\treturn true;\n\t}\n}\n\nregisterWorkbenchContribution2(ExtensionUrlBootstrapHandler.ID, ExtensionUrlBootstrapHandler, WorkbenchPhase.BlockRestore /* registration only */);\n\nclass ManageAuthorizedExtensionURIsAction extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.extensions.action.manageAuthorizedExtensionURIs',\n\t\t\ttitle: localize2('manage', 'Manage Authorized Extension URIs...'),\n\t\t\tcategory: localize2('extensions', 'Extensions'),\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.CommandPalette,\n\t\t\t\twhen: IsWebContext.toNegated()\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst storageService = accessor.get(IStorageService);\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\t\tconst storage = new UserTrustedExtensionIdStorage(storageService);\n\t\tconst items = storage.extensions.map((label): IQuickPickItem => ({ label, picked: true }));\n\n\t\tif (items.length === 0) {\n\t\t\tawait quickInputService.pick([{ label: localize('no', 'There are currently no authorized extension URIs.') }]);\n\t\t\treturn;\n\t\t}\n\n\t\tconst result = await quickInputService.pick(items, { canPickMany: true });\n\n\t\tif (!result) {\n\t\t\treturn;\n\t\t}\n\n\t\tstorage.set(result.map(item => item.label));\n\t}\n}\n\nregisterAction2(ManageAuthorizedExtensionURIsAction);\n"]}