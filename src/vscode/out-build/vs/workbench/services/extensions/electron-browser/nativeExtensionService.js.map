{"version":3,"sources":["vs/workbench/services/extensions/electron-browser/nativeExtensionService.ts"],"names":[],"mappings":"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","file":"nativeExtensionService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { runWhenWindowIdle } from '../../../../base/browser/dom.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport * as performance from '../../../../base/common/performance.js';\nimport { isCI } from '../../../../base/common/platform.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport * as nls from '../../../../nls.js';\nimport { Categories } from '../../../../platform/action/common/actionCommonCategories.js';\nimport { Action2, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { ExtensionKind } from '../../../../platform/environment/common/environment.js';\nimport { IExtensionGalleryService } from '../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { ExtensionIdentifier, IExtensionDescription } from '../../../../platform/extensions/common/extensions.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INativeHostService } from '../../../../platform/native/common/native.js';\nimport { INotificationService, IPromptChoice, NotificationPriority, Severity } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { PersistentConnectionEventType } from '../../../../platform/remote/common/remoteAgentConnection.js';\nimport { IRemoteAgentEnvironment } from '../../../../platform/remote/common/remoteAgentEnvironment.js';\nimport { IRemoteAuthorityResolverService, RemoteAuthorityResolverError, RemoteConnectionType, ResolverResult, getRemoteAuthorityPrefix } from '../../../../platform/remote/common/remoteAuthorityResolver.js';\nimport { IRemoteExtensionsScannerService } from '../../../../platform/remote/common/remoteExtensionsScanner.js';\nimport { getRemoteName, parseAuthorityWithPort } from '../../../../platform/remote/common/remoteHosts.js';\nimport { updateProxyConfigurationsScope } from '../../../../platform/request/common/request.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\nimport { IWorkbenchEnvironmentService } from '../../environment/common/environmentService.js';\nimport { EnablementState, IWorkbenchExtensionEnablementService, IWorkbenchExtensionManagementService } from '../../extensionManagement/common/extensionManagement.js';\nimport { IWebWorkerExtensionHostDataProvider, IWebWorkerExtensionHostInitData, WebWorkerExtensionHost } from '../browser/webWorkerExtensionHost.js';\nimport { AbstractExtensionService, ExtensionHostCrashTracker, IExtensionHostFactory, LocalExtensions, RemoteExtensions, ResolvedExtensions, ResolverExtensions, checkEnabledAndProposedAPI, extensionIsEnabled, isResolverExtension } from '../common/abstractExtensionService.js';\nimport { ExtensionDescriptionRegistrySnapshot } from '../common/extensionDescriptionRegistry.js';\nimport { parseExtensionDevOptions } from '../common/extensionDevOptions.js';\nimport { ExtensionHostKind, ExtensionRunningPreference, IExtensionHostKindPicker, extensionHostKindToString, extensionRunningPreferenceToString } from '../common/extensionHostKind.js';\nimport { IExtensionHostManager } from '../common/extensionHostManagers.js';\nimport { ExtensionHostExitCode } from '../common/extensionHostProtocol.js';\nimport { IExtensionManifestPropertiesService } from '../common/extensionManifestPropertiesService.js';\nimport { ExtensionRunningLocation, LocalProcessRunningLocation, LocalWebWorkerRunningLocation } from '../common/extensionRunningLocation.js';\nimport { ExtensionRunningLocationTracker, filterExtensionDescriptions } from '../common/extensionRunningLocationTracker.js';\nimport { ExtensionHostExtensions, ExtensionHostStartup, IExtensionHost, IExtensionService, WebWorkerExtHostConfigValue, toExtension, webWorkerExtHostConfig } from '../common/extensions.js';\nimport { ExtensionsProposedApi } from '../common/extensionsProposedApi.js';\nimport { IRemoteExtensionHostDataProvider, IRemoteExtensionHostInitData, RemoteExtensionHost } from '../common/remoteExtensionHost.js';\nimport { CachedExtensionScanner } from './cachedExtensionScanner.js';\nimport { ILocalProcessExtensionHostDataProvider, ILocalProcessExtensionHostInitData, NativeLocalProcessExtensionHost } from './localProcessExtensionHost.js';\nimport { IHostService } from '../../host/browser/host.js';\nimport { ILifecycleService, LifecyclePhase } from '../../lifecycle/common/lifecycle.js';\nimport { IRemoteAgentService } from '../../remote/common/remoteAgentService.js';\nimport { IRemoteExplorerService } from '../../remote/common/remoteExplorerService.js';\nimport { AsyncIterableEmitter, AsyncIterableProducer } from '../../../../base/common/async.js';\n\nexport class NativeExtensionService extends AbstractExtensionService implements IExtensionService {\n\n\tprivate readonly _extensionScanner: CachedExtensionScanner;\n\tprivate readonly _localCrashTracker = new ExtensionHostCrashTracker();\n\n\tconstructor(\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IWorkbenchExtensionEnablementService extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IProductService productService: IProductService,\n\t\t@IWorkbenchExtensionManagementService extensionManagementService: IWorkbenchExtensionManagementService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IExtensionManifestPropertiesService extensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t\t@ILogService logService: ILogService,\n\t\t@IRemoteAgentService remoteAgentService: IRemoteAgentService,\n\t\t@IRemoteExtensionsScannerService remoteExtensionsScannerService: IRemoteExtensionsScannerService,\n\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t\t@IRemoteAuthorityResolverService remoteAuthorityResolverService: IRemoteAuthorityResolverService,\n\t\t@INativeHostService private readonly _nativeHostService: INativeHostService,\n\t\t@IHostService private readonly _hostService: IHostService,\n\t\t@IRemoteExplorerService private readonly _remoteExplorerService: IRemoteExplorerService,\n\t\t@IExtensionGalleryService private readonly _extensionGalleryService: IExtensionGalleryService,\n\t\t@IWorkspaceTrustManagementService private readonly _workspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t\t@IDialogService dialogService: IDialogService,\n\t) {\n\t\tconst extensionsProposedApi = instantiationService.createInstance(ExtensionsProposedApi);\n\t\tconst extensionScanner = instantiationService.createInstance(CachedExtensionScanner);\n\t\tconst extensionHostFactory = new NativeExtensionHostFactory(\n\t\t\textensionsProposedApi,\n\t\t\textensionScanner,\n\t\t\t() => this._getExtensionRegistrySnapshotWhenReady(),\n\t\t\tinstantiationService,\n\t\t\tenvironmentService,\n\t\t\textensionEnablementService,\n\t\t\tconfigurationService,\n\t\t\tremoteAgentService,\n\t\t\tremoteAuthorityResolverService,\n\t\t\tlogService\n\t\t);\n\t\tsuper(\n\t\t\t{ hasLocalProcess: true, allowRemoteExtensionsInLocalWebWorker: false },\n\t\t\textensionsProposedApi,\n\t\t\textensionHostFactory,\n\t\t\tnew NativeExtensionHostKindPicker(environmentService, configurationService, logService),\n\t\t\tinstantiationService,\n\t\t\tnotificationService,\n\t\t\tenvironmentService,\n\t\t\ttelemetryService,\n\t\t\textensionEnablementService,\n\t\t\tfileService,\n\t\t\tproductService,\n\t\t\textensionManagementService,\n\t\t\tcontextService,\n\t\t\tconfigurationService,\n\t\t\textensionManifestPropertiesService,\n\t\t\tlogService,\n\t\t\tremoteAgentService,\n\t\t\tremoteExtensionsScannerService,\n\t\t\tlifecycleService,\n\t\t\tremoteAuthorityResolverService,\n\t\t\tdialogService\n\t\t);\n\n\t\tthis._extensionScanner = extensionScanner;\n\n\t\t// delay extension host creation and extension scanning\n\t\t// until the workbench is running. we cannot defer the\n\t\t// extension host more (LifecyclePhase.Restored) because\n\t\t// some editors require the extension host to restore\n\t\t// and this would result in a deadlock\n\t\t// see https://github.com/microsoft/vscode/issues/41322\n\t\tlifecycleService.when(LifecyclePhase.Ready).then(() => {\n\t\t\t// reschedule to ensure this runs after restoring viewlets, panels, and editors\n\t\t\trunWhenWindowIdle(mainWindow, () => {\n\t\t\t\tthis._initialize();\n\t\t\t}, 50 /*max delay*/);\n\t\t});\n\t}\n\n\tprivate async _scanAllLocalExtensions(): Promise<IExtensionDescription[]> {\n\t\treturn this._extensionScanner.scannedExtensions;\n\t}\n\n\tprotected override _onExtensionHostCrashed(extensionHost: IExtensionHostManager, code: number, signal: string | null): void {\n\n\t\tconst activatedExtensions: ExtensionIdentifier[] = [];\n\t\tconst extensionsStatus = this.getExtensionsStatus();\n\t\tfor (const key of Object.keys(extensionsStatus)) {\n\t\t\tconst extensionStatus = extensionsStatus[key];\n\t\t\tif (extensionStatus.activationStarted && extensionHost.containsExtension(extensionStatus.id)) {\n\t\t\t\tactivatedExtensions.push(extensionStatus.id);\n\t\t\t}\n\t\t}\n\n\t\tsuper._onExtensionHostCrashed(extensionHost, code, signal);\n\n\t\tif (extensionHost.kind === ExtensionHostKind.LocalProcess) {\n\t\t\tif (code === ExtensionHostExitCode.VersionMismatch) {\n\t\t\t\tthis._notificationService.prompt(\n\t\t\t\t\tSeverity.Error,\n\t\t\t\t\tnls.localize('extensionService.versionMismatchCrash', \"Extension host cannot start: version mismatch.\"),\n\t\t\t\t\t[{\n\t\t\t\t\t\tlabel: nls.localize('relaunch', \"Relaunch VS Code\"),\n\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\tthis._instantiationService.invokeFunction((accessor) => {\n\t\t\t\t\t\t\t\tconst hostService = accessor.get(IHostService);\n\t\t\t\t\t\t\t\thostService.restart();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._logExtensionHostCrash(extensionHost);\n\t\t\tthis._sendExtensionHostCrashTelemetry(code, signal, activatedExtensions);\n\n\t\t\tthis._localCrashTracker.registerCrash();\n\n\t\t\tif (this._localCrashTracker.shouldAutomaticallyRestart()) {\n\t\t\t\tthis._logService.info(`Automatically restarting the extension host.`);\n\t\t\t\tthis._notificationService.status(nls.localize('extensionService.autoRestart', \"The extension host terminated unexpectedly. Restarting...\"), { hideAfter: 5000 });\n\t\t\t\tthis.startExtensionHosts();\n\t\t\t} else {\n\t\t\t\tconst choices: IPromptChoice[] = [];\n\t\t\t\tif (this._environmentService.isBuilt) {\n\t\t\t\t\tchoices.push({\n\t\t\t\t\t\tlabel: nls.localize('startBisect', \"Start Extension Bisect\"),\n\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\tthis._instantiationService.invokeFunction(accessor => {\n\t\t\t\t\t\t\t\tconst commandService = accessor.get(ICommandService);\n\t\t\t\t\t\t\t\tcommandService.executeCommand('extension.bisect.start');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tchoices.push({\n\t\t\t\t\t\tlabel: nls.localize('devTools', \"Open Developer Tools\"),\n\t\t\t\t\t\trun: () => this._nativeHostService.openDevTools()\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tchoices.push({\n\t\t\t\t\tlabel: nls.localize('restart', \"Restart Extension Host\"),\n\t\t\t\t\trun: () => this.startExtensionHosts()\n\t\t\t\t});\n\n\t\t\t\tif (this._environmentService.isBuilt) {\n\t\t\t\t\tchoices.push({\n\t\t\t\t\t\tlabel: nls.localize('learnMore', \"Learn More\"),\n\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\tthis._instantiationService.invokeFunction(accessor => {\n\t\t\t\t\t\t\t\tconst openerService = accessor.get(IOpenerService);\n\t\t\t\t\t\t\t\topenerService.open('https://aka.ms/vscode-extension-bisect');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis._notificationService.prompt(Severity.Error, nls.localize('extensionService.crash', \"Extension host terminated unexpectedly 3 times within the last 5 minutes.\"), choices);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _sendExtensionHostCrashTelemetry(code: number, signal: string | null, activatedExtensions: ExtensionIdentifier[]): void {\n\t\ttype ExtensionHostCrashClassification = {\n\t\t\towner: 'alexdima';\n\t\t\tcomment: 'The extension host has terminated unexpectedly';\n\t\t\tcode: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The exit code of the extension host process.' };\n\t\t\tsignal: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The signal that caused the extension host process to exit.' };\n\t\t\textensionIds: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The list of loaded extensions.' };\n\t\t};\n\t\ttype ExtensionHostCrashEvent = {\n\t\t\tcode: number;\n\t\t\tsignal: string | null;\n\t\t\textensionIds: string[];\n\t\t};\n\t\tthis._telemetryService.publicLog2<ExtensionHostCrashEvent, ExtensionHostCrashClassification>('extensionHostCrash', {\n\t\t\tcode,\n\t\t\tsignal,\n\t\t\textensionIds: activatedExtensions.map(e => e.value)\n\t\t});\n\n\t\tfor (const extensionId of activatedExtensions) {\n\t\t\ttype ExtensionHostCrashExtensionClassification = {\n\t\t\t\towner: 'alexdima';\n\t\t\t\tcomment: 'The extension host has terminated unexpectedly';\n\t\t\t\tcode: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The exit code of the extension host process.' };\n\t\t\t\tsignal: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The signal that caused the extension host process to exit.' };\n\t\t\t\textensionId: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The identifier of the extension.' };\n\t\t\t};\n\t\t\ttype ExtensionHostCrashExtensionEvent = {\n\t\t\t\tcode: number;\n\t\t\t\tsignal: string | null;\n\t\t\t\textensionId: string;\n\t\t\t};\n\t\t\tthis._telemetryService.publicLog2<ExtensionHostCrashExtensionEvent, ExtensionHostCrashExtensionClassification>('extensionHostCrashExtension', {\n\t\t\t\tcode,\n\t\t\t\tsignal,\n\t\t\t\textensionId: extensionId.value\n\t\t\t});\n\t\t}\n\t}\n\n\t// --- impl\n\n\tprotected async _resolveAuthority(remoteAuthority: string): Promise<ResolverResult> {\n\n\t\tconst authorityPlusIndex = remoteAuthority.indexOf('+');\n\t\tif (authorityPlusIndex === -1) {\n\t\t\t// This authority does not need to be resolved, simply parse the port number\n\t\t\tconst { host, port } = parseAuthorityWithPort(remoteAuthority);\n\t\t\treturn {\n\t\t\t\tauthority: {\n\t\t\t\t\tauthority: remoteAuthority,\n\t\t\t\t\tconnectTo: {\n\t\t\t\t\t\ttype: RemoteConnectionType.WebSocket,\n\t\t\t\t\t\thost,\n\t\t\t\t\t\tport\n\t\t\t\t\t},\n\t\t\t\t\tconnectionToken: undefined\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\treturn this._resolveAuthorityOnExtensionHosts(ExtensionHostKind.LocalProcess, remoteAuthority);\n\t}\n\n\tprivate async _getCanonicalURI(remoteAuthority: string, uri: URI): Promise<URI> {\n\n\t\tconst authorityPlusIndex = remoteAuthority.indexOf('+');\n\t\tif (authorityPlusIndex === -1) {\n\t\t\t// This authority does not use a resolver\n\t\t\treturn uri;\n\t\t}\n\n\t\tconst localProcessExtensionHosts = this._getExtensionHostManagers(ExtensionHostKind.LocalProcess);\n\t\tif (localProcessExtensionHosts.length === 0) {\n\t\t\t// no local process extension hosts\n\t\t\tthrow new Error(`Cannot resolve canonical URI`);\n\t\t}\n\n\t\tconst results = await Promise.all(localProcessExtensionHosts.map(extHost => extHost.getCanonicalURI(remoteAuthority, uri)));\n\n\t\tfor (const result of results) {\n\t\t\tif (result) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\n\t\t// we can only reach this if there was no resolver extension that can return the cannonical uri\n\t\tthrow new Error(`Cannot get canonical URI because no extension is installed to resolve ${getRemoteAuthorityPrefix(remoteAuthority)}`);\n\t}\n\n\tprotected _resolveExtensions(): AsyncIterable<ResolvedExtensions> {\n\t\treturn new AsyncIterableProducer(emitter => this._doResolveExtensions(emitter));\n\t}\n\n\tprivate async _doResolveExtensions(emitter: AsyncIterableEmitter<ResolvedExtensions>): Promise<void> {\n\t\tthis._extensionScanner.startScanningExtensions();\n\n\t\tconst remoteAuthority = this._environmentService.remoteAuthority;\n\n\t\tlet remoteEnv: IRemoteAgentEnvironment | null = null;\n\t\tlet remoteExtensions: IExtensionDescription[] = [];\n\n\t\tif (remoteAuthority) {\n\n\t\t\tthis._remoteAuthorityResolverService._setCanonicalURIProvider(async (uri) => {\n\t\t\t\tif (uri.scheme !== Schemas.vscodeRemote || uri.authority !== remoteAuthority) {\n\t\t\t\t\t// The current remote authority resolver cannot give the canonical URI for this URI\n\t\t\t\t\treturn uri;\n\t\t\t\t}\n\t\t\t\tperformance.mark(`code/willGetCanonicalURI/${getRemoteAuthorityPrefix(remoteAuthority)}`);\n\t\t\t\tif (isCI) {\n\t\t\t\t\tthis._logService.info(`Invoking getCanonicalURI for authority ${getRemoteAuthorityPrefix(remoteAuthority)}...`);\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\treturn this._getCanonicalURI(remoteAuthority, uri);\n\t\t\t\t} finally {\n\t\t\t\t\tperformance.mark(`code/didGetCanonicalURI/${getRemoteAuthorityPrefix(remoteAuthority)}`);\n\t\t\t\t\tif (isCI) {\n\t\t\t\t\t\tthis._logService.info(`getCanonicalURI returned for authority ${getRemoteAuthorityPrefix(remoteAuthority)}.`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (isCI) {\n\t\t\t\tthis._logService.info(`Starting to wait on IWorkspaceTrustManagementService.workspaceResolved...`);\n\t\t\t}\n\n\t\t\t// Now that the canonical URI provider has been registered, we need to wait for the trust state to be\n\t\t\t// calculated. The trust state will be used while resolving the authority, however the resolver can\n\t\t\t// override the trust state through the resolver result.\n\t\t\tawait this._workspaceTrustManagementService.workspaceResolved;\n\n\t\t\tif (isCI) {\n\t\t\t\tthis._logService.info(`Finished waiting on IWorkspaceTrustManagementService.workspaceResolved.`);\n\t\t\t}\n\n\t\t\tconst localExtensions = await this._scanAllLocalExtensions();\n\t\t\tconst resolverExtensions = localExtensions.filter(extension => isResolverExtension(extension));\n\t\t\tif (resolverExtensions.length) {\n\t\t\t\temitter.emitOne(new ResolverExtensions(resolverExtensions));\n\t\t\t}\n\n\t\t\tlet resolverResult: ResolverResult;\n\t\t\ttry {\n\t\t\t\tresolverResult = await this._resolveAuthorityInitial(remoteAuthority);\n\t\t\t} catch (err) {\n\t\t\t\tif (RemoteAuthorityResolverError.isNoResolverFound(err)) {\n\t\t\t\t\terr.isHandled = await this._handleNoResolverFound(remoteAuthority);\n\t\t\t\t} else {\n\t\t\t\t\tif (RemoteAuthorityResolverError.isHandled(err)) {\n\t\t\t\t\t\tconsole.log(`Error handled: Not showing a notification for the error`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._remoteAuthorityResolverService._setResolvedAuthorityError(remoteAuthority, err);\n\n\t\t\t\t// Proceed with the local extension host\n\t\t\t\treturn this._startLocalExtensionHost(emitter);\n\t\t\t}\n\n\t\t\t// set the resolved authority\n\t\t\tthis._remoteAuthorityResolverService._setResolvedAuthority(resolverResult.authority, resolverResult.options);\n\t\t\tthis._remoteExplorerService.setTunnelInformation(resolverResult.tunnelInformation);\n\n\t\t\t// monitor for breakage\n\t\t\tconst connection = this._remoteAgentService.getConnection();\n\t\t\tif (connection) {\n\t\t\t\tthis._register(connection.onDidStateChange(async (e) => {\n\t\t\t\t\tif (e.type === PersistentConnectionEventType.ConnectionLost) {\n\t\t\t\t\t\tthis._remoteAuthorityResolverService._clearResolvedAuthority(remoteAuthority);\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\tthis._register(connection.onReconnecting(() => this._resolveAuthorityAgain()));\n\t\t\t}\n\n\t\t\t// fetch the remote environment\n\t\t\t[remoteEnv, remoteExtensions] = await Promise.all([\n\t\t\t\tthis._remoteAgentService.getEnvironment(),\n\t\t\t\tthis._remoteExtensionsScannerService.scanExtensions()\n\t\t\t]);\n\n\t\t\tif (!remoteEnv) {\n\t\t\t\tthis._notificationService.notify({ severity: Severity.Error, message: nls.localize('getEnvironmentFailure', \"Could not fetch remote environment\") });\n\t\t\t\t// Proceed with the local extension host\n\t\t\t\treturn this._startLocalExtensionHost(emitter);\n\t\t\t}\n\n\t\t\tconst useHostProxyDefault = remoteEnv.useHostProxy;\n\t\t\tthis._register(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\t\tif (e.affectsConfiguration('http.useLocalProxyConfiguration')) {\n\t\t\t\t\tupdateProxyConfigurationsScope(this._configurationService.getValue('http.useLocalProxyConfiguration'), useHostProxyDefault);\n\t\t\t\t}\n\t\t\t}));\n\t\t\tupdateProxyConfigurationsScope(this._configurationService.getValue('http.useLocalProxyConfiguration'), useHostProxyDefault);\n\t\t} else {\n\n\t\t\tthis._remoteAuthorityResolverService._setCanonicalURIProvider(async (uri) => uri);\n\n\t\t}\n\n\t\treturn this._startLocalExtensionHost(emitter, remoteExtensions);\n\t}\n\n\tprivate async _startLocalExtensionHost(emitter: AsyncIterableEmitter<ResolvedExtensions>, remoteExtensions: IExtensionDescription[] = []): Promise<void> {\n\t\t// Ensure that the workspace trust state has been fully initialized so\n\t\t// that the extension host can start with the correct set of extensions.\n\t\tawait this._workspaceTrustManagementService.workspaceTrustInitialized;\n\n\t\tif (remoteExtensions.length) {\n\t\t\temitter.emitOne(new RemoteExtensions(remoteExtensions));\n\t\t}\n\n\t\temitter.emitOne(new LocalExtensions(await this._scanAllLocalExtensions()));\n\t}\n\n\tprotected async _onExtensionHostExit(code: number): Promise<void> {\n\t\t// Dispose everything associated with the extension host\n\t\tawait this._doStopExtensionHosts();\n\n\t\t// Dispose the management connection to avoid reconnecting after the extension host exits\n\t\tconst connection = this._remoteAgentService.getConnection();\n\t\tconnection?.dispose();\n\n\t\tif (parseExtensionDevOptions(this._environmentService).isExtensionDevTestFromCli) {\n\t\t\t// When CLI testing make sure to exit with proper exit code\n\t\t\tif (isCI) {\n\t\t\t\tthis._logService.info(`Asking native host service to exit with code ${code}.`);\n\t\t\t}\n\t\t\tthis._nativeHostService.exit(code);\n\t\t} else {\n\t\t\t// Expected development extension termination: When the extension host goes down we also shutdown the window\n\t\t\tthis._nativeHostService.closeWindow();\n\t\t}\n\t}\n\n\tprivate async _handleNoResolverFound(remoteAuthority: string): Promise<boolean> {\n\t\tconst remoteName = getRemoteName(remoteAuthority);\n\t\tconst recommendation = this._productService.remoteExtensionTips?.[remoteName];\n\t\tif (!recommendation) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst resolverExtensionId = recommendation.extensionId;\n\t\tconst allExtensions = await this._scanAllLocalExtensions();\n\t\tconst extension = allExtensions.filter(e => e.identifier.value === resolverExtensionId)[0];\n\t\tif (extension) {\n\t\t\tif (!extensionIsEnabled(this._logService, this._extensionEnablementService, extension, false)) {\n\t\t\t\tconst message = nls.localize('enableResolver', \"Extension '{0}' is required to open the remote window.\\nOK to enable?\", recommendation.friendlyName);\n\t\t\t\tthis._notificationService.prompt(Severity.Info, message,\n\t\t\t\t\t[{\n\t\t\t\t\t\tlabel: nls.localize('enable', 'Enable and Reload'),\n\t\t\t\t\t\trun: async () => {\n\t\t\t\t\t\t\tawait this._extensionEnablementService.setEnablement([toExtension(extension)], EnablementState.EnabledGlobally);\n\t\t\t\t\t\t\tawait this._hostService.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t}],\n\t\t\t\t\t{\n\t\t\t\t\t\tsticky: true,\n\t\t\t\t\t\tpriority: NotificationPriority.URGENT\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\t// Install the Extension and reload the window to handle.\n\t\t\tconst message = nls.localize('installResolver', \"Extension '{0}' is required to open the remote window.\\nDo you want to install the extension?\", recommendation.friendlyName);\n\t\t\tthis._notificationService.prompt(Severity.Info, message,\n\t\t\t\t[{\n\t\t\t\t\tlabel: nls.localize('install', 'Install and Reload'),\n\t\t\t\t\trun: async () => {\n\t\t\t\t\t\tconst [galleryExtension] = await this._extensionGalleryService.getExtensions([{ id: resolverExtensionId }], CancellationToken.None);\n\t\t\t\t\t\tif (galleryExtension) {\n\t\t\t\t\t\t\tawait this._extensionManagementService.installFromGallery(galleryExtension);\n\t\t\t\t\t\t\tawait this._hostService.reload();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._notificationService.error(nls.localize('resolverExtensionNotFound', \"`{0}` not found on marketplace\"));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t\t{\n\t\t\t\t\tsticky: true,\n\t\t\t\t\tpriority: NotificationPriority.URGENT,\n\t\t\t\t}\n\t\t\t);\n\n\t\t}\n\t\treturn true;\n\t}\n}\n\nclass NativeExtensionHostFactory implements IExtensionHostFactory {\n\n\tprivate readonly _webWorkerExtHostEnablement: LocalWebWorkerExtHostEnablement;\n\n\tconstructor(\n\t\tprivate readonly _extensionsProposedApi: ExtensionsProposedApi,\n\t\tprivate readonly _extensionScanner: CachedExtensionScanner,\n\t\tprivate readonly _getExtensionRegistrySnapshotWhenReady: () => Promise<ExtensionDescriptionRegistrySnapshot>,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IWorkbenchExtensionEnablementService private readonly _extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IRemoteAgentService private readonly _remoteAgentService: IRemoteAgentService,\n\t\t@IRemoteAuthorityResolverService private readonly _remoteAuthorityResolverService: IRemoteAuthorityResolverService,\n\t\t@ILogService private readonly _logService: ILogService,\n\t) {\n\t\tthis._webWorkerExtHostEnablement = determineLocalWebWorkerExtHostEnablement(environmentService, configurationService);\n\t}\n\n\tpublic createExtensionHost(runningLocations: ExtensionRunningLocationTracker, runningLocation: ExtensionRunningLocation, isInitialStart: boolean): IExtensionHost | null {\n\t\tswitch (runningLocation.kind) {\n\t\t\tcase ExtensionHostKind.LocalProcess: {\n\t\t\t\tconst startup = (\n\t\t\t\t\tisInitialStart\n\t\t\t\t\t\t? ExtensionHostStartup.EagerManualStart\n\t\t\t\t\t\t: ExtensionHostStartup.EagerAutoStart\n\t\t\t\t);\n\t\t\t\treturn this._instantiationService.createInstance(NativeLocalProcessExtensionHost, runningLocation, startup, this._createLocalProcessExtensionHostDataProvider(runningLocations, isInitialStart, runningLocation));\n\t\t\t}\n\t\t\tcase ExtensionHostKind.LocalWebWorker: {\n\t\t\t\tif (this._webWorkerExtHostEnablement !== LocalWebWorkerExtHostEnablement.Disabled) {\n\t\t\t\t\tconst startup = this._webWorkerExtHostEnablement === LocalWebWorkerExtHostEnablement.Lazy ? ExtensionHostStartup.LazyAutoStart : ExtensionHostStartup.EagerManualStart;\n\t\t\t\t\treturn this._instantiationService.createInstance(WebWorkerExtensionHost, runningLocation, startup, this._createWebWorkerExtensionHostDataProvider(runningLocations, runningLocation));\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tcase ExtensionHostKind.Remote: {\n\t\t\t\tconst remoteAgentConnection = this._remoteAgentService.getConnection();\n\t\t\t\tif (remoteAgentConnection) {\n\t\t\t\t\treturn this._instantiationService.createInstance(RemoteExtensionHost, runningLocation, this._createRemoteExtensionHostDataProvider(runningLocations, remoteAgentConnection.remoteAuthority));\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _createLocalProcessExtensionHostDataProvider(runningLocations: ExtensionRunningLocationTracker, isInitialStart: boolean, desiredRunningLocation: LocalProcessRunningLocation): ILocalProcessExtensionHostDataProvider {\n\t\treturn {\n\t\t\tgetInitData: async (): Promise<ILocalProcessExtensionHostInitData> => {\n\t\t\t\tif (isInitialStart) {\n\t\t\t\t\t// Here we load even extensions that would be disabled by workspace trust\n\t\t\t\t\tconst scannedExtensions = await this._extensionScanner.scannedExtensions;\n\t\t\t\t\tif (isCI) {\n\t\t\t\t\t\tthis._logService.info(`NativeExtensionHostFactory._createLocalProcessExtensionHostDataProvider.scannedExtensions: ${scannedExtensions.map(ext => ext.identifier.value).join(',')}`);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst localExtensions = checkEnabledAndProposedAPI(this._logService, this._extensionEnablementService, this._extensionsProposedApi, scannedExtensions, /* ignore workspace trust */true);\n\t\t\t\t\tif (isCI) {\n\t\t\t\t\t\tthis._logService.info(`NativeExtensionHostFactory._createLocalProcessExtensionHostDataProvider.localExtensions: ${localExtensions.map(ext => ext.identifier.value).join(',')}`);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst runningLocation = runningLocations.computeRunningLocation(localExtensions, [], false);\n\t\t\t\t\tconst myExtensions = filterExtensionDescriptions(localExtensions, runningLocation, extRunningLocation => desiredRunningLocation.equals(extRunningLocation));\n\t\t\t\t\tconst extensions = new ExtensionHostExtensions(0, localExtensions, myExtensions.map(extension => extension.identifier));\n\t\t\t\t\tif (isCI) {\n\t\t\t\t\t\tthis._logService.info(`NativeExtensionHostFactory._createLocalProcessExtensionHostDataProvider.myExtensions: ${myExtensions.map(ext => ext.identifier.value).join(',')}`);\n\t\t\t\t\t}\n\t\t\t\t\treturn { extensions };\n\t\t\t\t} else {\n\t\t\t\t\t// restart case\n\t\t\t\t\tconst snapshot = await this._getExtensionRegistrySnapshotWhenReady();\n\t\t\t\t\tconst myExtensions = runningLocations.filterByRunningLocation(snapshot.extensions, desiredRunningLocation);\n\t\t\t\t\tconst extensions = new ExtensionHostExtensions(snapshot.versionId, snapshot.extensions, myExtensions.map(extension => extension.identifier));\n\t\t\t\t\treturn { extensions };\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate _createWebWorkerExtensionHostDataProvider(runningLocations: ExtensionRunningLocationTracker, desiredRunningLocation: LocalWebWorkerRunningLocation): IWebWorkerExtensionHostDataProvider {\n\t\treturn {\n\t\t\tgetInitData: async (): Promise<IWebWorkerExtensionHostInitData> => {\n\t\t\t\tconst snapshot = await this._getExtensionRegistrySnapshotWhenReady();\n\t\t\t\tconst myExtensions = runningLocations.filterByRunningLocation(snapshot.extensions, desiredRunningLocation);\n\t\t\t\tconst extensions = new ExtensionHostExtensions(snapshot.versionId, snapshot.extensions, myExtensions.map(extension => extension.identifier));\n\t\t\t\treturn { extensions };\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate _createRemoteExtensionHostDataProvider(runningLocations: ExtensionRunningLocationTracker, remoteAuthority: string): IRemoteExtensionHostDataProvider {\n\t\treturn {\n\t\t\tremoteAuthority: remoteAuthority,\n\t\t\tgetInitData: async (): Promise<IRemoteExtensionHostInitData> => {\n\t\t\t\tconst snapshot = await this._getExtensionRegistrySnapshotWhenReady();\n\n\t\t\t\tconst remoteEnv = await this._remoteAgentService.getEnvironment();\n\t\t\t\tif (!remoteEnv) {\n\t\t\t\t\tthrow new Error('Cannot provide init data for remote extension host!');\n\t\t\t\t}\n\n\t\t\t\tconst myExtensions = runningLocations.filterByExtensionHostKind(snapshot.extensions, ExtensionHostKind.Remote);\n\t\t\t\tconst extensions = new ExtensionHostExtensions(snapshot.versionId, snapshot.extensions, myExtensions.map(extension => extension.identifier));\n\n\t\t\t\treturn {\n\t\t\t\t\tconnectionData: this._remoteAuthorityResolverService.getConnectionData(remoteAuthority),\n\t\t\t\t\tpid: remoteEnv.pid,\n\t\t\t\t\tappRoot: remoteEnv.appRoot,\n\t\t\t\t\textensionHostLogsPath: remoteEnv.extensionHostLogsPath,\n\t\t\t\t\tglobalStorageHome: remoteEnv.globalStorageHome,\n\t\t\t\t\tworkspaceStorageHome: remoteEnv.workspaceStorageHome,\n\t\t\t\t\textensions,\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t}\n}\n\nfunction determineLocalWebWorkerExtHostEnablement(environmentService: IWorkbenchEnvironmentService, configurationService: IConfigurationService): LocalWebWorkerExtHostEnablement {\n\tif (environmentService.isExtensionDevelopment && environmentService.extensionDevelopmentKind?.some(k => k === 'web')) {\n\t\treturn LocalWebWorkerExtHostEnablement.Eager;\n\t} else {\n\t\tconst config = configurationService.getValue<WebWorkerExtHostConfigValue>(webWorkerExtHostConfig);\n\t\tif (config === true) {\n\t\t\treturn LocalWebWorkerExtHostEnablement.Eager;\n\t\t} else if (config === 'auto') {\n\t\t\treturn LocalWebWorkerExtHostEnablement.Lazy;\n\t\t} else {\n\t\t\treturn LocalWebWorkerExtHostEnablement.Disabled;\n\t\t}\n\t}\n}\n\nconst enum LocalWebWorkerExtHostEnablement {\n\tDisabled = 0,\n\tEager = 1,\n\tLazy = 2\n}\n\nexport class NativeExtensionHostKindPicker implements IExtensionHostKindPicker {\n\n\tprivate readonly _hasRemoteExtHost: boolean;\n\tprivate readonly _hasWebWorkerExtHost: boolean;\n\n\tconstructor(\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ILogService private readonly _logService: ILogService,\n\t) {\n\t\tthis._hasRemoteExtHost = Boolean(environmentService.remoteAuthority);\n\t\tconst webWorkerExtHostEnablement = determineLocalWebWorkerExtHostEnablement(environmentService, configurationService);\n\t\tthis._hasWebWorkerExtHost = (webWorkerExtHostEnablement !== LocalWebWorkerExtHostEnablement.Disabled);\n\t}\n\n\tpublic pickExtensionHostKind(extensionId: ExtensionIdentifier, extensionKinds: ExtensionKind[], isInstalledLocally: boolean, isInstalledRemotely: boolean, preference: ExtensionRunningPreference): ExtensionHostKind | null {\n\t\tconst result = NativeExtensionHostKindPicker.pickExtensionHostKind(extensionKinds, isInstalledLocally, isInstalledRemotely, preference, this._hasRemoteExtHost, this._hasWebWorkerExtHost);\n\t\tthis._logService.trace(`pickRunningLocation for ${extensionId.value}, extension kinds: [${extensionKinds.join(', ')}], isInstalledLocally: ${isInstalledLocally}, isInstalledRemotely: ${isInstalledRemotely}, preference: ${extensionRunningPreferenceToString(preference)} => ${extensionHostKindToString(result)}`);\n\t\treturn result;\n\t}\n\n\tpublic static pickExtensionHostKind(extensionKinds: ExtensionKind[], isInstalledLocally: boolean, isInstalledRemotely: boolean, preference: ExtensionRunningPreference, hasRemoteExtHost: boolean, hasWebWorkerExtHost: boolean): ExtensionHostKind | null {\n\t\tconst result: ExtensionHostKind[] = [];\n\t\tfor (const extensionKind of extensionKinds) {\n\t\t\tif (extensionKind === 'ui' && isInstalledLocally) {\n\t\t\t\t// ui extensions run locally if possible\n\t\t\t\tif (preference === ExtensionRunningPreference.None || preference === ExtensionRunningPreference.Local) {\n\t\t\t\t\treturn ExtensionHostKind.LocalProcess;\n\t\t\t\t} else {\n\t\t\t\t\tresult.push(ExtensionHostKind.LocalProcess);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (extensionKind === 'workspace' && isInstalledRemotely) {\n\t\t\t\t// workspace extensions run remotely if possible\n\t\t\t\tif (preference === ExtensionRunningPreference.None || preference === ExtensionRunningPreference.Remote) {\n\t\t\t\t\treturn ExtensionHostKind.Remote;\n\t\t\t\t} else {\n\t\t\t\t\tresult.push(ExtensionHostKind.Remote);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (extensionKind === 'workspace' && !hasRemoteExtHost) {\n\t\t\t\t// workspace extensions also run locally if there is no remote\n\t\t\t\tif (preference === ExtensionRunningPreference.None || preference === ExtensionRunningPreference.Local) {\n\t\t\t\t\treturn ExtensionHostKind.LocalProcess;\n\t\t\t\t} else {\n\t\t\t\t\tresult.push(ExtensionHostKind.LocalProcess);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (extensionKind === 'web' && isInstalledLocally && hasWebWorkerExtHost) {\n\t\t\t\t// web worker extensions run in the local web worker if possible\n\t\t\t\tif (preference === ExtensionRunningPreference.None || preference === ExtensionRunningPreference.Local) {\n\t\t\t\t\treturn ExtensionHostKind.LocalWebWorker;\n\t\t\t\t} else {\n\t\t\t\t\tresult.push(ExtensionHostKind.LocalWebWorker);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn (result.length > 0 ? result[0] : null);\n\t}\n}\n\nclass RestartExtensionHostAction extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.restartExtensionHost',\n\t\t\ttitle: nls.localize2('restartExtensionHost', \"Restart Extension Host\"),\n\t\t\tcategory: Categories.Developer,\n\t\t\tf1: true\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor): Promise<void> {\n\t\tconst extensionService = accessor.get(IExtensionService);\n\n\t\tconst stopped = await extensionService.stopExtensionHosts(nls.localize('restartExtensionHost.reason', \"An explicit request\"));\n\t\tif (stopped) {\n\t\t\textensionService.startExtensionHosts();\n\t\t}\n\t}\n}\n\nregisterAction2(RestartExtensionHostAction);\n\nregisterSingleton(IExtensionService, NativeExtensionService, InstantiationType.Eager);\n"]}