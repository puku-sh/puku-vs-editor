{"version":3,"sources":["vs/workbench/services/extensions/common/extensionsUtil.ts"],"names":[],"mappings":"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","file":"extensionsUtil.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ExtensionIdentifierMap, IExtensionDescription } from '../../../../platform/extensions/common/extensions.js';\nimport { localize } from '../../../../nls.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport * as semver from '../../../../base/common/semver/semver.js';\nimport { Mutable } from '../../../../base/common/types.js';\n\n// TODO: @sandy081 merge this with deduping in extensionsScannerService.ts\nexport function dedupExtensions(system: IExtensionDescription[], user: IExtensionDescription[], workspace: IExtensionDescription[], development: IExtensionDescription[], logService: ILogService): IExtensionDescription[] {\n\tconst result = new ExtensionIdentifierMap<IExtensionDescription>();\n\tsystem.forEach((systemExtension) => {\n\t\tconst extension = result.get(systemExtension.identifier);\n\t\tif (extension) {\n\t\t\tlogService.warn(localize('overwritingExtension', \"Overwriting extension {0} with {1}.\", extension.extensionLocation.fsPath, systemExtension.extensionLocation.fsPath));\n\t\t}\n\t\tresult.set(systemExtension.identifier, systemExtension);\n\t});\n\tuser.forEach((userExtension) => {\n\t\tconst extension = result.get(userExtension.identifier);\n\t\tif (extension) {\n\t\t\tif (extension.isBuiltin) {\n\t\t\t\tif (semver.gte(extension.version, userExtension.version)) {\n\t\t\t\t\tlogService.warn(`Skipping extension ${userExtension.extensionLocation.path} in favour of the builtin extension ${extension.extensionLocation.path}.`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// Overwriting a builtin extension inherits the `isBuiltin` property and it doesn't show a warning\n\t\t\t\t(<Mutable<IExtensionDescription>>userExtension).isBuiltin = true;\n\t\t\t} else {\n\t\t\t\tlogService.warn(localize('overwritingExtension', \"Overwriting extension {0} with {1}.\", extension.extensionLocation.fsPath, userExtension.extensionLocation.fsPath));\n\t\t\t}\n\t\t} else if (userExtension.isBuiltin) {\n\t\t\tlogService.warn(`Skipping obsolete builtin extension ${userExtension.extensionLocation.path}`);\n\t\t\treturn;\n\t\t}\n\t\tresult.set(userExtension.identifier, userExtension);\n\t});\n\tworkspace.forEach(workspaceExtension => {\n\t\tconst extension = result.get(workspaceExtension.identifier);\n\t\tif (extension) {\n\t\t\tlogService.warn(localize('overwritingWithWorkspaceExtension', \"Overwriting {0} with Workspace Extension {1}.\", extension.extensionLocation.fsPath, workspaceExtension.extensionLocation.fsPath));\n\t\t}\n\t\tresult.set(workspaceExtension.identifier, workspaceExtension);\n\t});\n\tdevelopment.forEach(developedExtension => {\n\t\tlogService.info(localize('extensionUnderDevelopment', \"Loading development extension at {0}\", developedExtension.extensionLocation.fsPath));\n\t\tconst extension = result.get(developedExtension.identifier);\n\t\tif (extension) {\n\t\t\tif (extension.isBuiltin) {\n\t\t\t\t// Overwriting a builtin extension inherits the `isBuiltin` property\n\t\t\t\t(<Mutable<IExtensionDescription>>developedExtension).isBuiltin = true;\n\t\t\t}\n\t\t}\n\t\tresult.set(developedExtension.identifier, developedExtension);\n\t});\n\treturn Array.from(result.values());\n}\n"]}