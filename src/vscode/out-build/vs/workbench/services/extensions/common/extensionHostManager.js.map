{"version":3,"sources":["vs/workbench/services/extensions/common/extensionHostManager.ts"],"names":[],"mappings":"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","file":"extensionHostManager.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IntervalTimer } from '../../../../base/common/async.js';\nimport { VSBuffer } from '../../../../base/common/buffer.js';\nimport * as errors from '../../../../base/common/errors.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable, IDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IMessagePassingProtocol } from '../../../../base/parts/ipc/common/ipc.js';\nimport * as nls from '../../../../nls.js';\nimport { Categories } from '../../../../platform/action/common/actionCommonCategories.js';\nimport { Action2, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { ExtensionIdentifier, IExtensionDescription } from '../../../../platform/extensions/common/extensions.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { RemoteAuthorityResolverErrorCode, getRemoteAuthorityPrefix } from '../../../../platform/remote/common/remoteAuthorityResolver.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IEditorService } from '../../editor/common/editorService.js';\nimport { IWorkbenchEnvironmentService } from '../../environment/common/environmentService.js';\nimport { ExtHostCustomersRegistry, IInternalExtHostContext } from './extHostCustomers.js';\nimport { ExtensionHostKind, extensionHostKindToString } from './extensionHostKind.js';\nimport { IExtensionHostManager } from './extensionHostManagers.js';\nimport { IExtensionDescriptionDelta } from './extensionHostProtocol.js';\nimport { IExtensionHostProxy, IResolveAuthorityResult } from './extensionHostProxy.js';\nimport { ExtensionRunningLocation } from './extensionRunningLocation.js';\nimport { ActivationKind, ExtensionActivationReason, ExtensionHostStartup, IExtensionHost, IExtensionInspectInfo, IInternalExtensionService } from './extensions.js';\nimport { Proxied, ProxyIdentifier } from './proxyIdentifier.js';\nimport { IRPCProtocolLogger, RPCProtocol, RequestInitiator, ResponsiveState } from './rpcProtocol.js';\n\n// Enable to see detailed message communication between window and extension host\nconst LOG_EXTENSION_HOST_COMMUNICATION = false;\nconst LOG_USE_COLORS = true;\n\ntype ExtensionHostStartupClassification = {\n\towner: 'alexdima';\n\tcomment: 'The startup state of the extension host';\n\ttime: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The time reported by Date.now().' };\n\taction: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The action: starting, success or error.' };\n\tkind: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The extension host kind: LocalProcess, LocalWebWorker or Remote.' };\n\terrorName?: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The error name.' };\n\terrorMessage?: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The error message.' };\n\terrorStack?: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The error stack.' };\n};\n\ntype ExtensionHostStartupEvent = {\n\ttime: number;\n\taction: 'starting' | 'success' | 'error';\n\tkind: string;\n\terrorName?: string;\n\terrorMessage?: string;\n\terrorStack?: string;\n};\n\nexport class ExtensionHostManager extends Disposable implements IExtensionHostManager {\n\n\tpublic readonly onDidExit: Event<[number, string | null]>;\n\n\tprivate readonly _onDidChangeResponsiveState: Emitter<ResponsiveState> = this._register(new Emitter<ResponsiveState>());\n\tpublic readonly onDidChangeResponsiveState: Event<ResponsiveState> = this._onDidChangeResponsiveState.event;\n\n\t/**\n\t * A map of already requested activation events to speed things up if the same activation event is triggered multiple times.\n\t */\n\tprivate readonly _cachedActivationEvents: Map<string, Promise<void>>;\n\tprivate readonly _resolvedActivationEvents: Set<string>;\n\tprivate _rpcProtocol: RPCProtocol | null;\n\tprivate readonly _customers: IDisposable[];\n\tprivate readonly _extensionHost: IExtensionHost;\n\tprivate _proxy: Promise<IExtensionHostProxy | null> | null;\n\tprivate _hasStarted = false;\n\n\tpublic get pid(): number | null {\n\t\treturn this._extensionHost.pid;\n\t}\n\n\tpublic get kind(): ExtensionHostKind {\n\t\treturn this._extensionHost.runningLocation.kind;\n\t}\n\n\tpublic get startup(): ExtensionHostStartup {\n\t\treturn this._extensionHost.startup;\n\t}\n\n\tpublic get friendyName(): string {\n\t\treturn friendlyExtHostName(this.kind, this.pid);\n\t}\n\n\tconstructor(\n\t\textensionHost: IExtensionHost,\n\t\tinitialActivationEvents: string[],\n\t\tprivate readonly _internalExtensionService: IInternalExtensionService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IWorkbenchEnvironmentService private readonly _environmentService: IWorkbenchEnvironmentService,\n\t\t@ITelemetryService private readonly _telemetryService: ITelemetryService,\n\t\t@ILogService private readonly _logService: ILogService,\n\t) {\n\t\tsuper();\n\t\tthis._cachedActivationEvents = new Map<string, Promise<void>>();\n\t\tthis._resolvedActivationEvents = new Set<string>();\n\t\tthis._rpcProtocol = null;\n\t\tthis._customers = [];\n\n\t\tthis._extensionHost = extensionHost;\n\t\tthis.onDidExit = this._extensionHost.onExit;\n\n\t\tconst startingTelemetryEvent: ExtensionHostStartupEvent = {\n\t\t\ttime: Date.now(),\n\t\t\taction: 'starting',\n\t\t\tkind: extensionHostKindToString(this.kind)\n\t\t};\n\t\tthis._telemetryService.publicLog2<ExtensionHostStartupEvent, ExtensionHostStartupClassification>('extensionHostStartup', startingTelemetryEvent);\n\n\t\tthis._proxy = this._extensionHost.start().then(\n\t\t\t(protocol) => {\n\t\t\t\tthis._hasStarted = true;\n\n\t\t\t\t// Track healthy extension host startup\n\t\t\t\tconst successTelemetryEvent: ExtensionHostStartupEvent = {\n\t\t\t\t\ttime: Date.now(),\n\t\t\t\t\taction: 'success',\n\t\t\t\t\tkind: extensionHostKindToString(this.kind)\n\t\t\t\t};\n\t\t\t\tthis._telemetryService.publicLog2<ExtensionHostStartupEvent, ExtensionHostStartupClassification>('extensionHostStartup', successTelemetryEvent);\n\n\t\t\t\treturn this._createExtensionHostCustomers(this.kind, protocol);\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tthis._logService.error(`Error received from starting extension host (kind: ${extensionHostKindToString(this.kind)})`);\n\t\t\t\tthis._logService.error(err);\n\n\t\t\t\t// Track errors during extension host startup\n\t\t\t\tconst failureTelemetryEvent: ExtensionHostStartupEvent = {\n\t\t\t\t\ttime: Date.now(),\n\t\t\t\t\taction: 'error',\n\t\t\t\t\tkind: extensionHostKindToString(this.kind)\n\t\t\t\t};\n\n\t\t\t\tif (err && err.name) {\n\t\t\t\t\tfailureTelemetryEvent.errorName = err.name;\n\t\t\t\t}\n\t\t\t\tif (err && err.message) {\n\t\t\t\t\tfailureTelemetryEvent.errorMessage = err.message;\n\t\t\t\t}\n\t\t\t\tif (err && err.stack) {\n\t\t\t\t\tfailureTelemetryEvent.errorStack = err.stack;\n\t\t\t\t}\n\t\t\t\tthis._telemetryService.publicLog2<ExtensionHostStartupEvent, ExtensionHostStartupClassification>('extensionHostStartup', failureTelemetryEvent);\n\n\t\t\t\treturn null;\n\t\t\t}\n\t\t);\n\t\tthis._proxy.then(() => {\n\t\t\tinitialActivationEvents.forEach((activationEvent) => this.activateByEvent(activationEvent, ActivationKind.Normal));\n\t\t\tthis._register(registerLatencyTestProvider({\n\t\t\t\tmeasure: () => this.measure()\n\t\t\t}));\n\t\t});\n\t}\n\n\tpublic async disconnect(): Promise<void> {\n\t\tawait this._extensionHost?.disconnect?.();\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis._extensionHost?.dispose();\n\t\tthis._rpcProtocol?.dispose();\n\n\t\tfor (let i = 0, len = this._customers.length; i < len; i++) {\n\t\t\tconst customer = this._customers[i];\n\t\t\ttry {\n\t\t\t\tcustomer.dispose();\n\t\t\t} catch (err) {\n\t\t\t\terrors.onUnexpectedError(err);\n\t\t\t}\n\t\t}\n\t\tthis._proxy = null;\n\n\t\tsuper.dispose();\n\t}\n\n\tprivate async measure(): Promise<ExtHostLatencyResult | null> {\n\t\tconst proxy = await this._proxy;\n\t\tif (!proxy) {\n\t\t\treturn null;\n\t\t}\n\t\tconst latency = await this._measureLatency(proxy);\n\t\tconst down = await this._measureDown(proxy);\n\t\tconst up = await this._measureUp(proxy);\n\t\treturn {\n\t\t\tremoteAuthority: this._extensionHost.remoteAuthority,\n\t\t\tlatency,\n\t\t\tdown,\n\t\t\tup\n\t\t};\n\t}\n\n\tpublic async ready(): Promise<void> {\n\t\tawait this._proxy;\n\t}\n\n\tprivate async _measureLatency(proxy: IExtensionHostProxy): Promise<number> {\n\t\tconst COUNT = 10;\n\n\t\tlet sum = 0;\n\t\tfor (let i = 0; i < COUNT; i++) {\n\t\t\tconst sw = StopWatch.create();\n\t\t\tawait proxy.test_latency(i);\n\t\t\tsw.stop();\n\t\t\tsum += sw.elapsed();\n\t\t}\n\t\treturn (sum / COUNT);\n\t}\n\n\tprivate static _convert(byteCount: number, elapsedMillis: number): number {\n\t\treturn (byteCount * 1000 * 8) / elapsedMillis;\n\t}\n\n\tprivate async _measureUp(proxy: IExtensionHostProxy): Promise<number> {\n\t\tconst SIZE = 10 * 1024 * 1024; // 10MB\n\n\t\tconst buff = VSBuffer.alloc(SIZE);\n\t\tconst value = Math.ceil(Math.random() * 256);\n\t\tfor (let i = 0; i < buff.byteLength; i++) {\n\t\t\tbuff.writeUInt8(i, value);\n\t\t}\n\t\tconst sw = StopWatch.create();\n\t\tawait proxy.test_up(buff);\n\t\tsw.stop();\n\t\treturn ExtensionHostManager._convert(SIZE, sw.elapsed());\n\t}\n\n\tprivate async _measureDown(proxy: IExtensionHostProxy): Promise<number> {\n\t\tconst SIZE = 10 * 1024 * 1024; // 10MB\n\n\t\tconst sw = StopWatch.create();\n\t\tawait proxy.test_down(SIZE);\n\t\tsw.stop();\n\t\treturn ExtensionHostManager._convert(SIZE, sw.elapsed());\n\t}\n\n\tprivate _createExtensionHostCustomers(kind: ExtensionHostKind, protocol: IMessagePassingProtocol): IExtensionHostProxy {\n\n\t\tlet logger: IRPCProtocolLogger | null = null;\n\t\tif (LOG_EXTENSION_HOST_COMMUNICATION || this._environmentService.logExtensionHostCommunication) {\n\t\t\tlogger = new RPCLogger(kind);\n\t\t} else if (TelemetryRPCLogger.isEnabled()) {\n\t\t\tlogger = new TelemetryRPCLogger(this._telemetryService);\n\t\t}\n\n\t\tthis._rpcProtocol = new RPCProtocol(protocol, logger);\n\t\tthis._register(this._rpcProtocol.onDidChangeResponsiveState((responsiveState: ResponsiveState) => this._onDidChangeResponsiveState.fire(responsiveState)));\n\t\tlet extensionHostProxy: IExtensionHostProxy | null = null as IExtensionHostProxy | null;\n\t\tlet mainProxyIdentifiers: ProxyIdentifier<any>[] = [];\n\t\tconst extHostContext: IInternalExtHostContext = {\n\t\t\tremoteAuthority: this._extensionHost.remoteAuthority,\n\t\t\textensionHostKind: this.kind,\n\t\t\tgetProxy: <T>(identifier: ProxyIdentifier<T>): Proxied<T> => this._rpcProtocol!.getProxy(identifier),\n\t\t\tset: <T, R extends T>(identifier: ProxyIdentifier<T>, instance: R): R => this._rpcProtocol!.set(identifier, instance),\n\t\t\tdispose: (): void => this._rpcProtocol!.dispose(),\n\t\t\tassertRegistered: (identifiers: ProxyIdentifier<any>[]): void => this._rpcProtocol!.assertRegistered(identifiers),\n\t\t\tdrain: (): Promise<void> => this._rpcProtocol!.drain(),\n\n\t\t\t//#region internal\n\t\t\tinternalExtensionService: this._internalExtensionService,\n\t\t\t_setExtensionHostProxy: (value: IExtensionHostProxy): void => {\n\t\t\t\textensionHostProxy = value;\n\t\t\t},\n\t\t\t_setAllMainProxyIdentifiers: (value: ProxyIdentifier<any>[]): void => {\n\t\t\t\tmainProxyIdentifiers = value;\n\t\t\t},\n\t\t\t//#endregion\n\t\t};\n\n\t\t// Named customers\n\t\tconst namedCustomers = ExtHostCustomersRegistry.getNamedCustomers();\n\t\tfor (let i = 0, len = namedCustomers.length; i < len; i++) {\n\t\t\tconst [id, ctor] = namedCustomers[i];\n\t\t\ttry {\n\t\t\t\tconst instance = this._instantiationService.createInstance(ctor, extHostContext);\n\t\t\t\tthis._customers.push(instance);\n\t\t\t\tthis._rpcProtocol.set(id, instance);\n\t\t\t} catch (err) {\n\t\t\t\tthis._logService.error(`Cannot instantiate named customer: '${id.sid}'`);\n\t\t\t\tthis._logService.error(err);\n\t\t\t\terrors.onUnexpectedError(err);\n\t\t\t}\n\t\t}\n\n\t\t// Customers\n\t\tconst customers = ExtHostCustomersRegistry.getCustomers();\n\t\tfor (const ctor of customers) {\n\t\t\ttry {\n\t\t\t\tconst instance = this._instantiationService.createInstance(ctor, extHostContext);\n\t\t\t\tthis._customers.push(instance);\n\t\t\t} catch (err) {\n\t\t\t\tthis._logService.error(err);\n\t\t\t\terrors.onUnexpectedError(err);\n\t\t\t}\n\t\t}\n\n\t\tif (!extensionHostProxy) {\n\t\t\tthrow new Error(`Missing IExtensionHostProxy!`);\n\t\t}\n\n\t\t// Check that no named customers are missing\n\t\tthis._rpcProtocol.assertRegistered(mainProxyIdentifiers);\n\n\t\treturn extensionHostProxy;\n\t}\n\n\tpublic async activate(extension: ExtensionIdentifier, reason: ExtensionActivationReason): Promise<boolean> {\n\t\tconst proxy = await this._proxy;\n\t\tif (!proxy) {\n\t\t\treturn false;\n\t\t}\n\t\treturn proxy.activate(extension, reason);\n\t}\n\n\tpublic activateByEvent(activationEvent: string, activationKind: ActivationKind): Promise<void> {\n\t\tif (activationKind === ActivationKind.Immediate && !this._hasStarted) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tif (!this._cachedActivationEvents.has(activationEvent)) {\n\t\t\tthis._cachedActivationEvents.set(activationEvent, this._activateByEvent(activationEvent, activationKind));\n\t\t}\n\t\treturn this._cachedActivationEvents.get(activationEvent)!;\n\t}\n\n\tpublic activationEventIsDone(activationEvent: string): boolean {\n\t\treturn this._resolvedActivationEvents.has(activationEvent);\n\t}\n\n\tprivate async _activateByEvent(activationEvent: string, activationKind: ActivationKind): Promise<void> {\n\t\tif (!this._proxy) {\n\t\t\treturn;\n\t\t}\n\t\tconst proxy = await this._proxy;\n\t\tif (!proxy) {\n\t\t\t// this case is already covered above and logged.\n\t\t\t// i.e. the extension host could not be started\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._extensionHost.extensions!.containsActivationEvent(activationEvent)) {\n\t\t\tthis._resolvedActivationEvents.add(activationEvent);\n\t\t\treturn;\n\t\t}\n\n\t\tawait proxy.activateByEvent(activationEvent, activationKind);\n\t\tthis._resolvedActivationEvents.add(activationEvent);\n\t}\n\n\tpublic async getInspectPort(tryEnableInspector: boolean): Promise<IExtensionInspectInfo | undefined> {\n\t\tif (this._extensionHost) {\n\t\t\tif (tryEnableInspector) {\n\t\t\t\tawait this._extensionHost.enableInspectPort();\n\t\t\t}\n\t\t\tconst port = this._extensionHost.getInspectPort();\n\t\t\tif (port) {\n\t\t\t\treturn port;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tpublic async resolveAuthority(remoteAuthority: string, resolveAttempt: number): Promise<IResolveAuthorityResult> {\n\t\tconst sw = StopWatch.create(false);\n\t\tconst prefix = () => `[${extensionHostKindToString(this._extensionHost.runningLocation.kind)}${this._extensionHost.runningLocation.affinity}][resolveAuthority(${getRemoteAuthorityPrefix(remoteAuthority)},${resolveAttempt})][${sw.elapsed()}ms] `;\n\t\tconst logInfo = (msg: string) => this._logService.info(`${prefix()}${msg}`);\n\t\tconst logError = (msg: string, err: any = undefined) => this._logService.error(`${prefix()}${msg}`, err);\n\n\t\tlogInfo(`obtaining proxy...`);\n\t\tconst proxy = await this._proxy;\n\t\tif (!proxy) {\n\t\t\tlogError(`no proxy`);\n\t\t\treturn {\n\t\t\t\ttype: 'error',\n\t\t\t\terror: {\n\t\t\t\t\tmessage: `Cannot resolve authority`,\n\t\t\t\t\tcode: RemoteAuthorityResolverErrorCode.Unknown,\n\t\t\t\t\tdetail: undefined\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tlogInfo(`invoking...`);\n\t\tconst intervalLogger = new IntervalTimer();\n\t\ttry {\n\t\t\tintervalLogger.cancelAndSet(() => logInfo('waiting...'), 1000);\n\t\t\tconst resolverResult = await proxy.resolveAuthority(remoteAuthority, resolveAttempt);\n\t\t\tintervalLogger.dispose();\n\t\t\tif (resolverResult.type === 'ok') {\n\t\t\t\tlogInfo(`returned ${resolverResult.value.authority.connectTo}`);\n\t\t\t} else {\n\t\t\t\tlogError(`returned an error`, resolverResult.error);\n\t\t\t}\n\t\t\treturn resolverResult;\n\t\t} catch (err) {\n\t\t\tintervalLogger.dispose();\n\t\t\tlogError(`returned an error`, err);\n\t\t\treturn {\n\t\t\t\ttype: 'error',\n\t\t\t\terror: {\n\t\t\t\t\tmessage: err.message,\n\t\t\t\t\tcode: RemoteAuthorityResolverErrorCode.Unknown,\n\t\t\t\t\tdetail: err\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n\n\tpublic async getCanonicalURI(remoteAuthority: string, uri: URI): Promise<URI | null> {\n\t\tconst proxy = await this._proxy;\n\t\tif (!proxy) {\n\t\t\tthrow new Error(`Cannot resolve canonical URI`);\n\t\t}\n\t\treturn proxy.getCanonicalURI(remoteAuthority, uri);\n\t}\n\n\tpublic async start(extensionRegistryVersionId: number, allExtensions: IExtensionDescription[], myExtensions: ExtensionIdentifier[]): Promise<void> {\n\t\tconst proxy = await this._proxy;\n\t\tif (!proxy) {\n\t\t\treturn;\n\t\t}\n\t\tconst deltaExtensions = this._extensionHost.extensions!.set(extensionRegistryVersionId, allExtensions, myExtensions);\n\t\treturn proxy.startExtensionHost(deltaExtensions);\n\t}\n\n\tpublic async extensionTestsExecute(): Promise<number> {\n\t\tconst proxy = await this._proxy;\n\t\tif (!proxy) {\n\t\t\tthrow new Error('Could not obtain Extension Host Proxy');\n\t\t}\n\t\treturn proxy.extensionTestsExecute();\n\t}\n\n\tpublic representsRunningLocation(runningLocation: ExtensionRunningLocation): boolean {\n\t\treturn this._extensionHost.runningLocation.equals(runningLocation);\n\t}\n\n\tpublic async deltaExtensions(incomingExtensionsDelta: IExtensionDescriptionDelta): Promise<void> {\n\t\tconst proxy = await this._proxy;\n\t\tif (!proxy) {\n\t\t\treturn;\n\t\t}\n\t\tconst outgoingExtensionsDelta = this._extensionHost.extensions!.delta(incomingExtensionsDelta);\n\t\tif (!outgoingExtensionsDelta) {\n\t\t\t// The extension host already has this version of the extensions.\n\t\t\treturn;\n\t\t}\n\t\treturn proxy.deltaExtensions(outgoingExtensionsDelta);\n\t}\n\n\tpublic containsExtension(extensionId: ExtensionIdentifier): boolean {\n\t\treturn this._extensionHost.extensions?.containsExtension(extensionId) ?? false;\n\t}\n\n\tpublic async setRemoteEnvironment(env: { [key: string]: string | null }): Promise<void> {\n\t\tconst proxy = await this._proxy;\n\t\tif (!proxy) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn proxy.setRemoteEnvironment(env);\n\t}\n}\n\nexport function friendlyExtHostName(kind: ExtensionHostKind, pid: number | null) {\n\tif (pid) {\n\t\treturn `${extensionHostKindToString(kind)} pid: ${pid}`;\n\t}\n\treturn `${extensionHostKindToString(kind)}`;\n}\n\nconst colorTables = [\n\t['#2977B1', '#FC802D', '#34A13A', '#D3282F', '#9366BA'],\n\t['#8B564C', '#E177C0', '#7F7F7F', '#BBBE3D', '#2EBECD']\n];\n\nfunction prettyWithoutArrays(data: any): any {\n\tif (Array.isArray(data)) {\n\t\treturn data;\n\t}\n\tif (data && typeof data === 'object' && typeof data.toString === 'function') {\n\t\tconst result = data.toString();\n\t\tif (result !== '[object Object]') {\n\t\t\treturn result;\n\t\t}\n\t}\n\treturn data;\n}\n\nfunction pretty(data: any): any {\n\tif (Array.isArray(data)) {\n\t\treturn data.map(prettyWithoutArrays);\n\t}\n\treturn prettyWithoutArrays(data);\n}\n\nclass RPCLogger implements IRPCProtocolLogger {\n\n\tprivate _totalIncoming = 0;\n\tprivate _totalOutgoing = 0;\n\n\tconstructor(\n\t\tprivate readonly _kind: ExtensionHostKind\n\t) { }\n\n\tprivate _log(direction: string, totalLength: number, msgLength: number, req: number, initiator: RequestInitiator, str: string, data: any): void {\n\t\tdata = pretty(data);\n\n\t\tconst colorTable = colorTables[initiator];\n\t\tconst color = LOG_USE_COLORS ? colorTable[req % colorTable.length] : '#000000';\n\t\tlet args = [`%c[${extensionHostKindToString(this._kind)}][${direction}]%c[${String(totalLength).padStart(7)}]%c[len: ${String(msgLength).padStart(5)}]%c${String(req).padStart(5)} - ${str}`, 'color: darkgreen', 'color: grey', 'color: grey', `color: ${color}`];\n\t\tif (/\\($/.test(str)) {\n\t\t\targs = args.concat(data);\n\t\t\targs.push(')');\n\t\t} else {\n\t\t\targs.push(data);\n\t\t}\n\t\tconsole.log.apply(console, args as [string, ...string[]]);\n\t}\n\n\tlogIncoming(msgLength: number, req: number, initiator: RequestInitiator, str: string, data?: any): void {\n\t\tthis._totalIncoming += msgLength;\n\t\tthis._log('Ext \\u2192 Win', this._totalIncoming, msgLength, req, initiator, str, data);\n\t}\n\n\tlogOutgoing(msgLength: number, req: number, initiator: RequestInitiator, str: string, data?: any): void {\n\t\tthis._totalOutgoing += msgLength;\n\t\tthis._log('Win \\u2192 Ext', this._totalOutgoing, msgLength, req, initiator, str, data);\n\t}\n}\n\ninterface RPCTelemetryData {\n\ttype: string;\n\tlength: number;\n}\n\ntype RPCTelemetryDataClassification = {\n\towner: 'jrieken';\n\tcomment: 'Insights about RPC message sizes';\n\ttype: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The type of the RPC message' };\n\tlength: { classification: 'SystemMetaData'; purpose: 'PerformanceAndHealth'; comment: 'The byte-length of the RPC message' };\n};\n\nclass TelemetryRPCLogger implements IRPCProtocolLogger {\n\n\tstatic isEnabled(): boolean {\n\t\treturn Math.random() < 0.0001; // 0.01% of users\n\t}\n\n\tprivate readonly _pendingRequests = new Map<number, string>();\n\n\tconstructor(@ITelemetryService private readonly _telemetryService: ITelemetryService) { }\n\n\tlogIncoming(msgLength: number, req: number, initiator: RequestInitiator, str: string): void {\n\n\t\tif (initiator === RequestInitiator.LocalSide && /^receiveReply(Err)?:/.test(str)) {\n\t\t\t// log the size of reply messages\n\t\t\tconst requestStr = this._pendingRequests.get(req) ?? 'unknown_reply';\n\t\t\tthis._pendingRequests.delete(req);\n\t\t\tthis._telemetryService.publicLog2<RPCTelemetryData, RPCTelemetryDataClassification>('extensionhost.incoming', {\n\t\t\t\ttype: `${str} ${requestStr}`,\n\t\t\t\tlength: msgLength\n\t\t\t});\n\t\t}\n\n\t\tif (initiator === RequestInitiator.OtherSide && /^receiveRequest /.test(str)) {\n\t\t\t// incoming request\n\t\t\tthis._telemetryService.publicLog2<RPCTelemetryData, RPCTelemetryDataClassification>('extensionhost.incoming', {\n\t\t\t\ttype: `${str}`,\n\t\t\t\tlength: msgLength\n\t\t\t});\n\t\t}\n\t}\n\n\tlogOutgoing(msgLength: number, req: number, initiator: RequestInitiator, str: string): void {\n\n\t\tif (initiator === RequestInitiator.LocalSide && str.startsWith('request: ')) {\n\t\t\tthis._pendingRequests.set(req, str);\n\t\t\tthis._telemetryService.publicLog2<RPCTelemetryData, RPCTelemetryDataClassification>('extensionhost.outgoing', {\n\t\t\t\ttype: str,\n\t\t\t\tlength: msgLength\n\t\t\t});\n\t\t}\n\t}\n}\n\ninterface ExtHostLatencyResult {\n\tremoteAuthority: string | null;\n\tup: number;\n\tdown: number;\n\tlatency: number;\n}\n\ninterface ExtHostLatencyProvider {\n\tmeasure(): Promise<ExtHostLatencyResult | null>;\n}\n\nconst providers: ExtHostLatencyProvider[] = [];\nfunction registerLatencyTestProvider(provider: ExtHostLatencyProvider): IDisposable {\n\tproviders.push(provider);\n\treturn {\n\t\tdispose: () => {\n\t\t\tfor (let i = 0; i < providers.length; i++) {\n\t\t\t\tif (providers[i] === provider) {\n\t\t\t\t\tproviders.splice(i, 1);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction getLatencyTestProviders(): ExtHostLatencyProvider[] {\n\treturn providers.slice(0);\n}\n\nregisterAction2(class MeasureExtHostLatencyAction extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.measureExtHostLatency',\n\t\t\ttitle: nls.localize2('measureExtHostLatency', \"Measure Extension Host Latency\"),\n\t\t\tcategory: Categories.Developer,\n\t\t\tf1: true\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor) {\n\n\t\tconst editorService = accessor.get(IEditorService);\n\n\t\tconst measurements = await Promise.all(getLatencyTestProviders().map(provider => provider.measure()));\n\t\teditorService.openEditor({ resource: undefined, contents: measurements.map(MeasureExtHostLatencyAction._print).join('\\n\\n'), options: { pinned: true } });\n\t}\n\n\tprivate static _print(m: ExtHostLatencyResult | null): string {\n\t\tif (!m) {\n\t\t\treturn '';\n\t\t}\n\t\treturn `${m.remoteAuthority ? `Authority: ${m.remoteAuthority}\\n` : ``}Roundtrip latency: ${m.latency.toFixed(3)}ms\\nUp: ${MeasureExtHostLatencyAction._printSpeed(m.up)}\\nDown: ${MeasureExtHostLatencyAction._printSpeed(m.down)}\\n`;\n\t}\n\n\tprivate static _printSpeed(n: number): string {\n\t\tif (n <= 1024) {\n\t\t\treturn `${n} bps`;\n\t\t}\n\t\tif (n < 1024 * 1024) {\n\t\t\treturn `${(n / 1024).toFixed(1)} kbps`;\n\t\t}\n\t\treturn `${(n / 1024 / 1024).toFixed(1)} Mbps`;\n\t}\n});\n"]}