{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/textfile/test/common/textFileService.io.test.ts","vs/workbench/services/textfile/test/common/textFileService.io.test.ts"],"names":[],"mappings":"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","file":"textFileService.io.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ITextFileService, snapshotToString, TextFileOperationError, TextFileOperationResult, stringToSnapshot } from '../../common/textfiles.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { join, basename } from '../../../../../base/common/path.js';\nimport { UTF16le, UTF8_with_bom, UTF16be, UTF8, UTF16le_BOM, UTF16be_BOM, UTF8_BOM } from '../../common/encoding.js';\nimport { bufferToStream, VSBuffer } from '../../../../../base/common/buffer.js';\nimport { createTextModel } from '../../../../../editor/test/common/testTextModel.js';\nimport { ITextSnapshot, DefaultEndOfLine } from '../../../../../editor/common/model.js';\nimport { isWindows } from '../../../../../base/common/platform.js';\nimport { createTextBufferFactoryFromStream } from '../../../../../editor/common/model/textModel.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\n\nexport interface Params {\n\tsetup(): Promise<{\n\t\tservice: ITextFileService;\n\t\ttestDir: string;\n\t}>;\n\tteardown(): Promise<void>;\n\n\texists(fsPath: string): Promise<boolean>;\n\tstat(fsPath: string): Promise<{ size: number }>;\n\treadFile(fsPath: string): Promise<VSBuffer | Buffer>;\n\treadFile(fsPath: string, encoding: string): Promise<string>;\n\treadFile(fsPath: string, encoding?: string): Promise<VSBuffer | Buffer | string>;\n\tdetectEncodingByBOM(fsPath: string): Promise<typeof UTF16be | typeof UTF16le | typeof UTF8_with_bom | null>;\n}\n\n/**\n * Allows us to reuse test suite across different environments.\n *\n * It introduces a bit of complexity with setup and teardown, however\n * it helps us to ensure that tests are added for all environments at once,\n * hence helps us catch bugs better.\n */\nexport default function createSuite(params: Params) {\n\tlet service: ITextFileService;\n\tlet testDir = '';\n\tconst { exists, stat, readFile, detectEncodingByBOM } = params;\n\tconst disposables = new DisposableStore();\n\n\tsetup(async () => {\n\t\tconst result = await params.setup();\n\t\tservice = result.service;\n\t\ttestDir = result.testDir;\n\t});\n\n\tteardown(async () => {\n\t\tawait params.teardown();\n\t\tdisposables.clear();\n\t});\n\n\ttest('create - no encoding - content empty', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.txt'));\n\n\t\tawait service.create([{ resource }]);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, 0 /* no BOM */);\n\t});\n\n\ttest('create - no encoding - content provided (string)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.txt'));\n\n\t\tawait service.create([{ resource, value: 'Hello World' }]);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.toString(), 'Hello World');\n\t\tassert.strictEqual(res.byteLength, 'Hello World'.length);\n\t});\n\n\ttest('create - no encoding - content provided (snapshot)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.txt'));\n\n\t\tawait service.create([{ resource, value: stringToSnapshot('Hello World') }]);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.toString(), 'Hello World');\n\t\tassert.strictEqual(res.byteLength, 'Hello World'.length);\n\t});\n\n\ttest('create - UTF 16 LE - no content', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.utf16le'));\n\n\t\tawait service.create([{ resource }]);\n\n\t\tassert.strictEqual(await exists(resource.fsPath), true);\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF16le);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, UTF16le_BOM.length);\n\t});\n\n\ttest('create - UTF 16 LE - content provided', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.utf16le'));\n\n\t\tawait service.create([{ resource, value: 'Hello World' }]);\n\n\t\tassert.strictEqual(await exists(resource.fsPath), true);\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF16le);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, 'Hello World'.length * 2 /* UTF16 2bytes per char */ + UTF16le_BOM.length);\n\t});\n\n\ttest('create - UTF 16 BE - no content', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.utf16be'));\n\n\t\tawait service.create([{ resource }]);\n\n\t\tassert.strictEqual(await exists(resource.fsPath), true);\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF16be);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, UTF16le_BOM.length);\n\t});\n\n\ttest('create - UTF 16 BE - content provided', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.utf16be'));\n\n\t\tawait service.create([{ resource, value: 'Hello World' }]);\n\n\t\tassert.strictEqual(await exists(resource.fsPath), true);\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF16be);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, 'Hello World'.length * 2 /* UTF16 2bytes per char */ + UTF16be_BOM.length);\n\t});\n\n\ttest('create - UTF 8 BOM - no content', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.utf8bom'));\n\n\t\tawait service.create([{ resource }]);\n\n\t\tassert.strictEqual(await exists(resource.fsPath), true);\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, UTF8_BOM.length);\n\t});\n\n\ttest('create - UTF 8 BOM - content provided', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.utf8bom'));\n\n\t\tawait service.create([{ resource, value: 'Hello World' }]);\n\n\t\tassert.strictEqual(await exists(resource.fsPath), true);\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, 'Hello World'.length + UTF8_BOM.length);\n\t});\n\n\tfunction createTextModelSnapshot(text: string, preserveBOM?: boolean): ITextSnapshot {\n\t\tconst textModel = disposables.add(createTextModel(text));\n\t\tconst snapshot = textModel.createSnapshot(preserveBOM);\n\n\t\treturn snapshot;\n\t}\n\n\ttest('create - UTF 8 BOM - empty content - snapshot', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.utf8bom'));\n\n\t\tawait service.create([{ resource, value: createTextModelSnapshot('') }]);\n\n\t\tassert.strictEqual(await exists(resource.fsPath), true);\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, UTF8_BOM.length);\n\t});\n\n\ttest('create - UTF 8 BOM - content provided - snapshot', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.utf8bom'));\n\n\t\tawait service.create([{ resource, value: createTextModelSnapshot('Hello World') }]);\n\n\t\tassert.strictEqual(await exists(resource.fsPath), true);\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, 'Hello World'.length + UTF8_BOM.length);\n\t});\n\n\ttest('write - use encoding (UTF 16 BE) - small content as string', async () => {\n\t\tawait testEncoding(URI.file(join(testDir, 'small.txt')), UTF16be, 'Hello\\nWorld', 'Hello\\nWorld');\n\t});\n\n\ttest('write - use encoding (UTF 16 BE) - small content as snapshot', async () => {\n\t\tawait testEncoding(URI.file(join(testDir, 'small.txt')), UTF16be, createTextModelSnapshot('Hello\\nWorld'), 'Hello\\nWorld');\n\t});\n\n\ttest('write - use encoding (UTF 16 BE) - large content as string', async () => {\n\t\tawait testEncoding(URI.file(join(testDir, 'lorem.txt')), UTF16be, 'Hello\\nWorld', 'Hello\\nWorld');\n\t});\n\n\ttest('write - use encoding (UTF 16 BE) - large content as snapshot', async () => {\n\t\tawait testEncoding(URI.file(join(testDir, 'lorem.txt')), UTF16be, createTextModelSnapshot('Hello\\nWorld'), 'Hello\\nWorld');\n\t});\n\n\tasync function testEncoding(resource: URI, encoding: string, content: string | ITextSnapshot, expectedContent: string) {\n\t\tawait service.write(resource, content, { encoding });\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, encoding);\n\n\t\tconst resolved = await service.readStream(resource);\n\t\tassert.strictEqual(resolved.encoding, encoding);\n\n\t\tconst textBuffer = disposables.add(resolved.value.create(isWindows ? DefaultEndOfLine.CRLF : DefaultEndOfLine.LF).textBuffer);\n\t\tassert.strictEqual(snapshotToString(textBuffer.createSnapshot(false)), expectedContent);\n\t}\n\n\ttest('write - use encoding (cp1252)', async () => {\n\t\tconst filePath = join(testDir, 'some_cp1252.txt');\n\t\tconst contents = await readFile(filePath, 'utf8');\n\t\tconst eol = /\\r\\n/.test(contents) ? '\\r\\n' : '\\n';\n\t\tawait testEncodingKeepsData(URI.file(filePath), 'cp1252', ['ObjectCount = LoadObjects(\"Öffentlicher Ordner\");', '', 'Private = \"Persönliche Information\"', ''].join(eol));\n\t});\n\n\ttest('write - use encoding (shiftjis)', async () => {\n\t\tawait testEncodingKeepsData(URI.file(join(testDir, 'some_shiftjis.txt')), 'shiftjis', '中文abc');\n\t});\n\n\ttest('write - use encoding (gbk)', async () => {\n\t\tawait testEncodingKeepsData(URI.file(join(testDir, 'some_gbk.txt')), 'gbk', '中国abc');\n\t});\n\n\ttest('write - use encoding (cyrillic)', async () => {\n\t\tawait testEncodingKeepsData(URI.file(join(testDir, 'some_cyrillic.txt')), 'cp866', 'АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя');\n\t});\n\n\ttest('write - use encoding (big5)', async () => {\n\t\tawait testEncodingKeepsData(URI.file(join(testDir, 'some_big5.txt')), 'cp950', '中文abc');\n\t});\n\n\tasync function testEncodingKeepsData(resource: URI, encoding: string, expected: string) {\n\t\tlet resolved = await service.readStream(resource, { encoding });\n\t\tconst textBuffer = disposables.add(resolved.value.create(isWindows ? DefaultEndOfLine.CRLF : DefaultEndOfLine.LF).textBuffer);\n\t\tconst content = snapshotToString(textBuffer.createSnapshot(false));\n\t\tassert.strictEqual(content, expected);\n\n\t\tawait service.write(resource, content, { encoding });\n\n\t\tresolved = await service.readStream(resource, { encoding });\n\t\tconst textBuffer2 = disposables.add(resolved.value.create(DefaultEndOfLine.CRLF).textBuffer);\n\t\tassert.strictEqual(snapshotToString(textBuffer2.createSnapshot(false)), content);\n\n\t\tawait service.write(resource, createTextModelSnapshot(content), { encoding });\n\n\t\tresolved = await service.readStream(resource, { encoding });\n\t\tconst textBuffer3 = disposables.add(resolved.value.create(DefaultEndOfLine.CRLF).textBuffer);\n\t\tassert.strictEqual(snapshotToString(textBuffer3.createSnapshot(false)), content);\n\t}\n\n\ttest('write - no encoding - content as string', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small.txt'));\n\n\t\tconst content = (await readFile(resource.fsPath)).toString();\n\n\t\tawait service.write(resource, content);\n\n\t\tconst resolved = await service.readStream(resource);\n\t\tassert.strictEqual(resolved.value.getFirstLineText(999999), content);\n\t});\n\n\ttest('write - no encoding - content as snapshot', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small.txt'));\n\n\t\tconst content = (await readFile(resource.fsPath)).toString();\n\n\t\tawait service.write(resource, createTextModelSnapshot(content));\n\n\t\tconst resolved = await service.readStream(resource);\n\t\tassert.strictEqual(resolved.value.getFirstLineText(999999), content);\n\t});\n\n\ttest('write - encoding preserved (UTF 16 LE) - content as string', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_utf16le.css'));\n\n\t\tconst resolved = await service.readStream(resource);\n\t\tassert.strictEqual(resolved.encoding, UTF16le);\n\n\t\tawait testEncoding(URI.file(join(testDir, 'some_utf16le.css')), UTF16le, 'Hello\\nWorld', 'Hello\\nWorld');\n\t});\n\n\ttest('write - encoding preserved (UTF 16 LE) - content as snapshot', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_utf16le.css'));\n\n\t\tconst resolved = await service.readStream(resource);\n\t\tassert.strictEqual(resolved.encoding, UTF16le);\n\n\t\tawait testEncoding(URI.file(join(testDir, 'some_utf16le.css')), UTF16le, createTextModelSnapshot('Hello\\nWorld'), 'Hello\\nWorld');\n\t});\n\n\ttest('write - UTF8 variations - content as string', async () => {\n\t\tconst resource = URI.file(join(testDir, 'index.html'));\n\n\t\tlet detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, null);\n\n\t\tconst content = (await readFile(resource.fsPath)).toString() + 'updates';\n\t\tawait service.write(resource, content, { encoding: UTF8_with_bom });\n\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\t// ensure BOM preserved if enforced\n\t\tawait service.write(resource, content, { encoding: UTF8_with_bom });\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\t// allow to remove BOM\n\t\tawait service.write(resource, content, { encoding: UTF8 });\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, null);\n\n\t\t// BOM does not come back\n\t\tawait service.write(resource, content, { encoding: UTF8 });\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, null);\n\t});\n\n\ttest('write - UTF8 variations - content as snapshot', async () => {\n\t\tconst resource = URI.file(join(testDir, 'index.html'));\n\n\t\tlet detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, null);\n\n\t\tconst model = disposables.add(createTextModel((await readFile(resource.fsPath)).toString() + 'updates'));\n\t\tawait service.write(resource, model.createSnapshot(), { encoding: UTF8_with_bom });\n\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\t// ensure BOM preserved if enforced\n\t\tawait service.write(resource, model.createSnapshot(), { encoding: UTF8_with_bom });\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\t// allow to remove BOM\n\t\tawait service.write(resource, model.createSnapshot(), { encoding: UTF8 });\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, null);\n\n\t\t// BOM does not come back\n\t\tawait service.write(resource, model.createSnapshot(), { encoding: UTF8 });\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, null);\n\t});\n\n\ttest('write - preserve UTF8 BOM - content as string', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_utf8_bom.txt'));\n\n\t\tlet detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\tawait service.write(resource, 'Hello World', { encoding: detectedEncoding });\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\t});\n\n\ttest('write - ensure BOM in empty file - content as string', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small.txt'));\n\n\t\tawait service.write(resource, '', { encoding: UTF8_with_bom });\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\t});\n\n\ttest('write - ensure BOM in empty file - content as snapshot', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small.txt'));\n\n\t\tawait service.write(resource, createTextModelSnapshot(''), { encoding: UTF8_with_bom });\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\t});\n\n\ttest('readStream - small text', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small.txt'));\n\n\t\tawait testReadStream(resource);\n\t});\n\n\ttest('readStream - large text', async () => {\n\t\tconst resource = URI.file(join(testDir, 'lorem.txt'));\n\n\t\tawait testReadStream(resource);\n\t});\n\n\tasync function testReadStream(resource: URI): Promise<void> {\n\t\tconst result = await service.readStream(resource);\n\n\t\tassert.strictEqual(result.name, basename(resource.fsPath));\n\t\tassert.strictEqual(result.size, (await stat(resource.fsPath)).size);\n\n\t\tconst content = (await readFile(resource.fsPath)).toString();\n\t\tconst textBuffer = disposables.add(result.value.create(DefaultEndOfLine.LF).textBuffer);\n\t\tassert.strictEqual(\n\t\t\tsnapshotToString(textBuffer.createSnapshot(false)),\n\t\t\tsnapshotToString(createTextModelSnapshot(content, false)));\n\t}\n\n\ttest('read - small text', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small.txt'));\n\n\t\tawait testRead(resource);\n\t});\n\n\ttest('read - large text', async () => {\n\t\tconst resource = URI.file(join(testDir, 'lorem.txt'));\n\n\t\tawait testRead(resource);\n\t});\n\n\tasync function testRead(resource: URI): Promise<void> {\n\t\tconst result = await service.read(resource);\n\n\t\tassert.strictEqual(result.name, basename(resource.fsPath));\n\t\tassert.strictEqual(result.size, (await stat(resource.fsPath)).size);\n\t\tassert.strictEqual(result.value, (await readFile(resource.fsPath)).toString());\n\t}\n\n\ttest('readStream - encoding picked up (CP1252)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_small_cp1252.txt'));\n\t\tconst encoding = 'windows1252';\n\n\t\tconst result = await service.readStream(resource, { encoding });\n\t\tassert.strictEqual(result.encoding, encoding);\n\t\tassert.strictEqual(result.value.getFirstLineText(999999), 'Private = \"Persönlicheß Information\"');\n\t});\n\n\ttest('read - encoding picked up (CP1252)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_small_cp1252.txt'));\n\t\tconst encoding = 'windows1252';\n\n\t\tconst result = await service.read(resource, { encoding });\n\t\tassert.strictEqual(result.encoding, encoding);\n\t\tassert.strictEqual(result.value, 'Private = \"Persönlicheß Information\"');\n\t});\n\n\ttest('read - encoding picked up (binary)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_small_cp1252.txt'));\n\t\tconst encoding = 'binary';\n\n\t\tconst result = await service.read(resource, { encoding });\n\t\tassert.strictEqual(result.encoding, encoding);\n\t\tassert.strictEqual(result.value, 'Private = \"Persönlicheß Information\"');\n\t});\n\n\ttest('read - encoding picked up (base64)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_small_cp1252.txt'));\n\t\tconst encoding = 'base64';\n\n\t\tconst result = await service.read(resource, { encoding });\n\t\tassert.strictEqual(result.encoding, encoding);\n\t\tassert.strictEqual(result.value, btoa('Private = \"Persönlicheß Information\"'));\n\t});\n\n\ttest('readStream - user overrides BOM', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_utf16le.css'));\n\n\t\tconst result = await service.readStream(resource, { encoding: 'windows1252' });\n\t\tassert.strictEqual(result.encoding, 'windows1252');\n\t});\n\n\ttest('readStream - BOM removed', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_utf8_bom.txt'));\n\n\t\tconst result = await service.readStream(resource);\n\t\tassert.strictEqual(result.value.getFirstLineText(999999), 'This is some UTF 8 with BOM file.');\n\t});\n\n\ttest('readStream - invalid encoding', async () => {\n\t\tconst resource = URI.file(join(testDir, 'index.html'));\n\n\t\tconst result = await service.readStream(resource, { encoding: 'superduper' });\n\t\tassert.strictEqual(result.encoding, 'utf8');\n\t});\n\n\ttest('readStream - encoding override', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some.utf16le'));\n\n\t\tconst result = await service.readStream(resource, { encoding: 'windows1252' });\n\t\tassert.strictEqual(result.encoding, 'utf16le');\n\t\tassert.strictEqual(result.value.getFirstLineText(999999), 'This is some UTF 16 with BOM file.');\n\t});\n\n\ttest('readStream - large Big5', async () => {\n\t\tawait testLargeEncoding('big5', '中文abc');\n\t});\n\n\ttest('readStream - large CP1252', async () => {\n\t\tawait testLargeEncoding('cp1252', 'öäüß');\n\t});\n\n\ttest('readStream - large Cyrillic', async () => {\n\t\tawait testLargeEncoding('cp866', 'АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя');\n\t});\n\n\ttest('readStream - large GBK', async () => {\n\t\tawait testLargeEncoding('gbk', '中国abc');\n\t});\n\n\ttest('readStream - large ShiftJIS', async () => {\n\t\tawait testLargeEncoding('shiftjis', '中文abc');\n\t});\n\n\ttest('readStream - large UTF8 BOM', async () => {\n\t\tawait testLargeEncoding('utf8bom', 'öäüß');\n\t});\n\n\ttest('readStream - large UTF16 LE', async () => {\n\t\tawait testLargeEncoding('utf16le', 'öäüß');\n\t});\n\n\ttest('readStream - large UTF16 BE', async () => {\n\t\tawait testLargeEncoding('utf16be', 'öäüß');\n\t});\n\n\tasync function testLargeEncoding(encoding: string, needle: string): Promise<void> {\n\t\tconst resource = URI.file(join(testDir, `lorem_${encoding}.txt`));\n\n\t\t// Verify via `ITextFileService.readStream`\n\t\tconst result = await service.readStream(resource, { encoding });\n\t\tassert.strictEqual(result.encoding, encoding);\n\n\t\tconst textBuffer = disposables.add(result.value.create(DefaultEndOfLine.LF).textBuffer);\n\t\tlet contents = snapshotToString(textBuffer.createSnapshot(false));\n\n\t\tassert.strictEqual(contents.indexOf(needle), 0);\n\t\tassert.ok(contents.indexOf(needle, 10) > 0);\n\n\t\t// Verify via `ITextFileService.getDecodedTextFactory`\n\t\tconst rawFile = await params.readFile(resource.fsPath);\n\t\tlet rawFileVSBuffer: VSBuffer;\n\t\tif (rawFile instanceof VSBuffer) {\n\t\t\trawFileVSBuffer = rawFile;\n\t\t} else {\n\t\t\trawFileVSBuffer = VSBuffer.wrap(rawFile);\n\t\t}\n\n\t\tconst factory = await createTextBufferFactoryFromStream(await service.getDecodedStream(resource, bufferToStream(rawFileVSBuffer), { encoding }));\n\n\t\tconst textBuffer2 = disposables.add(factory.create(DefaultEndOfLine.LF).textBuffer);\n\t\tcontents = snapshotToString(textBuffer2.createSnapshot(false));\n\n\t\tassert.strictEqual(contents.indexOf(needle), 0);\n\t\tassert.ok(contents.indexOf(needle, 10) > 0);\n\t}\n\n\ttest('readStream - UTF16 LE (no BOM)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'utf16_le_nobom.txt'));\n\n\t\tconst result = await service.readStream(resource);\n\t\tassert.strictEqual(result.encoding, 'utf16le');\n\t});\n\n\ttest('readStream - UTF16 BE (no BOM)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'utf16_be_nobom.txt'));\n\n\t\tconst result = await service.readStream(resource);\n\t\tassert.strictEqual(result.encoding, 'utf16be');\n\t});\n\n\ttest('readStream - autoguessEncoding', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_cp1252.txt'));\n\n\t\tconst result = await service.readStream(resource, { autoGuessEncoding: true });\n\t\tassert.strictEqual(result.encoding, 'windows1252');\n\t});\n\n\ttest('readStream - autoguessEncoding (candidateGuessEncodings)', async () => {\n\t\t// This file is determined to be Windows-1252 unless candidateDetectEncoding is set.\n\t\tconst resource = URI.file(join(testDir, 'some.shiftjis.1.txt'));\n\n\t\tconst result = await service.readStream(resource, { autoGuessEncoding: true, candidateGuessEncodings: ['utf-8', 'shiftjis', 'euc-jp'] });\n\t\tassert.strictEqual(result.encoding, 'shiftjis');\n\t});\n\n\ttest('readStream - autoguessEncoding (candidateGuessEncodings is Empty)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_cp1252.txt'));\n\n\t\tconst result = await service.readStream(resource, { autoGuessEncoding: true, candidateGuessEncodings: [] });\n\t\tassert.strictEqual(result.encoding, 'windows1252');\n\t});\n\n\ttest('readStream - FILE_IS_BINARY', async () => {\n\t\tconst resource = URI.file(join(testDir, 'binary.txt'));\n\n\t\tlet error: TextFileOperationError | undefined = undefined;\n\t\ttry {\n\t\t\tawait service.readStream(resource, { acceptTextOnly: true });\n\t\t} catch (err) {\n\t\t\terror = err;\n\t\t}\n\n\t\tassert.ok(error);\n\t\tassert.strictEqual(error.textFileOperationResult, TextFileOperationResult.FILE_IS_BINARY);\n\n\t\tconst result = await service.readStream(URI.file(join(testDir, 'small.txt')), { acceptTextOnly: true });\n\t\tassert.strictEqual(result.name, 'small.txt');\n\t});\n\n\ttest('read - FILE_IS_BINARY', async () => {\n\t\tconst resource = URI.file(join(testDir, 'binary.txt'));\n\n\t\tlet error: TextFileOperationError | undefined = undefined;\n\t\ttry {\n\t\t\tawait service.read(resource, { acceptTextOnly: true });\n\t\t} catch (err) {\n\t\t\terror = err;\n\t\t}\n\n\t\tassert.ok(error);\n\t\tassert.strictEqual(error.textFileOperationResult, TextFileOperationResult.FILE_IS_BINARY);\n\n\t\tconst result = await service.read(URI.file(join(testDir, 'small.txt')), { acceptTextOnly: true });\n\t\tassert.strictEqual(result.name, 'small.txt');\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ITextFileService, snapshotToString, TextFileOperationError, TextFileOperationResult, stringToSnapshot } from '../../common/textfiles.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { join, basename } from '../../../../../base/common/path.js';\nimport { UTF16le, UTF8_with_bom, UTF16be, UTF8, UTF16le_BOM, UTF16be_BOM, UTF8_BOM } from '../../common/encoding.js';\nimport { bufferToStream, VSBuffer } from '../../../../../base/common/buffer.js';\nimport { createTextModel } from '../../../../../editor/test/common/testTextModel.js';\nimport { ITextSnapshot, DefaultEndOfLine } from '../../../../../editor/common/model.js';\nimport { isWindows } from '../../../../../base/common/platform.js';\nimport { createTextBufferFactoryFromStream } from '../../../../../editor/common/model/textModel.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\n\nexport interface Params {\n\tsetup(): Promise<{\n\t\tservice: ITextFileService;\n\t\ttestDir: string;\n\t}>;\n\tteardown(): Promise<void>;\n\n\texists(fsPath: string): Promise<boolean>;\n\tstat(fsPath: string): Promise<{ size: number }>;\n\treadFile(fsPath: string): Promise<VSBuffer | Buffer>;\n\treadFile(fsPath: string, encoding: string): Promise<string>;\n\treadFile(fsPath: string, encoding?: string): Promise<VSBuffer | Buffer | string>;\n\tdetectEncodingByBOM(fsPath: string): Promise<typeof UTF16be | typeof UTF16le | typeof UTF8_with_bom | null>;\n}\n\n/**\n * Allows us to reuse test suite across different environments.\n *\n * It introduces a bit of complexity with setup and teardown, however\n * it helps us to ensure that tests are added for all environments at once,\n * hence helps us catch bugs better.\n */\nexport default function createSuite(params: Params) {\n\tlet service: ITextFileService;\n\tlet testDir = '';\n\tconst { exists, stat, readFile, detectEncodingByBOM } = params;\n\tconst disposables = new DisposableStore();\n\n\tsetup(async () => {\n\t\tconst result = await params.setup();\n\t\tservice = result.service;\n\t\ttestDir = result.testDir;\n\t});\n\n\tteardown(async () => {\n\t\tawait params.teardown();\n\t\tdisposables.clear();\n\t});\n\n\ttest('create - no encoding - content empty', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.txt'));\n\n\t\tawait service.create([{ resource }]);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, 0 /* no BOM */);\n\t});\n\n\ttest('create - no encoding - content provided (string)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.txt'));\n\n\t\tawait service.create([{ resource, value: 'Hello World' }]);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.toString(), 'Hello World');\n\t\tassert.strictEqual(res.byteLength, 'Hello World'.length);\n\t});\n\n\ttest('create - no encoding - content provided (snapshot)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.txt'));\n\n\t\tawait service.create([{ resource, value: stringToSnapshot('Hello World') }]);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.toString(), 'Hello World');\n\t\tassert.strictEqual(res.byteLength, 'Hello World'.length);\n\t});\n\n\ttest('create - UTF 16 LE - no content', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.utf16le'));\n\n\t\tawait service.create([{ resource }]);\n\n\t\tassert.strictEqual(await exists(resource.fsPath), true);\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF16le);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, UTF16le_BOM.length);\n\t});\n\n\ttest('create - UTF 16 LE - content provided', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.utf16le'));\n\n\t\tawait service.create([{ resource, value: 'Hello World' }]);\n\n\t\tassert.strictEqual(await exists(resource.fsPath), true);\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF16le);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, 'Hello World'.length * 2 /* UTF16 2bytes per char */ + UTF16le_BOM.length);\n\t});\n\n\ttest('create - UTF 16 BE - no content', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.utf16be'));\n\n\t\tawait service.create([{ resource }]);\n\n\t\tassert.strictEqual(await exists(resource.fsPath), true);\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF16be);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, UTF16le_BOM.length);\n\t});\n\n\ttest('create - UTF 16 BE - content provided', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.utf16be'));\n\n\t\tawait service.create([{ resource, value: 'Hello World' }]);\n\n\t\tassert.strictEqual(await exists(resource.fsPath), true);\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF16be);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, 'Hello World'.length * 2 /* UTF16 2bytes per char */ + UTF16be_BOM.length);\n\t});\n\n\ttest('create - UTF 8 BOM - no content', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.utf8bom'));\n\n\t\tawait service.create([{ resource }]);\n\n\t\tassert.strictEqual(await exists(resource.fsPath), true);\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, UTF8_BOM.length);\n\t});\n\n\ttest('create - UTF 8 BOM - content provided', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.utf8bom'));\n\n\t\tawait service.create([{ resource, value: 'Hello World' }]);\n\n\t\tassert.strictEqual(await exists(resource.fsPath), true);\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, 'Hello World'.length + UTF8_BOM.length);\n\t});\n\n\tfunction createTextModelSnapshot(text: string, preserveBOM?: boolean): ITextSnapshot {\n\t\tconst textModel = disposables.add(createTextModel(text));\n\t\tconst snapshot = textModel.createSnapshot(preserveBOM);\n\n\t\treturn snapshot;\n\t}\n\n\ttest('create - UTF 8 BOM - empty content - snapshot', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.utf8bom'));\n\n\t\tawait service.create([{ resource, value: createTextModelSnapshot('') }]);\n\n\t\tassert.strictEqual(await exists(resource.fsPath), true);\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, UTF8_BOM.length);\n\t});\n\n\ttest('create - UTF 8 BOM - content provided - snapshot', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small_new.utf8bom'));\n\n\t\tawait service.create([{ resource, value: createTextModelSnapshot('Hello World') }]);\n\n\t\tassert.strictEqual(await exists(resource.fsPath), true);\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\tconst res = await readFile(resource.fsPath);\n\t\tassert.strictEqual(res.byteLength, 'Hello World'.length + UTF8_BOM.length);\n\t});\n\n\ttest('write - use encoding (UTF 16 BE) - small content as string', async () => {\n\t\tawait testEncoding(URI.file(join(testDir, 'small.txt')), UTF16be, 'Hello\\nWorld', 'Hello\\nWorld');\n\t});\n\n\ttest('write - use encoding (UTF 16 BE) - small content as snapshot', async () => {\n\t\tawait testEncoding(URI.file(join(testDir, 'small.txt')), UTF16be, createTextModelSnapshot('Hello\\nWorld'), 'Hello\\nWorld');\n\t});\n\n\ttest('write - use encoding (UTF 16 BE) - large content as string', async () => {\n\t\tawait testEncoding(URI.file(join(testDir, 'lorem.txt')), UTF16be, 'Hello\\nWorld', 'Hello\\nWorld');\n\t});\n\n\ttest('write - use encoding (UTF 16 BE) - large content as snapshot', async () => {\n\t\tawait testEncoding(URI.file(join(testDir, 'lorem.txt')), UTF16be, createTextModelSnapshot('Hello\\nWorld'), 'Hello\\nWorld');\n\t});\n\n\tasync function testEncoding(resource: URI, encoding: string, content: string | ITextSnapshot, expectedContent: string) {\n\t\tawait service.write(resource, content, { encoding });\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, encoding);\n\n\t\tconst resolved = await service.readStream(resource);\n\t\tassert.strictEqual(resolved.encoding, encoding);\n\n\t\tconst textBuffer = disposables.add(resolved.value.create(isWindows ? DefaultEndOfLine.CRLF : DefaultEndOfLine.LF).textBuffer);\n\t\tassert.strictEqual(snapshotToString(textBuffer.createSnapshot(false)), expectedContent);\n\t}\n\n\ttest('write - use encoding (cp1252)', async () => {\n\t\tconst filePath = join(testDir, 'some_cp1252.txt');\n\t\tconst contents = await readFile(filePath, 'utf8');\n\t\tconst eol = /\\r\\n/.test(contents) ? '\\r\\n' : '\\n';\n\t\tawait testEncodingKeepsData(URI.file(filePath), 'cp1252', ['ObjectCount = LoadObjects(\"Öffentlicher Ordner\");', '', 'Private = \"Persönliche Information\"', ''].join(eol));\n\t});\n\n\ttest('write - use encoding (shiftjis)', async () => {\n\t\tawait testEncodingKeepsData(URI.file(join(testDir, 'some_shiftjis.txt')), 'shiftjis', '中文abc');\n\t});\n\n\ttest('write - use encoding (gbk)', async () => {\n\t\tawait testEncodingKeepsData(URI.file(join(testDir, 'some_gbk.txt')), 'gbk', '中国abc');\n\t});\n\n\ttest('write - use encoding (cyrillic)', async () => {\n\t\tawait testEncodingKeepsData(URI.file(join(testDir, 'some_cyrillic.txt')), 'cp866', 'АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя');\n\t});\n\n\ttest('write - use encoding (big5)', async () => {\n\t\tawait testEncodingKeepsData(URI.file(join(testDir, 'some_big5.txt')), 'cp950', '中文abc');\n\t});\n\n\tasync function testEncodingKeepsData(resource: URI, encoding: string, expected: string) {\n\t\tlet resolved = await service.readStream(resource, { encoding });\n\t\tconst textBuffer = disposables.add(resolved.value.create(isWindows ? DefaultEndOfLine.CRLF : DefaultEndOfLine.LF).textBuffer);\n\t\tconst content = snapshotToString(textBuffer.createSnapshot(false));\n\t\tassert.strictEqual(content, expected);\n\n\t\tawait service.write(resource, content, { encoding });\n\n\t\tresolved = await service.readStream(resource, { encoding });\n\t\tconst textBuffer2 = disposables.add(resolved.value.create(DefaultEndOfLine.CRLF).textBuffer);\n\t\tassert.strictEqual(snapshotToString(textBuffer2.createSnapshot(false)), content);\n\n\t\tawait service.write(resource, createTextModelSnapshot(content), { encoding });\n\n\t\tresolved = await service.readStream(resource, { encoding });\n\t\tconst textBuffer3 = disposables.add(resolved.value.create(DefaultEndOfLine.CRLF).textBuffer);\n\t\tassert.strictEqual(snapshotToString(textBuffer3.createSnapshot(false)), content);\n\t}\n\n\ttest('write - no encoding - content as string', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small.txt'));\n\n\t\tconst content = (await readFile(resource.fsPath)).toString();\n\n\t\tawait service.write(resource, content);\n\n\t\tconst resolved = await service.readStream(resource);\n\t\tassert.strictEqual(resolved.value.getFirstLineText(999999), content);\n\t});\n\n\ttest('write - no encoding - content as snapshot', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small.txt'));\n\n\t\tconst content = (await readFile(resource.fsPath)).toString();\n\n\t\tawait service.write(resource, createTextModelSnapshot(content));\n\n\t\tconst resolved = await service.readStream(resource);\n\t\tassert.strictEqual(resolved.value.getFirstLineText(999999), content);\n\t});\n\n\ttest('write - encoding preserved (UTF 16 LE) - content as string', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_utf16le.css'));\n\n\t\tconst resolved = await service.readStream(resource);\n\t\tassert.strictEqual(resolved.encoding, UTF16le);\n\n\t\tawait testEncoding(URI.file(join(testDir, 'some_utf16le.css')), UTF16le, 'Hello\\nWorld', 'Hello\\nWorld');\n\t});\n\n\ttest('write - encoding preserved (UTF 16 LE) - content as snapshot', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_utf16le.css'));\n\n\t\tconst resolved = await service.readStream(resource);\n\t\tassert.strictEqual(resolved.encoding, UTF16le);\n\n\t\tawait testEncoding(URI.file(join(testDir, 'some_utf16le.css')), UTF16le, createTextModelSnapshot('Hello\\nWorld'), 'Hello\\nWorld');\n\t});\n\n\ttest('write - UTF8 variations - content as string', async () => {\n\t\tconst resource = URI.file(join(testDir, 'index.html'));\n\n\t\tlet detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, null);\n\n\t\tconst content = (await readFile(resource.fsPath)).toString() + 'updates';\n\t\tawait service.write(resource, content, { encoding: UTF8_with_bom });\n\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\t// ensure BOM preserved if enforced\n\t\tawait service.write(resource, content, { encoding: UTF8_with_bom });\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\t// allow to remove BOM\n\t\tawait service.write(resource, content, { encoding: UTF8 });\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, null);\n\n\t\t// BOM does not come back\n\t\tawait service.write(resource, content, { encoding: UTF8 });\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, null);\n\t});\n\n\ttest('write - UTF8 variations - content as snapshot', async () => {\n\t\tconst resource = URI.file(join(testDir, 'index.html'));\n\n\t\tlet detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, null);\n\n\t\tconst model = disposables.add(createTextModel((await readFile(resource.fsPath)).toString() + 'updates'));\n\t\tawait service.write(resource, model.createSnapshot(), { encoding: UTF8_with_bom });\n\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\t// ensure BOM preserved if enforced\n\t\tawait service.write(resource, model.createSnapshot(), { encoding: UTF8_with_bom });\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\t// allow to remove BOM\n\t\tawait service.write(resource, model.createSnapshot(), { encoding: UTF8 });\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, null);\n\n\t\t// BOM does not come back\n\t\tawait service.write(resource, model.createSnapshot(), { encoding: UTF8 });\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, null);\n\t});\n\n\ttest('write - preserve UTF8 BOM - content as string', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_utf8_bom.txt'));\n\n\t\tlet detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\n\t\tawait service.write(resource, 'Hello World', { encoding: detectedEncoding });\n\t\tdetectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\t});\n\n\ttest('write - ensure BOM in empty file - content as string', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small.txt'));\n\n\t\tawait service.write(resource, '', { encoding: UTF8_with_bom });\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\t});\n\n\ttest('write - ensure BOM in empty file - content as snapshot', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small.txt'));\n\n\t\tawait service.write(resource, createTextModelSnapshot(''), { encoding: UTF8_with_bom });\n\n\t\tconst detectedEncoding = await detectEncodingByBOM(resource.fsPath);\n\t\tassert.strictEqual(detectedEncoding, UTF8_with_bom);\n\t});\n\n\ttest('readStream - small text', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small.txt'));\n\n\t\tawait testReadStream(resource);\n\t});\n\n\ttest('readStream - large text', async () => {\n\t\tconst resource = URI.file(join(testDir, 'lorem.txt'));\n\n\t\tawait testReadStream(resource);\n\t});\n\n\tasync function testReadStream(resource: URI): Promise<void> {\n\t\tconst result = await service.readStream(resource);\n\n\t\tassert.strictEqual(result.name, basename(resource.fsPath));\n\t\tassert.strictEqual(result.size, (await stat(resource.fsPath)).size);\n\n\t\tconst content = (await readFile(resource.fsPath)).toString();\n\t\tconst textBuffer = disposables.add(result.value.create(DefaultEndOfLine.LF).textBuffer);\n\t\tassert.strictEqual(\n\t\t\tsnapshotToString(textBuffer.createSnapshot(false)),\n\t\t\tsnapshotToString(createTextModelSnapshot(content, false)));\n\t}\n\n\ttest('read - small text', async () => {\n\t\tconst resource = URI.file(join(testDir, 'small.txt'));\n\n\t\tawait testRead(resource);\n\t});\n\n\ttest('read - large text', async () => {\n\t\tconst resource = URI.file(join(testDir, 'lorem.txt'));\n\n\t\tawait testRead(resource);\n\t});\n\n\tasync function testRead(resource: URI): Promise<void> {\n\t\tconst result = await service.read(resource);\n\n\t\tassert.strictEqual(result.name, basename(resource.fsPath));\n\t\tassert.strictEqual(result.size, (await stat(resource.fsPath)).size);\n\t\tassert.strictEqual(result.value, (await readFile(resource.fsPath)).toString());\n\t}\n\n\ttest('readStream - encoding picked up (CP1252)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_small_cp1252.txt'));\n\t\tconst encoding = 'windows1252';\n\n\t\tconst result = await service.readStream(resource, { encoding });\n\t\tassert.strictEqual(result.encoding, encoding);\n\t\tassert.strictEqual(result.value.getFirstLineText(999999), 'Private = \"Persönlicheß Information\"');\n\t});\n\n\ttest('read - encoding picked up (CP1252)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_small_cp1252.txt'));\n\t\tconst encoding = 'windows1252';\n\n\t\tconst result = await service.read(resource, { encoding });\n\t\tassert.strictEqual(result.encoding, encoding);\n\t\tassert.strictEqual(result.value, 'Private = \"Persönlicheß Information\"');\n\t});\n\n\ttest('read - encoding picked up (binary)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_small_cp1252.txt'));\n\t\tconst encoding = 'binary';\n\n\t\tconst result = await service.read(resource, { encoding });\n\t\tassert.strictEqual(result.encoding, encoding);\n\t\tassert.strictEqual(result.value, 'Private = \"Persönlicheß Information\"');\n\t});\n\n\ttest('read - encoding picked up (base64)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_small_cp1252.txt'));\n\t\tconst encoding = 'base64';\n\n\t\tconst result = await service.read(resource, { encoding });\n\t\tassert.strictEqual(result.encoding, encoding);\n\t\tassert.strictEqual(result.value, btoa('Private = \"Persönlicheß Information\"'));\n\t});\n\n\ttest('readStream - user overrides BOM', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_utf16le.css'));\n\n\t\tconst result = await service.readStream(resource, { encoding: 'windows1252' });\n\t\tassert.strictEqual(result.encoding, 'windows1252');\n\t});\n\n\ttest('readStream - BOM removed', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_utf8_bom.txt'));\n\n\t\tconst result = await service.readStream(resource);\n\t\tassert.strictEqual(result.value.getFirstLineText(999999), 'This is some UTF 8 with BOM file.');\n\t});\n\n\ttest('readStream - invalid encoding', async () => {\n\t\tconst resource = URI.file(join(testDir, 'index.html'));\n\n\t\tconst result = await service.readStream(resource, { encoding: 'superduper' });\n\t\tassert.strictEqual(result.encoding, 'utf8');\n\t});\n\n\ttest('readStream - encoding override', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some.utf16le'));\n\n\t\tconst result = await service.readStream(resource, { encoding: 'windows1252' });\n\t\tassert.strictEqual(result.encoding, 'utf16le');\n\t\tassert.strictEqual(result.value.getFirstLineText(999999), 'This is some UTF 16 with BOM file.');\n\t});\n\n\ttest('readStream - large Big5', async () => {\n\t\tawait testLargeEncoding('big5', '中文abc');\n\t});\n\n\ttest('readStream - large CP1252', async () => {\n\t\tawait testLargeEncoding('cp1252', 'öäüß');\n\t});\n\n\ttest('readStream - large Cyrillic', async () => {\n\t\tawait testLargeEncoding('cp866', 'АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя');\n\t});\n\n\ttest('readStream - large GBK', async () => {\n\t\tawait testLargeEncoding('gbk', '中国abc');\n\t});\n\n\ttest('readStream - large ShiftJIS', async () => {\n\t\tawait testLargeEncoding('shiftjis', '中文abc');\n\t});\n\n\ttest('readStream - large UTF8 BOM', async () => {\n\t\tawait testLargeEncoding('utf8bom', 'öäüß');\n\t});\n\n\ttest('readStream - large UTF16 LE', async () => {\n\t\tawait testLargeEncoding('utf16le', 'öäüß');\n\t});\n\n\ttest('readStream - large UTF16 BE', async () => {\n\t\tawait testLargeEncoding('utf16be', 'öäüß');\n\t});\n\n\tasync function testLargeEncoding(encoding: string, needle: string): Promise<void> {\n\t\tconst resource = URI.file(join(testDir, `lorem_${encoding}.txt`));\n\n\t\t// Verify via `ITextFileService.readStream`\n\t\tconst result = await service.readStream(resource, { encoding });\n\t\tassert.strictEqual(result.encoding, encoding);\n\n\t\tconst textBuffer = disposables.add(result.value.create(DefaultEndOfLine.LF).textBuffer);\n\t\tlet contents = snapshotToString(textBuffer.createSnapshot(false));\n\n\t\tassert.strictEqual(contents.indexOf(needle), 0);\n\t\tassert.ok(contents.indexOf(needle, 10) > 0);\n\n\t\t// Verify via `ITextFileService.getDecodedTextFactory`\n\t\tconst rawFile = await params.readFile(resource.fsPath);\n\t\tlet rawFileVSBuffer: VSBuffer;\n\t\tif (rawFile instanceof VSBuffer) {\n\t\t\trawFileVSBuffer = rawFile;\n\t\t} else {\n\t\t\trawFileVSBuffer = VSBuffer.wrap(rawFile);\n\t\t}\n\n\t\tconst factory = await createTextBufferFactoryFromStream(await service.getDecodedStream(resource, bufferToStream(rawFileVSBuffer), { encoding }));\n\n\t\tconst textBuffer2 = disposables.add(factory.create(DefaultEndOfLine.LF).textBuffer);\n\t\tcontents = snapshotToString(textBuffer2.createSnapshot(false));\n\n\t\tassert.strictEqual(contents.indexOf(needle), 0);\n\t\tassert.ok(contents.indexOf(needle, 10) > 0);\n\t}\n\n\ttest('readStream - UTF16 LE (no BOM)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'utf16_le_nobom.txt'));\n\n\t\tconst result = await service.readStream(resource);\n\t\tassert.strictEqual(result.encoding, 'utf16le');\n\t});\n\n\ttest('readStream - UTF16 BE (no BOM)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'utf16_be_nobom.txt'));\n\n\t\tconst result = await service.readStream(resource);\n\t\tassert.strictEqual(result.encoding, 'utf16be');\n\t});\n\n\ttest('readStream - autoguessEncoding', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_cp1252.txt'));\n\n\t\tconst result = await service.readStream(resource, { autoGuessEncoding: true });\n\t\tassert.strictEqual(result.encoding, 'windows1252');\n\t});\n\n\ttest('readStream - autoguessEncoding (candidateGuessEncodings)', async () => {\n\t\t// This file is determined to be Windows-1252 unless candidateDetectEncoding is set.\n\t\tconst resource = URI.file(join(testDir, 'some.shiftjis.1.txt'));\n\n\t\tconst result = await service.readStream(resource, { autoGuessEncoding: true, candidateGuessEncodings: ['utf-8', 'shiftjis', 'euc-jp'] });\n\t\tassert.strictEqual(result.encoding, 'shiftjis');\n\t});\n\n\ttest('readStream - autoguessEncoding (candidateGuessEncodings is Empty)', async () => {\n\t\tconst resource = URI.file(join(testDir, 'some_cp1252.txt'));\n\n\t\tconst result = await service.readStream(resource, { autoGuessEncoding: true, candidateGuessEncodings: [] });\n\t\tassert.strictEqual(result.encoding, 'windows1252');\n\t});\n\n\ttest('readStream - FILE_IS_BINARY', async () => {\n\t\tconst resource = URI.file(join(testDir, 'binary.txt'));\n\n\t\tlet error: TextFileOperationError | undefined = undefined;\n\t\ttry {\n\t\t\tawait service.readStream(resource, { acceptTextOnly: true });\n\t\t} catch (err) {\n\t\t\terror = err;\n\t\t}\n\n\t\tassert.ok(error);\n\t\tassert.strictEqual(error.textFileOperationResult, TextFileOperationResult.FILE_IS_BINARY);\n\n\t\tconst result = await service.readStream(URI.file(join(testDir, 'small.txt')), { acceptTextOnly: true });\n\t\tassert.strictEqual(result.name, 'small.txt');\n\t});\n\n\ttest('read - FILE_IS_BINARY', async () => {\n\t\tconst resource = URI.file(join(testDir, 'binary.txt'));\n\n\t\tlet error: TextFileOperationError | undefined = undefined;\n\t\ttry {\n\t\t\tawait service.read(resource, { acceptTextOnly: true });\n\t\t} catch (err) {\n\t\t\terror = err;\n\t\t}\n\n\t\tassert.ok(error);\n\t\tassert.strictEqual(error.textFileOperationResult, TextFileOperationResult.FILE_IS_BINARY);\n\n\t\tconst result = await service.read(URI.file(join(testDir, 'small.txt')), { acceptTextOnly: true });\n\t\tassert.strictEqual(result.name, 'small.txt');\n\t});\n}\n"]}