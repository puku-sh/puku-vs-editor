{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/dialogs/electron-browser/fileDialogService.ts","vs/workbench/services/dialogs/electron-browser/fileDialogService.ts"],"names":[],"mappings":"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","file":"fileDialogService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { SaveDialogOptions, OpenDialogOptions } from '../../../../base/parts/sandbox/common/electronTypes.js';\nimport { IHostService } from '../../host/browser/host.js';\nimport { IPickAndOpenOptions, ISaveDialogOptions, IOpenDialogOptions, IFileDialogService, IDialogService, INativeOpenDialogOptions } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { IHistoryService } from '../../history/common/history.js';\nimport { IWorkbenchEnvironmentService } from '../../environment/common/environmentService.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { INativeHostOptions, INativeHostService } from '../../../../platform/native/common/native.js';\nimport { AbstractFileDialogService } from '../browser/abstractFileDialogService.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport { IWorkspacesService } from '../../../../platform/workspaces/common/workspaces.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { IPathService } from '../../path/common/pathService.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { IEditorService } from '../../editor/common/editorService.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { getActiveWindow } from '../../../../base/browser/dom.js';\n\nexport class FileDialogService extends AbstractFileDialogService implements IFileDialogService {\n\n\tconstructor(\n\t\t@IHostService hostService: IHostService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IHistoryService historyService: IHistoryService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@INativeHostService private readonly nativeHostService: INativeHostService,\n\t\t@IDialogService dialogService: IDialogService,\n\t\t@ILanguageService languageService: ILanguageService,\n\t\t@IWorkspacesService workspacesService: IWorkspacesService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@IPathService pathService: IPathService,\n\t\t@ICommandService commandService: ICommandService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@ILogService logService: ILogService\n\t) {\n\t\tsuper(hostService, contextService, historyService, environmentService, instantiationService,\n\t\t\tconfigurationService, fileService, openerService, dialogService, languageService, workspacesService, labelService, pathService, commandService, editorService, codeEditorService, logService);\n\t}\n\n\tprivate toNativeOpenDialogOptions(options: IPickAndOpenOptions): INativeOpenDialogOptions {\n\t\treturn {\n\t\t\tforceNewWindow: options.forceNewWindow,\n\t\t\ttelemetryExtraData: options.telemetryExtraData,\n\t\t\tdefaultPath: options.defaultUri?.fsPath\n\t\t};\n\t}\n\n\tprivate shouldUseSimplified(schema: string): { useSimplified: boolean; isSetting: boolean } {\n\t\tconst setting = (this.configurationService.getValue('files.simpleDialog.enable') === true);\n\t\tconst newWindowSetting = (this.configurationService.getValue('window.openFilesInNewWindow') === 'on');\n\t\treturn {\n\t\t\t// - Only real files can be shown in the native file picker\n\t\t\t// - If the simple file dialog is enabled\n\t\t\t// - driver automation (like smoke tests) can use the simple file dialog but not native\n\t\t\tuseSimplified: ((schema !== Schemas.file) && (schema !== Schemas.vscodeUserData)) || setting || !!this.environmentService.enableSmokeTestDriver,\n\t\t\tisSetting: newWindowSetting\n\t\t};\n\t}\n\n\tasync pickFileFolderAndOpen(options: IPickAndOpenOptions): Promise<void> {\n\t\tconst schema = this.getFileSystemSchema(options);\n\n\t\tif (!options.defaultUri) {\n\t\t\toptions.defaultUri = await this.defaultFilePath(schema);\n\t\t}\n\n\t\tconst shouldUseSimplified = this.shouldUseSimplified(schema);\n\t\tif (shouldUseSimplified.useSimplified) {\n\t\t\treturn this.pickFileFolderAndOpenSimplified(schema, options, shouldUseSimplified.isSetting);\n\t\t}\n\t\treturn this.nativeHostService.pickFileFolderAndOpen(this.toNativeOpenDialogOptions(options));\n\t}\n\n\tasync pickFileAndOpen(options: IPickAndOpenOptions): Promise<void> {\n\t\tconst schema = this.getFileSystemSchema(options);\n\n\t\tif (!options.defaultUri) {\n\t\t\toptions.defaultUri = await this.defaultFilePath(schema);\n\t\t}\n\n\t\tconst shouldUseSimplified = this.shouldUseSimplified(schema);\n\t\tif (shouldUseSimplified.useSimplified) {\n\t\t\treturn this.pickFileAndOpenSimplified(schema, options, shouldUseSimplified.isSetting);\n\t\t}\n\t\treturn this.nativeHostService.pickFileAndOpen(this.toNativeOpenDialogOptions(options));\n\t}\n\n\tasync pickFolderAndOpen(options: IPickAndOpenOptions): Promise<void> {\n\t\tconst schema = this.getFileSystemSchema(options);\n\n\t\tif (!options.defaultUri) {\n\t\t\toptions.defaultUri = await this.defaultFolderPath(schema);\n\t\t}\n\n\t\tif (this.shouldUseSimplified(schema).useSimplified) {\n\t\t\treturn this.pickFolderAndOpenSimplified(schema, options);\n\t\t}\n\t\treturn this.nativeHostService.pickFolderAndOpen(this.toNativeOpenDialogOptions(options));\n\t}\n\n\tasync pickWorkspaceAndOpen(options: IPickAndOpenOptions): Promise<void> {\n\t\toptions.availableFileSystems = this.getWorkspaceAvailableFileSystems(options);\n\t\tconst schema = this.getFileSystemSchema(options);\n\n\t\tif (!options.defaultUri) {\n\t\t\toptions.defaultUri = await this.defaultWorkspacePath(schema);\n\t\t}\n\n\t\tif (this.shouldUseSimplified(schema).useSimplified) {\n\t\t\treturn this.pickWorkspaceAndOpenSimplified(schema, options);\n\t\t}\n\t\treturn this.nativeHostService.pickWorkspaceAndOpen(this.toNativeOpenDialogOptions(options));\n\t}\n\n\tasync pickFileToSave(defaultUri: URI, availableFileSystems?: string[]): Promise<URI | undefined> {\n\t\tconst schema = this.getFileSystemSchema({ defaultUri, availableFileSystems });\n\t\tconst options = this.getPickFileToSaveDialogOptions(defaultUri, availableFileSystems);\n\t\tif (this.shouldUseSimplified(schema).useSimplified) {\n\t\t\treturn this.pickFileToSaveSimplified(schema, options);\n\t\t} else {\n\t\t\tconst result = await this.nativeHostService.showSaveDialog(this.toNativeSaveDialogOptions(options));\n\t\t\tif (result && !result.canceled && result.filePath) {\n\t\t\t\tconst uri = URI.file(result.filePath);\n\n\t\t\t\tthis.addFileToRecentlyOpened(uri);\n\n\t\t\t\treturn uri;\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tprivate toNativeSaveDialogOptions(options: ISaveDialogOptions): SaveDialogOptions & INativeHostOptions {\n\t\toptions.defaultUri = options.defaultUri ? URI.file(options.defaultUri.path) : undefined;\n\t\treturn {\n\t\t\tdefaultPath: options.defaultUri?.fsPath,\n\t\t\tbuttonLabel: typeof options.saveLabel === 'string' ? options.saveLabel : options.saveLabel?.withMnemonic,\n\t\t\tfilters: options.filters,\n\t\t\ttitle: options.title,\n\t\t\ttargetWindowId: getActiveWindow().vscodeWindowId\n\t\t};\n\t}\n\n\tasync showSaveDialog(options: ISaveDialogOptions): Promise<URI | undefined> {\n\t\tconst schema = this.getFileSystemSchema(options);\n\t\tif (this.shouldUseSimplified(schema).useSimplified) {\n\t\t\treturn this.showSaveDialogSimplified(schema, options);\n\t\t}\n\n\t\tconst result = await this.nativeHostService.showSaveDialog(this.toNativeSaveDialogOptions(options));\n\t\tif (result && !result.canceled && result.filePath) {\n\t\t\treturn URI.file(result.filePath);\n\t\t}\n\n\t\treturn;\n\t}\n\n\tasync showOpenDialog(options: IOpenDialogOptions): Promise<URI[] | undefined> {\n\t\tconst schema = this.getFileSystemSchema(options);\n\t\tif (this.shouldUseSimplified(schema).useSimplified) {\n\t\t\treturn this.showOpenDialogSimplified(schema, options);\n\t\t}\n\n\t\tconst newOptions: OpenDialogOptions & { properties: string[] } & INativeHostOptions = {\n\t\t\ttitle: options.title,\n\t\t\tdefaultPath: options.defaultUri?.fsPath,\n\t\t\tbuttonLabel: typeof options.openLabel === 'string' ? options.openLabel : options.openLabel?.withMnemonic,\n\t\t\tfilters: options.filters,\n\t\t\tproperties: [],\n\t\t\ttargetWindowId: getActiveWindow().vscodeWindowId\n\t\t};\n\n\t\tnewOptions.properties.push('createDirectory');\n\n\t\tif (options.canSelectFiles) {\n\t\t\tnewOptions.properties.push('openFile');\n\t\t}\n\n\t\tif (options.canSelectFolders) {\n\t\t\tnewOptions.properties.push('openDirectory');\n\t\t}\n\n\t\tif (options.canSelectMany) {\n\t\t\tnewOptions.properties.push('multiSelections');\n\t\t}\n\n\t\tconst result = await this.nativeHostService.showOpenDialog(newOptions);\n\t\treturn result && Array.isArray(result.filePaths) && result.filePaths.length > 0 ? result.filePaths.map(URI.file) : undefined;\n\t}\n}\n\nregisterSingleton(IFileDialogService, FileDialogService, InstantiationType.Delayed);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { SaveDialogOptions, OpenDialogOptions } from '../../../../base/parts/sandbox/common/electronTypes.js';\nimport { IHostService } from '../../host/browser/host.js';\nimport { IPickAndOpenOptions, ISaveDialogOptions, IOpenDialogOptions, IFileDialogService, IDialogService, INativeOpenDialogOptions } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { IHistoryService } from '../../history/common/history.js';\nimport { IWorkbenchEnvironmentService } from '../../environment/common/environmentService.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { INativeHostOptions, INativeHostService } from '../../../../platform/native/common/native.js';\nimport { AbstractFileDialogService } from '../browser/abstractFileDialogService.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport { IWorkspacesService } from '../../../../platform/workspaces/common/workspaces.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { IPathService } from '../../path/common/pathService.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { IEditorService } from '../../editor/common/editorService.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { getActiveWindow } from '../../../../base/browser/dom.js';\n\nexport class FileDialogService extends AbstractFileDialogService implements IFileDialogService {\n\n\tconstructor(\n\t\t@IHostService hostService: IHostService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IHistoryService historyService: IHistoryService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@INativeHostService private readonly nativeHostService: INativeHostService,\n\t\t@IDialogService dialogService: IDialogService,\n\t\t@ILanguageService languageService: ILanguageService,\n\t\t@IWorkspacesService workspacesService: IWorkspacesService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@IPathService pathService: IPathService,\n\t\t@ICommandService commandService: ICommandService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@ILogService logService: ILogService\n\t) {\n\t\tsuper(hostService, contextService, historyService, environmentService, instantiationService,\n\t\t\tconfigurationService, fileService, openerService, dialogService, languageService, workspacesService, labelService, pathService, commandService, editorService, codeEditorService, logService);\n\t}\n\n\tprivate toNativeOpenDialogOptions(options: IPickAndOpenOptions): INativeOpenDialogOptions {\n\t\treturn {\n\t\t\tforceNewWindow: options.forceNewWindow,\n\t\t\ttelemetryExtraData: options.telemetryExtraData,\n\t\t\tdefaultPath: options.defaultUri?.fsPath\n\t\t};\n\t}\n\n\tprivate shouldUseSimplified(schema: string): { useSimplified: boolean; isSetting: boolean } {\n\t\tconst setting = (this.configurationService.getValue('files.simpleDialog.enable') === true);\n\t\tconst newWindowSetting = (this.configurationService.getValue('window.openFilesInNewWindow') === 'on');\n\t\treturn {\n\t\t\t// - Only real files can be shown in the native file picker\n\t\t\t// - If the simple file dialog is enabled\n\t\t\t// - driver automation (like smoke tests) can use the simple file dialog but not native\n\t\t\tuseSimplified: ((schema !== Schemas.file) && (schema !== Schemas.vscodeUserData)) || setting || !!this.environmentService.enableSmokeTestDriver,\n\t\t\tisSetting: newWindowSetting\n\t\t};\n\t}\n\n\tasync pickFileFolderAndOpen(options: IPickAndOpenOptions): Promise<void> {\n\t\tconst schema = this.getFileSystemSchema(options);\n\n\t\tif (!options.defaultUri) {\n\t\t\toptions.defaultUri = await this.defaultFilePath(schema);\n\t\t}\n\n\t\tconst shouldUseSimplified = this.shouldUseSimplified(schema);\n\t\tif (shouldUseSimplified.useSimplified) {\n\t\t\treturn this.pickFileFolderAndOpenSimplified(schema, options, shouldUseSimplified.isSetting);\n\t\t}\n\t\treturn this.nativeHostService.pickFileFolderAndOpen(this.toNativeOpenDialogOptions(options));\n\t}\n\n\tasync pickFileAndOpen(options: IPickAndOpenOptions): Promise<void> {\n\t\tconst schema = this.getFileSystemSchema(options);\n\n\t\tif (!options.defaultUri) {\n\t\t\toptions.defaultUri = await this.defaultFilePath(schema);\n\t\t}\n\n\t\tconst shouldUseSimplified = this.shouldUseSimplified(schema);\n\t\tif (shouldUseSimplified.useSimplified) {\n\t\t\treturn this.pickFileAndOpenSimplified(schema, options, shouldUseSimplified.isSetting);\n\t\t}\n\t\treturn this.nativeHostService.pickFileAndOpen(this.toNativeOpenDialogOptions(options));\n\t}\n\n\tasync pickFolderAndOpen(options: IPickAndOpenOptions): Promise<void> {\n\t\tconst schema = this.getFileSystemSchema(options);\n\n\t\tif (!options.defaultUri) {\n\t\t\toptions.defaultUri = await this.defaultFolderPath(schema);\n\t\t}\n\n\t\tif (this.shouldUseSimplified(schema).useSimplified) {\n\t\t\treturn this.pickFolderAndOpenSimplified(schema, options);\n\t\t}\n\t\treturn this.nativeHostService.pickFolderAndOpen(this.toNativeOpenDialogOptions(options));\n\t}\n\n\tasync pickWorkspaceAndOpen(options: IPickAndOpenOptions): Promise<void> {\n\t\toptions.availableFileSystems = this.getWorkspaceAvailableFileSystems(options);\n\t\tconst schema = this.getFileSystemSchema(options);\n\n\t\tif (!options.defaultUri) {\n\t\t\toptions.defaultUri = await this.defaultWorkspacePath(schema);\n\t\t}\n\n\t\tif (this.shouldUseSimplified(schema).useSimplified) {\n\t\t\treturn this.pickWorkspaceAndOpenSimplified(schema, options);\n\t\t}\n\t\treturn this.nativeHostService.pickWorkspaceAndOpen(this.toNativeOpenDialogOptions(options));\n\t}\n\n\tasync pickFileToSave(defaultUri: URI, availableFileSystems?: string[]): Promise<URI | undefined> {\n\t\tconst schema = this.getFileSystemSchema({ defaultUri, availableFileSystems });\n\t\tconst options = this.getPickFileToSaveDialogOptions(defaultUri, availableFileSystems);\n\t\tif (this.shouldUseSimplified(schema).useSimplified) {\n\t\t\treturn this.pickFileToSaveSimplified(schema, options);\n\t\t} else {\n\t\t\tconst result = await this.nativeHostService.showSaveDialog(this.toNativeSaveDialogOptions(options));\n\t\t\tif (result && !result.canceled && result.filePath) {\n\t\t\t\tconst uri = URI.file(result.filePath);\n\n\t\t\t\tthis.addFileToRecentlyOpened(uri);\n\n\t\t\t\treturn uri;\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tprivate toNativeSaveDialogOptions(options: ISaveDialogOptions): SaveDialogOptions & INativeHostOptions {\n\t\toptions.defaultUri = options.defaultUri ? URI.file(options.defaultUri.path) : undefined;\n\t\treturn {\n\t\t\tdefaultPath: options.defaultUri?.fsPath,\n\t\t\tbuttonLabel: typeof options.saveLabel === 'string' ? options.saveLabel : options.saveLabel?.withMnemonic,\n\t\t\tfilters: options.filters,\n\t\t\ttitle: options.title,\n\t\t\ttargetWindowId: getActiveWindow().vscodeWindowId\n\t\t};\n\t}\n\n\tasync showSaveDialog(options: ISaveDialogOptions): Promise<URI | undefined> {\n\t\tconst schema = this.getFileSystemSchema(options);\n\t\tif (this.shouldUseSimplified(schema).useSimplified) {\n\t\t\treturn this.showSaveDialogSimplified(schema, options);\n\t\t}\n\n\t\tconst result = await this.nativeHostService.showSaveDialog(this.toNativeSaveDialogOptions(options));\n\t\tif (result && !result.canceled && result.filePath) {\n\t\t\treturn URI.file(result.filePath);\n\t\t}\n\n\t\treturn;\n\t}\n\n\tasync showOpenDialog(options: IOpenDialogOptions): Promise<URI[] | undefined> {\n\t\tconst schema = this.getFileSystemSchema(options);\n\t\tif (this.shouldUseSimplified(schema).useSimplified) {\n\t\t\treturn this.showOpenDialogSimplified(schema, options);\n\t\t}\n\n\t\tconst newOptions: OpenDialogOptions & { properties: string[] } & INativeHostOptions = {\n\t\t\ttitle: options.title,\n\t\t\tdefaultPath: options.defaultUri?.fsPath,\n\t\t\tbuttonLabel: typeof options.openLabel === 'string' ? options.openLabel : options.openLabel?.withMnemonic,\n\t\t\tfilters: options.filters,\n\t\t\tproperties: [],\n\t\t\ttargetWindowId: getActiveWindow().vscodeWindowId\n\t\t};\n\n\t\tnewOptions.properties.push('createDirectory');\n\n\t\tif (options.canSelectFiles) {\n\t\t\tnewOptions.properties.push('openFile');\n\t\t}\n\n\t\tif (options.canSelectFolders) {\n\t\t\tnewOptions.properties.push('openDirectory');\n\t\t}\n\n\t\tif (options.canSelectMany) {\n\t\t\tnewOptions.properties.push('multiSelections');\n\t\t}\n\n\t\tconst result = await this.nativeHostService.showOpenDialog(newOptions);\n\t\treturn result && Array.isArray(result.filePaths) && result.filePaths.length > 0 ? result.filePaths.map(URI.file) : undefined;\n\t}\n}\n\nregisterSingleton(IFileDialogService, FileDialogService, InstantiationType.Delayed);\n"]}