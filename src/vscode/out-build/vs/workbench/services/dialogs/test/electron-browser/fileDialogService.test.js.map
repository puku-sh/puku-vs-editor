{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/dialogs/test/electron-browser/fileDialogService.test.ts","vs/workbench/services/dialogs/test/electron-browser/fileDialogService.test.ts"],"names":[],"mappings":"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","file":"fileDialogService.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as sinon from 'sinon';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ICodeEditorService } from '../../../../../editor/browser/services/codeEditorService.js';\nimport { ILanguageService } from '../../../../../editor/common/languages/language.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { IDialogService, IFileDialogService, IOpenDialogOptions, ISaveDialogOptions } from '../../../../../platform/dialogs/common/dialogs.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { ILogService } from '../../../../../platform/log/common/log.js';\nimport { INativeHostService } from '../../../../../platform/native/common/native.js';\nimport { IOpenerService } from '../../../../../platform/opener/common/opener.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { IWorkspacesService } from '../../../../../platform/workspaces/common/workspaces.js';\nimport { ISimpleFileDialog } from '../../browser/simpleFileDialog.js';\nimport { FileDialogService } from '../../electron-browser/fileDialogService.js';\nimport { IEditorService } from '../../../editor/common/editorService.js';\nimport { BrowserWorkbenchEnvironmentService } from '../../../environment/browser/environmentService.js';\nimport { IWorkbenchEnvironmentService } from '../../../environment/common/environmentService.js';\nimport { IHistoryService } from '../../../history/common/history.js';\nimport { IHostService } from '../../../host/browser/host.js';\nimport { IPathService } from '../../../path/common/pathService.js';\nimport { BrowserWorkspaceEditingService } from '../../../workspaces/browser/workspaceEditingService.js';\nimport { IWorkspaceEditingService } from '../../../workspaces/common/workspaceEditing.js';\nimport { workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\n\nclass TestFileDialogService extends FileDialogService {\n\tconstructor(\n\t\tprivate simple: ISimpleFileDialog,\n\t\t@IHostService hostService: IHostService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IHistoryService historyService: IHistoryService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@INativeHostService nativeHostService: INativeHostService,\n\t\t@IDialogService dialogService: IDialogService,\n\t\t@ILanguageService languageService: ILanguageService,\n\t\t@IWorkspacesService workspacesService: IWorkspacesService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@IPathService pathService: IPathService,\n\t\t@ICommandService commandService: ICommandService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@ILogService logService: ILogService\n\t) {\n\t\tsuper(hostService, contextService, historyService, environmentService, instantiationService, configurationService, fileService,\n\t\t\topenerService, nativeHostService, dialogService, languageService, workspacesService, labelService, pathService, commandService, editorService, codeEditorService, logService);\n\t}\n\n\tprotected override getSimpleFileDialog() {\n\t\tif (this.simple) {\n\t\t\treturn this.simple;\n\t\t} else {\n\t\t\treturn super.getSimpleFileDialog();\n\t\t}\n\t}\n}\n\nsuite('FileDialogService', function () {\n\n\tlet instantiationService: TestInstantiationService;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\tconst testFile: URI = URI.file('/test/file');\n\n\tsetup(async function () {\n\t\tdisposables.add(instantiationService = workbenchInstantiationService(undefined, disposables));\n\t\tconst configurationService = new TestConfigurationService();\n\t\tawait configurationService.setUserConfiguration('files', { simpleDialog: { enable: true } });\n\t\tinstantiationService.stub(IConfigurationService, configurationService);\n\n\t});\n\n\ttest('Local - open/save workspaces availableFilesystems', async function () {\n\t\tclass TestSimpleFileDialog implements ISimpleFileDialog {\n\t\t\tasync showOpenDialog(options: IOpenDialogOptions): Promise<URI | undefined> {\n\t\t\t\tassert.strictEqual(options.availableFileSystems?.length, 1);\n\t\t\t\tassert.strictEqual(options.availableFileSystems[0], Schemas.file);\n\t\t\t\treturn testFile;\n\t\t\t}\n\t\t\tasync showSaveDialog(options: ISaveDialogOptions): Promise<URI | undefined> {\n\t\t\t\tassert.strictEqual(options.availableFileSystems?.length, 1);\n\t\t\t\tassert.strictEqual(options.availableFileSystems[0], Schemas.file);\n\t\t\t\treturn testFile;\n\t\t\t}\n\t\t\tdispose(): void { }\n\t\t}\n\n\t\tconst dialogService = instantiationService.createInstance(TestFileDialogService, new TestSimpleFileDialog());\n\t\tinstantiationService.set(IFileDialogService, dialogService);\n\t\tconst workspaceService: IWorkspaceEditingService = disposables.add(instantiationService.createInstance(BrowserWorkspaceEditingService));\n\t\tassert.strictEqual((await workspaceService.pickNewWorkspacePath())?.path.startsWith(testFile.path), true);\n\t\tassert.strictEqual(await dialogService.pickWorkspaceAndOpen({}), undefined);\n\t});\n\n\ttest('Virtual - open/save workspaces availableFilesystems', async function () {\n\t\tclass TestSimpleFileDialog {\n\t\t\tasync showOpenDialog(options: IOpenDialogOptions): Promise<URI | undefined> {\n\t\t\t\tassert.strictEqual(options.availableFileSystems?.length, 1);\n\t\t\t\tassert.strictEqual(options.availableFileSystems[0], Schemas.file);\n\t\t\t\treturn testFile;\n\t\t\t}\n\t\t\tasync showSaveDialog(options: ISaveDialogOptions): Promise<URI | undefined> {\n\t\t\t\tassert.strictEqual(options.availableFileSystems?.length, 1);\n\t\t\t\tassert.strictEqual(options.availableFileSystems[0], Schemas.file);\n\t\t\t\treturn testFile;\n\t\t\t}\n\t\t\tdispose(): void { }\n\t\t}\n\n\t\tinstantiationService.stub(IPathService, new class {\n\t\t\tdefaultUriScheme: string = 'vscode-virtual-test';\n\t\t\tuserHome = async () => URI.file('/user/home');\n\t\t} as IPathService);\n\t\tconst dialogService = instantiationService.createInstance(TestFileDialogService, new TestSimpleFileDialog());\n\t\tinstantiationService.set(IFileDialogService, dialogService);\n\t\tconst workspaceService: IWorkspaceEditingService = disposables.add(instantiationService.createInstance(BrowserWorkspaceEditingService));\n\t\tassert.strictEqual((await workspaceService.pickNewWorkspacePath())?.path.startsWith(testFile.path), true);\n\t\tassert.strictEqual(await dialogService.pickWorkspaceAndOpen({}), undefined);\n\t});\n\n\ttest('Remote - open/save workspaces availableFilesystems', async function () {\n\t\tclass TestSimpleFileDialog implements ISimpleFileDialog {\n\t\t\tasync showOpenDialog(options: IOpenDialogOptions): Promise<URI | undefined> {\n\t\t\t\tassert.strictEqual(options.availableFileSystems?.length, 2);\n\t\t\t\tassert.strictEqual(options.availableFileSystems[0], Schemas.vscodeRemote);\n\t\t\t\tassert.strictEqual(options.availableFileSystems[1], Schemas.file);\n\t\t\t\treturn testFile;\n\t\t\t}\n\t\t\tasync showSaveDialog(options: ISaveDialogOptions): Promise<URI | undefined> {\n\t\t\t\tassert.strictEqual(options.availableFileSystems?.length, 2);\n\t\t\t\tassert.strictEqual(options.availableFileSystems[0], Schemas.vscodeRemote);\n\t\t\t\tassert.strictEqual(options.availableFileSystems[1], Schemas.file);\n\t\t\t\treturn testFile;\n\t\t\t}\n\t\t\tdispose(): void { }\n\t\t}\n\n\t\tinstantiationService.set(IWorkbenchEnvironmentService, new class extends mock<BrowserWorkbenchEnvironmentService>() {\n\t\t\toverride get remoteAuthority() {\n\t\t\t\treturn 'testRemote';\n\t\t\t}\n\t\t});\n\t\tinstantiationService.stub(IPathService, new class {\n\t\t\tdefaultUriScheme: string = Schemas.vscodeRemote;\n\t\t\tuserHome = async () => URI.file('/user/home');\n\t\t} as IPathService);\n\t\tconst dialogService = instantiationService.createInstance(TestFileDialogService, new TestSimpleFileDialog());\n\t\tinstantiationService.set(IFileDialogService, dialogService);\n\t\tconst workspaceService: IWorkspaceEditingService = disposables.add(instantiationService.createInstance(BrowserWorkspaceEditingService));\n\t\tassert.strictEqual((await workspaceService.pickNewWorkspacePath())?.path.startsWith(testFile.path), true);\n\t\tassert.strictEqual(await dialogService.pickWorkspaceAndOpen({}), undefined);\n\t});\n\n\ttest('Remote - filters default files/folders to RA (#195938)', async function () {\n\t\tclass TestSimpleFileDialog implements ISimpleFileDialog {\n\t\t\tasync showOpenDialog(): Promise<URI | undefined> {\n\t\t\t\treturn testFile;\n\t\t\t}\n\t\t\tasync showSaveDialog(): Promise<URI | undefined> {\n\t\t\t\treturn testFile;\n\t\t\t}\n\t\t\tdispose(): void { }\n\t\t}\n\t\tinstantiationService.set(IWorkbenchEnvironmentService, new class extends mock<BrowserWorkbenchEnvironmentService>() {\n\t\t\toverride get remoteAuthority() {\n\t\t\t\treturn 'testRemote';\n\t\t\t}\n\t\t});\n\t\tinstantiationService.stub(IPathService, new class {\n\t\t\tdefaultUriScheme: string = Schemas.vscodeRemote;\n\t\t\tuserHome = async () => URI.file('/user/home');\n\t\t} as IPathService);\n\n\n\t\tconst dialogService = instantiationService.createInstance(TestFileDialogService, new TestSimpleFileDialog());\n\t\tconst historyService = instantiationService.get(IHistoryService);\n\t\tconst getLastActiveWorkspaceRoot = sinon.spy(historyService, 'getLastActiveWorkspaceRoot');\n\t\tconst getLastActiveFile = sinon.spy(historyService, 'getLastActiveFile');\n\n\t\tawait dialogService.defaultFilePath();\n\t\tassert.deepStrictEqual(getLastActiveFile.args, [[Schemas.vscodeRemote, 'testRemote']]);\n\t\tassert.deepStrictEqual(getLastActiveWorkspaceRoot.args, [[Schemas.vscodeRemote, 'testRemote']]);\n\n\t\tawait dialogService.defaultFolderPath();\n\t\tassert.deepStrictEqual(getLastActiveWorkspaceRoot.args[1], [Schemas.vscodeRemote, 'testRemote']);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as sinon from 'sinon';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ICodeEditorService } from '../../../../../editor/browser/services/codeEditorService.js';\nimport { ILanguageService } from '../../../../../editor/common/languages/language.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { IDialogService, IFileDialogService, IOpenDialogOptions, ISaveDialogOptions } from '../../../../../platform/dialogs/common/dialogs.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { ILogService } from '../../../../../platform/log/common/log.js';\nimport { INativeHostService } from '../../../../../platform/native/common/native.js';\nimport { IOpenerService } from '../../../../../platform/opener/common/opener.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { IWorkspacesService } from '../../../../../platform/workspaces/common/workspaces.js';\nimport { ISimpleFileDialog } from '../../browser/simpleFileDialog.js';\nimport { FileDialogService } from '../../electron-browser/fileDialogService.js';\nimport { IEditorService } from '../../../editor/common/editorService.js';\nimport { BrowserWorkbenchEnvironmentService } from '../../../environment/browser/environmentService.js';\nimport { IWorkbenchEnvironmentService } from '../../../environment/common/environmentService.js';\nimport { IHistoryService } from '../../../history/common/history.js';\nimport { IHostService } from '../../../host/browser/host.js';\nimport { IPathService } from '../../../path/common/pathService.js';\nimport { BrowserWorkspaceEditingService } from '../../../workspaces/browser/workspaceEditingService.js';\nimport { IWorkspaceEditingService } from '../../../workspaces/common/workspaceEditing.js';\nimport { workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\n\nclass TestFileDialogService extends FileDialogService {\n\tconstructor(\n\t\tprivate simple: ISimpleFileDialog,\n\t\t@IHostService hostService: IHostService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IHistoryService historyService: IHistoryService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@INativeHostService nativeHostService: INativeHostService,\n\t\t@IDialogService dialogService: IDialogService,\n\t\t@ILanguageService languageService: ILanguageService,\n\t\t@IWorkspacesService workspacesService: IWorkspacesService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@IPathService pathService: IPathService,\n\t\t@ICommandService commandService: ICommandService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@ILogService logService: ILogService\n\t) {\n\t\tsuper(hostService, contextService, historyService, environmentService, instantiationService, configurationService, fileService,\n\t\t\topenerService, nativeHostService, dialogService, languageService, workspacesService, labelService, pathService, commandService, editorService, codeEditorService, logService);\n\t}\n\n\tprotected override getSimpleFileDialog() {\n\t\tif (this.simple) {\n\t\t\treturn this.simple;\n\t\t} else {\n\t\t\treturn super.getSimpleFileDialog();\n\t\t}\n\t}\n}\n\nsuite('FileDialogService', function () {\n\n\tlet instantiationService: TestInstantiationService;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\tconst testFile: URI = URI.file('/test/file');\n\n\tsetup(async function () {\n\t\tdisposables.add(instantiationService = workbenchInstantiationService(undefined, disposables));\n\t\tconst configurationService = new TestConfigurationService();\n\t\tawait configurationService.setUserConfiguration('files', { simpleDialog: { enable: true } });\n\t\tinstantiationService.stub(IConfigurationService, configurationService);\n\n\t});\n\n\ttest('Local - open/save workspaces availableFilesystems', async function () {\n\t\tclass TestSimpleFileDialog implements ISimpleFileDialog {\n\t\t\tasync showOpenDialog(options: IOpenDialogOptions): Promise<URI | undefined> {\n\t\t\t\tassert.strictEqual(options.availableFileSystems?.length, 1);\n\t\t\t\tassert.strictEqual(options.availableFileSystems[0], Schemas.file);\n\t\t\t\treturn testFile;\n\t\t\t}\n\t\t\tasync showSaveDialog(options: ISaveDialogOptions): Promise<URI | undefined> {\n\t\t\t\tassert.strictEqual(options.availableFileSystems?.length, 1);\n\t\t\t\tassert.strictEqual(options.availableFileSystems[0], Schemas.file);\n\t\t\t\treturn testFile;\n\t\t\t}\n\t\t\tdispose(): void { }\n\t\t}\n\n\t\tconst dialogService = instantiationService.createInstance(TestFileDialogService, new TestSimpleFileDialog());\n\t\tinstantiationService.set(IFileDialogService, dialogService);\n\t\tconst workspaceService: IWorkspaceEditingService = disposables.add(instantiationService.createInstance(BrowserWorkspaceEditingService));\n\t\tassert.strictEqual((await workspaceService.pickNewWorkspacePath())?.path.startsWith(testFile.path), true);\n\t\tassert.strictEqual(await dialogService.pickWorkspaceAndOpen({}), undefined);\n\t});\n\n\ttest('Virtual - open/save workspaces availableFilesystems', async function () {\n\t\tclass TestSimpleFileDialog {\n\t\t\tasync showOpenDialog(options: IOpenDialogOptions): Promise<URI | undefined> {\n\t\t\t\tassert.strictEqual(options.availableFileSystems?.length, 1);\n\t\t\t\tassert.strictEqual(options.availableFileSystems[0], Schemas.file);\n\t\t\t\treturn testFile;\n\t\t\t}\n\t\t\tasync showSaveDialog(options: ISaveDialogOptions): Promise<URI | undefined> {\n\t\t\t\tassert.strictEqual(options.availableFileSystems?.length, 1);\n\t\t\t\tassert.strictEqual(options.availableFileSystems[0], Schemas.file);\n\t\t\t\treturn testFile;\n\t\t\t}\n\t\t\tdispose(): void { }\n\t\t}\n\n\t\tinstantiationService.stub(IPathService, new class {\n\t\t\tdefaultUriScheme: string = 'vscode-virtual-test';\n\t\t\tuserHome = async () => URI.file('/user/home');\n\t\t} as IPathService);\n\t\tconst dialogService = instantiationService.createInstance(TestFileDialogService, new TestSimpleFileDialog());\n\t\tinstantiationService.set(IFileDialogService, dialogService);\n\t\tconst workspaceService: IWorkspaceEditingService = disposables.add(instantiationService.createInstance(BrowserWorkspaceEditingService));\n\t\tassert.strictEqual((await workspaceService.pickNewWorkspacePath())?.path.startsWith(testFile.path), true);\n\t\tassert.strictEqual(await dialogService.pickWorkspaceAndOpen({}), undefined);\n\t});\n\n\ttest('Remote - open/save workspaces availableFilesystems', async function () {\n\t\tclass TestSimpleFileDialog implements ISimpleFileDialog {\n\t\t\tasync showOpenDialog(options: IOpenDialogOptions): Promise<URI | undefined> {\n\t\t\t\tassert.strictEqual(options.availableFileSystems?.length, 2);\n\t\t\t\tassert.strictEqual(options.availableFileSystems[0], Schemas.vscodeRemote);\n\t\t\t\tassert.strictEqual(options.availableFileSystems[1], Schemas.file);\n\t\t\t\treturn testFile;\n\t\t\t}\n\t\t\tasync showSaveDialog(options: ISaveDialogOptions): Promise<URI | undefined> {\n\t\t\t\tassert.strictEqual(options.availableFileSystems?.length, 2);\n\t\t\t\tassert.strictEqual(options.availableFileSystems[0], Schemas.vscodeRemote);\n\t\t\t\tassert.strictEqual(options.availableFileSystems[1], Schemas.file);\n\t\t\t\treturn testFile;\n\t\t\t}\n\t\t\tdispose(): void { }\n\t\t}\n\n\t\tinstantiationService.set(IWorkbenchEnvironmentService, new class extends mock<BrowserWorkbenchEnvironmentService>() {\n\t\t\toverride get remoteAuthority() {\n\t\t\t\treturn 'testRemote';\n\t\t\t}\n\t\t});\n\t\tinstantiationService.stub(IPathService, new class {\n\t\t\tdefaultUriScheme: string = Schemas.vscodeRemote;\n\t\t\tuserHome = async () => URI.file('/user/home');\n\t\t} as IPathService);\n\t\tconst dialogService = instantiationService.createInstance(TestFileDialogService, new TestSimpleFileDialog());\n\t\tinstantiationService.set(IFileDialogService, dialogService);\n\t\tconst workspaceService: IWorkspaceEditingService = disposables.add(instantiationService.createInstance(BrowserWorkspaceEditingService));\n\t\tassert.strictEqual((await workspaceService.pickNewWorkspacePath())?.path.startsWith(testFile.path), true);\n\t\tassert.strictEqual(await dialogService.pickWorkspaceAndOpen({}), undefined);\n\t});\n\n\ttest('Remote - filters default files/folders to RA (#195938)', async function () {\n\t\tclass TestSimpleFileDialog implements ISimpleFileDialog {\n\t\t\tasync showOpenDialog(): Promise<URI | undefined> {\n\t\t\t\treturn testFile;\n\t\t\t}\n\t\t\tasync showSaveDialog(): Promise<URI | undefined> {\n\t\t\t\treturn testFile;\n\t\t\t}\n\t\t\tdispose(): void { }\n\t\t}\n\t\tinstantiationService.set(IWorkbenchEnvironmentService, new class extends mock<BrowserWorkbenchEnvironmentService>() {\n\t\t\toverride get remoteAuthority() {\n\t\t\t\treturn 'testRemote';\n\t\t\t}\n\t\t});\n\t\tinstantiationService.stub(IPathService, new class {\n\t\t\tdefaultUriScheme: string = Schemas.vscodeRemote;\n\t\t\tuserHome = async () => URI.file('/user/home');\n\t\t} as IPathService);\n\n\n\t\tconst dialogService = instantiationService.createInstance(TestFileDialogService, new TestSimpleFileDialog());\n\t\tconst historyService = instantiationService.get(IHistoryService);\n\t\tconst getLastActiveWorkspaceRoot = sinon.spy(historyService, 'getLastActiveWorkspaceRoot');\n\t\tconst getLastActiveFile = sinon.spy(historyService, 'getLastActiveFile');\n\n\t\tawait dialogService.defaultFilePath();\n\t\tassert.deepStrictEqual(getLastActiveFile.args, [[Schemas.vscodeRemote, 'testRemote']]);\n\t\tassert.deepStrictEqual(getLastActiveWorkspaceRoot.args, [[Schemas.vscodeRemote, 'testRemote']]);\n\n\t\tawait dialogService.defaultFolderPath();\n\t\tassert.deepStrictEqual(getLastActiveWorkspaceRoot.args[1], [Schemas.vscodeRemote, 'testRemote']);\n\t});\n});\n"]}