{"version":3,"sources":["vs/workbench/services/auxiliaryWindow/browser/auxiliaryWindowService.ts"],"names":[],"mappings":"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","file":"auxiliaryWindowService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getZoomLevel } from '../../../../base/browser/browser.js';\nimport { $, Dimension, EventHelper, EventType, ModifierKeyEmitter, addDisposableListener, copyAttributes, createLinkElement, createMetaElement, getActiveWindow, getClientArea, getWindowId, isHTMLElement, position, registerWindow, sharedMutationObserver, trackAttributes } from '../../../../base/browser/dom.js';\nimport { cloneGlobalStylesheets, isGlobalStylesheet } from '../../../../base/browser/domStylesheets.js';\nimport { CodeWindow, ensureCodeWindow, mainWindow } from '../../../../base/browser/window.js';\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { Barrier } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable, DisposableStore, IDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { mark } from '../../../../base/common/performance.js';\nimport { isFirefox, isWeb } from '../../../../base/common/platform.js';\nimport Severity from '../../../../base/common/severity.js';\nimport { localize } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { DEFAULT_AUX_WINDOW_SIZE, IRectangle, WindowMinimumSize } from '../../../../platform/window/common/window.js';\nimport { BaseWindow } from '../../../browser/window.js';\nimport { IWorkbenchEnvironmentService } from '../../environment/common/environmentService.js';\nimport { IHostService } from '../../host/browser/host.js';\nimport { IWorkbenchLayoutService } from '../../layout/browser/layoutService.js';\n\nexport const IAuxiliaryWindowService = createDecorator<IAuxiliaryWindowService>('auxiliaryWindowService');\n\nexport interface IAuxiliaryWindowOpenEvent {\n\treadonly window: IAuxiliaryWindow;\n\treadonly disposables: DisposableStore;\n}\n\nexport enum AuxiliaryWindowMode {\n\tMaximized,\n\tNormal,\n\tFullscreen\n}\n\nexport interface IAuxiliaryWindowOpenOptions {\n\treadonly bounds?: Partial<IRectangle>;\n\treadonly compact?: boolean;\n\n\treadonly mode?: AuxiliaryWindowMode;\n\treadonly zoomLevel?: number;\n\treadonly alwaysOnTop?: boolean;\n\n\treadonly nativeTitlebar?: boolean;\n\treadonly disableFullscreen?: boolean;\n}\n\nexport interface IAuxiliaryWindowService {\n\n\treadonly _serviceBrand: undefined;\n\n\treadonly onDidOpenAuxiliaryWindow: Event<IAuxiliaryWindowOpenEvent>;\n\n\topen(options?: IAuxiliaryWindowOpenOptions): Promise<IAuxiliaryWindow>;\n\n\tgetWindow(windowId: number): IAuxiliaryWindow | undefined;\n}\n\nexport interface BeforeAuxiliaryWindowUnloadEvent {\n\tveto(reason: string | undefined): void;\n}\n\nexport interface IAuxiliaryWindow extends IDisposable {\n\n\treadonly onWillLayout: Event<Dimension>;\n\treadonly onDidLayout: Event<Dimension>;\n\n\treadonly onBeforeUnload: Event<BeforeAuxiliaryWindowUnloadEvent>;\n\treadonly onUnload: Event<void>;\n\n\treadonly whenStylesHaveLoaded: Promise<void>;\n\n\treadonly window: CodeWindow;\n\treadonly container: HTMLElement;\n\n\tupdateOptions(options: { compact: boolean } | undefined): void;\n\n\tlayout(): void;\n\n\tcreateState(): IAuxiliaryWindowOpenOptions;\n}\n\nconst DEFAULT_AUX_WINDOW_DIMENSIONS = new Dimension(DEFAULT_AUX_WINDOW_SIZE.width, DEFAULT_AUX_WINDOW_SIZE.height);\n\nexport class AuxiliaryWindow extends BaseWindow implements IAuxiliaryWindow {\n\n\tprivate readonly _onWillLayout = this._register(new Emitter<Dimension>());\n\treadonly onWillLayout = this._onWillLayout.event;\n\n\tprivate readonly _onDidLayout = this._register(new Emitter<Dimension>());\n\treadonly onDidLayout = this._onDidLayout.event;\n\n\tprivate readonly _onBeforeUnload = this._register(new Emitter<BeforeAuxiliaryWindowUnloadEvent>());\n\treadonly onBeforeUnload = this._onBeforeUnload.event;\n\n\tprivate readonly _onUnload = this._register(new Emitter<void>());\n\treadonly onUnload = this._onUnload.event;\n\n\tprivate readonly _onWillDispose = this._register(new Emitter<void>());\n\treadonly onWillDispose = this._onWillDispose.event;\n\n\treadonly whenStylesHaveLoaded: Promise<void>;\n\n\tprivate compact = false;\n\n\tconstructor(\n\t\treadonly window: CodeWindow,\n\t\treadonly container: HTMLElement,\n\t\tstylesHaveLoaded: Barrier,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IHostService hostService: IHostService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService\n\t) {\n\t\tsuper(window, undefined, hostService, environmentService, contextMenuService, layoutService);\n\n\t\tthis.whenStylesHaveLoaded = stylesHaveLoaded.wait().then(() => undefined);\n\n\t\tthis.registerListeners();\n\t}\n\n\tupdateOptions(options: { compact: boolean }): void {\n\t\tthis.compact = options.compact;\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(addDisposableListener(this.window, EventType.BEFORE_UNLOAD, (e: BeforeUnloadEvent) => this.handleBeforeUnload(e)));\n\t\tthis._register(addDisposableListener(this.window, EventType.UNLOAD, () => this.handleUnload()));\n\n\t\tthis._register(addDisposableListener(this.window, 'unhandledrejection', e => {\n\t\t\tonUnexpectedError(e.reason);\n\t\t\te.preventDefault();\n\t\t}));\n\n\t\tthis._register(addDisposableListener(this.window, EventType.RESIZE, () => this.layout()));\n\n\t\tthis._register(addDisposableListener(this.container, EventType.SCROLL, () => this.container.scrollTop = 0)); \t\t\t\t\t\t// Prevent container from scrolling (#55456)\n\n\t\tif (isWeb) {\n\t\t\tthis._register(addDisposableListener(this.container, EventType.DROP, e => EventHelper.stop(e, true))); \t\t\t\t\t\t\t// Prevent default navigation on drop\n\t\t\tthis._register(addDisposableListener(this.container, EventType.WHEEL, e => e.preventDefault(), { passive: false })); \t\t\t// Prevent the back/forward gestures in macOS\n\t\t\tthis._register(addDisposableListener(this.container, EventType.CONTEXT_MENU, e => EventHelper.stop(e, true))); \t\t\t\t\t// Prevent native context menus in web\n\t\t} else {\n\t\t\tthis._register(addDisposableListener(this.window.document.body, EventType.DRAG_OVER, (e: DragEvent) => EventHelper.stop(e)));\t// Prevent drag feedback on <body>\n\t\t\tthis._register(addDisposableListener(this.window.document.body, EventType.DROP, (e: DragEvent) => EventHelper.stop(e)));\t\t// Prevent default navigation on drop\n\t\t}\n\t}\n\n\tprivate handleBeforeUnload(e: BeforeUnloadEvent): void {\n\n\t\t// Check for veto from a listening component\n\t\tlet veto: string | undefined;\n\t\tthis._onBeforeUnload.fire({\n\t\t\tveto(reason) {\n\t\t\t\tif (reason) {\n\t\t\t\t\tveto = reason;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (veto) {\n\t\t\tthis.handleVetoBeforeClose(e, veto);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Check for confirm before close setting\n\t\tconst confirmBeforeCloseSetting = this.configurationService.getValue<'always' | 'never' | 'keyboardOnly'>('window.confirmBeforeClose');\n\t\tconst confirmBeforeClose = confirmBeforeCloseSetting === 'always' || (confirmBeforeCloseSetting === 'keyboardOnly' && ModifierKeyEmitter.getInstance().isModifierPressed);\n\t\tif (confirmBeforeClose) {\n\t\t\tthis.confirmBeforeClose(e);\n\t\t}\n\t}\n\n\tprotected handleVetoBeforeClose(e: BeforeUnloadEvent, reason: string): void {\n\t\tthis.preventUnload(e);\n\t}\n\n\tprotected preventUnload(e: BeforeUnloadEvent): void {\n\t\te.preventDefault();\n\t\te.returnValue = localize('lifecycleVeto', \"Changes that you made may not be saved. Please check press 'Cancel' and try again.\");\n\t}\n\n\tprotected confirmBeforeClose(e: BeforeUnloadEvent): void {\n\t\tthis.preventUnload(e);\n\t}\n\n\tprivate handleUnload(): void {\n\n\t\t// Event\n\t\tthis._onUnload.fire();\n\t}\n\n\tlayout(): void {\n\n\t\t// Split layout up into two events so that downstream components\n\t\t// have a chance to participate in the beginning or end of the\n\t\t// layout phase.\n\t\t// This helps to build the auxiliary window in another component\n\t\t// in the `onWillLayout` phase and then let other compoments\n\t\t// react when the overall layout has finished in `onDidLayout`.\n\n\t\tconst dimension = getClientArea(this.window.document.body, DEFAULT_AUX_WINDOW_DIMENSIONS, this.container);\n\t\tthis._onWillLayout.fire(dimension);\n\t\tthis._onDidLayout.fire(dimension);\n\t}\n\n\tcreateState(): IAuxiliaryWindowOpenOptions {\n\t\treturn {\n\t\t\tbounds: {\n\t\t\t\tx: this.window.screenX,\n\t\t\t\ty: this.window.screenY,\n\t\t\t\twidth: this.window.outerWidth,\n\t\t\t\theight: this.window.outerHeight\n\t\t\t},\n\t\t\tzoomLevel: getZoomLevel(this.window),\n\t\t\tcompact: this.compact\n\t\t};\n\t}\n\n\toverride dispose(): void {\n\t\tif (this._store.isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._onWillDispose.fire();\n\n\t\tsuper.dispose();\n\t}\n}\n\nexport class BrowserAuxiliaryWindowService extends Disposable implements IAuxiliaryWindowService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate static WINDOW_IDS = getWindowId(mainWindow) + 1; // start from the main window ID + 1\n\n\tprivate readonly _onDidOpenAuxiliaryWindow = this._register(new Emitter<IAuxiliaryWindowOpenEvent>());\n\treadonly onDidOpenAuxiliaryWindow = this._onDidOpenAuxiliaryWindow.event;\n\n\tprivate readonly windows = new Map<number, IAuxiliaryWindow>();\n\n\tconstructor(\n\t\t@IWorkbenchLayoutService protected readonly layoutService: IWorkbenchLayoutService,\n\t\t@IDialogService protected readonly dialogService: IDialogService,\n\t\t@IConfigurationService protected readonly configurationService: IConfigurationService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@IHostService protected readonly hostService: IHostService,\n\t\t@IWorkbenchEnvironmentService protected readonly environmentService: IWorkbenchEnvironmentService,\n\t\t@IContextMenuService protected readonly contextMenuService: IContextMenuService,\n\t) {\n\t\tsuper();\n\t}\n\n\tasync open(options?: IAuxiliaryWindowOpenOptions): Promise<IAuxiliaryWindow> {\n\t\tmark('code/auxiliaryWindow/willOpen');\n\n\t\tconst targetWindow = await this.openWindow(options);\n\t\tif (!targetWindow) {\n\t\t\tthrow new Error(localize('unableToOpenWindowError', \"Unable to open a new window.\"));\n\t\t}\n\n\t\t// Add a `vscodeWindowId` property to identify auxiliary windows\n\t\tconst resolvedWindowId = await this.resolveWindowId(targetWindow);\n\t\tensureCodeWindow(targetWindow, resolvedWindowId);\n\n\t\tconst containerDisposables = new DisposableStore();\n\t\tconst { container, stylesLoaded } = this.createContainer(targetWindow, containerDisposables, options);\n\n\t\tconst auxiliaryWindow = this.createAuxiliaryWindow(targetWindow, container, stylesLoaded);\n\t\tauxiliaryWindow.updateOptions({ compact: options?.compact ?? false });\n\n\t\tconst registryDisposables = new DisposableStore();\n\t\tthis.windows.set(targetWindow.vscodeWindowId, auxiliaryWindow);\n\t\tregistryDisposables.add(toDisposable(() => this.windows.delete(targetWindow.vscodeWindowId)));\n\n\t\tconst eventDisposables = new DisposableStore();\n\n\t\tEvent.once(auxiliaryWindow.onWillDispose)(() => {\n\t\t\ttargetWindow.close();\n\n\t\t\tcontainerDisposables.dispose();\n\t\t\tregistryDisposables.dispose();\n\t\t\teventDisposables.dispose();\n\t\t});\n\n\t\tregistryDisposables.add(registerWindow(targetWindow));\n\t\tthis._onDidOpenAuxiliaryWindow.fire({ window: auxiliaryWindow, disposables: eventDisposables });\n\n\t\tmark('code/auxiliaryWindow/didOpen');\n\n\t\ttype AuxiliaryWindowClassification = {\n\t\t\towner: 'bpasero';\n\t\t\tcomment: 'An event that fires when an auxiliary window is opened';\n\t\t\tbounds: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Has window bounds provided.' };\n\t\t};\n\t\ttype AuxiliaryWindowOpenEvent = {\n\t\t\tbounds: boolean;\n\t\t};\n\t\tthis.telemetryService.publicLog2<AuxiliaryWindowOpenEvent, AuxiliaryWindowClassification>('auxiliaryWindowOpen', { bounds: !!options?.bounds });\n\n\t\treturn auxiliaryWindow;\n\t}\n\n\tprotected createAuxiliaryWindow(targetWindow: CodeWindow, container: HTMLElement, stylesLoaded: Barrier): AuxiliaryWindow {\n\t\treturn new AuxiliaryWindow(targetWindow, container, stylesLoaded, this.configurationService, this.hostService, this.environmentService, this.contextMenuService, this.layoutService);\n\t}\n\n\tprivate async openWindow(options?: IAuxiliaryWindowOpenOptions): Promise<Window | undefined> {\n\t\tconst activeWindow = getActiveWindow();\n\t\tconst activeWindowBounds = {\n\t\t\tx: activeWindow.screenX,\n\t\t\ty: activeWindow.screenY,\n\t\t\twidth: activeWindow.outerWidth,\n\t\t\theight: activeWindow.outerHeight\n\t\t};\n\n\t\tconst defaultSize = DEFAULT_AUX_WINDOW_SIZE;\n\n\t\tconst width = Math.max(options?.bounds?.width ?? defaultSize.width, WindowMinimumSize.WIDTH);\n\t\tconst height = Math.max(options?.bounds?.height ?? defaultSize.height, WindowMinimumSize.HEIGHT);\n\n\t\tlet newWindowBounds: IRectangle = {\n\t\t\tx: options?.bounds?.x ?? Math.max(activeWindowBounds.x + activeWindowBounds.width / 2 - width / 2, 0),\n\t\t\ty: options?.bounds?.y ?? Math.max(activeWindowBounds.y + activeWindowBounds.height / 2 - height / 2, 0),\n\t\t\twidth,\n\t\t\theight\n\t\t};\n\n\t\tif (!options?.bounds && newWindowBounds.x === activeWindowBounds.x && newWindowBounds.y === activeWindowBounds.y) {\n\t\t\t// Offset the new window a bit so that it does not overlap\n\t\t\t// with the active window, unless bounds are provided\n\t\t\tnewWindowBounds = {\n\t\t\t\t...newWindowBounds,\n\t\t\t\tx: newWindowBounds.x + 30,\n\t\t\t\ty: newWindowBounds.y + 30\n\t\t\t};\n\t\t}\n\n\t\tconst features = coalesce([\n\t\t\t'popup=yes',\n\t\t\t`left=${newWindowBounds.x}`,\n\t\t\t`top=${newWindowBounds.y}`,\n\t\t\t`width=${newWindowBounds.width}`,\n\t\t\t`height=${newWindowBounds.height}`,\n\n\t\t\t// non-standard properties\n\t\t\toptions?.nativeTitlebar ? 'window-native-titlebar=yes' : undefined,\n\t\t\toptions?.disableFullscreen ? 'window-disable-fullscreen=yes' : undefined,\n\t\t\toptions?.alwaysOnTop ? 'window-always-on-top=yes' : undefined,\n\t\t\toptions?.mode === AuxiliaryWindowMode.Maximized ? 'window-maximized=yes' : undefined,\n\t\t\toptions?.mode === AuxiliaryWindowMode.Fullscreen ? 'window-fullscreen=yes' : undefined\n\t\t]);\n\n\t\tconst auxiliaryWindow = mainWindow.open(isFirefox ? '' /* FF immediately fires an unload event if using about:blank */ : 'about:blank', undefined, features.join(','));\n\t\tif (!auxiliaryWindow && isWeb) {\n\t\t\treturn (await this.dialogService.prompt({\n\t\t\t\ttype: Severity.Warning,\n\t\t\t\tmessage: localize('unableToOpenWindow', \"The browser blocked opening a new window. Press 'Retry' to try again.\"),\n\t\t\t\tcustom: {\n\t\t\t\t\tmarkdownDetails: [{ markdown: new MarkdownString(localize('unableToOpenWindowDetail', \"Please allow pop-ups for this website in your [browser settings]({0}).\", 'https://aka.ms/allow-vscode-popup'), true) }]\n\t\t\t\t},\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: localize({ key: 'retry', comment: ['&& denotes a mnemonic'] }, \"&&Retry\"),\n\t\t\t\t\t\trun: () => this.openWindow(options)\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tcancelButton: true\n\t\t\t})).result;\n\t\t}\n\n\t\treturn auxiliaryWindow?.window;\n\t}\n\n\tprotected async resolveWindowId(auxiliaryWindow: Window): Promise<number> {\n\t\treturn BrowserAuxiliaryWindowService.WINDOW_IDS++;\n\t}\n\n\tprotected createContainer(auxiliaryWindow: CodeWindow, disposables: DisposableStore, options?: IAuxiliaryWindowOpenOptions): { stylesLoaded: Barrier; container: HTMLElement } {\n\t\tauxiliaryWindow.document.createElement = function () {\n\t\t\t// Disallow `createElement` because it would create\n\t\t\t// HTML Elements in the \"wrong\" context and break\n\t\t\t// code that does \"instanceof HTMLElement\" etc.\n\t\t\tthrow new Error('Not allowed to create elements in child window JavaScript context. Always use the main window so that \"xyz instanceof HTMLElement\" continues to work.');\n\t\t};\n\n\t\tthis.applyMeta(auxiliaryWindow);\n\t\tconst { stylesLoaded } = this.applyCSS(auxiliaryWindow, disposables);\n\t\tconst container = this.applyHTML(auxiliaryWindow, disposables);\n\n\t\treturn { stylesLoaded, container };\n\t}\n\n\tprivate applyMeta(auxiliaryWindow: CodeWindow): void {\n\t\tfor (const metaTag of ['meta[charset=\"utf-8\"]', 'meta[http-equiv=\"Content-Security-Policy\"]', 'meta[name=\"viewport\"]', 'meta[name=\"theme-color\"]']) {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tconst metaElement = mainWindow.document.querySelector(metaTag);\n\t\t\tif (metaElement) {\n\t\t\t\tconst clonedMetaElement = createMetaElement(auxiliaryWindow.document.head);\n\t\t\t\tcopyAttributes(metaElement, clonedMetaElement);\n\n\t\t\t\tif (metaTag === 'meta[http-equiv=\"Content-Security-Policy\"]') {\n\t\t\t\t\tconst content = clonedMetaElement.getAttribute('content');\n\t\t\t\t\tif (content) {\n\t\t\t\t\t\tclonedMetaElement.setAttribute('content', content.replace(/(script-src[^\\;]*)/, `script-src 'none'`));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tconst originalIconLinkTag = mainWindow.document.querySelector('link[rel=\"icon\"]');\n\t\tif (originalIconLinkTag) {\n\t\t\tconst icon = createLinkElement(auxiliaryWindow.document.head);\n\t\t\tcopyAttributes(originalIconLinkTag, icon);\n\t\t}\n\t}\n\n\tprivate applyCSS(auxiliaryWindow: CodeWindow, disposables: DisposableStore) {\n\t\tmark('code/auxiliaryWindow/willApplyCSS');\n\n\t\tconst mapOriginalToClone = new Map<Node /* original */, Node /* clone */>();\n\n\t\tconst stylesLoaded = new Barrier();\n\t\tstylesLoaded.wait().then(() => mark('code/auxiliaryWindow/didLoadCSSStyles'));\n\n\t\tconst pendingLinksDisposables = disposables.add(new DisposableStore());\n\n\t\tlet pendingLinksToSettle = 0;\n\t\tfunction onLinkSettled() {\n\t\t\tif (--pendingLinksToSettle === 0) {\n\t\t\t\tpendingLinksDisposables.dispose();\n\t\t\t\tstylesLoaded.open();\n\t\t\t}\n\t\t}\n\n\t\tfunction cloneNode(originalNode: Element): void {\n\t\t\tif (isGlobalStylesheet(originalNode)) {\n\t\t\t\treturn; // global stylesheets are handled by `cloneGlobalStylesheets` below\n\t\t\t}\n\n\t\t\tconst clonedNode = auxiliaryWindow.document.head.appendChild(originalNode.cloneNode(true));\n\t\t\tif (originalNode.tagName.toLowerCase() === 'link') {\n\t\t\t\tpendingLinksToSettle++;\n\n\t\t\t\tpendingLinksDisposables.add(addDisposableListener(clonedNode, 'load', onLinkSettled));\n\t\t\t\tpendingLinksDisposables.add(addDisposableListener(clonedNode, 'error', onLinkSettled));\n\t\t\t}\n\n\t\t\tmapOriginalToClone.set(originalNode, clonedNode);\n\t\t}\n\n\t\t// Clone all style elements and stylesheet links from the window to the child window\n\t\t// and keep track of <link> elements to settle to signal that styles have loaded\n\t\t// Increment pending links right from the beginning to ensure we only settle when\n\t\t// all style related nodes have been cloned.\n\t\tpendingLinksToSettle++;\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\tfor (const originalNode of mainWindow.document.head.querySelectorAll('link[rel=\"stylesheet\"], style')) {\n\t\t\t\tcloneNode(originalNode);\n\t\t\t}\n\t\t} finally {\n\t\t\tonLinkSettled();\n\t\t}\n\n\t\t// Global stylesheets in <head> are cloned in a special way because the mutation\n\t\t// observer is not firing for changes done via `style.sheet` API. Only text changes\n\t\t// can be observed.\n\t\tdisposables.add(cloneGlobalStylesheets(auxiliaryWindow));\n\n\t\t// Listen to new stylesheets as they are being added or removed in the main window\n\t\t// and apply to child window (including changes to existing stylesheets elements)\n\t\tdisposables.add(sharedMutationObserver.observe(mainWindow.document.head, disposables, { childList: true, subtree: true })(mutations => {\n\t\t\tfor (const mutation of mutations) {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type !== 'childList' ||\t\t\t\t\t\t// only interested in added/removed nodes\n\t\t\t\t\tmutation.target.nodeName.toLowerCase() === 'title' || \t// skip over title changes that happen frequently\n\t\t\t\t\tmutation.target.nodeName.toLowerCase() === 'script' || \t// block <script> changes that are unsupported anyway\n\t\t\t\t\tmutation.target.nodeName.toLowerCase() === 'meta'\t\t// do not observe <meta> elements for now\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (const node of mutation.addedNodes) {\n\n\t\t\t\t\t// <style>/<link> element was added\n\t\t\t\t\tif (isHTMLElement(node) && (node.tagName.toLowerCase() === 'style' || node.tagName.toLowerCase() === 'link')) {\n\t\t\t\t\t\tcloneNode(node);\n\t\t\t\t\t}\n\n\t\t\t\t\t// text-node was changed, try to apply to our clones\n\t\t\t\t\telse if (node.nodeType === Node.TEXT_NODE && node.parentNode) {\n\t\t\t\t\t\tconst clonedNode = mapOriginalToClone.get(node.parentNode);\n\t\t\t\t\t\tif (clonedNode) {\n\t\t\t\t\t\t\tclonedNode.textContent = node.textContent;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (const node of mutation.removedNodes) {\n\t\t\t\t\tconst clonedNode = mapOriginalToClone.get(node);\n\t\t\t\t\tif (clonedNode) {\n\t\t\t\t\t\tclonedNode.parentNode?.removeChild(clonedNode);\n\t\t\t\t\t\tmapOriginalToClone.delete(node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tmark('code/auxiliaryWindow/didApplyCSS');\n\n\t\treturn { stylesLoaded };\n\t}\n\n\tprivate applyHTML(auxiliaryWindow: CodeWindow, disposables: DisposableStore): HTMLElement {\n\t\tmark('code/auxiliaryWindow/willApplyHTML');\n\n\t\t// Create workbench container and apply classes\n\t\tconst container = $('div', { role: 'application' });\n\t\tposition(container, 0, 0, 0, 0, 'relative');\n\t\tcontainer.style.display = 'flex';\n\t\tcontainer.style.height = '100%';\n\t\tcontainer.style.flexDirection = 'column';\n\t\tauxiliaryWindow.document.body.append(container);\n\n\t\t// Track attributes\n\t\tdisposables.add(trackAttributes(mainWindow.document.documentElement, auxiliaryWindow.document.documentElement));\n\t\tdisposables.add(trackAttributes(mainWindow.document.body, auxiliaryWindow.document.body));\n\t\tdisposables.add(trackAttributes(this.layoutService.mainContainer, container, ['class'])); // only class attribute\n\n\t\tmark('code/auxiliaryWindow/didApplyHTML');\n\n\t\treturn container;\n\t}\n\n\tgetWindow(windowId: number): IAuxiliaryWindow | undefined {\n\t\treturn this.windows.get(windowId);\n\t}\n}\n\nregisterSingleton(IAuxiliaryWindowService, BrowserAuxiliaryWindowService, InstantiationType.Delayed);\n"]}