{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/remote/browser/browserRemoteResourceHandler.ts","vs/workbench/services/remote/browser/browserRemoteResourceHandler.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,QAAQ,EAAE,MAAM,mCAAmC,CAAC;AAC7D,OAAO,EAAE,UAAU,EAAE,MAAM,sCAAsC,CAAC;AAClE,OAAO,EAAE,kBAAkB,EAAE,MAAM,iCAAiC,CAAC;AACrE,OAAO,EAAE,GAAG,EAAiB,MAAM,gCAAgC,CAAC;AACpE,OAAO,EAAE,kBAAkB,EAAqC,YAAY,EAAE,MAAM,4CAA4C,CAAC;AAG1H,IAAM,2BAA2B,GAAjC,MAAM,2BAA4B,SAAQ,UAAU;IAC1D,YACe,WAAyB,EACtB,QAAiC;QAElD,KAAK,EAAE,CAAC;QAFS,aAAQ,GAAR,QAAQ,CAAyB;QAIlD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,mBAAmB,CAAC,KAAK,EAAC,OAAO,EAAC,EAAE;YAC3D,IAAI,GAAkB,CAAC;YACvB,IAAI,CAAC;gBACJ,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,kBAAkB,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;YACzD,CAAC;YAAC,MAAM,CAAC;gBACR,OAAO,OAAO,CAAC,WAAW,CAAC,GAAG,EAAE,IAAI,UAAU,EAAE,EAAE,EAAE,CAAC,CAAC;YACvD,CAAC;YAED,IAAI,OAAqB,CAAC;YAC1B,IAAI,CAAC;gBACJ,OAAO,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;YAC3D,CAAC;YAAC,OAAO,CAAC,EAAE,CAAC;gBACZ,MAAM,GAAG,GAAG,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC;gBAClD,IAAI,CAAC,YAAY,kBAAkB,IAAI,CAAC,CAAC,mBAAmB,+CAAuC,EAAE,CAAC;oBACrG,OAAO,OAAO,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;gBAC1C,CAAC;qBAAM,CAAC;oBACP,OAAO,OAAO,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;gBAC1C,CAAC;YACF,CAAC;YAED,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,IAAI,kBAAkB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACtD,OAAO,CAAC,WAAW,CAAC,GAAG,EAAE,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,cAAc,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QACtF,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,sBAAsB;QAC5B,MAAM,OAAO,GAAG,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAClD,OAAO,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC;YAC1B,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,IAAI;YACxB,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;SAC1B,CAAC,CAAC;IACJ,CAAC;CACD,CAAA;AAvCY,2BAA2B;IAErC,WAAA,YAAY,CAAA;GAFF,2BAA2B,CAuCvC","file":"browserRemoteResourceHandler.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { VSBuffer } from '../../../../base/common/buffer.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { getMediaOrTextMime } from '../../../../base/common/mime.js';\nimport { URI, UriComponents } from '../../../../base/common/uri.js';\nimport { FileOperationError, FileOperationResult, IFileContent, IFileService } from '../../../../platform/files/common/files.js';\nimport { IRemoteResourceProvider, IResourceUriProvider } from '../../../browser/web.api.js';\n\nexport class BrowserRemoteResourceLoader extends Disposable {\n\tconstructor(\n\t\t@IFileService fileService: IFileService,\n\t\tprivate readonly provider: IRemoteResourceProvider,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(provider.onDidReceiveRequest(async request => {\n\t\t\tlet uri: UriComponents;\n\t\t\ttry {\n\t\t\t\turi = JSON.parse(decodeURIComponent(request.uri.query));\n\t\t\t} catch {\n\t\t\t\treturn request.respondWith(404, new Uint8Array(), {});\n\t\t\t}\n\n\t\t\tlet content: IFileContent;\n\t\t\ttry {\n\t\t\t\tcontent = await fileService.readFile(URI.from(uri, true));\n\t\t\t} catch (e) {\n\t\t\t\tconst str = VSBuffer.fromString(e.message).buffer;\n\t\t\t\tif (e instanceof FileOperationError && e.fileOperationResult === FileOperationResult.FILE_NOT_FOUND) {\n\t\t\t\t\treturn request.respondWith(404, str, {});\n\t\t\t\t} else {\n\t\t\t\t\treturn request.respondWith(500, str, {});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst mime = uri.path && getMediaOrTextMime(uri.path);\n\t\t\trequest.respondWith(200, content.value.buffer, mime ? { 'content-type': mime } : {});\n\t\t}));\n\t}\n\n\tpublic getResourceUriProvider(): IResourceUriProvider {\n\t\tconst baseUri = URI.parse(document.location.href);\n\t\treturn uri => baseUri.with({\n\t\t\tpath: this.provider.path,\n\t\t\tquery: JSON.stringify(uri),\n\t\t});\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { VSBuffer } from '../../../../base/common/buffer.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { getMediaOrTextMime } from '../../../../base/common/mime.js';\nimport { URI, UriComponents } from '../../../../base/common/uri.js';\nimport { FileOperationError, FileOperationResult, IFileContent, IFileService } from '../../../../platform/files/common/files.js';\nimport { IRemoteResourceProvider, IResourceUriProvider } from '../../../browser/web.api.js';\n\nexport class BrowserRemoteResourceLoader extends Disposable {\n\tconstructor(\n\t\t@IFileService fileService: IFileService,\n\t\tprivate readonly provider: IRemoteResourceProvider,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(provider.onDidReceiveRequest(async request => {\n\t\t\tlet uri: UriComponents;\n\t\t\ttry {\n\t\t\t\turi = JSON.parse(decodeURIComponent(request.uri.query));\n\t\t\t} catch {\n\t\t\t\treturn request.respondWith(404, new Uint8Array(), {});\n\t\t\t}\n\n\t\t\tlet content: IFileContent;\n\t\t\ttry {\n\t\t\t\tcontent = await fileService.readFile(URI.from(uri, true));\n\t\t\t} catch (e) {\n\t\t\t\tconst str = VSBuffer.fromString(e.message).buffer;\n\t\t\t\tif (e instanceof FileOperationError && e.fileOperationResult === FileOperationResult.FILE_NOT_FOUND) {\n\t\t\t\t\treturn request.respondWith(404, str, {});\n\t\t\t\t} else {\n\t\t\t\t\treturn request.respondWith(500, str, {});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst mime = uri.path && getMediaOrTextMime(uri.path);\n\t\t\trequest.respondWith(200, content.value.buffer, mime ? { 'content-type': mime } : {});\n\t\t}));\n\t}\n\n\tpublic getResourceUriProvider(): IResourceUriProvider {\n\t\tconst baseUri = URI.parse(document.location.href);\n\t\treturn uri => baseUri.with({\n\t\t\tpath: this.provider.path,\n\t\t\tquery: JSON.stringify(uri),\n\t\t});\n\t}\n}\n"]}