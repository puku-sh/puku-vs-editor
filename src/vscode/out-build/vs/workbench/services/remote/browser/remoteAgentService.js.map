{"version":3,"sources":["vs/workbench/services/remote/browser/remoteAgentService.ts"],"names":[],"mappings":"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","file":"remoteAgentService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport { IWorkbenchEnvironmentService } from '../../environment/common/environmentService.js';\nimport { IRemoteAgentService } from '../common/remoteAgentService.js';\nimport { IRemoteAuthorityResolverService, RemoteAuthorityResolverError } from '../../../../platform/remote/common/remoteAuthorityResolver.js';\nimport { AbstractRemoteAgentService } from '../common/abstractRemoteAgentService.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { ISignService } from '../../../../platform/sign/common/sign.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { Severity } from '../../../../platform/notification/common/notification.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IWorkbenchContribution, WorkbenchPhase, registerWorkbenchContribution2 } from '../../../common/contributions.js';\nimport { IHostService } from '../../host/browser/host.js';\nimport { IUserDataProfileService } from '../../userDataProfile/common/userDataProfile.js';\nimport { IRemoteSocketFactoryService } from '../../../../platform/remote/common/remoteSocketFactoryService.js';\n\nexport class RemoteAgentService extends AbstractRemoteAgentService implements IRemoteAgentService {\n\n\tconstructor(\n\t\t@IRemoteSocketFactoryService remoteSocketFactoryService: IRemoteSocketFactoryService,\n\t\t@IUserDataProfileService userDataProfileService: IUserDataProfileService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IProductService productService: IProductService,\n\t\t@IRemoteAuthorityResolverService remoteAuthorityResolverService: IRemoteAuthorityResolverService,\n\t\t@ISignService signService: ISignService,\n\t\t@ILogService logService: ILogService\n\t) {\n\t\tsuper(remoteSocketFactoryService, userDataProfileService, environmentService, productService, remoteAuthorityResolverService, signService, logService);\n\t}\n}\n\nclass RemoteConnectionFailureNotificationContribution implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.browserRemoteConnectionFailureNotification';\n\n\tconstructor(\n\t\t@IRemoteAgentService remoteAgentService: IRemoteAgentService,\n\t\t@IDialogService private readonly _dialogService: IDialogService,\n\t\t@IHostService private readonly _hostService: IHostService,\n\t) {\n\t\t// Let's cover the case where connecting to fetch the remote extension info fails\n\t\tremoteAgentService.getRawEnvironment()\n\t\t\t.then(undefined, (err) => {\n\t\t\t\tif (!RemoteAuthorityResolverError.isHandled(err)) {\n\t\t\t\t\tthis._presentConnectionError(err);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tprivate async _presentConnectionError(err: Error): Promise<void> {\n\t\tawait this._dialogService.prompt({\n\t\t\ttype: Severity.Error,\n\t\t\tmessage: nls.localize('connectionError', \"An unexpected error occurred that requires a reload of this page.\"),\n\t\t\tdetail: nls.localize('connectionErrorDetail', \"The workbench failed to connect to the server (Error: {0})\", err ? err.message : ''),\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\tlabel: nls.localize({ key: 'reload', comment: ['&& denotes a mnemonic'] }, \"&&Reload\"),\n\t\t\t\t\trun: () => this._hostService.reload()\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n}\n\nregisterWorkbenchContribution2(RemoteConnectionFailureNotificationContribution.ID, RemoteConnectionFailureNotificationContribution, WorkbenchPhase.BlockRestore);\n"]}