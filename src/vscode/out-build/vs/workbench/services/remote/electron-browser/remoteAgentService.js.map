{"version":3,"sources":["vs/workbench/services/remote/electron-browser/remoteAgentService.ts"],"names":[],"mappings":"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","file":"remoteAgentService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport { IRemoteAgentService } from '../common/remoteAgentService.js';\nimport { IRemoteAuthorityResolverService, RemoteConnectionType, RemoteAuthorityResolverError } from '../../../../platform/remote/common/remoteAuthorityResolver.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { AbstractRemoteAgentService } from '../common/abstractRemoteAgentService.js';\nimport { ISignService } from '../../../../platform/sign/common/sign.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IWorkbenchEnvironmentService } from '../../environment/common/environmentService.js';\nimport { INotificationService, IPromptChoice, Severity } from '../../../../platform/notification/common/notification.js';\nimport { IWorkbenchContribution, WorkbenchPhase, registerWorkbenchContribution2 } from '../../../common/contributions.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { INativeHostService } from '../../../../platform/native/common/native.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IUserDataProfileService } from '../../userDataProfile/common/userDataProfile.js';\nimport { IRemoteSocketFactoryService } from '../../../../platform/remote/common/remoteSocketFactoryService.js';\n\nexport class RemoteAgentService extends AbstractRemoteAgentService implements IRemoteAgentService {\n\tconstructor(\n\t\t@IRemoteSocketFactoryService remoteSocketFactoryService: IRemoteSocketFactoryService,\n\t\t@IUserDataProfileService userDataProfileService: IUserDataProfileService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IProductService productService: IProductService,\n\t\t@IRemoteAuthorityResolverService remoteAuthorityResolverService: IRemoteAuthorityResolverService,\n\t\t@ISignService signService: ISignService,\n\t\t@ILogService logService: ILogService,\n\t) {\n\t\tsuper(remoteSocketFactoryService, userDataProfileService, environmentService, productService, remoteAuthorityResolverService, signService, logService);\n\t}\n}\n\nclass RemoteConnectionFailureNotificationContribution implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.nativeRemoteConnectionFailureNotification';\n\n\tconstructor(\n\t\t@IRemoteAgentService private readonly _remoteAgentService: IRemoteAgentService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@INativeHostService nativeHostService: INativeHostService,\n\t\t@IRemoteAuthorityResolverService private readonly _remoteAuthorityResolverService: IRemoteAuthorityResolverService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t) {\n\t\t// Let's cover the case where connecting to fetch the remote extension info fails\n\t\tthis._remoteAgentService.getRawEnvironment()\n\t\t\t.then(undefined, err => {\n\n\t\t\t\tif (!RemoteAuthorityResolverError.isHandled(err)) {\n\t\t\t\t\tconst choices: IPromptChoice[] = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: nls.localize('devTools', \"Open Developer Tools\"),\n\t\t\t\t\t\t\trun: () => nativeHostService.openDevTools()\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t\tconst troubleshootingURL = this._getTroubleshootingURL();\n\t\t\t\t\tif (troubleshootingURL) {\n\t\t\t\t\t\tchoices.push({\n\t\t\t\t\t\t\tlabel: nls.localize('directUrl', \"Open in browser\"),\n\t\t\t\t\t\t\trun: () => openerService.open(troubleshootingURL, { openExternal: true })\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tnotificationService.prompt(\n\t\t\t\t\t\tSeverity.Error,\n\t\t\t\t\t\tnls.localize('connectionError', \"Failed to connect to the remote extension host server (Error: {0})\", err ? err.message : ''),\n\t\t\t\t\t\tchoices\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tprivate _getTroubleshootingURL(): URI | null {\n\t\tconst remoteAgentConnection = this._remoteAgentService.getConnection();\n\t\tif (!remoteAgentConnection) {\n\t\t\treturn null;\n\t\t}\n\t\tconst connectionData = this._remoteAuthorityResolverService.getConnectionData(remoteAgentConnection.remoteAuthority);\n\t\tif (!connectionData || connectionData.connectTo.type !== RemoteConnectionType.WebSocket) {\n\t\t\treturn null;\n\t\t}\n\t\treturn URI.from({\n\t\t\tscheme: 'http',\n\t\t\tauthority: `${connectionData.connectTo.host}:${connectionData.connectTo.port}`,\n\t\t\tpath: `/version`\n\t\t});\n\t}\n\n}\n\nregisterWorkbenchContribution2(RemoteConnectionFailureNotificationContribution.ID, RemoteConnectionFailureNotificationContribution, WorkbenchPhase.BlockRestore);\n"]}