{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/remote/common/remoteExtensionsScanner.ts","vs/workbench/services/remote/common/remoteExtensionsScanner.ts"],"names":[],"mappings":"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","file":"remoteExtensionsScanner.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IRemoteAgentService } from './remoteAgentService.js';\nimport { IRemoteExtensionsScannerService, RemoteExtensionsScannerChannelName } from '../../../../platform/remote/common/remoteExtensionsScanner.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { IChannel } from '../../../../base/parts/ipc/common/ipc.js';\nimport { IExtensionDescription } from '../../../../platform/extensions/common/extensions.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IUserDataProfileService } from '../../userDataProfile/common/userDataProfile.js';\nimport { IRemoteUserDataProfilesService } from '../../userDataProfile/common/remoteUserDataProfiles.js';\nimport { IWorkbenchEnvironmentService } from '../../environment/common/environmentService.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IActiveLanguagePackService } from '../../localization/common/locale.js';\nimport { IWorkbenchExtensionManagementService } from '../../extensionManagement/common/extensionManagement.js';\nimport { Mutable } from '../../../../base/common/types.js';\nimport { InstallExtensionSummary } from '../../../../platform/extensionManagement/common/extensionManagement.js';\n\nclass RemoteExtensionsScannerService implements IRemoteExtensionsScannerService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tconstructor(\n\t\t@IRemoteAgentService private readonly remoteAgentService: IRemoteAgentService,\n\t\t@IWorkbenchEnvironmentService private readonly environmentService: IWorkbenchEnvironmentService,\n\t\t@IUserDataProfileService private readonly userDataProfileService: IUserDataProfileService,\n\t\t@IRemoteUserDataProfilesService private readonly remoteUserDataProfilesService: IRemoteUserDataProfilesService,\n\t\t@IActiveLanguagePackService private readonly activeLanguagePackService: IActiveLanguagePackService,\n\t\t@IWorkbenchExtensionManagementService private readonly extensionManagementService: IWorkbenchExtensionManagementService,\n\t\t@ILogService private readonly logService: ILogService,\n\t) { }\n\n\twhenExtensionsReady(): Promise<InstallExtensionSummary> {\n\t\treturn this.withChannel(\n\t\t\tchannel => channel.call<InstallExtensionSummary>('whenExtensionsReady'),\n\t\t\t{ failed: [] }\n\t\t);\n\t}\n\n\tasync scanExtensions(): Promise<IExtensionDescription[]> {\n\t\ttry {\n\t\t\tconst languagePack = await this.activeLanguagePackService.getExtensionIdProvidingCurrentLocale();\n\t\t\treturn await this.withChannel(\n\t\t\t\tasync (channel) => {\n\t\t\t\t\tconst profileLocation = this.userDataProfileService.currentProfile.isDefault ? undefined : (await this.remoteUserDataProfilesService.getRemoteProfile(this.userDataProfileService.currentProfile)).extensionsResource;\n\t\t\t\t\tconst scannedExtensions = await channel.call<Mutable<IExtensionDescription>[]>('scanExtensions', [\n\t\t\t\t\t\tplatform.language,\n\t\t\t\t\t\tprofileLocation,\n\t\t\t\t\t\tthis.extensionManagementService.getInstalledWorkspaceExtensionLocations(),\n\t\t\t\t\t\tthis.environmentService.extensionDevelopmentLocationURI,\n\t\t\t\t\t\tlanguagePack\n\t\t\t\t\t]);\n\t\t\t\t\tscannedExtensions.forEach((extension) => {\n\t\t\t\t\t\textension.extensionLocation = URI.revive(extension.extensionLocation);\n\t\t\t\t\t});\n\t\t\t\t\treturn scannedExtensions;\n\t\t\t\t},\n\t\t\t\t[]\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tthis.logService.error(error);\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tprivate withChannel<R>(callback: (channel: IChannel) => Promise<R>, fallback: R): Promise<R> {\n\t\tconst connection = this.remoteAgentService.getConnection();\n\t\tif (!connection) {\n\t\t\treturn Promise.resolve(fallback);\n\t\t}\n\t\treturn connection.withChannel(RemoteExtensionsScannerChannelName, (channel) => callback(channel));\n\t}\n}\n\nregisterSingleton(IRemoteExtensionsScannerService, RemoteExtensionsScannerService, InstantiationType.Delayed);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IRemoteAgentService } from './remoteAgentService.js';\nimport { IRemoteExtensionsScannerService, RemoteExtensionsScannerChannelName } from '../../../../platform/remote/common/remoteExtensionsScanner.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { IChannel } from '../../../../base/parts/ipc/common/ipc.js';\nimport { IExtensionDescription } from '../../../../platform/extensions/common/extensions.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IUserDataProfileService } from '../../userDataProfile/common/userDataProfile.js';\nimport { IRemoteUserDataProfilesService } from '../../userDataProfile/common/remoteUserDataProfiles.js';\nimport { IWorkbenchEnvironmentService } from '../../environment/common/environmentService.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IActiveLanguagePackService } from '../../localization/common/locale.js';\nimport { IWorkbenchExtensionManagementService } from '../../extensionManagement/common/extensionManagement.js';\nimport { Mutable } from '../../../../base/common/types.js';\nimport { InstallExtensionSummary } from '../../../../platform/extensionManagement/common/extensionManagement.js';\n\nclass RemoteExtensionsScannerService implements IRemoteExtensionsScannerService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tconstructor(\n\t\t@IRemoteAgentService private readonly remoteAgentService: IRemoteAgentService,\n\t\t@IWorkbenchEnvironmentService private readonly environmentService: IWorkbenchEnvironmentService,\n\t\t@IUserDataProfileService private readonly userDataProfileService: IUserDataProfileService,\n\t\t@IRemoteUserDataProfilesService private readonly remoteUserDataProfilesService: IRemoteUserDataProfilesService,\n\t\t@IActiveLanguagePackService private readonly activeLanguagePackService: IActiveLanguagePackService,\n\t\t@IWorkbenchExtensionManagementService private readonly extensionManagementService: IWorkbenchExtensionManagementService,\n\t\t@ILogService private readonly logService: ILogService,\n\t) { }\n\n\twhenExtensionsReady(): Promise<InstallExtensionSummary> {\n\t\treturn this.withChannel(\n\t\t\tchannel => channel.call<InstallExtensionSummary>('whenExtensionsReady'),\n\t\t\t{ failed: [] }\n\t\t);\n\t}\n\n\tasync scanExtensions(): Promise<IExtensionDescription[]> {\n\t\ttry {\n\t\t\tconst languagePack = await this.activeLanguagePackService.getExtensionIdProvidingCurrentLocale();\n\t\t\treturn await this.withChannel(\n\t\t\t\tasync (channel) => {\n\t\t\t\t\tconst profileLocation = this.userDataProfileService.currentProfile.isDefault ? undefined : (await this.remoteUserDataProfilesService.getRemoteProfile(this.userDataProfileService.currentProfile)).extensionsResource;\n\t\t\t\t\tconst scannedExtensions = await channel.call<Mutable<IExtensionDescription>[]>('scanExtensions', [\n\t\t\t\t\t\tplatform.language,\n\t\t\t\t\t\tprofileLocation,\n\t\t\t\t\t\tthis.extensionManagementService.getInstalledWorkspaceExtensionLocations(),\n\t\t\t\t\t\tthis.environmentService.extensionDevelopmentLocationURI,\n\t\t\t\t\t\tlanguagePack\n\t\t\t\t\t]);\n\t\t\t\t\tscannedExtensions.forEach((extension) => {\n\t\t\t\t\t\textension.extensionLocation = URI.revive(extension.extensionLocation);\n\t\t\t\t\t});\n\t\t\t\t\treturn scannedExtensions;\n\t\t\t\t},\n\t\t\t\t[]\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tthis.logService.error(error);\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tprivate withChannel<R>(callback: (channel: IChannel) => Promise<R>, fallback: R): Promise<R> {\n\t\tconst connection = this.remoteAgentService.getConnection();\n\t\tif (!connection) {\n\t\t\treturn Promise.resolve(fallback);\n\t\t}\n\t\treturn connection.withChannel(RemoteExtensionsScannerChannelName, (channel) => callback(channel));\n\t}\n}\n\nregisterSingleton(IRemoteExtensionsScannerService, RemoteExtensionsScannerService, InstantiationType.Delayed);\n"]}