{"version":3,"sources":["vs/workbench/services/remote/common/tunnelModel.ts"],"names":[],"mappings":"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","file":"tunnelModel.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport { debounce } from '../../../../base/common/decorators.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { hash } from '../../../../base/common/hash.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ConfigurationTarget, IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IAddressProvider } from '../../../../platform/remote/common/remoteAgentConnection.js';\nimport { IRemoteAuthorityResolverService, TunnelDescription } from '../../../../platform/remote/common/remoteAuthorityResolver.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { RemoteTunnel, ITunnelService, TunnelProtocol, TunnelPrivacyId, LOCALHOST_ADDRESSES, ProvidedPortAttributes, PortAttributesProvider, isLocalhost, isAllInterfaces, ProvidedOnAutoForward, ALL_INTERFACES_ADDRESSES } from '../../../../platform/tunnel/common/tunnel.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { IWorkbenchEnvironmentService } from '../../environment/common/environmentService.js';\nimport { IExtensionService } from '../../extensions/common/extensions.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { isNumber, isObject, isString } from '../../../../base/common/types.js';\nimport { deepClone } from '../../../../base/common/objects.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\n\nconst MISMATCH_LOCAL_PORT_COOLDOWN = 10 * 1000; // 10 seconds\nconst TUNNELS_TO_RESTORE = 'remote.tunnels.toRestore';\nconst TUNNELS_TO_RESTORE_EXPIRATION = 'remote.tunnels.toRestoreExpiration';\nconst RESTORE_EXPIRATION_TIME = 1000 * 60 * 60 * 24 * 14; // 2 weeks\nexport const ACTIVATION_EVENT = 'onTunnel';\nexport const forwardedPortsFeaturesEnabled = new RawContextKey<boolean>('forwardedPortsViewEnabled', false, nls.localize('tunnel.forwardedPortsViewEnabled', \"Whether the Ports view is enabled.\"));\nexport const forwardedPortsViewEnabled = new RawContextKey<boolean>('forwardedPortsViewOnlyEnabled', false, nls.localize('tunnel.forwardedPortsViewEnabled', \"Whether the Ports view is enabled.\"));\n\nexport interface RestorableTunnel {\n\tremoteHost: string;\n\tremotePort: number;\n\tlocalAddress: string;\n\tlocalUri: URI;\n\tprotocol: TunnelProtocol;\n\tlocalPort?: number;\n\tname?: string;\n\tsource: {\n\t\tsource: TunnelSource;\n\t\tdescription: string;\n\t};\n}\n\nexport interface Tunnel {\n\tremoteHost: string;\n\tremotePort: number;\n\tlocalAddress: string;\n\tlocalUri: URI;\n\tprotocol: TunnelProtocol;\n\tlocalPort?: number;\n\tname?: string;\n\tcloseable?: boolean;\n\tprivacy: TunnelPrivacyId | string;\n\trunningProcess: string | undefined;\n\thasRunningProcess?: boolean;\n\tpid: number | undefined;\n\tsource: {\n\t\tsource: TunnelSource;\n\t\tdescription: string;\n\t};\n}\n\nexport function parseAddress(address: string): { host: string; port: number } | undefined {\n\tconst matches = address.match(/^([a-zA-Z0-9_-]+(?:\\.[a-zA-Z0-9_-]+)*:)?([0-9]+)$/);\n\tif (!matches) {\n\t\treturn undefined;\n\t}\n\treturn { host: matches[1]?.substring(0, matches[1].length - 1) || 'localhost', port: Number(matches[2]) };\n}\n\nexport enum TunnelCloseReason {\n\tOther = 'Other',\n\tUser = 'User',\n\tAutoForwardEnd = 'AutoForwardEnd',\n}\n\nexport enum TunnelSource {\n\tUser,\n\tAuto,\n\tExtension\n}\n\nexport const UserTunnelSource = {\n\tsource: TunnelSource.User,\n\tdescription: nls.localize('tunnel.source.user', \"User Forwarded\")\n};\nexport const AutoTunnelSource = {\n\tsource: TunnelSource.Auto,\n\tdescription: nls.localize('tunnel.source.auto', \"Auto Forwarded\")\n};\n\nexport function mapHasAddress<T>(map: Map<string, T>, host: string, port: number): T | undefined {\n\tconst initialAddress = map.get(makeAddress(host, port));\n\tif (initialAddress) {\n\t\treturn initialAddress;\n\t}\n\n\tif (isLocalhost(host)) {\n\t\t// Do localhost checks\n\t\tfor (const testHost of LOCALHOST_ADDRESSES) {\n\t\t\tconst testAddress = makeAddress(testHost, port);\n\t\t\tif (map.has(testAddress)) {\n\t\t\t\treturn map.get(testAddress);\n\t\t\t}\n\t\t}\n\t} else if (isAllInterfaces(host)) {\n\t\t// Do all interfaces checks\n\t\tfor (const testHost of ALL_INTERFACES_ADDRESSES) {\n\t\t\tconst testAddress = makeAddress(testHost, port);\n\t\t\tif (map.has(testAddress)) {\n\t\t\t\treturn map.get(testAddress);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn undefined;\n}\n\nexport function mapHasAddressLocalhostOrAllInterfaces<T>(map: Map<string, T>, host: string, port: number): T | undefined {\n\tconst originalAddress = mapHasAddress(map, host, port);\n\tif (originalAddress) {\n\t\treturn originalAddress;\n\t}\n\tconst otherHost = isAllInterfaces(host) ? 'localhost' : (isLocalhost(host) ? '0.0.0.0' : undefined);\n\tif (otherHost) {\n\t\treturn mapHasAddress(map, otherHost, port);\n\t}\n\treturn undefined;\n}\n\n\nexport function makeAddress(host: string, port: number): string {\n\treturn host + ':' + port;\n}\n\nexport interface TunnelProperties {\n\tremote: { host: string; port: number };\n\tlocal?: number;\n\tname?: string;\n\tsource?: {\n\t\tsource: TunnelSource;\n\t\tdescription: string;\n\t};\n\televateIfNeeded?: boolean;\n\tprivacy?: string;\n}\n\nexport interface CandidatePort {\n\thost: string;\n\tport: number;\n\tdetail?: string;\n\tpid?: number;\n}\n\ninterface PortAttributes extends Attributes {\n\tkey: number | PortRange | RegExp | HostAndPort;\n}\n\nexport enum OnPortForward {\n\tNotify = 'notify',\n\tOpenBrowser = 'openBrowser',\n\tOpenBrowserOnce = 'openBrowserOnce',\n\tOpenPreview = 'openPreview',\n\tSilent = 'silent',\n\tIgnore = 'ignore'\n}\n\nexport interface Attributes {\n\tlabel: string | undefined;\n\tonAutoForward: OnPortForward | undefined;\n\televateIfNeeded: boolean | undefined;\n\trequireLocalPort: boolean | undefined;\n\tprotocol: TunnelProtocol | undefined;\n}\n\ninterface PortRange { start: number; end: number }\n\ninterface HostAndPort { host: string; port: number }\n\nexport function isCandidatePort(candidate: any): candidate is CandidatePort {\n\treturn candidate && 'host' in candidate && typeof candidate.host === 'string'\n\t\t&& 'port' in candidate && typeof candidate.port === 'number'\n\t\t&& (!('detail' in candidate) || typeof candidate.detail === 'string')\n\t\t&& (!('pid' in candidate) || typeof candidate.pid === 'string');\n}\n\nexport class PortsAttributes extends Disposable {\n\tprivate static SETTING = 'remote.portsAttributes';\n\tprivate static DEFAULTS = 'remote.otherPortsAttributes';\n\tprivate static RANGE = /^(\\d+)\\-(\\d+)$/;\n\tprivate static HOST_AND_PORT = /^([a-z0-9\\-]+):(\\d{1,5})$/;\n\tprivate portsAttributes: PortAttributes[] = [];\n\tprivate defaultPortAttributes: Attributes | undefined;\n\tprivate _onDidChangeAttributes = new Emitter<void>();\n\tpublic readonly onDidChangeAttributes = this._onDidChangeAttributes.event;\n\n\tconstructor(private readonly configurationService: IConfigurationService) {\n\t\tsuper();\n\t\tthis._register(configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(PortsAttributes.SETTING) || e.affectsConfiguration(PortsAttributes.DEFAULTS)) {\n\t\t\t\tthis.updateAttributes();\n\t\t\t}\n\t\t}));\n\t\tthis.updateAttributes();\n\t}\n\n\tprivate updateAttributes() {\n\t\tthis.portsAttributes = this.readSetting();\n\t\tthis._onDidChangeAttributes.fire();\n\t}\n\n\tgetAttributes(port: number, host: string, commandLine?: string): Attributes | undefined {\n\t\tlet index = this.findNextIndex(port, host, commandLine, this.portsAttributes, 0);\n\t\tconst attributes: Attributes = {\n\t\t\tlabel: undefined,\n\t\t\tonAutoForward: undefined,\n\t\t\televateIfNeeded: undefined,\n\t\t\trequireLocalPort: undefined,\n\t\t\tprotocol: undefined\n\t\t};\n\t\twhile (index >= 0) {\n\t\t\tconst found = this.portsAttributes[index];\n\t\t\tif (found.key === port) {\n\t\t\t\tattributes.onAutoForward = found.onAutoForward ?? attributes.onAutoForward;\n\t\t\t\tattributes.elevateIfNeeded = (found.elevateIfNeeded !== undefined) ? found.elevateIfNeeded : attributes.elevateIfNeeded;\n\t\t\t\tattributes.label = found.label ?? attributes.label;\n\t\t\t\tattributes.requireLocalPort = found.requireLocalPort;\n\t\t\t\tattributes.protocol = found.protocol;\n\t\t\t} else {\n\t\t\t\t// It's a range or regex, which means that if the attribute is already set, we keep it\n\t\t\t\tattributes.onAutoForward = attributes.onAutoForward ?? found.onAutoForward;\n\t\t\t\tattributes.elevateIfNeeded = (attributes.elevateIfNeeded !== undefined) ? attributes.elevateIfNeeded : found.elevateIfNeeded;\n\t\t\t\tattributes.label = attributes.label ?? found.label;\n\t\t\t\tattributes.requireLocalPort = (attributes.requireLocalPort !== undefined) ? attributes.requireLocalPort : undefined;\n\t\t\t\tattributes.protocol = attributes.protocol ?? found.protocol;\n\t\t\t}\n\t\t\tindex = this.findNextIndex(port, host, commandLine, this.portsAttributes, index + 1);\n\t\t}\n\t\tif (attributes.onAutoForward !== undefined || attributes.elevateIfNeeded !== undefined\n\t\t\t|| attributes.label !== undefined || attributes.requireLocalPort !== undefined\n\t\t\t|| attributes.protocol !== undefined) {\n\t\t\treturn attributes;\n\t\t}\n\n\t\t// If we find no matches, then use the other port attributes.\n\t\treturn this.getOtherAttributes();\n\t}\n\n\tprivate hasStartEnd(value: number | PortRange | RegExp | HostAndPort): value is PortRange {\n\t\treturn (value as Partial<PortRange>).start !== undefined && (value as Partial<PortRange>).end !== undefined;\n\t}\n\n\tprivate hasHostAndPort(value: number | PortRange | RegExp | HostAndPort): value is HostAndPort {\n\t\treturn ((value as Partial<HostAndPort>).host !== undefined) && ((value as Partial<HostAndPort>).port !== undefined)\n\t\t\t&& isString((value as Partial<HostAndPort>).host) && isNumber((value as Partial<HostAndPort>).port);\n\t}\n\n\tprivate findNextIndex(port: number, host: string, commandLine: string | undefined, attributes: PortAttributes[], fromIndex: number): number {\n\t\tif (fromIndex >= attributes.length) {\n\t\t\treturn -1;\n\t\t}\n\t\tconst shouldUseHost = !isLocalhost(host) && !isAllInterfaces(host);\n\t\tconst sliced = attributes.slice(fromIndex);\n\t\tconst foundIndex = sliced.findIndex((value) => {\n\t\t\tif (isNumber(value.key)) {\n\t\t\t\treturn shouldUseHost ? false : value.key === port;\n\t\t\t} else if (this.hasStartEnd(value.key)) {\n\t\t\t\treturn shouldUseHost ? false : (port >= value.key.start && port <= value.key.end);\n\t\t\t} else if (this.hasHostAndPort(value.key)) {\n\t\t\t\treturn (port === value.key.port) && (host === value.key.host);\n\t\t\t} else {\n\t\t\t\treturn commandLine ? value.key.test(commandLine) : false;\n\t\t\t}\n\n\t\t});\n\t\treturn foundIndex >= 0 ? foundIndex + fromIndex : -1;\n\t}\n\n\tprivate readSetting(): PortAttributes[] {\n\t\tconst settingValue = this.configurationService.getValue(PortsAttributes.SETTING);\n\t\tif (!settingValue || !isObject(settingValue)) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst attributes: PortAttributes[] = [];\n\t\tfor (const attributesKey in settingValue) {\n\t\t\tif (attributesKey === undefined) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst setting = (settingValue as Record<string, PortAttributes>)[attributesKey];\n\t\t\tlet key: number | PortRange | RegExp | HostAndPort | undefined = undefined;\n\t\t\tif (Number(attributesKey)) {\n\t\t\t\tkey = Number(attributesKey);\n\t\t\t} else if (isString(attributesKey)) {\n\t\t\t\tif (PortsAttributes.RANGE.test(attributesKey)) {\n\t\t\t\t\tconst match = attributesKey.match(PortsAttributes.RANGE);\n\t\t\t\t\tkey = { start: Number(match![1]), end: Number(match![2]) };\n\t\t\t\t} else if (PortsAttributes.HOST_AND_PORT.test(attributesKey)) {\n\t\t\t\t\tconst match = attributesKey.match(PortsAttributes.HOST_AND_PORT);\n\t\t\t\t\tkey = { host: match![1], port: Number(match![2]) };\n\t\t\t\t} else {\n\t\t\t\t\tlet regTest: RegExp | undefined = undefined;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tregTest = RegExp(attributesKey);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// The user entered an invalid regular expression.\n\t\t\t\t\t}\n\t\t\t\t\tif (regTest) {\n\t\t\t\t\t\tkey = regTest;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!key) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tattributes.push({\n\t\t\t\tkey: key,\n\t\t\t\televateIfNeeded: setting.elevateIfNeeded,\n\t\t\t\tonAutoForward: setting.onAutoForward,\n\t\t\t\tlabel: setting.label,\n\t\t\t\trequireLocalPort: setting.requireLocalPort,\n\t\t\t\tprotocol: setting.protocol\n\t\t\t});\n\t\t}\n\n\t\tconst defaults = this.configurationService.getValue(PortsAttributes.DEFAULTS) as Partial<Attributes> | undefined;\n\t\tif (defaults) {\n\t\t\tthis.defaultPortAttributes = {\n\t\t\t\televateIfNeeded: defaults.elevateIfNeeded,\n\t\t\t\tlabel: defaults.label,\n\t\t\t\tonAutoForward: defaults.onAutoForward,\n\t\t\t\trequireLocalPort: defaults.requireLocalPort,\n\t\t\t\tprotocol: defaults.protocol\n\t\t\t};\n\t\t}\n\n\t\treturn this.sortAttributes(attributes);\n\t}\n\n\tprivate sortAttributes(attributes: PortAttributes[]): PortAttributes[] {\n\t\tfunction getVal(item: PortAttributes, thisRef: PortsAttributes) {\n\t\t\tif (isNumber(item.key)) {\n\t\t\t\treturn item.key;\n\t\t\t} else if (thisRef.hasStartEnd(item.key)) {\n\t\t\t\treturn item.key.start;\n\t\t\t} else if (thisRef.hasHostAndPort(item.key)) {\n\t\t\t\treturn item.key.port;\n\t\t\t} else {\n\t\t\t\treturn Number.MAX_VALUE;\n\t\t\t}\n\t\t}\n\n\t\treturn attributes.sort((a, b) => {\n\t\t\treturn getVal(a, this) - getVal(b, this);\n\t\t});\n\t}\n\n\tprivate getOtherAttributes() {\n\t\treturn this.defaultPortAttributes;\n\t}\n\n\tstatic providedActionToAction(providedAction: ProvidedOnAutoForward | undefined) {\n\t\tswitch (providedAction) {\n\t\t\tcase ProvidedOnAutoForward.Notify: return OnPortForward.Notify;\n\t\t\tcase ProvidedOnAutoForward.OpenBrowser: return OnPortForward.OpenBrowser;\n\t\t\tcase ProvidedOnAutoForward.OpenBrowserOnce: return OnPortForward.OpenBrowserOnce;\n\t\t\tcase ProvidedOnAutoForward.OpenPreview: return OnPortForward.OpenPreview;\n\t\t\tcase ProvidedOnAutoForward.Silent: return OnPortForward.Silent;\n\t\t\tcase ProvidedOnAutoForward.Ignore: return OnPortForward.Ignore;\n\t\t\tdefault: return undefined;\n\t\t}\n\t}\n\n\tpublic async addAttributes(port: number, attributes: Partial<Attributes>, target: ConfigurationTarget) {\n\t\tconst settingValue = this.configurationService.inspect(PortsAttributes.SETTING);\n\t\tconst remoteValue: any = settingValue.userRemoteValue;\n\t\tlet newRemoteValue: any;\n\t\tif (!remoteValue || !isObject(remoteValue)) {\n\t\t\tnewRemoteValue = {};\n\t\t} else {\n\t\t\tnewRemoteValue = deepClone(remoteValue);\n\t\t}\n\n\t\tif (!newRemoteValue[`${port}`]) {\n\t\t\tnewRemoteValue[`${port}`] = {};\n\t\t}\n\t\tfor (const attribute in attributes) {\n\t\t\tnewRemoteValue[`${port}`][attribute] = (attributes as Record<string, unknown>)[attribute];\n\t\t}\n\n\t\treturn this.configurationService.updateValue(PortsAttributes.SETTING, newRemoteValue, target);\n\t}\n}\n\nexport class TunnelModel extends Disposable {\n\treadonly forwarded: Map<string, Tunnel>;\n\tprivate readonly inProgress: Map<string, true> = new Map();\n\treadonly detected: Map<string, Tunnel>;\n\tprivate remoteTunnels: Map<string, RemoteTunnel>;\n\tprivate _onForwardPort: Emitter<Tunnel | void> = new Emitter();\n\tpublic onForwardPort: Event<Tunnel | void> = this._onForwardPort.event;\n\tprivate _onClosePort: Emitter<{ host: string; port: number }> = new Emitter();\n\tpublic onClosePort: Event<{ host: string; port: number }> = this._onClosePort.event;\n\tprivate _onPortName: Emitter<{ host: string; port: number }> = new Emitter();\n\tpublic onPortName: Event<{ host: string; port: number }> = this._onPortName.event;\n\tprivate _candidates: Map<string, CandidatePort> | undefined;\n\tprivate _onCandidatesChanged: Emitter<Map<string, { host: string; port: number }>> = new Emitter();\n\t// onCandidateChanged returns the removed candidates\n\tpublic onCandidatesChanged: Event<Map<string, { host: string; port: number }>> = this._onCandidatesChanged.event;\n\tprivate _candidateFilter: ((candidates: CandidatePort[]) => Promise<CandidatePort[]>) | undefined;\n\tprivate tunnelRestoreValue: Promise<string | undefined>;\n\tprivate _onEnvironmentTunnelsSet: Emitter<void> = new Emitter();\n\tpublic onEnvironmentTunnelsSet: Event<void> = this._onEnvironmentTunnelsSet.event;\n\tprivate _environmentTunnelsSet: boolean = false;\n\tpublic readonly configPortsAttributes: PortsAttributes;\n\tprivate restoreListener: DisposableStore | undefined = undefined;\n\tprivate knownPortsRestoreValue: string | undefined;\n\tprivate restoreComplete = false;\n\tprivate onRestoreComplete: Emitter<void> = new Emitter();\n\tprivate unrestoredExtensionTunnels: Map<string, RestorableTunnel> = new Map();\n\tprivate sessionCachedProperties: Map<string, Partial<TunnelProperties>> = new Map();\n\n\tprivate portAttributesProviders: PortAttributesProvider[] = [];\n\n\tconstructor(\n\t\t@ITunnelService private readonly tunnelService: ITunnelService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IWorkbenchEnvironmentService private readonly environmentService: IWorkbenchEnvironmentService,\n\t\t@IRemoteAuthorityResolverService private readonly remoteAuthorityResolverService: IRemoteAuthorityResolverService,\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService\n\t) {\n\t\tsuper();\n\t\tthis.configPortsAttributes = new PortsAttributes(configurationService);\n\t\tthis.tunnelRestoreValue = this.getTunnelRestoreValue();\n\t\tthis._register(this.configPortsAttributes.onDidChangeAttributes(this.updateAttributes, this));\n\t\tthis.forwarded = new Map();\n\t\tthis.remoteTunnels = new Map();\n\t\tthis.tunnelService.tunnels.then(async (tunnels) => {\n\t\t\tconst attributes = await this.getAttributes(tunnels.map(tunnel => {\n\t\t\t\treturn { port: tunnel.tunnelRemotePort, host: tunnel.tunnelRemoteHost };\n\t\t\t}));\n\t\t\tfor (const tunnel of tunnels) {\n\t\t\t\tif (tunnel.localAddress) {\n\t\t\t\t\tconst key = makeAddress(tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort);\n\t\t\t\t\tconst matchingCandidate = mapHasAddressLocalhostOrAllInterfaces(this._candidates ?? new Map(), tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort);\n\t\t\t\t\tthis.forwarded.set(key, {\n\t\t\t\t\t\tremotePort: tunnel.tunnelRemotePort,\n\t\t\t\t\t\tremoteHost: tunnel.tunnelRemoteHost,\n\t\t\t\t\t\tlocalAddress: tunnel.localAddress,\n\t\t\t\t\t\tprotocol: attributes?.get(tunnel.tunnelRemotePort)?.protocol ?? TunnelProtocol.Http,\n\t\t\t\t\t\tlocalUri: await this.makeLocalUri(tunnel.localAddress, attributes?.get(tunnel.tunnelRemotePort)),\n\t\t\t\t\t\tlocalPort: tunnel.tunnelLocalPort,\n\t\t\t\t\t\tname: attributes?.get(tunnel.tunnelRemotePort)?.label,\n\t\t\t\t\t\trunningProcess: matchingCandidate?.detail,\n\t\t\t\t\t\thasRunningProcess: !!matchingCandidate,\n\t\t\t\t\t\tpid: matchingCandidate?.pid,\n\t\t\t\t\t\tprivacy: tunnel.privacy,\n\t\t\t\t\t\tsource: UserTunnelSource,\n\t\t\t\t\t});\n\t\t\t\t\tthis.remoteTunnels.set(key, tunnel);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.detected = new Map();\n\t\tthis._register(this.tunnelService.onTunnelOpened(async (tunnel) => {\n\t\t\tconst key = makeAddress(tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort);\n\t\t\tif (!mapHasAddressLocalhostOrAllInterfaces(this.forwarded, tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort)\n\t\t\t\t&& !mapHasAddressLocalhostOrAllInterfaces(this.detected, tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort)\n\t\t\t\t&& !mapHasAddressLocalhostOrAllInterfaces(this.inProgress, tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort)\n\t\t\t\t&& tunnel.localAddress) {\n\t\t\t\tconst matchingCandidate = mapHasAddressLocalhostOrAllInterfaces(this._candidates ?? new Map(), tunnel.tunnelRemoteHost, tunnel.tunnelRemotePort);\n\t\t\t\tconst attributes = (await this.getAttributes([{ port: tunnel.tunnelRemotePort, host: tunnel.tunnelRemoteHost }]))?.get(tunnel.tunnelRemotePort);\n\t\t\t\tthis.forwarded.set(key, {\n\t\t\t\t\tremoteHost: tunnel.tunnelRemoteHost,\n\t\t\t\t\tremotePort: tunnel.tunnelRemotePort,\n\t\t\t\t\tlocalAddress: tunnel.localAddress,\n\t\t\t\t\tprotocol: attributes?.protocol ?? TunnelProtocol.Http,\n\t\t\t\t\tlocalUri: await this.makeLocalUri(tunnel.localAddress, attributes),\n\t\t\t\t\tlocalPort: tunnel.tunnelLocalPort,\n\t\t\t\t\tname: attributes?.label,\n\t\t\t\t\tcloseable: true,\n\t\t\t\t\trunningProcess: matchingCandidate?.detail,\n\t\t\t\t\thasRunningProcess: !!matchingCandidate,\n\t\t\t\t\tpid: matchingCandidate?.pid,\n\t\t\t\t\tprivacy: tunnel.privacy,\n\t\t\t\t\tsource: UserTunnelSource,\n\t\t\t\t});\n\t\t\t}\n\t\t\tawait this.storeForwarded();\n\t\t\tthis.checkExtensionActivationEvents(true);\n\t\t\tthis.remoteTunnels.set(key, tunnel);\n\t\t\tthis._onForwardPort.fire(this.forwarded.get(key)!);\n\t\t}));\n\t\tthis._register(this.tunnelService.onTunnelClosed(address => {\n\t\t\treturn this.onTunnelClosed(address, TunnelCloseReason.Other);\n\t\t}));\n\t\tthis.checkExtensionActivationEvents(false);\n\t}\n\n\tprivate extensionHasActivationEvent() {\n\t\tif (this.extensionService.extensions.find(extension => extension.activationEvents?.includes(ACTIVATION_EVENT))) {\n\t\t\tthis.contextKeyService.createKey(forwardedPortsViewEnabled.key, true);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate hasCheckedExtensionsOnTunnelOpened = false;\n\tprivate checkExtensionActivationEvents(tunnelOpened: boolean) {\n\t\tif (this.hasCheckedExtensionsOnTunnelOpened) {\n\t\t\treturn;\n\t\t}\n\t\tif (tunnelOpened) {\n\t\t\tthis.hasCheckedExtensionsOnTunnelOpened = true;\n\t\t}\n\t\tconst hasRemote = this.environmentService.remoteAuthority !== undefined;\n\t\tif (hasRemote && !tunnelOpened) {\n\t\t\t// We don't activate extensions on startup if there is a remote\n\t\t\treturn;\n\t\t}\n\t\tif (this.extensionHasActivationEvent()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst activationDisposable = this._register(this.extensionService.onDidRegisterExtensions(() => {\n\t\t\tif (this.extensionHasActivationEvent()) {\n\t\t\t\tactivationDisposable.dispose();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate async onTunnelClosed(address: { host: string; port: number }, reason: TunnelCloseReason) {\n\t\tconst key = makeAddress(address.host, address.port);\n\t\tif (this.forwarded.has(key)) {\n\t\t\tthis.forwarded.delete(key);\n\t\t\tawait this.storeForwarded();\n\t\t\tthis._onClosePort.fire(address);\n\t\t}\n\t}\n\n\tprivate makeLocalUri(localAddress: string, attributes?: Attributes) {\n\t\tif (localAddress.startsWith('http')) {\n\t\t\treturn URI.parse(localAddress);\n\t\t}\n\t\tconst protocol = attributes?.protocol ?? 'http';\n\t\treturn URI.parse(`${protocol}://${localAddress}`);\n\t}\n\n\tprivate async addStorageKeyPostfix(prefix: string): Promise<string | undefined> {\n\t\tconst workspace = this.workspaceContextService.getWorkspace();\n\t\tconst workspaceHash = workspace.configuration ? hash(workspace.configuration.path) : (workspace.folders.length > 0 ? hash(workspace.folders[0].uri.path) : undefined);\n\t\tif (workspaceHash === undefined) {\n\t\t\tthis.logService.debug('Could not get workspace hash for forwarded ports storage key.');\n\t\t\treturn undefined;\n\t\t}\n\t\treturn `${prefix}.${this.environmentService.remoteAuthority}.${workspaceHash}`;\n\t}\n\n\tprivate async getTunnelRestoreStorageKey(): Promise<string | undefined> {\n\t\treturn this.addStorageKeyPostfix(TUNNELS_TO_RESTORE);\n\t}\n\n\tprivate async getRestoreExpirationStorageKey(): Promise<string | undefined> {\n\t\treturn this.addStorageKeyPostfix(TUNNELS_TO_RESTORE_EXPIRATION);\n\t}\n\n\tprivate async getTunnelRestoreValue(): Promise<string | undefined> {\n\t\tconst deprecatedValue = this.storageService.get(TUNNELS_TO_RESTORE, StorageScope.WORKSPACE);\n\t\tif (deprecatedValue) {\n\t\t\tthis.storageService.remove(TUNNELS_TO_RESTORE, StorageScope.WORKSPACE);\n\t\t\tawait this.storeForwarded();\n\t\t\treturn deprecatedValue;\n\t\t}\n\t\tconst storageKey = await this.getTunnelRestoreStorageKey();\n\t\tif (!storageKey) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this.storageService.get(storageKey, StorageScope.PROFILE);\n\t}\n\n\tasync restoreForwarded() {\n\t\tthis.cleanupExpiredTunnelsForRestore();\n\t\tif (this.configurationService.getValue('remote.restoreForwardedPorts')) {\n\t\t\tconst tunnelRestoreValue = await this.tunnelRestoreValue;\n\t\t\tif (tunnelRestoreValue && (tunnelRestoreValue !== this.knownPortsRestoreValue)) {\n\t\t\t\tconst tunnels = <RestorableTunnel[] | undefined>JSON.parse(tunnelRestoreValue) ?? [];\n\t\t\t\tthis.logService.trace(`ForwardedPorts: (TunnelModel) restoring ports ${tunnels.map(tunnel => tunnel.remotePort).join(', ')}`);\n\t\t\t\tfor (const tunnel of tunnels) {\n\t\t\t\t\tconst alreadyForwarded = mapHasAddressLocalhostOrAllInterfaces(this.detected, tunnel.remoteHost, tunnel.remotePort);\n\t\t\t\t\t// Extension forwarded ports should only be updated, not restored.\n\t\t\t\t\tif ((tunnel.source.source !== TunnelSource.Extension && !alreadyForwarded) || (tunnel.source.source === TunnelSource.Extension && alreadyForwarded)) {\n\t\t\t\t\t\tawait this.doForward({\n\t\t\t\t\t\t\tremote: { host: tunnel.remoteHost, port: tunnel.remotePort },\n\t\t\t\t\t\t\tlocal: tunnel.localPort,\n\t\t\t\t\t\t\tname: tunnel.name,\n\t\t\t\t\t\t\televateIfNeeded: true,\n\t\t\t\t\t\t\tsource: tunnel.source\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (tunnel.source.source === TunnelSource.Extension && !alreadyForwarded) {\n\t\t\t\t\t\tthis.unrestoredExtensionTunnels.set(makeAddress(tunnel.remoteHost, tunnel.remotePort), tunnel);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.restoreComplete = true;\n\t\tthis.onRestoreComplete.fire();\n\n\t\tif (!this.restoreListener) {\n\t\t\t// It's possible that at restore time the value hasn't synced.\n\t\t\tconst key = await this.getTunnelRestoreStorageKey();\n\t\t\tthis.restoreListener = this._register(new DisposableStore());\n\t\t\tthis.restoreListener.add(this.storageService.onDidChangeValue(StorageScope.PROFILE, undefined, this.restoreListener)(async (e) => {\n\t\t\t\tif (e.key === key) {\n\t\t\t\t\tthis.tunnelRestoreValue = Promise.resolve(this.storageService.get(key, StorageScope.PROFILE));\n\t\t\t\t\tawait this.restoreForwarded();\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate cleanupExpiredTunnelsForRestore() {\n\t\tconst keys = this.storageService.keys(StorageScope.PROFILE, StorageTarget.USER).filter(key => key.startsWith(TUNNELS_TO_RESTORE_EXPIRATION));\n\t\tfor (const key of keys) {\n\t\t\tconst expiration = this.storageService.getNumber(key, StorageScope.PROFILE);\n\t\t\tif (expiration && expiration < Date.now()) {\n\t\t\t\tthis.tunnelRestoreValue = Promise.resolve(undefined);\n\t\t\t\tconst storageKey = key.replace(TUNNELS_TO_RESTORE_EXPIRATION, TUNNELS_TO_RESTORE);\n\t\t\t\tthis.storageService.remove(key, StorageScope.PROFILE);\n\t\t\t\tthis.storageService.remove(storageKey, StorageScope.PROFILE);\n\t\t\t}\n\t\t}\n\t}\n\n\t@debounce(1000)\n\tprivate async storeForwarded() {\n\t\tif (this.configurationService.getValue('remote.restoreForwardedPorts')) {\n\t\t\tconst forwarded = Array.from(this.forwarded.values());\n\t\t\tconst restorableTunnels: RestorableTunnel[] = forwarded.map(tunnel => {\n\t\t\t\treturn {\n\t\t\t\t\tremoteHost: tunnel.remoteHost,\n\t\t\t\t\tremotePort: tunnel.remotePort,\n\t\t\t\t\tlocalPort: tunnel.localPort,\n\t\t\t\t\tname: tunnel.name,\n\t\t\t\t\tlocalAddress: tunnel.localAddress,\n\t\t\t\t\tlocalUri: tunnel.localUri,\n\t\t\t\t\tprotocol: tunnel.protocol,\n\t\t\t\t\tsource: tunnel.source,\n\t\t\t\t};\n\t\t\t});\n\t\t\tlet valueToStore: string | undefined;\n\t\t\tif (forwarded.length > 0) {\n\t\t\t\tvalueToStore = JSON.stringify(restorableTunnels);\n\t\t\t}\n\n\t\t\tconst key = await this.getTunnelRestoreStorageKey();\n\t\t\tconst expirationKey = await this.getRestoreExpirationStorageKey();\n\t\t\tif (!valueToStore && key && expirationKey) {\n\t\t\t\tthis.storageService.remove(key, StorageScope.PROFILE);\n\t\t\t\tthis.storageService.remove(expirationKey, StorageScope.PROFILE);\n\t\t\t} else if ((valueToStore !== this.knownPortsRestoreValue) && key && expirationKey) {\n\t\t\t\tthis.storageService.store(key, valueToStore, StorageScope.PROFILE, StorageTarget.USER);\n\t\t\t\tthis.storageService.store(expirationKey, Date.now() + RESTORE_EXPIRATION_TIME, StorageScope.PROFILE, StorageTarget.USER);\n\t\t\t}\n\t\t\tthis.knownPortsRestoreValue = valueToStore;\n\t\t}\n\t}\n\n\tprivate mismatchCooldown = new Date();\n\tprivate async showPortMismatchModalIfNeeded(tunnel: RemoteTunnel, expectedLocal: number, attributes: Attributes | undefined) {\n\t\tif (!tunnel.tunnelLocalPort || !attributes?.requireLocalPort) {\n\t\t\treturn;\n\t\t}\n\t\tif (tunnel.tunnelLocalPort === expectedLocal) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst newCooldown = new Date();\n\t\tif ((this.mismatchCooldown.getTime() + MISMATCH_LOCAL_PORT_COOLDOWN) > newCooldown.getTime()) {\n\t\t\treturn;\n\t\t}\n\t\tthis.mismatchCooldown = newCooldown;\n\t\tconst mismatchString = nls.localize('remote.localPortMismatch.single', \"Local port {0} could not be used for forwarding to remote port {1}.\\n\\nThis usually happens when there is already another process using local port {0}.\\n\\nPort number {2} has been used instead.\",\n\t\t\texpectedLocal, tunnel.tunnelRemotePort, tunnel.tunnelLocalPort);\n\t\treturn this.dialogService.info(mismatchString);\n\t}\n\n\tasync forward(tunnelProperties: TunnelProperties, attributes?: Attributes | null): Promise<RemoteTunnel | string | undefined> {\n\t\tif (!this.restoreComplete && this.environmentService.remoteAuthority) {\n\t\t\tawait Event.toPromise(this.onRestoreComplete.event);\n\t\t}\n\t\treturn this.doForward(tunnelProperties, attributes);\n\t}\n\n\tprivate async doForward(tunnelProperties: TunnelProperties, attributes?: Attributes | null): Promise<RemoteTunnel | string | undefined> {\n\t\tawait this.extensionService.activateByEvent(ACTIVATION_EVENT);\n\n\t\tconst existingTunnel = mapHasAddressLocalhostOrAllInterfaces(this.forwarded, tunnelProperties.remote.host, tunnelProperties.remote.port);\n\t\tattributes = attributes ??\n\t\t\t((attributes !== null)\n\t\t\t\t? (await this.getAttributes([tunnelProperties.remote]))?.get(tunnelProperties.remote.port)\n\t\t\t\t: undefined);\n\t\tconst localPort = (tunnelProperties.local !== undefined) ? tunnelProperties.local : tunnelProperties.remote.port;\n\t\tlet noTunnelValue: string | undefined;\n\t\tif (!existingTunnel) {\n\t\t\tconst authority = this.environmentService.remoteAuthority;\n\t\t\tconst addressProvider: IAddressProvider | undefined = authority ? {\n\t\t\t\tgetAddress: async () => { return (await this.remoteAuthorityResolverService.resolveAuthority(authority)).authority; }\n\t\t\t} : undefined;\n\n\t\t\tconst key = makeAddress(tunnelProperties.remote.host, tunnelProperties.remote.port);\n\t\t\tthis.inProgress.set(key, true);\n\t\t\ttunnelProperties = this.mergeCachedAndUnrestoredProperties(key, tunnelProperties);\n\n\t\t\tconst tunnel = await this.tunnelService.openTunnel(addressProvider, tunnelProperties.remote.host, tunnelProperties.remote.port, undefined, localPort, (!tunnelProperties.elevateIfNeeded) ? attributes?.elevateIfNeeded : tunnelProperties.elevateIfNeeded, tunnelProperties.privacy, attributes?.protocol);\n\t\t\tif (typeof tunnel === 'string') {\n\t\t\t\t// There was an error  while creating the tunnel.\n\t\t\t\tnoTunnelValue = tunnel;\n\t\t\t} else if (tunnel && tunnel.localAddress) {\n\t\t\t\tconst matchingCandidate = mapHasAddressLocalhostOrAllInterfaces<CandidatePort>(this._candidates ?? new Map(), tunnelProperties.remote.host, tunnelProperties.remote.port);\n\t\t\t\tconst protocol = (tunnel.protocol ?\n\t\t\t\t\t((tunnel.protocol === TunnelProtocol.Https) ? TunnelProtocol.Https : TunnelProtocol.Http)\n\t\t\t\t\t: (attributes?.protocol ?? TunnelProtocol.Http));\n\t\t\t\tconst newForward: Tunnel = {\n\t\t\t\t\tremoteHost: tunnel.tunnelRemoteHost,\n\t\t\t\t\tremotePort: tunnel.tunnelRemotePort,\n\t\t\t\t\tlocalPort: tunnel.tunnelLocalPort,\n\t\t\t\t\tname: attributes?.label ?? tunnelProperties.name,\n\t\t\t\t\tcloseable: true,\n\t\t\t\t\tlocalAddress: tunnel.localAddress,\n\t\t\t\t\tprotocol,\n\t\t\t\t\tlocalUri: await this.makeLocalUri(tunnel.localAddress, attributes),\n\t\t\t\t\trunningProcess: matchingCandidate?.detail,\n\t\t\t\t\thasRunningProcess: !!matchingCandidate,\n\t\t\t\t\tpid: matchingCandidate?.pid,\n\t\t\t\t\tsource: tunnelProperties.source ?? UserTunnelSource,\n\t\t\t\t\tprivacy: tunnel.privacy,\n\t\t\t\t};\n\t\t\t\tthis.forwarded.set(key, newForward);\n\t\t\t\tthis.remoteTunnels.set(key, tunnel);\n\t\t\t\tthis.inProgress.delete(key);\n\t\t\t\tawait this.storeForwarded();\n\t\t\t\tawait this.showPortMismatchModalIfNeeded(tunnel, localPort, attributes);\n\t\t\t\tthis._onForwardPort.fire(newForward);\n\t\t\t\treturn tunnel;\n\t\t\t}\n\t\t\tthis.inProgress.delete(key);\n\t\t} else {\n\t\t\treturn this.mergeAttributesIntoExistingTunnel(existingTunnel, tunnelProperties, attributes);\n\t\t}\n\n\t\treturn noTunnelValue;\n\t}\n\n\tprivate mergeCachedAndUnrestoredProperties(key: string, tunnelProperties: TunnelProperties): TunnelProperties {\n\t\tconst map = this.unrestoredExtensionTunnels.has(key) ? this.unrestoredExtensionTunnels : (this.sessionCachedProperties.has(key) ? this.sessionCachedProperties : undefined);\n\t\tif (map) {\n\t\t\tconst updateProps = map.get(key)!;\n\t\t\tmap.delete(key);\n\t\t\tif (updateProps) {\n\t\t\t\ttunnelProperties.name = updateProps.name ?? tunnelProperties.name;\n\t\t\t\ttunnelProperties.local = (('local' in updateProps) ? updateProps.local : (('localPort' in updateProps) ? updateProps.localPort : undefined)) ?? tunnelProperties.local;\n\t\t\t\ttunnelProperties.privacy = tunnelProperties.privacy;\n\t\t\t}\n\t\t}\n\t\treturn tunnelProperties;\n\t}\n\n\tprivate async mergeAttributesIntoExistingTunnel(existingTunnel: Tunnel, tunnelProperties: TunnelProperties, attributes: Attributes | undefined) {\n\t\tconst newName = attributes?.label ?? tunnelProperties.name;\n\t\tenum MergedAttributeAction {\n\t\t\tNone = 0,\n\t\t\tFire = 1,\n\t\t\tReopen = 2\n\t\t}\n\t\tlet mergedAction = MergedAttributeAction.None;\n\t\tif (newName !== existingTunnel.name) {\n\t\t\texistingTunnel.name = newName;\n\t\t\tmergedAction = MergedAttributeAction.Fire;\n\t\t}\n\t\t// Source of existing tunnel wins so that original source is maintained\n\t\tif ((attributes?.protocol || (existingTunnel.protocol !== TunnelProtocol.Http)) && (attributes?.protocol !== existingTunnel.protocol)) {\n\t\t\ttunnelProperties.source = existingTunnel.source;\n\t\t\tmergedAction = MergedAttributeAction.Reopen;\n\t\t}\n\t\t// New privacy value wins\n\t\tif (tunnelProperties.privacy && (existingTunnel.privacy !== tunnelProperties.privacy)) {\n\t\t\tmergedAction = MergedAttributeAction.Reopen;\n\t\t}\n\t\tswitch (mergedAction) {\n\t\t\tcase MergedAttributeAction.Fire: {\n\t\t\t\tthis._onForwardPort.fire();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase MergedAttributeAction.Reopen: {\n\t\t\t\tawait this.close(existingTunnel.remoteHost, existingTunnel.remotePort, TunnelCloseReason.User);\n\t\t\t\tawait this.doForward(tunnelProperties, attributes);\n\t\t\t}\n\t\t}\n\n\t\treturn mapHasAddressLocalhostOrAllInterfaces(this.remoteTunnels, tunnelProperties.remote.host, tunnelProperties.remote.port);\n\t}\n\n\tasync name(host: string, port: number, name: string) {\n\t\tconst existingForwarded = mapHasAddressLocalhostOrAllInterfaces(this.forwarded, host, port);\n\t\tconst key = makeAddress(host, port);\n\t\tif (existingForwarded) {\n\t\t\texistingForwarded.name = name;\n\t\t\tawait this.storeForwarded();\n\t\t\tthis._onPortName.fire({ host, port });\n\t\t\treturn;\n\t\t} else if (this.detected.has(key)) {\n\t\t\tthis.detected.get(key)!.name = name;\n\t\t\tthis._onPortName.fire({ host, port });\n\t\t}\n\t}\n\n\tasync close(host: string, port: number, reason: TunnelCloseReason): Promise<void> {\n\t\tconst key = makeAddress(host, port);\n\t\tconst oldTunnel = this.forwarded.get(key)!;\n\t\tif ((reason === TunnelCloseReason.AutoForwardEnd) && oldTunnel && (oldTunnel.source.source === TunnelSource.Auto)) {\n\t\t\tthis.sessionCachedProperties.set(key, {\n\t\t\t\tlocal: oldTunnel.localPort,\n\t\t\t\tname: oldTunnel.name,\n\t\t\t\tprivacy: oldTunnel.privacy,\n\t\t\t});\n\t\t}\n\t\tawait this.tunnelService.closeTunnel(host, port);\n\t\treturn this.onTunnelClosed({ host, port }, reason);\n\t}\n\n\taddress(host: string, port: number): string | undefined {\n\t\tconst key = makeAddress(host, port);\n\t\treturn (this.forwarded.get(key) || this.detected.get(key))?.localAddress;\n\t}\n\n\tpublic get environmentTunnelsSet(): boolean {\n\t\treturn this._environmentTunnelsSet;\n\t}\n\n\taddEnvironmentTunnels(tunnels: TunnelDescription[] | undefined): void {\n\t\tif (tunnels) {\n\t\t\tfor (const tunnel of tunnels) {\n\t\t\t\tconst matchingCandidate = mapHasAddressLocalhostOrAllInterfaces(this._candidates ?? new Map(), tunnel.remoteAddress.host, tunnel.remoteAddress.port);\n\t\t\t\tconst localAddress = typeof tunnel.localAddress === 'string' ? tunnel.localAddress : makeAddress(tunnel.localAddress.host, tunnel.localAddress.port);\n\t\t\t\tthis.detected.set(makeAddress(tunnel.remoteAddress.host, tunnel.remoteAddress.port), {\n\t\t\t\t\tremoteHost: tunnel.remoteAddress.host,\n\t\t\t\t\tremotePort: tunnel.remoteAddress.port,\n\t\t\t\t\tlocalAddress: localAddress,\n\t\t\t\t\tprotocol: TunnelProtocol.Http,\n\t\t\t\t\tlocalUri: this.makeLocalUri(localAddress),\n\t\t\t\t\tcloseable: false,\n\t\t\t\t\trunningProcess: matchingCandidate?.detail,\n\t\t\t\t\thasRunningProcess: !!matchingCandidate,\n\t\t\t\t\tpid: matchingCandidate?.pid,\n\t\t\t\t\tprivacy: TunnelPrivacyId.ConstantPrivate,\n\t\t\t\t\tsource: {\n\t\t\t\t\t\tsource: TunnelSource.Extension,\n\t\t\t\t\t\tdescription: nls.localize('tunnel.staticallyForwarded', \"Statically Forwarded\")\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.tunnelService.setEnvironmentTunnel(tunnel.remoteAddress.host, tunnel.remoteAddress.port, localAddress, TunnelPrivacyId.ConstantPrivate, TunnelProtocol.Http);\n\t\t\t}\n\t\t}\n\t\tthis._environmentTunnelsSet = true;\n\t\tthis._onEnvironmentTunnelsSet.fire();\n\t\tthis._onForwardPort.fire();\n\t}\n\n\tsetCandidateFilter(filter: ((candidates: CandidatePort[]) => Promise<CandidatePort[]>) | undefined): void {\n\t\tthis._candidateFilter = filter;\n\t}\n\n\tasync setCandidates(candidates: CandidatePort[]) {\n\t\tlet processedCandidates = candidates;\n\t\tif (this._candidateFilter) {\n\t\t\t// When an extension provides a filter, we do the filtering on the extension host before the candidates are set here.\n\t\t\t// However, when the filter doesn't come from an extension we filter here.\n\t\t\tprocessedCandidates = await this._candidateFilter(candidates);\n\t\t}\n\t\tconst removedCandidates = this.updateInResponseToCandidates(processedCandidates);\n\t\tthis.logService.trace(`ForwardedPorts: (TunnelModel) removed candidates ${Array.from(removedCandidates.values()).map(candidate => candidate.port).join(', ')}`);\n\t\tthis._onCandidatesChanged.fire(removedCandidates);\n\t}\n\n\t// Returns removed candidates\n\tprivate updateInResponseToCandidates(candidates: CandidatePort[]): Map<string, { host: string; port: number }> {\n\t\tconst removedCandidates = this._candidates ?? new Map();\n\t\tconst candidatesMap = new Map();\n\t\tthis._candidates = candidatesMap;\n\t\tcandidates.forEach(value => {\n\t\t\tconst addressKey = makeAddress(value.host, value.port);\n\t\t\tcandidatesMap.set(addressKey, {\n\t\t\t\thost: value.host,\n\t\t\t\tport: value.port,\n\t\t\t\tdetail: value.detail,\n\t\t\t\tpid: value.pid\n\t\t\t});\n\t\t\tif (removedCandidates.has(addressKey)) {\n\t\t\t\tremovedCandidates.delete(addressKey);\n\t\t\t}\n\t\t\tconst forwardedValue = mapHasAddressLocalhostOrAllInterfaces(this.forwarded, value.host, value.port);\n\t\t\tif (forwardedValue) {\n\t\t\t\tforwardedValue.runningProcess = value.detail;\n\t\t\t\tforwardedValue.hasRunningProcess = true;\n\t\t\t\tforwardedValue.pid = value.pid;\n\t\t\t}\n\t\t});\n\t\tremovedCandidates.forEach((_value, key) => {\n\t\t\tconst parsedAddress = parseAddress(key);\n\t\t\tif (!parsedAddress) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst forwardedValue = mapHasAddressLocalhostOrAllInterfaces(this.forwarded, parsedAddress.host, parsedAddress.port);\n\t\t\tif (forwardedValue) {\n\t\t\t\tforwardedValue.runningProcess = undefined;\n\t\t\t\tforwardedValue.hasRunningProcess = false;\n\t\t\t\tforwardedValue.pid = undefined;\n\t\t\t}\n\t\t\tconst detectedValue = mapHasAddressLocalhostOrAllInterfaces(this.detected, parsedAddress.host, parsedAddress.port);\n\t\t\tif (detectedValue) {\n\t\t\t\tdetectedValue.runningProcess = undefined;\n\t\t\t\tdetectedValue.hasRunningProcess = false;\n\t\t\t\tdetectedValue.pid = undefined;\n\t\t\t}\n\t\t});\n\t\treturn removedCandidates;\n\t}\n\n\tget candidates(): CandidatePort[] {\n\t\treturn this._candidates ? Array.from(this._candidates.values()) : [];\n\t}\n\n\tget candidatesOrUndefined(): CandidatePort[] | undefined {\n\t\treturn this._candidates ? this.candidates : undefined;\n\t}\n\n\tprivate async updateAttributes() {\n\t\t// If the label changes in the attributes, we should update it.\n\t\tconst tunnels = Array.from(this.forwarded.values());\n\t\tconst allAttributes = await this.getAttributes(tunnels.map(tunnel => {\n\t\t\treturn { port: tunnel.remotePort, host: tunnel.remoteHost };\n\t\t}), false);\n\t\tif (!allAttributes) {\n\t\t\treturn;\n\t\t}\n\t\tfor (const forwarded of tunnels) {\n\t\t\tconst attributes = allAttributes.get(forwarded.remotePort);\n\t\t\tif ((attributes?.protocol || (forwarded.protocol !== TunnelProtocol.Http)) && (attributes?.protocol !== forwarded.protocol)) {\n\t\t\t\tawait this.doForward({\n\t\t\t\t\tremote: { host: forwarded.remoteHost, port: forwarded.remotePort },\n\t\t\t\t\tlocal: forwarded.localPort,\n\t\t\t\t\tname: forwarded.name,\n\t\t\t\t\tsource: forwarded.source\n\t\t\t\t}, attributes);\n\t\t\t}\n\n\t\t\tif (!attributes) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (attributes.label && attributes.label !== forwarded.name) {\n\t\t\t\tawait this.name(forwarded.remoteHost, forwarded.remotePort, attributes.label);\n\t\t\t}\n\n\t\t}\n\t}\n\n\tasync getAttributes(forwardedPorts: { host: string; port: number }[], checkProviders: boolean = true): Promise<Map<number, Attributes> | undefined> {\n\t\tconst matchingCandidates: Map<number, CandidatePort> = new Map();\n\t\tconst pidToPortsMapping: Map<number | undefined, number[]> = new Map();\n\t\tforwardedPorts.forEach(forwardedPort => {\n\t\t\tconst matchingCandidate = mapHasAddressLocalhostOrAllInterfaces<CandidatePort>(this._candidates ?? new Map(), LOCALHOST_ADDRESSES[0], forwardedPort.port) ?? forwardedPort;\n\t\t\tif (matchingCandidate) {\n\t\t\t\tmatchingCandidates.set(forwardedPort.port, matchingCandidate);\n\t\t\t\tconst pid = isCandidatePort(matchingCandidate) ? matchingCandidate.pid : undefined;\n\t\t\t\tif (!pidToPortsMapping.has(pid)) {\n\t\t\t\t\tpidToPortsMapping.set(pid, []);\n\t\t\t\t}\n\t\t\t\tpidToPortsMapping.get(pid)?.push(forwardedPort.port);\n\t\t\t}\n\t\t});\n\n\t\tconst configAttributes: Map<number, Attributes> = new Map();\n\t\tforwardedPorts.forEach(forwardedPort => {\n\t\t\tconst attributes = this.configPortsAttributes.getAttributes(forwardedPort.port, forwardedPort.host, matchingCandidates.get(forwardedPort.port)?.detail);\n\t\t\tif (attributes) {\n\t\t\t\tconfigAttributes.set(forwardedPort.port, attributes);\n\t\t\t}\n\t\t});\n\t\tif ((this.portAttributesProviders.length === 0) || !checkProviders) {\n\t\t\treturn (configAttributes.size > 0) ? configAttributes : undefined;\n\t\t}\n\n\t\t// Group calls to provide attributes by pid.\n\t\tconst allProviderResults = await Promise.all(this.portAttributesProviders.flatMap(provider => {\n\t\t\treturn Array.from(pidToPortsMapping.entries()).map(entry => {\n\t\t\t\tconst portGroup = entry[1];\n\t\t\t\tconst matchingCandidate = matchingCandidates.get(portGroup[0]);\n\t\t\t\treturn provider.providePortAttributes(portGroup,\n\t\t\t\t\tmatchingCandidate?.pid, matchingCandidate?.detail, CancellationToken.None);\n\t\t\t});\n\t\t}));\n\t\tconst providedAttributes: Map<number, ProvidedPortAttributes> = new Map();\n\t\tallProviderResults.forEach(attributes => attributes.forEach(attribute => {\n\t\t\tif (attribute) {\n\t\t\t\tprovidedAttributes.set(attribute.port, attribute);\n\t\t\t}\n\t\t}));\n\n\t\tif (!configAttributes && !providedAttributes) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Merge. The config wins.\n\t\tconst mergedAttributes: Map<number, Attributes> = new Map();\n\t\tforwardedPorts.forEach(forwardedPorts => {\n\t\t\tconst config = configAttributes.get(forwardedPorts.port);\n\t\t\tconst provider = providedAttributes.get(forwardedPorts.port);\n\t\t\tmergedAttributes.set(forwardedPorts.port, {\n\t\t\t\televateIfNeeded: config?.elevateIfNeeded,\n\t\t\t\tlabel: config?.label,\n\t\t\t\tonAutoForward: config?.onAutoForward ?? PortsAttributes.providedActionToAction(provider?.autoForwardAction),\n\t\t\t\trequireLocalPort: config?.requireLocalPort,\n\t\t\t\tprotocol: config?.protocol\n\t\t\t});\n\t\t});\n\n\t\treturn mergedAttributes;\n\t}\n\n\taddAttributesProvider(provider: PortAttributesProvider) {\n\t\tthis.portAttributesProviders.push(provider);\n\t}\n}\n"]}