{"version":3,"sources":["vs/workbench/services/configurationResolver/common/variableResolver.ts"],"names":[],"mappings":"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","file":"variableResolver.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IStringDictionary } from '../../../../base/common/collections.js';\nimport { normalizeDriveLetter } from '../../../../base/common/labels.js';\nimport * as paths from '../../../../base/common/path.js';\nimport { IProcessEnvironment, isWindows } from '../../../../base/common/platform.js';\nimport * as process from '../../../../base/common/process.js';\nimport * as types from '../../../../base/common/types.js';\nimport { URI as uri } from '../../../../base/common/uri.js';\nimport { localize } from '../../../../nls.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { IWorkspaceFolderData } from '../../../../platform/workspace/common/workspace.js';\nimport { allVariableKinds, IConfigurationResolverService, VariableError, VariableKind } from './configurationResolver.js';\nimport { ConfigurationResolverExpression, IResolvedValue, Replacement } from './configurationResolverExpression.js';\n\ninterface IVariableResolveContext {\n\tgetFolderUri(folderName: string): uri | undefined;\n\tgetWorkspaceFolderCount(): number;\n\tgetConfigurationValue(folderUri: uri | undefined, section: string): string | undefined;\n\tgetAppRoot(): string | undefined;\n\tgetExecPath(): string | undefined;\n\tgetFilePath(): string | undefined;\n\tgetWorkspaceFolderPathForFile?(): string | undefined;\n\tgetSelectedText(): string | undefined;\n\tgetLineNumber(): string | undefined;\n\tgetColumnNumber(): string | undefined;\n\tgetExtension(id: string): Promise<{ readonly extensionLocation: uri } | undefined>;\n}\n\ntype Environment = { env: IProcessEnvironment | undefined; userHome: string | undefined };\n\nexport abstract class AbstractVariableResolverService implements IConfigurationResolverService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate _context: IVariableResolveContext;\n\tprivate _labelService?: ILabelService;\n\tprivate _envVariablesPromise?: Promise<IProcessEnvironment>;\n\tprivate _userHomePromise?: Promise<string>;\n\tprotected _contributedVariables: Map<string, () => Promise<string | undefined>> = new Map();\n\n\tpublic readonly resolvableVariables = new Set<string>(allVariableKinds);\n\n\tconstructor(_context: IVariableResolveContext, _labelService?: ILabelService, _userHomePromise?: Promise<string>, _envVariablesPromise?: Promise<IProcessEnvironment>) {\n\t\tthis._context = _context;\n\t\tthis._labelService = _labelService;\n\t\tthis._userHomePromise = _userHomePromise;\n\t\tif (_envVariablesPromise) {\n\t\t\tthis._envVariablesPromise = _envVariablesPromise.then(envVariables => {\n\t\t\t\treturn this.prepareEnv(envVariables);\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate prepareEnv(envVariables: IProcessEnvironment): IProcessEnvironment {\n\t\t// windows env variables are case insensitive\n\t\tif (isWindows) {\n\t\t\tconst ev: IProcessEnvironment = Object.create(null);\n\t\t\tObject.keys(envVariables).forEach(key => {\n\t\t\t\tev[key.toLowerCase()] = envVariables[key];\n\t\t\t});\n\t\t\treturn ev;\n\t\t}\n\t\treturn envVariables;\n\t}\n\n\tpublic async resolveWithEnvironment(environment: IProcessEnvironment, folder: IWorkspaceFolderData | undefined, value: string): Promise<string> {\n\t\tconst expr = ConfigurationResolverExpression.parse(value);\n\n\t\tfor (const replacement of expr.unresolved()) {\n\t\t\tconst resolvedValue = await this.evaluateSingleVariable(replacement, folder?.uri, environment);\n\t\t\tif (resolvedValue !== undefined) {\n\t\t\t\texpr.resolve(replacement, String(resolvedValue));\n\t\t\t}\n\t\t}\n\n\t\treturn expr.toObject();\n\t}\n\n\tpublic async resolveAsync<T>(folder: IWorkspaceFolderData | undefined, config: T): Promise<T extends ConfigurationResolverExpression<infer R> ? R : T> {\n\t\tconst expr = ConfigurationResolverExpression.parse(config);\n\n\t\tfor (const replacement of expr.unresolved()) {\n\t\t\tconst resolvedValue = await this.evaluateSingleVariable(replacement, folder?.uri);\n\t\t\tif (resolvedValue !== undefined) {\n\t\t\t\texpr.resolve(replacement, String(resolvedValue));\n\t\t\t}\n\t\t}\n\n\t\treturn expr.toObject() as (T extends ConfigurationResolverExpression<infer R> ? R : T);\n\t}\n\n\tpublic resolveWithInteractionReplace(folder: IWorkspaceFolderData | undefined, config: unknown): Promise<unknown> {\n\t\tthrow new Error('resolveWithInteractionReplace not implemented.');\n\t}\n\n\tpublic resolveWithInteraction(folder: IWorkspaceFolderData | undefined, config: unknown): Promise<Map<string, string> | undefined> {\n\t\tthrow new Error('resolveWithInteraction not implemented.');\n\t}\n\n\tpublic contributeVariable(variable: string, resolution: () => Promise<string | undefined>): void {\n\t\tif (this._contributedVariables.has(variable)) {\n\t\t\tthrow new Error('Variable ' + variable + ' is contributed twice.');\n\t\t} else {\n\t\t\tthis.resolvableVariables.add(variable);\n\t\t\tthis._contributedVariables.set(variable, resolution);\n\t\t}\n\t}\n\n\tprivate fsPath(displayUri: uri): string {\n\t\treturn this._labelService ? this._labelService.getUriLabel(displayUri, { noPrefix: true }) : displayUri.fsPath;\n\t}\n\n\tprotected async evaluateSingleVariable(replacement: Replacement, folderUri: uri | undefined, processEnvironment?: IProcessEnvironment, commandValueMapping?: IStringDictionary<IResolvedValue>): Promise<IResolvedValue | string | undefined> {\n\n\n\t\tconst environment: Environment = {\n\t\t\tenv: (processEnvironment !== undefined) ? this.prepareEnv(processEnvironment) : await this._envVariablesPromise,\n\t\t\tuserHome: (processEnvironment !== undefined) ? undefined : await this._userHomePromise\n\t\t};\n\n\t\tconst { name: variable, arg: argument } = replacement;\n\n\t\t// common error handling for all variables that require an open editor\n\t\tconst getFilePath = (variableKind: VariableKind): string => {\n\t\t\tconst filePath = this._context.getFilePath();\n\t\t\tif (filePath) {\n\t\t\t\treturn normalizeDriveLetter(filePath);\n\t\t\t}\n\t\t\tthrow new VariableError(variableKind, (localize('canNotResolveFile', \"Variable {0} can not be resolved. Please open an editor.\", replacement.id)));\n\t\t};\n\n\t\t// common error handling for all variables that require an open editor\n\t\tconst getFolderPathForFile = (variableKind: VariableKind): string => {\n\t\t\tconst filePath = getFilePath(variableKind);\t\t// throws error if no editor open\n\t\t\tif (this._context.getWorkspaceFolderPathForFile) {\n\t\t\t\tconst folderPath = this._context.getWorkspaceFolderPathForFile();\n\t\t\t\tif (folderPath) {\n\t\t\t\t\treturn normalizeDriveLetter(folderPath);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthrow new VariableError(variableKind, localize('canNotResolveFolderForFile', \"Variable {0}: can not find workspace folder of '{1}'.\", replacement.id, paths.basename(filePath)));\n\t\t};\n\n\t\t// common error handling for all variables that require an open folder and accept a folder name argument\n\t\tconst getFolderUri = (variableKind: VariableKind): uri => {\n\t\t\tif (argument) {\n\t\t\t\tconst folder = this._context.getFolderUri(argument);\n\t\t\t\tif (folder) {\n\t\t\t\t\treturn folder;\n\t\t\t\t}\n\t\t\t\tthrow new VariableError(variableKind, localize('canNotFindFolder', \"Variable {0} can not be resolved. No such folder '{1}'.\", variableKind, argument));\n\t\t\t}\n\n\t\t\tif (folderUri) {\n\t\t\t\treturn folderUri;\n\t\t\t}\n\n\t\t\tif (this._context.getWorkspaceFolderCount() > 1) {\n\t\t\t\tthrow new VariableError(variableKind, localize('canNotResolveWorkspaceFolderMultiRoot', \"Variable {0} can not be resolved in a multi folder workspace. Scope this variable using ':' and a workspace folder name.\", variableKind));\n\t\t\t}\n\t\t\tthrow new VariableError(variableKind, localize('canNotResolveWorkspaceFolder', \"Variable {0} can not be resolved. Please open a folder.\", variableKind));\n\t\t};\n\n\t\tswitch (variable) {\n\t\t\tcase 'env':\n\t\t\t\tif (argument) {\n\t\t\t\t\tif (environment.env) {\n\t\t\t\t\t\tconst env = environment.env[isWindows ? argument.toLowerCase() : argument];\n\t\t\t\t\t\tif (types.isString(env)) {\n\t\t\t\t\t\t\treturn env;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t\tthrow new VariableError(VariableKind.Env, localize('missingEnvVarName', \"Variable {0} can not be resolved because no environment variable name is given.\", replacement.id));\n\n\t\t\tcase 'config':\n\t\t\t\tif (argument) {\n\t\t\t\t\tconst config = this._context.getConfigurationValue(folderUri, argument);\n\t\t\t\t\tif (types.isUndefinedOrNull(config)) {\n\t\t\t\t\t\tthrow new VariableError(VariableKind.Config, localize('configNotFound', \"Variable {0} can not be resolved because setting '{1}' not found.\", replacement.id, argument));\n\t\t\t\t\t}\n\t\t\t\t\tif (types.isObject(config)) {\n\t\t\t\t\t\tthrow new VariableError(VariableKind.Config, localize('configNoString', \"Variable {0} can not be resolved because '{1}' is a structured value.\", replacement.id, argument));\n\t\t\t\t\t}\n\t\t\t\t\treturn config;\n\t\t\t\t}\n\t\t\t\tthrow new VariableError(VariableKind.Config, localize('missingConfigName', \"Variable {0} can not be resolved because no settings name is given.\", replacement.id));\n\n\t\t\tcase 'command':\n\t\t\t\treturn this.resolveFromMap(VariableKind.Command, replacement.id, argument, commandValueMapping, 'command');\n\n\t\t\tcase 'input':\n\t\t\t\treturn this.resolveFromMap(VariableKind.Input, replacement.id, argument, commandValueMapping, 'input');\n\n\t\t\tcase 'extensionInstallFolder':\n\t\t\t\tif (argument) {\n\t\t\t\t\tconst ext = await this._context.getExtension(argument);\n\t\t\t\t\tif (!ext) {\n\t\t\t\t\t\tthrow new VariableError(VariableKind.ExtensionInstallFolder, localize('extensionNotInstalled', \"Variable {0} can not be resolved because the extension {1} is not installed.\", replacement.id, argument));\n\t\t\t\t\t}\n\t\t\t\t\treturn this.fsPath(ext.extensionLocation);\n\t\t\t\t}\n\t\t\t\tthrow new VariableError(VariableKind.ExtensionInstallFolder, localize('missingExtensionName', \"Variable {0} can not be resolved because no extension name is given.\", replacement.id));\n\n\t\t\tdefault: {\n\t\t\t\tswitch (variable) {\n\t\t\t\t\tcase 'workspaceRoot':\n\t\t\t\t\tcase 'workspaceFolder': {\n\t\t\t\t\t\tconst uri = getFolderUri(VariableKind.WorkspaceFolder);\n\t\t\t\t\t\treturn uri ? normalizeDriveLetter(this.fsPath(uri)) : undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'cwd': {\n\t\t\t\t\t\tif (!folderUri && !argument) {\n\t\t\t\t\t\t\treturn process.cwd();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst uri = getFolderUri(VariableKind.Cwd);\n\t\t\t\t\t\treturn uri ? normalizeDriveLetter(this.fsPath(uri)) : undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'workspaceRootFolderName':\n\t\t\t\t\tcase 'workspaceFolderBasename': {\n\t\t\t\t\t\tconst uri = getFolderUri(VariableKind.WorkspaceFolderBasename);\n\t\t\t\t\t\treturn uri ? normalizeDriveLetter(paths.basename(this.fsPath(uri))) : undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'userHome':\n\t\t\t\t\t\tif (environment.userHome) {\n\t\t\t\t\t\t\treturn environment.userHome;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthrow new VariableError(VariableKind.UserHome, localize('canNotResolveUserHome', \"Variable {0} can not be resolved. UserHome path is not defined\", replacement.id));\n\n\t\t\t\t\tcase 'lineNumber': {\n\t\t\t\t\t\tconst lineNumber = this._context.getLineNumber();\n\t\t\t\t\t\tif (lineNumber) {\n\t\t\t\t\t\t\treturn lineNumber;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthrow new VariableError(VariableKind.LineNumber, localize('canNotResolveLineNumber', \"Variable {0} can not be resolved. Make sure to have a line selected in the active editor.\", replacement.id));\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'columnNumber': {\n\t\t\t\t\t\tconst columnNumber = this._context.getColumnNumber();\n\t\t\t\t\t\tif (columnNumber) {\n\t\t\t\t\t\t\treturn columnNumber;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthrow new Error(localize('canNotResolveColumnNumber', \"Variable {0} can not be resolved. Make sure to have a column selected in the active editor.\", replacement.id));\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'selectedText': {\n\t\t\t\t\t\tconst selectedText = this._context.getSelectedText();\n\t\t\t\t\t\tif (selectedText) {\n\t\t\t\t\t\t\treturn selectedText;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthrow new VariableError(VariableKind.SelectedText, localize('canNotResolveSelectedText', \"Variable {0} can not be resolved. Make sure to have some text selected in the active editor.\", replacement.id));\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'file':\n\t\t\t\t\t\treturn getFilePath(VariableKind.File);\n\n\t\t\t\t\tcase 'fileWorkspaceFolder':\n\t\t\t\t\t\treturn getFolderPathForFile(VariableKind.FileWorkspaceFolder);\n\n\t\t\t\t\tcase 'fileWorkspaceFolderBasename':\n\t\t\t\t\t\treturn paths.basename(getFolderPathForFile(VariableKind.FileWorkspaceFolderBasename));\n\n\t\t\t\t\tcase 'relativeFile':\n\t\t\t\t\t\tif (folderUri || argument) {\n\t\t\t\t\t\t\treturn paths.relative(this.fsPath(getFolderUri(VariableKind.RelativeFile)), getFilePath(VariableKind.RelativeFile));\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn getFilePath(VariableKind.RelativeFile);\n\n\t\t\t\t\tcase 'relativeFileDirname': {\n\t\t\t\t\t\tconst dirname = paths.dirname(getFilePath(VariableKind.RelativeFileDirname));\n\t\t\t\t\t\tif (folderUri || argument) {\n\t\t\t\t\t\t\tconst relative = paths.relative(this.fsPath(getFolderUri(VariableKind.RelativeFileDirname)), dirname);\n\t\t\t\t\t\t\treturn relative.length === 0 ? '.' : relative;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn dirname;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'fileDirname':\n\t\t\t\t\t\treturn paths.dirname(getFilePath(VariableKind.FileDirname));\n\n\t\t\t\t\tcase 'fileExtname':\n\t\t\t\t\t\treturn paths.extname(getFilePath(VariableKind.FileExtname));\n\n\t\t\t\t\tcase 'fileBasename':\n\t\t\t\t\t\treturn paths.basename(getFilePath(VariableKind.FileBasename));\n\n\t\t\t\t\tcase 'fileBasenameNoExtension': {\n\t\t\t\t\t\tconst basename = paths.basename(getFilePath(VariableKind.FileBasenameNoExtension));\n\t\t\t\t\t\treturn (basename.slice(0, basename.length - paths.extname(basename).length));\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'fileDirnameBasename':\n\t\t\t\t\t\treturn paths.basename(paths.dirname(getFilePath(VariableKind.FileDirnameBasename)));\n\n\t\t\t\t\tcase 'execPath': {\n\t\t\t\t\t\tconst ep = this._context.getExecPath();\n\t\t\t\t\t\tif (ep) {\n\t\t\t\t\t\t\treturn ep;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn replacement.id;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'execInstallFolder': {\n\t\t\t\t\t\tconst ar = this._context.getAppRoot();\n\t\t\t\t\t\tif (ar) {\n\t\t\t\t\t\t\treturn ar;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn replacement.id;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase 'pathSeparator':\n\t\t\t\t\tcase '/':\n\t\t\t\t\t\treturn paths.sep;\n\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn this.resolveFromMap(VariableKind.Unknown, replacement.id, argument, commandValueMapping, undefined);\n\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\treturn replacement.id;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate resolveFromMap(variableKind: VariableKind, match: string, argument: string | undefined, commandValueMapping: IStringDictionary<IResolvedValue> | undefined, prefix: string | undefined): string {\n\t\tif (argument && commandValueMapping) {\n\t\t\tconst v = (prefix === undefined) ? commandValueMapping[argument] : commandValueMapping[prefix + ':' + argument];\n\t\t\tif (typeof v === 'string') {\n\t\t\t\treturn v;\n\t\t\t}\n\t\t\tthrow new VariableError(variableKind, localize('noValueForCommand', \"Variable {0} can not be resolved because the command has no value.\", match));\n\t\t}\n\t\treturn match;\n\t}\n}\n"]}