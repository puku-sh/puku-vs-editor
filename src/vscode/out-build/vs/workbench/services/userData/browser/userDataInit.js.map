{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/userData/browser/userDataInit.ts","vs/workbench/services/userData/browser/userDataInit.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,eAAe,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AACpH,OAAO,EAA2D,UAAU,EAAE,MAAM,kCAAkC,CAAC;AACvH,OAAO,EAAE,QAAQ,EAAE,MAAM,kDAAkD,CAAC;AAE5E,OAAO,EAAE,KAAK,EAAE,MAAM,qCAAqC,CAAC;AAC5D,OAAO,EAAE,iBAAiB,EAAE,MAAM,uCAAuC,CAAC;AAC1E,OAAO,EAAE,IAAI,EAAE,MAAM,wCAAwC,CAAC;AAU9D,MAAM,CAAC,MAAM,8BAA8B,GAAG,eAAe,CAAiC,gCAAgC,CAAC,CAAC;AAKhI,MAAM,OAAO,6BAA6B;IAIzC,YAA6B,eAAuC,EAAE;QAAzC,iBAAY,GAAZ,YAAY,CAA6B;IACtE,CAAC;IAED,KAAK,CAAC,0BAA0B;QAC/B,IAAI,MAAM,IAAI,CAAC,sBAAsB,EAAE,EAAE,CAAC;YACzC,MAAM,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,WAAW,CAAC,0BAA0B,EAAE,CAAC,CAAC,CAAC;QACnG,CAAC;IACF,CAAC;IAED,KAAK,CAAC,sBAAsB;QAC3B,OAAO,CAAC,MAAM,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,WAAW,CAAC,sBAAsB,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;IAC/H,CAAC;IAED,KAAK,CAAC,2BAA2B;QAChC,IAAI,MAAM,IAAI,CAAC,sBAAsB,EAAE,EAAE,CAAC;YACzC,MAAM,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,WAAW,CAAC,2BAA2B,EAAE,CAAC,CAAC,CAAC;QACpG,CAAC;IACF,CAAC;IAED,KAAK,CAAC,wBAAwB,CAAC,oBAA2C;QACzE,IAAI,MAAM,IAAI,CAAC,sBAAsB,EAAE,EAAE,CAAC;YACzC,MAAM,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,WAAW,CAAC,wBAAwB,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC;QACrH,CAAC;IACF,CAAC;IAED,KAAK,CAAC,6BAA6B,CAAC,oBAA2C;QAC9E,IAAI,MAAM,IAAI,CAAC,sBAAsB,EAAE,EAAE,CAAC;YACzC,MAAM,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,WAAW,CAAC,6BAA6B,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC;QAC1H,CAAC;IACF,CAAC;CAED;AAED,IAAM,oCAAoC,GAA1C,MAAM,oCAAoC;IACzC,YACiC,yBAAyD,EAClE,oBAA2C,EAC/C,gBAAmC;QAEtD,gBAAgB,CAAC,iCAAiC,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,uBAAuB,CAAC,yBAAyB,EAAE,oBAAoB,CAAC,CAAC,CAAC;IAChJ,CAAC;IAEO,KAAK,CAAC,uBAAuB,CAAC,yBAAyD,EAAE,oBAA2C;QAC3I,IAAI,MAAM,yBAAyB,CAAC,sBAAsB,EAAE,EAAE,CAAC;YAC9D,IAAI,CAAC,4BAA4B,CAAC,CAAC;YACnC,MAAM,yBAAyB,CAAC,wBAAwB,CAAC,oBAAoB,CAAC,CAAC;YAC/E,IAAI,CAAC,2BAA2B,CAAC,CAAC;QACnC,CAAC;IACF,CAAC;CACD,CAAA;AAhBK,oCAAoC;IAEvC,WAAA,8BAA8B,CAAA;IAC9B,WAAA,qBAAqB,CAAA;IACrB,WAAA,iBAAiB,CAAA;GAJd,oCAAoC,CAgBzC;AAED,IAAI,KAAK,EAAE,CAAC;IACX,MAAM,iBAAiB,GAAG,QAAQ,CAAC,EAAE,CAAkC,UAAU,CAAC,SAAS,CAAC,CAAC;IAC7F,iBAAiB,CAAC,6BAA6B,CAAC,oCAAoC,kCAA0B,CAAC;AAChH,CAAC","file":"userDataInit.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IWorkbenchContribution, IWorkbenchContributionsRegistry, Extensions } from '../../../common/contributions.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { LifecyclePhase } from '../../lifecycle/common/lifecycle.js';\nimport { isWeb } from '../../../../base/common/platform.js';\nimport { IExtensionService } from '../../extensions/common/extensions.js';\nimport { mark } from '../../../../base/common/performance.js';\n\nexport interface IUserDataInitializer {\n\trequiresInitialization(): Promise<boolean>;\n\twhenInitializationFinished(): Promise<void>;\n\tinitializeRequiredResources(): Promise<void>;\n\tinitializeInstalledExtensions(instantiationService: IInstantiationService): Promise<void>;\n\tinitializeOtherResources(instantiationService: IInstantiationService): Promise<void>;\n}\n\nexport const IUserDataInitializationService = createDecorator<IUserDataInitializationService>('IUserDataInitializationService');\nexport interface IUserDataInitializationService extends IUserDataInitializer {\n\t_serviceBrand: undefined;\n}\n\nexport class UserDataInitializationService implements IUserDataInitializationService {\n\n\t_serviceBrand: undefined;\n\n\tconstructor(private readonly initializers: IUserDataInitializer[] = []) {\n\t}\n\n\tasync whenInitializationFinished(): Promise<void> {\n\t\tif (await this.requiresInitialization()) {\n\t\t\tawait Promise.all(this.initializers.map(initializer => initializer.whenInitializationFinished()));\n\t\t}\n\t}\n\n\tasync requiresInitialization(): Promise<boolean> {\n\t\treturn (await Promise.all(this.initializers.map(initializer => initializer.requiresInitialization()))).some(result => result);\n\t}\n\n\tasync initializeRequiredResources(): Promise<void> {\n\t\tif (await this.requiresInitialization()) {\n\t\t\tawait Promise.all(this.initializers.map(initializer => initializer.initializeRequiredResources()));\n\t\t}\n\t}\n\n\tasync initializeOtherResources(instantiationService: IInstantiationService): Promise<void> {\n\t\tif (await this.requiresInitialization()) {\n\t\t\tawait Promise.all(this.initializers.map(initializer => initializer.initializeOtherResources(instantiationService)));\n\t\t}\n\t}\n\n\tasync initializeInstalledExtensions(instantiationService: IInstantiationService): Promise<void> {\n\t\tif (await this.requiresInitialization()) {\n\t\t\tawait Promise.all(this.initializers.map(initializer => initializer.initializeInstalledExtensions(instantiationService)));\n\t\t}\n\t}\n\n}\n\nclass InitializeOtherResourcesContribution implements IWorkbenchContribution {\n\tconstructor(\n\t\t@IUserDataInitializationService userDataInitializeService: IUserDataInitializationService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IExtensionService extensionService: IExtensionService\n\t) {\n\t\textensionService.whenInstalledExtensionsRegistered().then(() => this.initializeOtherResource(userDataInitializeService, instantiationService));\n\t}\n\n\tprivate async initializeOtherResource(userDataInitializeService: IUserDataInitializationService, instantiationService: IInstantiationService): Promise<void> {\n\t\tif (await userDataInitializeService.requiresInitialization()) {\n\t\t\tmark('code/willInitOtherUserData');\n\t\t\tawait userDataInitializeService.initializeOtherResources(instantiationService);\n\t\t\tmark('code/didInitOtherUserData');\n\t\t}\n\t}\n}\n\nif (isWeb) {\n\tconst workbenchRegistry = Registry.as<IWorkbenchContributionsRegistry>(Extensions.Workbench);\n\tworkbenchRegistry.registerWorkbenchContribution(InitializeOtherResourcesContribution, LifecyclePhase.Restored);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IWorkbenchContribution, IWorkbenchContributionsRegistry, Extensions } from '../../../common/contributions.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { LifecyclePhase } from '../../lifecycle/common/lifecycle.js';\nimport { isWeb } from '../../../../base/common/platform.js';\nimport { IExtensionService } from '../../extensions/common/extensions.js';\nimport { mark } from '../../../../base/common/performance.js';\n\nexport interface IUserDataInitializer {\n\trequiresInitialization(): Promise<boolean>;\n\twhenInitializationFinished(): Promise<void>;\n\tinitializeRequiredResources(): Promise<void>;\n\tinitializeInstalledExtensions(instantiationService: IInstantiationService): Promise<void>;\n\tinitializeOtherResources(instantiationService: IInstantiationService): Promise<void>;\n}\n\nexport const IUserDataInitializationService = createDecorator<IUserDataInitializationService>('IUserDataInitializationService');\nexport interface IUserDataInitializationService extends IUserDataInitializer {\n\t_serviceBrand: undefined;\n}\n\nexport class UserDataInitializationService implements IUserDataInitializationService {\n\n\t_serviceBrand: undefined;\n\n\tconstructor(private readonly initializers: IUserDataInitializer[] = []) {\n\t}\n\n\tasync whenInitializationFinished(): Promise<void> {\n\t\tif (await this.requiresInitialization()) {\n\t\t\tawait Promise.all(this.initializers.map(initializer => initializer.whenInitializationFinished()));\n\t\t}\n\t}\n\n\tasync requiresInitialization(): Promise<boolean> {\n\t\treturn (await Promise.all(this.initializers.map(initializer => initializer.requiresInitialization()))).some(result => result);\n\t}\n\n\tasync initializeRequiredResources(): Promise<void> {\n\t\tif (await this.requiresInitialization()) {\n\t\t\tawait Promise.all(this.initializers.map(initializer => initializer.initializeRequiredResources()));\n\t\t}\n\t}\n\n\tasync initializeOtherResources(instantiationService: IInstantiationService): Promise<void> {\n\t\tif (await this.requiresInitialization()) {\n\t\t\tawait Promise.all(this.initializers.map(initializer => initializer.initializeOtherResources(instantiationService)));\n\t\t}\n\t}\n\n\tasync initializeInstalledExtensions(instantiationService: IInstantiationService): Promise<void> {\n\t\tif (await this.requiresInitialization()) {\n\t\t\tawait Promise.all(this.initializers.map(initializer => initializer.initializeInstalledExtensions(instantiationService)));\n\t\t}\n\t}\n\n}\n\nclass InitializeOtherResourcesContribution implements IWorkbenchContribution {\n\tconstructor(\n\t\t@IUserDataInitializationService userDataInitializeService: IUserDataInitializationService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IExtensionService extensionService: IExtensionService\n\t) {\n\t\textensionService.whenInstalledExtensionsRegistered().then(() => this.initializeOtherResource(userDataInitializeService, instantiationService));\n\t}\n\n\tprivate async initializeOtherResource(userDataInitializeService: IUserDataInitializationService, instantiationService: IInstantiationService): Promise<void> {\n\t\tif (await userDataInitializeService.requiresInitialization()) {\n\t\t\tmark('code/willInitOtherUserData');\n\t\t\tawait userDataInitializeService.initializeOtherResources(instantiationService);\n\t\t\tmark('code/didInitOtherUserData');\n\t\t}\n\t}\n}\n\nif (isWeb) {\n\tconst workbenchRegistry = Registry.as<IWorkbenchContributionsRegistry>(Extensions.Workbench);\n\tworkbenchRegistry.registerWorkbenchContribution(InitializeOtherResourcesContribution, LifecyclePhase.Restored);\n}\n"]}