{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/decorations/test/browser/decorationsService.test.ts","vs/workbench/services/decorations/test/browser/decorationsService.test.ts"],"names":[],"mappings":"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","file":"decorationsService.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { DecorationsService } from '../../browser/decorationsService.js';\nimport { IDecorationsProvider, IDecorationData } from '../../common/decorations.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { Event, Emitter } from '../../../../../base/common/event.js';\nimport * as resources from '../../../../../base/common/resources.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { IUriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { TestThemeService } from '../../../../../platform/theme/test/common/testThemeService.js';\nimport { runWithFakedTimers } from '../../../../../base/test/common/timeTravelScheduler.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nsuite('DecorationsService', function () {\n\n\tlet service: DecorationsService;\n\n\tsetup(function () {\n\t\tservice = new DecorationsService(\n\t\t\tnew class extends mock<IUriIdentityService>() {\n\t\t\t\toverride extUri = resources.extUri;\n\t\t\t},\n\t\t\tnew TestThemeService()\n\t\t);\n\t});\n\n\tteardown(function () {\n\t\tservice.dispose();\n\t});\n\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\n\ttest('Async provider, async/evented result', function () {\n\n\t\treturn runWithFakedTimers({}, async function () {\n\n\t\t\tconst uri = URI.parse('foo:bar');\n\t\t\tlet callCounter = 0;\n\n\t\t\tconst reg = service.registerDecorationsProvider(new class implements IDecorationsProvider {\n\t\t\t\treadonly label: string = 'Test';\n\t\t\t\treadonly onDidChange: Event<readonly URI[]> = Event.None;\n\t\t\t\tprovideDecorations(uri: URI) {\n\t\t\t\t\tcallCounter += 1;\n\t\t\t\t\treturn new Promise<IDecorationData>(resolve => {\n\t\t\t\t\t\tsetTimeout(() => resolve({\n\t\t\t\t\t\t\tcolor: 'someBlue',\n\t\t\t\t\t\t\ttooltip: 'T',\n\t\t\t\t\t\t\tstrikethrough: true\n\t\t\t\t\t\t}));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// trigger -> async\n\t\t\tassert.strictEqual(service.getDecoration(uri, false), undefined);\n\t\t\tassert.strictEqual(callCounter, 1);\n\n\t\t\t// event when result is computed\n\t\t\tconst e = await Event.toPromise(service.onDidChangeDecorations);\n\t\t\tassert.strictEqual(e.affectsResource(uri), true);\n\t\t\t// sync result\n\t\t\tassert.deepStrictEqual(service.getDecoration(uri, false)!.tooltip, 'T');\n\t\t\tassert.deepStrictEqual(service.getDecoration(uri, false)!.strikethrough, true);\n\t\t\tassert.strictEqual(callCounter, 1);\n\n\t\t\treg.dispose();\n\t\t});\n\t});\n\n\ttest('Sync provider, sync result', function () {\n\n\t\tconst uri = URI.parse('foo:bar');\n\t\tlet callCounter = 0;\n\n\t\tconst reg = service.registerDecorationsProvider(new class implements IDecorationsProvider {\n\t\t\treadonly label: string = 'Test';\n\t\t\treadonly onDidChange: Event<readonly URI[]> = Event.None;\n\t\t\tprovideDecorations(uri: URI) {\n\t\t\t\tcallCounter += 1;\n\t\t\t\treturn { color: 'someBlue', tooltip: 'Z' };\n\t\t\t}\n\t\t});\n\n\t\t// trigger -> sync\n\t\tassert.deepStrictEqual(service.getDecoration(uri, false)!.tooltip, 'Z');\n\t\tassert.deepStrictEqual(service.getDecoration(uri, false)!.strikethrough, false);\n\t\tassert.strictEqual(callCounter, 1);\n\n\t\treg.dispose();\n\t});\n\n\ttest('Clear decorations on provider dispose', async function () {\n\t\treturn runWithFakedTimers({}, async function () {\n\n\t\t\tconst uri = URI.parse('foo:bar');\n\t\t\tlet callCounter = 0;\n\n\t\t\tconst reg = service.registerDecorationsProvider(new class implements IDecorationsProvider {\n\t\t\t\treadonly label: string = 'Test';\n\t\t\t\treadonly onDidChange: Event<readonly URI[]> = Event.None;\n\t\t\t\tprovideDecorations(uri: URI) {\n\t\t\t\t\tcallCounter += 1;\n\t\t\t\t\treturn { color: 'someBlue', tooltip: 'J' };\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// trigger -> sync\n\t\t\tassert.deepStrictEqual(service.getDecoration(uri, false)!.tooltip, 'J');\n\t\t\tassert.strictEqual(callCounter, 1);\n\n\t\t\t// un-register -> ensure good event\n\t\t\tlet didSeeEvent = false;\n\t\t\tconst p = new Promise<void>(resolve => {\n\t\t\t\tconst l = service.onDidChangeDecorations(e => {\n\t\t\t\t\tassert.strictEqual(e.affectsResource(uri), true);\n\t\t\t\t\tassert.deepStrictEqual(service.getDecoration(uri, false), undefined);\n\t\t\t\t\tassert.strictEqual(callCounter, 1);\n\t\t\t\t\tdidSeeEvent = true;\n\t\t\t\t\tl.dispose();\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t});\n\t\t\treg.dispose(); // will clear all data\n\t\t\tawait p;\n\t\t\tassert.strictEqual(didSeeEvent, true);\n\n\t\t});\n\t});\n\n\ttest('No default bubbling', function () {\n\n\t\tlet reg = service.registerDecorationsProvider({\n\t\t\tlabel: 'Test',\n\t\t\tonDidChange: Event.None,\n\t\t\tprovideDecorations(uri: URI) {\n\t\t\t\treturn uri.path.match(/\\.txt/)\n\t\t\t\t\t? { tooltip: '.txt', weight: 17 }\n\t\t\t\t\t: undefined;\n\t\t\t}\n\t\t});\n\n\t\tconst childUri = URI.parse('file:///some/path/some/file.txt');\n\n\t\tlet deco = service.getDecoration(childUri, false)!;\n\t\tassert.strictEqual(deco.tooltip, '.txt');\n\n\t\tdeco = service.getDecoration(childUri.with({ path: 'some/path/' }), true)!;\n\t\tassert.strictEqual(deco, undefined);\n\t\treg.dispose();\n\n\t\t// bubble\n\t\treg = service.registerDecorationsProvider({\n\t\t\tlabel: 'Test',\n\t\t\tonDidChange: Event.None,\n\t\t\tprovideDecorations(uri: URI) {\n\t\t\t\treturn uri.path.match(/\\.txt/)\n\t\t\t\t\t? { tooltip: '.txt.bubble', weight: 71, bubble: true }\n\t\t\t\t\t: undefined;\n\t\t\t}\n\t\t});\n\n\t\tdeco = service.getDecoration(childUri, false)!;\n\t\tassert.strictEqual(deco.tooltip, '.txt.bubble');\n\n\t\tdeco = service.getDecoration(childUri.with({ path: 'some/path/' }), true)!;\n\t\tassert.strictEqual(typeof deco.tooltip, 'string');\n\t\treg.dispose();\n\t});\n\n\ttest('Decorations not showing up for second root folder #48502', async function () {\n\n\t\tlet cancelCount = 0;\n\t\tlet callCount = 0;\n\n\t\tconst provider = new class implements IDecorationsProvider {\n\n\t\t\t_onDidChange = new Emitter<URI[]>();\n\t\t\treadonly onDidChange: Event<readonly URI[]> = this._onDidChange.event;\n\n\t\t\tlabel: string = 'foo';\n\n\t\t\tprovideDecorations(uri: URI, token: CancellationToken): Promise<IDecorationData> {\n\n\t\t\t\tstore.add(token.onCancellationRequested(() => {\n\t\t\t\t\tcancelCount += 1;\n\t\t\t\t}));\n\n\t\t\t\treturn new Promise(resolve => {\n\t\t\t\t\tcallCount += 1;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tresolve({ letter: 'foo' });\n\t\t\t\t\t}, 10);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst reg = service.registerDecorationsProvider(provider);\n\n\t\tconst uri = URI.parse('foo://bar');\n\t\tconst d1 = service.getDecoration(uri, false);\n\n\t\tprovider._onDidChange.fire([uri]);\n\t\tconst d2 = service.getDecoration(uri, false);\n\n\t\tassert.strictEqual(cancelCount, 1);\n\t\tassert.strictEqual(callCount, 2);\n\n\t\td1?.dispose();\n\t\td2?.dispose();\n\t\treg.dispose();\n\t});\n\n\ttest('Decorations not bubbling... #48745', function () {\n\n\t\tconst reg = service.registerDecorationsProvider({\n\t\t\tlabel: 'Test',\n\t\t\tonDidChange: Event.None,\n\t\t\tprovideDecorations(uri: URI) {\n\t\t\t\tif (uri.path.match(/hello$/)) {\n\t\t\t\t\treturn { tooltip: 'FOO', weight: 17, bubble: true };\n\t\t\t\t} else {\n\t\t\t\t\treturn new Promise<IDecorationData>(_resolve => { });\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst data1 = service.getDecoration(URI.parse('a:b/'), true);\n\t\tassert.ok(!data1);\n\n\t\tconst data2 = service.getDecoration(URI.parse('a:b/c.hello'), false)!;\n\t\tassert.ok(data2.tooltip);\n\n\t\tconst data3 = service.getDecoration(URI.parse('a:b/'), true);\n\t\tassert.ok(data3);\n\n\n\t\treg.dispose();\n\t});\n\n\ttest('Folder decorations don\\'t go away when file with problems is deleted #61919 (part1)', function () {\n\n\t\tconst emitter = new Emitter<URI[]>();\n\t\tlet gone = false;\n\t\tconst reg = service.registerDecorationsProvider({\n\t\t\tlabel: 'Test',\n\t\t\tonDidChange: emitter.event,\n\t\t\tprovideDecorations(uri: URI) {\n\t\t\t\tif (!gone && uri.path.match(/file.ts$/)) {\n\t\t\t\t\treturn { tooltip: 'FOO', weight: 17, bubble: true };\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t});\n\n\t\tconst uri = URI.parse('foo:/folder/file.ts');\n\t\tconst uri2 = URI.parse('foo:/folder/');\n\t\tlet data = service.getDecoration(uri, true)!;\n\t\tassert.strictEqual(data.tooltip, 'FOO');\n\n\t\tdata = service.getDecoration(uri2, true)!;\n\t\tassert.ok(data.tooltip); // emphazied items...\n\n\t\tgone = true;\n\t\temitter.fire([uri]);\n\n\t\tdata = service.getDecoration(uri, true)!;\n\t\tassert.strictEqual(data, undefined);\n\n\t\tdata = service.getDecoration(uri2, true)!;\n\t\tassert.strictEqual(data, undefined);\n\n\t\treg.dispose();\n\t});\n\n\ttest('Folder decorations don\\'t go away when file with problems is deleted #61919 (part2)', function () {\n\n\t\treturn runWithFakedTimers({}, async function () {\n\n\t\t\tconst emitter = new Emitter<URI[]>();\n\t\t\tlet gone = false;\n\t\t\tconst reg = service.registerDecorationsProvider({\n\t\t\t\tlabel: 'Test',\n\t\t\t\tonDidChange: emitter.event,\n\t\t\t\tprovideDecorations(uri: URI) {\n\t\t\t\t\tif (!gone && uri.path.match(/file.ts$/)) {\n\t\t\t\t\t\treturn { tooltip: 'FOO', weight: 17, bubble: true };\n\t\t\t\t\t}\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst uri = URI.parse('foo:/folder/file.ts');\n\t\t\tconst uri2 = URI.parse('foo:/folder/');\n\t\t\tlet data = service.getDecoration(uri, true)!;\n\t\t\tassert.strictEqual(data.tooltip, 'FOO');\n\n\t\t\tdata = service.getDecoration(uri2, true)!;\n\t\t\tassert.ok(data.tooltip); // emphazied items...\n\n\t\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\t\tconst l = service.onDidChangeDecorations(e => {\n\t\t\t\t\tl.dispose();\n\t\t\t\t\ttry {\n\t\t\t\t\t\tassert.ok(e.affectsResource(uri));\n\t\t\t\t\t\tassert.ok(e.affectsResource(uri2));\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\treg.dispose();\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t\treg.dispose();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tgone = true;\n\t\t\t\temitter.fire([uri]);\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('FileDecorationProvider intermittently fails #133210', async function () {\n\n\t\tconst invokeOrder: string[] = [];\n\n\t\tstore.add(service.registerDecorationsProvider(new class {\n\t\t\tlabel = 'Provider-1';\n\t\t\tonDidChange = Event.None;\n\t\t\tprovideDecorations() {\n\t\t\t\tinvokeOrder.push(this.label);\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}));\n\n\t\tstore.add(service.registerDecorationsProvider(new class {\n\t\t\tlabel = 'Provider-2';\n\t\t\tonDidChange = Event.None;\n\t\t\tprovideDecorations() {\n\t\t\t\tinvokeOrder.push(this.label);\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}));\n\n\t\tservice.getDecoration(URI.parse('test://me/path'), false);\n\n\t\tassert.deepStrictEqual(invokeOrder, ['Provider-2', 'Provider-1']);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { DecorationsService } from '../../browser/decorationsService.js';\nimport { IDecorationsProvider, IDecorationData } from '../../common/decorations.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { Event, Emitter } from '../../../../../base/common/event.js';\nimport * as resources from '../../../../../base/common/resources.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { IUriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { TestThemeService } from '../../../../../platform/theme/test/common/testThemeService.js';\nimport { runWithFakedTimers } from '../../../../../base/test/common/timeTravelScheduler.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nsuite('DecorationsService', function () {\n\n\tlet service: DecorationsService;\n\n\tsetup(function () {\n\t\tservice = new DecorationsService(\n\t\t\tnew class extends mock<IUriIdentityService>() {\n\t\t\t\toverride extUri = resources.extUri;\n\t\t\t},\n\t\t\tnew TestThemeService()\n\t\t);\n\t});\n\n\tteardown(function () {\n\t\tservice.dispose();\n\t});\n\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\n\ttest('Async provider, async/evented result', function () {\n\n\t\treturn runWithFakedTimers({}, async function () {\n\n\t\t\tconst uri = URI.parse('foo:bar');\n\t\t\tlet callCounter = 0;\n\n\t\t\tconst reg = service.registerDecorationsProvider(new class implements IDecorationsProvider {\n\t\t\t\treadonly label: string = 'Test';\n\t\t\t\treadonly onDidChange: Event<readonly URI[]> = Event.None;\n\t\t\t\tprovideDecorations(uri: URI) {\n\t\t\t\t\tcallCounter += 1;\n\t\t\t\t\treturn new Promise<IDecorationData>(resolve => {\n\t\t\t\t\t\tsetTimeout(() => resolve({\n\t\t\t\t\t\t\tcolor: 'someBlue',\n\t\t\t\t\t\t\ttooltip: 'T',\n\t\t\t\t\t\t\tstrikethrough: true\n\t\t\t\t\t\t}));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// trigger -> async\n\t\t\tassert.strictEqual(service.getDecoration(uri, false), undefined);\n\t\t\tassert.strictEqual(callCounter, 1);\n\n\t\t\t// event when result is computed\n\t\t\tconst e = await Event.toPromise(service.onDidChangeDecorations);\n\t\t\tassert.strictEqual(e.affectsResource(uri), true);\n\t\t\t// sync result\n\t\t\tassert.deepStrictEqual(service.getDecoration(uri, false)!.tooltip, 'T');\n\t\t\tassert.deepStrictEqual(service.getDecoration(uri, false)!.strikethrough, true);\n\t\t\tassert.strictEqual(callCounter, 1);\n\n\t\t\treg.dispose();\n\t\t});\n\t});\n\n\ttest('Sync provider, sync result', function () {\n\n\t\tconst uri = URI.parse('foo:bar');\n\t\tlet callCounter = 0;\n\n\t\tconst reg = service.registerDecorationsProvider(new class implements IDecorationsProvider {\n\t\t\treadonly label: string = 'Test';\n\t\t\treadonly onDidChange: Event<readonly URI[]> = Event.None;\n\t\t\tprovideDecorations(uri: URI) {\n\t\t\t\tcallCounter += 1;\n\t\t\t\treturn { color: 'someBlue', tooltip: 'Z' };\n\t\t\t}\n\t\t});\n\n\t\t// trigger -> sync\n\t\tassert.deepStrictEqual(service.getDecoration(uri, false)!.tooltip, 'Z');\n\t\tassert.deepStrictEqual(service.getDecoration(uri, false)!.strikethrough, false);\n\t\tassert.strictEqual(callCounter, 1);\n\n\t\treg.dispose();\n\t});\n\n\ttest('Clear decorations on provider dispose', async function () {\n\t\treturn runWithFakedTimers({}, async function () {\n\n\t\t\tconst uri = URI.parse('foo:bar');\n\t\t\tlet callCounter = 0;\n\n\t\t\tconst reg = service.registerDecorationsProvider(new class implements IDecorationsProvider {\n\t\t\t\treadonly label: string = 'Test';\n\t\t\t\treadonly onDidChange: Event<readonly URI[]> = Event.None;\n\t\t\t\tprovideDecorations(uri: URI) {\n\t\t\t\t\tcallCounter += 1;\n\t\t\t\t\treturn { color: 'someBlue', tooltip: 'J' };\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// trigger -> sync\n\t\t\tassert.deepStrictEqual(service.getDecoration(uri, false)!.tooltip, 'J');\n\t\t\tassert.strictEqual(callCounter, 1);\n\n\t\t\t// un-register -> ensure good event\n\t\t\tlet didSeeEvent = false;\n\t\t\tconst p = new Promise<void>(resolve => {\n\t\t\t\tconst l = service.onDidChangeDecorations(e => {\n\t\t\t\t\tassert.strictEqual(e.affectsResource(uri), true);\n\t\t\t\t\tassert.deepStrictEqual(service.getDecoration(uri, false), undefined);\n\t\t\t\t\tassert.strictEqual(callCounter, 1);\n\t\t\t\t\tdidSeeEvent = true;\n\t\t\t\t\tl.dispose();\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t});\n\t\t\treg.dispose(); // will clear all data\n\t\t\tawait p;\n\t\t\tassert.strictEqual(didSeeEvent, true);\n\n\t\t});\n\t});\n\n\ttest('No default bubbling', function () {\n\n\t\tlet reg = service.registerDecorationsProvider({\n\t\t\tlabel: 'Test',\n\t\t\tonDidChange: Event.None,\n\t\t\tprovideDecorations(uri: URI) {\n\t\t\t\treturn uri.path.match(/\\.txt/)\n\t\t\t\t\t? { tooltip: '.txt', weight: 17 }\n\t\t\t\t\t: undefined;\n\t\t\t}\n\t\t});\n\n\t\tconst childUri = URI.parse('file:///some/path/some/file.txt');\n\n\t\tlet deco = service.getDecoration(childUri, false)!;\n\t\tassert.strictEqual(deco.tooltip, '.txt');\n\n\t\tdeco = service.getDecoration(childUri.with({ path: 'some/path/' }), true)!;\n\t\tassert.strictEqual(deco, undefined);\n\t\treg.dispose();\n\n\t\t// bubble\n\t\treg = service.registerDecorationsProvider({\n\t\t\tlabel: 'Test',\n\t\t\tonDidChange: Event.None,\n\t\t\tprovideDecorations(uri: URI) {\n\t\t\t\treturn uri.path.match(/\\.txt/)\n\t\t\t\t\t? { tooltip: '.txt.bubble', weight: 71, bubble: true }\n\t\t\t\t\t: undefined;\n\t\t\t}\n\t\t});\n\n\t\tdeco = service.getDecoration(childUri, false)!;\n\t\tassert.strictEqual(deco.tooltip, '.txt.bubble');\n\n\t\tdeco = service.getDecoration(childUri.with({ path: 'some/path/' }), true)!;\n\t\tassert.strictEqual(typeof deco.tooltip, 'string');\n\t\treg.dispose();\n\t});\n\n\ttest('Decorations not showing up for second root folder #48502', async function () {\n\n\t\tlet cancelCount = 0;\n\t\tlet callCount = 0;\n\n\t\tconst provider = new class implements IDecorationsProvider {\n\n\t\t\t_onDidChange = new Emitter<URI[]>();\n\t\t\treadonly onDidChange: Event<readonly URI[]> = this._onDidChange.event;\n\n\t\t\tlabel: string = 'foo';\n\n\t\t\tprovideDecorations(uri: URI, token: CancellationToken): Promise<IDecorationData> {\n\n\t\t\t\tstore.add(token.onCancellationRequested(() => {\n\t\t\t\t\tcancelCount += 1;\n\t\t\t\t}));\n\n\t\t\t\treturn new Promise(resolve => {\n\t\t\t\t\tcallCount += 1;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tresolve({ letter: 'foo' });\n\t\t\t\t\t}, 10);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst reg = service.registerDecorationsProvider(provider);\n\n\t\tconst uri = URI.parse('foo://bar');\n\t\tconst d1 = service.getDecoration(uri, false);\n\n\t\tprovider._onDidChange.fire([uri]);\n\t\tconst d2 = service.getDecoration(uri, false);\n\n\t\tassert.strictEqual(cancelCount, 1);\n\t\tassert.strictEqual(callCount, 2);\n\n\t\td1?.dispose();\n\t\td2?.dispose();\n\t\treg.dispose();\n\t});\n\n\ttest('Decorations not bubbling... #48745', function () {\n\n\t\tconst reg = service.registerDecorationsProvider({\n\t\t\tlabel: 'Test',\n\t\t\tonDidChange: Event.None,\n\t\t\tprovideDecorations(uri: URI) {\n\t\t\t\tif (uri.path.match(/hello$/)) {\n\t\t\t\t\treturn { tooltip: 'FOO', weight: 17, bubble: true };\n\t\t\t\t} else {\n\t\t\t\t\treturn new Promise<IDecorationData>(_resolve => { });\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst data1 = service.getDecoration(URI.parse('a:b/'), true);\n\t\tassert.ok(!data1);\n\n\t\tconst data2 = service.getDecoration(URI.parse('a:b/c.hello'), false)!;\n\t\tassert.ok(data2.tooltip);\n\n\t\tconst data3 = service.getDecoration(URI.parse('a:b/'), true);\n\t\tassert.ok(data3);\n\n\n\t\treg.dispose();\n\t});\n\n\ttest('Folder decorations don\\'t go away when file with problems is deleted #61919 (part1)', function () {\n\n\t\tconst emitter = new Emitter<URI[]>();\n\t\tlet gone = false;\n\t\tconst reg = service.registerDecorationsProvider({\n\t\t\tlabel: 'Test',\n\t\t\tonDidChange: emitter.event,\n\t\t\tprovideDecorations(uri: URI) {\n\t\t\t\tif (!gone && uri.path.match(/file.ts$/)) {\n\t\t\t\t\treturn { tooltip: 'FOO', weight: 17, bubble: true };\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t});\n\n\t\tconst uri = URI.parse('foo:/folder/file.ts');\n\t\tconst uri2 = URI.parse('foo:/folder/');\n\t\tlet data = service.getDecoration(uri, true)!;\n\t\tassert.strictEqual(data.tooltip, 'FOO');\n\n\t\tdata = service.getDecoration(uri2, true)!;\n\t\tassert.ok(data.tooltip); // emphazied items...\n\n\t\tgone = true;\n\t\temitter.fire([uri]);\n\n\t\tdata = service.getDecoration(uri, true)!;\n\t\tassert.strictEqual(data, undefined);\n\n\t\tdata = service.getDecoration(uri2, true)!;\n\t\tassert.strictEqual(data, undefined);\n\n\t\treg.dispose();\n\t});\n\n\ttest('Folder decorations don\\'t go away when file with problems is deleted #61919 (part2)', function () {\n\n\t\treturn runWithFakedTimers({}, async function () {\n\n\t\t\tconst emitter = new Emitter<URI[]>();\n\t\t\tlet gone = false;\n\t\t\tconst reg = service.registerDecorationsProvider({\n\t\t\t\tlabel: 'Test',\n\t\t\t\tonDidChange: emitter.event,\n\t\t\t\tprovideDecorations(uri: URI) {\n\t\t\t\t\tif (!gone && uri.path.match(/file.ts$/)) {\n\t\t\t\t\t\treturn { tooltip: 'FOO', weight: 17, bubble: true };\n\t\t\t\t\t}\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst uri = URI.parse('foo:/folder/file.ts');\n\t\t\tconst uri2 = URI.parse('foo:/folder/');\n\t\t\tlet data = service.getDecoration(uri, true)!;\n\t\t\tassert.strictEqual(data.tooltip, 'FOO');\n\n\t\t\tdata = service.getDecoration(uri2, true)!;\n\t\t\tassert.ok(data.tooltip); // emphazied items...\n\n\t\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\t\tconst l = service.onDidChangeDecorations(e => {\n\t\t\t\t\tl.dispose();\n\t\t\t\t\ttry {\n\t\t\t\t\t\tassert.ok(e.affectsResource(uri));\n\t\t\t\t\t\tassert.ok(e.affectsResource(uri2));\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\treg.dispose();\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t\treg.dispose();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tgone = true;\n\t\t\t\temitter.fire([uri]);\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('FileDecorationProvider intermittently fails #133210', async function () {\n\n\t\tconst invokeOrder: string[] = [];\n\n\t\tstore.add(service.registerDecorationsProvider(new class {\n\t\t\tlabel = 'Provider-1';\n\t\t\tonDidChange = Event.None;\n\t\t\tprovideDecorations() {\n\t\t\t\tinvokeOrder.push(this.label);\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}));\n\n\t\tstore.add(service.registerDecorationsProvider(new class {\n\t\t\tlabel = 'Provider-2';\n\t\t\tonDidChange = Event.None;\n\t\t\tprovideDecorations() {\n\t\t\t\tinvokeOrder.push(this.label);\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}));\n\n\t\tservice.getDecoration(URI.parse('test://me/path'), false);\n\n\t\tassert.deepStrictEqual(invokeOrder, ['Provider-2', 'Provider-1']);\n\t});\n});\n"]}