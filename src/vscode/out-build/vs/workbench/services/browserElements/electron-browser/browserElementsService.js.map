{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/browserElements/electron-browser/browserElementsService.ts","vs/workbench/services/browserElements/electron-browser/browserElementsService.ts"],"names":[],"mappings":"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","file":"browserElementsService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { BrowserType, IElementData, INativeBrowserElementsService } from '../../../../platform/browserElements/common/browserElements.js';\nimport { IRectangle } from '../../../../platform/window/common/window.js';\nimport { ipcRenderer } from '../../../../base/parts/sandbox/electron-browser/globals.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { registerSingleton, InstantiationType } from '../../../../platform/instantiation/common/extensions.js';\nimport { IBrowserElementsService } from '../browser/browserElementsService.js';\nimport { IMainProcessService } from '../../../../platform/ipc/common/mainProcessService.js';\nimport { INativeWorkbenchEnvironmentService } from '../../environment/electron-browser/environmentService.js';\nimport { NativeBrowserElementsService } from '../../../../platform/browserElements/common/nativeBrowserElementsService.js';\n\nclass WorkbenchNativeBrowserElementsService extends NativeBrowserElementsService {\n\n\tconstructor(\n\t\t@INativeWorkbenchEnvironmentService environmentService: INativeWorkbenchEnvironmentService,\n\t\t@IMainProcessService mainProcessService: IMainProcessService\n\t) {\n\t\tsuper(environmentService.window.id, mainProcessService);\n\t}\n}\n\nlet cancelSelectionIdPool = 0;\nlet cancelAndDetachIdPool = 0;\n\nclass WorkbenchBrowserElementsService implements IBrowserElementsService {\n\t_serviceBrand: undefined;\n\n\tconstructor(\n\t\t@INativeBrowserElementsService private readonly simpleBrowser: INativeBrowserElementsService\n\t) { }\n\n\tasync startDebugSession(token: CancellationToken, browserType: BrowserType): Promise<void> {\n\t\tconst cancelAndDetachId = cancelAndDetachIdPool++;\n\t\tconst onCancelChannel = `vscode:cancelCurrentSession${cancelAndDetachId}`;\n\n\t\tconst disposable = token.onCancellationRequested(() => {\n\t\t\tipcRenderer.send(onCancelChannel, cancelAndDetachId);\n\t\t\tdisposable.dispose();\n\t\t});\n\t\ttry {\n\t\t\tawait this.simpleBrowser.startDebugSession(token, browserType, cancelAndDetachId);\n\t\t} catch (error) {\n\t\t\tdisposable.dispose();\n\t\t\tthrow new Error('No debug session target found', error);\n\t\t}\n\t}\n\n\tasync getElementData(rect: IRectangle, token: CancellationToken, browserType: BrowserType | undefined): Promise<IElementData | undefined> {\n\t\tif (!browserType) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst cancelSelectionId = cancelSelectionIdPool++;\n\t\tconst onCancelChannel = `vscode:cancelElementSelection${cancelSelectionId}`;\n\t\tconst disposable = token.onCancellationRequested(() => {\n\t\t\tipcRenderer.send(onCancelChannel, cancelSelectionId);\n\t\t});\n\t\ttry {\n\t\t\tconst elementData = await this.simpleBrowser.getElementData(rect, token, browserType, cancelSelectionId);\n\t\t\treturn elementData;\n\t\t} catch (error) {\n\t\t\tdisposable.dispose();\n\t\t\tthrow new Error(`Native Host: Error getting element data: ${error}`);\n\t\t} finally {\n\t\t\tdisposable.dispose();\n\t\t}\n\t}\n}\n\nregisterSingleton(IBrowserElementsService, WorkbenchBrowserElementsService, InstantiationType.Delayed);\nregisterSingleton(INativeBrowserElementsService, WorkbenchNativeBrowserElementsService, InstantiationType.Delayed);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { BrowserType, IElementData, INativeBrowserElementsService } from '../../../../platform/browserElements/common/browserElements.js';\nimport { IRectangle } from '../../../../platform/window/common/window.js';\nimport { ipcRenderer } from '../../../../base/parts/sandbox/electron-browser/globals.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { registerSingleton, InstantiationType } from '../../../../platform/instantiation/common/extensions.js';\nimport { IBrowserElementsService } from '../browser/browserElementsService.js';\nimport { IMainProcessService } from '../../../../platform/ipc/common/mainProcessService.js';\nimport { INativeWorkbenchEnvironmentService } from '../../environment/electron-browser/environmentService.js';\nimport { NativeBrowserElementsService } from '../../../../platform/browserElements/common/nativeBrowserElementsService.js';\n\nclass WorkbenchNativeBrowserElementsService extends NativeBrowserElementsService {\n\n\tconstructor(\n\t\t@INativeWorkbenchEnvironmentService environmentService: INativeWorkbenchEnvironmentService,\n\t\t@IMainProcessService mainProcessService: IMainProcessService\n\t) {\n\t\tsuper(environmentService.window.id, mainProcessService);\n\t}\n}\n\nlet cancelSelectionIdPool = 0;\nlet cancelAndDetachIdPool = 0;\n\nclass WorkbenchBrowserElementsService implements IBrowserElementsService {\n\t_serviceBrand: undefined;\n\n\tconstructor(\n\t\t@INativeBrowserElementsService private readonly simpleBrowser: INativeBrowserElementsService\n\t) { }\n\n\tasync startDebugSession(token: CancellationToken, browserType: BrowserType): Promise<void> {\n\t\tconst cancelAndDetachId = cancelAndDetachIdPool++;\n\t\tconst onCancelChannel = `vscode:cancelCurrentSession${cancelAndDetachId}`;\n\n\t\tconst disposable = token.onCancellationRequested(() => {\n\t\t\tipcRenderer.send(onCancelChannel, cancelAndDetachId);\n\t\t\tdisposable.dispose();\n\t\t});\n\t\ttry {\n\t\t\tawait this.simpleBrowser.startDebugSession(token, browserType, cancelAndDetachId);\n\t\t} catch (error) {\n\t\t\tdisposable.dispose();\n\t\t\tthrow new Error('No debug session target found', error);\n\t\t}\n\t}\n\n\tasync getElementData(rect: IRectangle, token: CancellationToken, browserType: BrowserType | undefined): Promise<IElementData | undefined> {\n\t\tif (!browserType) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst cancelSelectionId = cancelSelectionIdPool++;\n\t\tconst onCancelChannel = `vscode:cancelElementSelection${cancelSelectionId}`;\n\t\tconst disposable = token.onCancellationRequested(() => {\n\t\t\tipcRenderer.send(onCancelChannel, cancelSelectionId);\n\t\t});\n\t\ttry {\n\t\t\tconst elementData = await this.simpleBrowser.getElementData(rect, token, browserType, cancelSelectionId);\n\t\t\treturn elementData;\n\t\t} catch (error) {\n\t\t\tdisposable.dispose();\n\t\t\tthrow new Error(`Native Host: Error getting element data: ${error}`);\n\t\t} finally {\n\t\t\tdisposable.dispose();\n\t\t}\n\t}\n}\n\nregisterSingleton(IBrowserElementsService, WorkbenchBrowserElementsService, InstantiationType.Delayed);\nregisterSingleton(INativeBrowserElementsService, WorkbenchNativeBrowserElementsService, InstantiationType.Delayed);\n"]}