{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/workingCopy/test/browser/workingCopyEditorService.test.ts","vs/workbench/services/workingCopy/test/browser/workingCopyEditorService.test.ts"],"names":[],"mappings":"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","file":"workingCopyEditorService.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { EditorService } from '../../../editor/browser/editorService.js';\nimport { IEditorGroupsService } from '../../../editor/common/editorGroupsService.js';\nimport { UntitledTextEditorInput } from '../../../untitled/common/untitledTextEditorInput.js';\nimport { IWorkingCopyEditorHandler, WorkingCopyEditorService } from '../../common/workingCopyEditorService.js';\nimport { createEditorPart, registerTestResourceEditor, TestEditorService, TestServiceAccessor, workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\nimport { TestWorkingCopy } from '../../../../test/common/workbenchTestServices.js';\n\nsuite('WorkingCopyEditorService', () => {\n\n\tconst disposables = new DisposableStore();\n\n\tsetup(() => {\n\t\tdisposables.add(registerTestResourceEditor());\n\t});\n\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\ttest('registry - basics', () => {\n\t\tconst service = disposables.add(new WorkingCopyEditorService(disposables.add(new TestEditorService())));\n\n\t\tlet handlerEvent: IWorkingCopyEditorHandler | undefined = undefined;\n\t\tdisposables.add(service.onDidRegisterHandler(handler => {\n\t\t\thandlerEvent = handler;\n\t\t}));\n\n\t\tconst editorHandler: IWorkingCopyEditorHandler = {\n\t\t\thandles: workingCopy => false,\n\t\t\tisOpen: () => false,\n\t\t\tcreateEditor: workingCopy => { throw new Error(); }\n\t\t};\n\n\t\tdisposables.add(service.registerHandler(editorHandler));\n\n\t\tassert.strictEqual(handlerEvent, editorHandler);\n\t});\n\n\ttest('findEditor', async () => {\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tconst part = await createEditorPart(instantiationService, disposables);\n\t\tinstantiationService.stub(IEditorGroupsService, part);\n\n\t\tconst editorService = disposables.add(instantiationService.createInstance(EditorService, undefined));\n\t\tconst accessor = instantiationService.createInstance(TestServiceAccessor);\n\n\t\tconst service = disposables.add(new WorkingCopyEditorService(editorService));\n\n\t\tconst resource = URI.parse('custom://some/folder/custom.txt');\n\t\tconst testWorkingCopy = disposables.add(new TestWorkingCopy(resource, false, 'testWorkingCopyTypeId1'));\n\n\t\tassert.strictEqual(service.findEditor(testWorkingCopy), undefined);\n\n\t\tconst editorHandler: IWorkingCopyEditorHandler = {\n\t\t\thandles: workingCopy => workingCopy === testWorkingCopy,\n\t\t\tisOpen: (workingCopy, editor) => workingCopy === testWorkingCopy,\n\t\t\tcreateEditor: workingCopy => { throw new Error(); }\n\t\t};\n\n\t\tdisposables.add(service.registerHandler(editorHandler));\n\n\t\tconst editor1 = disposables.add(instantiationService.createInstance(UntitledTextEditorInput, accessor.untitledTextEditorService.create({ initialValue: 'foo' })));\n\t\tconst editor2 = disposables.add(instantiationService.createInstance(UntitledTextEditorInput, accessor.untitledTextEditorService.create({ initialValue: 'foo' })));\n\n\t\tawait editorService.openEditors([{ editor: editor1 }, { editor: editor2 }]);\n\n\t\tassert.ok(service.findEditor(testWorkingCopy));\n\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { EditorService } from '../../../editor/browser/editorService.js';\nimport { IEditorGroupsService } from '../../../editor/common/editorGroupsService.js';\nimport { UntitledTextEditorInput } from '../../../untitled/common/untitledTextEditorInput.js';\nimport { IWorkingCopyEditorHandler, WorkingCopyEditorService } from '../../common/workingCopyEditorService.js';\nimport { createEditorPart, registerTestResourceEditor, TestEditorService, TestServiceAccessor, workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\nimport { TestWorkingCopy } from '../../../../test/common/workbenchTestServices.js';\n\nsuite('WorkingCopyEditorService', () => {\n\n\tconst disposables = new DisposableStore();\n\n\tsetup(() => {\n\t\tdisposables.add(registerTestResourceEditor());\n\t});\n\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\ttest('registry - basics', () => {\n\t\tconst service = disposables.add(new WorkingCopyEditorService(disposables.add(new TestEditorService())));\n\n\t\tlet handlerEvent: IWorkingCopyEditorHandler | undefined = undefined;\n\t\tdisposables.add(service.onDidRegisterHandler(handler => {\n\t\t\thandlerEvent = handler;\n\t\t}));\n\n\t\tconst editorHandler: IWorkingCopyEditorHandler = {\n\t\t\thandles: workingCopy => false,\n\t\t\tisOpen: () => false,\n\t\t\tcreateEditor: workingCopy => { throw new Error(); }\n\t\t};\n\n\t\tdisposables.add(service.registerHandler(editorHandler));\n\n\t\tassert.strictEqual(handlerEvent, editorHandler);\n\t});\n\n\ttest('findEditor', async () => {\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tconst part = await createEditorPart(instantiationService, disposables);\n\t\tinstantiationService.stub(IEditorGroupsService, part);\n\n\t\tconst editorService = disposables.add(instantiationService.createInstance(EditorService, undefined));\n\t\tconst accessor = instantiationService.createInstance(TestServiceAccessor);\n\n\t\tconst service = disposables.add(new WorkingCopyEditorService(editorService));\n\n\t\tconst resource = URI.parse('custom://some/folder/custom.txt');\n\t\tconst testWorkingCopy = disposables.add(new TestWorkingCopy(resource, false, 'testWorkingCopyTypeId1'));\n\n\t\tassert.strictEqual(service.findEditor(testWorkingCopy), undefined);\n\n\t\tconst editorHandler: IWorkingCopyEditorHandler = {\n\t\t\thandles: workingCopy => workingCopy === testWorkingCopy,\n\t\t\tisOpen: (workingCopy, editor) => workingCopy === testWorkingCopy,\n\t\t\tcreateEditor: workingCopy => { throw new Error(); }\n\t\t};\n\n\t\tdisposables.add(service.registerHandler(editorHandler));\n\n\t\tconst editor1 = disposables.add(instantiationService.createInstance(UntitledTextEditorInput, accessor.untitledTextEditorService.create({ initialValue: 'foo' })));\n\t\tconst editor2 = disposables.add(instantiationService.createInstance(UntitledTextEditorInput, accessor.untitledTextEditorService.create({ initialValue: 'foo' })));\n\n\t\tawait editorService.openEditors([{ editor: editor1 }, { editor: editor2 }]);\n\n\t\tassert.ok(service.findEditor(testWorkingCopy));\n\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"]}