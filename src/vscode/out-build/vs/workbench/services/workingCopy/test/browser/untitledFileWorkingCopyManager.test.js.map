{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/workingCopy/test/browser/untitledFileWorkingCopyManager.test.ts","vs/workbench/services/workingCopy/test/browser/untitledFileWorkingCopyManager.test.ts"],"names":[],"mappings":"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","file":"untitledFileWorkingCopyManager.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { bufferToStream, VSBuffer } from '../../../../../base/common/buffer.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { FileWorkingCopyManager, IFileWorkingCopyManager } from '../../common/fileWorkingCopyManager.js';\nimport { NO_TYPE_ID, WorkingCopyCapabilities } from '../../common/workingCopy.js';\nimport { TestStoredFileWorkingCopyModel, TestStoredFileWorkingCopyModelFactory } from './storedFileWorkingCopy.test.js';\nimport { TestUntitledFileWorkingCopyModel, TestUntitledFileWorkingCopyModelFactory } from './untitledFileWorkingCopy.test.js';\nimport { TestInMemoryFileSystemProvider, TestServiceAccessor, workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\n\nsuite('UntitledFileWorkingCopyManager', () => {\n\n\tconst disposables = new DisposableStore();\n\tlet instantiationService: IInstantiationService;\n\tlet accessor: TestServiceAccessor;\n\n\tlet manager: IFileWorkingCopyManager<TestStoredFileWorkingCopyModel, TestUntitledFileWorkingCopyModel>;\n\n\tsetup(() => {\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\taccessor = instantiationService.createInstance(TestServiceAccessor);\n\n\t\tdisposables.add(accessor.fileService.registerProvider(Schemas.file, disposables.add(new TestInMemoryFileSystemProvider())));\n\t\tdisposables.add(accessor.fileService.registerProvider(Schemas.vscodeRemote, disposables.add(new TestInMemoryFileSystemProvider())));\n\n\t\tmanager = disposables.add(new FileWorkingCopyManager(\n\t\t\t'testUntitledFileWorkingCopyType',\n\t\t\tnew TestStoredFileWorkingCopyModelFactory(),\n\t\t\tnew TestUntitledFileWorkingCopyModelFactory(),\n\t\t\taccessor.fileService, accessor.lifecycleService, accessor.labelService, accessor.logService,\n\t\t\taccessor.workingCopyFileService, accessor.workingCopyBackupService, accessor.uriIdentityService, accessor.fileDialogService,\n\t\t\taccessor.filesConfigurationService, accessor.workingCopyService, accessor.notificationService,\n\t\t\taccessor.workingCopyEditorService, accessor.editorService, accessor.elevatedFileService, accessor.pathService,\n\t\t\taccessor.environmentService, accessor.dialogService, accessor.decorationsService, accessor.progressService\n\t\t));\n\t});\n\n\tteardown(() => {\n\t\tfor (const workingCopy of [...manager.untitled.workingCopies, ...manager.stored.workingCopies]) {\n\t\t\tworkingCopy.dispose();\n\t\t}\n\n\t\tdisposables.clear();\n\t});\n\n\ttest('basics', async () => {\n\t\tlet createCounter = 0;\n\t\tdisposables.add(manager.untitled.onDidCreate(e => {\n\t\t\tcreateCounter++;\n\t\t}));\n\n\t\tlet disposeCounter = 0;\n\t\tdisposables.add(manager.untitled.onWillDispose(e => {\n\t\t\tdisposeCounter++;\n\t\t}));\n\n\t\tlet dirtyCounter = 0;\n\t\tdisposables.add(manager.untitled.onDidChangeDirty(e => {\n\t\t\tdirtyCounter++;\n\t\t}));\n\n\t\tassert.strictEqual(accessor.workingCopyService.workingCopies.length, 0);\n\t\tassert.strictEqual(manager.untitled.workingCopies.length, 0);\n\n\t\tassert.strictEqual(manager.untitled.get(URI.file('/some/invalidPath')), undefined);\n\t\tassert.strictEqual(manager.untitled.get(URI.file('/some/invalidPath').with({ scheme: Schemas.untitled })), undefined);\n\n\t\tconst workingCopy1 = await manager.untitled.resolve();\n\t\tconst workingCopy2 = await manager.untitled.resolve();\n\n\t\tassert.strictEqual(workingCopy1.typeId, 'testUntitledFileWorkingCopyType');\n\t\tassert.strictEqual(workingCopy1.resource.scheme, Schemas.untitled);\n\n\t\tassert.strictEqual(createCounter, 2);\n\n\t\tassert.strictEqual(manager.untitled.get(workingCopy1.resource), workingCopy1);\n\t\tassert.strictEqual(manager.untitled.get(workingCopy2.resource), workingCopy2);\n\n\t\tassert.strictEqual(accessor.workingCopyService.workingCopies.length, 2);\n\t\tassert.strictEqual(manager.untitled.workingCopies.length, 2);\n\n\t\tassert.notStrictEqual(workingCopy1.resource.toString(), workingCopy2.resource.toString());\n\n\t\tfor (const workingCopy of [workingCopy1, workingCopy2]) {\n\t\t\tassert.strictEqual(workingCopy.capabilities, WorkingCopyCapabilities.Untitled);\n\t\t\tassert.strictEqual(workingCopy.isDirty(), false);\n\t\t\tassert.strictEqual(workingCopy.isModified(), false);\n\t\t\tassert.ok(workingCopy.model);\n\t\t}\n\n\t\tworkingCopy1.model?.updateContents('Hello World');\n\n\t\tassert.strictEqual(workingCopy1.isDirty(), true);\n\t\tassert.strictEqual(workingCopy1.isModified(), true);\n\t\tassert.strictEqual(dirtyCounter, 1);\n\n\t\tworkingCopy1.model?.updateContents(''); // change to empty clears dirty/modified flags\n\t\tassert.strictEqual(workingCopy1.isDirty(), false);\n\t\tassert.strictEqual(workingCopy1.isModified(), false);\n\t\tassert.strictEqual(dirtyCounter, 2);\n\n\t\tworkingCopy2.model?.fireContentChangeEvent({ isInitial: false });\n\t\tassert.strictEqual(workingCopy2.isDirty(), true);\n\t\tassert.strictEqual(workingCopy2.isModified(), true);\n\t\tassert.strictEqual(dirtyCounter, 3);\n\n\t\tworkingCopy1.dispose();\n\n\t\tassert.strictEqual(manager.untitled.workingCopies.length, 1);\n\t\tassert.strictEqual(manager.untitled.get(workingCopy1.resource), undefined);\n\n\t\tworkingCopy2.dispose();\n\n\t\tassert.strictEqual(manager.untitled.workingCopies.length, 0);\n\t\tassert.strictEqual(manager.untitled.get(workingCopy2.resource), undefined);\n\n\t\tassert.strictEqual(disposeCounter, 2);\n\t});\n\n\ttest('dirty - scratchpads are never dirty', async () => {\n\t\tlet dirtyCounter = 0;\n\t\tdisposables.add(manager.untitled.onDidChangeDirty(e => {\n\t\t\tdirtyCounter++;\n\t\t}));\n\n\t\tconst workingCopy1 = await manager.resolve({\n\t\t\tuntitledResource: URI.from({ scheme: Schemas.untitled, path: `/myscratchpad` }),\n\t\t\tisScratchpad: true\n\t\t});\n\n\t\tassert.strictEqual(workingCopy1.resource.scheme, Schemas.untitled);\n\t\tassert.strictEqual(manager.untitled.workingCopies.length, 1);\n\n\t\tworkingCopy1.model?.updateContents('contents');\n\t\tassert.strictEqual(workingCopy1.isDirty(), false);\n\t\tassert.strictEqual(workingCopy1.isModified(), true);\n\n\t\tworkingCopy1.model?.fireContentChangeEvent({ isInitial: true });\n\t\tassert.strictEqual(workingCopy1.isDirty(), false);\n\t\tassert.strictEqual(workingCopy1.isModified(), false);\n\n\t\tassert.strictEqual(dirtyCounter, 0);\n\n\t\tworkingCopy1.dispose();\n\t});\n\n\ttest('resolve - with initial value', async () => {\n\t\tlet dirtyCounter = 0;\n\t\tdisposables.add(manager.untitled.onDidChangeDirty(e => {\n\t\t\tdirtyCounter++;\n\t\t}));\n\n\t\tconst workingCopy1 = await manager.untitled.resolve({ contents: { value: bufferToStream(VSBuffer.fromString('Hello World')) } });\n\n\t\tassert.strictEqual(workingCopy1.isModified(), true);\n\t\tassert.strictEqual(workingCopy1.isDirty(), true);\n\t\tassert.strictEqual(dirtyCounter, 1);\n\t\tassert.strictEqual(workingCopy1.model?.contents, 'Hello World');\n\n\t\tworkingCopy1.dispose();\n\n\t\tconst workingCopy2 = await manager.untitled.resolve({ contents: { value: bufferToStream(VSBuffer.fromString('Hello World')), markModified: true } });\n\n\t\tassert.strictEqual(workingCopy2.isModified(), true);\n\t\tassert.strictEqual(workingCopy2.isDirty(), true);\n\t\tassert.strictEqual(dirtyCounter, 2);\n\t\tassert.strictEqual(workingCopy2.model?.contents, 'Hello World');\n\n\t\tworkingCopy2.dispose();\n\t});\n\n\ttest('resolve - with initial value but markDirty: false', async () => {\n\t\tlet dirtyCounter = 0;\n\t\tdisposables.add(manager.untitled.onDidChangeDirty(e => {\n\t\t\tdirtyCounter++;\n\t\t}));\n\n\t\tconst workingCopy = await manager.untitled.resolve({ contents: { value: bufferToStream(VSBuffer.fromString('Hello World')), markModified: false } });\n\n\t\tassert.strictEqual(workingCopy.isModified(), false);\n\t\tassert.strictEqual(workingCopy.isDirty(), false);\n\t\tassert.strictEqual(dirtyCounter, 0);\n\t\tassert.strictEqual(workingCopy.model?.contents, 'Hello World');\n\n\t\tworkingCopy.dispose();\n\t});\n\n\ttest('resolve begins counter from 1 for disposed untitled', async () => {\n\t\tconst untitled1 = await manager.untitled.resolve();\n\t\tuntitled1.dispose();\n\n\t\tconst untitled1Again = disposables.add(await manager.untitled.resolve());\n\t\tassert.strictEqual(untitled1.resource.toString(), untitled1Again.resource.toString());\n\t});\n\n\ttest('resolve - existing', async () => {\n\t\tlet createCounter = 0;\n\t\tdisposables.add(manager.untitled.onDidCreate(e => {\n\t\t\tcreateCounter++;\n\t\t}));\n\n\t\tconst workingCopy1 = await manager.untitled.resolve();\n\t\tassert.strictEqual(createCounter, 1);\n\n\t\tconst workingCopy2 = await manager.untitled.resolve({ untitledResource: workingCopy1.resource });\n\t\tassert.strictEqual(workingCopy1, workingCopy2);\n\t\tassert.strictEqual(createCounter, 1);\n\n\t\tconst workingCopy3 = await manager.untitled.resolve({ untitledResource: URI.file('/invalid/untitled') });\n\t\tassert.strictEqual(workingCopy3.resource.scheme, Schemas.untitled);\n\n\t\tworkingCopy1.dispose();\n\t\tworkingCopy2.dispose();\n\t\tworkingCopy3.dispose();\n\t});\n\n\ttest('resolve - untitled resource used for new working copy', async () => {\n\t\tconst invalidUntitledResource = URI.file('my/untitled.txt');\n\t\tconst validUntitledResource = invalidUntitledResource.with({ scheme: Schemas.untitled });\n\n\t\tconst workingCopy1 = await manager.untitled.resolve({ untitledResource: invalidUntitledResource });\n\t\tassert.notStrictEqual(workingCopy1.resource.toString(), invalidUntitledResource.toString());\n\n\t\tconst workingCopy2 = await manager.untitled.resolve({ untitledResource: validUntitledResource });\n\t\tassert.strictEqual(workingCopy2.resource.toString(), validUntitledResource.toString());\n\n\t\tworkingCopy1.dispose();\n\t\tworkingCopy2.dispose();\n\t});\n\n\ttest('resolve - with associated resource', async () => {\n\t\tconst workingCopy = await manager.untitled.resolve({ associatedResource: { path: '/some/associated.txt' } });\n\n\t\tassert.strictEqual(workingCopy.hasAssociatedFilePath, true);\n\t\tassert.strictEqual(workingCopy.resource.path, '/some/associated.txt');\n\n\t\tworkingCopy.dispose();\n\t});\n\n\ttest('save - without associated resource', async () => {\n\t\tlet savedEvent: { source: URI; target: URI } | undefined = undefined;\n\t\tdisposables.add(manager.untitled.onDidSave(e => {\n\t\t\tsavedEvent = e;\n\t\t}));\n\n\t\tconst workingCopy = await manager.untitled.resolve();\n\t\tworkingCopy.model?.updateContents('Simple Save');\n\n\t\taccessor.fileDialogService.setPickFileToSave(URI.file('simple/file.txt'));\n\n\t\tconst result = await workingCopy.save();\n\t\tassert.ok(result);\n\n\t\tassert.strictEqual(manager.untitled.get(workingCopy.resource), undefined);\n\t\tassert.strictEqual(savedEvent!.source.toString(), workingCopy.resource.toString());\n\t\tassert.strictEqual(savedEvent!.target.toString(), URI.file('simple/file.txt').toString());\n\n\t\tworkingCopy.dispose();\n\t});\n\n\ttest('save - with associated resource', async () => {\n\t\tlet savedEvent: { source: URI; target: URI } | undefined = undefined;\n\t\tdisposables.add(manager.untitled.onDidSave(e => {\n\t\t\tsavedEvent = e;\n\t\t}));\n\n\t\tconst workingCopy = await manager.untitled.resolve({ associatedResource: { path: '/some/associated.txt' } });\n\t\tworkingCopy.model?.updateContents('Simple Save with associated resource');\n\n\t\taccessor.fileService.notExistsSet.set(URI.from({ scheme: Schemas.file, path: '/some/associated.txt' }), true);\n\n\t\tconst result = await workingCopy.save();\n\t\tassert.ok(result);\n\n\t\tassert.strictEqual(manager.untitled.get(workingCopy.resource), undefined);\n\t\tassert.strictEqual(savedEvent!.source.toString(), workingCopy.resource.toString());\n\t\tassert.strictEqual(savedEvent!.target.toString(), URI.file('/some/associated.txt').toString());\n\n\t\tworkingCopy.dispose();\n\t});\n\n\ttest('save - with associated resource (asks to overwrite)', async () => {\n\t\tconst workingCopy = await manager.untitled.resolve({ associatedResource: { path: '/some/associated.txt' } });\n\t\tworkingCopy.model?.updateContents('Simple Save with associated resource');\n\n\t\tlet result = await workingCopy.save();\n\t\tassert.ok(!result); // not confirmed\n\n\t\tassert.strictEqual(manager.untitled.get(workingCopy.resource), workingCopy);\n\n\t\taccessor.dialogService.setConfirmResult({ confirmed: true });\n\n\t\tresult = await workingCopy.save();\n\t\tassert.ok(result); // confirmed\n\n\t\tassert.strictEqual(manager.untitled.get(workingCopy.resource), undefined);\n\n\t\tworkingCopy.dispose();\n\t});\n\n\ttest('destroy', async () => {\n\t\tassert.strictEqual(accessor.workingCopyService.workingCopies.length, 0);\n\n\t\tawait manager.untitled.resolve();\n\t\tawait manager.untitled.resolve();\n\t\tawait manager.untitled.resolve();\n\n\t\tassert.strictEqual(accessor.workingCopyService.workingCopies.length, 3);\n\t\tassert.strictEqual(manager.untitled.workingCopies.length, 3);\n\n\t\tawait manager.untitled.destroy();\n\n\t\tassert.strictEqual(accessor.workingCopyService.workingCopies.length, 0);\n\t\tassert.strictEqual(manager.untitled.workingCopies.length, 0);\n\t});\n\n\ttest('manager with different types produce different URIs', async () => {\n\t\ttry {\n\t\t\tmanager = disposables.add(new FileWorkingCopyManager(\n\t\t\t\t'someOtherUntitledTypeId',\n\t\t\t\tnew TestStoredFileWorkingCopyModelFactory(),\n\t\t\t\tnew TestUntitledFileWorkingCopyModelFactory(),\n\t\t\t\taccessor.fileService, accessor.lifecycleService, accessor.labelService, accessor.logService,\n\t\t\t\taccessor.workingCopyFileService, accessor.workingCopyBackupService, accessor.uriIdentityService, accessor.fileDialogService,\n\t\t\t\taccessor.filesConfigurationService, accessor.workingCopyService, accessor.notificationService,\n\t\t\t\taccessor.workingCopyEditorService, accessor.editorService, accessor.elevatedFileService, accessor.pathService,\n\t\t\t\taccessor.environmentService, accessor.dialogService, accessor.decorationsService, accessor.progressService\n\t\t\t));\n\n\t\t\tconst untitled1OriginalType = disposables.add(await manager.untitled.resolve());\n\t\t\tconst untitled1OtherType = disposables.add(await manager.untitled.resolve());\n\n\t\t\tassert.notStrictEqual(untitled1OriginalType.resource.toString(), untitled1OtherType.resource.toString());\n\t\t} finally {\n\t\t\tmanager.destroy();\n\t\t}\n\t});\n\n\ttest('manager without typeId produces backwards compatible URIs', async () => {\n\t\ttry {\n\t\t\tmanager = disposables.add(new FileWorkingCopyManager(\n\t\t\t\tNO_TYPE_ID,\n\t\t\t\tnew TestStoredFileWorkingCopyModelFactory(),\n\t\t\t\tnew TestUntitledFileWorkingCopyModelFactory(),\n\t\t\t\taccessor.fileService, accessor.lifecycleService, accessor.labelService, accessor.logService,\n\t\t\t\taccessor.workingCopyFileService, accessor.workingCopyBackupService, accessor.uriIdentityService, accessor.fileDialogService,\n\t\t\t\taccessor.filesConfigurationService, accessor.workingCopyService, accessor.notificationService,\n\t\t\t\taccessor.workingCopyEditorService, accessor.editorService, accessor.elevatedFileService, accessor.pathService,\n\t\t\t\taccessor.environmentService, accessor.dialogService, accessor.decorationsService, accessor.progressService\n\t\t\t));\n\n\t\t\tconst result = disposables.add(await manager.untitled.resolve());\n\t\t\tassert.strictEqual(result.resource.scheme, Schemas.untitled);\n\t\t\tassert.ok(result.resource.path.length > 0);\n\t\t\tassert.strictEqual(result.resource.query, '');\n\t\t\tassert.strictEqual(result.resource.authority, '');\n\t\t\tassert.strictEqual(result.resource.fragment, '');\n\t\t} finally {\n\t\t\tmanager.destroy();\n\t\t}\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { bufferToStream, VSBuffer } from '../../../../../base/common/buffer.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { FileWorkingCopyManager, IFileWorkingCopyManager } from '../../common/fileWorkingCopyManager.js';\nimport { NO_TYPE_ID, WorkingCopyCapabilities } from '../../common/workingCopy.js';\nimport { TestStoredFileWorkingCopyModel, TestStoredFileWorkingCopyModelFactory } from './storedFileWorkingCopy.test.js';\nimport { TestUntitledFileWorkingCopyModel, TestUntitledFileWorkingCopyModelFactory } from './untitledFileWorkingCopy.test.js';\nimport { TestInMemoryFileSystemProvider, TestServiceAccessor, workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\n\nsuite('UntitledFileWorkingCopyManager', () => {\n\n\tconst disposables = new DisposableStore();\n\tlet instantiationService: IInstantiationService;\n\tlet accessor: TestServiceAccessor;\n\n\tlet manager: IFileWorkingCopyManager<TestStoredFileWorkingCopyModel, TestUntitledFileWorkingCopyModel>;\n\n\tsetup(() => {\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\taccessor = instantiationService.createInstance(TestServiceAccessor);\n\n\t\tdisposables.add(accessor.fileService.registerProvider(Schemas.file, disposables.add(new TestInMemoryFileSystemProvider())));\n\t\tdisposables.add(accessor.fileService.registerProvider(Schemas.vscodeRemote, disposables.add(new TestInMemoryFileSystemProvider())));\n\n\t\tmanager = disposables.add(new FileWorkingCopyManager(\n\t\t\t'testUntitledFileWorkingCopyType',\n\t\t\tnew TestStoredFileWorkingCopyModelFactory(),\n\t\t\tnew TestUntitledFileWorkingCopyModelFactory(),\n\t\t\taccessor.fileService, accessor.lifecycleService, accessor.labelService, accessor.logService,\n\t\t\taccessor.workingCopyFileService, accessor.workingCopyBackupService, accessor.uriIdentityService, accessor.fileDialogService,\n\t\t\taccessor.filesConfigurationService, accessor.workingCopyService, accessor.notificationService,\n\t\t\taccessor.workingCopyEditorService, accessor.editorService, accessor.elevatedFileService, accessor.pathService,\n\t\t\taccessor.environmentService, accessor.dialogService, accessor.decorationsService, accessor.progressService\n\t\t));\n\t});\n\n\tteardown(() => {\n\t\tfor (const workingCopy of [...manager.untitled.workingCopies, ...manager.stored.workingCopies]) {\n\t\t\tworkingCopy.dispose();\n\t\t}\n\n\t\tdisposables.clear();\n\t});\n\n\ttest('basics', async () => {\n\t\tlet createCounter = 0;\n\t\tdisposables.add(manager.untitled.onDidCreate(e => {\n\t\t\tcreateCounter++;\n\t\t}));\n\n\t\tlet disposeCounter = 0;\n\t\tdisposables.add(manager.untitled.onWillDispose(e => {\n\t\t\tdisposeCounter++;\n\t\t}));\n\n\t\tlet dirtyCounter = 0;\n\t\tdisposables.add(manager.untitled.onDidChangeDirty(e => {\n\t\t\tdirtyCounter++;\n\t\t}));\n\n\t\tassert.strictEqual(accessor.workingCopyService.workingCopies.length, 0);\n\t\tassert.strictEqual(manager.untitled.workingCopies.length, 0);\n\n\t\tassert.strictEqual(manager.untitled.get(URI.file('/some/invalidPath')), undefined);\n\t\tassert.strictEqual(manager.untitled.get(URI.file('/some/invalidPath').with({ scheme: Schemas.untitled })), undefined);\n\n\t\tconst workingCopy1 = await manager.untitled.resolve();\n\t\tconst workingCopy2 = await manager.untitled.resolve();\n\n\t\tassert.strictEqual(workingCopy1.typeId, 'testUntitledFileWorkingCopyType');\n\t\tassert.strictEqual(workingCopy1.resource.scheme, Schemas.untitled);\n\n\t\tassert.strictEqual(createCounter, 2);\n\n\t\tassert.strictEqual(manager.untitled.get(workingCopy1.resource), workingCopy1);\n\t\tassert.strictEqual(manager.untitled.get(workingCopy2.resource), workingCopy2);\n\n\t\tassert.strictEqual(accessor.workingCopyService.workingCopies.length, 2);\n\t\tassert.strictEqual(manager.untitled.workingCopies.length, 2);\n\n\t\tassert.notStrictEqual(workingCopy1.resource.toString(), workingCopy2.resource.toString());\n\n\t\tfor (const workingCopy of [workingCopy1, workingCopy2]) {\n\t\t\tassert.strictEqual(workingCopy.capabilities, WorkingCopyCapabilities.Untitled);\n\t\t\tassert.strictEqual(workingCopy.isDirty(), false);\n\t\t\tassert.strictEqual(workingCopy.isModified(), false);\n\t\t\tassert.ok(workingCopy.model);\n\t\t}\n\n\t\tworkingCopy1.model?.updateContents('Hello World');\n\n\t\tassert.strictEqual(workingCopy1.isDirty(), true);\n\t\tassert.strictEqual(workingCopy1.isModified(), true);\n\t\tassert.strictEqual(dirtyCounter, 1);\n\n\t\tworkingCopy1.model?.updateContents(''); // change to empty clears dirty/modified flags\n\t\tassert.strictEqual(workingCopy1.isDirty(), false);\n\t\tassert.strictEqual(workingCopy1.isModified(), false);\n\t\tassert.strictEqual(dirtyCounter, 2);\n\n\t\tworkingCopy2.model?.fireContentChangeEvent({ isInitial: false });\n\t\tassert.strictEqual(workingCopy2.isDirty(), true);\n\t\tassert.strictEqual(workingCopy2.isModified(), true);\n\t\tassert.strictEqual(dirtyCounter, 3);\n\n\t\tworkingCopy1.dispose();\n\n\t\tassert.strictEqual(manager.untitled.workingCopies.length, 1);\n\t\tassert.strictEqual(manager.untitled.get(workingCopy1.resource), undefined);\n\n\t\tworkingCopy2.dispose();\n\n\t\tassert.strictEqual(manager.untitled.workingCopies.length, 0);\n\t\tassert.strictEqual(manager.untitled.get(workingCopy2.resource), undefined);\n\n\t\tassert.strictEqual(disposeCounter, 2);\n\t});\n\n\ttest('dirty - scratchpads are never dirty', async () => {\n\t\tlet dirtyCounter = 0;\n\t\tdisposables.add(manager.untitled.onDidChangeDirty(e => {\n\t\t\tdirtyCounter++;\n\t\t}));\n\n\t\tconst workingCopy1 = await manager.resolve({\n\t\t\tuntitledResource: URI.from({ scheme: Schemas.untitled, path: `/myscratchpad` }),\n\t\t\tisScratchpad: true\n\t\t});\n\n\t\tassert.strictEqual(workingCopy1.resource.scheme, Schemas.untitled);\n\t\tassert.strictEqual(manager.untitled.workingCopies.length, 1);\n\n\t\tworkingCopy1.model?.updateContents('contents');\n\t\tassert.strictEqual(workingCopy1.isDirty(), false);\n\t\tassert.strictEqual(workingCopy1.isModified(), true);\n\n\t\tworkingCopy1.model?.fireContentChangeEvent({ isInitial: true });\n\t\tassert.strictEqual(workingCopy1.isDirty(), false);\n\t\tassert.strictEqual(workingCopy1.isModified(), false);\n\n\t\tassert.strictEqual(dirtyCounter, 0);\n\n\t\tworkingCopy1.dispose();\n\t});\n\n\ttest('resolve - with initial value', async () => {\n\t\tlet dirtyCounter = 0;\n\t\tdisposables.add(manager.untitled.onDidChangeDirty(e => {\n\t\t\tdirtyCounter++;\n\t\t}));\n\n\t\tconst workingCopy1 = await manager.untitled.resolve({ contents: { value: bufferToStream(VSBuffer.fromString('Hello World')) } });\n\n\t\tassert.strictEqual(workingCopy1.isModified(), true);\n\t\tassert.strictEqual(workingCopy1.isDirty(), true);\n\t\tassert.strictEqual(dirtyCounter, 1);\n\t\tassert.strictEqual(workingCopy1.model?.contents, 'Hello World');\n\n\t\tworkingCopy1.dispose();\n\n\t\tconst workingCopy2 = await manager.untitled.resolve({ contents: { value: bufferToStream(VSBuffer.fromString('Hello World')), markModified: true } });\n\n\t\tassert.strictEqual(workingCopy2.isModified(), true);\n\t\tassert.strictEqual(workingCopy2.isDirty(), true);\n\t\tassert.strictEqual(dirtyCounter, 2);\n\t\tassert.strictEqual(workingCopy2.model?.contents, 'Hello World');\n\n\t\tworkingCopy2.dispose();\n\t});\n\n\ttest('resolve - with initial value but markDirty: false', async () => {\n\t\tlet dirtyCounter = 0;\n\t\tdisposables.add(manager.untitled.onDidChangeDirty(e => {\n\t\t\tdirtyCounter++;\n\t\t}));\n\n\t\tconst workingCopy = await manager.untitled.resolve({ contents: { value: bufferToStream(VSBuffer.fromString('Hello World')), markModified: false } });\n\n\t\tassert.strictEqual(workingCopy.isModified(), false);\n\t\tassert.strictEqual(workingCopy.isDirty(), false);\n\t\tassert.strictEqual(dirtyCounter, 0);\n\t\tassert.strictEqual(workingCopy.model?.contents, 'Hello World');\n\n\t\tworkingCopy.dispose();\n\t});\n\n\ttest('resolve begins counter from 1 for disposed untitled', async () => {\n\t\tconst untitled1 = await manager.untitled.resolve();\n\t\tuntitled1.dispose();\n\n\t\tconst untitled1Again = disposables.add(await manager.untitled.resolve());\n\t\tassert.strictEqual(untitled1.resource.toString(), untitled1Again.resource.toString());\n\t});\n\n\ttest('resolve - existing', async () => {\n\t\tlet createCounter = 0;\n\t\tdisposables.add(manager.untitled.onDidCreate(e => {\n\t\t\tcreateCounter++;\n\t\t}));\n\n\t\tconst workingCopy1 = await manager.untitled.resolve();\n\t\tassert.strictEqual(createCounter, 1);\n\n\t\tconst workingCopy2 = await manager.untitled.resolve({ untitledResource: workingCopy1.resource });\n\t\tassert.strictEqual(workingCopy1, workingCopy2);\n\t\tassert.strictEqual(createCounter, 1);\n\n\t\tconst workingCopy3 = await manager.untitled.resolve({ untitledResource: URI.file('/invalid/untitled') });\n\t\tassert.strictEqual(workingCopy3.resource.scheme, Schemas.untitled);\n\n\t\tworkingCopy1.dispose();\n\t\tworkingCopy2.dispose();\n\t\tworkingCopy3.dispose();\n\t});\n\n\ttest('resolve - untitled resource used for new working copy', async () => {\n\t\tconst invalidUntitledResource = URI.file('my/untitled.txt');\n\t\tconst validUntitledResource = invalidUntitledResource.with({ scheme: Schemas.untitled });\n\n\t\tconst workingCopy1 = await manager.untitled.resolve({ untitledResource: invalidUntitledResource });\n\t\tassert.notStrictEqual(workingCopy1.resource.toString(), invalidUntitledResource.toString());\n\n\t\tconst workingCopy2 = await manager.untitled.resolve({ untitledResource: validUntitledResource });\n\t\tassert.strictEqual(workingCopy2.resource.toString(), validUntitledResource.toString());\n\n\t\tworkingCopy1.dispose();\n\t\tworkingCopy2.dispose();\n\t});\n\n\ttest('resolve - with associated resource', async () => {\n\t\tconst workingCopy = await manager.untitled.resolve({ associatedResource: { path: '/some/associated.txt' } });\n\n\t\tassert.strictEqual(workingCopy.hasAssociatedFilePath, true);\n\t\tassert.strictEqual(workingCopy.resource.path, '/some/associated.txt');\n\n\t\tworkingCopy.dispose();\n\t});\n\n\ttest('save - without associated resource', async () => {\n\t\tlet savedEvent: { source: URI; target: URI } | undefined = undefined;\n\t\tdisposables.add(manager.untitled.onDidSave(e => {\n\t\t\tsavedEvent = e;\n\t\t}));\n\n\t\tconst workingCopy = await manager.untitled.resolve();\n\t\tworkingCopy.model?.updateContents('Simple Save');\n\n\t\taccessor.fileDialogService.setPickFileToSave(URI.file('simple/file.txt'));\n\n\t\tconst result = await workingCopy.save();\n\t\tassert.ok(result);\n\n\t\tassert.strictEqual(manager.untitled.get(workingCopy.resource), undefined);\n\t\tassert.strictEqual(savedEvent!.source.toString(), workingCopy.resource.toString());\n\t\tassert.strictEqual(savedEvent!.target.toString(), URI.file('simple/file.txt').toString());\n\n\t\tworkingCopy.dispose();\n\t});\n\n\ttest('save - with associated resource', async () => {\n\t\tlet savedEvent: { source: URI; target: URI } | undefined = undefined;\n\t\tdisposables.add(manager.untitled.onDidSave(e => {\n\t\t\tsavedEvent = e;\n\t\t}));\n\n\t\tconst workingCopy = await manager.untitled.resolve({ associatedResource: { path: '/some/associated.txt' } });\n\t\tworkingCopy.model?.updateContents('Simple Save with associated resource');\n\n\t\taccessor.fileService.notExistsSet.set(URI.from({ scheme: Schemas.file, path: '/some/associated.txt' }), true);\n\n\t\tconst result = await workingCopy.save();\n\t\tassert.ok(result);\n\n\t\tassert.strictEqual(manager.untitled.get(workingCopy.resource), undefined);\n\t\tassert.strictEqual(savedEvent!.source.toString(), workingCopy.resource.toString());\n\t\tassert.strictEqual(savedEvent!.target.toString(), URI.file('/some/associated.txt').toString());\n\n\t\tworkingCopy.dispose();\n\t});\n\n\ttest('save - with associated resource (asks to overwrite)', async () => {\n\t\tconst workingCopy = await manager.untitled.resolve({ associatedResource: { path: '/some/associated.txt' } });\n\t\tworkingCopy.model?.updateContents('Simple Save with associated resource');\n\n\t\tlet result = await workingCopy.save();\n\t\tassert.ok(!result); // not confirmed\n\n\t\tassert.strictEqual(manager.untitled.get(workingCopy.resource), workingCopy);\n\n\t\taccessor.dialogService.setConfirmResult({ confirmed: true });\n\n\t\tresult = await workingCopy.save();\n\t\tassert.ok(result); // confirmed\n\n\t\tassert.strictEqual(manager.untitled.get(workingCopy.resource), undefined);\n\n\t\tworkingCopy.dispose();\n\t});\n\n\ttest('destroy', async () => {\n\t\tassert.strictEqual(accessor.workingCopyService.workingCopies.length, 0);\n\n\t\tawait manager.untitled.resolve();\n\t\tawait manager.untitled.resolve();\n\t\tawait manager.untitled.resolve();\n\n\t\tassert.strictEqual(accessor.workingCopyService.workingCopies.length, 3);\n\t\tassert.strictEqual(manager.untitled.workingCopies.length, 3);\n\n\t\tawait manager.untitled.destroy();\n\n\t\tassert.strictEqual(accessor.workingCopyService.workingCopies.length, 0);\n\t\tassert.strictEqual(manager.untitled.workingCopies.length, 0);\n\t});\n\n\ttest('manager with different types produce different URIs', async () => {\n\t\ttry {\n\t\t\tmanager = disposables.add(new FileWorkingCopyManager(\n\t\t\t\t'someOtherUntitledTypeId',\n\t\t\t\tnew TestStoredFileWorkingCopyModelFactory(),\n\t\t\t\tnew TestUntitledFileWorkingCopyModelFactory(),\n\t\t\t\taccessor.fileService, accessor.lifecycleService, accessor.labelService, accessor.logService,\n\t\t\t\taccessor.workingCopyFileService, accessor.workingCopyBackupService, accessor.uriIdentityService, accessor.fileDialogService,\n\t\t\t\taccessor.filesConfigurationService, accessor.workingCopyService, accessor.notificationService,\n\t\t\t\taccessor.workingCopyEditorService, accessor.editorService, accessor.elevatedFileService, accessor.pathService,\n\t\t\t\taccessor.environmentService, accessor.dialogService, accessor.decorationsService, accessor.progressService\n\t\t\t));\n\n\t\t\tconst untitled1OriginalType = disposables.add(await manager.untitled.resolve());\n\t\t\tconst untitled1OtherType = disposables.add(await manager.untitled.resolve());\n\n\t\t\tassert.notStrictEqual(untitled1OriginalType.resource.toString(), untitled1OtherType.resource.toString());\n\t\t} finally {\n\t\t\tmanager.destroy();\n\t\t}\n\t});\n\n\ttest('manager without typeId produces backwards compatible URIs', async () => {\n\t\ttry {\n\t\t\tmanager = disposables.add(new FileWorkingCopyManager(\n\t\t\t\tNO_TYPE_ID,\n\t\t\t\tnew TestStoredFileWorkingCopyModelFactory(),\n\t\t\t\tnew TestUntitledFileWorkingCopyModelFactory(),\n\t\t\t\taccessor.fileService, accessor.lifecycleService, accessor.labelService, accessor.logService,\n\t\t\t\taccessor.workingCopyFileService, accessor.workingCopyBackupService, accessor.uriIdentityService, accessor.fileDialogService,\n\t\t\t\taccessor.filesConfigurationService, accessor.workingCopyService, accessor.notificationService,\n\t\t\t\taccessor.workingCopyEditorService, accessor.editorService, accessor.elevatedFileService, accessor.pathService,\n\t\t\t\taccessor.environmentService, accessor.dialogService, accessor.decorationsService, accessor.progressService\n\t\t\t));\n\n\t\t\tconst result = disposables.add(await manager.untitled.resolve());\n\t\t\tassert.strictEqual(result.resource.scheme, Schemas.untitled);\n\t\t\tassert.ok(result.resource.path.length > 0);\n\t\t\tassert.strictEqual(result.resource.query, '');\n\t\t\tassert.strictEqual(result.resource.authority, '');\n\t\t\tassert.strictEqual(result.resource.fragment, '');\n\t\t} finally {\n\t\t\tmanager.destroy();\n\t\t}\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"]}