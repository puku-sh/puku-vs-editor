{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/workingCopy/test/browser/resourceWorkingCopy.test.ts","vs/workbench/services/workingCopy/test/browser/resourceWorkingCopy.test.ts"],"names":[],"mappings":"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","file":"resourceWorkingCopy.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Event } from '../../../../../base/common/event.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { TestServiceAccessor, workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { FileChangesEvent, FileChangeType } from '../../../../../platform/files/common/files.js';\nimport { IRevertOptions, ISaveOptions } from '../../../../common/editor.js';\nimport { ResourceWorkingCopy } from '../../common/resourceWorkingCopy.js';\nimport { WorkingCopyCapabilities, IWorkingCopyBackup } from '../../common/workingCopy.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { runWithFakedTimers } from '../../../../../base/test/common/timeTravelScheduler.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nsuite('ResourceWorkingCopy', function () {\n\n\tclass TestResourceWorkingCopy extends ResourceWorkingCopy {\n\t\tname = 'testName';\n\t\ttypeId = 'testTypeId';\n\t\tcapabilities = WorkingCopyCapabilities.None;\n\t\tonDidChangeDirty = Event.None;\n\t\tonDidChangeContent = Event.None;\n\t\tonDidSave = Event.None;\n\t\tisDirty(): boolean { return false; }\n\t\tasync backup(token: CancellationToken): Promise<IWorkingCopyBackup> { throw new Error('Method not implemented.'); }\n\t\tasync save(options?: ISaveOptions): Promise<boolean> { return false; }\n\t\tasync revert(options?: IRevertOptions): Promise<void> { }\n\n\t}\n\n\tconst disposables = new DisposableStore();\n\tconst resource = URI.file('test/resource');\n\tlet instantiationService: IInstantiationService;\n\tlet accessor: TestServiceAccessor;\n\tlet workingCopy: TestResourceWorkingCopy;\n\n\tfunction createWorkingCopy(uri: URI = resource) {\n\t\treturn new TestResourceWorkingCopy(uri, accessor.fileService);\n\t}\n\n\tsetup(() => {\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\taccessor = instantiationService.createInstance(TestServiceAccessor);\n\n\t\tworkingCopy = disposables.add(createWorkingCopy());\n\t});\n\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\ttest('orphaned tracking', async () => {\n\t\treturn runWithFakedTimers({}, async () => {\n\t\t\tassert.strictEqual(workingCopy.isOrphaned(), false);\n\n\t\t\tlet onDidChangeOrphanedPromise = Event.toPromise(workingCopy.onDidChangeOrphaned);\n\t\t\taccessor.fileService.notExistsSet.set(resource, true);\n\t\t\taccessor.fileService.fireFileChanges(new FileChangesEvent([{ resource, type: FileChangeType.DELETED }], false));\n\n\t\t\tawait onDidChangeOrphanedPromise;\n\t\t\tassert.strictEqual(workingCopy.isOrphaned(), true);\n\n\t\t\tonDidChangeOrphanedPromise = Event.toPromise(workingCopy.onDidChangeOrphaned);\n\t\t\taccessor.fileService.notExistsSet.delete(resource);\n\t\t\taccessor.fileService.fireFileChanges(new FileChangesEvent([{ resource, type: FileChangeType.ADDED }], false));\n\n\t\t\tawait onDidChangeOrphanedPromise;\n\t\t\tassert.strictEqual(workingCopy.isOrphaned(), false);\n\t\t});\n\t});\n\n\ttest('dispose, isDisposed', async () => {\n\t\tassert.strictEqual(workingCopy.isDisposed(), false);\n\n\t\tlet disposedEvent = false;\n\t\tdisposables.add(workingCopy.onWillDispose(() => {\n\t\t\tdisposedEvent = true;\n\t\t}));\n\n\t\tworkingCopy.dispose();\n\n\t\tassert.strictEqual(workingCopy.isDisposed(), true);\n\t\tassert.strictEqual(disposedEvent, true);\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Event } from '../../../../../base/common/event.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { TestServiceAccessor, workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { FileChangesEvent, FileChangeType } from '../../../../../platform/files/common/files.js';\nimport { IRevertOptions, ISaveOptions } from '../../../../common/editor.js';\nimport { ResourceWorkingCopy } from '../../common/resourceWorkingCopy.js';\nimport { WorkingCopyCapabilities, IWorkingCopyBackup } from '../../common/workingCopy.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { runWithFakedTimers } from '../../../../../base/test/common/timeTravelScheduler.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nsuite('ResourceWorkingCopy', function () {\n\n\tclass TestResourceWorkingCopy extends ResourceWorkingCopy {\n\t\tname = 'testName';\n\t\ttypeId = 'testTypeId';\n\t\tcapabilities = WorkingCopyCapabilities.None;\n\t\tonDidChangeDirty = Event.None;\n\t\tonDidChangeContent = Event.None;\n\t\tonDidSave = Event.None;\n\t\tisDirty(): boolean { return false; }\n\t\tasync backup(token: CancellationToken): Promise<IWorkingCopyBackup> { throw new Error('Method not implemented.'); }\n\t\tasync save(options?: ISaveOptions): Promise<boolean> { return false; }\n\t\tasync revert(options?: IRevertOptions): Promise<void> { }\n\n\t}\n\n\tconst disposables = new DisposableStore();\n\tconst resource = URI.file('test/resource');\n\tlet instantiationService: IInstantiationService;\n\tlet accessor: TestServiceAccessor;\n\tlet workingCopy: TestResourceWorkingCopy;\n\n\tfunction createWorkingCopy(uri: URI = resource) {\n\t\treturn new TestResourceWorkingCopy(uri, accessor.fileService);\n\t}\n\n\tsetup(() => {\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\taccessor = instantiationService.createInstance(TestServiceAccessor);\n\n\t\tworkingCopy = disposables.add(createWorkingCopy());\n\t});\n\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\ttest('orphaned tracking', async () => {\n\t\treturn runWithFakedTimers({}, async () => {\n\t\t\tassert.strictEqual(workingCopy.isOrphaned(), false);\n\n\t\t\tlet onDidChangeOrphanedPromise = Event.toPromise(workingCopy.onDidChangeOrphaned);\n\t\t\taccessor.fileService.notExistsSet.set(resource, true);\n\t\t\taccessor.fileService.fireFileChanges(new FileChangesEvent([{ resource, type: FileChangeType.DELETED }], false));\n\n\t\t\tawait onDidChangeOrphanedPromise;\n\t\t\tassert.strictEqual(workingCopy.isOrphaned(), true);\n\n\t\t\tonDidChangeOrphanedPromise = Event.toPromise(workingCopy.onDidChangeOrphaned);\n\t\t\taccessor.fileService.notExistsSet.delete(resource);\n\t\t\taccessor.fileService.fireFileChanges(new FileChangesEvent([{ resource, type: FileChangeType.ADDED }], false));\n\n\t\t\tawait onDidChangeOrphanedPromise;\n\t\t\tassert.strictEqual(workingCopy.isOrphaned(), false);\n\t\t});\n\t});\n\n\ttest('dispose, isDisposed', async () => {\n\t\tassert.strictEqual(workingCopy.isDisposed(), false);\n\n\t\tlet disposedEvent = false;\n\t\tdisposables.add(workingCopy.onWillDispose(() => {\n\t\t\tdisposedEvent = true;\n\t\t}));\n\n\t\tworkingCopy.dispose();\n\n\t\tassert.strictEqual(workingCopy.isDisposed(), true);\n\t\tassert.strictEqual(disposedEvent, true);\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"]}