{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/workingCopy/common/workingCopyFileOperationParticipant.ts","vs/workbench/services/workingCopy/common/workingCopyFileOperationParticipant.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAGhG,OAAO,EAAE,WAAW,EAAE,MAAM,wCAAwC,CAAC;AACrE,OAAO,EAAe,UAAU,EAAE,YAAY,EAAE,MAAM,sCAAsC,CAAC;AAG7F,OAAO,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AACnG,OAAO,EAAE,UAAU,EAAE,MAAM,uCAAuC,CAAC;AAE5D,IAAM,mCAAmC,GAAzC,MAAM,mCAAoC,SAAQ,UAAU;IAIlE,YACc,UAAwC,EAC9B,oBAA4D;QAEnF,KAAK,EAAE,CAAC;QAHsB,eAAU,GAAV,UAAU,CAAa;QACb,yBAAoB,GAApB,oBAAoB,CAAuB;QAJnE,iBAAY,GAAG,IAAI,UAAU,EAAwC,CAAC;IAOvF,CAAC;IAED,2BAA2B,CAAC,WAAiD;QAC5E,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAEnD,OAAO,YAAY,CAAC,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC;IACrC,CAAC;IAED,KAAK,CAAC,WAAW,CAAC,KAAyB,EAAE,SAAwB,EAAE,QAAgD,EAAE,KAAwB;QAChJ,MAAM,OAAO,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAS,4BAA4B,CAAC,CAAC;QACzF,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,IAAI,CAAC,EAAE,CAAC;YACjD,OAAO,CAAC,WAAW;QACpB,CAAC;QAED,uBAAuB;QACvB,KAAK,MAAM,WAAW,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;YAC7C,IAAI,CAAC;gBACJ,MAAM,WAAW,CAAC,WAAW,CAAC,KAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;YAC3E,CAAC;YAAC,OAAO,GAAG,EAAE,CAAC;gBACd,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAC3B,CAAC;QACF,CAAC;IACF,CAAC;IAEQ,OAAO;QACf,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;QAE1B,KAAK,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;CACD,CAAA;AAtCY,mCAAmC;IAK7C,WAAA,WAAW,CAAA;IACX,WAAA,qBAAqB,CAAA;GANX,mCAAmC,CAsC/C","file":"workingCopyFileOperationParticipant.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IDisposable, Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { IWorkingCopyFileOperationParticipant, SourceTargetPair, IFileOperationUndoRedoInfo } from './workingCopyFileService.js';\nimport { FileOperation } from '../../../../platform/files/common/files.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\n\nexport class WorkingCopyFileOperationParticipant extends Disposable {\n\n\tprivate readonly participants = new LinkedList<IWorkingCopyFileOperationParticipant>();\n\n\tconstructor(\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService\n\t) {\n\t\tsuper();\n\t}\n\n\taddFileOperationParticipant(participant: IWorkingCopyFileOperationParticipant): IDisposable {\n\t\tconst remove = this.participants.push(participant);\n\n\t\treturn toDisposable(() => remove());\n\t}\n\n\tasync participate(files: SourceTargetPair[], operation: FileOperation, undoInfo: IFileOperationUndoRedoInfo | undefined, token: CancellationToken): Promise<void> {\n\t\tconst timeout = this.configurationService.getValue<number>('files.participants.timeout');\n\t\tif (typeof timeout !== 'number' || timeout <= 0) {\n\t\t\treturn; // disabled\n\t\t}\n\n\t\t// For each participant\n\t\tfor (const participant of this.participants) {\n\t\t\ttry {\n\t\t\t\tawait participant.participate(files, operation, undoInfo, timeout, token);\n\t\t\t} catch (err) {\n\t\t\t\tthis.logService.warn(err);\n\t\t\t}\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tthis.participants.clear();\n\n\t\tsuper.dispose();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IDisposable, Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { IWorkingCopyFileOperationParticipant, SourceTargetPair, IFileOperationUndoRedoInfo } from './workingCopyFileService.js';\nimport { FileOperation } from '../../../../platform/files/common/files.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\n\nexport class WorkingCopyFileOperationParticipant extends Disposable {\n\n\tprivate readonly participants = new LinkedList<IWorkingCopyFileOperationParticipant>();\n\n\tconstructor(\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService\n\t) {\n\t\tsuper();\n\t}\n\n\taddFileOperationParticipant(participant: IWorkingCopyFileOperationParticipant): IDisposable {\n\t\tconst remove = this.participants.push(participant);\n\n\t\treturn toDisposable(() => remove());\n\t}\n\n\tasync participate(files: SourceTargetPair[], operation: FileOperation, undoInfo: IFileOperationUndoRedoInfo | undefined, token: CancellationToken): Promise<void> {\n\t\tconst timeout = this.configurationService.getValue<number>('files.participants.timeout');\n\t\tif (typeof timeout !== 'number' || timeout <= 0) {\n\t\t\treturn; // disabled\n\t\t}\n\n\t\t// For each participant\n\t\tfor (const participant of this.participants) {\n\t\t\ttry {\n\t\t\t\tawait participant.participate(files, operation, undoInfo, timeout, token);\n\t\t\t} catch (err) {\n\t\t\t\tthis.logService.warn(err);\n\t\t\t}\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tthis.participants.clear();\n\n\t\tsuper.dispose();\n\t}\n}\n"]}