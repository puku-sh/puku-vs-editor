{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/workingCopy/common/workingCopyEditorService.ts","vs/workbench/services/workingCopy/common/workingCopyEditorService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,OAAO,EAAS,MAAM,kCAAkC,CAAC;AAClE,OAAO,EAAE,eAAe,EAAE,MAAM,4DAA4D,CAAC;AAC7F,OAAO,EAAqB,iBAAiB,EAAE,MAAM,yDAAyD,CAAC;AAI/G,OAAO,EAAE,UAAU,EAAe,YAAY,EAAE,MAAM,sCAAsC,CAAC;AAC7F,OAAO,EAAE,cAAc,EAAE,MAAM,sCAAsC,CAAC;AAEtE,MAAM,CAAC,MAAM,yBAAyB,GAAG,eAAe,CAA4B,0BAA0B,CAAC,CAAC;AAyCzG,IAAM,wBAAwB,GAA9B,MAAM,wBAAyB,SAAQ,UAAU;IASvD,YAA4B,aAA8C;QACzE,KAAK,EAAE,CAAC;QADoC,kBAAa,GAAb,aAAa,CAAgB;QALzD,0BAAqB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAA6B,CAAC,CAAC;QACzF,yBAAoB,GAAG,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC;QAEhD,aAAQ,GAAG,IAAI,GAAG,EAA6B,CAAC;IAIjE,CAAC;IAED,eAAe,CAAC,OAAkC;QAEjD,oCAAoC;QACpC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC3B,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAEzC,OAAO,YAAY,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;IAC1D,CAAC;IAED,UAAU,CAAC,WAAyB;QACnC,KAAK,MAAM,gBAAgB,IAAI,IAAI,CAAC,aAAa,CAAC,UAAU,2CAAmC,EAAE,CAAC;YACjG,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,gBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC;gBACvD,OAAO,gBAAgB,CAAC;YACzB,CAAC;QACF,CAAC;QAED,OAAO,SAAS,CAAC;IAClB,CAAC;IAEO,MAAM,CAAC,WAAyB,EAAE,MAAmB;QAC5D,KAAK,MAAM,OAAO,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YACrC,IAAI,OAAO,CAAC,MAAM,CAAC,WAAW,EAAE,MAAM,CAAC,EAAE,CAAC;gBACzC,OAAO,IAAI,CAAC;YACb,CAAC;QACF,CAAC;QAED,OAAO,KAAK,CAAC;IACd,CAAC;CACD,CAAA;AAzCY,wBAAwB;IASvB,WAAA,cAAc,CAAA;GATf,wBAAwB,CAyCpC;;AAED,mBAAmB;AACnB,iBAAiB,CAAC,yBAAyB,EAAE,wBAAwB,oCAA4B,CAAC","file":"workingCopyEditorService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { EditorsOrder, IEditorIdentifier } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { IWorkingCopy, IWorkingCopyIdentifier } from './workingCopy.js';\nimport { Disposable, IDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { IEditorService } from '../../editor/common/editorService.js';\n\nexport const IWorkingCopyEditorService = createDecorator<IWorkingCopyEditorService>('workingCopyEditorService');\n\nexport interface IWorkingCopyEditorHandler {\n\n\t/**\n\t * Whether the handler is capable of opening the specific backup in\n\t * an editor.\n\t */\n\thandles(workingCopy: IWorkingCopyIdentifier): boolean | Promise<boolean>;\n\n\t/**\n\t * Whether the provided working copy is opened in the provided editor.\n\t */\n\tisOpen(workingCopy: IWorkingCopyIdentifier, editor: EditorInput): boolean;\n\n\t/**\n\t * Create an editor that is suitable of opening the provided working copy.\n\t */\n\tcreateEditor(workingCopy: IWorkingCopyIdentifier): EditorInput | Promise<EditorInput>;\n}\n\nexport interface IWorkingCopyEditorService {\n\n\treadonly _serviceBrand: undefined;\n\n\t/**\n\t * An event fired whenever a handler is registered.\n\t */\n\treadonly onDidRegisterHandler: Event<IWorkingCopyEditorHandler>;\n\n\t/**\n\t * Register a handler to the working copy editor service.\n\t */\n\tregisterHandler(handler: IWorkingCopyEditorHandler): IDisposable;\n\n\t/**\n\t * Finds the first editor that can handle the provided working copy.\n\t */\n\tfindEditor(workingCopy: IWorkingCopy): IEditorIdentifier | undefined;\n}\n\nexport class WorkingCopyEditorService extends Disposable implements IWorkingCopyEditorService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _onDidRegisterHandler = this._register(new Emitter<IWorkingCopyEditorHandler>());\n\treadonly onDidRegisterHandler = this._onDidRegisterHandler.event;\n\n\tprivate readonly handlers = new Set<IWorkingCopyEditorHandler>();\n\n\tconstructor(@IEditorService private readonly editorService: IEditorService) {\n\t\tsuper();\n\t}\n\n\tregisterHandler(handler: IWorkingCopyEditorHandler): IDisposable {\n\n\t\t// Add to registry and emit as event\n\t\tthis.handlers.add(handler);\n\t\tthis._onDidRegisterHandler.fire(handler);\n\n\t\treturn toDisposable(() => this.handlers.delete(handler));\n\t}\n\n\tfindEditor(workingCopy: IWorkingCopy): IEditorIdentifier | undefined {\n\t\tfor (const editorIdentifier of this.editorService.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE)) {\n\t\t\tif (this.isOpen(workingCopy, editorIdentifier.editor)) {\n\t\t\t\treturn editorIdentifier;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate isOpen(workingCopy: IWorkingCopy, editor: EditorInput): boolean {\n\t\tfor (const handler of this.handlers) {\n\t\t\tif (handler.isOpen(workingCopy, editor)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\n// Register Service\nregisterSingleton(IWorkingCopyEditorService, WorkingCopyEditorService, InstantiationType.Delayed);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { EditorsOrder, IEditorIdentifier } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { IWorkingCopy, IWorkingCopyIdentifier } from './workingCopy.js';\nimport { Disposable, IDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { IEditorService } from '../../editor/common/editorService.js';\n\nexport const IWorkingCopyEditorService = createDecorator<IWorkingCopyEditorService>('workingCopyEditorService');\n\nexport interface IWorkingCopyEditorHandler {\n\n\t/**\n\t * Whether the handler is capable of opening the specific backup in\n\t * an editor.\n\t */\n\thandles(workingCopy: IWorkingCopyIdentifier): boolean | Promise<boolean>;\n\n\t/**\n\t * Whether the provided working copy is opened in the provided editor.\n\t */\n\tisOpen(workingCopy: IWorkingCopyIdentifier, editor: EditorInput): boolean;\n\n\t/**\n\t * Create an editor that is suitable of opening the provided working copy.\n\t */\n\tcreateEditor(workingCopy: IWorkingCopyIdentifier): EditorInput | Promise<EditorInput>;\n}\n\nexport interface IWorkingCopyEditorService {\n\n\treadonly _serviceBrand: undefined;\n\n\t/**\n\t * An event fired whenever a handler is registered.\n\t */\n\treadonly onDidRegisterHandler: Event<IWorkingCopyEditorHandler>;\n\n\t/**\n\t * Register a handler to the working copy editor service.\n\t */\n\tregisterHandler(handler: IWorkingCopyEditorHandler): IDisposable;\n\n\t/**\n\t * Finds the first editor that can handle the provided working copy.\n\t */\n\tfindEditor(workingCopy: IWorkingCopy): IEditorIdentifier | undefined;\n}\n\nexport class WorkingCopyEditorService extends Disposable implements IWorkingCopyEditorService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _onDidRegisterHandler = this._register(new Emitter<IWorkingCopyEditorHandler>());\n\treadonly onDidRegisterHandler = this._onDidRegisterHandler.event;\n\n\tprivate readonly handlers = new Set<IWorkingCopyEditorHandler>();\n\n\tconstructor(@IEditorService private readonly editorService: IEditorService) {\n\t\tsuper();\n\t}\n\n\tregisterHandler(handler: IWorkingCopyEditorHandler): IDisposable {\n\n\t\t// Add to registry and emit as event\n\t\tthis.handlers.add(handler);\n\t\tthis._onDidRegisterHandler.fire(handler);\n\n\t\treturn toDisposable(() => this.handlers.delete(handler));\n\t}\n\n\tfindEditor(workingCopy: IWorkingCopy): IEditorIdentifier | undefined {\n\t\tfor (const editorIdentifier of this.editorService.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE)) {\n\t\t\tif (this.isOpen(workingCopy, editorIdentifier.editor)) {\n\t\t\t\treturn editorIdentifier;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate isOpen(workingCopy: IWorkingCopy, editor: EditorInput): boolean {\n\t\tfor (const handler of this.handlers) {\n\t\t\tif (handler.isOpen(workingCopy, editor)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\n// Register Service\nregisterSingleton(IWorkingCopyEditorService, WorkingCopyEditorService, InstantiationType.Delayed);\n"]}