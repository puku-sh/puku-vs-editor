{"version":3,"sources":["vs/workbench/services/workingCopy/electron-browser/workingCopyBackupService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,QAAQ,EAAE,MAAM,oBAAoB,CAAC;AAC9C,OAAO,EAAE,wBAAwB,EAAE,MAAM,uCAAuC,CAAC;AACjF,OAAO,EAAE,GAAG,EAAE,MAAM,gCAAgC,CAAC;AACrD,OAAO,EAAqB,iBAAiB,EAAE,MAAM,yDAAyD,CAAC;AAC/G,OAAO,EAAE,yBAAyB,EAAE,MAAM,gCAAgC,CAAC;AAC3E,OAAO,EAAE,YAAY,EAAE,MAAM,4CAA4C,CAAC;AAC1E,OAAO,EAAE,WAAW,EAAE,MAAM,wCAAwC,CAAC;AACrE,OAAO,EAAE,kCAAkC,EAAE,MAAM,0DAA0D,CAAC;AAC9G,OAAO,EAAkB,8BAA8B,EAAE,MAAM,kCAAkC,CAAC;AAClG,OAAO,EAAE,iBAAiB,EAAE,MAAM,qCAAqC,CAAC;AACxE,OAAO,EAAE,8BAA8B,EAAE,MAAM,+BAA+B,CAAC;AAExE,IAAM,8BAA8B,GAApC,MAAM,8BAA+B,SAAQ,wBAAwB;IAE3E,YACqC,kBAAsD,EAC5E,WAAyB,EAC1B,UAAuB,EACA,gBAAmC;QAEvE,KAAK,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,kBAAkB,CAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,WAAW,EAAE,UAAU,CAAC,CAAC;QAFhJ,qBAAgB,GAAhB,gBAAgB,CAAmB;QAIvE,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC1B,CAAC;IAEO,iBAAiB;QAExB,wDAAwD;QACxD,sDAAsD;QACtD,sDAAsD;QACtD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,EAAE,EAAE,EAAE,yBAAyB,EAAE,KAAK,EAAE,QAAQ,CAAC,KAAyB,EAAE,IAAuB,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACvM,CAAC;CACD,CAAA;AApBY,8BAA8B;IAGxC,WAAA,kCAAkC,CAAA;IAClC,WAAA,YAAY,CAAA;IACZ,WAAA,WAAW,CAAA;IACX,WAAA,iBAAiB,CAAA;GANP,8BAA8B,CAoB1C;;AAED,mBAAmB;AACnB,iBAAiB,CAAC,yBAAyB,EAAE,8BAA8B,kCAA0B,CAAC;AAEtG,0BAA0B;AAC1B,8BAA8B,CAAC,8BAA8B,CAAC,EAAE,EAAE,8BAA8B,sCAA8B,CAAC","file":"workingCopyBackupService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../../nls.js';\nimport { WorkingCopyBackupService } from '../common/workingCopyBackupService.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IWorkingCopyBackupService } from '../common/workingCopyBackup.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INativeWorkbenchEnvironmentService } from '../../environment/electron-browser/environmentService.js';\nimport { WorkbenchPhase, registerWorkbenchContribution2 } from '../../../common/contributions.js';\nimport { ILifecycleService } from '../../lifecycle/common/lifecycle.js';\nimport { NativeWorkingCopyBackupTracker } from './workingCopyBackupTracker.js';\n\nexport class NativeWorkingCopyBackupService extends WorkingCopyBackupService {\n\n\tconstructor(\n\t\t@INativeWorkbenchEnvironmentService environmentService: INativeWorkbenchEnvironmentService,\n\t\t@IFileService fileService: IFileService,\n\t\t@ILogService logService: ILogService,\n\t\t@ILifecycleService private readonly lifecycleService: ILifecycleService\n\t) {\n\t\tsuper(environmentService.backupPath ? URI.file(environmentService.backupPath).with({ scheme: environmentService.userRoamingDataHome.scheme }) : undefined, fileService, logService);\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// Lifecycle: ensure to prolong the shutdown for as long\n\t\t// as pending backup operations have not finished yet.\n\t\t// Otherwise, we risk writing partial backups to disk.\n\t\tthis._register(this.lifecycleService.onWillShutdown(event => event.join(this.joinBackups(), { id: 'join.workingCopyBackups', label: localize('join.workingCopyBackups', \"Backup working copies\") })));\n\t}\n}\n\n// Register Service\nregisterSingleton(IWorkingCopyBackupService, NativeWorkingCopyBackupService, InstantiationType.Eager);\n\n// Register Backup Tracker\nregisterWorkbenchContribution2(NativeWorkingCopyBackupTracker.ID, NativeWorkingCopyBackupTracker, WorkbenchPhase.BlockStartup);\n"]}