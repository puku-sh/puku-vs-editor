{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/keybinding/electron-browser/nativeKeyboardLayoutService.ts","vs/workbench/services/keybinding/electron-browser/nativeKeyboardLayoutService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;AAEhG,OAAO,EAAE,UAAU,EAAE,MAAM,sCAAsC,CAAC;AAClE,OAAO,EAA4F,6BAA6B,EAAE,4BAA4B,EAAE,MAAM,8DAA8D,CAAC;AACrO,OAAO,EAAE,OAAO,EAAS,MAAM,kCAAkC,CAAC;AAClE,OAAO,EAAmB,EAAE,EAAE,MAAM,qCAAqC,CAAC;AAC1E,OAAO,EAAE,mBAAmB,EAAE,MAAM,uDAAuD,CAAC;AAE5F,OAAO,EAAE,YAAY,EAAE,MAAM,0CAA0C,CAAC;AACxE,OAAO,EAAE,eAAe,EAAE,MAAM,4DAA4D,CAAC;AAE7F,MAAM,CAAC,MAAM,4BAA4B,GAAG,eAAe,CAA+B,6BAA6B,CAAC,CAAC;AASlH,IAAM,2BAA2B,GAAjC,MAAM,2BAA4B,SAAQ,UAAU;IAY1D,YACsB,kBAAuC;QAE5D,KAAK,EAAE,CAAC;QAXQ,+BAA0B,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAAQ,CAAC,CAAC;QACzE,8BAAyB,GAAG,IAAI,CAAC,0BAA0B,CAAC,KAAK,CAAC;QAW1E,IAAI,CAAC,sBAAsB,GAAG,YAAY,CAAC,SAAS,CAAmC,kBAAkB,CAAC,UAAU,CAAC,gBAAgB,CAAC,CAAC,CAAC;QACxI,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC7B,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAEhC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,sBAAsB,CAAC,yBAAyB,CAAC,KAAK,EAAE,EAAE,kBAAkB,EAAE,eAAe,EAAE,EAAE,EAAE;YACtH,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;YACxB,IAAI,qBAAqB,CAAC,IAAI,CAAC,gBAAgB,EAAE,eAAe,CAAC,EAAE,CAAC;gBACnE,yBAAyB;gBACzB,OAAO;YACR,CAAC;YAED,IAAI,CAAC,gBAAgB,GAAG,eAAe,CAAC;YACxC,IAAI,CAAC,mBAAmB,GAAG,kBAAkB,CAAC;YAC9C,IAAI,CAAC,0BAA0B,CAAC,IAAI,EAAE,CAAC;QACxC,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,UAAU;QAChB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC;YACxB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QAC1C,CAAC;QACD,OAAO,IAAI,CAAC,YAAY,CAAC;IAC1B,CAAC;IAEO,KAAK,CAAC,aAAa;QAC1B,MAAM,kBAAkB,GAAG,MAAM,IAAI,CAAC,sBAAsB,CAAC,qBAAqB,EAAE,CAAC;QACrF,MAAM,EAAE,kBAAkB,EAAE,eAAe,EAAE,GAAG,kBAAkB,CAAC;QACnE,IAAI,CAAC,gBAAgB,GAAG,eAAe,CAAC;QACxC,IAAI,CAAC,mBAAmB,GAAG,kBAAkB,CAAC;IAC/C,CAAC;IAEM,qBAAqB;QAC3B,OAAO,IAAI,CAAC,gBAAgB,CAAC;IAC9B,CAAC;IAEM,wBAAwB;QAC9B,OAAO,IAAI,CAAC,mBAAmB,CAAC;IACjC,CAAC;CACD,CAAA;AAvDY,2BAA2B;IAarC,WAAA,mBAAmB,CAAA;GAbT,2BAA2B,CAuDvC;;AAED,SAAS,qBAAqB,CAAC,CAA0B,EAAE,CAA0B;IACpF,IAAI,EAAE,oCAA4B,EAAE,CAAC;QACpC,OAAO,4BAA4B,CAAiC,CAAC,EAAkC,CAAC,CAAC,CAAC;IAC3G,CAAC;IAED,OAAO,6BAA6B,CAAkC,CAAC,EAAmC,CAAC,CAAC,CAAC;AAC9G,CAAC","file":"nativeKeyboardLayoutService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IKeyboardLayoutInfo, IKeyboardMapping, IMacLinuxKeyboardMapping, IWindowsKeyboardMapping, macLinuxKeyboardMappingEquals, windowsKeyboardMappingEquals } from '../../../../platform/keyboardLayout/common/keyboardLayout.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { OperatingSystem, OS } from '../../../../base/common/platform.js';\nimport { IMainProcessService } from '../../../../platform/ipc/common/mainProcessService.js';\nimport { INativeKeyboardLayoutService as IBaseNativeKeyboardLayoutService } from '../../../../platform/keyboardLayout/common/keyboardLayoutService.js';\nimport { ProxyChannel } from '../../../../base/parts/ipc/common/ipc.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\n\nexport const INativeKeyboardLayoutService = createDecorator<INativeKeyboardLayoutService>('nativeKeyboardLayoutService');\n\nexport interface INativeKeyboardLayoutService {\n\treadonly _serviceBrand: undefined;\n\treadonly onDidChangeKeyboardLayout: Event<void>;\n\tgetRawKeyboardMapping(): IKeyboardMapping | null;\n\tgetCurrentKeyboardLayout(): IKeyboardLayoutInfo | null;\n}\n\nexport class NativeKeyboardLayoutService extends Disposable implements INativeKeyboardLayoutService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _onDidChangeKeyboardLayout = this._register(new Emitter<void>());\n\treadonly onDidChangeKeyboardLayout = this._onDidChangeKeyboardLayout.event;\n\n\tprivate readonly _keyboardLayoutService: IBaseNativeKeyboardLayoutService;\n\tprivate _initPromise: Promise<void> | null;\n\tprivate _keyboardMapping: IKeyboardMapping | null;\n\tprivate _keyboardLayoutInfo: IKeyboardLayoutInfo | null;\n\n\tconstructor(\n\t\t@IMainProcessService mainProcessService: IMainProcessService\n\t) {\n\t\tsuper();\n\t\tthis._keyboardLayoutService = ProxyChannel.toService<IBaseNativeKeyboardLayoutService>(mainProcessService.getChannel('keyboardLayout'));\n\t\tthis._initPromise = null;\n\t\tthis._keyboardMapping = null;\n\t\tthis._keyboardLayoutInfo = null;\n\n\t\tthis._register(this._keyboardLayoutService.onDidChangeKeyboardLayout(async ({ keyboardLayoutInfo, keyboardMapping }) => {\n\t\t\tawait this.initialize();\n\t\t\tif (keyboardMappingEquals(this._keyboardMapping, keyboardMapping)) {\n\t\t\t\t// the mappings are equal\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._keyboardMapping = keyboardMapping;\n\t\t\tthis._keyboardLayoutInfo = keyboardLayoutInfo;\n\t\t\tthis._onDidChangeKeyboardLayout.fire();\n\t\t}));\n\t}\n\n\tpublic initialize(): Promise<void> {\n\t\tif (!this._initPromise) {\n\t\t\tthis._initPromise = this._doInitialize();\n\t\t}\n\t\treturn this._initPromise;\n\t}\n\n\tprivate async _doInitialize(): Promise<void> {\n\t\tconst keyboardLayoutData = await this._keyboardLayoutService.getKeyboardLayoutData();\n\t\tconst { keyboardLayoutInfo, keyboardMapping } = keyboardLayoutData;\n\t\tthis._keyboardMapping = keyboardMapping;\n\t\tthis._keyboardLayoutInfo = keyboardLayoutInfo;\n\t}\n\n\tpublic getRawKeyboardMapping(): IKeyboardMapping | null {\n\t\treturn this._keyboardMapping;\n\t}\n\n\tpublic getCurrentKeyboardLayout(): IKeyboardLayoutInfo | null {\n\t\treturn this._keyboardLayoutInfo;\n\t}\n}\n\nfunction keyboardMappingEquals(a: IKeyboardMapping | null, b: IKeyboardMapping | null): boolean {\n\tif (OS === OperatingSystem.Windows) {\n\t\treturn windowsKeyboardMappingEquals(<IWindowsKeyboardMapping | null>a, <IWindowsKeyboardMapping | null>b);\n\t}\n\n\treturn macLinuxKeyboardMappingEquals(<IMacLinuxKeyboardMapping | null>a, <IMacLinuxKeyboardMapping | null>b);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IKeyboardLayoutInfo, IKeyboardMapping, IMacLinuxKeyboardMapping, IWindowsKeyboardMapping, macLinuxKeyboardMappingEquals, windowsKeyboardMappingEquals } from '../../../../platform/keyboardLayout/common/keyboardLayout.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { OperatingSystem, OS } from '../../../../base/common/platform.js';\nimport { IMainProcessService } from '../../../../platform/ipc/common/mainProcessService.js';\nimport { INativeKeyboardLayoutService as IBaseNativeKeyboardLayoutService } from '../../../../platform/keyboardLayout/common/keyboardLayoutService.js';\nimport { ProxyChannel } from '../../../../base/parts/ipc/common/ipc.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\n\nexport const INativeKeyboardLayoutService = createDecorator<INativeKeyboardLayoutService>('nativeKeyboardLayoutService');\n\nexport interface INativeKeyboardLayoutService {\n\treadonly _serviceBrand: undefined;\n\treadonly onDidChangeKeyboardLayout: Event<void>;\n\tgetRawKeyboardMapping(): IKeyboardMapping | null;\n\tgetCurrentKeyboardLayout(): IKeyboardLayoutInfo | null;\n}\n\nexport class NativeKeyboardLayoutService extends Disposable implements INativeKeyboardLayoutService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _onDidChangeKeyboardLayout = this._register(new Emitter<void>());\n\treadonly onDidChangeKeyboardLayout = this._onDidChangeKeyboardLayout.event;\n\n\tprivate readonly _keyboardLayoutService: IBaseNativeKeyboardLayoutService;\n\tprivate _initPromise: Promise<void> | null;\n\tprivate _keyboardMapping: IKeyboardMapping | null;\n\tprivate _keyboardLayoutInfo: IKeyboardLayoutInfo | null;\n\n\tconstructor(\n\t\t@IMainProcessService mainProcessService: IMainProcessService\n\t) {\n\t\tsuper();\n\t\tthis._keyboardLayoutService = ProxyChannel.toService<IBaseNativeKeyboardLayoutService>(mainProcessService.getChannel('keyboardLayout'));\n\t\tthis._initPromise = null;\n\t\tthis._keyboardMapping = null;\n\t\tthis._keyboardLayoutInfo = null;\n\n\t\tthis._register(this._keyboardLayoutService.onDidChangeKeyboardLayout(async ({ keyboardLayoutInfo, keyboardMapping }) => {\n\t\t\tawait this.initialize();\n\t\t\tif (keyboardMappingEquals(this._keyboardMapping, keyboardMapping)) {\n\t\t\t\t// the mappings are equal\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._keyboardMapping = keyboardMapping;\n\t\t\tthis._keyboardLayoutInfo = keyboardLayoutInfo;\n\t\t\tthis._onDidChangeKeyboardLayout.fire();\n\t\t}));\n\t}\n\n\tpublic initialize(): Promise<void> {\n\t\tif (!this._initPromise) {\n\t\t\tthis._initPromise = this._doInitialize();\n\t\t}\n\t\treturn this._initPromise;\n\t}\n\n\tprivate async _doInitialize(): Promise<void> {\n\t\tconst keyboardLayoutData = await this._keyboardLayoutService.getKeyboardLayoutData();\n\t\tconst { keyboardLayoutInfo, keyboardMapping } = keyboardLayoutData;\n\t\tthis._keyboardMapping = keyboardMapping;\n\t\tthis._keyboardLayoutInfo = keyboardLayoutInfo;\n\t}\n\n\tpublic getRawKeyboardMapping(): IKeyboardMapping | null {\n\t\treturn this._keyboardMapping;\n\t}\n\n\tpublic getCurrentKeyboardLayout(): IKeyboardLayoutInfo | null {\n\t\treturn this._keyboardLayoutInfo;\n\t}\n}\n\nfunction keyboardMappingEquals(a: IKeyboardMapping | null, b: IKeyboardMapping | null): boolean {\n\tif (OS === OperatingSystem.Windows) {\n\t\treturn windowsKeyboardMappingEquals(<IWindowsKeyboardMapping | null>a, <IWindowsKeyboardMapping | null>b);\n\t}\n\n\treturn macLinuxKeyboardMappingEquals(<IMacLinuxKeyboardMapping | null>a, <IMacLinuxKeyboardMapping | null>b);\n}\n"]}