{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/keybinding/test/node/keyboardMapperTestUtils.ts","vs/workbench/services/keybinding/test/node/keyboardMapperTestUtils.ts"],"names":[],"mappings":"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","file":"keyboardMapperTestUtils.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport assert from 'assert';\nimport * as path from '../../../../../base/common/path.js';\nimport { SingleModifierChord, ResolvedKeybinding, Keybinding } from '../../../../../base/common/keybindings.js';\nimport { Promises } from '../../../../../base/node/pfs.js';\nimport { IKeyboardEvent } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { IKeyboardMapper } from '../../../../../platform/keyboardLayout/common/keyboardMapper.js';\nimport { FileAccess } from '../../../../../base/common/network.js';\n\nexport interface IResolvedKeybinding {\n\tlabel: string | null;\n\tariaLabel: string | null;\n\telectronAccelerator: string | null;\n\tuserSettingsLabel: string | null;\n\tisWYSIWYG: boolean;\n\tisMultiChord: boolean;\n\tdispatchParts: (string | null)[];\n\tsingleModifierDispatchParts: (SingleModifierChord | null)[];\n}\n\nfunction toIResolvedKeybinding(kb: ResolvedKeybinding): IResolvedKeybinding {\n\treturn {\n\t\tlabel: kb.getLabel(),\n\t\tariaLabel: kb.getAriaLabel(),\n\t\telectronAccelerator: kb.getElectronAccelerator(),\n\t\tuserSettingsLabel: kb.getUserSettingsLabel(),\n\t\tisWYSIWYG: kb.isWYSIWYG(),\n\t\tisMultiChord: kb.hasMultipleChords(),\n\t\tdispatchParts: kb.getDispatchChords(),\n\t\tsingleModifierDispatchParts: kb.getSingleModifierDispatchChords()\n\t};\n}\n\nexport function assertResolveKeyboardEvent(mapper: IKeyboardMapper, keyboardEvent: IKeyboardEvent, expected: IResolvedKeybinding): void {\n\tconst actual = toIResolvedKeybinding(mapper.resolveKeyboardEvent(keyboardEvent));\n\tassert.deepStrictEqual(actual, expected);\n}\n\nexport function assertResolveKeybinding(mapper: IKeyboardMapper, keybinding: Keybinding, expected: IResolvedKeybinding[]): void {\n\tconst actual: IResolvedKeybinding[] = mapper.resolveKeybinding(keybinding).map(toIResolvedKeybinding);\n\tassert.deepStrictEqual(actual, expected);\n}\n\nexport function readRawMapping<T>(file: string): Promise<T> {\n\treturn fs.promises.readFile(FileAccess.asFileUri(`vs/workbench/services/keybinding/test/node/${file}.js`).fsPath).then((buff) => {\n\t\tconst contents = buff.toString();\n\t\tconst func = new Function('define', contents);// CodeQL [SM01632] This is used in tests and we read the files as JS to avoid slowing down TS compilation\n\t\tlet rawMappings: T | null = null;\n\t\tfunc(function (value: T) {\n\t\t\trawMappings = value;\n\t\t});\n\t\treturn rawMappings!;\n\t});\n}\n\nexport function assertMapping(writeFileIfDifferent: boolean, mapper: IKeyboardMapper, file: string): Promise<void> {\n\tconst filePath = path.normalize(FileAccess.asFileUri(`vs/workbench/services/keybinding/test/node/${file}`).fsPath);\n\n\treturn fs.promises.readFile(filePath).then((buff) => {\n\t\tconst expected = buff.toString().replace(/\\r\\n/g, '\\n');\n\t\tconst actual = mapper.dumpDebugInfo().replace(/\\r\\n/g, '\\n');\n\t\tif (actual !== expected && writeFileIfDifferent) {\n\t\t\tconst destPath = filePath.replace(/[\\/\\\\]out[\\/\\\\]vs[\\/\\\\]workbench/, '/src/vs/workbench');\n\t\t\tPromises.writeFile(destPath, actual);\n\t\t}\n\t\tassert.deepStrictEqual(actual, expected);\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport assert from 'assert';\nimport * as path from '../../../../../base/common/path.js';\nimport { SingleModifierChord, ResolvedKeybinding, Keybinding } from '../../../../../base/common/keybindings.js';\nimport { Promises } from '../../../../../base/node/pfs.js';\nimport { IKeyboardEvent } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { IKeyboardMapper } from '../../../../../platform/keyboardLayout/common/keyboardMapper.js';\nimport { FileAccess } from '../../../../../base/common/network.js';\n\nexport interface IResolvedKeybinding {\n\tlabel: string | null;\n\tariaLabel: string | null;\n\telectronAccelerator: string | null;\n\tuserSettingsLabel: string | null;\n\tisWYSIWYG: boolean;\n\tisMultiChord: boolean;\n\tdispatchParts: (string | null)[];\n\tsingleModifierDispatchParts: (SingleModifierChord | null)[];\n}\n\nfunction toIResolvedKeybinding(kb: ResolvedKeybinding): IResolvedKeybinding {\n\treturn {\n\t\tlabel: kb.getLabel(),\n\t\tariaLabel: kb.getAriaLabel(),\n\t\telectronAccelerator: kb.getElectronAccelerator(),\n\t\tuserSettingsLabel: kb.getUserSettingsLabel(),\n\t\tisWYSIWYG: kb.isWYSIWYG(),\n\t\tisMultiChord: kb.hasMultipleChords(),\n\t\tdispatchParts: kb.getDispatchChords(),\n\t\tsingleModifierDispatchParts: kb.getSingleModifierDispatchChords()\n\t};\n}\n\nexport function assertResolveKeyboardEvent(mapper: IKeyboardMapper, keyboardEvent: IKeyboardEvent, expected: IResolvedKeybinding): void {\n\tconst actual = toIResolvedKeybinding(mapper.resolveKeyboardEvent(keyboardEvent));\n\tassert.deepStrictEqual(actual, expected);\n}\n\nexport function assertResolveKeybinding(mapper: IKeyboardMapper, keybinding: Keybinding, expected: IResolvedKeybinding[]): void {\n\tconst actual: IResolvedKeybinding[] = mapper.resolveKeybinding(keybinding).map(toIResolvedKeybinding);\n\tassert.deepStrictEqual(actual, expected);\n}\n\nexport function readRawMapping<T>(file: string): Promise<T> {\n\treturn fs.promises.readFile(FileAccess.asFileUri(`vs/workbench/services/keybinding/test/node/${file}.js`).fsPath).then((buff) => {\n\t\tconst contents = buff.toString();\n\t\tconst func = new Function('define', contents);// CodeQL [SM01632] This is used in tests and we read the files as JS to avoid slowing down TS compilation\n\t\tlet rawMappings: T | null = null;\n\t\tfunc(function (value: T) {\n\t\t\trawMappings = value;\n\t\t});\n\t\treturn rawMappings!;\n\t});\n}\n\nexport function assertMapping(writeFileIfDifferent: boolean, mapper: IKeyboardMapper, file: string): Promise<void> {\n\tconst filePath = path.normalize(FileAccess.asFileUri(`vs/workbench/services/keybinding/test/node/${file}`).fsPath);\n\n\treturn fs.promises.readFile(filePath).then((buff) => {\n\t\tconst expected = buff.toString().replace(/\\r\\n/g, '\\n');\n\t\tconst actual = mapper.dumpDebugInfo().replace(/\\r\\n/g, '\\n');\n\t\tif (actual !== expected && writeFileIfDifferent) {\n\t\t\tconst destPath = filePath.replace(/[\\/\\\\]out[\\/\\\\]vs[\\/\\\\]workbench/, '/src/vs/workbench');\n\t\t\tPromises.writeFile(destPath, actual);\n\t\t}\n\t\tassert.deepStrictEqual(actual, expected);\n\t});\n}\n"]}