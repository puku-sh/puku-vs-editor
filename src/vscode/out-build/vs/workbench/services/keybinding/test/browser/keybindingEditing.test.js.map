{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/keybinding/test/browser/keybindingEditing.test.ts","vs/workbench/services/keybinding/test/browser/keybindingEditing.test.ts"],"names":[],"mappings":"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","file":"keybindingEditing.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as json from '../../../../../base/common/json.js';\nimport { KeyCode } from '../../../../../base/common/keyCodes.js';\nimport { KeyCodeChord } from '../../../../../base/common/keybindings.js';\nimport { OS } from '../../../../../base/common/platform.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IEnvironmentService } from '../../../../../platform/environment/common/environment.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { IUserFriendlyKeybinding } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ResolvedKeybindingItem } from '../../../../../platform/keybinding/common/resolvedKeybindingItem.js';\nimport { USLayoutResolvedKeybinding } from '../../../../../platform/keybinding/common/usLayoutResolvedKeybinding.js';\nimport { NullLogService } from '../../../../../platform/log/common/log.js';\nimport { KeybindingsEditingService } from '../../common/keybindingEditing.js';\nimport { ITextFileService } from '../../../textfile/common/textfiles.js';\nimport { TestEnvironmentService, workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\nimport { FileService } from '../../../../../platform/files/common/fileService.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { FileUserDataProvider } from '../../../../../platform/userData/common/fileUserDataProvider.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { joinPath } from '../../../../../base/common/resources.js';\nimport { InMemoryFileSystemProvider } from '../../../../../platform/files/common/inMemoryFilesystemProvider.js';\nimport { VSBuffer } from '../../../../../base/common/buffer.js';\nimport { UserDataProfilesService } from '../../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { UserDataProfileService } from '../../../userDataProfile/common/userDataProfileService.js';\nimport { IUserDataProfileService } from '../../../userDataProfile/common/userDataProfile.js';\nimport { UriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentityService.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\ninterface Modifiers {\n\tmetaKey?: boolean;\n\tctrlKey?: boolean;\n\taltKey?: boolean;\n\tshiftKey?: boolean;\n}\n\nconst ROOT = URI.file('tests').with({ scheme: 'vscode-tests' });\n\nsuite('KeybindingsEditing', () => {\n\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\tlet instantiationService: TestInstantiationService;\n\tlet fileService: IFileService;\n\tlet environmentService: IEnvironmentService;\n\tlet userDataProfileService: IUserDataProfileService;\n\tlet testObject: KeybindingsEditingService;\n\n\tsetup(async () => {\n\n\t\tenvironmentService = TestEnvironmentService;\n\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst userFolder = joinPath(ROOT, 'User');\n\t\tawait fileService.createFolder(userFolder);\n\n\t\tconst configService = new TestConfigurationService();\n\t\tconfigService.setUserConfiguration('files', { 'eol': '\\n' });\n\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService));\n\t\tuserDataProfileService = disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\n\t\tinstantiationService = workbenchInstantiationService({\n\t\t\tfileService: () => fileService,\n\t\t\tconfigurationService: () => configService,\n\t\t\tenvironmentService: () => environmentService\n\t\t}, disposables);\n\n\t\ttestObject = disposables.add(instantiationService.createInstance(KeybindingsEditingService));\n\t});\n\n\ttest('errors cases - parse errors', async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.keybindingsResource, VSBuffer.fromString(',,,,,,,,,,,,,,'));\n\t\ttry {\n\t\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape } }), 'alt+c', undefined);\n\t\t\tassert.fail('Should fail with parse errors');\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.message, 'Unable to write to the keybindings configuration file. Please open it to correct errors/warnings in the file and try again.');\n\t\t}\n\t});\n\n\ttest('errors cases - parse errors 2', async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.keybindingsResource, VSBuffer.fromString('[{\"key\": }]'));\n\t\ttry {\n\t\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape } }), 'alt+c', undefined);\n\t\t\tassert.fail('Should fail with parse errors');\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.message, 'Unable to write to the keybindings configuration file. Please open it to correct errors/warnings in the file and try again.');\n\t\t}\n\t});\n\n\ttest('errors cases - dirty', () => {\n\t\tinstantiationService.stub(ITextFileService, 'isDirty', true);\n\t\treturn testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape } }), 'alt+c', undefined)\n\t\t\t.then(() => assert.fail('Should fail with dirty error'),\n\t\t\t\terror => assert.strictEqual(error.message, 'Unable to write because the keybindings configuration file has unsaved changes. Please save it first and then try again.'));\n\t});\n\n\ttest('errors cases - did not find an array', async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.keybindingsResource, VSBuffer.fromString('{\"key\": \"alt+c\", \"command\": \"hello\"}'));\n\t\ttry {\n\t\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape } }), 'alt+c', undefined);\n\t\t\tassert.fail('Should fail');\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.message, 'Unable to write to the keybindings configuration file. It has an object which is not of type Array. Please open the file to clean up and try again.');\n\t\t}\n\t});\n\n\ttest('edit a default keybinding to an empty file', async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.keybindingsResource, VSBuffer.fromString(''));\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: 'a' }, { key: 'escape', command: '-a' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape }, command: 'a' }), 'alt+c', undefined);\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('edit a default keybinding to an empty array', async () => {\n\t\tawait writeToKeybindingsFile();\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: 'a' }, { key: 'escape', command: '-a' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape }, command: 'a' }), 'alt+c', undefined);\n\t\treturn assert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('edit a default keybinding in an existing array', async () => {\n\t\tawait writeToKeybindingsFile({ command: 'b', key: 'shift+c' });\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'shift+c', command: 'b' }, { key: 'alt+c', command: 'a' }, { key: 'escape', command: '-a' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape }, command: 'a' }), 'alt+c', undefined);\n\t\treturn assert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('add another keybinding', async () => {\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: 'a' }];\n\t\tawait testObject.addKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape }, command: 'a' }), 'alt+c', undefined);\n\t\treturn assert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('add a new default keybinding', async () => {\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: 'a' }];\n\t\tawait testObject.addKeybinding(aResolvedKeybindingItem({ command: 'a' }), 'alt+c', undefined);\n\t\treturn assert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('add a new default keybinding using edit', async () => {\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: 'a' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ command: 'a' }), 'alt+c', undefined);\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('edit an user keybinding', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'escape', command: 'b' });\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: 'b' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape }, command: 'b', isDefault: false }), 'alt+c', undefined);\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('edit an user keybinding with more than one element', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'escape', command: 'b' }, { key: 'alt+shift+g', command: 'c' });\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: 'b' }, { key: 'alt+shift+g', command: 'c' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape }, command: 'b', isDefault: false }), 'alt+c', undefined);\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('remove a default keybinding', async () => {\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: '-a' }];\n\t\tawait testObject.removeKeybinding(aResolvedKeybindingItem({ command: 'a', firstChord: { keyCode: KeyCode.KeyC, modifiers: { altKey: true } } }));\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('remove a default keybinding should not ad duplicate entries', async () => {\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: '-a' }];\n\t\tawait testObject.removeKeybinding(aResolvedKeybindingItem({ command: 'a', firstChord: { keyCode: KeyCode.KeyC, modifiers: { altKey: true } } }));\n\t\tawait testObject.removeKeybinding(aResolvedKeybindingItem({ command: 'a', firstChord: { keyCode: KeyCode.KeyC, modifiers: { altKey: true } } }));\n\t\tawait testObject.removeKeybinding(aResolvedKeybindingItem({ command: 'a', firstChord: { keyCode: KeyCode.KeyC, modifiers: { altKey: true } } }));\n\t\tawait testObject.removeKeybinding(aResolvedKeybindingItem({ command: 'a', firstChord: { keyCode: KeyCode.KeyC, modifiers: { altKey: true } } }));\n\t\tawait testObject.removeKeybinding(aResolvedKeybindingItem({ command: 'a', firstChord: { keyCode: KeyCode.KeyC, modifiers: { altKey: true } } }));\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('remove a user keybinding', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: 'b' });\n\t\tawait testObject.removeKeybinding(aResolvedKeybindingItem({ command: 'b', firstChord: { keyCode: KeyCode.KeyC, modifiers: { altKey: true } }, isDefault: false }));\n\t\tassert.deepStrictEqual(await getUserKeybindings(), []);\n\t});\n\n\ttest('reset an edited keybinding', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: 'b' });\n\t\tawait testObject.resetKeybinding(aResolvedKeybindingItem({ command: 'b', firstChord: { keyCode: KeyCode.KeyC, modifiers: { altKey: true } }, isDefault: false }));\n\t\tassert.deepStrictEqual(await getUserKeybindings(), []);\n\t});\n\n\ttest('reset a removed keybinding', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: '-b' });\n\t\tawait testObject.resetKeybinding(aResolvedKeybindingItem({ command: 'b', isDefault: false }));\n\t\tassert.deepStrictEqual(await getUserKeybindings(), []);\n\t});\n\n\ttest('reset multiple removed keybindings', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: '-b' });\n\t\tawait writeToKeybindingsFile({ key: 'alt+shift+c', command: '-b' });\n\t\tawait writeToKeybindingsFile({ key: 'escape', command: '-b' });\n\t\tawait testObject.resetKeybinding(aResolvedKeybindingItem({ command: 'b', isDefault: false }));\n\t\tassert.deepStrictEqual(await getUserKeybindings(), []);\n\t});\n\n\ttest('add a new keybinding to unassigned keybinding', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: '-a' });\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: '-a' }, { key: 'shift+alt+c', command: 'a' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ command: 'a', isDefault: false }), 'shift+alt+c', undefined);\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('add when expression', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: '-a' });\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: '-a' }, { key: 'shift+alt+c', command: 'a', when: 'editorTextFocus' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ command: 'a', isDefault: false }), 'shift+alt+c', 'editorTextFocus');\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('update command and when expression', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: '-a', when: 'editorTextFocus && !editorReadonly' });\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: '-a', when: 'editorTextFocus && !editorReadonly' }, { key: 'shift+alt+c', command: 'a', when: 'editorTextFocus' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ command: 'a', isDefault: false }), 'shift+alt+c', 'editorTextFocus');\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('update when expression', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: '-a', when: 'editorTextFocus && !editorReadonly' }, { key: 'shift+alt+c', command: 'a', when: 'editorTextFocus && !editorReadonly' });\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: '-a', when: 'editorTextFocus && !editorReadonly' }, { key: 'shift+alt+c', command: 'a', when: 'editorTextFocus' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ command: 'a', isDefault: false, when: 'editorTextFocus && !editorReadonly' }), 'shift+alt+c', 'editorTextFocus');\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('remove when expression', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: '-a', when: 'editorTextFocus && !editorReadonly' });\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: '-a', when: 'editorTextFocus && !editorReadonly' }, { key: 'shift+alt+c', command: 'a' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ command: 'a', isDefault: false }), 'shift+alt+c', undefined);\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\tasync function writeToKeybindingsFile(...keybindings: IUserFriendlyKeybinding[]): Promise<void> {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.keybindingsResource, VSBuffer.fromString(JSON.stringify(keybindings || [])));\n\t}\n\n\tasync function getUserKeybindings(): Promise<IUserFriendlyKeybinding[]> {\n\t\treturn json.parse((await fileService.readFile(userDataProfileService.currentProfile.keybindingsResource)).value.toString());\n\t}\n\n\tfunction aResolvedKeybindingItem({ command, when, isDefault, firstChord, secondChord }: { command?: string; when?: string; isDefault?: boolean; firstChord?: { keyCode: KeyCode; modifiers?: Modifiers }; secondChord?: { keyCode: KeyCode; modifiers?: Modifiers } }): ResolvedKeybindingItem {\n\t\tconst aSimpleKeybinding = function (chord: { keyCode: KeyCode; modifiers?: Modifiers }): KeyCodeChord {\n\t\t\tconst { ctrlKey, shiftKey, altKey, metaKey } = chord.modifiers || { ctrlKey: false, shiftKey: false, altKey: false, metaKey: false };\n\t\t\treturn new KeyCodeChord(ctrlKey!, shiftKey!, altKey!, metaKey!, chord.keyCode);\n\t\t};\n\t\tconst chords: KeyCodeChord[] = [];\n\t\tif (firstChord) {\n\t\t\tchords.push(aSimpleKeybinding(firstChord));\n\t\t\tif (secondChord) {\n\t\t\t\tchords.push(aSimpleKeybinding(secondChord));\n\t\t\t}\n\t\t}\n\t\tconst keybinding = chords.length > 0 ? new USLayoutResolvedKeybinding(chords, OS) : undefined;\n\t\treturn new ResolvedKeybindingItem(keybinding, command || 'some command', null, when ? ContextKeyExpr.deserialize(when) : undefined, isDefault === undefined ? true : isDefault, null, false);\n\t}\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as json from '../../../../../base/common/json.js';\nimport { KeyCode } from '../../../../../base/common/keyCodes.js';\nimport { KeyCodeChord } from '../../../../../base/common/keybindings.js';\nimport { OS } from '../../../../../base/common/platform.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IEnvironmentService } from '../../../../../platform/environment/common/environment.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { IUserFriendlyKeybinding } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ResolvedKeybindingItem } from '../../../../../platform/keybinding/common/resolvedKeybindingItem.js';\nimport { USLayoutResolvedKeybinding } from '../../../../../platform/keybinding/common/usLayoutResolvedKeybinding.js';\nimport { NullLogService } from '../../../../../platform/log/common/log.js';\nimport { KeybindingsEditingService } from '../../common/keybindingEditing.js';\nimport { ITextFileService } from '../../../textfile/common/textfiles.js';\nimport { TestEnvironmentService, workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\nimport { FileService } from '../../../../../platform/files/common/fileService.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { FileUserDataProvider } from '../../../../../platform/userData/common/fileUserDataProvider.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { joinPath } from '../../../../../base/common/resources.js';\nimport { InMemoryFileSystemProvider } from '../../../../../platform/files/common/inMemoryFilesystemProvider.js';\nimport { VSBuffer } from '../../../../../base/common/buffer.js';\nimport { UserDataProfilesService } from '../../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { UserDataProfileService } from '../../../userDataProfile/common/userDataProfileService.js';\nimport { IUserDataProfileService } from '../../../userDataProfile/common/userDataProfile.js';\nimport { UriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentityService.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\ninterface Modifiers {\n\tmetaKey?: boolean;\n\tctrlKey?: boolean;\n\taltKey?: boolean;\n\tshiftKey?: boolean;\n}\n\nconst ROOT = URI.file('tests').with({ scheme: 'vscode-tests' });\n\nsuite('KeybindingsEditing', () => {\n\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\tlet instantiationService: TestInstantiationService;\n\tlet fileService: IFileService;\n\tlet environmentService: IEnvironmentService;\n\tlet userDataProfileService: IUserDataProfileService;\n\tlet testObject: KeybindingsEditingService;\n\n\tsetup(async () => {\n\n\t\tenvironmentService = TestEnvironmentService;\n\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst userFolder = joinPath(ROOT, 'User');\n\t\tawait fileService.createFolder(userFolder);\n\n\t\tconst configService = new TestConfigurationService();\n\t\tconfigService.setUserConfiguration('files', { 'eol': '\\n' });\n\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService));\n\t\tuserDataProfileService = disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\n\t\tinstantiationService = workbenchInstantiationService({\n\t\t\tfileService: () => fileService,\n\t\t\tconfigurationService: () => configService,\n\t\t\tenvironmentService: () => environmentService\n\t\t}, disposables);\n\n\t\ttestObject = disposables.add(instantiationService.createInstance(KeybindingsEditingService));\n\t});\n\n\ttest('errors cases - parse errors', async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.keybindingsResource, VSBuffer.fromString(',,,,,,,,,,,,,,'));\n\t\ttry {\n\t\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape } }), 'alt+c', undefined);\n\t\t\tassert.fail('Should fail with parse errors');\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.message, 'Unable to write to the keybindings configuration file. Please open it to correct errors/warnings in the file and try again.');\n\t\t}\n\t});\n\n\ttest('errors cases - parse errors 2', async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.keybindingsResource, VSBuffer.fromString('[{\"key\": }]'));\n\t\ttry {\n\t\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape } }), 'alt+c', undefined);\n\t\t\tassert.fail('Should fail with parse errors');\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.message, 'Unable to write to the keybindings configuration file. Please open it to correct errors/warnings in the file and try again.');\n\t\t}\n\t});\n\n\ttest('errors cases - dirty', () => {\n\t\tinstantiationService.stub(ITextFileService, 'isDirty', true);\n\t\treturn testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape } }), 'alt+c', undefined)\n\t\t\t.then(() => assert.fail('Should fail with dirty error'),\n\t\t\t\terror => assert.strictEqual(error.message, 'Unable to write because the keybindings configuration file has unsaved changes. Please save it first and then try again.'));\n\t});\n\n\ttest('errors cases - did not find an array', async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.keybindingsResource, VSBuffer.fromString('{\"key\": \"alt+c\", \"command\": \"hello\"}'));\n\t\ttry {\n\t\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape } }), 'alt+c', undefined);\n\t\t\tassert.fail('Should fail');\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.message, 'Unable to write to the keybindings configuration file. It has an object which is not of type Array. Please open the file to clean up and try again.');\n\t\t}\n\t});\n\n\ttest('edit a default keybinding to an empty file', async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.keybindingsResource, VSBuffer.fromString(''));\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: 'a' }, { key: 'escape', command: '-a' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape }, command: 'a' }), 'alt+c', undefined);\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('edit a default keybinding to an empty array', async () => {\n\t\tawait writeToKeybindingsFile();\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: 'a' }, { key: 'escape', command: '-a' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape }, command: 'a' }), 'alt+c', undefined);\n\t\treturn assert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('edit a default keybinding in an existing array', async () => {\n\t\tawait writeToKeybindingsFile({ command: 'b', key: 'shift+c' });\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'shift+c', command: 'b' }, { key: 'alt+c', command: 'a' }, { key: 'escape', command: '-a' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape }, command: 'a' }), 'alt+c', undefined);\n\t\treturn assert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('add another keybinding', async () => {\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: 'a' }];\n\t\tawait testObject.addKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape }, command: 'a' }), 'alt+c', undefined);\n\t\treturn assert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('add a new default keybinding', async () => {\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: 'a' }];\n\t\tawait testObject.addKeybinding(aResolvedKeybindingItem({ command: 'a' }), 'alt+c', undefined);\n\t\treturn assert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('add a new default keybinding using edit', async () => {\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: 'a' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ command: 'a' }), 'alt+c', undefined);\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('edit an user keybinding', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'escape', command: 'b' });\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: 'b' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape }, command: 'b', isDefault: false }), 'alt+c', undefined);\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('edit an user keybinding with more than one element', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'escape', command: 'b' }, { key: 'alt+shift+g', command: 'c' });\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: 'b' }, { key: 'alt+shift+g', command: 'c' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ firstChord: { keyCode: KeyCode.Escape }, command: 'b', isDefault: false }), 'alt+c', undefined);\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('remove a default keybinding', async () => {\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: '-a' }];\n\t\tawait testObject.removeKeybinding(aResolvedKeybindingItem({ command: 'a', firstChord: { keyCode: KeyCode.KeyC, modifiers: { altKey: true } } }));\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('remove a default keybinding should not ad duplicate entries', async () => {\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: '-a' }];\n\t\tawait testObject.removeKeybinding(aResolvedKeybindingItem({ command: 'a', firstChord: { keyCode: KeyCode.KeyC, modifiers: { altKey: true } } }));\n\t\tawait testObject.removeKeybinding(aResolvedKeybindingItem({ command: 'a', firstChord: { keyCode: KeyCode.KeyC, modifiers: { altKey: true } } }));\n\t\tawait testObject.removeKeybinding(aResolvedKeybindingItem({ command: 'a', firstChord: { keyCode: KeyCode.KeyC, modifiers: { altKey: true } } }));\n\t\tawait testObject.removeKeybinding(aResolvedKeybindingItem({ command: 'a', firstChord: { keyCode: KeyCode.KeyC, modifiers: { altKey: true } } }));\n\t\tawait testObject.removeKeybinding(aResolvedKeybindingItem({ command: 'a', firstChord: { keyCode: KeyCode.KeyC, modifiers: { altKey: true } } }));\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('remove a user keybinding', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: 'b' });\n\t\tawait testObject.removeKeybinding(aResolvedKeybindingItem({ command: 'b', firstChord: { keyCode: KeyCode.KeyC, modifiers: { altKey: true } }, isDefault: false }));\n\t\tassert.deepStrictEqual(await getUserKeybindings(), []);\n\t});\n\n\ttest('reset an edited keybinding', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: 'b' });\n\t\tawait testObject.resetKeybinding(aResolvedKeybindingItem({ command: 'b', firstChord: { keyCode: KeyCode.KeyC, modifiers: { altKey: true } }, isDefault: false }));\n\t\tassert.deepStrictEqual(await getUserKeybindings(), []);\n\t});\n\n\ttest('reset a removed keybinding', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: '-b' });\n\t\tawait testObject.resetKeybinding(aResolvedKeybindingItem({ command: 'b', isDefault: false }));\n\t\tassert.deepStrictEqual(await getUserKeybindings(), []);\n\t});\n\n\ttest('reset multiple removed keybindings', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: '-b' });\n\t\tawait writeToKeybindingsFile({ key: 'alt+shift+c', command: '-b' });\n\t\tawait writeToKeybindingsFile({ key: 'escape', command: '-b' });\n\t\tawait testObject.resetKeybinding(aResolvedKeybindingItem({ command: 'b', isDefault: false }));\n\t\tassert.deepStrictEqual(await getUserKeybindings(), []);\n\t});\n\n\ttest('add a new keybinding to unassigned keybinding', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: '-a' });\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: '-a' }, { key: 'shift+alt+c', command: 'a' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ command: 'a', isDefault: false }), 'shift+alt+c', undefined);\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('add when expression', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: '-a' });\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: '-a' }, { key: 'shift+alt+c', command: 'a', when: 'editorTextFocus' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ command: 'a', isDefault: false }), 'shift+alt+c', 'editorTextFocus');\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('update command and when expression', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: '-a', when: 'editorTextFocus && !editorReadonly' });\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: '-a', when: 'editorTextFocus && !editorReadonly' }, { key: 'shift+alt+c', command: 'a', when: 'editorTextFocus' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ command: 'a', isDefault: false }), 'shift+alt+c', 'editorTextFocus');\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('update when expression', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: '-a', when: 'editorTextFocus && !editorReadonly' }, { key: 'shift+alt+c', command: 'a', when: 'editorTextFocus && !editorReadonly' });\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: '-a', when: 'editorTextFocus && !editorReadonly' }, { key: 'shift+alt+c', command: 'a', when: 'editorTextFocus' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ command: 'a', isDefault: false, when: 'editorTextFocus && !editorReadonly' }), 'shift+alt+c', 'editorTextFocus');\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\ttest('remove when expression', async () => {\n\t\tawait writeToKeybindingsFile({ key: 'alt+c', command: '-a', when: 'editorTextFocus && !editorReadonly' });\n\t\tconst expected: IUserFriendlyKeybinding[] = [{ key: 'alt+c', command: '-a', when: 'editorTextFocus && !editorReadonly' }, { key: 'shift+alt+c', command: 'a' }];\n\t\tawait testObject.editKeybinding(aResolvedKeybindingItem({ command: 'a', isDefault: false }), 'shift+alt+c', undefined);\n\t\tassert.deepStrictEqual(await getUserKeybindings(), expected);\n\t});\n\n\tasync function writeToKeybindingsFile(...keybindings: IUserFriendlyKeybinding[]): Promise<void> {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.keybindingsResource, VSBuffer.fromString(JSON.stringify(keybindings || [])));\n\t}\n\n\tasync function getUserKeybindings(): Promise<IUserFriendlyKeybinding[]> {\n\t\treturn json.parse((await fileService.readFile(userDataProfileService.currentProfile.keybindingsResource)).value.toString());\n\t}\n\n\tfunction aResolvedKeybindingItem({ command, when, isDefault, firstChord, secondChord }: { command?: string; when?: string; isDefault?: boolean; firstChord?: { keyCode: KeyCode; modifiers?: Modifiers }; secondChord?: { keyCode: KeyCode; modifiers?: Modifiers } }): ResolvedKeybindingItem {\n\t\tconst aSimpleKeybinding = function (chord: { keyCode: KeyCode; modifiers?: Modifiers }): KeyCodeChord {\n\t\t\tconst { ctrlKey, shiftKey, altKey, metaKey } = chord.modifiers || { ctrlKey: false, shiftKey: false, altKey: false, metaKey: false };\n\t\t\treturn new KeyCodeChord(ctrlKey!, shiftKey!, altKey!, metaKey!, chord.keyCode);\n\t\t};\n\t\tconst chords: KeyCodeChord[] = [];\n\t\tif (firstChord) {\n\t\t\tchords.push(aSimpleKeybinding(firstChord));\n\t\t\tif (secondChord) {\n\t\t\t\tchords.push(aSimpleKeybinding(secondChord));\n\t\t\t}\n\t\t}\n\t\tconst keybinding = chords.length > 0 ? new USLayoutResolvedKeybinding(chords, OS) : undefined;\n\t\treturn new ResolvedKeybindingItem(keybinding, command || 'some command', null, when ? ContextKeyExpr.deserialize(when) : undefined, isDefault === undefined ? true : isDefault, null, false);\n\t}\n});\n"]}