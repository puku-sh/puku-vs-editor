{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/editor/test/browser/editorService.test.ts","vs/workbench/services/editor/test/browser/editorService.test.ts"],"names":[],"mappings":"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","file":"editorService.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { EditorActivation, IResourceEditorInput } from '../../../../../platform/editor/common/editor.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { DEFAULT_EDITOR_ASSOCIATION, EditorCloseContext, EditorsOrder, IEditorCloseEvent, EditorInputWithOptions, IEditorPane, IResourceDiffEditorInput, isEditorInputWithOptions, IUntitledTextResourceEditorInput, IUntypedEditorInput, SideBySideEditor, isEditorInput, EditorInputCapabilities } from '../../../../common/editor.js';\nimport { workbenchInstantiationService, TestServiceAccessor, registerTestEditor, TestFileEditorInput, ITestInstantiationService, registerTestResourceEditor, registerTestSideBySideEditor, createEditorPart, registerTestFileEditor, TestTextFileEditor, TestSingletonFileEditorInput, workbenchTeardown } from '../../../../test/browser/workbenchTestServices.js';\nimport { EditorService } from '../../browser/editorService.js';\nimport { IEditorGroup, IEditorGroupsService, GroupDirection, GroupsArrangement } from '../../common/editorGroupsService.js';\nimport { EditorPart } from '../../../../browser/parts/editor/editorPart.js';\nimport { ACTIVE_GROUP, IBaseSaveRevertAllEditorOptions, IEditorService, PreferredGroup, SIDE_GROUP } from '../../common/editorService.js';\nimport { SyncDescriptor } from '../../../../../platform/instantiation/common/descriptors.js';\nimport { FileEditorInput } from '../../../../contrib/files/browser/editors/fileEditorInput.js';\nimport { timeout } from '../../../../../base/common/async.js';\nimport { FileOperationEvent, FileOperation } from '../../../../../platform/files/common/files.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { MockScopableContextKeyService } from '../../../../../platform/keybinding/test/common/mockKeybindingService.js';\nimport { RegisteredEditorPriority } from '../../common/editorResolverService.js';\nimport { WorkspaceTrustUriResponse } from '../../../../../platform/workspace/common/workspaceTrust.js';\nimport { SideBySideEditorInput } from '../../../../common/editor/sideBySideEditorInput.js';\nimport { EditorInput } from '../../../../common/editor/editorInput.js';\nimport { ErrorPlaceholderEditor } from '../../../../browser/parts/editor/editorPlaceholder.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../../editor/common/languages/modesRegistry.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IEditorPaneService } from '../../common/editorPaneService.js';\n\nsuite('EditorService', () => {\n\n\tconst TEST_EDITOR_ID = 'MyTestEditorForEditorService';\n\tconst TEST_EDITOR_INPUT_ID = 'testEditorInputForEditorService';\n\n\tconst disposables = new DisposableStore();\n\n\tlet testLocalInstantiationService: ITestInstantiationService | undefined = undefined;\n\n\tsetup(() => {\n\t\tdisposables.add(registerTestEditor(TEST_EDITOR_ID, [new SyncDescriptor(TestFileEditorInput), new SyncDescriptor(TestSingletonFileEditorInput)], TEST_EDITOR_INPUT_ID));\n\t\tdisposables.add(registerTestResourceEditor());\n\t\tdisposables.add(registerTestSideBySideEditor());\n\t});\n\n\tteardown(async () => {\n\t\tif (testLocalInstantiationService) {\n\t\t\tawait workbenchTeardown(testLocalInstantiationService);\n\t\t\ttestLocalInstantiationService = undefined;\n\t\t}\n\n\t\tdisposables.clear();\n\t});\n\n\tasync function createEditorService(instantiationService: ITestInstantiationService = workbenchInstantiationService(undefined, disposables)): Promise<[EditorPart, EditorService, TestServiceAccessor]> {\n\t\tconst part = await createEditorPart(instantiationService, disposables);\n\t\tinstantiationService.stub(IEditorGroupsService, part);\n\n\t\tconst editorService = disposables.add(instantiationService.createInstance(EditorService, undefined));\n\t\tinstantiationService.stub(IEditorService, editorService);\n\n\t\ttestLocalInstantiationService = instantiationService;\n\n\t\treturn [part, editorService, instantiationService.createInstance(TestServiceAccessor)];\n\t}\n\n\tfunction createTestFileEditorInput(resource: URI, typeId: string): TestFileEditorInput {\n\t\treturn disposables.add(new TestFileEditorInput(resource, typeId));\n\t}\n\n\ttest('openEditor() - basics', async () => {\n\t\tconst [, service, accessor] = await createEditorService();\n\n\t\tawait testOpenBasics(service, accessor.editorPaneService);\n\t});\n\n\ttest('openEditor() - basics (scoped)', async () => {\n\t\tconst [part, service, accessor] = await createEditorService();\n\t\tconst scoped = service.createScoped(part, disposables);\n\t\tawait part.whenReady;\n\n\t\tawait testOpenBasics(scoped, accessor.editorPaneService);\n\t});\n\n\tasync function testOpenBasics(editorService: IEditorService, editorPaneService: IEditorPaneService) {\n\t\tlet input = createTestFileEditorInput(URI.parse('my://resource-basics'), TEST_EDITOR_INPUT_ID);\n\t\tlet otherInput = createTestFileEditorInput(URI.parse('my://resource2-basics'), TEST_EDITOR_INPUT_ID);\n\n\t\tlet activeEditorChangeEventCounter = 0;\n\t\tdisposables.add(editorService.onDidActiveEditorChange(() => {\n\t\t\tactiveEditorChangeEventCounter++;\n\t\t}));\n\n\t\tlet visibleEditorChangeEventCounter = 0;\n\t\tdisposables.add(editorService.onDidVisibleEditorsChange(() => {\n\t\t\tvisibleEditorChangeEventCounter++;\n\t\t}));\n\n\t\tlet willOpenEditorListenerCounter = 0;\n\t\tdisposables.add(editorService.onWillOpenEditor(() => {\n\t\t\twillOpenEditorListenerCounter++;\n\t\t}));\n\n\t\tlet didCloseEditorListenerCounter = 0;\n\t\tdisposables.add(editorService.onDidCloseEditor(() => {\n\t\t\tdidCloseEditorListenerCounter++;\n\t\t}));\n\n\t\tlet willInstantiateEditorPaneListenerCounter = 0;\n\t\tdisposables.add(editorPaneService.onWillInstantiateEditorPane(e => {\n\t\t\tif (e.typeId === TEST_EDITOR_ID) {\n\t\t\t\twillInstantiateEditorPaneListenerCounter++;\n\t\t\t}\n\t\t}));\n\n\t\t// Open input\n\t\tlet editor = await editorService.openEditor(input, { pinned: true });\n\n\t\tassert.strictEqual(editor?.getId(), TEST_EDITOR_ID);\n\t\tassert.strictEqual(editor, editorService.activeEditorPane);\n\t\tassert.strictEqual(1, editorService.count);\n\t\tassert.strictEqual(input, editorService.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE)[0].editor);\n\t\tassert.strictEqual(input, editorService.getEditors(EditorsOrder.SEQUENTIAL)[0].editor);\n\t\tassert.strictEqual(input, editorService.activeEditor);\n\t\tassert.strictEqual(editorService.visibleEditorPanes.length, 1);\n\t\tassert.strictEqual(editorService.visibleEditorPanes[0], editor);\n\t\tassert.ok(!editorService.activeTextEditorControl);\n\t\tassert.ok(!editorService.activeTextEditorLanguageId);\n\t\tassert.strictEqual(editorService.visibleTextEditorControls.length, 0);\n\t\tassert.strictEqual(editorService.getVisibleTextEditorControls(EditorsOrder.MOST_RECENTLY_ACTIVE).length, 0);\n\t\tassert.strictEqual(editorService.isOpened(input), true);\n\t\tassert.strictEqual(editorService.isOpened({ resource: input.resource, typeId: input.typeId, editorId: input.editorId }), true);\n\t\tassert.strictEqual(editorService.isOpened({ resource: input.resource, typeId: input.typeId, editorId: 'unknownTypeId' }), false);\n\t\tassert.strictEqual(editorService.isOpened({ resource: input.resource, typeId: 'unknownTypeId', editorId: input.editorId }), false);\n\t\tassert.strictEqual(editorService.isOpened({ resource: input.resource, typeId: 'unknownTypeId', editorId: 'unknownTypeId' }), false);\n\t\tassert.strictEqual(editorService.isVisible(input), true);\n\t\tassert.strictEqual(editorService.isVisible(otherInput), false);\n\t\tassert.strictEqual(willOpenEditorListenerCounter, 1);\n\t\tassert.strictEqual(activeEditorChangeEventCounter, 1);\n\t\tassert.strictEqual(visibleEditorChangeEventCounter, 1);\n\t\tassert.ok(editorPaneService.didInstantiateEditorPane(TEST_EDITOR_ID));\n\t\tassert.strictEqual(willInstantiateEditorPaneListenerCounter, 1);\n\n\t\t// Close input\n\t\tawait editor?.group.closeEditor(input);\n\n\t\tassert.strictEqual(0, editorService.count);\n\t\tassert.strictEqual(0, editorService.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE).length);\n\t\tassert.strictEqual(0, editorService.getEditors(EditorsOrder.SEQUENTIAL).length);\n\t\tassert.strictEqual(didCloseEditorListenerCounter, 1);\n\t\tassert.strictEqual(activeEditorChangeEventCounter, 2);\n\t\tassert.strictEqual(visibleEditorChangeEventCounter, 2);\n\t\tassert.ok(input.gotDisposed);\n\n\t\t// Open again 2 inputs (disposed editors are ignored!)\n\t\tawait editorService.openEditor(input, { pinned: true });\n\t\tassert.strictEqual(0, editorService.count);\n\n\t\t// Open again 2 inputs (recreate because disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-basics'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-basics'), TEST_EDITOR_INPUT_ID);\n\n\t\tawait editorService.openEditor(input, { pinned: true });\n\t\teditor = await editorService.openEditor(otherInput, { pinned: true });\n\n\t\tassert.strictEqual(2, editorService.count);\n\t\tassert.strictEqual(otherInput, editorService.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE)[0].editor);\n\t\tassert.strictEqual(input, editorService.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE)[1].editor);\n\t\tassert.strictEqual(input, editorService.getEditors(EditorsOrder.SEQUENTIAL)[0].editor);\n\t\tassert.strictEqual(otherInput, editorService.getEditors(EditorsOrder.SEQUENTIAL)[1].editor);\n\t\tassert.strictEqual(editorService.visibleEditorPanes.length, 1);\n\t\tassert.strictEqual(editorService.isOpened(input), true);\n\t\tassert.strictEqual(editorService.isOpened({ resource: input.resource, typeId: input.typeId, editorId: input.editorId }), true);\n\t\tassert.strictEqual(editorService.isOpened(otherInput), true);\n\t\tassert.strictEqual(editorService.isOpened({ resource: otherInput.resource, typeId: otherInput.typeId, editorId: otherInput.editorId }), true);\n\n\t\tassert.strictEqual(activeEditorChangeEventCounter, 4);\n\t\tassert.strictEqual(willOpenEditorListenerCounter, 3);\n\t\tassert.strictEqual(visibleEditorChangeEventCounter, 4);\n\n\t\tconst stickyInput = createTestFileEditorInput(URI.parse('my://resource3-basics'), TEST_EDITOR_INPUT_ID);\n\t\tawait editorService.openEditor(stickyInput, { sticky: true });\n\n\t\tassert.strictEqual(3, editorService.count);\n\n\t\tconst allSequentialEditors = editorService.getEditors(EditorsOrder.SEQUENTIAL);\n\t\tassert.strictEqual(allSequentialEditors.length, 3);\n\t\tassert.strictEqual(stickyInput, allSequentialEditors[0].editor);\n\t\tassert.strictEqual(input, allSequentialEditors[1].editor);\n\t\tassert.strictEqual(otherInput, allSequentialEditors[2].editor);\n\n\t\tconst sequentialEditorsExcludingSticky = editorService.getEditors(EditorsOrder.SEQUENTIAL, { excludeSticky: true });\n\t\tassert.strictEqual(sequentialEditorsExcludingSticky.length, 2);\n\t\tassert.strictEqual(input, sequentialEditorsExcludingSticky[0].editor);\n\t\tassert.strictEqual(otherInput, sequentialEditorsExcludingSticky[1].editor);\n\n\t\tconst mruEditorsExcludingSticky = editorService.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE, { excludeSticky: true });\n\t\tassert.strictEqual(mruEditorsExcludingSticky.length, 2);\n\t\tassert.strictEqual(input, sequentialEditorsExcludingSticky[0].editor);\n\t\tassert.strictEqual(otherInput, sequentialEditorsExcludingSticky[1].editor);\n\t}\n\n\ttest('openEditor() - multiple calls are cancelled and indicated as such', async () => {\n\t\tconst [, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-basics'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-basics'), TEST_EDITOR_INPUT_ID);\n\n\t\tlet activeEditorChangeEventCounter = 0;\n\t\tconst activeEditorChangeListener = service.onDidActiveEditorChange(() => {\n\t\t\tactiveEditorChangeEventCounter++;\n\t\t});\n\n\t\tlet visibleEditorChangeEventCounter = 0;\n\t\tconst visibleEditorChangeListener = service.onDidVisibleEditorsChange(() => {\n\t\t\tvisibleEditorChangeEventCounter++;\n\t\t});\n\n\t\tconst editorP1 = service.openEditor(input, { pinned: true });\n\t\tconst editorP2 = service.openEditor(otherInput, { pinned: true });\n\n\t\tconst editor1 = await editorP1;\n\t\tassert.strictEqual(editor1, undefined);\n\n\t\tconst editor2 = await editorP2;\n\t\tassert.strictEqual(editor2?.input, otherInput);\n\n\t\tassert.strictEqual(activeEditorChangeEventCounter, 1);\n\t\tassert.strictEqual(visibleEditorChangeEventCounter, 1);\n\n\t\tactiveEditorChangeListener.dispose();\n\t\tvisibleEditorChangeListener.dispose();\n\t});\n\n\ttest('openEditor() - same input does not cancel previous one - https://github.com/microsoft/vscode/issues/136684', async () => {\n\t\tconst [, service] = await createEditorService();\n\n\t\tlet input = createTestFileEditorInput(URI.parse('my://resource-basics'), TEST_EDITOR_INPUT_ID);\n\n\t\tlet editorP1 = service.openEditor(input, { pinned: true });\n\t\tlet editorP2 = service.openEditor(input, { pinned: true });\n\n\t\tlet editor1 = await editorP1;\n\t\tassert.strictEqual(editor1?.input, input);\n\n\t\tlet editor2 = await editorP2;\n\t\tassert.strictEqual(editor2?.input, input);\n\n\t\tassert.ok(editor2.group);\n\t\tawait editor2.group.closeAllEditors();\n\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-basics'), TEST_EDITOR_INPUT_ID);\n\t\tconst inputSame = createTestFileEditorInput(URI.parse('my://resource-basics'), TEST_EDITOR_INPUT_ID);\n\n\t\teditorP1 = service.openEditor(input, { pinned: true });\n\t\teditorP2 = service.openEditor(inputSame, { pinned: true });\n\n\t\teditor1 = await editorP1;\n\t\tassert.strictEqual(editor1?.input, input);\n\n\t\teditor2 = await editorP2;\n\t\tassert.strictEqual(editor2?.input, input);\n\t});\n\n\ttest('openEditor() - singleton typed editors reveal instead of split', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input1 = disposables.add(new TestSingletonFileEditorInput(URI.parse('my://resource-basics1'), TEST_EDITOR_INPUT_ID));\n\t\tconst input2 = disposables.add(new TestSingletonFileEditorInput(URI.parse('my://resource-basics2'), TEST_EDITOR_INPUT_ID));\n\n\t\tconst input1Group = (await service.openEditor(input1, { pinned: true }))?.group;\n\t\tconst input2Group = (await service.openEditor(input2, { pinned: true }, SIDE_GROUP))?.group;\n\n\t\tassert.strictEqual(part.activeGroup, input2Group);\n\n\t\tawait service.openEditor(input1, { pinned: true });\n\n\t\tassert.strictEqual(part.activeGroup, input1Group);\n\t});\n\n\ttest('openEditor() - locked groups', async () => {\n\t\tdisposables.add(registerTestFileEditor());\n\n\t\tconst [part, service, accessor] = await createEditorService();\n\n\t\tdisposables.add(accessor.editorResolverService.registerEditor(\n\t\t\t'*.editor-service-locked-group-tests',\n\t\t\t{ id: TEST_EDITOR_INPUT_ID, label: 'Label', priority: RegisteredEditorPriority.exclusive },\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: editor => ({ editor: createTestFileEditorInput(editor.resource, TEST_EDITOR_INPUT_ID) })\n\t\t\t}\n\t\t));\n\n\t\tconst input1: IResourceEditorInput = { resource: URI.parse('file://resource-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input2: IResourceEditorInput = { resource: URI.parse('file://resource2-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input3: IResourceEditorInput = { resource: URI.parse('file://resource3-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input4: IResourceEditorInput = { resource: URI.parse('file://resource4-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input5: IResourceEditorInput = { resource: URI.parse('file://resource5-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input6: IResourceEditorInput = { resource: URI.parse('file://resource6-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input7: IResourceEditorInput = { resource: URI.parse('file://resource7-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\n\t\tconst editor1 = await service.openEditor(input1, { pinned: true });\n\t\tconst editor2 = await service.openEditor(input2, { pinned: true }, SIDE_GROUP);\n\n\t\tconst group1 = editor1?.group;\n\t\tassert.strictEqual(group1?.count, 1);\n\n\t\tconst group2 = editor2?.group;\n\t\tassert.strictEqual(group2?.count, 1);\n\n\t\tgroup2.lock(true);\n\t\tpart.activateGroup(group2.id);\n\n\t\t// Will open in group 1 because group 2 is locked\n\t\tawait service.openEditor(input3, { pinned: true });\n\n\t\tassert.strictEqual(group1.count, 2);\n\t\tassert.strictEqual(group1.activeEditor?.resource?.toString(), input3.resource.toString());\n\t\tassert.strictEqual(group2.count, 1);\n\n\t\t// Will open in group 2 because group was provided\n\t\tawait service.openEditor(input3, { pinned: true }, group2.id);\n\n\t\tassert.strictEqual(group1.count, 2);\n\t\tassert.strictEqual(group2.count, 2);\n\t\tassert.strictEqual(group2.activeEditor?.resource?.toString(), input3.resource.toString());\n\n\t\t// Will reveal editor in group 2 because it is contained\n\t\tawait service.openEditor(input2, { pinned: true }, group2);\n\t\tawait service.openEditor(input2, { pinned: true }, ACTIVE_GROUP);\n\n\t\tassert.strictEqual(group1.count, 2);\n\t\tassert.strictEqual(group2.count, 2);\n\t\tassert.strictEqual(group2.activeEditor?.resource?.toString(), input2.resource.toString());\n\n\t\t// Will open a new group because side group is locked\n\t\tpart.activateGroup(group1.id);\n\t\tconst editor3 = await service.openEditor(input4, { pinned: true }, SIDE_GROUP);\n\t\tassert.strictEqual(part.count, 3);\n\n\t\tconst group3 = editor3?.group;\n\t\tassert.strictEqual(group3?.count, 1);\n\n\t\t// Will reveal editor in group 2 because it is contained\n\t\tawait service.openEditor(input3, { pinned: true }, group2);\n\t\tpart.activateGroup(group1.id);\n\t\tawait service.openEditor(input3, { pinned: true }, SIDE_GROUP);\n\t\tassert.strictEqual(part.count, 3);\n\n\t\t// Will open a new group if all groups are locked\n\t\tgroup1.lock(true);\n\t\tgroup2.lock(true);\n\t\tgroup3.lock(true);\n\n\t\tpart.activateGroup(group1.id);\n\t\tconst editor5 = await service.openEditor(input5, { pinned: true });\n\t\tconst group4 = editor5?.group;\n\t\tassert.strictEqual(group4?.count, 1);\n\t\tassert.strictEqual(group4.activeEditor?.resource?.toString(), input5.resource.toString());\n\t\tassert.strictEqual(part.count, 4);\n\n\t\t// Will open editor in most recently non-locked group\n\t\tgroup1.lock(false);\n\t\tgroup2.lock(false);\n\t\tgroup3.lock(false);\n\t\tgroup4.lock(false);\n\n\t\tpart.activateGroup(group3.id);\n\t\tpart.activateGroup(group2.id);\n\t\tpart.activateGroup(group4.id);\n\t\tgroup4.lock(true);\n\t\tgroup2.lock(true);\n\n\t\tawait service.openEditor(input6, { pinned: true });\n\t\tassert.strictEqual(part.count, 4);\n\t\tassert.strictEqual(part.activeGroup, group3);\n\t\tassert.strictEqual(group3.activeEditor?.resource?.toString(), input6.resource.toString());\n\n\t\t// Will find the right group where editor is already opened in when all groups are locked\n\t\tgroup1.lock(true);\n\t\tgroup2.lock(true);\n\t\tgroup3.lock(true);\n\t\tgroup4.lock(true);\n\n\t\tpart.activateGroup(group1.id);\n\n\t\tawait service.openEditor(input6, { pinned: true });\n\n\t\tassert.strictEqual(part.count, 4);\n\t\tassert.strictEqual(part.activeGroup, group3);\n\t\tassert.strictEqual(group3.activeEditor?.resource?.toString(), input6.resource.toString());\n\n\t\tassert.strictEqual(part.activeGroup, group3);\n\t\tassert.strictEqual(group3.activeEditor?.resource?.toString(), input6.resource.toString());\n\n\t\tpart.activateGroup(group1.id);\n\n\t\tawait service.openEditor(input6, { pinned: true });\n\n\t\tassert.strictEqual(part.count, 4);\n\t\tassert.strictEqual(part.activeGroup, group3);\n\t\tassert.strictEqual(group3.activeEditor?.resource?.toString(), input6.resource.toString());\n\n\t\t// Will reveal an opened editor in the active locked group\n\t\tawait service.openEditor(input7, { pinned: true }, group3);\n\t\tawait service.openEditor(input6, { pinned: true });\n\n\t\tassert.strictEqual(part.count, 4);\n\t\tassert.strictEqual(part.activeGroup, group3);\n\t\tassert.strictEqual(group3.activeEditor?.resource?.toString(), input6.resource.toString());\n\t});\n\n\ttest('locked groups - workbench.editor.revealIfOpen', async () => {\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tconst configurationService = new TestConfigurationService();\n\t\tawait configurationService.setUserConfiguration('workbench', { 'editor': { 'revealIfOpen': true } });\n\t\tinstantiationService.stub(IConfigurationService, configurationService);\n\n\t\tdisposables.add(registerTestFileEditor());\n\n\t\tconst [part, service, accessor] = await createEditorService(instantiationService);\n\n\t\tdisposables.add(accessor.editorResolverService.registerEditor(\n\t\t\t'*.editor-service-locked-group-tests',\n\t\t\t{ id: TEST_EDITOR_INPUT_ID, label: 'Label', priority: RegisteredEditorPriority.exclusive },\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: editor => ({ editor: createTestFileEditorInput(editor.resource, TEST_EDITOR_INPUT_ID) })\n\t\t\t}\n\t\t));\n\n\t\tconst rootGroup = part.activeGroup;\n\t\tconst rightGroup = part.addGroup(rootGroup, GroupDirection.RIGHT);\n\n\t\tpart.activateGroup(rootGroup);\n\n\t\tconst input1: IResourceEditorInput = { resource: URI.parse('file://resource-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input2: IResourceEditorInput = { resource: URI.parse('file://resource2-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input3: IResourceEditorInput = { resource: URI.parse('file://resource3-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input4: IResourceEditorInput = { resource: URI.parse('file://resource4-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\n\t\tawait service.openEditor(input1, rootGroup.id);\n\t\tawait service.openEditor(input2, rootGroup.id);\n\n\t\tassert.strictEqual(part.activeGroup.id, rootGroup.id);\n\n\t\tawait service.openEditor(input3, rightGroup.id);\n\t\tawait service.openEditor(input4, rightGroup.id);\n\n\t\tassert.strictEqual(part.activeGroup.id, rightGroup.id);\n\n\t\trootGroup.lock(true);\n\t\trightGroup.lock(true);\n\n\t\tawait service.openEditor(input1);\n\n\t\tassert.strictEqual(part.activeGroup.id, rootGroup.id);\n\t\tassert.strictEqual(part.activeGroup.activeEditor?.resource?.toString(), input1.resource.toString());\n\n\t\tawait service.openEditor(input3);\n\n\t\tassert.strictEqual(part.activeGroup.id, rightGroup.id);\n\t\tassert.strictEqual(part.activeGroup.activeEditor?.resource?.toString(), input3.resource.toString());\n\n\t\tassert.strictEqual(part.groups.length, 2);\n\t});\n\n\ttest('locked groups - revealIfVisible', async () => {\n\t\tdisposables.add(registerTestFileEditor());\n\n\t\tconst [part, service, accessor] = await createEditorService();\n\n\t\tdisposables.add(accessor.editorResolverService.registerEditor(\n\t\t\t'*.editor-service-locked-group-tests',\n\t\t\t{ id: TEST_EDITOR_INPUT_ID, label: 'Label', priority: RegisteredEditorPriority.exclusive },\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: editor => ({ editor: createTestFileEditorInput(editor.resource, TEST_EDITOR_INPUT_ID) })\n\t\t\t}\n\t\t));\n\n\t\tconst rootGroup = part.activeGroup;\n\t\tconst rightGroup = part.addGroup(rootGroup, GroupDirection.RIGHT);\n\n\t\tpart.activateGroup(rootGroup);\n\n\t\tconst input1: IResourceEditorInput = { resource: URI.parse('file://resource-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input2: IResourceEditorInput = { resource: URI.parse('file://resource2-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input3: IResourceEditorInput = { resource: URI.parse('file://resource3-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input4: IResourceEditorInput = { resource: URI.parse('file://resource4-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\n\t\tawait service.openEditor(input1, rootGroup.id);\n\t\tawait service.openEditor(input2, rootGroup.id);\n\n\t\tassert.strictEqual(part.activeGroup.id, rootGroup.id);\n\n\t\tawait service.openEditor(input3, rightGroup.id);\n\t\tawait service.openEditor(input4, rightGroup.id);\n\n\t\tassert.strictEqual(part.activeGroup.id, rightGroup.id);\n\n\t\trootGroup.lock(true);\n\t\trightGroup.lock(true);\n\n\t\tawait service.openEditor({ ...input2, options: { ...input2.options, revealIfVisible: true } });\n\n\t\tassert.strictEqual(part.activeGroup.id, rootGroup.id);\n\t\tassert.strictEqual(part.activeGroup.activeEditor?.resource?.toString(), input2.resource.toString());\n\n\t\tawait service.openEditor({ ...input4, options: { ...input4.options, revealIfVisible: true } });\n\n\t\tassert.strictEqual(part.activeGroup.id, rightGroup.id);\n\t\tassert.strictEqual(part.activeGroup.activeEditor?.resource?.toString(), input4.resource.toString());\n\n\t\tassert.strictEqual(part.groups.length, 2);\n\t});\n\n\ttest('locked groups - revealIfOpened', async () => {\n\t\tdisposables.add(registerTestFileEditor());\n\n\t\tconst [part, service, accessor] = await createEditorService();\n\n\t\tdisposables.add(accessor.editorResolverService.registerEditor(\n\t\t\t'*.editor-service-locked-group-tests',\n\t\t\t{ id: TEST_EDITOR_INPUT_ID, label: 'Label', priority: RegisteredEditorPriority.exclusive },\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: editor => ({ editor: createTestFileEditorInput(editor.resource, TEST_EDITOR_INPUT_ID) })\n\t\t\t}\n\t\t));\n\n\t\tconst rootGroup = part.activeGroup;\n\t\tconst rightGroup = part.addGroup(rootGroup, GroupDirection.RIGHT);\n\n\t\tpart.activateGroup(rootGroup);\n\n\t\tconst input1: IResourceEditorInput = { resource: URI.parse('file://resource-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input2: IResourceEditorInput = { resource: URI.parse('file://resource2-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input3: IResourceEditorInput = { resource: URI.parse('file://resource3-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input4: IResourceEditorInput = { resource: URI.parse('file://resource4-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\n\t\tawait service.openEditor(input1, rootGroup.id);\n\t\tawait service.openEditor(input2, rootGroup.id);\n\n\t\tassert.strictEqual(part.activeGroup.id, rootGroup.id);\n\n\t\tawait service.openEditor(input3, rightGroup.id);\n\t\tawait service.openEditor(input4, rightGroup.id);\n\n\t\tassert.strictEqual(part.activeGroup.id, rightGroup.id);\n\n\t\trootGroup.lock(true);\n\t\trightGroup.lock(true);\n\n\t\tawait service.openEditor({ ...input1, options: { ...input1.options, revealIfOpened: true } });\n\n\t\tassert.strictEqual(part.activeGroup.id, rootGroup.id);\n\t\tassert.strictEqual(part.activeGroup.activeEditor?.resource?.toString(), input1.resource.toString());\n\n\t\tawait service.openEditor({ ...input3, options: { ...input3.options, revealIfOpened: true } });\n\n\t\tassert.strictEqual(part.activeGroup.id, rightGroup.id);\n\t\tassert.strictEqual(part.activeGroup.activeEditor?.resource?.toString(), input3.resource.toString());\n\n\t\tassert.strictEqual(part.groups.length, 2);\n\t});\n\n\ttest('openEditor() - untyped, typed', () => {\n\t\treturn testOpenEditors(false);\n\t});\n\n\ttest('openEditors() - untyped, typed', () => {\n\t\treturn testOpenEditors(true);\n\t});\n\n\tasync function testOpenEditors(useOpenEditors: boolean) {\n\t\tdisposables.add(registerTestFileEditor());\n\n\t\tconst [part, service, accessor] = await createEditorService();\n\n\t\tlet rootGroup = part.activeGroup;\n\n\t\tlet editorFactoryCalled = 0;\n\t\tlet untitledEditorFactoryCalled = 0;\n\t\tlet diffEditorFactoryCalled = 0;\n\n\t\tlet lastEditorFactoryEditor: IResourceEditorInput | undefined = undefined;\n\t\tlet lastUntitledEditorFactoryEditor: IUntitledTextResourceEditorInput | undefined = undefined;\n\t\tlet lastDiffEditorFactoryEditor: IResourceDiffEditorInput | undefined = undefined;\n\n\t\tdisposables.add(accessor.editorResolverService.registerEditor(\n\t\t\t'*.editor-service-override-tests',\n\t\t\t{ id: TEST_EDITOR_INPUT_ID, label: 'Label', priority: RegisteredEditorPriority.exclusive },\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: editor => {\n\t\t\t\t\teditorFactoryCalled++;\n\t\t\t\t\tlastEditorFactoryEditor = editor;\n\n\t\t\t\t\treturn { editor: createTestFileEditorInput(editor.resource, TEST_EDITOR_INPUT_ID) };\n\t\t\t\t},\n\t\t\t\tcreateUntitledEditorInput: untitledEditor => {\n\t\t\t\t\tuntitledEditorFactoryCalled++;\n\t\t\t\t\tlastUntitledEditorFactoryEditor = untitledEditor;\n\n\t\t\t\t\treturn { editor: createTestFileEditorInput(untitledEditor.resource ?? URI.parse(`untitled://my-untitled-editor-${untitledEditorFactoryCalled}`), TEST_EDITOR_INPUT_ID) };\n\t\t\t\t},\n\t\t\t\tcreateDiffEditorInput: diffEditor => {\n\t\t\t\t\tdiffEditorFactoryCalled++;\n\t\t\t\t\tlastDiffEditorFactoryEditor = diffEditor;\n\n\t\t\t\t\treturn { editor: createTestFileEditorInput(URI.file(`diff-editor-${diffEditorFactoryCalled}`), TEST_EDITOR_INPUT_ID) };\n\t\t\t\t}\n\t\t\t}\n\t\t));\n\n\t\tasync function resetTestState() {\n\t\t\teditorFactoryCalled = 0;\n\t\t\tuntitledEditorFactoryCalled = 0;\n\t\t\tdiffEditorFactoryCalled = 0;\n\n\t\t\tlastEditorFactoryEditor = undefined;\n\t\t\tlastUntitledEditorFactoryEditor = undefined;\n\t\t\tlastDiffEditorFactoryEditor = undefined;\n\n\t\t\tawait workbenchTeardown(accessor.instantiationService);\n\n\t\t\trootGroup = part.activeGroup;\n\t\t}\n\n\t\tasync function openEditor(editor: EditorInputWithOptions | IUntypedEditorInput, group?: PreferredGroup): Promise<IEditorPane | undefined> {\n\t\t\tif (useOpenEditors) {\n\t\t\t\t// The type safety isn't super good here, so we assist with runtime checks\n\t\t\t\t// Open editors expects untyped or editor input with options, you cannot pass a typed editor input\n\t\t\t\t// without options\n\t\t\t\tif (!isEditorInputWithOptions(editor) && isEditorInput(editor)) {\n\t\t\t\t\teditor = { editor: editor, options: {} };\n\t\t\t\t}\n\t\t\t\tconst panes = await service.openEditors([editor], group);\n\t\t\t\treturn panes[0];\n\t\t\t}\n\n\t\t\tif (isEditorInputWithOptions(editor)) {\n\t\t\t\treturn service.openEditor(editor.editor, editor.options, group);\n\t\t\t}\n\n\t\t\treturn service.openEditor(editor, group);\n\t\t}\n\n\t\t// untyped\n\t\t{\n\t\t\t// untyped resource editor, no options, no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests') };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\t\t\t\tlet typedEditor = pane?.input;\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(typedEditor instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(typedEditor.resource.toString(), untypedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.strictEqual(lastEditorFactoryEditor, untypedEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\t// opening the same editor should not create\n\t\t\t\t// a new editor input\n\t\t\t\tawait openEditor(untypedEditor);\n\t\t\t\tassert.strictEqual(pane?.group.activeEditor, typedEditor);\n\n\t\t\t\t// replaceEditors should work too\n\t\t\t\tconst untypedEditorReplacement: IResourceEditorInput = { resource: URI.file('file-replaced.editor-service-override-tests') };\n\t\t\t\tawait service.replaceEditors([{\n\t\t\t\t\teditor: typedEditor,\n\t\t\t\t\treplacement: untypedEditorReplacement\n\t\t\t\t}], rootGroup);\n\n\t\t\t\ttypedEditor = rootGroup.activeEditor!;\n\n\t\t\t\tassert.ok(typedEditor instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(typedEditor?.resource?.toString(), untypedEditorReplacement.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 3);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.strictEqual(lastEditorFactoryEditor, untypedEditorReplacement);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped resource editor, options (override text), no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests'), options: { override: DEFAULT_EDITOR_ASSOCIATION.id } };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\t\t\t\tconst typedEditor = pane?.input;\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(typedEditor instanceof FileEditorInput);\n\t\t\t\tassert.strictEqual(typedEditor.resource.toString(), untypedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\t// opening the same editor should not create\n\t\t\t\t// a new editor input\n\t\t\t\tawait openEditor(untypedEditor);\n\t\t\t\tassert.strictEqual(pane?.group.activeEditor, typedEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped resource editor, options (override text, sticky: true, preserveFocus: true), no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests'), options: { sticky: true, preserveFocus: true, override: DEFAULT_EDITOR_ASSOCIATION.id } };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof FileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), untypedEditor.resource.toString());\n\t\t\t\tassert.strictEqual(pane.group.isSticky(pane.input), true);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t\tawait part.activeGroup.closeEditor(pane.input);\n\t\t\t}\n\n\t\t\t// untyped resource editor, options (override default), no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests'), options: { override: DEFAULT_EDITOR_ASSOCIATION.id } };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof FileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), untypedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped resource editor, options (override: TEST_EDITOR_INPUT_ID), no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests'), options: { override: TEST_EDITOR_INPUT_ID } };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), untypedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.strictEqual(lastEditorFactoryEditor, untypedEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped resource editor, options (sticky: true, preserveFocus: true), no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests'), options: { sticky: true, preserveFocus: true } };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), untypedEditor.resource.toString());\n\t\t\t\tassert.strictEqual(pane.group.isSticky(pane.input), true);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.strictEqual((lastEditorFactoryEditor as IResourceEditorInput).resource.toString(), untypedEditor.resource.toString());\n\t\t\t\tassert.strictEqual((lastEditorFactoryEditor as IResourceEditorInput).options?.preserveFocus, true);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t\tawait part.activeGroup.closeEditor(pane.input);\n\t\t\t}\n\n\t\t\t// untyped resource editor, options (override: TEST_EDITOR_INPUT_ID, sticky: true, preserveFocus: true), no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests'), options: { sticky: true, preserveFocus: true, override: TEST_EDITOR_INPUT_ID } };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), untypedEditor.resource.toString());\n\t\t\t\tassert.strictEqual(pane.group.isSticky(pane.input), true);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.strictEqual((lastEditorFactoryEditor as IResourceEditorInput).resource.toString(), untypedEditor.resource.toString());\n\t\t\t\tassert.strictEqual((lastEditorFactoryEditor as IResourceEditorInput).options?.preserveFocus, true);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t\tawait part.activeGroup.closeEditor(pane.input);\n\t\t\t}\n\n\t\t\t// untyped resource editor, no options, SIDE_GROUP\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests') };\n\t\t\t\tconst pane = await openEditor(untypedEditor, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(accessor.editorGroupService.groups.length, 2);\n\t\t\t\tassert.notStrictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane?.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane?.input.resource.toString(), untypedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.strictEqual(lastEditorFactoryEditor, untypedEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped resource editor, options (override text), SIDE_GROUP\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests'), options: { override: DEFAULT_EDITOR_ASSOCIATION.id } };\n\t\t\t\tconst pane = await openEditor(untypedEditor, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(accessor.editorGroupService.groups.length, 2);\n\t\t\t\tassert.notStrictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane?.input instanceof FileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), untypedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\t\t}\n\n\t\t// Typed\n\t\t{\n\t\t\t// typed editor, no options, no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor });\n\t\t\t\tlet typedInput = pane?.input;\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(typedInput instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(typedInput.resource.toString(), typedEditor.resource.toString());\n\n\t\t\t\t// It's a typed editor input so the resolver should not have been called\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\t// opening the same editor should not create\n\t\t\t\t// a new editor input\n\t\t\t\tawait openEditor(typedEditor);\n\t\t\t\tassert.strictEqual(pane?.group.activeEditor, typedInput);\n\n\t\t\t\t// replaceEditors should work too\n\t\t\t\tconst typedEditorReplacement = createTestFileEditorInput(URI.file('file-replaced.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tawait service.replaceEditors([{\n\t\t\t\t\teditor: typedEditor,\n\t\t\t\t\treplacement: typedEditorReplacement\n\t\t\t\t}], rootGroup);\n\n\t\t\t\ttypedInput = rootGroup.activeEditor!;\n\n\t\t\t\tassert.ok(typedInput instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(typedInput.resource.toString(), typedEditorReplacement.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// typed editor, no options, no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor });\n\t\t\t\tconst typedInput = pane?.input;\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(typedInput instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(typedInput.resource.toString(), typedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\t// opening the same editor should not create\n\t\t\t\t// a new editor input\n\t\t\t\tawait openEditor(typedEditor);\n\t\t\t\tassert.strictEqual(pane?.group.activeEditor, typedEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// typed editor, options (no override, sticky: true, preserveFocus: true), no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor, options: { sticky: true, preserveFocus: true } });\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), typedEditor.resource.toString());\n\t\t\t\tassert.strictEqual(pane.group.isSticky(pane.input), true);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t\tawait part.activeGroup.closeEditor(pane.input);\n\t\t\t}\n\n\t\t\t// typed editor, options (override default), no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor, options: { override: DEFAULT_EDITOR_ASSOCIATION.id } });\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\t// We shouldn't have resolved because it is a typed editor, even though we have an override specified\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), typedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// typed editor, options (override: TEST_EDITOR_INPUT_ID), no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor, options: { override: TEST_EDITOR_INPUT_ID } });\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), typedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// typed editor, options (sticky: true, preserveFocus: true), no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor, options: { sticky: true, preserveFocus: true } });\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), typedEditor.resource.toString());\n\t\t\t\tassert.strictEqual(pane.group.isSticky(pane.input), true);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t\tawait part.activeGroup.closeEditor(pane.input);\n\t\t\t}\n\n\t\t\t// typed editor, options (override: TEST_EDITOR_INPUT_ID, sticky: true, preserveFocus: true), no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor, options: { sticky: true, preserveFocus: true, override: TEST_EDITOR_INPUT_ID } });\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), typedEditor.resource.toString());\n\t\t\t\tassert.strictEqual(pane.group.isSticky(pane.input), true);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t\tawait part.activeGroup.closeEditor(pane.input);\n\t\t\t}\n\n\t\t\t// typed editor, no options, SIDE_GROUP\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor }, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(accessor.editorGroupService.groups.length, 2);\n\t\t\t\tassert.notStrictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane?.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane?.input.resource.toString(), typedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// typed editor, options (no override), SIDE_GROUP\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor }, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(accessor.editorGroupService.groups.length, 2);\n\t\t\t\tassert.notStrictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane?.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), typedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\t\t}\n\n\t\t// Untyped untitled\n\t\t{\n\t\t\t// untyped untitled editor, no options, no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IUntitledTextResourceEditorInput = { resource: undefined, options: { override: TEST_EDITOR_INPUT_ID } };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.scheme, 'untitled');\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.strictEqual(lastUntitledEditorFactoryEditor, untypedEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped untitled editor, no options, SIDE_GROUP\n\t\t\t{\n\t\t\t\tconst untypedEditor: IUntitledTextResourceEditorInput = { resource: undefined, options: { override: TEST_EDITOR_INPUT_ID } };\n\t\t\t\tconst pane = await openEditor(untypedEditor, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(accessor.editorGroupService.groups.length, 2);\n\t\t\t\tassert.notStrictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane?.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane?.input.resource.scheme, 'untitled');\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.strictEqual(lastUntitledEditorFactoryEditor, untypedEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped untitled editor with associated resource, no options, no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IUntitledTextResourceEditorInput = { resource: URI.file('file-original.editor-service-override-tests').with({ scheme: 'untitled' }) };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\t\t\t\tconst typedEditor = pane?.input;\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(typedEditor instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(typedEditor.resource.scheme, 'untitled');\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.strictEqual(lastUntitledEditorFactoryEditor, untypedEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\t// opening the same editor should not create\n\t\t\t\t// a new editor input\n\t\t\t\tawait openEditor(untypedEditor);\n\t\t\t\tassert.strictEqual(pane?.group.activeEditor, typedEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped untitled editor, options (sticky: true, preserveFocus: true), no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IUntitledTextResourceEditorInput = { resource: undefined, options: { sticky: true, preserveFocus: true, override: TEST_EDITOR_INPUT_ID } };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.scheme, 'untitled');\n\t\t\t\tassert.strictEqual(pane.group.isSticky(pane.input), true);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.strictEqual(lastUntitledEditorFactoryEditor, untypedEditor);\n\t\t\t\tassert.strictEqual((lastUntitledEditorFactoryEditor as IUntitledTextResourceEditorInput).options?.preserveFocus, true);\n\t\t\t\tassert.strictEqual((lastUntitledEditorFactoryEditor as IUntitledTextResourceEditorInput).options?.sticky, true);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\t\t}\n\n\t\t// Untyped diff\n\t\t{\n\t\t\t// untyped diff editor, no options, no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceDiffEditorInput = {\n\t\t\t\t\toriginal: { resource: URI.file('file-original.editor-service-override-tests') },\n\t\t\t\t\tmodified: { resource: URI.file('file-modified.editor-service-override-tests') },\n\t\t\t\t\toptions: { override: TEST_EDITOR_INPUT_ID }\n\t\t\t\t};\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\t\t\t\tconst typedEditor = pane?.input;\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(typedEditor instanceof TestFileEditorInput);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 1);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.strictEqual(lastDiffEditorFactoryEditor, untypedEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped diff editor, no options, SIDE_GROUP\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceDiffEditorInput = {\n\t\t\t\t\toriginal: { resource: URI.file('file-original.editor-service-override-tests') },\n\t\t\t\t\tmodified: { resource: URI.file('file-modified.editor-service-override-tests') },\n\t\t\t\t\toptions: { override: TEST_EDITOR_INPUT_ID }\n\t\t\t\t};\n\t\t\t\tconst pane = await openEditor(untypedEditor, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(accessor.editorGroupService.groups.length, 2);\n\t\t\t\tassert.notStrictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane?.input instanceof TestFileEditorInput);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 1);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.strictEqual(lastDiffEditorFactoryEditor, untypedEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped diff editor, options (sticky: true, preserveFocus: true), no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceDiffEditorInput = {\n\t\t\t\t\toriginal: { resource: URI.file('file-original.editor-service-override-tests') },\n\t\t\t\t\tmodified: { resource: URI.file('file-modified.editor-service-override-tests') },\n\t\t\t\t\toptions: {\n\t\t\t\t\t\toverride: TEST_EDITOR_INPUT_ID, sticky: true, preserveFocus: true\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.group.isSticky(pane.input), true);\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 1);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.strictEqual(lastDiffEditorFactoryEditor, untypedEditor);\n\t\t\t\tassert.strictEqual((lastDiffEditorFactoryEditor as IUntitledTextResourceEditorInput).options?.preserveFocus, true);\n\t\t\t\tassert.strictEqual((lastDiffEditorFactoryEditor as IUntitledTextResourceEditorInput).options?.sticky, true);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\t\t}\n\n\t\t// typed editor, not registered\n\t\t{\n\n\t\t\t// no options, no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.something'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor });\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input, typedEditor);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// no options, SIDE_GROUP\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.something'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor }, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(accessor.editorGroupService.groups.length, 2);\n\t\t\t\tassert.notStrictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane?.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane?.input, typedEditor);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\t\t}\n\n\t\t// typed editor, not supporting `toUntyped`\n\t\t{\n\n\t\t\t// no options, no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.something'), TEST_EDITOR_INPUT_ID);\n\t\t\t\ttypedEditor.disableToUntyped = true;\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor });\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input, typedEditor);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// no options, SIDE_GROUP\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.something'), TEST_EDITOR_INPUT_ID);\n\t\t\t\ttypedEditor.disableToUntyped = true;\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor }, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(accessor.editorGroupService.groups.length, 2);\n\t\t\t\tassert.notStrictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane?.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane?.input, typedEditor);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\t\t}\n\n\t\t// openEditors with >1 editor\n\t\tif (useOpenEditors) {\n\n\t\t\t// mix of untyped and typed editors\n\t\t\t{\n\t\t\t\tconst untypedEditor1: IResourceEditorInput = { resource: URI.file('file1.editor-service-override-tests') };\n\t\t\t\tconst untypedEditor2: IResourceEditorInput = { resource: URI.file('file2.editor-service-override-tests') };\n\t\t\t\tconst untypedEditor3: EditorInputWithOptions = { editor: createTestFileEditorInput(URI.file('file3.editor-service-override-tests'), TEST_EDITOR_INPUT_ID) };\n\t\t\t\tconst untypedEditor4: EditorInputWithOptions = { editor: createTestFileEditorInput(URI.file('file4.editor-service-override-tests'), TEST_EDITOR_INPUT_ID) };\n\t\t\t\tconst untypedEditor5: IResourceEditorInput = { resource: URI.file('file5.editor-service-override-tests') };\n\t\t\t\tconst pane = (await service.openEditors([untypedEditor1, untypedEditor2, untypedEditor3, untypedEditor4, untypedEditor5]))[0];\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.strictEqual(pane?.group.count, 5);\n\n\t\t\t\t// Only the untyped editors should have had factories called (3 untyped editors)\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 3);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\t\t}\n\n\t\t// untyped default editor\n\t\t{\n\t\t\t// untyped default editor, options: revealIfVisible\n\t\t\t{\n\t\t\t\tconst untypedEditor1: IResourceEditorInput = { resource: URI.file('file-1'), options: { revealIfVisible: true, pinned: true } };\n\t\t\t\tconst untypedEditor2: IResourceEditorInput = { resource: URI.file('file-2'), options: { pinned: true } };\n\n\t\t\t\tconst rootPane = await openEditor(untypedEditor1);\n\t\t\t\tconst sidePane = await openEditor(untypedEditor2, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(rootPane?.group.count, 1);\n\t\t\t\tassert.strictEqual(sidePane?.group.count, 1);\n\n\t\t\t\taccessor.editorGroupService.activateGroup(sidePane.group);\n\n\t\t\t\tawait openEditor(untypedEditor1);\n\n\t\t\t\tassert.strictEqual(rootPane?.group.count, 1);\n\t\t\t\tassert.strictEqual(sidePane?.group.count, 1);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped default editor, options: revealIfOpened\n\t\t\t{\n\t\t\t\tconst untypedEditor1: IResourceEditorInput = { resource: URI.file('file-1'), options: { revealIfOpened: true, pinned: true } };\n\t\t\t\tconst untypedEditor2: IResourceEditorInput = { resource: URI.file('file-2'), options: { pinned: true } };\n\n\t\t\t\tconst rootPane = await openEditor(untypedEditor1);\n\t\t\t\tawait openEditor(untypedEditor2);\n\t\t\t\tassert.strictEqual(rootPane?.group.activeEditor?.resource?.toString(), untypedEditor2.resource.toString());\n\t\t\t\tconst sidePane = await openEditor(untypedEditor2, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(rootPane?.group.count, 2);\n\t\t\t\tassert.strictEqual(sidePane?.group.count, 1);\n\n\t\t\t\taccessor.editorGroupService.activateGroup(sidePane.group);\n\n\t\t\t\tawait openEditor(untypedEditor1);\n\n\t\t\t\tassert.strictEqual(rootPane?.group.count, 2);\n\t\t\t\tassert.strictEqual(sidePane?.group.count, 1);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\t\t}\n\t}\n\n\ttest('openEditor() applies options if editor already opened', async () => {\n\t\tdisposables.add(registerTestFileEditor());\n\n\t\tconst [, service, accessor] = await createEditorService();\n\n\t\tdisposables.add(accessor.editorResolverService.registerEditor(\n\t\t\t'*.editor-service-override-tests',\n\t\t\t{ id: TEST_EDITOR_INPUT_ID, label: 'Label', priority: RegisteredEditorPriority.exclusive },\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: editor => ({ editor: createTestFileEditorInput(editor.resource, TEST_EDITOR_INPUT_ID) })\n\t\t\t}\n\t\t));\n\n\t\t// Typed editor\n\t\tlet pane = await service.openEditor(createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID));\n\t\tpane = await service.openEditor(createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID), { sticky: true, preserveFocus: true });\n\n\t\tassert.strictEqual(pane?.options?.sticky, true);\n\t\tassert.strictEqual(pane?.options?.preserveFocus, true);\n\n\t\tawait pane.group.closeAllEditors();\n\n\t\t// Untyped editor (without registered editor)\n\t\tpane = await service.openEditor({ resource: URI.file('resource-openEditors') });\n\t\tpane = await service.openEditor({ resource: URI.file('resource-openEditors'), options: { sticky: true, preserveFocus: true } });\n\n\t\tassert.ok(pane instanceof TestTextFileEditor);\n\t\tassert.strictEqual(pane?.options?.sticky, true);\n\t\tassert.strictEqual(pane?.options?.preserveFocus, true);\n\n\t\t// Untyped editor (with registered editor)\n\t\tpane = await service.openEditor({ resource: URI.file('file.editor-service-override-tests') });\n\t\tpane = await service.openEditor({ resource: URI.file('file.editor-service-override-tests'), options: { sticky: true, preserveFocus: true } });\n\n\t\tassert.strictEqual(pane?.options?.sticky, true);\n\t\tassert.strictEqual(pane?.options?.preserveFocus, true);\n\t});\n\n\ttest('isOpen() with side by side editor', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst sideBySideInput = new SideBySideEditorInput('sideBySide', '', input, otherInput, service);\n\n\t\tconst editor1 = await service.openEditor(sideBySideInput, { pinned: true });\n\t\tassert.strictEqual(part.activeGroup.count, 1);\n\n\t\tassert.strictEqual(service.isOpened(input), false);\n\t\tassert.strictEqual(service.isOpened(otherInput), true);\n\t\tassert.strictEqual(service.isOpened({ resource: input.resource, typeId: input.typeId, editorId: input.editorId }), false);\n\t\tassert.strictEqual(service.isOpened({ resource: otherInput.resource, typeId: otherInput.typeId, editorId: otherInput.editorId }), true);\n\n\t\tconst editor2 = await service.openEditor(input, { pinned: true });\n\t\tassert.strictEqual(part.activeGroup.count, 2);\n\n\t\tassert.strictEqual(service.isOpened(input), true);\n\t\tassert.strictEqual(service.isOpened(otherInput), true);\n\t\tassert.strictEqual(service.isOpened({ resource: input.resource, typeId: input.typeId, editorId: input.editorId }), true);\n\t\tassert.strictEqual(service.isOpened({ resource: otherInput.resource, typeId: otherInput.typeId, editorId: otherInput.editorId }), true);\n\n\t\tawait editor2?.group.closeEditor(input);\n\t\tassert.strictEqual(part.activeGroup.count, 1);\n\n\t\tassert.strictEqual(service.isOpened(input), false);\n\t\tassert.strictEqual(service.isOpened(otherInput), true);\n\t\tassert.strictEqual(service.isOpened({ resource: input.resource, typeId: input.typeId, editorId: input.editorId }), false);\n\t\tassert.strictEqual(service.isOpened({ resource: otherInput.resource, typeId: otherInput.typeId, editorId: otherInput.editorId }), true);\n\n\t\tawait editor1?.group.closeEditor(sideBySideInput);\n\n\t\tassert.strictEqual(service.isOpened(input), false);\n\t\tassert.strictEqual(service.isOpened(otherInput), false);\n\t\tassert.strictEqual(service.isOpened({ resource: input.resource, typeId: input.typeId, editorId: input.editorId }), false);\n\t\tassert.strictEqual(service.isOpened({ resource: otherInput.resource, typeId: otherInput.typeId, editorId: otherInput.editorId }), false);\n\t});\n\n\ttest('openEditors() / replaceEditors()', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst replaceInput = createTestFileEditorInput(URI.parse('my://resource3-openEditors'), TEST_EDITOR_INPUT_ID);\n\n\t\t// Open editors\n\t\tawait service.openEditors([{ editor: input }, { editor: otherInput }]);\n\t\tassert.strictEqual(part.activeGroup.count, 2);\n\n\t\t// Replace editors\n\t\tawait service.replaceEditors([{ editor: input, replacement: replaceInput }], part.activeGroup);\n\t\tassert.strictEqual(part.activeGroup.count, 2);\n\t\tassert.strictEqual(part.activeGroup.getIndexOfEditor(replaceInput), 0);\n\t});\n\n\ttest('openEditors() handles workspace trust (typed editors)', async () => {\n\t\tconst [part, service, accessor] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\n\t\tconst input3 = createTestFileEditorInput(URI.parse('my://resource3-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst input4 = createTestFileEditorInput(URI.parse('my://resource4-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst sideBySideInput = new SideBySideEditorInput('side by side', undefined, input3, input4, service);\n\n\t\tconst oldHandler = accessor.workspaceTrustRequestService.requestOpenUrisHandler;\n\n\t\ttry {\n\n\t\t\t// Trust: cancel\n\t\t\tlet trustEditorUris: URI[] = [];\n\t\t\taccessor.workspaceTrustRequestService.requestOpenUrisHandler = async uris => {\n\t\t\t\ttrustEditorUris = uris;\n\t\t\t\treturn WorkspaceTrustUriResponse.Cancel;\n\t\t\t};\n\n\t\t\tawait service.openEditors([{ editor: input1 }, { editor: input2 }, { editor: sideBySideInput }], undefined, { validateTrust: true });\n\t\t\tassert.strictEqual(part.activeGroup.count, 0);\n\t\t\tassert.strictEqual(trustEditorUris.length, 4);\n\t\t\tassert.strictEqual(trustEditorUris.some(uri => uri.toString() === input1.resource.toString()), true);\n\t\t\tassert.strictEqual(trustEditorUris.some(uri => uri.toString() === input2.resource.toString()), true);\n\t\t\tassert.strictEqual(trustEditorUris.some(uri => uri.toString() === input3.resource.toString()), true);\n\t\t\tassert.strictEqual(trustEditorUris.some(uri => uri.toString() === input4.resource.toString()), true);\n\n\t\t\t// Trust: open in new window\n\t\t\taccessor.workspaceTrustRequestService.requestOpenUrisHandler = async uris => WorkspaceTrustUriResponse.OpenInNewWindow;\n\n\t\t\tawait service.openEditors([{ editor: input1 }, { editor: input2 }, { editor: sideBySideInput }], undefined, { validateTrust: true });\n\t\t\tassert.strictEqual(part.activeGroup.count, 0);\n\n\t\t\t// Trust: allow\n\t\t\taccessor.workspaceTrustRequestService.requestOpenUrisHandler = async uris => WorkspaceTrustUriResponse.Open;\n\n\t\t\tawait service.openEditors([{ editor: input1 }, { editor: input2 }, { editor: sideBySideInput }], undefined, { validateTrust: true });\n\t\t\tassert.strictEqual(part.activeGroup.count, 3);\n\t\t} finally {\n\t\t\taccessor.workspaceTrustRequestService.requestOpenUrisHandler = oldHandler;\n\t\t}\n\t});\n\n\ttest('openEditors() ignores trust when `validateTrust: false', async () => {\n\t\tconst [part, service, accessor] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\n\t\tconst input3 = createTestFileEditorInput(URI.parse('my://resource3-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst input4 = createTestFileEditorInput(URI.parse('my://resource4-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst sideBySideInput = new SideBySideEditorInput('side by side', undefined, input3, input4, service);\n\n\t\tconst oldHandler = accessor.workspaceTrustRequestService.requestOpenUrisHandler;\n\n\t\ttry {\n\n\t\t\t// Trust: cancel\n\t\t\taccessor.workspaceTrustRequestService.requestOpenUrisHandler = async uris => WorkspaceTrustUriResponse.Cancel;\n\n\t\t\tawait service.openEditors([{ editor: input1 }, { editor: input2 }, { editor: sideBySideInput }]);\n\t\t\tassert.strictEqual(part.activeGroup.count, 3);\n\t\t} finally {\n\t\t\taccessor.workspaceTrustRequestService.requestOpenUrisHandler = oldHandler;\n\t\t}\n\t});\n\n\ttest('openEditors() extracts proper resources from untyped editors for workspace trust', async () => {\n\t\tconst [, service, accessor] = await createEditorService();\n\n\t\tconst input = { resource: URI.file('resource-openEditors') };\n\t\tconst otherInput: IResourceDiffEditorInput = {\n\t\t\toriginal: { resource: URI.parse('my://resource2-openEditors') },\n\t\t\tmodified: { resource: URI.parse('my://resource3-openEditors') }\n\t\t};\n\n\t\tconst oldHandler = accessor.workspaceTrustRequestService.requestOpenUrisHandler;\n\n\t\ttry {\n\t\t\tlet trustEditorUris: URI[] = [];\n\t\t\taccessor.workspaceTrustRequestService.requestOpenUrisHandler = async uris => {\n\t\t\t\ttrustEditorUris = uris;\n\t\t\t\treturn oldHandler(uris);\n\t\t\t};\n\n\t\t\tawait service.openEditors([input, otherInput], undefined, { validateTrust: true });\n\t\t\tassert.strictEqual(trustEditorUris.length, 3);\n\t\t\tassert.strictEqual(trustEditorUris.some(uri => uri.toString() === input.resource.toString()), true);\n\t\t\tassert.strictEqual(trustEditorUris.some(uri => uri.toString() === otherInput.original.resource?.toString()), true);\n\t\t\tassert.strictEqual(trustEditorUris.some(uri => uri.toString() === otherInput.modified.resource?.toString()), true);\n\t\t} finally {\n\t\t\taccessor.workspaceTrustRequestService.requestOpenUrisHandler = oldHandler;\n\t\t}\n\t});\n\n\ttest('close editor does not dispose when editor opened in other group', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-close1'), TEST_EDITOR_INPUT_ID);\n\n\t\tconst rootGroup = part.activeGroup;\n\t\tconst rightGroup = part.addGroup(rootGroup, GroupDirection.RIGHT);\n\n\t\t// Open input\n\t\tawait service.openEditor(input, { pinned: true });\n\t\tawait service.openEditor(input, { pinned: true }, rightGroup);\n\n\t\tconst editors = service.editors;\n\t\tassert.strictEqual(editors.length, 2);\n\t\tassert.strictEqual(editors[0], input);\n\t\tassert.strictEqual(editors[1], input);\n\n\t\t// Close input\n\t\tawait rootGroup.closeEditor(input);\n\t\tassert.strictEqual(input.isDisposed(), false);\n\n\t\tawait rightGroup.closeEditor(input);\n\t\tassert.strictEqual(input.isDisposed(), true);\n\t});\n\n\ttest('open to the side', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1-openside'), TEST_EDITOR_INPUT_ID);\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource2-openside'), TEST_EDITOR_INPUT_ID);\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tawait service.openEditor(input1, { pinned: true }, rootGroup);\n\t\tlet editor = await service.openEditor(input1, { pinned: true, preserveFocus: true }, SIDE_GROUP);\n\n\t\tassert.strictEqual(part.activeGroup, rootGroup);\n\t\tassert.strictEqual(part.count, 2);\n\t\tassert.strictEqual(editor?.group, part.groups[1]);\n\n\t\tassert.strictEqual(service.isVisible(input1), true);\n\t\tassert.strictEqual(service.isOpened(input1), true);\n\n\t\t// Open to the side uses existing neighbour group if any\n\t\teditor = await service.openEditor(input2, { pinned: true, preserveFocus: true }, SIDE_GROUP);\n\t\tassert.strictEqual(part.activeGroup, rootGroup);\n\t\tassert.strictEqual(part.count, 2);\n\t\tassert.strictEqual(editor?.group, part.groups[1]);\n\n\t\tassert.strictEqual(service.isVisible(input2), true);\n\t\tassert.strictEqual(service.isOpened(input2), true);\n\t});\n\n\ttest('editor group activation', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1-openside'), TEST_EDITOR_INPUT_ID);\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource2-openside'), TEST_EDITOR_INPUT_ID);\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tawait service.openEditor(input1, { pinned: true }, rootGroup);\n\t\tlet editor = await service.openEditor(input2, { pinned: true, preserveFocus: true, activation: EditorActivation.ACTIVATE }, SIDE_GROUP);\n\t\tconst sideGroup = editor?.group;\n\n\t\tassert.strictEqual(part.activeGroup, sideGroup);\n\n\t\teditor = await service.openEditor(input1, { pinned: true, preserveFocus: true, activation: EditorActivation.PRESERVE }, rootGroup);\n\t\tassert.strictEqual(part.activeGroup, sideGroup);\n\n\t\teditor = await service.openEditor(input1, { pinned: true, preserveFocus: true, activation: EditorActivation.ACTIVATE }, rootGroup);\n\t\tassert.strictEqual(part.activeGroup, rootGroup);\n\n\t\teditor = await service.openEditor(input2, { pinned: true, activation: EditorActivation.PRESERVE }, sideGroup);\n\t\tassert.strictEqual(part.activeGroup, rootGroup);\n\n\t\teditor = await service.openEditor(input2, { pinned: true, activation: EditorActivation.ACTIVATE }, sideGroup);\n\t\tassert.strictEqual(part.activeGroup, sideGroup);\n\n\t\tpart.arrangeGroups(GroupsArrangement.EXPAND);\n\t\teditor = await service.openEditor(input1, { pinned: true, preserveFocus: true, activation: EditorActivation.RESTORE }, rootGroup);\n\t\tassert.strictEqual(part.activeGroup, sideGroup);\n\t});\n\n\ttest('inactive editor group does not activate when closing editor (#117686)', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1-openside'), TEST_EDITOR_INPUT_ID);\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource2-openside'), TEST_EDITOR_INPUT_ID);\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tawait service.openEditor(input1, { pinned: true }, rootGroup);\n\t\tawait service.openEditor(input2, { pinned: true }, rootGroup);\n\n\t\tconst sideGroup = (await service.openEditor(input2, { pinned: true }, SIDE_GROUP))?.group;\n\t\tassert.strictEqual(part.activeGroup, sideGroup);\n\t\tassert.notStrictEqual(rootGroup, sideGroup);\n\n\t\tpart.arrangeGroups(GroupsArrangement.EXPAND, part.activeGroup);\n\n\t\tawait rootGroup.closeEditor(input2);\n\t\tassert.strictEqual(part.activeGroup, sideGroup);\n\n\t\tassert(!part.isGroupExpanded(rootGroup));\n\t\tassert(part.isGroupExpanded(part.activeGroup));\n\t});\n\n\ttest('active editor change / visible editor change events', async function () {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tlet input = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\tlet otherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\n\t\tlet activeEditorChangeEventFired = false;\n\t\tconst activeEditorChangeListener = service.onDidActiveEditorChange(() => {\n\t\t\tactiveEditorChangeEventFired = true;\n\t\t});\n\n\t\tlet visibleEditorChangeEventFired = false;\n\t\tconst visibleEditorChangeListener = service.onDidVisibleEditorsChange(() => {\n\t\t\tvisibleEditorChangeEventFired = true;\n\t\t});\n\n\t\tfunction assertActiveEditorChangedEvent(expected: boolean) {\n\t\t\tassert.strictEqual(activeEditorChangeEventFired, expected, `Unexpected active editor change state (got ${activeEditorChangeEventFired}, expected ${expected})`);\n\t\t\tactiveEditorChangeEventFired = false;\n\t\t}\n\n\t\tfunction assertVisibleEditorsChangedEvent(expected: boolean) {\n\t\t\tassert.strictEqual(visibleEditorChangeEventFired, expected, `Unexpected visible editors change state (got ${visibleEditorChangeEventFired}, expected ${expected})`);\n\t\t\tvisibleEditorChangeEventFired = false;\n\t\t}\n\n\t\tasync function closeEditorAndWaitForNextToOpen(group: IEditorGroup, input: EditorInput): Promise<void> {\n\t\t\tawait group.closeEditor(input);\n\t\t\tawait timeout(0); // closing an editor will not immediately open the next one, so we need to wait\n\t\t}\n\n\t\t// 1.) open, open same, open other, close\n\t\tlet editor = await service.openEditor(input, { pinned: true });\n\t\tconst group = editor?.group!;\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\teditor = await service.openEditor(input);\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\teditor = await service.openEditor(otherInput);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tawait closeEditorAndWaitForNextToOpen(group, otherInput);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tawait closeEditorAndWaitForNextToOpen(group, input);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\t// 2.) open, open same (forced open) (recreate inputs that got disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\t\teditor = await service.openEditor(input);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\teditor = await service.openEditor(input, { forceReload: true });\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait closeEditorAndWaitForNextToOpen(group, input);\n\n\t\t// 3.) open, open inactive, close (recreate inputs that got disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\t\teditor = await service.openEditor(input, { pinned: true });\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\teditor = await service.openEditor(otherInput, { inactive: true });\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait group.closeAllEditors();\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\t// 4.) open, open inactive, close inactive (recreate inputs that got disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\t\teditor = await service.openEditor(input, { pinned: true });\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\teditor = await service.openEditor(otherInput, { inactive: true });\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait closeEditorAndWaitForNextToOpen(group, otherInput);\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait group.closeAllEditors();\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\t// 5.) add group, remove group (recreate inputs that got disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\t\teditor = await service.openEditor(input, { pinned: true });\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tlet rightGroup = part.addGroup(part.activeGroup, GroupDirection.RIGHT);\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\trightGroup.focus();\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tpart.removeGroup(rightGroup);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait group.closeAllEditors();\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\t// 6.) open editor in inactive group (recreate inputs that got disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\t\teditor = await service.openEditor(input, { pinned: true });\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\trightGroup = part.addGroup(part.activeGroup, GroupDirection.RIGHT);\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait rightGroup.openEditor(otherInput);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tawait closeEditorAndWaitForNextToOpen(rightGroup, otherInput);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tawait group.closeAllEditors();\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\t// 7.) activate group (recreate inputs that got disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\t\teditor = await service.openEditor(input, { pinned: true });\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\trightGroup = part.addGroup(part.activeGroup, GroupDirection.RIGHT);\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait rightGroup.openEditor(otherInput);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tgroup.focus();\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait closeEditorAndWaitForNextToOpen(rightGroup, otherInput);\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tawait group.closeAllEditors();\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\t// 8.) move editor (recreate inputs that got disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\t\teditor = await service.openEditor(input, { pinned: true });\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\teditor = await service.openEditor(otherInput, { pinned: true });\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tgroup.moveEditor(otherInput, group, { index: 0 });\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait group.closeAllEditors();\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\t// 9.) close editor in inactive group (recreate inputs that got disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\t\teditor = await service.openEditor(input, { pinned: true });\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\trightGroup = part.addGroup(part.activeGroup, GroupDirection.RIGHT);\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait rightGroup.openEditor(otherInput);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tawait closeEditorAndWaitForNextToOpen(group, input);\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\t// cleanup\n\t\tactiveEditorChangeListener.dispose();\n\t\tvisibleEditorChangeListener.dispose();\n\t});\n\n\ttest('editors change event', async function () {\n\t\tconst [part, service] = await createEditorService();\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tlet input = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\tlet otherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\n\t\tlet editorsChangeEventCounter = 0;\n\t\tasync function assertEditorsChangeEvent(fn: () => Promise<unknown>, expected: number) {\n\t\t\tconst p = Event.toPromise(service.onDidEditorsChange);\n\t\t\tawait fn();\n\t\t\tawait p;\n\t\t\teditorsChangeEventCounter++;\n\n\t\t\tassert.strictEqual(editorsChangeEventCounter, expected);\n\t\t}\n\n\t\t// open\n\t\tawait assertEditorsChangeEvent(() => service.openEditor(input, { pinned: true }), 1);\n\n\t\t// open (other)\n\t\tawait assertEditorsChangeEvent(() => service.openEditor(otherInput, { pinned: true }), 2);\n\n\t\t// close (inactive)\n\t\tawait assertEditorsChangeEvent(() => rootGroup.closeEditor(input), 3);\n\n\t\t// close (active)\n\t\tawait assertEditorsChangeEvent(() => rootGroup.closeEditor(otherInput), 4);\n\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\n\t\t// open editors\n\t\tawait assertEditorsChangeEvent(() => service.openEditors([{ editor: input, options: { pinned: true } }, { editor: otherInput, options: { pinned: true } }]), 5);\n\n\t\t// active editor change\n\t\tawait assertEditorsChangeEvent(() => service.openEditor(otherInput), 6);\n\n\t\t// move editor (in group)\n\t\tawait assertEditorsChangeEvent(() => service.openEditor(input, { pinned: true, index: 1 }), 7);\n\n\t\tconst rightGroup = part.addGroup(part.activeGroup, GroupDirection.RIGHT);\n\t\tawait assertEditorsChangeEvent(async () => rootGroup.moveEditor(input, rightGroup), 8);\n\n\t\t// move group\n\t\tawait assertEditorsChangeEvent(async () => part.moveGroup(rightGroup, rootGroup, GroupDirection.LEFT), 9);\n\t});\n\n\ttest('two active editor change events when opening editor to the side', async function () {\n\t\tconst [, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\n\t\tlet activeEditorChangeEvents = 0;\n\t\tconst activeEditorChangeListener = service.onDidActiveEditorChange(() => {\n\t\t\tactiveEditorChangeEvents++;\n\t\t});\n\n\t\tfunction assertActiveEditorChangedEvent(expected: number) {\n\t\t\tassert.strictEqual(activeEditorChangeEvents, expected, `Unexpected active editor change state (got ${activeEditorChangeEvents}, expected ${expected})`);\n\t\t\tactiveEditorChangeEvents = 0;\n\t\t}\n\n\t\tawait service.openEditor(input, { pinned: true });\n\t\tassertActiveEditorChangedEvent(1);\n\n\t\tawait service.openEditor(input, { pinned: true }, SIDE_GROUP);\n\n\t\t// we expect 2 active editor change events: one for the fact that the\n\t\t// active editor is now in the side group but also one for when the\n\t\t// editor has finished loading. we used to ignore that second change\n\t\t// event, however many listeners are interested on the active editor\n\t\t// when it has fully loaded (e.g. a model is set). as such, we cannot\n\t\t// simply ignore that second event from the editor service, even though\n\t\t// the actual editor input is the same\n\t\tassertActiveEditorChangedEvent(2);\n\n\t\t// cleanup\n\t\tactiveEditorChangeListener.dispose();\n\t});\n\n\ttest('activeTextEditorControl / activeTextEditorMode', async () => {\n\t\tconst [, service] = await createEditorService();\n\n\t\t// Open untitled input\n\t\tconst editor = await service.openEditor({ resource: undefined });\n\n\t\tassert.strictEqual(service.activeEditorPane, editor);\n\t\tassert.strictEqual(service.activeTextEditorControl, editor?.getControl());\n\t\tassert.strictEqual(service.activeTextEditorLanguageId, PLAINTEXT_LANGUAGE_ID);\n\t});\n\n\ttest('openEditor returns undefined when inactive', async function () {\n\t\tconst [, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-inactive'), TEST_EDITOR_INPUT_ID);\n\n\t\tconst editor = await service.openEditor(input, { pinned: true });\n\t\tassert.ok(editor);\n\n\t\tconst otherEditor = await service.openEditor(otherInput, { inactive: true });\n\t\tassert.ok(!otherEditor);\n\t});\n\n\ttest('openEditor shows placeholder when opening fails', async function () {\n\t\tconst [, service] = await createEditorService();\n\n\t\tconst failingInput = createTestFileEditorInput(URI.parse('my://resource-failing'), TEST_EDITOR_INPUT_ID);\n\t\tfailingInput.setFailToOpen();\n\n\t\tconst failingEditor = await service.openEditor(failingInput);\n\t\tassert.ok(failingEditor instanceof ErrorPlaceholderEditor);\n\t});\n\n\ttest('openEditor shows placeholder when restoring fails', async function () {\n\t\tconst [, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\tconst failingInput = createTestFileEditorInput(URI.parse('my://resource-failing'), TEST_EDITOR_INPUT_ID);\n\n\t\tawait service.openEditor(input, { pinned: true });\n\t\tawait service.openEditor(failingInput, { inactive: true });\n\n\t\tfailingInput.setFailToOpen();\n\t\tconst failingEditor = await service.openEditor(failingInput);\n\t\tassert.ok(failingEditor instanceof ErrorPlaceholderEditor);\n\t});\n\n\ttest('save, saveAll, revertAll', async function () {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tinput1.dirty = true;\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource2'), TEST_EDITOR_INPUT_ID);\n\t\tinput2.dirty = true;\n\t\tconst sameInput1 = createTestFileEditorInput(URI.parse('my://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tsameInput1.dirty = true;\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tawait service.openEditor(input1, { pinned: true });\n\t\tawait service.openEditor(input2, { pinned: true });\n\t\tawait service.openEditor(sameInput1, { pinned: true }, SIDE_GROUP);\n\n\t\tconst res1 = await service.save({ groupId: rootGroup.id, editor: input1 });\n\t\tassert.strictEqual(res1.success, true);\n\t\tassert.strictEqual(res1.editors[0], input1);\n\t\tassert.strictEqual(input1.gotSaved, true);\n\n\t\tinput1.gotSaved = false;\n\t\tinput1.gotSavedAs = false;\n\t\tinput1.gotReverted = false;\n\n\t\tinput1.dirty = true;\n\t\tinput2.dirty = true;\n\t\tsameInput1.dirty = true;\n\n\t\tconst res2 = await service.save({ groupId: rootGroup.id, editor: input1 }, { saveAs: true });\n\t\tassert.strictEqual(res2.success, true);\n\t\tassert.strictEqual(res2.editors[0], input1);\n\t\tassert.strictEqual(input1.gotSavedAs, true);\n\n\t\tinput1.gotSaved = false;\n\t\tinput1.gotSavedAs = false;\n\t\tinput1.gotReverted = false;\n\n\t\tinput1.dirty = true;\n\t\tinput2.dirty = true;\n\t\tsameInput1.dirty = true;\n\n\t\tconst revertRes = await service.revertAll();\n\t\tassert.strictEqual(revertRes, true);\n\t\tassert.strictEqual(input1.gotReverted, true);\n\n\t\tinput1.gotSaved = false;\n\t\tinput1.gotSavedAs = false;\n\t\tinput1.gotReverted = false;\n\n\t\tinput1.dirty = true;\n\t\tinput2.dirty = true;\n\t\tsameInput1.dirty = true;\n\n\t\tconst res3 = await service.saveAll();\n\t\tassert.strictEqual(res3.success, true);\n\t\tassert.strictEqual(res3.editors.length, 2);\n\t\tassert.strictEqual(input1.gotSaved, true);\n\t\tassert.strictEqual(input2.gotSaved, true);\n\n\t\tinput1.gotSaved = false;\n\t\tinput1.gotSavedAs = false;\n\t\tinput1.gotReverted = false;\n\t\tinput2.gotSaved = false;\n\t\tinput2.gotSavedAs = false;\n\t\tinput2.gotReverted = false;\n\n\t\tinput1.dirty = true;\n\t\tinput2.dirty = true;\n\t\tsameInput1.dirty = true;\n\n\t\tawait service.saveAll({ saveAs: true });\n\n\t\tassert.strictEqual(input1.gotSavedAs, true);\n\t\tassert.strictEqual(input2.gotSavedAs, true);\n\n\t\t// services dedupes inputs automatically\n\t\tassert.strictEqual(sameInput1.gotSaved, false);\n\t\tassert.strictEqual(sameInput1.gotSavedAs, false);\n\t\tassert.strictEqual(sameInput1.gotReverted, false);\n\t});\n\n\ttest('saveAll, revertAll (sticky editor)', async function () {\n\t\tconst [, service] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tinput1.dirty = true;\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource2'), TEST_EDITOR_INPUT_ID);\n\t\tinput2.dirty = true;\n\t\tconst sameInput1 = createTestFileEditorInput(URI.parse('my://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tsameInput1.dirty = true;\n\n\t\tawait service.openEditor(input1, { pinned: true, sticky: true });\n\t\tawait service.openEditor(input2, { pinned: true });\n\t\tawait service.openEditor(sameInput1, { pinned: true }, SIDE_GROUP);\n\n\t\tconst revertRes = await service.revertAll({ excludeSticky: true });\n\t\tassert.strictEqual(revertRes, true);\n\t\tassert.strictEqual(input1.gotReverted, false);\n\t\tassert.strictEqual(sameInput1.gotReverted, true);\n\n\t\tinput1.gotSaved = false;\n\t\tinput1.gotSavedAs = false;\n\t\tinput1.gotReverted = false;\n\n\t\tsameInput1.gotSaved = false;\n\t\tsameInput1.gotSavedAs = false;\n\t\tsameInput1.gotReverted = false;\n\n\t\tinput1.dirty = true;\n\t\tinput2.dirty = true;\n\t\tsameInput1.dirty = true;\n\n\t\tconst saveRes = await service.saveAll({ excludeSticky: true });\n\t\tassert.strictEqual(saveRes.success, true);\n\t\tassert.strictEqual(saveRes.editors.length, 2);\n\t\tassert.strictEqual(input1.gotSaved, false);\n\t\tassert.strictEqual(input2.gotSaved, true);\n\t\tassert.strictEqual(sameInput1.gotSaved, true);\n\t});\n\n\ttest('saveAll, revertAll untitled (exclude untitled)', async function () {\n\t\tawait testSaveRevertUntitled({}, false, false);\n\t\tawait testSaveRevertUntitled({ includeUntitled: false }, false, false);\n\t});\n\n\ttest('saveAll, revertAll untitled (include untitled)', async function () {\n\t\tawait testSaveRevertUntitled({ includeUntitled: true }, true, false);\n\t\tawait testSaveRevertUntitled({ includeUntitled: { includeScratchpad: false } }, true, false);\n\t});\n\n\ttest('saveAll, revertAll untitled (include scratchpad)', async function () {\n\t\tawait testSaveRevertUntitled({ includeUntitled: { includeScratchpad: true } }, true, true);\n\t});\n\n\tasync function testSaveRevertUntitled(options: IBaseSaveRevertAllEditorOptions, expectUntitled: boolean, expectScratchpad: boolean) {\n\t\tconst [, service] = await createEditorService();\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tinput1.dirty = true;\n\t\tconst untitledInput = createTestFileEditorInput(URI.parse('my://resource2'), TEST_EDITOR_INPUT_ID);\n\t\tuntitledInput.dirty = true;\n\t\tuntitledInput.capabilities = EditorInputCapabilities.Untitled;\n\t\tconst scratchpadInput = createTestFileEditorInput(URI.parse('my://resource3'), TEST_EDITOR_INPUT_ID);\n\t\tscratchpadInput.modified = true;\n\t\tscratchpadInput.capabilities = EditorInputCapabilities.Scratchpad | EditorInputCapabilities.Untitled;\n\n\t\tawait service.openEditor(input1, { pinned: true, sticky: true });\n\t\tawait service.openEditor(untitledInput, { pinned: true });\n\t\tawait service.openEditor(scratchpadInput, { pinned: true });\n\n\t\tconst revertRes = await service.revertAll(options);\n\t\tassert.strictEqual(revertRes, true);\n\t\tassert.strictEqual(input1.gotReverted, true);\n\t\tassert.strictEqual(untitledInput.gotReverted, expectUntitled);\n\t\tassert.strictEqual(scratchpadInput.gotReverted, expectScratchpad);\n\n\t\tinput1.gotSaved = false;\n\t\tuntitledInput.gotSavedAs = false;\n\t\tscratchpadInput.gotReverted = false;\n\n\t\tinput1.gotSaved = false;\n\t\tuntitledInput.gotSavedAs = false;\n\t\tscratchpadInput.gotReverted = false;\n\n\t\tinput1.dirty = true;\n\t\tuntitledInput.dirty = true;\n\t\tscratchpadInput.modified = true;\n\n\t\tconst saveRes = await service.saveAll(options);\n\t\tassert.strictEqual(saveRes.success, true);\n\t\tassert.strictEqual(saveRes.editors.length, expectScratchpad ? 3 : expectUntitled ? 2 : 1);\n\t\tassert.strictEqual(input1.gotSaved, true);\n\t\tassert.strictEqual(untitledInput.gotSaved, expectUntitled);\n\t\tassert.strictEqual(scratchpadInput.gotSaved, expectScratchpad);\n\t}\n\n\ttest('file delete closes editor', async function () {\n\t\treturn testFileDeleteEditorClose(false);\n\t});\n\n\ttest('file delete leaves dirty editors open', function () {\n\t\treturn testFileDeleteEditorClose(true);\n\t});\n\n\tasync function testFileDeleteEditorClose(dirty: boolean): Promise<void> {\n\t\tconst [part, service, accessor] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tinput1.dirty = dirty;\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource2'), TEST_EDITOR_INPUT_ID);\n\t\tinput2.dirty = dirty;\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tawait service.openEditor(input1, { pinned: true });\n\t\tawait service.openEditor(input2, { pinned: true });\n\n\t\tassert.strictEqual(rootGroup.activeEditor, input2);\n\n\t\tconst activeEditorChangePromise = awaitActiveEditorChange(service);\n\t\taccessor.fileService.fireAfterOperation(new FileOperationEvent(input2.resource, FileOperation.DELETE));\n\t\tif (!dirty) {\n\t\t\tawait activeEditorChangePromise;\n\t\t}\n\n\t\tif (dirty) {\n\t\t\tassert.strictEqual(rootGroup.activeEditor, input2);\n\t\t} else {\n\t\t\tassert.strictEqual(rootGroup.activeEditor, input1);\n\t\t}\n\t}\n\n\ttest('file move asks input to move', async function () {\n\t\tconst [part, service, accessor] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tconst movedInput = createTestFileEditorInput(URI.parse('my://resource2'), TEST_EDITOR_INPUT_ID);\n\t\tinput1.movedEditor = { editor: movedInput };\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tawait service.openEditor(input1, { pinned: true });\n\n\t\tconst activeEditorChangePromise = awaitActiveEditorChange(service);\n\t\taccessor.fileService.fireAfterOperation(new FileOperationEvent(input1.resource, FileOperation.MOVE, {\n\t\t\tresource: movedInput.resource,\n\t\t\tctime: 0,\n\t\t\tetag: '',\n\t\t\tisDirectory: false,\n\t\t\tisFile: true,\n\t\t\tmtime: 0,\n\t\t\tname: 'resource2',\n\t\t\tsize: 0,\n\t\t\tisSymbolicLink: false,\n\t\t\treadonly: false,\n\t\t\tlocked: false,\n\t\t\tchildren: undefined\n\t\t}));\n\t\tawait activeEditorChangePromise;\n\n\t\tassert.strictEqual(rootGroup.activeEditor, movedInput);\n\t});\n\n\tfunction awaitActiveEditorChange(editorService: IEditorService): Promise<void> {\n\t\treturn Event.toPromise(Event.once(editorService.onDidActiveEditorChange));\n\t}\n\n\ttest('file watcher gets installed for out of workspace files', async function () {\n\t\tconst [, service, accessor] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('file://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tconst input2 = createTestFileEditorInput(URI.parse('file://resource2'), TEST_EDITOR_INPUT_ID);\n\n\t\tawait service.openEditor(input1, { pinned: true });\n\t\tassert.strictEqual(accessor.fileService.watches.length, 1);\n\t\tassert.strictEqual(accessor.fileService.watches[0].toString(), input1.resource.toString());\n\n\t\tconst editor = await service.openEditor(input2, { pinned: true });\n\t\tassert.strictEqual(accessor.fileService.watches.length, 1);\n\t\tassert.strictEqual(accessor.fileService.watches[0].toString(), input2.resource.toString());\n\n\t\tawait editor?.group.closeAllEditors();\n\t\tassert.strictEqual(accessor.fileService.watches.length, 0);\n\t});\n\n\ttest('activeEditorPane scopedContextKeyService', async function () {\n\t\tconst instantiationService = workbenchInstantiationService({ contextKeyService: instantiationService => instantiationService.createInstance(MockScopableContextKeyService) }, disposables);\n\t\tconst [part, service] = await createEditorService(instantiationService);\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('file://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tcreateTestFileEditorInput(URI.parse('file://resource2'), TEST_EDITOR_INPUT_ID);\n\n\t\tawait service.openEditor(input1, { pinned: true });\n\n\t\tconst editorContextKeyService = service.activeEditorPane?.scopedContextKeyService;\n\t\tassert.ok(!!editorContextKeyService);\n\t\tassert.strictEqual(editorContextKeyService, part.activeGroup.activeEditorPane?.scopedContextKeyService);\n\t});\n\n\ttest('editorResolverService - openEditor', async function () {\n\t\tconst [, service, accessor] = await createEditorService();\n\t\tconst editorResolverService = accessor.editorResolverService;\n\t\tconst textEditorService = accessor.textEditorService;\n\n\t\tlet editorCount = 0;\n\n\t\tconst registrationDisposable = editorResolverService.registerEditor(\n\t\t\t'*.md',\n\t\t\t{\n\t\t\t\tid: 'TestEditor',\n\t\t\t\tlabel: 'Test Editor',\n\t\t\t\tdetail: 'Test Editor Provider',\n\t\t\t\tpriority: RegisteredEditorPriority.builtin\n\t\t\t},\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: (editorInput) => {\n\t\t\t\t\teditorCount++;\n\t\t\t\t\treturn ({ editor: textEditorService.createTextEditor(editorInput) });\n\t\t\t\t},\n\t\t\t\tcreateDiffEditorInput: diffEditor => ({ editor: textEditorService.createTextEditor(diffEditor) })\n\t\t\t}\n\t\t);\n\t\tassert.strictEqual(editorCount, 0);\n\n\t\tconst input1 = { resource: URI.parse('file://test/path/resource1.txt') };\n\t\tconst input2 = { resource: URI.parse('file://test/path/resource1.md') };\n\n\t\t// Open editor input 1 and it shouln't trigger override as the glob doesn't match\n\t\tawait service.openEditor(input1);\n\t\tassert.strictEqual(editorCount, 0);\n\n\t\t// Open editor input 2 and it should trigger override as the glob doesn match\n\t\tawait service.openEditor(input2);\n\t\tassert.strictEqual(editorCount, 1);\n\n\t\t// Because we specify an override we shouldn't see it triggered even if it matches\n\t\tawait service.openEditor({ ...input2, options: { override: 'default' } });\n\t\tassert.strictEqual(editorCount, 1);\n\n\t\tregistrationDisposable.dispose();\n\t});\n\n\ttest('editorResolverService - openEditors', async function () {\n\t\tconst [, service, accessor] = await createEditorService();\n\t\tconst editorResolverService = accessor.editorResolverService;\n\t\tconst textEditorService = accessor.textEditorService;\n\n\t\tlet editorCount = 0;\n\n\t\tconst registrationDisposable = editorResolverService.registerEditor(\n\t\t\t'*.md',\n\t\t\t{\n\t\t\t\tid: 'TestEditor',\n\t\t\t\tlabel: 'Test Editor',\n\t\t\t\tdetail: 'Test Editor Provider',\n\t\t\t\tpriority: RegisteredEditorPriority.builtin\n\t\t\t},\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: (editorInput) => {\n\t\t\t\t\teditorCount++;\n\t\t\t\t\treturn ({ editor: textEditorService.createTextEditor(editorInput) });\n\t\t\t\t},\n\t\t\t\tcreateDiffEditorInput: diffEditor => ({ editor: textEditorService.createTextEditor(diffEditor) })\n\t\t\t}\n\t\t);\n\t\tassert.strictEqual(editorCount, 0);\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('file://test/path/resource1.txt'), TEST_EDITOR_INPUT_ID).toUntyped();\n\t\tconst input2 = createTestFileEditorInput(URI.parse('file://test/path/resource2.txt'), TEST_EDITOR_INPUT_ID).toUntyped();\n\t\tconst input3 = createTestFileEditorInput(URI.parse('file://test/path/resource3.md'), TEST_EDITOR_INPUT_ID).toUntyped();\n\t\tconst input4 = createTestFileEditorInput(URI.parse('file://test/path/resource4.md'), TEST_EDITOR_INPUT_ID).toUntyped();\n\n\t\tassert.ok(input1);\n\t\tassert.ok(input2);\n\t\tassert.ok(input3);\n\t\tassert.ok(input4);\n\n\t\t// Open editor inputs\n\t\tawait service.openEditors([input1, input2, input3, input4]);\n\t\t// Only two matched the factory glob\n\t\tassert.strictEqual(editorCount, 2);\n\n\t\tregistrationDisposable.dispose();\n\t});\n\n\ttest('editorResolverService - replaceEditors', async function () {\n\t\tconst [part, service, accessor] = await createEditorService();\n\t\tconst editorResolverService = accessor.editorResolverService;\n\t\tconst textEditorService = accessor.textEditorService;\n\n\t\tlet editorCount = 0;\n\n\t\tconst registrationDisposable = editorResolverService.registerEditor(\n\t\t\t'*.md',\n\t\t\t{\n\t\t\t\tid: 'TestEditor',\n\t\t\t\tlabel: 'Test Editor',\n\t\t\t\tdetail: 'Test Editor Provider',\n\t\t\t\tpriority: RegisteredEditorPriority.builtin\n\t\t\t},\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: (editorInput) => {\n\t\t\t\t\teditorCount++;\n\t\t\t\t\treturn ({ editor: textEditorService.createTextEditor(editorInput) });\n\t\t\t\t},\n\t\t\t\tcreateDiffEditorInput: diffEditor => ({ editor: textEditorService.createTextEditor(diffEditor) })\n\t\t\t}\n\t\t);\n\n\t\tassert.strictEqual(editorCount, 0);\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('file://test/path/resource2.md'), TEST_EDITOR_INPUT_ID);\n\t\tconst untypedInput1 = input1.toUntyped();\n\t\tassert.ok(untypedInput1);\n\n\t\t// Open editor input 1 and it shouldn't trigger because typed inputs aren't overriden\n\t\tawait service.openEditor(input1);\n\t\tassert.strictEqual(editorCount, 0);\n\n\t\tawait service.replaceEditors([{\n\t\t\teditor: input1,\n\t\t\treplacement: untypedInput1,\n\t\t}], part.activeGroup);\n\t\tassert.strictEqual(editorCount, 1);\n\n\t\tregistrationDisposable.dispose();\n\t});\n\n\ttest('closeEditor', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\n\t\t// Open editors\n\t\tawait service.openEditors([{ editor: input }, { editor: otherInput }]);\n\t\tassert.strictEqual(part.activeGroup.count, 2);\n\n\t\t// Close editor\n\t\tawait service.closeEditor({ editor: input, groupId: part.activeGroup.id });\n\t\tassert.strictEqual(part.activeGroup.count, 1);\n\n\t\tawait service.closeEditor({ editor: input, groupId: part.activeGroup.id });\n\t\tassert.strictEqual(part.activeGroup.count, 1);\n\n\t\tawait service.closeEditor({ editor: otherInput, groupId: part.activeGroup.id });\n\t\tassert.strictEqual(part.activeGroup.count, 0);\n\n\t\tawait service.closeEditor({ editor: otherInput, groupId: 999 });\n\t\tassert.strictEqual(part.activeGroup.count, 0);\n\t});\n\n\ttest('closeEditors', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\n\t\t// Open editors\n\t\tawait service.openEditors([{ editor: input }, { editor: otherInput }]);\n\t\tassert.strictEqual(part.activeGroup.count, 2);\n\n\t\t// Close editors\n\t\tawait service.closeEditors([{ editor: input, groupId: part.activeGroup.id }, { editor: otherInput, groupId: part.activeGroup.id }]);\n\t\tassert.strictEqual(part.activeGroup.count, 0);\n\t});\n\n\ttest('findEditors (in group)', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\n\t\t// Open editors\n\t\tawait service.openEditors([{ editor: input }, { editor: otherInput }]);\n\t\tassert.strictEqual(part.activeGroup.count, 2);\n\n\t\t// Try using find editors for opened editors\n\t\t{\n\t\t\tconst found1 = service.findEditors(input.resource, undefined, part.activeGroup);\n\t\t\tassert.strictEqual(found1.length, 1);\n\t\t\tassert.strictEqual(found1[0], input);\n\n\t\t\tconst found2 = service.findEditors(input, undefined, part.activeGroup);\n\t\t\tassert.strictEqual(found2, input);\n\t\t}\n\t\t{\n\t\t\tconst found1 = service.findEditors(otherInput.resource, undefined, part.activeGroup);\n\t\t\tassert.strictEqual(found1.length, 1);\n\t\t\tassert.strictEqual(found1[0], otherInput);\n\n\t\t\tconst found2 = service.findEditors(otherInput, undefined, part.activeGroup);\n\t\t\tassert.strictEqual(found2, otherInput);\n\t\t}\n\n\t\t// Make sure we don't find non-opened editors\n\t\t{\n\t\t\tconst found1 = service.findEditors(URI.parse('my://no-such-resource'), undefined, part.activeGroup);\n\t\t\tassert.strictEqual(found1.length, 0);\n\n\t\t\tconst found2 = service.findEditors({ resource: URI.parse('my://no-such-resource'), typeId: '', editorId: TEST_EDITOR_INPUT_ID }, undefined, part.activeGroup);\n\t\t\tassert.strictEqual(found2, undefined);\n\t\t}\n\n\t\t// Make sure we don't find editors across groups\n\t\t{\n\t\t\tconst newEditor = await service.openEditor(createTestFileEditorInput(URI.parse('my://other-group-resource'), TEST_EDITOR_INPUT_ID), { pinned: true, preserveFocus: true }, SIDE_GROUP);\n\n\t\t\tconst found1 = service.findEditors(input.resource, undefined, newEditor!.group!.id);\n\t\t\tassert.strictEqual(found1.length, 0);\n\n\t\t\tconst found2 = service.findEditors(input, undefined, newEditor!.group!.id);\n\t\t\tassert.strictEqual(found2, undefined);\n\t\t}\n\n\t\t// Check we don't find editors after closing them\n\t\tawait part.activeGroup.closeAllEditors();\n\t\t{\n\t\t\tconst found1 = service.findEditors(input.resource, undefined, part.activeGroup);\n\t\t\tassert.strictEqual(found1.length, 0);\n\n\t\t\tconst found2 = service.findEditors(input, undefined, part.activeGroup);\n\t\t\tassert.strictEqual(found2, undefined);\n\t\t}\n\t});\n\n\ttest('findEditors (across groups)', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\n\t\t// Open editors\n\t\tawait service.openEditors([{ editor: input }, { editor: otherInput }]);\n\t\tconst sideEditor = await service.openEditor(input, { pinned: true }, SIDE_GROUP);\n\n\t\t// Try using find editors for opened editors\n\t\t{\n\t\t\tconst found1 = service.findEditors(input.resource);\n\t\t\tassert.strictEqual(found1.length, 2);\n\t\t\tassert.strictEqual(found1[0].editor, input);\n\t\t\tassert.strictEqual(found1[0].groupId, sideEditor?.group.id);\n\t\t\tassert.strictEqual(found1[1].editor, input);\n\t\t\tassert.strictEqual(found1[1].groupId, rootGroup.id);\n\n\t\t\tconst found2 = service.findEditors(input);\n\t\t\tassert.strictEqual(found2.length, 2);\n\t\t\tassert.strictEqual(found2[0].editor, input);\n\t\t\tassert.strictEqual(found2[0].groupId, sideEditor?.group.id);\n\t\t\tassert.strictEqual(found2[1].editor, input);\n\t\t\tassert.strictEqual(found2[1].groupId, rootGroup.id);\n\t\t}\n\t\t{\n\t\t\tconst found1 = service.findEditors(otherInput.resource);\n\t\t\tassert.strictEqual(found1.length, 1);\n\t\t\tassert.strictEqual(found1[0].editor, otherInput);\n\t\t\tassert.strictEqual(found1[0].groupId, rootGroup.id);\n\n\t\t\tconst found2 = service.findEditors(otherInput);\n\t\t\tassert.strictEqual(found2.length, 1);\n\t\t\tassert.strictEqual(found2[0].editor, otherInput);\n\t\t\tassert.strictEqual(found2[0].groupId, rootGroup.id);\n\t\t}\n\n\t\t// Make sure we don't find non-opened editors\n\t\t{\n\t\t\tconst found1 = service.findEditors(URI.parse('my://no-such-resource'));\n\t\t\tassert.strictEqual(found1.length, 0);\n\n\t\t\tconst found2 = service.findEditors({ resource: URI.parse('my://no-such-resource'), typeId: '', editorId: TEST_EDITOR_INPUT_ID });\n\t\t\tassert.strictEqual(found2.length, 0);\n\t\t}\n\n\t\t// Check we don't find editors after closing them\n\t\tawait rootGroup.closeAllEditors();\n\t\tawait sideEditor?.group.closeAllEditors();\n\t\t{\n\t\t\tconst found1 = service.findEditors(input.resource);\n\t\t\tassert.strictEqual(found1.length, 0);\n\n\t\t\tconst found2 = service.findEditors(input);\n\t\t\tassert.strictEqual(found2.length, 0);\n\t\t}\n\t});\n\n\ttest('findEditors (support side by side via options)', async () => {\n\t\tconst [, service] = await createEditorService();\n\n\t\tconst secondaryInput = createTestFileEditorInput(URI.parse('my://resource-findEditors-secondary'), TEST_EDITOR_INPUT_ID);\n\t\tconst primaryInput = createTestFileEditorInput(URI.parse('my://resource-findEditors-primary'), TEST_EDITOR_INPUT_ID);\n\n\t\tconst sideBySideInput = new SideBySideEditorInput(undefined, undefined, secondaryInput, primaryInput, service);\n\n\t\tawait service.openEditor(sideBySideInput, { pinned: true });\n\n\t\tlet foundEditors = service.findEditors(URI.parse('my://resource-findEditors-primary'));\n\t\tassert.strictEqual(foundEditors.length, 0);\n\n\t\tfoundEditors = service.findEditors(URI.parse('my://resource-findEditors-primary'), { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tassert.strictEqual(foundEditors.length, 1);\n\n\t\tfoundEditors = service.findEditors(URI.parse('my://resource-findEditors-secondary'), { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tassert.strictEqual(foundEditors.length, 0);\n\n\t\tfoundEditors = service.findEditors(URI.parse('my://resource-findEditors-primary'), { supportSideBySide: SideBySideEditor.SECONDARY });\n\t\tassert.strictEqual(foundEditors.length, 0);\n\n\t\tfoundEditors = service.findEditors(URI.parse('my://resource-findEditors-secondary'), { supportSideBySide: SideBySideEditor.SECONDARY });\n\t\tassert.strictEqual(foundEditors.length, 1);\n\n\t\tfoundEditors = service.findEditors(URI.parse('my://resource-findEditors-primary'), { supportSideBySide: SideBySideEditor.ANY });\n\t\tassert.strictEqual(foundEditors.length, 1);\n\n\t\tfoundEditors = service.findEditors(URI.parse('my://resource-findEditors-secondary'), { supportSideBySide: SideBySideEditor.ANY });\n\t\tassert.strictEqual(foundEditors.length, 1);\n\t});\n\n\ttest('side by side editor is not matching all other editors (https://github.com/microsoft/vscode/issues/132859)', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst sideBySideInput = new SideBySideEditorInput(undefined, undefined, input, input, service);\n\t\tconst otherSideBySideInput = new SideBySideEditorInput(undefined, undefined, otherInput, otherInput, service);\n\n\t\tawait service.openEditor(sideBySideInput, undefined, SIDE_GROUP);\n\n\t\tpart.activateGroup(rootGroup);\n\n\t\tawait service.openEditor(otherSideBySideInput, { revealIfOpened: true, revealIfVisible: true });\n\n\t\tassert.strictEqual(rootGroup.count, 1);\n\t});\n\n\ttest('onDidCloseEditor indicates proper context when moving editor across groups', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource-onDidCloseEditor1'), TEST_EDITOR_INPUT_ID);\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource-onDidCloseEditor2'), TEST_EDITOR_INPUT_ID);\n\n\t\tawait service.openEditor(input1, { pinned: true });\n\t\tawait service.openEditor(input2, { pinned: true });\n\n\t\tconst sidegroup = part.addGroup(rootGroup, GroupDirection.RIGHT);\n\n\t\tconst events: IEditorCloseEvent[] = [];\n\t\tdisposables.add(service.onDidCloseEditor(e => {\n\t\t\tevents.push(e);\n\t\t}));\n\n\t\trootGroup.moveEditor(input1, sidegroup);\n\n\t\tassert.strictEqual(events[0].context, EditorCloseContext.MOVE);\n\n\t\tawait sidegroup.closeEditor(input1);\n\n\t\tassert.strictEqual(events[1].context, EditorCloseContext.UNKNOWN);\n\t});\n\n\ttest('onDidCloseEditor indicates proper context when replacing an editor', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource-onDidCloseEditor1'), TEST_EDITOR_INPUT_ID);\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource-onDidCloseEditor2'), TEST_EDITOR_INPUT_ID);\n\n\t\tawait service.openEditor(input1, { pinned: true });\n\n\t\tconst events: IEditorCloseEvent[] = [];\n\t\tdisposables.add(service.onDidCloseEditor(e => {\n\t\t\tevents.push(e);\n\t\t}));\n\n\t\tawait rootGroup.replaceEditors([{ editor: input1, replacement: input2 }]);\n\n\t\tassert.strictEqual(events[0].context, EditorCloseContext.REPLACE);\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { EditorActivation, IResourceEditorInput } from '../../../../../platform/editor/common/editor.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { DEFAULT_EDITOR_ASSOCIATION, EditorCloseContext, EditorsOrder, IEditorCloseEvent, EditorInputWithOptions, IEditorPane, IResourceDiffEditorInput, isEditorInputWithOptions, IUntitledTextResourceEditorInput, IUntypedEditorInput, SideBySideEditor, isEditorInput, EditorInputCapabilities } from '../../../../common/editor.js';\nimport { workbenchInstantiationService, TestServiceAccessor, registerTestEditor, TestFileEditorInput, ITestInstantiationService, registerTestResourceEditor, registerTestSideBySideEditor, createEditorPart, registerTestFileEditor, TestTextFileEditor, TestSingletonFileEditorInput, workbenchTeardown } from '../../../../test/browser/workbenchTestServices.js';\nimport { EditorService } from '../../browser/editorService.js';\nimport { IEditorGroup, IEditorGroupsService, GroupDirection, GroupsArrangement } from '../../common/editorGroupsService.js';\nimport { EditorPart } from '../../../../browser/parts/editor/editorPart.js';\nimport { ACTIVE_GROUP, IBaseSaveRevertAllEditorOptions, IEditorService, PreferredGroup, SIDE_GROUP } from '../../common/editorService.js';\nimport { SyncDescriptor } from '../../../../../platform/instantiation/common/descriptors.js';\nimport { FileEditorInput } from '../../../../contrib/files/browser/editors/fileEditorInput.js';\nimport { timeout } from '../../../../../base/common/async.js';\nimport { FileOperationEvent, FileOperation } from '../../../../../platform/files/common/files.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { MockScopableContextKeyService } from '../../../../../platform/keybinding/test/common/mockKeybindingService.js';\nimport { RegisteredEditorPriority } from '../../common/editorResolverService.js';\nimport { WorkspaceTrustUriResponse } from '../../../../../platform/workspace/common/workspaceTrust.js';\nimport { SideBySideEditorInput } from '../../../../common/editor/sideBySideEditorInput.js';\nimport { EditorInput } from '../../../../common/editor/editorInput.js';\nimport { ErrorPlaceholderEditor } from '../../../../browser/parts/editor/editorPlaceholder.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../../editor/common/languages/modesRegistry.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IEditorPaneService } from '../../common/editorPaneService.js';\n\nsuite('EditorService', () => {\n\n\tconst TEST_EDITOR_ID = 'MyTestEditorForEditorService';\n\tconst TEST_EDITOR_INPUT_ID = 'testEditorInputForEditorService';\n\n\tconst disposables = new DisposableStore();\n\n\tlet testLocalInstantiationService: ITestInstantiationService | undefined = undefined;\n\n\tsetup(() => {\n\t\tdisposables.add(registerTestEditor(TEST_EDITOR_ID, [new SyncDescriptor(TestFileEditorInput), new SyncDescriptor(TestSingletonFileEditorInput)], TEST_EDITOR_INPUT_ID));\n\t\tdisposables.add(registerTestResourceEditor());\n\t\tdisposables.add(registerTestSideBySideEditor());\n\t});\n\n\tteardown(async () => {\n\t\tif (testLocalInstantiationService) {\n\t\t\tawait workbenchTeardown(testLocalInstantiationService);\n\t\t\ttestLocalInstantiationService = undefined;\n\t\t}\n\n\t\tdisposables.clear();\n\t});\n\n\tasync function createEditorService(instantiationService: ITestInstantiationService = workbenchInstantiationService(undefined, disposables)): Promise<[EditorPart, EditorService, TestServiceAccessor]> {\n\t\tconst part = await createEditorPart(instantiationService, disposables);\n\t\tinstantiationService.stub(IEditorGroupsService, part);\n\n\t\tconst editorService = disposables.add(instantiationService.createInstance(EditorService, undefined));\n\t\tinstantiationService.stub(IEditorService, editorService);\n\n\t\ttestLocalInstantiationService = instantiationService;\n\n\t\treturn [part, editorService, instantiationService.createInstance(TestServiceAccessor)];\n\t}\n\n\tfunction createTestFileEditorInput(resource: URI, typeId: string): TestFileEditorInput {\n\t\treturn disposables.add(new TestFileEditorInput(resource, typeId));\n\t}\n\n\ttest('openEditor() - basics', async () => {\n\t\tconst [, service, accessor] = await createEditorService();\n\n\t\tawait testOpenBasics(service, accessor.editorPaneService);\n\t});\n\n\ttest('openEditor() - basics (scoped)', async () => {\n\t\tconst [part, service, accessor] = await createEditorService();\n\t\tconst scoped = service.createScoped(part, disposables);\n\t\tawait part.whenReady;\n\n\t\tawait testOpenBasics(scoped, accessor.editorPaneService);\n\t});\n\n\tasync function testOpenBasics(editorService: IEditorService, editorPaneService: IEditorPaneService) {\n\t\tlet input = createTestFileEditorInput(URI.parse('my://resource-basics'), TEST_EDITOR_INPUT_ID);\n\t\tlet otherInput = createTestFileEditorInput(URI.parse('my://resource2-basics'), TEST_EDITOR_INPUT_ID);\n\n\t\tlet activeEditorChangeEventCounter = 0;\n\t\tdisposables.add(editorService.onDidActiveEditorChange(() => {\n\t\t\tactiveEditorChangeEventCounter++;\n\t\t}));\n\n\t\tlet visibleEditorChangeEventCounter = 0;\n\t\tdisposables.add(editorService.onDidVisibleEditorsChange(() => {\n\t\t\tvisibleEditorChangeEventCounter++;\n\t\t}));\n\n\t\tlet willOpenEditorListenerCounter = 0;\n\t\tdisposables.add(editorService.onWillOpenEditor(() => {\n\t\t\twillOpenEditorListenerCounter++;\n\t\t}));\n\n\t\tlet didCloseEditorListenerCounter = 0;\n\t\tdisposables.add(editorService.onDidCloseEditor(() => {\n\t\t\tdidCloseEditorListenerCounter++;\n\t\t}));\n\n\t\tlet willInstantiateEditorPaneListenerCounter = 0;\n\t\tdisposables.add(editorPaneService.onWillInstantiateEditorPane(e => {\n\t\t\tif (e.typeId === TEST_EDITOR_ID) {\n\t\t\t\twillInstantiateEditorPaneListenerCounter++;\n\t\t\t}\n\t\t}));\n\n\t\t// Open input\n\t\tlet editor = await editorService.openEditor(input, { pinned: true });\n\n\t\tassert.strictEqual(editor?.getId(), TEST_EDITOR_ID);\n\t\tassert.strictEqual(editor, editorService.activeEditorPane);\n\t\tassert.strictEqual(1, editorService.count);\n\t\tassert.strictEqual(input, editorService.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE)[0].editor);\n\t\tassert.strictEqual(input, editorService.getEditors(EditorsOrder.SEQUENTIAL)[0].editor);\n\t\tassert.strictEqual(input, editorService.activeEditor);\n\t\tassert.strictEqual(editorService.visibleEditorPanes.length, 1);\n\t\tassert.strictEqual(editorService.visibleEditorPanes[0], editor);\n\t\tassert.ok(!editorService.activeTextEditorControl);\n\t\tassert.ok(!editorService.activeTextEditorLanguageId);\n\t\tassert.strictEqual(editorService.visibleTextEditorControls.length, 0);\n\t\tassert.strictEqual(editorService.getVisibleTextEditorControls(EditorsOrder.MOST_RECENTLY_ACTIVE).length, 0);\n\t\tassert.strictEqual(editorService.isOpened(input), true);\n\t\tassert.strictEqual(editorService.isOpened({ resource: input.resource, typeId: input.typeId, editorId: input.editorId }), true);\n\t\tassert.strictEqual(editorService.isOpened({ resource: input.resource, typeId: input.typeId, editorId: 'unknownTypeId' }), false);\n\t\tassert.strictEqual(editorService.isOpened({ resource: input.resource, typeId: 'unknownTypeId', editorId: input.editorId }), false);\n\t\tassert.strictEqual(editorService.isOpened({ resource: input.resource, typeId: 'unknownTypeId', editorId: 'unknownTypeId' }), false);\n\t\tassert.strictEqual(editorService.isVisible(input), true);\n\t\tassert.strictEqual(editorService.isVisible(otherInput), false);\n\t\tassert.strictEqual(willOpenEditorListenerCounter, 1);\n\t\tassert.strictEqual(activeEditorChangeEventCounter, 1);\n\t\tassert.strictEqual(visibleEditorChangeEventCounter, 1);\n\t\tassert.ok(editorPaneService.didInstantiateEditorPane(TEST_EDITOR_ID));\n\t\tassert.strictEqual(willInstantiateEditorPaneListenerCounter, 1);\n\n\t\t// Close input\n\t\tawait editor?.group.closeEditor(input);\n\n\t\tassert.strictEqual(0, editorService.count);\n\t\tassert.strictEqual(0, editorService.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE).length);\n\t\tassert.strictEqual(0, editorService.getEditors(EditorsOrder.SEQUENTIAL).length);\n\t\tassert.strictEqual(didCloseEditorListenerCounter, 1);\n\t\tassert.strictEqual(activeEditorChangeEventCounter, 2);\n\t\tassert.strictEqual(visibleEditorChangeEventCounter, 2);\n\t\tassert.ok(input.gotDisposed);\n\n\t\t// Open again 2 inputs (disposed editors are ignored!)\n\t\tawait editorService.openEditor(input, { pinned: true });\n\t\tassert.strictEqual(0, editorService.count);\n\n\t\t// Open again 2 inputs (recreate because disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-basics'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-basics'), TEST_EDITOR_INPUT_ID);\n\n\t\tawait editorService.openEditor(input, { pinned: true });\n\t\teditor = await editorService.openEditor(otherInput, { pinned: true });\n\n\t\tassert.strictEqual(2, editorService.count);\n\t\tassert.strictEqual(otherInput, editorService.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE)[0].editor);\n\t\tassert.strictEqual(input, editorService.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE)[1].editor);\n\t\tassert.strictEqual(input, editorService.getEditors(EditorsOrder.SEQUENTIAL)[0].editor);\n\t\tassert.strictEqual(otherInput, editorService.getEditors(EditorsOrder.SEQUENTIAL)[1].editor);\n\t\tassert.strictEqual(editorService.visibleEditorPanes.length, 1);\n\t\tassert.strictEqual(editorService.isOpened(input), true);\n\t\tassert.strictEqual(editorService.isOpened({ resource: input.resource, typeId: input.typeId, editorId: input.editorId }), true);\n\t\tassert.strictEqual(editorService.isOpened(otherInput), true);\n\t\tassert.strictEqual(editorService.isOpened({ resource: otherInput.resource, typeId: otherInput.typeId, editorId: otherInput.editorId }), true);\n\n\t\tassert.strictEqual(activeEditorChangeEventCounter, 4);\n\t\tassert.strictEqual(willOpenEditorListenerCounter, 3);\n\t\tassert.strictEqual(visibleEditorChangeEventCounter, 4);\n\n\t\tconst stickyInput = createTestFileEditorInput(URI.parse('my://resource3-basics'), TEST_EDITOR_INPUT_ID);\n\t\tawait editorService.openEditor(stickyInput, { sticky: true });\n\n\t\tassert.strictEqual(3, editorService.count);\n\n\t\tconst allSequentialEditors = editorService.getEditors(EditorsOrder.SEQUENTIAL);\n\t\tassert.strictEqual(allSequentialEditors.length, 3);\n\t\tassert.strictEqual(stickyInput, allSequentialEditors[0].editor);\n\t\tassert.strictEqual(input, allSequentialEditors[1].editor);\n\t\tassert.strictEqual(otherInput, allSequentialEditors[2].editor);\n\n\t\tconst sequentialEditorsExcludingSticky = editorService.getEditors(EditorsOrder.SEQUENTIAL, { excludeSticky: true });\n\t\tassert.strictEqual(sequentialEditorsExcludingSticky.length, 2);\n\t\tassert.strictEqual(input, sequentialEditorsExcludingSticky[0].editor);\n\t\tassert.strictEqual(otherInput, sequentialEditorsExcludingSticky[1].editor);\n\n\t\tconst mruEditorsExcludingSticky = editorService.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE, { excludeSticky: true });\n\t\tassert.strictEqual(mruEditorsExcludingSticky.length, 2);\n\t\tassert.strictEqual(input, sequentialEditorsExcludingSticky[0].editor);\n\t\tassert.strictEqual(otherInput, sequentialEditorsExcludingSticky[1].editor);\n\t}\n\n\ttest('openEditor() - multiple calls are cancelled and indicated as such', async () => {\n\t\tconst [, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-basics'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-basics'), TEST_EDITOR_INPUT_ID);\n\n\t\tlet activeEditorChangeEventCounter = 0;\n\t\tconst activeEditorChangeListener = service.onDidActiveEditorChange(() => {\n\t\t\tactiveEditorChangeEventCounter++;\n\t\t});\n\n\t\tlet visibleEditorChangeEventCounter = 0;\n\t\tconst visibleEditorChangeListener = service.onDidVisibleEditorsChange(() => {\n\t\t\tvisibleEditorChangeEventCounter++;\n\t\t});\n\n\t\tconst editorP1 = service.openEditor(input, { pinned: true });\n\t\tconst editorP2 = service.openEditor(otherInput, { pinned: true });\n\n\t\tconst editor1 = await editorP1;\n\t\tassert.strictEqual(editor1, undefined);\n\n\t\tconst editor2 = await editorP2;\n\t\tassert.strictEqual(editor2?.input, otherInput);\n\n\t\tassert.strictEqual(activeEditorChangeEventCounter, 1);\n\t\tassert.strictEqual(visibleEditorChangeEventCounter, 1);\n\n\t\tactiveEditorChangeListener.dispose();\n\t\tvisibleEditorChangeListener.dispose();\n\t});\n\n\ttest('openEditor() - same input does not cancel previous one - https://github.com/microsoft/vscode/issues/136684', async () => {\n\t\tconst [, service] = await createEditorService();\n\n\t\tlet input = createTestFileEditorInput(URI.parse('my://resource-basics'), TEST_EDITOR_INPUT_ID);\n\n\t\tlet editorP1 = service.openEditor(input, { pinned: true });\n\t\tlet editorP2 = service.openEditor(input, { pinned: true });\n\n\t\tlet editor1 = await editorP1;\n\t\tassert.strictEqual(editor1?.input, input);\n\n\t\tlet editor2 = await editorP2;\n\t\tassert.strictEqual(editor2?.input, input);\n\n\t\tassert.ok(editor2.group);\n\t\tawait editor2.group.closeAllEditors();\n\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-basics'), TEST_EDITOR_INPUT_ID);\n\t\tconst inputSame = createTestFileEditorInput(URI.parse('my://resource-basics'), TEST_EDITOR_INPUT_ID);\n\n\t\teditorP1 = service.openEditor(input, { pinned: true });\n\t\teditorP2 = service.openEditor(inputSame, { pinned: true });\n\n\t\teditor1 = await editorP1;\n\t\tassert.strictEqual(editor1?.input, input);\n\n\t\teditor2 = await editorP2;\n\t\tassert.strictEqual(editor2?.input, input);\n\t});\n\n\ttest('openEditor() - singleton typed editors reveal instead of split', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input1 = disposables.add(new TestSingletonFileEditorInput(URI.parse('my://resource-basics1'), TEST_EDITOR_INPUT_ID));\n\t\tconst input2 = disposables.add(new TestSingletonFileEditorInput(URI.parse('my://resource-basics2'), TEST_EDITOR_INPUT_ID));\n\n\t\tconst input1Group = (await service.openEditor(input1, { pinned: true }))?.group;\n\t\tconst input2Group = (await service.openEditor(input2, { pinned: true }, SIDE_GROUP))?.group;\n\n\t\tassert.strictEqual(part.activeGroup, input2Group);\n\n\t\tawait service.openEditor(input1, { pinned: true });\n\n\t\tassert.strictEqual(part.activeGroup, input1Group);\n\t});\n\n\ttest('openEditor() - locked groups', async () => {\n\t\tdisposables.add(registerTestFileEditor());\n\n\t\tconst [part, service, accessor] = await createEditorService();\n\n\t\tdisposables.add(accessor.editorResolverService.registerEditor(\n\t\t\t'*.editor-service-locked-group-tests',\n\t\t\t{ id: TEST_EDITOR_INPUT_ID, label: 'Label', priority: RegisteredEditorPriority.exclusive },\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: editor => ({ editor: createTestFileEditorInput(editor.resource, TEST_EDITOR_INPUT_ID) })\n\t\t\t}\n\t\t));\n\n\t\tconst input1: IResourceEditorInput = { resource: URI.parse('file://resource-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input2: IResourceEditorInput = { resource: URI.parse('file://resource2-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input3: IResourceEditorInput = { resource: URI.parse('file://resource3-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input4: IResourceEditorInput = { resource: URI.parse('file://resource4-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input5: IResourceEditorInput = { resource: URI.parse('file://resource5-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input6: IResourceEditorInput = { resource: URI.parse('file://resource6-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input7: IResourceEditorInput = { resource: URI.parse('file://resource7-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\n\t\tconst editor1 = await service.openEditor(input1, { pinned: true });\n\t\tconst editor2 = await service.openEditor(input2, { pinned: true }, SIDE_GROUP);\n\n\t\tconst group1 = editor1?.group;\n\t\tassert.strictEqual(group1?.count, 1);\n\n\t\tconst group2 = editor2?.group;\n\t\tassert.strictEqual(group2?.count, 1);\n\n\t\tgroup2.lock(true);\n\t\tpart.activateGroup(group2.id);\n\n\t\t// Will open in group 1 because group 2 is locked\n\t\tawait service.openEditor(input3, { pinned: true });\n\n\t\tassert.strictEqual(group1.count, 2);\n\t\tassert.strictEqual(group1.activeEditor?.resource?.toString(), input3.resource.toString());\n\t\tassert.strictEqual(group2.count, 1);\n\n\t\t// Will open in group 2 because group was provided\n\t\tawait service.openEditor(input3, { pinned: true }, group2.id);\n\n\t\tassert.strictEqual(group1.count, 2);\n\t\tassert.strictEqual(group2.count, 2);\n\t\tassert.strictEqual(group2.activeEditor?.resource?.toString(), input3.resource.toString());\n\n\t\t// Will reveal editor in group 2 because it is contained\n\t\tawait service.openEditor(input2, { pinned: true }, group2);\n\t\tawait service.openEditor(input2, { pinned: true }, ACTIVE_GROUP);\n\n\t\tassert.strictEqual(group1.count, 2);\n\t\tassert.strictEqual(group2.count, 2);\n\t\tassert.strictEqual(group2.activeEditor?.resource?.toString(), input2.resource.toString());\n\n\t\t// Will open a new group because side group is locked\n\t\tpart.activateGroup(group1.id);\n\t\tconst editor3 = await service.openEditor(input4, { pinned: true }, SIDE_GROUP);\n\t\tassert.strictEqual(part.count, 3);\n\n\t\tconst group3 = editor3?.group;\n\t\tassert.strictEqual(group3?.count, 1);\n\n\t\t// Will reveal editor in group 2 because it is contained\n\t\tawait service.openEditor(input3, { pinned: true }, group2);\n\t\tpart.activateGroup(group1.id);\n\t\tawait service.openEditor(input3, { pinned: true }, SIDE_GROUP);\n\t\tassert.strictEqual(part.count, 3);\n\n\t\t// Will open a new group if all groups are locked\n\t\tgroup1.lock(true);\n\t\tgroup2.lock(true);\n\t\tgroup3.lock(true);\n\n\t\tpart.activateGroup(group1.id);\n\t\tconst editor5 = await service.openEditor(input5, { pinned: true });\n\t\tconst group4 = editor5?.group;\n\t\tassert.strictEqual(group4?.count, 1);\n\t\tassert.strictEqual(group4.activeEditor?.resource?.toString(), input5.resource.toString());\n\t\tassert.strictEqual(part.count, 4);\n\n\t\t// Will open editor in most recently non-locked group\n\t\tgroup1.lock(false);\n\t\tgroup2.lock(false);\n\t\tgroup3.lock(false);\n\t\tgroup4.lock(false);\n\n\t\tpart.activateGroup(group3.id);\n\t\tpart.activateGroup(group2.id);\n\t\tpart.activateGroup(group4.id);\n\t\tgroup4.lock(true);\n\t\tgroup2.lock(true);\n\n\t\tawait service.openEditor(input6, { pinned: true });\n\t\tassert.strictEqual(part.count, 4);\n\t\tassert.strictEqual(part.activeGroup, group3);\n\t\tassert.strictEqual(group3.activeEditor?.resource?.toString(), input6.resource.toString());\n\n\t\t// Will find the right group where editor is already opened in when all groups are locked\n\t\tgroup1.lock(true);\n\t\tgroup2.lock(true);\n\t\tgroup3.lock(true);\n\t\tgroup4.lock(true);\n\n\t\tpart.activateGroup(group1.id);\n\n\t\tawait service.openEditor(input6, { pinned: true });\n\n\t\tassert.strictEqual(part.count, 4);\n\t\tassert.strictEqual(part.activeGroup, group3);\n\t\tassert.strictEqual(group3.activeEditor?.resource?.toString(), input6.resource.toString());\n\n\t\tassert.strictEqual(part.activeGroup, group3);\n\t\tassert.strictEqual(group3.activeEditor?.resource?.toString(), input6.resource.toString());\n\n\t\tpart.activateGroup(group1.id);\n\n\t\tawait service.openEditor(input6, { pinned: true });\n\n\t\tassert.strictEqual(part.count, 4);\n\t\tassert.strictEqual(part.activeGroup, group3);\n\t\tassert.strictEqual(group3.activeEditor?.resource?.toString(), input6.resource.toString());\n\n\t\t// Will reveal an opened editor in the active locked group\n\t\tawait service.openEditor(input7, { pinned: true }, group3);\n\t\tawait service.openEditor(input6, { pinned: true });\n\n\t\tassert.strictEqual(part.count, 4);\n\t\tassert.strictEqual(part.activeGroup, group3);\n\t\tassert.strictEqual(group3.activeEditor?.resource?.toString(), input6.resource.toString());\n\t});\n\n\ttest('locked groups - workbench.editor.revealIfOpen', async () => {\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tconst configurationService = new TestConfigurationService();\n\t\tawait configurationService.setUserConfiguration('workbench', { 'editor': { 'revealIfOpen': true } });\n\t\tinstantiationService.stub(IConfigurationService, configurationService);\n\n\t\tdisposables.add(registerTestFileEditor());\n\n\t\tconst [part, service, accessor] = await createEditorService(instantiationService);\n\n\t\tdisposables.add(accessor.editorResolverService.registerEditor(\n\t\t\t'*.editor-service-locked-group-tests',\n\t\t\t{ id: TEST_EDITOR_INPUT_ID, label: 'Label', priority: RegisteredEditorPriority.exclusive },\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: editor => ({ editor: createTestFileEditorInput(editor.resource, TEST_EDITOR_INPUT_ID) })\n\t\t\t}\n\t\t));\n\n\t\tconst rootGroup = part.activeGroup;\n\t\tconst rightGroup = part.addGroup(rootGroup, GroupDirection.RIGHT);\n\n\t\tpart.activateGroup(rootGroup);\n\n\t\tconst input1: IResourceEditorInput = { resource: URI.parse('file://resource-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input2: IResourceEditorInput = { resource: URI.parse('file://resource2-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input3: IResourceEditorInput = { resource: URI.parse('file://resource3-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input4: IResourceEditorInput = { resource: URI.parse('file://resource4-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\n\t\tawait service.openEditor(input1, rootGroup.id);\n\t\tawait service.openEditor(input2, rootGroup.id);\n\n\t\tassert.strictEqual(part.activeGroup.id, rootGroup.id);\n\n\t\tawait service.openEditor(input3, rightGroup.id);\n\t\tawait service.openEditor(input4, rightGroup.id);\n\n\t\tassert.strictEqual(part.activeGroup.id, rightGroup.id);\n\n\t\trootGroup.lock(true);\n\t\trightGroup.lock(true);\n\n\t\tawait service.openEditor(input1);\n\n\t\tassert.strictEqual(part.activeGroup.id, rootGroup.id);\n\t\tassert.strictEqual(part.activeGroup.activeEditor?.resource?.toString(), input1.resource.toString());\n\n\t\tawait service.openEditor(input3);\n\n\t\tassert.strictEqual(part.activeGroup.id, rightGroup.id);\n\t\tassert.strictEqual(part.activeGroup.activeEditor?.resource?.toString(), input3.resource.toString());\n\n\t\tassert.strictEqual(part.groups.length, 2);\n\t});\n\n\ttest('locked groups - revealIfVisible', async () => {\n\t\tdisposables.add(registerTestFileEditor());\n\n\t\tconst [part, service, accessor] = await createEditorService();\n\n\t\tdisposables.add(accessor.editorResolverService.registerEditor(\n\t\t\t'*.editor-service-locked-group-tests',\n\t\t\t{ id: TEST_EDITOR_INPUT_ID, label: 'Label', priority: RegisteredEditorPriority.exclusive },\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: editor => ({ editor: createTestFileEditorInput(editor.resource, TEST_EDITOR_INPUT_ID) })\n\t\t\t}\n\t\t));\n\n\t\tconst rootGroup = part.activeGroup;\n\t\tconst rightGroup = part.addGroup(rootGroup, GroupDirection.RIGHT);\n\n\t\tpart.activateGroup(rootGroup);\n\n\t\tconst input1: IResourceEditorInput = { resource: URI.parse('file://resource-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input2: IResourceEditorInput = { resource: URI.parse('file://resource2-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input3: IResourceEditorInput = { resource: URI.parse('file://resource3-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input4: IResourceEditorInput = { resource: URI.parse('file://resource4-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\n\t\tawait service.openEditor(input1, rootGroup.id);\n\t\tawait service.openEditor(input2, rootGroup.id);\n\n\t\tassert.strictEqual(part.activeGroup.id, rootGroup.id);\n\n\t\tawait service.openEditor(input3, rightGroup.id);\n\t\tawait service.openEditor(input4, rightGroup.id);\n\n\t\tassert.strictEqual(part.activeGroup.id, rightGroup.id);\n\n\t\trootGroup.lock(true);\n\t\trightGroup.lock(true);\n\n\t\tawait service.openEditor({ ...input2, options: { ...input2.options, revealIfVisible: true } });\n\n\t\tassert.strictEqual(part.activeGroup.id, rootGroup.id);\n\t\tassert.strictEqual(part.activeGroup.activeEditor?.resource?.toString(), input2.resource.toString());\n\n\t\tawait service.openEditor({ ...input4, options: { ...input4.options, revealIfVisible: true } });\n\n\t\tassert.strictEqual(part.activeGroup.id, rightGroup.id);\n\t\tassert.strictEqual(part.activeGroup.activeEditor?.resource?.toString(), input4.resource.toString());\n\n\t\tassert.strictEqual(part.groups.length, 2);\n\t});\n\n\ttest('locked groups - revealIfOpened', async () => {\n\t\tdisposables.add(registerTestFileEditor());\n\n\t\tconst [part, service, accessor] = await createEditorService();\n\n\t\tdisposables.add(accessor.editorResolverService.registerEditor(\n\t\t\t'*.editor-service-locked-group-tests',\n\t\t\t{ id: TEST_EDITOR_INPUT_ID, label: 'Label', priority: RegisteredEditorPriority.exclusive },\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: editor => ({ editor: createTestFileEditorInput(editor.resource, TEST_EDITOR_INPUT_ID) })\n\t\t\t}\n\t\t));\n\n\t\tconst rootGroup = part.activeGroup;\n\t\tconst rightGroup = part.addGroup(rootGroup, GroupDirection.RIGHT);\n\n\t\tpart.activateGroup(rootGroup);\n\n\t\tconst input1: IResourceEditorInput = { resource: URI.parse('file://resource-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input2: IResourceEditorInput = { resource: URI.parse('file://resource2-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input3: IResourceEditorInput = { resource: URI.parse('file://resource3-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\t\tconst input4: IResourceEditorInput = { resource: URI.parse('file://resource4-basics.editor-service-locked-group-tests'), options: { pinned: true } };\n\n\t\tawait service.openEditor(input1, rootGroup.id);\n\t\tawait service.openEditor(input2, rootGroup.id);\n\n\t\tassert.strictEqual(part.activeGroup.id, rootGroup.id);\n\n\t\tawait service.openEditor(input3, rightGroup.id);\n\t\tawait service.openEditor(input4, rightGroup.id);\n\n\t\tassert.strictEqual(part.activeGroup.id, rightGroup.id);\n\n\t\trootGroup.lock(true);\n\t\trightGroup.lock(true);\n\n\t\tawait service.openEditor({ ...input1, options: { ...input1.options, revealIfOpened: true } });\n\n\t\tassert.strictEqual(part.activeGroup.id, rootGroup.id);\n\t\tassert.strictEqual(part.activeGroup.activeEditor?.resource?.toString(), input1.resource.toString());\n\n\t\tawait service.openEditor({ ...input3, options: { ...input3.options, revealIfOpened: true } });\n\n\t\tassert.strictEqual(part.activeGroup.id, rightGroup.id);\n\t\tassert.strictEqual(part.activeGroup.activeEditor?.resource?.toString(), input3.resource.toString());\n\n\t\tassert.strictEqual(part.groups.length, 2);\n\t});\n\n\ttest('openEditor() - untyped, typed', () => {\n\t\treturn testOpenEditors(false);\n\t});\n\n\ttest('openEditors() - untyped, typed', () => {\n\t\treturn testOpenEditors(true);\n\t});\n\n\tasync function testOpenEditors(useOpenEditors: boolean) {\n\t\tdisposables.add(registerTestFileEditor());\n\n\t\tconst [part, service, accessor] = await createEditorService();\n\n\t\tlet rootGroup = part.activeGroup;\n\n\t\tlet editorFactoryCalled = 0;\n\t\tlet untitledEditorFactoryCalled = 0;\n\t\tlet diffEditorFactoryCalled = 0;\n\n\t\tlet lastEditorFactoryEditor: IResourceEditorInput | undefined = undefined;\n\t\tlet lastUntitledEditorFactoryEditor: IUntitledTextResourceEditorInput | undefined = undefined;\n\t\tlet lastDiffEditorFactoryEditor: IResourceDiffEditorInput | undefined = undefined;\n\n\t\tdisposables.add(accessor.editorResolverService.registerEditor(\n\t\t\t'*.editor-service-override-tests',\n\t\t\t{ id: TEST_EDITOR_INPUT_ID, label: 'Label', priority: RegisteredEditorPriority.exclusive },\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: editor => {\n\t\t\t\t\teditorFactoryCalled++;\n\t\t\t\t\tlastEditorFactoryEditor = editor;\n\n\t\t\t\t\treturn { editor: createTestFileEditorInput(editor.resource, TEST_EDITOR_INPUT_ID) };\n\t\t\t\t},\n\t\t\t\tcreateUntitledEditorInput: untitledEditor => {\n\t\t\t\t\tuntitledEditorFactoryCalled++;\n\t\t\t\t\tlastUntitledEditorFactoryEditor = untitledEditor;\n\n\t\t\t\t\treturn { editor: createTestFileEditorInput(untitledEditor.resource ?? URI.parse(`untitled://my-untitled-editor-${untitledEditorFactoryCalled}`), TEST_EDITOR_INPUT_ID) };\n\t\t\t\t},\n\t\t\t\tcreateDiffEditorInput: diffEditor => {\n\t\t\t\t\tdiffEditorFactoryCalled++;\n\t\t\t\t\tlastDiffEditorFactoryEditor = diffEditor;\n\n\t\t\t\t\treturn { editor: createTestFileEditorInput(URI.file(`diff-editor-${diffEditorFactoryCalled}`), TEST_EDITOR_INPUT_ID) };\n\t\t\t\t}\n\t\t\t}\n\t\t));\n\n\t\tasync function resetTestState() {\n\t\t\teditorFactoryCalled = 0;\n\t\t\tuntitledEditorFactoryCalled = 0;\n\t\t\tdiffEditorFactoryCalled = 0;\n\n\t\t\tlastEditorFactoryEditor = undefined;\n\t\t\tlastUntitledEditorFactoryEditor = undefined;\n\t\t\tlastDiffEditorFactoryEditor = undefined;\n\n\t\t\tawait workbenchTeardown(accessor.instantiationService);\n\n\t\t\trootGroup = part.activeGroup;\n\t\t}\n\n\t\tasync function openEditor(editor: EditorInputWithOptions | IUntypedEditorInput, group?: PreferredGroup): Promise<IEditorPane | undefined> {\n\t\t\tif (useOpenEditors) {\n\t\t\t\t// The type safety isn't super good here, so we assist with runtime checks\n\t\t\t\t// Open editors expects untyped or editor input with options, you cannot pass a typed editor input\n\t\t\t\t// without options\n\t\t\t\tif (!isEditorInputWithOptions(editor) && isEditorInput(editor)) {\n\t\t\t\t\teditor = { editor: editor, options: {} };\n\t\t\t\t}\n\t\t\t\tconst panes = await service.openEditors([editor], group);\n\t\t\t\treturn panes[0];\n\t\t\t}\n\n\t\t\tif (isEditorInputWithOptions(editor)) {\n\t\t\t\treturn service.openEditor(editor.editor, editor.options, group);\n\t\t\t}\n\n\t\t\treturn service.openEditor(editor, group);\n\t\t}\n\n\t\t// untyped\n\t\t{\n\t\t\t// untyped resource editor, no options, no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests') };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\t\t\t\tlet typedEditor = pane?.input;\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(typedEditor instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(typedEditor.resource.toString(), untypedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.strictEqual(lastEditorFactoryEditor, untypedEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\t// opening the same editor should not create\n\t\t\t\t// a new editor input\n\t\t\t\tawait openEditor(untypedEditor);\n\t\t\t\tassert.strictEqual(pane?.group.activeEditor, typedEditor);\n\n\t\t\t\t// replaceEditors should work too\n\t\t\t\tconst untypedEditorReplacement: IResourceEditorInput = { resource: URI.file('file-replaced.editor-service-override-tests') };\n\t\t\t\tawait service.replaceEditors([{\n\t\t\t\t\teditor: typedEditor,\n\t\t\t\t\treplacement: untypedEditorReplacement\n\t\t\t\t}], rootGroup);\n\n\t\t\t\ttypedEditor = rootGroup.activeEditor!;\n\n\t\t\t\tassert.ok(typedEditor instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(typedEditor?.resource?.toString(), untypedEditorReplacement.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 3);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.strictEqual(lastEditorFactoryEditor, untypedEditorReplacement);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped resource editor, options (override text), no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests'), options: { override: DEFAULT_EDITOR_ASSOCIATION.id } };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\t\t\t\tconst typedEditor = pane?.input;\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(typedEditor instanceof FileEditorInput);\n\t\t\t\tassert.strictEqual(typedEditor.resource.toString(), untypedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\t// opening the same editor should not create\n\t\t\t\t// a new editor input\n\t\t\t\tawait openEditor(untypedEditor);\n\t\t\t\tassert.strictEqual(pane?.group.activeEditor, typedEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped resource editor, options (override text, sticky: true, preserveFocus: true), no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests'), options: { sticky: true, preserveFocus: true, override: DEFAULT_EDITOR_ASSOCIATION.id } };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof FileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), untypedEditor.resource.toString());\n\t\t\t\tassert.strictEqual(pane.group.isSticky(pane.input), true);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t\tawait part.activeGroup.closeEditor(pane.input);\n\t\t\t}\n\n\t\t\t// untyped resource editor, options (override default), no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests'), options: { override: DEFAULT_EDITOR_ASSOCIATION.id } };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof FileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), untypedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped resource editor, options (override: TEST_EDITOR_INPUT_ID), no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests'), options: { override: TEST_EDITOR_INPUT_ID } };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), untypedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.strictEqual(lastEditorFactoryEditor, untypedEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped resource editor, options (sticky: true, preserveFocus: true), no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests'), options: { sticky: true, preserveFocus: true } };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), untypedEditor.resource.toString());\n\t\t\t\tassert.strictEqual(pane.group.isSticky(pane.input), true);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.strictEqual((lastEditorFactoryEditor as IResourceEditorInput).resource.toString(), untypedEditor.resource.toString());\n\t\t\t\tassert.strictEqual((lastEditorFactoryEditor as IResourceEditorInput).options?.preserveFocus, true);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t\tawait part.activeGroup.closeEditor(pane.input);\n\t\t\t}\n\n\t\t\t// untyped resource editor, options (override: TEST_EDITOR_INPUT_ID, sticky: true, preserveFocus: true), no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests'), options: { sticky: true, preserveFocus: true, override: TEST_EDITOR_INPUT_ID } };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), untypedEditor.resource.toString());\n\t\t\t\tassert.strictEqual(pane.group.isSticky(pane.input), true);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.strictEqual((lastEditorFactoryEditor as IResourceEditorInput).resource.toString(), untypedEditor.resource.toString());\n\t\t\t\tassert.strictEqual((lastEditorFactoryEditor as IResourceEditorInput).options?.preserveFocus, true);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t\tawait part.activeGroup.closeEditor(pane.input);\n\t\t\t}\n\n\t\t\t// untyped resource editor, no options, SIDE_GROUP\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests') };\n\t\t\t\tconst pane = await openEditor(untypedEditor, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(accessor.editorGroupService.groups.length, 2);\n\t\t\t\tassert.notStrictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane?.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane?.input.resource.toString(), untypedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.strictEqual(lastEditorFactoryEditor, untypedEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped resource editor, options (override text), SIDE_GROUP\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceEditorInput = { resource: URI.file('file.editor-service-override-tests'), options: { override: DEFAULT_EDITOR_ASSOCIATION.id } };\n\t\t\t\tconst pane = await openEditor(untypedEditor, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(accessor.editorGroupService.groups.length, 2);\n\t\t\t\tassert.notStrictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane?.input instanceof FileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), untypedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\t\t}\n\n\t\t// Typed\n\t\t{\n\t\t\t// typed editor, no options, no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor });\n\t\t\t\tlet typedInput = pane?.input;\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(typedInput instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(typedInput.resource.toString(), typedEditor.resource.toString());\n\n\t\t\t\t// It's a typed editor input so the resolver should not have been called\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\t// opening the same editor should not create\n\t\t\t\t// a new editor input\n\t\t\t\tawait openEditor(typedEditor);\n\t\t\t\tassert.strictEqual(pane?.group.activeEditor, typedInput);\n\n\t\t\t\t// replaceEditors should work too\n\t\t\t\tconst typedEditorReplacement = createTestFileEditorInput(URI.file('file-replaced.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tawait service.replaceEditors([{\n\t\t\t\t\teditor: typedEditor,\n\t\t\t\t\treplacement: typedEditorReplacement\n\t\t\t\t}], rootGroup);\n\n\t\t\t\ttypedInput = rootGroup.activeEditor!;\n\n\t\t\t\tassert.ok(typedInput instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(typedInput.resource.toString(), typedEditorReplacement.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// typed editor, no options, no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor });\n\t\t\t\tconst typedInput = pane?.input;\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(typedInput instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(typedInput.resource.toString(), typedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\t// opening the same editor should not create\n\t\t\t\t// a new editor input\n\t\t\t\tawait openEditor(typedEditor);\n\t\t\t\tassert.strictEqual(pane?.group.activeEditor, typedEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// typed editor, options (no override, sticky: true, preserveFocus: true), no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor, options: { sticky: true, preserveFocus: true } });\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), typedEditor.resource.toString());\n\t\t\t\tassert.strictEqual(pane.group.isSticky(pane.input), true);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t\tawait part.activeGroup.closeEditor(pane.input);\n\t\t\t}\n\n\t\t\t// typed editor, options (override default), no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor, options: { override: DEFAULT_EDITOR_ASSOCIATION.id } });\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\t// We shouldn't have resolved because it is a typed editor, even though we have an override specified\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), typedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// typed editor, options (override: TEST_EDITOR_INPUT_ID), no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor, options: { override: TEST_EDITOR_INPUT_ID } });\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), typedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// typed editor, options (sticky: true, preserveFocus: true), no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor, options: { sticky: true, preserveFocus: true } });\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), typedEditor.resource.toString());\n\t\t\t\tassert.strictEqual(pane.group.isSticky(pane.input), true);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t\tawait part.activeGroup.closeEditor(pane.input);\n\t\t\t}\n\n\t\t\t// typed editor, options (override: TEST_EDITOR_INPUT_ID, sticky: true, preserveFocus: true), no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor, options: { sticky: true, preserveFocus: true, override: TEST_EDITOR_INPUT_ID } });\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), typedEditor.resource.toString());\n\t\t\t\tassert.strictEqual(pane.group.isSticky(pane.input), true);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t\tawait part.activeGroup.closeEditor(pane.input);\n\t\t\t}\n\n\t\t\t// typed editor, no options, SIDE_GROUP\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor }, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(accessor.editorGroupService.groups.length, 2);\n\t\t\t\tassert.notStrictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane?.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane?.input.resource.toString(), typedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// typed editor, options (no override), SIDE_GROUP\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.editor-service-override-tests'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor }, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(accessor.editorGroupService.groups.length, 2);\n\t\t\t\tassert.notStrictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane?.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.toString(), typedEditor.resource.toString());\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\t\t}\n\n\t\t// Untyped untitled\n\t\t{\n\t\t\t// untyped untitled editor, no options, no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IUntitledTextResourceEditorInput = { resource: undefined, options: { override: TEST_EDITOR_INPUT_ID } };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.scheme, 'untitled');\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.strictEqual(lastUntitledEditorFactoryEditor, untypedEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped untitled editor, no options, SIDE_GROUP\n\t\t\t{\n\t\t\t\tconst untypedEditor: IUntitledTextResourceEditorInput = { resource: undefined, options: { override: TEST_EDITOR_INPUT_ID } };\n\t\t\t\tconst pane = await openEditor(untypedEditor, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(accessor.editorGroupService.groups.length, 2);\n\t\t\t\tassert.notStrictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane?.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane?.input.resource.scheme, 'untitled');\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.strictEqual(lastUntitledEditorFactoryEditor, untypedEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped untitled editor with associated resource, no options, no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IUntitledTextResourceEditorInput = { resource: URI.file('file-original.editor-service-override-tests').with({ scheme: 'untitled' }) };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\t\t\t\tconst typedEditor = pane?.input;\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(typedEditor instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(typedEditor.resource.scheme, 'untitled');\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.strictEqual(lastUntitledEditorFactoryEditor, untypedEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\t// opening the same editor should not create\n\t\t\t\t// a new editor input\n\t\t\t\tawait openEditor(untypedEditor);\n\t\t\t\tassert.strictEqual(pane?.group.activeEditor, typedEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped untitled editor, options (sticky: true, preserveFocus: true), no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IUntitledTextResourceEditorInput = { resource: undefined, options: { sticky: true, preserveFocus: true, override: TEST_EDITOR_INPUT_ID } };\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input.resource.scheme, 'untitled');\n\t\t\t\tassert.strictEqual(pane.group.isSticky(pane.input), true);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 1);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.strictEqual(lastUntitledEditorFactoryEditor, untypedEditor);\n\t\t\t\tassert.strictEqual((lastUntitledEditorFactoryEditor as IUntitledTextResourceEditorInput).options?.preserveFocus, true);\n\t\t\t\tassert.strictEqual((lastUntitledEditorFactoryEditor as IUntitledTextResourceEditorInput).options?.sticky, true);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\t\t}\n\n\t\t// Untyped diff\n\t\t{\n\t\t\t// untyped diff editor, no options, no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceDiffEditorInput = {\n\t\t\t\t\toriginal: { resource: URI.file('file-original.editor-service-override-tests') },\n\t\t\t\t\tmodified: { resource: URI.file('file-modified.editor-service-override-tests') },\n\t\t\t\t\toptions: { override: TEST_EDITOR_INPUT_ID }\n\t\t\t\t};\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\t\t\t\tconst typedEditor = pane?.input;\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(typedEditor instanceof TestFileEditorInput);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 1);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.strictEqual(lastDiffEditorFactoryEditor, untypedEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped diff editor, no options, SIDE_GROUP\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceDiffEditorInput = {\n\t\t\t\t\toriginal: { resource: URI.file('file-original.editor-service-override-tests') },\n\t\t\t\t\tmodified: { resource: URI.file('file-modified.editor-service-override-tests') },\n\t\t\t\t\toptions: { override: TEST_EDITOR_INPUT_ID }\n\t\t\t\t};\n\t\t\t\tconst pane = await openEditor(untypedEditor, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(accessor.editorGroupService.groups.length, 2);\n\t\t\t\tassert.notStrictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane?.input instanceof TestFileEditorInput);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 1);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.strictEqual(lastDiffEditorFactoryEditor, untypedEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped diff editor, options (sticky: true, preserveFocus: true), no group\n\t\t\t{\n\t\t\t\tconst untypedEditor: IResourceDiffEditorInput = {\n\t\t\t\t\toriginal: { resource: URI.file('file-original.editor-service-override-tests') },\n\t\t\t\t\tmodified: { resource: URI.file('file-modified.editor-service-override-tests') },\n\t\t\t\t\toptions: {\n\t\t\t\t\t\toverride: TEST_EDITOR_INPUT_ID, sticky: true, preserveFocus: true\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tconst pane = await openEditor(untypedEditor);\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.group.isSticky(pane.input), true);\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 1);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.strictEqual(lastDiffEditorFactoryEditor, untypedEditor);\n\t\t\t\tassert.strictEqual((lastDiffEditorFactoryEditor as IUntitledTextResourceEditorInput).options?.preserveFocus, true);\n\t\t\t\tassert.strictEqual((lastDiffEditorFactoryEditor as IUntitledTextResourceEditorInput).options?.sticky, true);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\t\t}\n\n\t\t// typed editor, not registered\n\t\t{\n\n\t\t\t// no options, no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.something'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor });\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input, typedEditor);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// no options, SIDE_GROUP\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.something'), TEST_EDITOR_INPUT_ID);\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor }, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(accessor.editorGroupService.groups.length, 2);\n\t\t\t\tassert.notStrictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane?.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane?.input, typedEditor);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\t\t}\n\n\t\t// typed editor, not supporting `toUntyped`\n\t\t{\n\n\t\t\t// no options, no group\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.something'), TEST_EDITOR_INPUT_ID);\n\t\t\t\ttypedEditor.disableToUntyped = true;\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor });\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane.input, typedEditor);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// no options, SIDE_GROUP\n\t\t\t{\n\t\t\t\tconst typedEditor = createTestFileEditorInput(URI.file('file.something'), TEST_EDITOR_INPUT_ID);\n\t\t\t\ttypedEditor.disableToUntyped = true;\n\t\t\t\tconst pane = await openEditor({ editor: typedEditor }, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(accessor.editorGroupService.groups.length, 2);\n\t\t\t\tassert.notStrictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.ok(pane?.input instanceof TestFileEditorInput);\n\t\t\t\tassert.strictEqual(pane?.input, typedEditor);\n\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(!lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\t\t}\n\n\t\t// openEditors with >1 editor\n\t\tif (useOpenEditors) {\n\n\t\t\t// mix of untyped and typed editors\n\t\t\t{\n\t\t\t\tconst untypedEditor1: IResourceEditorInput = { resource: URI.file('file1.editor-service-override-tests') };\n\t\t\t\tconst untypedEditor2: IResourceEditorInput = { resource: URI.file('file2.editor-service-override-tests') };\n\t\t\t\tconst untypedEditor3: EditorInputWithOptions = { editor: createTestFileEditorInput(URI.file('file3.editor-service-override-tests'), TEST_EDITOR_INPUT_ID) };\n\t\t\t\tconst untypedEditor4: EditorInputWithOptions = { editor: createTestFileEditorInput(URI.file('file4.editor-service-override-tests'), TEST_EDITOR_INPUT_ID) };\n\t\t\t\tconst untypedEditor5: IResourceEditorInput = { resource: URI.file('file5.editor-service-override-tests') };\n\t\t\t\tconst pane = (await service.openEditors([untypedEditor1, untypedEditor2, untypedEditor3, untypedEditor4, untypedEditor5]))[0];\n\n\t\t\t\tassert.strictEqual(pane?.group, rootGroup);\n\t\t\t\tassert.strictEqual(pane?.group.count, 5);\n\n\t\t\t\t// Only the untyped editors should have had factories called (3 untyped editors)\n\t\t\t\tassert.strictEqual(editorFactoryCalled, 3);\n\t\t\t\tassert.strictEqual(untitledEditorFactoryCalled, 0);\n\t\t\t\tassert.strictEqual(diffEditorFactoryCalled, 0);\n\n\t\t\t\tassert.ok(lastEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastUntitledEditorFactoryEditor);\n\t\t\t\tassert.ok(!lastDiffEditorFactoryEditor);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\t\t}\n\n\t\t// untyped default editor\n\t\t{\n\t\t\t// untyped default editor, options: revealIfVisible\n\t\t\t{\n\t\t\t\tconst untypedEditor1: IResourceEditorInput = { resource: URI.file('file-1'), options: { revealIfVisible: true, pinned: true } };\n\t\t\t\tconst untypedEditor2: IResourceEditorInput = { resource: URI.file('file-2'), options: { pinned: true } };\n\n\t\t\t\tconst rootPane = await openEditor(untypedEditor1);\n\t\t\t\tconst sidePane = await openEditor(untypedEditor2, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(rootPane?.group.count, 1);\n\t\t\t\tassert.strictEqual(sidePane?.group.count, 1);\n\n\t\t\t\taccessor.editorGroupService.activateGroup(sidePane.group);\n\n\t\t\t\tawait openEditor(untypedEditor1);\n\n\t\t\t\tassert.strictEqual(rootPane?.group.count, 1);\n\t\t\t\tassert.strictEqual(sidePane?.group.count, 1);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\n\t\t\t// untyped default editor, options: revealIfOpened\n\t\t\t{\n\t\t\t\tconst untypedEditor1: IResourceEditorInput = { resource: URI.file('file-1'), options: { revealIfOpened: true, pinned: true } };\n\t\t\t\tconst untypedEditor2: IResourceEditorInput = { resource: URI.file('file-2'), options: { pinned: true } };\n\n\t\t\t\tconst rootPane = await openEditor(untypedEditor1);\n\t\t\t\tawait openEditor(untypedEditor2);\n\t\t\t\tassert.strictEqual(rootPane?.group.activeEditor?.resource?.toString(), untypedEditor2.resource.toString());\n\t\t\t\tconst sidePane = await openEditor(untypedEditor2, SIDE_GROUP);\n\n\t\t\t\tassert.strictEqual(rootPane?.group.count, 2);\n\t\t\t\tassert.strictEqual(sidePane?.group.count, 1);\n\n\t\t\t\taccessor.editorGroupService.activateGroup(sidePane.group);\n\n\t\t\t\tawait openEditor(untypedEditor1);\n\n\t\t\t\tassert.strictEqual(rootPane?.group.count, 2);\n\t\t\t\tassert.strictEqual(sidePane?.group.count, 1);\n\n\t\t\t\tawait resetTestState();\n\t\t\t}\n\t\t}\n\t}\n\n\ttest('openEditor() applies options if editor already opened', async () => {\n\t\tdisposables.add(registerTestFileEditor());\n\n\t\tconst [, service, accessor] = await createEditorService();\n\n\t\tdisposables.add(accessor.editorResolverService.registerEditor(\n\t\t\t'*.editor-service-override-tests',\n\t\t\t{ id: TEST_EDITOR_INPUT_ID, label: 'Label', priority: RegisteredEditorPriority.exclusive },\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: editor => ({ editor: createTestFileEditorInput(editor.resource, TEST_EDITOR_INPUT_ID) })\n\t\t\t}\n\t\t));\n\n\t\t// Typed editor\n\t\tlet pane = await service.openEditor(createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID));\n\t\tpane = await service.openEditor(createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID), { sticky: true, preserveFocus: true });\n\n\t\tassert.strictEqual(pane?.options?.sticky, true);\n\t\tassert.strictEqual(pane?.options?.preserveFocus, true);\n\n\t\tawait pane.group.closeAllEditors();\n\n\t\t// Untyped editor (without registered editor)\n\t\tpane = await service.openEditor({ resource: URI.file('resource-openEditors') });\n\t\tpane = await service.openEditor({ resource: URI.file('resource-openEditors'), options: { sticky: true, preserveFocus: true } });\n\n\t\tassert.ok(pane instanceof TestTextFileEditor);\n\t\tassert.strictEqual(pane?.options?.sticky, true);\n\t\tassert.strictEqual(pane?.options?.preserveFocus, true);\n\n\t\t// Untyped editor (with registered editor)\n\t\tpane = await service.openEditor({ resource: URI.file('file.editor-service-override-tests') });\n\t\tpane = await service.openEditor({ resource: URI.file('file.editor-service-override-tests'), options: { sticky: true, preserveFocus: true } });\n\n\t\tassert.strictEqual(pane?.options?.sticky, true);\n\t\tassert.strictEqual(pane?.options?.preserveFocus, true);\n\t});\n\n\ttest('isOpen() with side by side editor', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst sideBySideInput = new SideBySideEditorInput('sideBySide', '', input, otherInput, service);\n\n\t\tconst editor1 = await service.openEditor(sideBySideInput, { pinned: true });\n\t\tassert.strictEqual(part.activeGroup.count, 1);\n\n\t\tassert.strictEqual(service.isOpened(input), false);\n\t\tassert.strictEqual(service.isOpened(otherInput), true);\n\t\tassert.strictEqual(service.isOpened({ resource: input.resource, typeId: input.typeId, editorId: input.editorId }), false);\n\t\tassert.strictEqual(service.isOpened({ resource: otherInput.resource, typeId: otherInput.typeId, editorId: otherInput.editorId }), true);\n\n\t\tconst editor2 = await service.openEditor(input, { pinned: true });\n\t\tassert.strictEqual(part.activeGroup.count, 2);\n\n\t\tassert.strictEqual(service.isOpened(input), true);\n\t\tassert.strictEqual(service.isOpened(otherInput), true);\n\t\tassert.strictEqual(service.isOpened({ resource: input.resource, typeId: input.typeId, editorId: input.editorId }), true);\n\t\tassert.strictEqual(service.isOpened({ resource: otherInput.resource, typeId: otherInput.typeId, editorId: otherInput.editorId }), true);\n\n\t\tawait editor2?.group.closeEditor(input);\n\t\tassert.strictEqual(part.activeGroup.count, 1);\n\n\t\tassert.strictEqual(service.isOpened(input), false);\n\t\tassert.strictEqual(service.isOpened(otherInput), true);\n\t\tassert.strictEqual(service.isOpened({ resource: input.resource, typeId: input.typeId, editorId: input.editorId }), false);\n\t\tassert.strictEqual(service.isOpened({ resource: otherInput.resource, typeId: otherInput.typeId, editorId: otherInput.editorId }), true);\n\n\t\tawait editor1?.group.closeEditor(sideBySideInput);\n\n\t\tassert.strictEqual(service.isOpened(input), false);\n\t\tassert.strictEqual(service.isOpened(otherInput), false);\n\t\tassert.strictEqual(service.isOpened({ resource: input.resource, typeId: input.typeId, editorId: input.editorId }), false);\n\t\tassert.strictEqual(service.isOpened({ resource: otherInput.resource, typeId: otherInput.typeId, editorId: otherInput.editorId }), false);\n\t});\n\n\ttest('openEditors() / replaceEditors()', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst replaceInput = createTestFileEditorInput(URI.parse('my://resource3-openEditors'), TEST_EDITOR_INPUT_ID);\n\n\t\t// Open editors\n\t\tawait service.openEditors([{ editor: input }, { editor: otherInput }]);\n\t\tassert.strictEqual(part.activeGroup.count, 2);\n\n\t\t// Replace editors\n\t\tawait service.replaceEditors([{ editor: input, replacement: replaceInput }], part.activeGroup);\n\t\tassert.strictEqual(part.activeGroup.count, 2);\n\t\tassert.strictEqual(part.activeGroup.getIndexOfEditor(replaceInput), 0);\n\t});\n\n\ttest('openEditors() handles workspace trust (typed editors)', async () => {\n\t\tconst [part, service, accessor] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\n\t\tconst input3 = createTestFileEditorInput(URI.parse('my://resource3-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst input4 = createTestFileEditorInput(URI.parse('my://resource4-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst sideBySideInput = new SideBySideEditorInput('side by side', undefined, input3, input4, service);\n\n\t\tconst oldHandler = accessor.workspaceTrustRequestService.requestOpenUrisHandler;\n\n\t\ttry {\n\n\t\t\t// Trust: cancel\n\t\t\tlet trustEditorUris: URI[] = [];\n\t\t\taccessor.workspaceTrustRequestService.requestOpenUrisHandler = async uris => {\n\t\t\t\ttrustEditorUris = uris;\n\t\t\t\treturn WorkspaceTrustUriResponse.Cancel;\n\t\t\t};\n\n\t\t\tawait service.openEditors([{ editor: input1 }, { editor: input2 }, { editor: sideBySideInput }], undefined, { validateTrust: true });\n\t\t\tassert.strictEqual(part.activeGroup.count, 0);\n\t\t\tassert.strictEqual(trustEditorUris.length, 4);\n\t\t\tassert.strictEqual(trustEditorUris.some(uri => uri.toString() === input1.resource.toString()), true);\n\t\t\tassert.strictEqual(trustEditorUris.some(uri => uri.toString() === input2.resource.toString()), true);\n\t\t\tassert.strictEqual(trustEditorUris.some(uri => uri.toString() === input3.resource.toString()), true);\n\t\t\tassert.strictEqual(trustEditorUris.some(uri => uri.toString() === input4.resource.toString()), true);\n\n\t\t\t// Trust: open in new window\n\t\t\taccessor.workspaceTrustRequestService.requestOpenUrisHandler = async uris => WorkspaceTrustUriResponse.OpenInNewWindow;\n\n\t\t\tawait service.openEditors([{ editor: input1 }, { editor: input2 }, { editor: sideBySideInput }], undefined, { validateTrust: true });\n\t\t\tassert.strictEqual(part.activeGroup.count, 0);\n\n\t\t\t// Trust: allow\n\t\t\taccessor.workspaceTrustRequestService.requestOpenUrisHandler = async uris => WorkspaceTrustUriResponse.Open;\n\n\t\t\tawait service.openEditors([{ editor: input1 }, { editor: input2 }, { editor: sideBySideInput }], undefined, { validateTrust: true });\n\t\t\tassert.strictEqual(part.activeGroup.count, 3);\n\t\t} finally {\n\t\t\taccessor.workspaceTrustRequestService.requestOpenUrisHandler = oldHandler;\n\t\t}\n\t});\n\n\ttest('openEditors() ignores trust when `validateTrust: false', async () => {\n\t\tconst [part, service, accessor] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\n\t\tconst input3 = createTestFileEditorInput(URI.parse('my://resource3-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst input4 = createTestFileEditorInput(URI.parse('my://resource4-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst sideBySideInput = new SideBySideEditorInput('side by side', undefined, input3, input4, service);\n\n\t\tconst oldHandler = accessor.workspaceTrustRequestService.requestOpenUrisHandler;\n\n\t\ttry {\n\n\t\t\t// Trust: cancel\n\t\t\taccessor.workspaceTrustRequestService.requestOpenUrisHandler = async uris => WorkspaceTrustUriResponse.Cancel;\n\n\t\t\tawait service.openEditors([{ editor: input1 }, { editor: input2 }, { editor: sideBySideInput }]);\n\t\t\tassert.strictEqual(part.activeGroup.count, 3);\n\t\t} finally {\n\t\t\taccessor.workspaceTrustRequestService.requestOpenUrisHandler = oldHandler;\n\t\t}\n\t});\n\n\ttest('openEditors() extracts proper resources from untyped editors for workspace trust', async () => {\n\t\tconst [, service, accessor] = await createEditorService();\n\n\t\tconst input = { resource: URI.file('resource-openEditors') };\n\t\tconst otherInput: IResourceDiffEditorInput = {\n\t\t\toriginal: { resource: URI.parse('my://resource2-openEditors') },\n\t\t\tmodified: { resource: URI.parse('my://resource3-openEditors') }\n\t\t};\n\n\t\tconst oldHandler = accessor.workspaceTrustRequestService.requestOpenUrisHandler;\n\n\t\ttry {\n\t\t\tlet trustEditorUris: URI[] = [];\n\t\t\taccessor.workspaceTrustRequestService.requestOpenUrisHandler = async uris => {\n\t\t\t\ttrustEditorUris = uris;\n\t\t\t\treturn oldHandler(uris);\n\t\t\t};\n\n\t\t\tawait service.openEditors([input, otherInput], undefined, { validateTrust: true });\n\t\t\tassert.strictEqual(trustEditorUris.length, 3);\n\t\t\tassert.strictEqual(trustEditorUris.some(uri => uri.toString() === input.resource.toString()), true);\n\t\t\tassert.strictEqual(trustEditorUris.some(uri => uri.toString() === otherInput.original.resource?.toString()), true);\n\t\t\tassert.strictEqual(trustEditorUris.some(uri => uri.toString() === otherInput.modified.resource?.toString()), true);\n\t\t} finally {\n\t\t\taccessor.workspaceTrustRequestService.requestOpenUrisHandler = oldHandler;\n\t\t}\n\t});\n\n\ttest('close editor does not dispose when editor opened in other group', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-close1'), TEST_EDITOR_INPUT_ID);\n\n\t\tconst rootGroup = part.activeGroup;\n\t\tconst rightGroup = part.addGroup(rootGroup, GroupDirection.RIGHT);\n\n\t\t// Open input\n\t\tawait service.openEditor(input, { pinned: true });\n\t\tawait service.openEditor(input, { pinned: true }, rightGroup);\n\n\t\tconst editors = service.editors;\n\t\tassert.strictEqual(editors.length, 2);\n\t\tassert.strictEqual(editors[0], input);\n\t\tassert.strictEqual(editors[1], input);\n\n\t\t// Close input\n\t\tawait rootGroup.closeEditor(input);\n\t\tassert.strictEqual(input.isDisposed(), false);\n\n\t\tawait rightGroup.closeEditor(input);\n\t\tassert.strictEqual(input.isDisposed(), true);\n\t});\n\n\ttest('open to the side', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1-openside'), TEST_EDITOR_INPUT_ID);\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource2-openside'), TEST_EDITOR_INPUT_ID);\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tawait service.openEditor(input1, { pinned: true }, rootGroup);\n\t\tlet editor = await service.openEditor(input1, { pinned: true, preserveFocus: true }, SIDE_GROUP);\n\n\t\tassert.strictEqual(part.activeGroup, rootGroup);\n\t\tassert.strictEqual(part.count, 2);\n\t\tassert.strictEqual(editor?.group, part.groups[1]);\n\n\t\tassert.strictEqual(service.isVisible(input1), true);\n\t\tassert.strictEqual(service.isOpened(input1), true);\n\n\t\t// Open to the side uses existing neighbour group if any\n\t\teditor = await service.openEditor(input2, { pinned: true, preserveFocus: true }, SIDE_GROUP);\n\t\tassert.strictEqual(part.activeGroup, rootGroup);\n\t\tassert.strictEqual(part.count, 2);\n\t\tassert.strictEqual(editor?.group, part.groups[1]);\n\n\t\tassert.strictEqual(service.isVisible(input2), true);\n\t\tassert.strictEqual(service.isOpened(input2), true);\n\t});\n\n\ttest('editor group activation', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1-openside'), TEST_EDITOR_INPUT_ID);\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource2-openside'), TEST_EDITOR_INPUT_ID);\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tawait service.openEditor(input1, { pinned: true }, rootGroup);\n\t\tlet editor = await service.openEditor(input2, { pinned: true, preserveFocus: true, activation: EditorActivation.ACTIVATE }, SIDE_GROUP);\n\t\tconst sideGroup = editor?.group;\n\n\t\tassert.strictEqual(part.activeGroup, sideGroup);\n\n\t\teditor = await service.openEditor(input1, { pinned: true, preserveFocus: true, activation: EditorActivation.PRESERVE }, rootGroup);\n\t\tassert.strictEqual(part.activeGroup, sideGroup);\n\n\t\teditor = await service.openEditor(input1, { pinned: true, preserveFocus: true, activation: EditorActivation.ACTIVATE }, rootGroup);\n\t\tassert.strictEqual(part.activeGroup, rootGroup);\n\n\t\teditor = await service.openEditor(input2, { pinned: true, activation: EditorActivation.PRESERVE }, sideGroup);\n\t\tassert.strictEqual(part.activeGroup, rootGroup);\n\n\t\teditor = await service.openEditor(input2, { pinned: true, activation: EditorActivation.ACTIVATE }, sideGroup);\n\t\tassert.strictEqual(part.activeGroup, sideGroup);\n\n\t\tpart.arrangeGroups(GroupsArrangement.EXPAND);\n\t\teditor = await service.openEditor(input1, { pinned: true, preserveFocus: true, activation: EditorActivation.RESTORE }, rootGroup);\n\t\tassert.strictEqual(part.activeGroup, sideGroup);\n\t});\n\n\ttest('inactive editor group does not activate when closing editor (#117686)', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1-openside'), TEST_EDITOR_INPUT_ID);\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource2-openside'), TEST_EDITOR_INPUT_ID);\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tawait service.openEditor(input1, { pinned: true }, rootGroup);\n\t\tawait service.openEditor(input2, { pinned: true }, rootGroup);\n\n\t\tconst sideGroup = (await service.openEditor(input2, { pinned: true }, SIDE_GROUP))?.group;\n\t\tassert.strictEqual(part.activeGroup, sideGroup);\n\t\tassert.notStrictEqual(rootGroup, sideGroup);\n\n\t\tpart.arrangeGroups(GroupsArrangement.EXPAND, part.activeGroup);\n\n\t\tawait rootGroup.closeEditor(input2);\n\t\tassert.strictEqual(part.activeGroup, sideGroup);\n\n\t\tassert(!part.isGroupExpanded(rootGroup));\n\t\tassert(part.isGroupExpanded(part.activeGroup));\n\t});\n\n\ttest('active editor change / visible editor change events', async function () {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tlet input = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\tlet otherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\n\t\tlet activeEditorChangeEventFired = false;\n\t\tconst activeEditorChangeListener = service.onDidActiveEditorChange(() => {\n\t\t\tactiveEditorChangeEventFired = true;\n\t\t});\n\n\t\tlet visibleEditorChangeEventFired = false;\n\t\tconst visibleEditorChangeListener = service.onDidVisibleEditorsChange(() => {\n\t\t\tvisibleEditorChangeEventFired = true;\n\t\t});\n\n\t\tfunction assertActiveEditorChangedEvent(expected: boolean) {\n\t\t\tassert.strictEqual(activeEditorChangeEventFired, expected, `Unexpected active editor change state (got ${activeEditorChangeEventFired}, expected ${expected})`);\n\t\t\tactiveEditorChangeEventFired = false;\n\t\t}\n\n\t\tfunction assertVisibleEditorsChangedEvent(expected: boolean) {\n\t\t\tassert.strictEqual(visibleEditorChangeEventFired, expected, `Unexpected visible editors change state (got ${visibleEditorChangeEventFired}, expected ${expected})`);\n\t\t\tvisibleEditorChangeEventFired = false;\n\t\t}\n\n\t\tasync function closeEditorAndWaitForNextToOpen(group: IEditorGroup, input: EditorInput): Promise<void> {\n\t\t\tawait group.closeEditor(input);\n\t\t\tawait timeout(0); // closing an editor will not immediately open the next one, so we need to wait\n\t\t}\n\n\t\t// 1.) open, open same, open other, close\n\t\tlet editor = await service.openEditor(input, { pinned: true });\n\t\tconst group = editor?.group!;\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\teditor = await service.openEditor(input);\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\teditor = await service.openEditor(otherInput);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tawait closeEditorAndWaitForNextToOpen(group, otherInput);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tawait closeEditorAndWaitForNextToOpen(group, input);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\t// 2.) open, open same (forced open) (recreate inputs that got disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\t\teditor = await service.openEditor(input);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\teditor = await service.openEditor(input, { forceReload: true });\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait closeEditorAndWaitForNextToOpen(group, input);\n\n\t\t// 3.) open, open inactive, close (recreate inputs that got disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\t\teditor = await service.openEditor(input, { pinned: true });\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\teditor = await service.openEditor(otherInput, { inactive: true });\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait group.closeAllEditors();\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\t// 4.) open, open inactive, close inactive (recreate inputs that got disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\t\teditor = await service.openEditor(input, { pinned: true });\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\teditor = await service.openEditor(otherInput, { inactive: true });\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait closeEditorAndWaitForNextToOpen(group, otherInput);\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait group.closeAllEditors();\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\t// 5.) add group, remove group (recreate inputs that got disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\t\teditor = await service.openEditor(input, { pinned: true });\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tlet rightGroup = part.addGroup(part.activeGroup, GroupDirection.RIGHT);\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\trightGroup.focus();\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tpart.removeGroup(rightGroup);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait group.closeAllEditors();\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\t// 6.) open editor in inactive group (recreate inputs that got disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\t\teditor = await service.openEditor(input, { pinned: true });\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\trightGroup = part.addGroup(part.activeGroup, GroupDirection.RIGHT);\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait rightGroup.openEditor(otherInput);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tawait closeEditorAndWaitForNextToOpen(rightGroup, otherInput);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tawait group.closeAllEditors();\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\t// 7.) activate group (recreate inputs that got disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\t\teditor = await service.openEditor(input, { pinned: true });\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\trightGroup = part.addGroup(part.activeGroup, GroupDirection.RIGHT);\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait rightGroup.openEditor(otherInput);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tgroup.focus();\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait closeEditorAndWaitForNextToOpen(rightGroup, otherInput);\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tawait group.closeAllEditors();\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\t// 8.) move editor (recreate inputs that got disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\t\teditor = await service.openEditor(input, { pinned: true });\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\teditor = await service.openEditor(otherInput, { pinned: true });\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tgroup.moveEditor(otherInput, group, { index: 0 });\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait group.closeAllEditors();\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\t// 9.) close editor in inactive group (recreate inputs that got disposed)\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\t\teditor = await service.openEditor(input, { pinned: true });\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\trightGroup = part.addGroup(part.activeGroup, GroupDirection.RIGHT);\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(false);\n\n\t\tawait rightGroup.openEditor(otherInput);\n\t\tassertActiveEditorChangedEvent(true);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\tawait closeEditorAndWaitForNextToOpen(group, input);\n\t\tassertActiveEditorChangedEvent(false);\n\t\tassertVisibleEditorsChangedEvent(true);\n\n\t\t// cleanup\n\t\tactiveEditorChangeListener.dispose();\n\t\tvisibleEditorChangeListener.dispose();\n\t});\n\n\ttest('editors change event', async function () {\n\t\tconst [part, service] = await createEditorService();\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tlet input = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\tlet otherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\n\t\tlet editorsChangeEventCounter = 0;\n\t\tasync function assertEditorsChangeEvent(fn: () => Promise<unknown>, expected: number) {\n\t\t\tconst p = Event.toPromise(service.onDidEditorsChange);\n\t\t\tawait fn();\n\t\t\tawait p;\n\t\t\teditorsChangeEventCounter++;\n\n\t\t\tassert.strictEqual(editorsChangeEventCounter, expected);\n\t\t}\n\n\t\t// open\n\t\tawait assertEditorsChangeEvent(() => service.openEditor(input, { pinned: true }), 1);\n\n\t\t// open (other)\n\t\tawait assertEditorsChangeEvent(() => service.openEditor(otherInput, { pinned: true }), 2);\n\n\t\t// close (inactive)\n\t\tawait assertEditorsChangeEvent(() => rootGroup.closeEditor(input), 3);\n\n\t\t// close (active)\n\t\tawait assertEditorsChangeEvent(() => rootGroup.closeEditor(otherInput), 4);\n\n\t\tinput = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\totherInput = createTestFileEditorInput(URI.parse('my://resource2-active'), TEST_EDITOR_INPUT_ID);\n\n\t\t// open editors\n\t\tawait assertEditorsChangeEvent(() => service.openEditors([{ editor: input, options: { pinned: true } }, { editor: otherInput, options: { pinned: true } }]), 5);\n\n\t\t// active editor change\n\t\tawait assertEditorsChangeEvent(() => service.openEditor(otherInput), 6);\n\n\t\t// move editor (in group)\n\t\tawait assertEditorsChangeEvent(() => service.openEditor(input, { pinned: true, index: 1 }), 7);\n\n\t\tconst rightGroup = part.addGroup(part.activeGroup, GroupDirection.RIGHT);\n\t\tawait assertEditorsChangeEvent(async () => rootGroup.moveEditor(input, rightGroup), 8);\n\n\t\t// move group\n\t\tawait assertEditorsChangeEvent(async () => part.moveGroup(rightGroup, rootGroup, GroupDirection.LEFT), 9);\n\t});\n\n\ttest('two active editor change events when opening editor to the side', async function () {\n\t\tconst [, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\n\t\tlet activeEditorChangeEvents = 0;\n\t\tconst activeEditorChangeListener = service.onDidActiveEditorChange(() => {\n\t\t\tactiveEditorChangeEvents++;\n\t\t});\n\n\t\tfunction assertActiveEditorChangedEvent(expected: number) {\n\t\t\tassert.strictEqual(activeEditorChangeEvents, expected, `Unexpected active editor change state (got ${activeEditorChangeEvents}, expected ${expected})`);\n\t\t\tactiveEditorChangeEvents = 0;\n\t\t}\n\n\t\tawait service.openEditor(input, { pinned: true });\n\t\tassertActiveEditorChangedEvent(1);\n\n\t\tawait service.openEditor(input, { pinned: true }, SIDE_GROUP);\n\n\t\t// we expect 2 active editor change events: one for the fact that the\n\t\t// active editor is now in the side group but also one for when the\n\t\t// editor has finished loading. we used to ignore that second change\n\t\t// event, however many listeners are interested on the active editor\n\t\t// when it has fully loaded (e.g. a model is set). as such, we cannot\n\t\t// simply ignore that second event from the editor service, even though\n\t\t// the actual editor input is the same\n\t\tassertActiveEditorChangedEvent(2);\n\n\t\t// cleanup\n\t\tactiveEditorChangeListener.dispose();\n\t});\n\n\ttest('activeTextEditorControl / activeTextEditorMode', async () => {\n\t\tconst [, service] = await createEditorService();\n\n\t\t// Open untitled input\n\t\tconst editor = await service.openEditor({ resource: undefined });\n\n\t\tassert.strictEqual(service.activeEditorPane, editor);\n\t\tassert.strictEqual(service.activeTextEditorControl, editor?.getControl());\n\t\tassert.strictEqual(service.activeTextEditorLanguageId, PLAINTEXT_LANGUAGE_ID);\n\t});\n\n\ttest('openEditor returns undefined when inactive', async function () {\n\t\tconst [, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-inactive'), TEST_EDITOR_INPUT_ID);\n\n\t\tconst editor = await service.openEditor(input, { pinned: true });\n\t\tassert.ok(editor);\n\n\t\tconst otherEditor = await service.openEditor(otherInput, { inactive: true });\n\t\tassert.ok(!otherEditor);\n\t});\n\n\ttest('openEditor shows placeholder when opening fails', async function () {\n\t\tconst [, service] = await createEditorService();\n\n\t\tconst failingInput = createTestFileEditorInput(URI.parse('my://resource-failing'), TEST_EDITOR_INPUT_ID);\n\t\tfailingInput.setFailToOpen();\n\n\t\tconst failingEditor = await service.openEditor(failingInput);\n\t\tassert.ok(failingEditor instanceof ErrorPlaceholderEditor);\n\t});\n\n\ttest('openEditor shows placeholder when restoring fails', async function () {\n\t\tconst [, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-active'), TEST_EDITOR_INPUT_ID);\n\t\tconst failingInput = createTestFileEditorInput(URI.parse('my://resource-failing'), TEST_EDITOR_INPUT_ID);\n\n\t\tawait service.openEditor(input, { pinned: true });\n\t\tawait service.openEditor(failingInput, { inactive: true });\n\n\t\tfailingInput.setFailToOpen();\n\t\tconst failingEditor = await service.openEditor(failingInput);\n\t\tassert.ok(failingEditor instanceof ErrorPlaceholderEditor);\n\t});\n\n\ttest('save, saveAll, revertAll', async function () {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tinput1.dirty = true;\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource2'), TEST_EDITOR_INPUT_ID);\n\t\tinput2.dirty = true;\n\t\tconst sameInput1 = createTestFileEditorInput(URI.parse('my://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tsameInput1.dirty = true;\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tawait service.openEditor(input1, { pinned: true });\n\t\tawait service.openEditor(input2, { pinned: true });\n\t\tawait service.openEditor(sameInput1, { pinned: true }, SIDE_GROUP);\n\n\t\tconst res1 = await service.save({ groupId: rootGroup.id, editor: input1 });\n\t\tassert.strictEqual(res1.success, true);\n\t\tassert.strictEqual(res1.editors[0], input1);\n\t\tassert.strictEqual(input1.gotSaved, true);\n\n\t\tinput1.gotSaved = false;\n\t\tinput1.gotSavedAs = false;\n\t\tinput1.gotReverted = false;\n\n\t\tinput1.dirty = true;\n\t\tinput2.dirty = true;\n\t\tsameInput1.dirty = true;\n\n\t\tconst res2 = await service.save({ groupId: rootGroup.id, editor: input1 }, { saveAs: true });\n\t\tassert.strictEqual(res2.success, true);\n\t\tassert.strictEqual(res2.editors[0], input1);\n\t\tassert.strictEqual(input1.gotSavedAs, true);\n\n\t\tinput1.gotSaved = false;\n\t\tinput1.gotSavedAs = false;\n\t\tinput1.gotReverted = false;\n\n\t\tinput1.dirty = true;\n\t\tinput2.dirty = true;\n\t\tsameInput1.dirty = true;\n\n\t\tconst revertRes = await service.revertAll();\n\t\tassert.strictEqual(revertRes, true);\n\t\tassert.strictEqual(input1.gotReverted, true);\n\n\t\tinput1.gotSaved = false;\n\t\tinput1.gotSavedAs = false;\n\t\tinput1.gotReverted = false;\n\n\t\tinput1.dirty = true;\n\t\tinput2.dirty = true;\n\t\tsameInput1.dirty = true;\n\n\t\tconst res3 = await service.saveAll();\n\t\tassert.strictEqual(res3.success, true);\n\t\tassert.strictEqual(res3.editors.length, 2);\n\t\tassert.strictEqual(input1.gotSaved, true);\n\t\tassert.strictEqual(input2.gotSaved, true);\n\n\t\tinput1.gotSaved = false;\n\t\tinput1.gotSavedAs = false;\n\t\tinput1.gotReverted = false;\n\t\tinput2.gotSaved = false;\n\t\tinput2.gotSavedAs = false;\n\t\tinput2.gotReverted = false;\n\n\t\tinput1.dirty = true;\n\t\tinput2.dirty = true;\n\t\tsameInput1.dirty = true;\n\n\t\tawait service.saveAll({ saveAs: true });\n\n\t\tassert.strictEqual(input1.gotSavedAs, true);\n\t\tassert.strictEqual(input2.gotSavedAs, true);\n\n\t\t// services dedupes inputs automatically\n\t\tassert.strictEqual(sameInput1.gotSaved, false);\n\t\tassert.strictEqual(sameInput1.gotSavedAs, false);\n\t\tassert.strictEqual(sameInput1.gotReverted, false);\n\t});\n\n\ttest('saveAll, revertAll (sticky editor)', async function () {\n\t\tconst [, service] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tinput1.dirty = true;\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource2'), TEST_EDITOR_INPUT_ID);\n\t\tinput2.dirty = true;\n\t\tconst sameInput1 = createTestFileEditorInput(URI.parse('my://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tsameInput1.dirty = true;\n\n\t\tawait service.openEditor(input1, { pinned: true, sticky: true });\n\t\tawait service.openEditor(input2, { pinned: true });\n\t\tawait service.openEditor(sameInput1, { pinned: true }, SIDE_GROUP);\n\n\t\tconst revertRes = await service.revertAll({ excludeSticky: true });\n\t\tassert.strictEqual(revertRes, true);\n\t\tassert.strictEqual(input1.gotReverted, false);\n\t\tassert.strictEqual(sameInput1.gotReverted, true);\n\n\t\tinput1.gotSaved = false;\n\t\tinput1.gotSavedAs = false;\n\t\tinput1.gotReverted = false;\n\n\t\tsameInput1.gotSaved = false;\n\t\tsameInput1.gotSavedAs = false;\n\t\tsameInput1.gotReverted = false;\n\n\t\tinput1.dirty = true;\n\t\tinput2.dirty = true;\n\t\tsameInput1.dirty = true;\n\n\t\tconst saveRes = await service.saveAll({ excludeSticky: true });\n\t\tassert.strictEqual(saveRes.success, true);\n\t\tassert.strictEqual(saveRes.editors.length, 2);\n\t\tassert.strictEqual(input1.gotSaved, false);\n\t\tassert.strictEqual(input2.gotSaved, true);\n\t\tassert.strictEqual(sameInput1.gotSaved, true);\n\t});\n\n\ttest('saveAll, revertAll untitled (exclude untitled)', async function () {\n\t\tawait testSaveRevertUntitled({}, false, false);\n\t\tawait testSaveRevertUntitled({ includeUntitled: false }, false, false);\n\t});\n\n\ttest('saveAll, revertAll untitled (include untitled)', async function () {\n\t\tawait testSaveRevertUntitled({ includeUntitled: true }, true, false);\n\t\tawait testSaveRevertUntitled({ includeUntitled: { includeScratchpad: false } }, true, false);\n\t});\n\n\ttest('saveAll, revertAll untitled (include scratchpad)', async function () {\n\t\tawait testSaveRevertUntitled({ includeUntitled: { includeScratchpad: true } }, true, true);\n\t});\n\n\tasync function testSaveRevertUntitled(options: IBaseSaveRevertAllEditorOptions, expectUntitled: boolean, expectScratchpad: boolean) {\n\t\tconst [, service] = await createEditorService();\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tinput1.dirty = true;\n\t\tconst untitledInput = createTestFileEditorInput(URI.parse('my://resource2'), TEST_EDITOR_INPUT_ID);\n\t\tuntitledInput.dirty = true;\n\t\tuntitledInput.capabilities = EditorInputCapabilities.Untitled;\n\t\tconst scratchpadInput = createTestFileEditorInput(URI.parse('my://resource3'), TEST_EDITOR_INPUT_ID);\n\t\tscratchpadInput.modified = true;\n\t\tscratchpadInput.capabilities = EditorInputCapabilities.Scratchpad | EditorInputCapabilities.Untitled;\n\n\t\tawait service.openEditor(input1, { pinned: true, sticky: true });\n\t\tawait service.openEditor(untitledInput, { pinned: true });\n\t\tawait service.openEditor(scratchpadInput, { pinned: true });\n\n\t\tconst revertRes = await service.revertAll(options);\n\t\tassert.strictEqual(revertRes, true);\n\t\tassert.strictEqual(input1.gotReverted, true);\n\t\tassert.strictEqual(untitledInput.gotReverted, expectUntitled);\n\t\tassert.strictEqual(scratchpadInput.gotReverted, expectScratchpad);\n\n\t\tinput1.gotSaved = false;\n\t\tuntitledInput.gotSavedAs = false;\n\t\tscratchpadInput.gotReverted = false;\n\n\t\tinput1.gotSaved = false;\n\t\tuntitledInput.gotSavedAs = false;\n\t\tscratchpadInput.gotReverted = false;\n\n\t\tinput1.dirty = true;\n\t\tuntitledInput.dirty = true;\n\t\tscratchpadInput.modified = true;\n\n\t\tconst saveRes = await service.saveAll(options);\n\t\tassert.strictEqual(saveRes.success, true);\n\t\tassert.strictEqual(saveRes.editors.length, expectScratchpad ? 3 : expectUntitled ? 2 : 1);\n\t\tassert.strictEqual(input1.gotSaved, true);\n\t\tassert.strictEqual(untitledInput.gotSaved, expectUntitled);\n\t\tassert.strictEqual(scratchpadInput.gotSaved, expectScratchpad);\n\t}\n\n\ttest('file delete closes editor', async function () {\n\t\treturn testFileDeleteEditorClose(false);\n\t});\n\n\ttest('file delete leaves dirty editors open', function () {\n\t\treturn testFileDeleteEditorClose(true);\n\t});\n\n\tasync function testFileDeleteEditorClose(dirty: boolean): Promise<void> {\n\t\tconst [part, service, accessor] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tinput1.dirty = dirty;\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource2'), TEST_EDITOR_INPUT_ID);\n\t\tinput2.dirty = dirty;\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tawait service.openEditor(input1, { pinned: true });\n\t\tawait service.openEditor(input2, { pinned: true });\n\n\t\tassert.strictEqual(rootGroup.activeEditor, input2);\n\n\t\tconst activeEditorChangePromise = awaitActiveEditorChange(service);\n\t\taccessor.fileService.fireAfterOperation(new FileOperationEvent(input2.resource, FileOperation.DELETE));\n\t\tif (!dirty) {\n\t\t\tawait activeEditorChangePromise;\n\t\t}\n\n\t\tif (dirty) {\n\t\t\tassert.strictEqual(rootGroup.activeEditor, input2);\n\t\t} else {\n\t\t\tassert.strictEqual(rootGroup.activeEditor, input1);\n\t\t}\n\t}\n\n\ttest('file move asks input to move', async function () {\n\t\tconst [part, service, accessor] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tconst movedInput = createTestFileEditorInput(URI.parse('my://resource2'), TEST_EDITOR_INPUT_ID);\n\t\tinput1.movedEditor = { editor: movedInput };\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tawait service.openEditor(input1, { pinned: true });\n\n\t\tconst activeEditorChangePromise = awaitActiveEditorChange(service);\n\t\taccessor.fileService.fireAfterOperation(new FileOperationEvent(input1.resource, FileOperation.MOVE, {\n\t\t\tresource: movedInput.resource,\n\t\t\tctime: 0,\n\t\t\tetag: '',\n\t\t\tisDirectory: false,\n\t\t\tisFile: true,\n\t\t\tmtime: 0,\n\t\t\tname: 'resource2',\n\t\t\tsize: 0,\n\t\t\tisSymbolicLink: false,\n\t\t\treadonly: false,\n\t\t\tlocked: false,\n\t\t\tchildren: undefined\n\t\t}));\n\t\tawait activeEditorChangePromise;\n\n\t\tassert.strictEqual(rootGroup.activeEditor, movedInput);\n\t});\n\n\tfunction awaitActiveEditorChange(editorService: IEditorService): Promise<void> {\n\t\treturn Event.toPromise(Event.once(editorService.onDidActiveEditorChange));\n\t}\n\n\ttest('file watcher gets installed for out of workspace files', async function () {\n\t\tconst [, service, accessor] = await createEditorService();\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('file://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tconst input2 = createTestFileEditorInput(URI.parse('file://resource2'), TEST_EDITOR_INPUT_ID);\n\n\t\tawait service.openEditor(input1, { pinned: true });\n\t\tassert.strictEqual(accessor.fileService.watches.length, 1);\n\t\tassert.strictEqual(accessor.fileService.watches[0].toString(), input1.resource.toString());\n\n\t\tconst editor = await service.openEditor(input2, { pinned: true });\n\t\tassert.strictEqual(accessor.fileService.watches.length, 1);\n\t\tassert.strictEqual(accessor.fileService.watches[0].toString(), input2.resource.toString());\n\n\t\tawait editor?.group.closeAllEditors();\n\t\tassert.strictEqual(accessor.fileService.watches.length, 0);\n\t});\n\n\ttest('activeEditorPane scopedContextKeyService', async function () {\n\t\tconst instantiationService = workbenchInstantiationService({ contextKeyService: instantiationService => instantiationService.createInstance(MockScopableContextKeyService) }, disposables);\n\t\tconst [part, service] = await createEditorService(instantiationService);\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('file://resource1'), TEST_EDITOR_INPUT_ID);\n\t\tcreateTestFileEditorInput(URI.parse('file://resource2'), TEST_EDITOR_INPUT_ID);\n\n\t\tawait service.openEditor(input1, { pinned: true });\n\n\t\tconst editorContextKeyService = service.activeEditorPane?.scopedContextKeyService;\n\t\tassert.ok(!!editorContextKeyService);\n\t\tassert.strictEqual(editorContextKeyService, part.activeGroup.activeEditorPane?.scopedContextKeyService);\n\t});\n\n\ttest('editorResolverService - openEditor', async function () {\n\t\tconst [, service, accessor] = await createEditorService();\n\t\tconst editorResolverService = accessor.editorResolverService;\n\t\tconst textEditorService = accessor.textEditorService;\n\n\t\tlet editorCount = 0;\n\n\t\tconst registrationDisposable = editorResolverService.registerEditor(\n\t\t\t'*.md',\n\t\t\t{\n\t\t\t\tid: 'TestEditor',\n\t\t\t\tlabel: 'Test Editor',\n\t\t\t\tdetail: 'Test Editor Provider',\n\t\t\t\tpriority: RegisteredEditorPriority.builtin\n\t\t\t},\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: (editorInput) => {\n\t\t\t\t\teditorCount++;\n\t\t\t\t\treturn ({ editor: textEditorService.createTextEditor(editorInput) });\n\t\t\t\t},\n\t\t\t\tcreateDiffEditorInput: diffEditor => ({ editor: textEditorService.createTextEditor(diffEditor) })\n\t\t\t}\n\t\t);\n\t\tassert.strictEqual(editorCount, 0);\n\n\t\tconst input1 = { resource: URI.parse('file://test/path/resource1.txt') };\n\t\tconst input2 = { resource: URI.parse('file://test/path/resource1.md') };\n\n\t\t// Open editor input 1 and it shouln't trigger override as the glob doesn't match\n\t\tawait service.openEditor(input1);\n\t\tassert.strictEqual(editorCount, 0);\n\n\t\t// Open editor input 2 and it should trigger override as the glob doesn match\n\t\tawait service.openEditor(input2);\n\t\tassert.strictEqual(editorCount, 1);\n\n\t\t// Because we specify an override we shouldn't see it triggered even if it matches\n\t\tawait service.openEditor({ ...input2, options: { override: 'default' } });\n\t\tassert.strictEqual(editorCount, 1);\n\n\t\tregistrationDisposable.dispose();\n\t});\n\n\ttest('editorResolverService - openEditors', async function () {\n\t\tconst [, service, accessor] = await createEditorService();\n\t\tconst editorResolverService = accessor.editorResolverService;\n\t\tconst textEditorService = accessor.textEditorService;\n\n\t\tlet editorCount = 0;\n\n\t\tconst registrationDisposable = editorResolverService.registerEditor(\n\t\t\t'*.md',\n\t\t\t{\n\t\t\t\tid: 'TestEditor',\n\t\t\t\tlabel: 'Test Editor',\n\t\t\t\tdetail: 'Test Editor Provider',\n\t\t\t\tpriority: RegisteredEditorPriority.builtin\n\t\t\t},\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: (editorInput) => {\n\t\t\t\t\teditorCount++;\n\t\t\t\t\treturn ({ editor: textEditorService.createTextEditor(editorInput) });\n\t\t\t\t},\n\t\t\t\tcreateDiffEditorInput: diffEditor => ({ editor: textEditorService.createTextEditor(diffEditor) })\n\t\t\t}\n\t\t);\n\t\tassert.strictEqual(editorCount, 0);\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('file://test/path/resource1.txt'), TEST_EDITOR_INPUT_ID).toUntyped();\n\t\tconst input2 = createTestFileEditorInput(URI.parse('file://test/path/resource2.txt'), TEST_EDITOR_INPUT_ID).toUntyped();\n\t\tconst input3 = createTestFileEditorInput(URI.parse('file://test/path/resource3.md'), TEST_EDITOR_INPUT_ID).toUntyped();\n\t\tconst input4 = createTestFileEditorInput(URI.parse('file://test/path/resource4.md'), TEST_EDITOR_INPUT_ID).toUntyped();\n\n\t\tassert.ok(input1);\n\t\tassert.ok(input2);\n\t\tassert.ok(input3);\n\t\tassert.ok(input4);\n\n\t\t// Open editor inputs\n\t\tawait service.openEditors([input1, input2, input3, input4]);\n\t\t// Only two matched the factory glob\n\t\tassert.strictEqual(editorCount, 2);\n\n\t\tregistrationDisposable.dispose();\n\t});\n\n\ttest('editorResolverService - replaceEditors', async function () {\n\t\tconst [part, service, accessor] = await createEditorService();\n\t\tconst editorResolverService = accessor.editorResolverService;\n\t\tconst textEditorService = accessor.textEditorService;\n\n\t\tlet editorCount = 0;\n\n\t\tconst registrationDisposable = editorResolverService.registerEditor(\n\t\t\t'*.md',\n\t\t\t{\n\t\t\t\tid: 'TestEditor',\n\t\t\t\tlabel: 'Test Editor',\n\t\t\t\tdetail: 'Test Editor Provider',\n\t\t\t\tpriority: RegisteredEditorPriority.builtin\n\t\t\t},\n\t\t\t{},\n\t\t\t{\n\t\t\t\tcreateEditorInput: (editorInput) => {\n\t\t\t\t\teditorCount++;\n\t\t\t\t\treturn ({ editor: textEditorService.createTextEditor(editorInput) });\n\t\t\t\t},\n\t\t\t\tcreateDiffEditorInput: diffEditor => ({ editor: textEditorService.createTextEditor(diffEditor) })\n\t\t\t}\n\t\t);\n\n\t\tassert.strictEqual(editorCount, 0);\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('file://test/path/resource2.md'), TEST_EDITOR_INPUT_ID);\n\t\tconst untypedInput1 = input1.toUntyped();\n\t\tassert.ok(untypedInput1);\n\n\t\t// Open editor input 1 and it shouldn't trigger because typed inputs aren't overriden\n\t\tawait service.openEditor(input1);\n\t\tassert.strictEqual(editorCount, 0);\n\n\t\tawait service.replaceEditors([{\n\t\t\teditor: input1,\n\t\t\treplacement: untypedInput1,\n\t\t}], part.activeGroup);\n\t\tassert.strictEqual(editorCount, 1);\n\n\t\tregistrationDisposable.dispose();\n\t});\n\n\ttest('closeEditor', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\n\t\t// Open editors\n\t\tawait service.openEditors([{ editor: input }, { editor: otherInput }]);\n\t\tassert.strictEqual(part.activeGroup.count, 2);\n\n\t\t// Close editor\n\t\tawait service.closeEditor({ editor: input, groupId: part.activeGroup.id });\n\t\tassert.strictEqual(part.activeGroup.count, 1);\n\n\t\tawait service.closeEditor({ editor: input, groupId: part.activeGroup.id });\n\t\tassert.strictEqual(part.activeGroup.count, 1);\n\n\t\tawait service.closeEditor({ editor: otherInput, groupId: part.activeGroup.id });\n\t\tassert.strictEqual(part.activeGroup.count, 0);\n\n\t\tawait service.closeEditor({ editor: otherInput, groupId: 999 });\n\t\tassert.strictEqual(part.activeGroup.count, 0);\n\t});\n\n\ttest('closeEditors', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\n\t\t// Open editors\n\t\tawait service.openEditors([{ editor: input }, { editor: otherInput }]);\n\t\tassert.strictEqual(part.activeGroup.count, 2);\n\n\t\t// Close editors\n\t\tawait service.closeEditors([{ editor: input, groupId: part.activeGroup.id }, { editor: otherInput, groupId: part.activeGroup.id }]);\n\t\tassert.strictEqual(part.activeGroup.count, 0);\n\t});\n\n\ttest('findEditors (in group)', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\n\t\t// Open editors\n\t\tawait service.openEditors([{ editor: input }, { editor: otherInput }]);\n\t\tassert.strictEqual(part.activeGroup.count, 2);\n\n\t\t// Try using find editors for opened editors\n\t\t{\n\t\t\tconst found1 = service.findEditors(input.resource, undefined, part.activeGroup);\n\t\t\tassert.strictEqual(found1.length, 1);\n\t\t\tassert.strictEqual(found1[0], input);\n\n\t\t\tconst found2 = service.findEditors(input, undefined, part.activeGroup);\n\t\t\tassert.strictEqual(found2, input);\n\t\t}\n\t\t{\n\t\t\tconst found1 = service.findEditors(otherInput.resource, undefined, part.activeGroup);\n\t\t\tassert.strictEqual(found1.length, 1);\n\t\t\tassert.strictEqual(found1[0], otherInput);\n\n\t\t\tconst found2 = service.findEditors(otherInput, undefined, part.activeGroup);\n\t\t\tassert.strictEqual(found2, otherInput);\n\t\t}\n\n\t\t// Make sure we don't find non-opened editors\n\t\t{\n\t\t\tconst found1 = service.findEditors(URI.parse('my://no-such-resource'), undefined, part.activeGroup);\n\t\t\tassert.strictEqual(found1.length, 0);\n\n\t\t\tconst found2 = service.findEditors({ resource: URI.parse('my://no-such-resource'), typeId: '', editorId: TEST_EDITOR_INPUT_ID }, undefined, part.activeGroup);\n\t\t\tassert.strictEqual(found2, undefined);\n\t\t}\n\n\t\t// Make sure we don't find editors across groups\n\t\t{\n\t\t\tconst newEditor = await service.openEditor(createTestFileEditorInput(URI.parse('my://other-group-resource'), TEST_EDITOR_INPUT_ID), { pinned: true, preserveFocus: true }, SIDE_GROUP);\n\n\t\t\tconst found1 = service.findEditors(input.resource, undefined, newEditor!.group!.id);\n\t\t\tassert.strictEqual(found1.length, 0);\n\n\t\t\tconst found2 = service.findEditors(input, undefined, newEditor!.group!.id);\n\t\t\tassert.strictEqual(found2, undefined);\n\t\t}\n\n\t\t// Check we don't find editors after closing them\n\t\tawait part.activeGroup.closeAllEditors();\n\t\t{\n\t\t\tconst found1 = service.findEditors(input.resource, undefined, part.activeGroup);\n\t\t\tassert.strictEqual(found1.length, 0);\n\n\t\t\tconst found2 = service.findEditors(input, undefined, part.activeGroup);\n\t\t\tassert.strictEqual(found2, undefined);\n\t\t}\n\t});\n\n\ttest('findEditors (across groups)', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\n\t\t// Open editors\n\t\tawait service.openEditors([{ editor: input }, { editor: otherInput }]);\n\t\tconst sideEditor = await service.openEditor(input, { pinned: true }, SIDE_GROUP);\n\n\t\t// Try using find editors for opened editors\n\t\t{\n\t\t\tconst found1 = service.findEditors(input.resource);\n\t\t\tassert.strictEqual(found1.length, 2);\n\t\t\tassert.strictEqual(found1[0].editor, input);\n\t\t\tassert.strictEqual(found1[0].groupId, sideEditor?.group.id);\n\t\t\tassert.strictEqual(found1[1].editor, input);\n\t\t\tassert.strictEqual(found1[1].groupId, rootGroup.id);\n\n\t\t\tconst found2 = service.findEditors(input);\n\t\t\tassert.strictEqual(found2.length, 2);\n\t\t\tassert.strictEqual(found2[0].editor, input);\n\t\t\tassert.strictEqual(found2[0].groupId, sideEditor?.group.id);\n\t\t\tassert.strictEqual(found2[1].editor, input);\n\t\t\tassert.strictEqual(found2[1].groupId, rootGroup.id);\n\t\t}\n\t\t{\n\t\t\tconst found1 = service.findEditors(otherInput.resource);\n\t\t\tassert.strictEqual(found1.length, 1);\n\t\t\tassert.strictEqual(found1[0].editor, otherInput);\n\t\t\tassert.strictEqual(found1[0].groupId, rootGroup.id);\n\n\t\t\tconst found2 = service.findEditors(otherInput);\n\t\t\tassert.strictEqual(found2.length, 1);\n\t\t\tassert.strictEqual(found2[0].editor, otherInput);\n\t\t\tassert.strictEqual(found2[0].groupId, rootGroup.id);\n\t\t}\n\n\t\t// Make sure we don't find non-opened editors\n\t\t{\n\t\t\tconst found1 = service.findEditors(URI.parse('my://no-such-resource'));\n\t\t\tassert.strictEqual(found1.length, 0);\n\n\t\t\tconst found2 = service.findEditors({ resource: URI.parse('my://no-such-resource'), typeId: '', editorId: TEST_EDITOR_INPUT_ID });\n\t\t\tassert.strictEqual(found2.length, 0);\n\t\t}\n\n\t\t// Check we don't find editors after closing them\n\t\tawait rootGroup.closeAllEditors();\n\t\tawait sideEditor?.group.closeAllEditors();\n\t\t{\n\t\t\tconst found1 = service.findEditors(input.resource);\n\t\t\tassert.strictEqual(found1.length, 0);\n\n\t\t\tconst found2 = service.findEditors(input);\n\t\t\tassert.strictEqual(found2.length, 0);\n\t\t}\n\t});\n\n\ttest('findEditors (support side by side via options)', async () => {\n\t\tconst [, service] = await createEditorService();\n\n\t\tconst secondaryInput = createTestFileEditorInput(URI.parse('my://resource-findEditors-secondary'), TEST_EDITOR_INPUT_ID);\n\t\tconst primaryInput = createTestFileEditorInput(URI.parse('my://resource-findEditors-primary'), TEST_EDITOR_INPUT_ID);\n\n\t\tconst sideBySideInput = new SideBySideEditorInput(undefined, undefined, secondaryInput, primaryInput, service);\n\n\t\tawait service.openEditor(sideBySideInput, { pinned: true });\n\n\t\tlet foundEditors = service.findEditors(URI.parse('my://resource-findEditors-primary'));\n\t\tassert.strictEqual(foundEditors.length, 0);\n\n\t\tfoundEditors = service.findEditors(URI.parse('my://resource-findEditors-primary'), { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tassert.strictEqual(foundEditors.length, 1);\n\n\t\tfoundEditors = service.findEditors(URI.parse('my://resource-findEditors-secondary'), { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\tassert.strictEqual(foundEditors.length, 0);\n\n\t\tfoundEditors = service.findEditors(URI.parse('my://resource-findEditors-primary'), { supportSideBySide: SideBySideEditor.SECONDARY });\n\t\tassert.strictEqual(foundEditors.length, 0);\n\n\t\tfoundEditors = service.findEditors(URI.parse('my://resource-findEditors-secondary'), { supportSideBySide: SideBySideEditor.SECONDARY });\n\t\tassert.strictEqual(foundEditors.length, 1);\n\n\t\tfoundEditors = service.findEditors(URI.parse('my://resource-findEditors-primary'), { supportSideBySide: SideBySideEditor.ANY });\n\t\tassert.strictEqual(foundEditors.length, 1);\n\n\t\tfoundEditors = service.findEditors(URI.parse('my://resource-findEditors-secondary'), { supportSideBySide: SideBySideEditor.ANY });\n\t\tassert.strictEqual(foundEditors.length, 1);\n\t});\n\n\ttest('side by side editor is not matching all other editors (https://github.com/microsoft/vscode/issues/132859)', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input = createTestFileEditorInput(URI.parse('my://resource-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst otherInput = createTestFileEditorInput(URI.parse('my://resource2-openEditors'), TEST_EDITOR_INPUT_ID);\n\t\tconst sideBySideInput = new SideBySideEditorInput(undefined, undefined, input, input, service);\n\t\tconst otherSideBySideInput = new SideBySideEditorInput(undefined, undefined, otherInput, otherInput, service);\n\n\t\tawait service.openEditor(sideBySideInput, undefined, SIDE_GROUP);\n\n\t\tpart.activateGroup(rootGroup);\n\n\t\tawait service.openEditor(otherSideBySideInput, { revealIfOpened: true, revealIfVisible: true });\n\n\t\tassert.strictEqual(rootGroup.count, 1);\n\t});\n\n\ttest('onDidCloseEditor indicates proper context when moving editor across groups', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource-onDidCloseEditor1'), TEST_EDITOR_INPUT_ID);\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource-onDidCloseEditor2'), TEST_EDITOR_INPUT_ID);\n\n\t\tawait service.openEditor(input1, { pinned: true });\n\t\tawait service.openEditor(input2, { pinned: true });\n\n\t\tconst sidegroup = part.addGroup(rootGroup, GroupDirection.RIGHT);\n\n\t\tconst events: IEditorCloseEvent[] = [];\n\t\tdisposables.add(service.onDidCloseEditor(e => {\n\t\t\tevents.push(e);\n\t\t}));\n\n\t\trootGroup.moveEditor(input1, sidegroup);\n\n\t\tassert.strictEqual(events[0].context, EditorCloseContext.MOVE);\n\n\t\tawait sidegroup.closeEditor(input1);\n\n\t\tassert.strictEqual(events[1].context, EditorCloseContext.UNKNOWN);\n\t});\n\n\ttest('onDidCloseEditor indicates proper context when replacing an editor', async () => {\n\t\tconst [part, service] = await createEditorService();\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input1 = createTestFileEditorInput(URI.parse('my://resource-onDidCloseEditor1'), TEST_EDITOR_INPUT_ID);\n\t\tconst input2 = createTestFileEditorInput(URI.parse('my://resource-onDidCloseEditor2'), TEST_EDITOR_INPUT_ID);\n\n\t\tawait service.openEditor(input1, { pinned: true });\n\n\t\tconst events: IEditorCloseEvent[] = [];\n\t\tdisposables.add(service.onDidCloseEditor(e => {\n\t\t\tevents.push(e);\n\t\t}));\n\n\t\tawait rootGroup.replaceEditors([{ editor: input1, replacement: input2 }]);\n\n\t\tassert.strictEqual(events[0].context, EditorCloseContext.REPLACE);\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"]}