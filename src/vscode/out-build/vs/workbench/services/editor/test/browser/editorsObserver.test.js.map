{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/editor/test/browser/editorsObserver.test.ts","vs/workbench/services/editor/test/browser/editorsObserver.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,MAAM,MAAM,QAAQ,CAAC;AAC5B,OAAO,EAA0B,gBAAgB,EAA2B,MAAM,8BAA8B,CAAC;AACjH,OAAO,EAAE,GAAG,EAAE,MAAM,mCAAmC,CAAC;AACxD,OAAO,EAAE,6BAA6B,EAAE,mBAAmB,EAAE,kBAAkB,EAAkB,gBAAgB,EAAE,4BAA4B,EAAE,MAAM,mDAAmD,CAAC;AAC3M,OAAO,EAAE,QAAQ,EAAE,MAAM,qDAAqD,CAAC;AAE/E,OAAO,EAAE,cAAc,EAAE,MAAM,6DAA6D,CAAC;AAC7F,OAAO,EAAkB,oBAAoB,EAAE,MAAM,qCAAqC,CAAC;AAC3F,OAAO,EAAE,gBAAgB,EAAE,MAAM,iDAAiD,CAAC;AACnF,OAAO,EAAE,mBAAmB,EAAE,MAAM,mDAAmD,CAAC;AACxF,OAAO,EAAE,eAAe,EAAE,YAAY,EAAE,MAAM,yCAAyC,CAAC;AACxF,OAAO,EAAE,eAAe,EAAE,MAAM,qDAAqD,CAAC;AACtF,OAAO,EAAE,OAAO,EAAE,MAAM,qCAAqC,CAAC;AAC9D,OAAO,EAAE,kBAAkB,EAAE,MAAM,kDAAkD,CAAC;AACtF,OAAO,EAAE,qBAAqB,EAAE,MAAM,oDAAoD,CAAC;AAE3F,OAAO,EAAE,uCAAuC,EAAE,MAAM,0CAA0C,CAAC;AAEnG,KAAK,CAAC,iBAAiB,EAAE;IAExB,MAAM,cAAc,GAAG,gCAAgC,CAAC;IACxD,MAAM,oBAAoB,GAAG,mCAAmC,CAAC;IACjE,MAAM,iCAAiC,GAAG,+CAA+C,CAAC;IAE1F,MAAM,WAAW,GAAG,IAAI,eAAe,EAAE,CAAC;IAE1C,KAAK,CAAC,GAAG,EAAE;QACV,WAAW,CAAC,GAAG,CAAC,kBAAkB,CAAC,cAAc,EAAE,CAAC,IAAI,cAAc,CAAC,mBAAmB,CAAC,CAAC,EAAE,iCAAiC,CAAC,CAAC,CAAC;QAClI,WAAW,CAAC,GAAG,CAAC,4BAA4B,EAAE,CAAC,CAAC;IACjD,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,GAAG,EAAE;QACb,WAAW,CAAC,KAAK,EAAE,CAAC;IACrB,CAAC,CAAC,CAAC;IAEH,KAAK,UAAU,UAAU;QACxB,MAAM,oBAAoB,GAAG,6BAA6B,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QACnF,oBAAoB,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAyB,gBAAgB,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;QAErI,MAAM,IAAI,GAAG,MAAM,gBAAgB,CAAC,oBAAoB,EAAE,WAAW,CAAC,CAAC;QACvE,oBAAoB,CAAC,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;QACtD,WAAW,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;QAEvD,OAAO,CAAC,IAAI,EAAE,oBAAoB,CAAC,CAAC;IACrC,CAAC;IAED,KAAK,UAAU,oBAAoB,CAAC,MAAM,GAAG,KAAK;QACjD,MAAM,CAAC,IAAI,EAAE,oBAAoB,CAAC,GAAG,MAAM,UAAU,EAAE,CAAC;QAExD,MAAM,QAAQ,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,eAAe,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,EAAE,IAAI,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,EAAE,CAAC,CAAC,CAAC,CAAC;QAElI,OAAO,CAAC,IAAI,EAAE,QAAQ,EAAE,oBAAoB,CAAC,CAAC;IAC/C,CAAC;IAED,IAAI,CAAC,uBAAuB,EAAE,KAAK,IAAI,EAAE;QACxC,MAAM,qBAAqB,EAAE,CAAC;IAC/B,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,+BAA+B,EAAE,KAAK,IAAI,EAAE;QAChD,MAAM,qBAAqB,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC,CAAC,CAAC;IAEH,KAAK,UAAU,qBAAqB,CAAC,MAAM,GAAG,KAAK;QAClD,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,GAAG,MAAM,oBAAoB,EAAE,CAAC;QAEtD,IAAI,0CAA0C,GAAG,KAAK,CAAC;QACvD,WAAW,CAAC,GAAG,CAAC,QAAQ,CAAC,oCAAoC,CAAC,GAAG,EAAE;YAClE,0CAA0C,GAAG,IAAI,CAAC;QACnD,CAAC,CAAC,CAAC,CAAC;QAEJ,IAAI,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACzC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,0CAA0C,EAAE,KAAK,CAAC,CAAC;QAEtE,MAAM,MAAM,GAAG,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,iCAAiC,CAAC,CAAC;QAEnG,MAAM,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAE5D,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,0CAA0C,EAAE,IAAI,CAAC,CAAC;QACrE,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,eAAe,EAAE,QAAQ,EAAE,eAAe,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAEjI,MAAM,MAAM,GAAG,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,iCAAiC,CAAC,CAAC;QACnG,MAAM,MAAM,GAAG,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,iCAAiC,CAAC,CAAC;QAEnG,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,KAAK,CAAC,CAAC;QAChE,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAE/H,MAAM,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAC5D,MAAM,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAE5D,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,MAAM,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAE5D,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,0CAA0C,GAAG,KAAK,CAAC;QACnD,MAAM,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAE3C,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,0CAA0C,EAAE,IAAI,CAAC,CAAC;QACrE,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,MAAM,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;QACzC,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;IAChI,CAAC;IAED,IAAI,CAAC,sBAAsB,EAAE,KAAK,IAAI,EAAE;QACvC,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,GAAG,MAAM,oBAAoB,EAAE,CAAC;QAEtD,MAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC;QAEnC,IAAI,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACzC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAEhD,MAAM,SAAS,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,+BAAuB,CAAC,CAAC;QAElF,MAAM,MAAM,GAAG,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,iCAAiC,CAAC,CAAC;QAEnG,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,gBAAgB,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC5F,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,gBAAgB,CAAC,QAAQ,EAAE,CAAC,CAAC;QAE5F,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,gBAAgB,CAAC,QAAQ,EAAE,CAAC,CAAC;QAE5F,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,+CAA+C;QAC/C,mDAAmD;QACnD,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,iCAAiC,CAAC,CAAC,CAAC;QAEpH,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;QAEvD,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,MAAM,SAAS,CAAC,eAAe,EAAE,CAAC;QAElC,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,KAAK,CAAC,CAAC;QAChE,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAE/H,MAAM,SAAS,CAAC,eAAe,EAAE,CAAC;QAElC,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,KAAK,CAAC,CAAC;QAChE,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,KAAK,CAAC,CAAC;QAChE,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAE/H,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;IAC7B,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,yDAAyD,EAAE,KAAK,IAAI,EAAE;QAC1E,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,GAAG,MAAM,oBAAoB,EAAE,CAAC;QAEtD,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,iCAAiC,CAAC,CAAC,CAAC;QACpH,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,MAAM,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC,CAAC;QAExF,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,KAAK,CAAC,CAAC;QAChE,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAE/H,MAAM,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAE5D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAE/H,MAAM,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAE5D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,MAAM,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAE3C,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAE/H,MAAM,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAE3C,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,KAAK,CAAC,CAAC;QAChE,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;IAChI,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,oDAAoD,EAAE,KAAK,IAAI,EAAE;QACrE,MAAM,CAAC,IAAI,EAAE,QAAQ,EAAE,oBAAoB,CAAC,GAAG,MAAM,oBAAoB,EAAE,CAAC;QAE5E,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,iCAAiC,CAAC,CAAC,CAAC;QACrH,MAAM,SAAS,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC;QAEnG,MAAM,KAAK,GAAG,oBAAoB,CAAC,cAAc,CAAC,qBAAqB,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;QAEhH,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,KAAK,CAAC,CAAC;QACjE,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,MAAM,EAAE,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAClI,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,SAAS,CAAC,QAAQ,EAAE,MAAM,EAAE,SAAS,CAAC,MAAM,EAAE,QAAQ,EAAE,SAAS,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAExI,MAAM,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,KAAK,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAE3D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,CAAC;QAChE,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,MAAM,EAAE,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACjI,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,SAAS,CAAC,QAAQ,EAAE,MAAM,EAAE,SAAS,CAAC,MAAM,EAAE,QAAQ,EAAE,SAAS,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAExI,MAAM,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAE7D,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,CAAC;QAChE,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,MAAM,EAAE,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACjI,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,SAAS,CAAC,QAAQ,EAAE,MAAM,EAAE,SAAS,CAAC,MAAM,EAAE,QAAQ,EAAE,SAAS,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAExI,MAAM,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAE1C,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,CAAC;QAChE,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,MAAM,EAAE,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACjI,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,SAAS,CAAC,QAAQ,EAAE,MAAM,EAAE,SAAS,CAAC,MAAM,EAAE,QAAQ,EAAE,SAAS,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAExI,MAAM,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QAE5C,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,KAAK,CAAC,CAAC;QACjE,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,MAAM,EAAE,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAClI,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,SAAS,CAAC,QAAQ,EAAE,MAAM,EAAE,SAAS,CAAC,MAAM,EAAE,QAAQ,EAAE,SAAS,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;IACzI,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,YAAY,EAAE,KAAK;QACvB,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,GAAG,MAAM,oBAAoB,EAAE,CAAC;QAEtD,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,iCAAiC,CAAC,CAAC,CAAC;QACpH,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,iCAAiC,CAAC,CAAC,CAAC;QACpH,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,iCAAiC,CAAC,CAAC,CAAC;QAEpH,MAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC;QAEnC,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAErD,IAAI,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACzC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,MAAM,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,SAAS,+BAAuB,CAAC;QAC/E,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC5B,WAAW,CAAC,KAAK,EAAE,CAAC;QAEpB,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,WAAW,CAAC,EAAE,CAAC,CAAC;QACjE,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,WAAW,CAAC,EAAE,CAAC,CAAC;QACjE,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,WAAW,CAAC,EAAE,CAAC,CAAC;QACjE,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,MAAM,SAAS,CAAC,eAAe,EAAE,CAAC;QAElC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,MAAM,WAAW,CAAC,eAAe,EAAE,CAAC;QAEpC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;IAChI,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,uFAAuF,EAAE,KAAK,IAAI,EAAE;QACxG,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,UAAU,EAAE,CAAC;QAElC,MAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC;QAEnC,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,iCAAiC,CAAC,CAAC,CAAC;QACpH,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,iCAAiC,CAAC,CAAC,CAAC;QACpH,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,iCAAiC,CAAC,CAAC,CAAC;QAEpH,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAErD,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,EAAE,CAAC,CAAC;QAC1D,MAAM,QAAQ,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,eAAe,CAAC,SAAS,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;QAChF,MAAM,IAAI,CAAC,SAAS,CAAC;QAErB,IAAI,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACzC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,OAAO,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC;QAE5D,MAAM,gBAAgB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,eAAe,CAAC,SAAS,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;QACxF,MAAM,IAAI,CAAC,SAAS,CAAC;QAErB,iBAAiB,GAAG,gBAAgB,CAAC,OAAO,CAAC;QAC7C,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;IAC/H,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,oDAAoD,EAAE,KAAK,IAAI,EAAE;QACrE,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,UAAU,EAAE,CAAC;QAElC,MAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC;QAEnC,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,iCAAiC,CAAC,CAAC,CAAC;QACpH,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,iCAAiC,CAAC,CAAC,CAAC;QACpH,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,iCAAiC,CAAC,CAAC,CAAC;QAEpH,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAErD,MAAM,SAAS,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,+BAAuB,CAAC,CAAC;QAClF,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAErD,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,EAAE,CAAC,CAAC;QAC1D,MAAM,QAAQ,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,eAAe,CAAC,SAAS,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;QAChF,MAAM,IAAI,CAAC,SAAS,CAAC;QAErB,IAAI,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACzC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,OAAO,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC;QAE5D,MAAM,gBAAgB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,eAAe,CAAC,SAAS,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;QACxF,MAAM,IAAI,CAAC,SAAS,CAAC;QAErB,iBAAiB,GAAG,gBAAgB,CAAC,OAAO,CAAC;QAC7C,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACtI,MAAM,CAAC,WAAW,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACtI,MAAM,CAAC,WAAW,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;IACvI,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,6DAA6D,EAAE,KAAK,IAAI,EAAE;QAC9E,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,UAAU,EAAE,CAAC;QAElC,MAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC;QAEnC,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QAEvG,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAErD,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,EAAE,CAAC,CAAC;QAC1D,MAAM,QAAQ,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,eAAe,CAAC,SAAS,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;QAChF,MAAM,IAAI,CAAC,SAAS,CAAC;QAErB,IAAI,iBAAiB,GAAG,QAAQ,CAAC,OAAO,CAAC;QACzC,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC;QAC/D,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,OAAO,CAAC,qBAAqB,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC;QAE5D,MAAM,gBAAgB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,eAAe,CAAC,SAAS,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;QACxF,MAAM,IAAI,CAAC,SAAS,CAAC;QAErB,iBAAiB,GAAG,gBAAgB,CAAC,OAAO,CAAC;QAC7C,MAAM,CAAC,WAAW,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;IACxI,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,gEAAgE,EAAE,KAAK,IAAI,EAAE;QACjF,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,UAAU,EAAE,CAAC;QAClC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QAEjF,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,EAAE,CAAC,CAAC;QAC1D,MAAM,QAAQ,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,eAAe,CAAC,SAAS,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;QAEhF,MAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC;QACnC,MAAM,SAAS,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,+BAAuB,CAAC,CAAC;QAElF,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QACvG,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QACvG,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QACvG,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QAEvG,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAErD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,MAAM,CAAC,QAAQ,EAAE,CAAC;QAClB,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QAEjF,MAAM,OAAO,CAAC,CAAC,CAAC,CAAC;QAEjB,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,QAAQ;QAC9D,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QACvG,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAErD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,QAAQ;QAC9D,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;IAC/H,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,uDAAuD,EAAE,KAAK,IAAI,EAAE;QACxE,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,UAAU,EAAE,CAAC;QAClC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,cAAc,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;QAEvG,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,EAAE,CAAC,CAAC;QAC1D,MAAM,QAAQ,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,eAAe,CAAC,SAAS,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;QAEhF,MAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC;QACnC,MAAM,SAAS,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,+BAAuB,CAAC,CAAC;QAElF,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QACvG,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QACvG,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QACvG,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QAEvG,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAErD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,wCAAwC;QAChF,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAErD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9H,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,cAAc,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;QAEvG,MAAM,OAAO,CAAC,EAAE,CAAC,CAAC;QAElB,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QAErD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QAErD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;IAC/H,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,gCAAgC,EAAE,KAAK,IAAI,EAAE;QACjD,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,UAAU,EAAE,CAAC;QAClC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QAEjF,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,EAAE,CAAC,CAAC;QAC1D,MAAM,QAAQ,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,eAAe,CAAC,SAAS,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;QAEhF,MAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC;QAEnC,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QACvG,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QACvG,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QACvG,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QAEvG,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACnE,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAErD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;IAC/H,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,qCAAqC,EAAE,KAAK,IAAI,EAAE;QACtD,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,UAAU,EAAE,CAAC;QAClC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QAEjF,MAAM,OAAO,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,EAAE,CAAC,CAAC;QAC1D,MAAM,QAAQ,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,eAAe,CAAC,SAAS,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;QAEhF,MAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC;QAEnC,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QACvG,MAAM,CAAC,YAAY,GAAG,uFAAqE,CAAC;QAC5F,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QACvG,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QACvG,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,mBAAmB,CAAC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,oBAAoB,CAAC,CAAC,CAAC;QAEvG,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,MAAM,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAErD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC;QACtD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9H,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;IAC/H,CAAC,CAAC,CAAC;IAEH,uCAAuC,EAAE,CAAC;AAC3C,CAAC,CAAC,CAAC","file":"editorsObserver.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { IEditorFactoryRegistry, EditorExtensions, EditorInputCapabilities } from '../../../../common/editor.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { workbenchInstantiationService, TestFileEditorInput, registerTestEditor, TestEditorPart, createEditorPart, registerTestSideBySideEditor } from '../../../../test/browser/workbenchTestServices.js';\nimport { Registry } from '../../../../../platform/registry/common/platform.js';\nimport { EditorPart } from '../../../../browser/parts/editor/editorPart.js';\nimport { SyncDescriptor } from '../../../../../platform/instantiation/common/descriptors.js';\nimport { GroupDirection, IEditorGroupsService } from '../../common/editorGroupsService.js';\nimport { EditorActivation } from '../../../../../platform/editor/common/editor.js';\nimport { WillSaveStateReason } from '../../../../../platform/storage/common/storage.js';\nimport { DisposableStore, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { EditorsObserver } from '../../../../browser/parts/editor/editorsObserver.js';\nimport { timeout } from '../../../../../base/common/async.js';\nimport { TestStorageService } from '../../../../test/common/workbenchTestServices.js';\nimport { SideBySideEditorInput } from '../../../../common/editor/sideBySideEditorInput.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nsuite('EditorsObserver', function () {\n\n\tconst TEST_EDITOR_ID = 'MyTestEditorForEditorsObserver';\n\tconst TEST_EDITOR_INPUT_ID = 'testEditorInputForEditorsObserver';\n\tconst TEST_SERIALIZABLE_EDITOR_INPUT_ID = 'testSerializableEditorInputForEditorsObserver';\n\n\tconst disposables = new DisposableStore();\n\n\tsetup(() => {\n\t\tdisposables.add(registerTestEditor(TEST_EDITOR_ID, [new SyncDescriptor(TestFileEditorInput)], TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tdisposables.add(registerTestSideBySideEditor());\n\t});\n\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\tasync function createPart(): Promise<[TestEditorPart, IInstantiationService]> {\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tinstantiationService.invokeFunction(accessor => Registry.as<IEditorFactoryRegistry>(EditorExtensions.EditorFactory).start(accessor));\n\n\t\tconst part = await createEditorPart(instantiationService, disposables);\n\t\tinstantiationService.stub(IEditorGroupsService, part);\n\t\tdisposables.add(toDisposable(() => part.clearState()));\n\n\t\treturn [part, instantiationService];\n\t}\n\n\tasync function createEditorObserver(scoped = false): Promise<[EditorPart, EditorsObserver, IInstantiationService]> {\n\t\tconst [part, instantiationService] = await createPart();\n\n\t\tconst observer = disposables.add(new EditorsObserver(scoped ? part : undefined, part, disposables.add(new TestStorageService())));\n\n\t\treturn [part, observer, instantiationService];\n\t}\n\n\ttest('basics (single group)', async () => {\n\t\tawait testSingleGroupBasics();\n\t});\n\n\ttest('basics (single group, scoped)', async () => {\n\t\tawait testSingleGroupBasics(true);\n\t});\n\n\tasync function testSingleGroupBasics(scoped = false) {\n\t\tconst [part, observer] = await createEditorObserver();\n\n\t\tlet onDidMostRecentlyActiveEditorsChangeCalled = false;\n\t\tdisposables.add(observer.onDidMostRecentlyActiveEditorsChange(() => {\n\t\t\tonDidMostRecentlyActiveEditorsChangeCalled = true;\n\t\t}));\n\n\t\tlet currentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 0);\n\t\tassert.strictEqual(onDidMostRecentlyActiveEditorsChangeCalled, false);\n\n\t\tconst input1 = new TestFileEditorInput(URI.parse('foo://bar1'), TEST_SERIALIZABLE_EDITOR_INPUT_ID);\n\n\t\tawait part.activeGroup.openEditor(input1, { pinned: true });\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 1);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input1);\n\t\tassert.strictEqual(onDidMostRecentlyActiveEditorsChangeCalled, true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: 'unknownTypeId', editorId: 'unknownTypeId' }), false);\n\n\t\tconst input2 = new TestFileEditorInput(URI.parse('foo://bar2'), TEST_SERIALIZABLE_EDITOR_INPUT_ID);\n\t\tconst input3 = new TestFileEditorInput(URI.parse('foo://bar3'), TEST_SERIALIZABLE_EDITOR_INPUT_ID);\n\n\t\tassert.strictEqual(observer.hasEditors(input2.resource), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\n\t\tawait part.activeGroup.openEditor(input2, { pinned: true });\n\t\tawait part.activeGroup.openEditor(input3, { pinned: true });\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 3);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input1);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\n\t\tawait part.activeGroup.openEditor(input2, { pinned: true });\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 3);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input1);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\n\t\tonDidMostRecentlyActiveEditorsChangeCalled = false;\n\t\tawait part.activeGroup.closeEditor(input1);\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 2);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input3);\n\t\tassert.strictEqual(onDidMostRecentlyActiveEditorsChangeCalled, true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\n\t\tawait part.activeGroup.closeAllEditors();\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 0);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), false);\n\t}\n\n\ttest('basics (multi group)', async () => {\n\t\tconst [part, observer] = await createEditorObserver();\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tlet currentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 0);\n\n\t\tconst sideGroup = disposables.add(part.addGroup(rootGroup, GroupDirection.RIGHT));\n\n\t\tconst input1 = new TestFileEditorInput(URI.parse('foo://bar1'), TEST_SERIALIZABLE_EDITOR_INPUT_ID);\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true, activation: EditorActivation.ACTIVATE });\n\t\tawait sideGroup.openEditor(input1, { pinned: true, activation: EditorActivation.ACTIVATE });\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 2);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, sideGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input1);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input1);\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true, activation: EditorActivation.ACTIVATE });\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 2);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input1);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, sideGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input1);\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\n\t\t// Opening an editor inactive should not change\n\t\t// the most recent editor, but rather put it behind\n\t\tconst input2 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\n\t\tawait rootGroup.openEditor(input2, { inactive: true });\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 3);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input1);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, sideGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input1);\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), true);\n\t\tassert.strictEqual(observer.hasEditors(input2.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\n\t\tawait rootGroup.closeAllEditors();\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 1);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, sideGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input1);\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), true);\n\t\tassert.strictEqual(observer.hasEditors(input2.resource), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\n\t\tawait sideGroup.closeAllEditors();\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 0);\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), false);\n\t\tassert.strictEqual(observer.hasEditors(input2.resource), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\n\t\tpart.removeGroup(sideGroup);\n\t});\n\n\ttest('hasEditor/hasEditors - same resource, different type id', async () => {\n\t\tconst [part, observer] = await createEditorObserver();\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tconst input2 = disposables.add(new TestFileEditorInput(input1.resource, 'otherTypeId'));\n\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\n\t\tawait part.activeGroup.openEditor(input1, { pinned: true });\n\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\n\t\tawait part.activeGroup.openEditor(input2, { pinned: true });\n\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\n\t\tawait part.activeGroup.closeEditor(input2);\n\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\n\t\tawait part.activeGroup.closeEditor(input1);\n\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\t});\n\n\ttest('hasEditor/hasEditors - side by side editor support', async () => {\n\t\tconst [part, observer, instantiationService] = await createEditorObserver();\n\n\t\tconst primary = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tconst secondary = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), 'otherTypeId'));\n\n\t\tconst input = instantiationService.createInstance(SideBySideEditorInput, 'name', undefined, secondary, primary);\n\n\t\tassert.strictEqual(observer.hasEditors(primary.resource), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: primary.resource, typeId: primary.typeId, editorId: primary.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: secondary.resource, typeId: secondary.typeId, editorId: secondary.editorId }), false);\n\n\t\tawait part.activeGroup.openEditor(input, { pinned: true });\n\n\t\tassert.strictEqual(observer.hasEditors(primary.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: primary.resource, typeId: primary.typeId, editorId: primary.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: secondary.resource, typeId: secondary.typeId, editorId: secondary.editorId }), false);\n\n\t\tawait part.activeGroup.openEditor(primary, { pinned: true });\n\n\t\tassert.strictEqual(observer.hasEditors(primary.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: primary.resource, typeId: primary.typeId, editorId: primary.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: secondary.resource, typeId: secondary.typeId, editorId: secondary.editorId }), false);\n\n\t\tawait part.activeGroup.closeEditor(input);\n\n\t\tassert.strictEqual(observer.hasEditors(primary.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: primary.resource, typeId: primary.typeId, editorId: primary.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: secondary.resource, typeId: secondary.typeId, editorId: secondary.editorId }), false);\n\n\t\tawait part.activeGroup.closeEditor(primary);\n\n\t\tassert.strictEqual(observer.hasEditors(primary.resource), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: primary.resource, typeId: primary.typeId, editorId: primary.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: secondary.resource, typeId: secondary.typeId, editorId: secondary.editorId }), false);\n\t});\n\n\ttest('copy group', async function () {\n\t\tconst [part, observer] = await createEditorObserver();\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tconst input2 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tconst input3 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar3'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true });\n\t\tawait rootGroup.openEditor(input2, { pinned: true });\n\t\tawait rootGroup.openEditor(input3, { pinned: true });\n\n\t\tlet currentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 3);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input1);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\n\t\tconst copiedGroup = part.copyGroup(rootGroup, rootGroup, GroupDirection.RIGHT);\n\t\tcopiedGroup.setActive(true);\n\t\tcopiedGroup.focus();\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 6);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, copiedGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, copiedGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[3].groupId, copiedGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[3].editor, input1);\n\t\tassert.strictEqual(currentEditorsMRU[4].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[4].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[5].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[5].editor, input1);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\n\t\tawait rootGroup.closeAllEditors();\n\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\n\t\tawait copiedGroup.closeAllEditors();\n\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), false);\n\t});\n\n\ttest('initial editors are part of observer and state is persisted & restored (single group)', async () => {\n\t\tconst [part] = await createPart();\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tconst input2 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tconst input3 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar3'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true });\n\t\tawait rootGroup.openEditor(input2, { pinned: true });\n\t\tawait rootGroup.openEditor(input3, { pinned: true });\n\n\t\tconst storage = disposables.add(new TestStorageService());\n\t\tconst observer = disposables.add(new EditorsObserver(undefined, part, storage));\n\t\tawait part.whenReady;\n\n\t\tlet currentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 3);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input1);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\n\t\tstorage.testEmitWillSaveState(WillSaveStateReason.SHUTDOWN);\n\n\t\tconst restoredObserver = disposables.add(new EditorsObserver(undefined, part, storage));\n\t\tawait part.whenReady;\n\n\t\tcurrentEditorsMRU = restoredObserver.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 3);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input1);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\t});\n\n\ttest('initial editors are part of observer (multi group)', async () => {\n\t\tconst [part] = await createPart();\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tconst input2 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tconst input3 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar3'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true });\n\t\tawait rootGroup.openEditor(input2, { pinned: true });\n\n\t\tconst sideGroup = disposables.add(part.addGroup(rootGroup, GroupDirection.RIGHT));\n\t\tawait sideGroup.openEditor(input3, { pinned: true });\n\n\t\tconst storage = disposables.add(new TestStorageService());\n\t\tconst observer = disposables.add(new EditorsObserver(undefined, part, storage));\n\t\tawait part.whenReady;\n\n\t\tlet currentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 3);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, sideGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input1);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\n\t\tstorage.testEmitWillSaveState(WillSaveStateReason.SHUTDOWN);\n\n\t\tconst restoredObserver = disposables.add(new EditorsObserver(undefined, part, storage));\n\t\tawait part.whenReady;\n\n\t\tcurrentEditorsMRU = restoredObserver.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 3);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, sideGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input1);\n\t\tassert.strictEqual(restoredObserver.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(restoredObserver.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(restoredObserver.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\t});\n\n\ttest('observer does not restore editors that cannot be serialized', async () => {\n\t\tconst [part] = await createPart();\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_EDITOR_INPUT_ID));\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true });\n\n\t\tconst storage = disposables.add(new TestStorageService());\n\t\tconst observer = disposables.add(new EditorsObserver(undefined, part, storage));\n\t\tawait part.whenReady;\n\n\t\tlet currentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 1);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input1);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\n\t\tstorage.testEmitWillSaveState(WillSaveStateReason.SHUTDOWN);\n\n\t\tconst restoredObserver = disposables.add(new EditorsObserver(undefined, part, storage));\n\t\tawait part.whenReady;\n\n\t\tcurrentEditorsMRU = restoredObserver.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 0);\n\t\tassert.strictEqual(restoredObserver.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t});\n\n\ttest('observer closes editors when limit reached (across all groups)', async () => {\n\t\tconst [part] = await createPart();\n\t\tdisposables.add(part.enforcePartOptions({ limit: { enabled: true, value: 3 } }));\n\n\t\tconst storage = disposables.add(new TestStorageService());\n\t\tconst observer = disposables.add(new EditorsObserver(undefined, part, storage));\n\n\t\tconst rootGroup = part.activeGroup;\n\t\tconst sideGroup = disposables.add(part.addGroup(rootGroup, GroupDirection.RIGHT));\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_EDITOR_INPUT_ID));\n\t\tconst input2 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), TEST_EDITOR_INPUT_ID));\n\t\tconst input3 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar3'), TEST_EDITOR_INPUT_ID));\n\t\tconst input4 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar4'), TEST_EDITOR_INPUT_ID));\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true });\n\t\tawait rootGroup.openEditor(input2, { pinned: true });\n\t\tawait rootGroup.openEditor(input3, { pinned: true });\n\t\tawait rootGroup.openEditor(input4, { pinned: true });\n\n\t\tassert.strictEqual(rootGroup.count, 3);\n\t\tassert.strictEqual(rootGroup.contains(input1), false);\n\t\tassert.strictEqual(rootGroup.contains(input2), true);\n\t\tassert.strictEqual(rootGroup.contains(input3), true);\n\t\tassert.strictEqual(rootGroup.contains(input4), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input4.resource, typeId: input4.typeId, editorId: input4.editorId }), true);\n\n\t\tinput2.setDirty();\n\t\tdisposables.add(part.enforcePartOptions({ limit: { enabled: true, value: 1 } }));\n\n\t\tawait timeout(0);\n\n\t\tassert.strictEqual(rootGroup.count, 2);\n\t\tassert.strictEqual(rootGroup.contains(input1), false);\n\t\tassert.strictEqual(rootGroup.contains(input2), true); // dirty\n\t\tassert.strictEqual(rootGroup.contains(input3), false);\n\t\tassert.strictEqual(rootGroup.contains(input4), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input4.resource, typeId: input4.typeId, editorId: input4.editorId }), true);\n\n\t\tconst input5 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar5'), TEST_EDITOR_INPUT_ID));\n\t\tawait sideGroup.openEditor(input5, { pinned: true });\n\n\t\tassert.strictEqual(rootGroup.count, 1);\n\t\tassert.strictEqual(rootGroup.contains(input1), false);\n\t\tassert.strictEqual(rootGroup.contains(input2), true); // dirty\n\t\tassert.strictEqual(rootGroup.contains(input3), false);\n\t\tassert.strictEqual(rootGroup.contains(input4), false);\n\t\tassert.strictEqual(sideGroup.contains(input5), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input4.resource, typeId: input4.typeId, editorId: input4.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input5.resource, typeId: input5.typeId, editorId: input5.editorId }), true);\n\t});\n\n\ttest('observer closes editors when limit reached (in group)', async () => {\n\t\tconst [part] = await createPart();\n\t\tdisposables.add(part.enforcePartOptions({ limit: { enabled: true, value: 3, perEditorGroup: true } }));\n\n\t\tconst storage = disposables.add(new TestStorageService());\n\t\tconst observer = disposables.add(new EditorsObserver(undefined, part, storage));\n\n\t\tconst rootGroup = part.activeGroup;\n\t\tconst sideGroup = disposables.add(part.addGroup(rootGroup, GroupDirection.RIGHT));\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_EDITOR_INPUT_ID));\n\t\tconst input2 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), TEST_EDITOR_INPUT_ID));\n\t\tconst input3 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar3'), TEST_EDITOR_INPUT_ID));\n\t\tconst input4 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar4'), TEST_EDITOR_INPUT_ID));\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true });\n\t\tawait rootGroup.openEditor(input2, { pinned: true });\n\t\tawait rootGroup.openEditor(input3, { pinned: true });\n\t\tawait rootGroup.openEditor(input4, { pinned: true });\n\n\t\tassert.strictEqual(rootGroup.count, 3); // 1 editor got closed due to our limit!\n\t\tassert.strictEqual(rootGroup.contains(input1), false);\n\t\tassert.strictEqual(rootGroup.contains(input2), true);\n\t\tassert.strictEqual(rootGroup.contains(input3), true);\n\t\tassert.strictEqual(rootGroup.contains(input4), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input4.resource, typeId: input4.typeId, editorId: input4.editorId }), true);\n\n\t\tawait sideGroup.openEditor(input1, { pinned: true });\n\t\tawait sideGroup.openEditor(input2, { pinned: true });\n\t\tawait sideGroup.openEditor(input3, { pinned: true });\n\t\tawait sideGroup.openEditor(input4, { pinned: true });\n\n\t\tassert.strictEqual(sideGroup.count, 3);\n\t\tassert.strictEqual(sideGroup.contains(input1), false);\n\t\tassert.strictEqual(sideGroup.contains(input2), true);\n\t\tassert.strictEqual(sideGroup.contains(input3), true);\n\t\tassert.strictEqual(sideGroup.contains(input4), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input4.resource, typeId: input4.typeId, editorId: input4.editorId }), true);\n\n\t\tdisposables.add(part.enforcePartOptions({ limit: { enabled: true, value: 1, perEditorGroup: true } }));\n\n\t\tawait timeout(10);\n\n\t\tassert.strictEqual(rootGroup.count, 1);\n\t\tassert.strictEqual(rootGroup.contains(input1), false);\n\t\tassert.strictEqual(rootGroup.contains(input2), false);\n\t\tassert.strictEqual(rootGroup.contains(input3), false);\n\t\tassert.strictEqual(rootGroup.contains(input4), true);\n\n\t\tassert.strictEqual(sideGroup.count, 1);\n\t\tassert.strictEqual(sideGroup.contains(input1), false);\n\t\tassert.strictEqual(sideGroup.contains(input2), false);\n\t\tassert.strictEqual(sideGroup.contains(input3), false);\n\t\tassert.strictEqual(sideGroup.contains(input4), true);\n\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input4.resource, typeId: input4.typeId, editorId: input4.editorId }), true);\n\t});\n\n\ttest('observer does not close sticky', async () => {\n\t\tconst [part] = await createPart();\n\t\tdisposables.add(part.enforcePartOptions({ limit: { enabled: true, value: 3 } }));\n\n\t\tconst storage = disposables.add(new TestStorageService());\n\t\tconst observer = disposables.add(new EditorsObserver(undefined, part, storage));\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_EDITOR_INPUT_ID));\n\t\tconst input2 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), TEST_EDITOR_INPUT_ID));\n\t\tconst input3 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar3'), TEST_EDITOR_INPUT_ID));\n\t\tconst input4 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar4'), TEST_EDITOR_INPUT_ID));\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true, sticky: true });\n\t\tawait rootGroup.openEditor(input2, { pinned: true });\n\t\tawait rootGroup.openEditor(input3, { pinned: true });\n\t\tawait rootGroup.openEditor(input4, { pinned: true });\n\n\t\tassert.strictEqual(rootGroup.count, 3);\n\t\tassert.strictEqual(rootGroup.contains(input1), true);\n\t\tassert.strictEqual(rootGroup.contains(input2), false);\n\t\tassert.strictEqual(rootGroup.contains(input3), true);\n\t\tassert.strictEqual(rootGroup.contains(input4), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input4.resource, typeId: input4.typeId, editorId: input4.editorId }), true);\n\t});\n\n\ttest('observer does not close scratchpads', async () => {\n\t\tconst [part] = await createPart();\n\t\tdisposables.add(part.enforcePartOptions({ limit: { enabled: true, value: 3 } }));\n\n\t\tconst storage = disposables.add(new TestStorageService());\n\t\tconst observer = disposables.add(new EditorsObserver(undefined, part, storage));\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_EDITOR_INPUT_ID));\n\t\tinput1.capabilities = EditorInputCapabilities.Untitled | EditorInputCapabilities.Scratchpad;\n\t\tconst input2 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), TEST_EDITOR_INPUT_ID));\n\t\tconst input3 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar3'), TEST_EDITOR_INPUT_ID));\n\t\tconst input4 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar4'), TEST_EDITOR_INPUT_ID));\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true });\n\t\tawait rootGroup.openEditor(input2, { pinned: true });\n\t\tawait rootGroup.openEditor(input3, { pinned: true });\n\t\tawait rootGroup.openEditor(input4, { pinned: true });\n\n\t\tassert.strictEqual(rootGroup.count, 3);\n\t\tassert.strictEqual(rootGroup.contains(input1), true);\n\t\tassert.strictEqual(rootGroup.contains(input2), false);\n\t\tassert.strictEqual(rootGroup.contains(input3), true);\n\t\tassert.strictEqual(rootGroup.contains(input4), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input4.resource, typeId: input4.typeId, editorId: input4.editorId }), true);\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { IEditorFactoryRegistry, EditorExtensions, EditorInputCapabilities } from '../../../../common/editor.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { workbenchInstantiationService, TestFileEditorInput, registerTestEditor, TestEditorPart, createEditorPart, registerTestSideBySideEditor } from '../../../../test/browser/workbenchTestServices.js';\nimport { Registry } from '../../../../../platform/registry/common/platform.js';\nimport { EditorPart } from '../../../../browser/parts/editor/editorPart.js';\nimport { SyncDescriptor } from '../../../../../platform/instantiation/common/descriptors.js';\nimport { GroupDirection, IEditorGroupsService } from '../../common/editorGroupsService.js';\nimport { EditorActivation } from '../../../../../platform/editor/common/editor.js';\nimport { WillSaveStateReason } from '../../../../../platform/storage/common/storage.js';\nimport { DisposableStore, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { EditorsObserver } from '../../../../browser/parts/editor/editorsObserver.js';\nimport { timeout } from '../../../../../base/common/async.js';\nimport { TestStorageService } from '../../../../test/common/workbenchTestServices.js';\nimport { SideBySideEditorInput } from '../../../../common/editor/sideBySideEditorInput.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nsuite('EditorsObserver', function () {\n\n\tconst TEST_EDITOR_ID = 'MyTestEditorForEditorsObserver';\n\tconst TEST_EDITOR_INPUT_ID = 'testEditorInputForEditorsObserver';\n\tconst TEST_SERIALIZABLE_EDITOR_INPUT_ID = 'testSerializableEditorInputForEditorsObserver';\n\n\tconst disposables = new DisposableStore();\n\n\tsetup(() => {\n\t\tdisposables.add(registerTestEditor(TEST_EDITOR_ID, [new SyncDescriptor(TestFileEditorInput)], TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tdisposables.add(registerTestSideBySideEditor());\n\t});\n\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\tasync function createPart(): Promise<[TestEditorPart, IInstantiationService]> {\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tinstantiationService.invokeFunction(accessor => Registry.as<IEditorFactoryRegistry>(EditorExtensions.EditorFactory).start(accessor));\n\n\t\tconst part = await createEditorPart(instantiationService, disposables);\n\t\tinstantiationService.stub(IEditorGroupsService, part);\n\t\tdisposables.add(toDisposable(() => part.clearState()));\n\n\t\treturn [part, instantiationService];\n\t}\n\n\tasync function createEditorObserver(scoped = false): Promise<[EditorPart, EditorsObserver, IInstantiationService]> {\n\t\tconst [part, instantiationService] = await createPart();\n\n\t\tconst observer = disposables.add(new EditorsObserver(scoped ? part : undefined, part, disposables.add(new TestStorageService())));\n\n\t\treturn [part, observer, instantiationService];\n\t}\n\n\ttest('basics (single group)', async () => {\n\t\tawait testSingleGroupBasics();\n\t});\n\n\ttest('basics (single group, scoped)', async () => {\n\t\tawait testSingleGroupBasics(true);\n\t});\n\n\tasync function testSingleGroupBasics(scoped = false) {\n\t\tconst [part, observer] = await createEditorObserver();\n\n\t\tlet onDidMostRecentlyActiveEditorsChangeCalled = false;\n\t\tdisposables.add(observer.onDidMostRecentlyActiveEditorsChange(() => {\n\t\t\tonDidMostRecentlyActiveEditorsChangeCalled = true;\n\t\t}));\n\n\t\tlet currentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 0);\n\t\tassert.strictEqual(onDidMostRecentlyActiveEditorsChangeCalled, false);\n\n\t\tconst input1 = new TestFileEditorInput(URI.parse('foo://bar1'), TEST_SERIALIZABLE_EDITOR_INPUT_ID);\n\n\t\tawait part.activeGroup.openEditor(input1, { pinned: true });\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 1);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input1);\n\t\tassert.strictEqual(onDidMostRecentlyActiveEditorsChangeCalled, true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: 'unknownTypeId', editorId: 'unknownTypeId' }), false);\n\n\t\tconst input2 = new TestFileEditorInput(URI.parse('foo://bar2'), TEST_SERIALIZABLE_EDITOR_INPUT_ID);\n\t\tconst input3 = new TestFileEditorInput(URI.parse('foo://bar3'), TEST_SERIALIZABLE_EDITOR_INPUT_ID);\n\n\t\tassert.strictEqual(observer.hasEditors(input2.resource), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\n\t\tawait part.activeGroup.openEditor(input2, { pinned: true });\n\t\tawait part.activeGroup.openEditor(input3, { pinned: true });\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 3);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input1);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\n\t\tawait part.activeGroup.openEditor(input2, { pinned: true });\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 3);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input1);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\n\t\tonDidMostRecentlyActiveEditorsChangeCalled = false;\n\t\tawait part.activeGroup.closeEditor(input1);\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 2);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, part.activeGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input3);\n\t\tassert.strictEqual(onDidMostRecentlyActiveEditorsChangeCalled, true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\n\t\tawait part.activeGroup.closeAllEditors();\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 0);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), false);\n\t}\n\n\ttest('basics (multi group)', async () => {\n\t\tconst [part, observer] = await createEditorObserver();\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tlet currentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 0);\n\n\t\tconst sideGroup = disposables.add(part.addGroup(rootGroup, GroupDirection.RIGHT));\n\n\t\tconst input1 = new TestFileEditorInput(URI.parse('foo://bar1'), TEST_SERIALIZABLE_EDITOR_INPUT_ID);\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true, activation: EditorActivation.ACTIVATE });\n\t\tawait sideGroup.openEditor(input1, { pinned: true, activation: EditorActivation.ACTIVATE });\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 2);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, sideGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input1);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input1);\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true, activation: EditorActivation.ACTIVATE });\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 2);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input1);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, sideGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input1);\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\n\t\t// Opening an editor inactive should not change\n\t\t// the most recent editor, but rather put it behind\n\t\tconst input2 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\n\t\tawait rootGroup.openEditor(input2, { inactive: true });\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 3);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input1);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, sideGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input1);\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), true);\n\t\tassert.strictEqual(observer.hasEditors(input2.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\n\t\tawait rootGroup.closeAllEditors();\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 1);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, sideGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input1);\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), true);\n\t\tassert.strictEqual(observer.hasEditors(input2.resource), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\n\t\tawait sideGroup.closeAllEditors();\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 0);\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), false);\n\t\tassert.strictEqual(observer.hasEditors(input2.resource), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\n\t\tpart.removeGroup(sideGroup);\n\t});\n\n\ttest('hasEditor/hasEditors - same resource, different type id', async () => {\n\t\tconst [part, observer] = await createEditorObserver();\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tconst input2 = disposables.add(new TestFileEditorInput(input1.resource, 'otherTypeId'));\n\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\n\t\tawait part.activeGroup.openEditor(input1, { pinned: true });\n\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\n\t\tawait part.activeGroup.openEditor(input2, { pinned: true });\n\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\n\t\tawait part.activeGroup.closeEditor(input2);\n\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\n\t\tawait part.activeGroup.closeEditor(input1);\n\n\t\tassert.strictEqual(observer.hasEditors(input1.resource), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\t});\n\n\ttest('hasEditor/hasEditors - side by side editor support', async () => {\n\t\tconst [part, observer, instantiationService] = await createEditorObserver();\n\n\t\tconst primary = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tconst secondary = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), 'otherTypeId'));\n\n\t\tconst input = instantiationService.createInstance(SideBySideEditorInput, 'name', undefined, secondary, primary);\n\n\t\tassert.strictEqual(observer.hasEditors(primary.resource), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: primary.resource, typeId: primary.typeId, editorId: primary.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: secondary.resource, typeId: secondary.typeId, editorId: secondary.editorId }), false);\n\n\t\tawait part.activeGroup.openEditor(input, { pinned: true });\n\n\t\tassert.strictEqual(observer.hasEditors(primary.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: primary.resource, typeId: primary.typeId, editorId: primary.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: secondary.resource, typeId: secondary.typeId, editorId: secondary.editorId }), false);\n\n\t\tawait part.activeGroup.openEditor(primary, { pinned: true });\n\n\t\tassert.strictEqual(observer.hasEditors(primary.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: primary.resource, typeId: primary.typeId, editorId: primary.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: secondary.resource, typeId: secondary.typeId, editorId: secondary.editorId }), false);\n\n\t\tawait part.activeGroup.closeEditor(input);\n\n\t\tassert.strictEqual(observer.hasEditors(primary.resource), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: primary.resource, typeId: primary.typeId, editorId: primary.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: secondary.resource, typeId: secondary.typeId, editorId: secondary.editorId }), false);\n\n\t\tawait part.activeGroup.closeEditor(primary);\n\n\t\tassert.strictEqual(observer.hasEditors(primary.resource), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: primary.resource, typeId: primary.typeId, editorId: primary.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: secondary.resource, typeId: secondary.typeId, editorId: secondary.editorId }), false);\n\t});\n\n\ttest('copy group', async function () {\n\t\tconst [part, observer] = await createEditorObserver();\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tconst input2 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tconst input3 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar3'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true });\n\t\tawait rootGroup.openEditor(input2, { pinned: true });\n\t\tawait rootGroup.openEditor(input3, { pinned: true });\n\n\t\tlet currentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 3);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input1);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\n\t\tconst copiedGroup = part.copyGroup(rootGroup, rootGroup, GroupDirection.RIGHT);\n\t\tcopiedGroup.setActive(true);\n\t\tcopiedGroup.focus();\n\n\t\tcurrentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 6);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, copiedGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, copiedGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[3].groupId, copiedGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[3].editor, input1);\n\t\tassert.strictEqual(currentEditorsMRU[4].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[4].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[5].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[5].editor, input1);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\n\t\tawait rootGroup.closeAllEditors();\n\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\n\t\tawait copiedGroup.closeAllEditors();\n\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), false);\n\t});\n\n\ttest('initial editors are part of observer and state is persisted & restored (single group)', async () => {\n\t\tconst [part] = await createPart();\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tconst input2 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tconst input3 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar3'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true });\n\t\tawait rootGroup.openEditor(input2, { pinned: true });\n\t\tawait rootGroup.openEditor(input3, { pinned: true });\n\n\t\tconst storage = disposables.add(new TestStorageService());\n\t\tconst observer = disposables.add(new EditorsObserver(undefined, part, storage));\n\t\tawait part.whenReady;\n\n\t\tlet currentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 3);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input1);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\n\t\tstorage.testEmitWillSaveState(WillSaveStateReason.SHUTDOWN);\n\n\t\tconst restoredObserver = disposables.add(new EditorsObserver(undefined, part, storage));\n\t\tawait part.whenReady;\n\n\t\tcurrentEditorsMRU = restoredObserver.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 3);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input1);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\t});\n\n\ttest('initial editors are part of observer (multi group)', async () => {\n\t\tconst [part] = await createPart();\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tconst input2 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\t\tconst input3 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar3'), TEST_SERIALIZABLE_EDITOR_INPUT_ID));\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true });\n\t\tawait rootGroup.openEditor(input2, { pinned: true });\n\n\t\tconst sideGroup = disposables.add(part.addGroup(rootGroup, GroupDirection.RIGHT));\n\t\tawait sideGroup.openEditor(input3, { pinned: true });\n\n\t\tconst storage = disposables.add(new TestStorageService());\n\t\tconst observer = disposables.add(new EditorsObserver(undefined, part, storage));\n\t\tawait part.whenReady;\n\n\t\tlet currentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 3);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, sideGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input1);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\n\t\tstorage.testEmitWillSaveState(WillSaveStateReason.SHUTDOWN);\n\n\t\tconst restoredObserver = disposables.add(new EditorsObserver(undefined, part, storage));\n\t\tawait part.whenReady;\n\n\t\tcurrentEditorsMRU = restoredObserver.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 3);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, sideGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input3);\n\t\tassert.strictEqual(currentEditorsMRU[1].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[1].editor, input2);\n\t\tassert.strictEqual(currentEditorsMRU[2].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[2].editor, input1);\n\t\tassert.strictEqual(restoredObserver.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(restoredObserver.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(restoredObserver.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\t});\n\n\ttest('observer does not restore editors that cannot be serialized', async () => {\n\t\tconst [part] = await createPart();\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_EDITOR_INPUT_ID));\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true });\n\n\t\tconst storage = disposables.add(new TestStorageService());\n\t\tconst observer = disposables.add(new EditorsObserver(undefined, part, storage));\n\t\tawait part.whenReady;\n\n\t\tlet currentEditorsMRU = observer.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 1);\n\t\tassert.strictEqual(currentEditorsMRU[0].groupId, rootGroup.id);\n\t\tassert.strictEqual(currentEditorsMRU[0].editor, input1);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\n\t\tstorage.testEmitWillSaveState(WillSaveStateReason.SHUTDOWN);\n\n\t\tconst restoredObserver = disposables.add(new EditorsObserver(undefined, part, storage));\n\t\tawait part.whenReady;\n\n\t\tcurrentEditorsMRU = restoredObserver.editors;\n\t\tassert.strictEqual(currentEditorsMRU.length, 0);\n\t\tassert.strictEqual(restoredObserver.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t});\n\n\ttest('observer closes editors when limit reached (across all groups)', async () => {\n\t\tconst [part] = await createPart();\n\t\tdisposables.add(part.enforcePartOptions({ limit: { enabled: true, value: 3 } }));\n\n\t\tconst storage = disposables.add(new TestStorageService());\n\t\tconst observer = disposables.add(new EditorsObserver(undefined, part, storage));\n\n\t\tconst rootGroup = part.activeGroup;\n\t\tconst sideGroup = disposables.add(part.addGroup(rootGroup, GroupDirection.RIGHT));\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_EDITOR_INPUT_ID));\n\t\tconst input2 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), TEST_EDITOR_INPUT_ID));\n\t\tconst input3 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar3'), TEST_EDITOR_INPUT_ID));\n\t\tconst input4 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar4'), TEST_EDITOR_INPUT_ID));\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true });\n\t\tawait rootGroup.openEditor(input2, { pinned: true });\n\t\tawait rootGroup.openEditor(input3, { pinned: true });\n\t\tawait rootGroup.openEditor(input4, { pinned: true });\n\n\t\tassert.strictEqual(rootGroup.count, 3);\n\t\tassert.strictEqual(rootGroup.contains(input1), false);\n\t\tassert.strictEqual(rootGroup.contains(input2), true);\n\t\tassert.strictEqual(rootGroup.contains(input3), true);\n\t\tassert.strictEqual(rootGroup.contains(input4), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input4.resource, typeId: input4.typeId, editorId: input4.editorId }), true);\n\n\t\tinput2.setDirty();\n\t\tdisposables.add(part.enforcePartOptions({ limit: { enabled: true, value: 1 } }));\n\n\t\tawait timeout(0);\n\n\t\tassert.strictEqual(rootGroup.count, 2);\n\t\tassert.strictEqual(rootGroup.contains(input1), false);\n\t\tassert.strictEqual(rootGroup.contains(input2), true); // dirty\n\t\tassert.strictEqual(rootGroup.contains(input3), false);\n\t\tassert.strictEqual(rootGroup.contains(input4), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input4.resource, typeId: input4.typeId, editorId: input4.editorId }), true);\n\n\t\tconst input5 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar5'), TEST_EDITOR_INPUT_ID));\n\t\tawait sideGroup.openEditor(input5, { pinned: true });\n\n\t\tassert.strictEqual(rootGroup.count, 1);\n\t\tassert.strictEqual(rootGroup.contains(input1), false);\n\t\tassert.strictEqual(rootGroup.contains(input2), true); // dirty\n\t\tassert.strictEqual(rootGroup.contains(input3), false);\n\t\tassert.strictEqual(rootGroup.contains(input4), false);\n\t\tassert.strictEqual(sideGroup.contains(input5), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input4.resource, typeId: input4.typeId, editorId: input4.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input5.resource, typeId: input5.typeId, editorId: input5.editorId }), true);\n\t});\n\n\ttest('observer closes editors when limit reached (in group)', async () => {\n\t\tconst [part] = await createPart();\n\t\tdisposables.add(part.enforcePartOptions({ limit: { enabled: true, value: 3, perEditorGroup: true } }));\n\n\t\tconst storage = disposables.add(new TestStorageService());\n\t\tconst observer = disposables.add(new EditorsObserver(undefined, part, storage));\n\n\t\tconst rootGroup = part.activeGroup;\n\t\tconst sideGroup = disposables.add(part.addGroup(rootGroup, GroupDirection.RIGHT));\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_EDITOR_INPUT_ID));\n\t\tconst input2 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), TEST_EDITOR_INPUT_ID));\n\t\tconst input3 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar3'), TEST_EDITOR_INPUT_ID));\n\t\tconst input4 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar4'), TEST_EDITOR_INPUT_ID));\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true });\n\t\tawait rootGroup.openEditor(input2, { pinned: true });\n\t\tawait rootGroup.openEditor(input3, { pinned: true });\n\t\tawait rootGroup.openEditor(input4, { pinned: true });\n\n\t\tassert.strictEqual(rootGroup.count, 3); // 1 editor got closed due to our limit!\n\t\tassert.strictEqual(rootGroup.contains(input1), false);\n\t\tassert.strictEqual(rootGroup.contains(input2), true);\n\t\tassert.strictEqual(rootGroup.contains(input3), true);\n\t\tassert.strictEqual(rootGroup.contains(input4), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input4.resource, typeId: input4.typeId, editorId: input4.editorId }), true);\n\n\t\tawait sideGroup.openEditor(input1, { pinned: true });\n\t\tawait sideGroup.openEditor(input2, { pinned: true });\n\t\tawait sideGroup.openEditor(input3, { pinned: true });\n\t\tawait sideGroup.openEditor(input4, { pinned: true });\n\n\t\tassert.strictEqual(sideGroup.count, 3);\n\t\tassert.strictEqual(sideGroup.contains(input1), false);\n\t\tassert.strictEqual(sideGroup.contains(input2), true);\n\t\tassert.strictEqual(sideGroup.contains(input3), true);\n\t\tassert.strictEqual(sideGroup.contains(input4), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input4.resource, typeId: input4.typeId, editorId: input4.editorId }), true);\n\n\t\tdisposables.add(part.enforcePartOptions({ limit: { enabled: true, value: 1, perEditorGroup: true } }));\n\n\t\tawait timeout(10);\n\n\t\tassert.strictEqual(rootGroup.count, 1);\n\t\tassert.strictEqual(rootGroup.contains(input1), false);\n\t\tassert.strictEqual(rootGroup.contains(input2), false);\n\t\tassert.strictEqual(rootGroup.contains(input3), false);\n\t\tassert.strictEqual(rootGroup.contains(input4), true);\n\n\t\tassert.strictEqual(sideGroup.count, 1);\n\t\tassert.strictEqual(sideGroup.contains(input1), false);\n\t\tassert.strictEqual(sideGroup.contains(input2), false);\n\t\tassert.strictEqual(sideGroup.contains(input3), false);\n\t\tassert.strictEqual(sideGroup.contains(input4), true);\n\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input4.resource, typeId: input4.typeId, editorId: input4.editorId }), true);\n\t});\n\n\ttest('observer does not close sticky', async () => {\n\t\tconst [part] = await createPart();\n\t\tdisposables.add(part.enforcePartOptions({ limit: { enabled: true, value: 3 } }));\n\n\t\tconst storage = disposables.add(new TestStorageService());\n\t\tconst observer = disposables.add(new EditorsObserver(undefined, part, storage));\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_EDITOR_INPUT_ID));\n\t\tconst input2 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), TEST_EDITOR_INPUT_ID));\n\t\tconst input3 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar3'), TEST_EDITOR_INPUT_ID));\n\t\tconst input4 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar4'), TEST_EDITOR_INPUT_ID));\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true, sticky: true });\n\t\tawait rootGroup.openEditor(input2, { pinned: true });\n\t\tawait rootGroup.openEditor(input3, { pinned: true });\n\t\tawait rootGroup.openEditor(input4, { pinned: true });\n\n\t\tassert.strictEqual(rootGroup.count, 3);\n\t\tassert.strictEqual(rootGroup.contains(input1), true);\n\t\tassert.strictEqual(rootGroup.contains(input2), false);\n\t\tassert.strictEqual(rootGroup.contains(input3), true);\n\t\tassert.strictEqual(rootGroup.contains(input4), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input4.resource, typeId: input4.typeId, editorId: input4.editorId }), true);\n\t});\n\n\ttest('observer does not close scratchpads', async () => {\n\t\tconst [part] = await createPart();\n\t\tdisposables.add(part.enforcePartOptions({ limit: { enabled: true, value: 3 } }));\n\n\t\tconst storage = disposables.add(new TestStorageService());\n\t\tconst observer = disposables.add(new EditorsObserver(undefined, part, storage));\n\n\t\tconst rootGroup = part.activeGroup;\n\n\t\tconst input1 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar1'), TEST_EDITOR_INPUT_ID));\n\t\tinput1.capabilities = EditorInputCapabilities.Untitled | EditorInputCapabilities.Scratchpad;\n\t\tconst input2 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar2'), TEST_EDITOR_INPUT_ID));\n\t\tconst input3 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar3'), TEST_EDITOR_INPUT_ID));\n\t\tconst input4 = disposables.add(new TestFileEditorInput(URI.parse('foo://bar4'), TEST_EDITOR_INPUT_ID));\n\n\t\tawait rootGroup.openEditor(input1, { pinned: true });\n\t\tawait rootGroup.openEditor(input2, { pinned: true });\n\t\tawait rootGroup.openEditor(input3, { pinned: true });\n\t\tawait rootGroup.openEditor(input4, { pinned: true });\n\n\t\tassert.strictEqual(rootGroup.count, 3);\n\t\tassert.strictEqual(rootGroup.contains(input1), true);\n\t\tassert.strictEqual(rootGroup.contains(input2), false);\n\t\tassert.strictEqual(rootGroup.contains(input3), true);\n\t\tassert.strictEqual(rootGroup.contains(input4), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input1.resource, typeId: input1.typeId, editorId: input1.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input2.resource, typeId: input2.typeId, editorId: input2.editorId }), false);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input3.resource, typeId: input3.typeId, editorId: input3.editorId }), true);\n\t\tassert.strictEqual(observer.hasEditor({ resource: input4.resource, typeId: input4.typeId, editorId: input4.editorId }), true);\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"]}