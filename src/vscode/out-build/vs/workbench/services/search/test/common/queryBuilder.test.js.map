{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/search/test/common/queryBuilder.test.ts","vs/workbench/services/search/test/common/queryBuilder.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAChG,OAAO,MAAM,MAAM,QAAQ,CAAC;AAC5B,OAAO,KAAK,IAAI,MAAM,oCAAoC,CAAC;AAC3D,OAAO,EAAE,SAAS,EAAE,MAAM,wCAAwC,CAAC;AACnE,OAAO,EAAE,GAAG,EAAE,MAAM,mCAAmC,CAAC;AACxD,OAAO,EAAE,uCAAuC,EAAE,MAAM,0CAA0C,CAAC;AAEnG,OAAO,EAAE,aAAa,EAAE,MAAM,gEAAgE,CAAC;AAC/F,OAAO,EAAE,iBAAiB,EAAE,iCAAiC,EAAE,MAAM,8BAA8B,CAAC;AACpG,OAAO,EAAE,kBAAkB,EAAE,MAAM,kDAAkD,CAAC;AAEtF,KAAK,CAAC,oBAAoB,EAAE,GAAG,EAAE;IAChC,uCAAuC,EAAE,CAAC;IAC1C,IAAI,OAAiC,CAAC;IAEtC,KAAK,CAAC,GAAG,EAAE;QACV,MAAM,SAAS,GAAG,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;QAC9F,OAAO,GAAG,IAAI,kBAAkB,CAAC,SAAS,CAAC,CAAC;IAC7C,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,wFAAwF,EAAE,GAAG,EAAE;QACnG,MAAM,MAAM,GAAG,iCAAiC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,gCAAgC,CAAC,CAAC,CAAC,2BAA2B,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;QAClJ,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC,cAAc,CAAC,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,yEAAyE,EAAE,GAAG,EAAE;QACpF,MAAM,MAAM,GAAG,iCAAiC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,0CAA0C,CAAC,CAAC,CAAC,oCAAoC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;QACrK,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,CAAC,2BAA2B,CAAC,CAAC,CAAC;IAC/D,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,yEAAyE,EAAE,GAAG,EAAE;QACpF,yFAAyF;QACzF,0DAA0D;QAE1D,sCAAsC;QACtC,MAAM,QAAQ,GAAG,gBAAgB,CAAC;QAElC,mEAAmE;QACnE,MAAM,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,eAAe,EAAE,KAAK,EAAE,0EAA0E,CAAC,CAAC;QAEvH,+CAA+C;QAC/C,MAAM,cAAc,GAAG,iBAAiB,CAAC,QAAQ,CAAC,CAAC;QACnD,MAAM,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,aAAa,EAAE,IAAI,EAAE,wCAAwC,CAAC,CAAC;QAClF,MAAM,CAAC,WAAW,CAAC,cAAc,EAAE,oBAAoB,EAAE,sCAAsC,CAAC,CAAC;IAClG,CAAC,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC","file":"queryBuilder.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport * as glob from '../../../../../base/common/glob.js';\nimport { isWindows } from '../../../../../base/common/platform.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { testWorkspace } from '../../../../../platform/workspace/test/common/testWorkspace.js';\nimport { escapeGlobPattern, resolveResourcesForSearchIncludes } from '../../common/queryBuilder.js';\nimport { TestContextService } from '../../../../test/common/workbenchTestServices.js';\n\nsuite('QueryBuilderCommon', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\tlet context: IWorkspaceContextService;\n\n\tsetup(() => {\n\t\tconst workspace = testWorkspace(URI.file(isWindows ? 'C:\\\\testWorkspace' : '/testWorkspace'));\n\t\tcontext = new TestContextService(workspace);\n\t});\n\n\ttest('resolveResourcesForSearchIncludes passes through paths without special glob characters', () => {\n\t\tconst actual = resolveResourcesForSearchIncludes([URI.file(isWindows ? 'C:\\\\testWorkspace\\\\pages\\\\blog' : '/testWorkspace/pages/blog')], context);\n\t\tassert.deepStrictEqual(actual, ['./pages/blog']);\n\t});\n\n\ttest('resolveResourcesForSearchIncludes escapes paths with special characters', () => {\n\t\tconst actual = resolveResourcesForSearchIncludes([URI.file(isWindows ? 'C:\\\\testWorkspace\\\\pages\\\\blog\\\\[postId]' : '/testWorkspace/pages/blog/[postId]')], context);\n\t\tassert.deepStrictEqual(actual, ['./pages/blog/[[]postId[]]']);\n\t});\n\n\ttest('escapeGlobPattern properly escapes square brackets for literal matching', () => {\n\t\t// This test verifies the fix for issue #233049 where files with square brackets in names\n\t\t// were not found when using \"Search Only in Open Editors\"\n\n\t\t// Test file name with square brackets\n\t\tconst fileName = 'file[test].txt';\n\n\t\t// Without escaping, the pattern treats [test] as a character class\n\t\tconst unescapedResult = glob.match(fileName, fileName);\n\t\tassert.strictEqual(unescapedResult, false, 'Unescaped pattern should not match due to character class interpretation');\n\n\t\t// With escaping, the pattern matches literally\n\t\tconst escapedPattern = escapeGlobPattern(fileName);\n\t\tconst escapedResult = glob.match(escapedPattern, fileName);\n\t\tassert.strictEqual(escapedResult, true, 'Escaped pattern should match literally');\n\t\tassert.strictEqual(escapedPattern, 'file[[]test[]].txt', 'Pattern should have escaped brackets');\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport * as glob from '../../../../../base/common/glob.js';\nimport { isWindows } from '../../../../../base/common/platform.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { testWorkspace } from '../../../../../platform/workspace/test/common/testWorkspace.js';\nimport { escapeGlobPattern, resolveResourcesForSearchIncludes } from '../../common/queryBuilder.js';\nimport { TestContextService } from '../../../../test/common/workbenchTestServices.js';\n\nsuite('QueryBuilderCommon', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\tlet context: IWorkspaceContextService;\n\n\tsetup(() => {\n\t\tconst workspace = testWorkspace(URI.file(isWindows ? 'C:\\\\testWorkspace' : '/testWorkspace'));\n\t\tcontext = new TestContextService(workspace);\n\t});\n\n\ttest('resolveResourcesForSearchIncludes passes through paths without special glob characters', () => {\n\t\tconst actual = resolveResourcesForSearchIncludes([URI.file(isWindows ? 'C:\\\\testWorkspace\\\\pages\\\\blog' : '/testWorkspace/pages/blog')], context);\n\t\tassert.deepStrictEqual(actual, ['./pages/blog']);\n\t});\n\n\ttest('resolveResourcesForSearchIncludes escapes paths with special characters', () => {\n\t\tconst actual = resolveResourcesForSearchIncludes([URI.file(isWindows ? 'C:\\\\testWorkspace\\\\pages\\\\blog\\\\[postId]' : '/testWorkspace/pages/blog/[postId]')], context);\n\t\tassert.deepStrictEqual(actual, ['./pages/blog/[[]postId[]]']);\n\t});\n\n\ttest('escapeGlobPattern properly escapes square brackets for literal matching', () => {\n\t\t// This test verifies the fix for issue #233049 where files with square brackets in names\n\t\t// were not found when using \"Search Only in Open Editors\"\n\n\t\t// Test file name with square brackets\n\t\tconst fileName = 'file[test].txt';\n\n\t\t// Without escaping, the pattern treats [test] as a character class\n\t\tconst unescapedResult = glob.match(fileName, fileName);\n\t\tassert.strictEqual(unescapedResult, false, 'Unescaped pattern should not match due to character class interpretation');\n\n\t\t// With escaping, the pattern matches literally\n\t\tconst escapedPattern = escapeGlobPattern(fileName);\n\t\tconst escapedResult = glob.match(escapedPattern, fileName);\n\t\tassert.strictEqual(escapedResult, true, 'Escaped pattern should match literally');\n\t\tassert.strictEqual(escapedPattern, 'file[[]test[]].txt', 'Pattern should have escaped brackets');\n\t});\n});\n"]}