{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/search/test/common/folderQuerySearchTree.test.ts","vs/workbench/services/search/test/common/folderQuerySearchTree.test.ts"],"names":[],"mappings":"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","file":"folderQuerySearchTree.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport assert from 'assert';\nimport { FolderQuerySearchTree } from '../../common/folderQuerySearchTree.js';\nimport { IFolderQuery } from '../../common/search.js';\n\nsuite('FolderQuerySearchTree', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\tconst fq1 = { folder: URI.parse('file:///folder1?query1#fragment1') };\n\tconst fq2 = { folder: URI.parse('file:///folder2?query2#fragment2') };\n\tconst fq3 = { folder: URI.parse('file:///folder3?query3#fragment3') };\n\tconst fq4 = { folder: URI.parse('file:///folder3?query3') };\n\tconst fq5 = { folder: URI.parse('file:///folder3') };\n\n\tconst folderQueries: IFolderQuery<URI>[] = [\n\t\tfq1,\n\t\tfq2,\n\t\tfq3,\n\t\tfq4,\n\t\tfq5,\n\t];\n\n\tconst getFolderQueryInfo = (fq: IFolderQuery<URI>, i: number) => ({ folder: fq.folder, index: i });\n\n\ttest('find query fragment aware substr correctly', () => {\n\t\tconst tree = new FolderQuerySearchTree(folderQueries, getFolderQueryInfo);\n\t\tconst result = tree.findQueryFragmentAwareSubstr(fq1.folder);\n\t\tconst result2 = tree.findQueryFragmentAwareSubstr(URI.parse('file:///folder1/foo/bar?query1#fragment1'));\n\t\tassert.deepStrictEqual(result, { folder: fq1.folder, index: 0 });\n\t\tassert.deepStrictEqual(result2, { folder: fq1.folder, index: 0 });\n\t});\n\n\ttest('do not to URIs that do not have queries if the base has query', () => {\n\t\tconst tree = new FolderQuerySearchTree(folderQueries, getFolderQueryInfo);\n\t\tconst result = tree.findQueryFragmentAwareSubstr(URI.parse('file:///folder1'));\n\t\tconst result2 = tree.findQueryFragmentAwareSubstr(URI.parse('file:///folder1?query1'));\n\t\tassert.deepStrictEqual(result, undefined);\n\t\tassert.deepStrictEqual(result2, undefined);\n\t});\n\n\ttest('match correct entry with query/fragment', () => {\n\t\tconst tree = new FolderQuerySearchTree(folderQueries, getFolderQueryInfo);\n\t\tconst result = tree.findQueryFragmentAwareSubstr(URI.parse('file:///folder3/file.txt?query3#fragment3'));\n\t\tassert.deepStrictEqual(result, { folder: fq3.folder, index: 2 });\n\n\t\tconst result2 = tree.findQueryFragmentAwareSubstr(URI.parse('file:///folder3/file.txt?query3'));\n\t\tassert.deepStrictEqual(result2, { folder: fq4.folder, index: 3 });\n\n\t\tconst result3 = tree.findQueryFragmentAwareSubstr(URI.parse('file:///folder3/file.txt'));\n\t\tassert.deepStrictEqual(result3, { folder: fq5.folder, index: 4 });\n\t});\n\n\ttest('can find substr of non-query/fragment URIs', () => {\n\t\tconst tree = new FolderQuerySearchTree(folderQueries, getFolderQueryInfo);\n\t\tconst result = tree.findQueryFragmentAwareSubstr(fq5.folder);\n\t\tconst result2 = tree.findQueryFragmentAwareSubstr(URI.parse('file:///folder3/hello/world'));\n\t\tassert.deepStrictEqual(result, { folder: fq5.folder, index: 4 });\n\t\tassert.deepStrictEqual(result2, { folder: fq5.folder, index: 4 });\n\t});\n\n\ttest('iterate over all folderQueryInfo correctly', () => {\n\t\tconst tree = new FolderQuerySearchTree(folderQueries, getFolderQueryInfo);\n\t\tconst results: any[] = [];\n\t\ttree.forEachFolderQueryInfo(info => results.push(info));\n\t\tassert.equal(results.length, 5);\n\t\tassert.deepStrictEqual(results, folderQueries.map((fq, i) => getFolderQueryInfo(fq, i)));\n\t});\n\n\n\ttest('`/` as a path', () => {\n\t\tconst trie = new FolderQuerySearchTree([{ folder: URI.parse('memfs:/?q=1') }], getFolderQueryInfo);\n\n\t\tassert.deepStrictEqual(trie.findQueryFragmentAwareSubstr(URI.parse('memfs:/file.txt?q=1')), { folder: URI.parse('memfs:/?q=1'), index: 0 });\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport assert from 'assert';\nimport { FolderQuerySearchTree } from '../../common/folderQuerySearchTree.js';\nimport { IFolderQuery } from '../../common/search.js';\n\nsuite('FolderQuerySearchTree', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\tconst fq1 = { folder: URI.parse('file:///folder1?query1#fragment1') };\n\tconst fq2 = { folder: URI.parse('file:///folder2?query2#fragment2') };\n\tconst fq3 = { folder: URI.parse('file:///folder3?query3#fragment3') };\n\tconst fq4 = { folder: URI.parse('file:///folder3?query3') };\n\tconst fq5 = { folder: URI.parse('file:///folder3') };\n\n\tconst folderQueries: IFolderQuery<URI>[] = [\n\t\tfq1,\n\t\tfq2,\n\t\tfq3,\n\t\tfq4,\n\t\tfq5,\n\t];\n\n\tconst getFolderQueryInfo = (fq: IFolderQuery<URI>, i: number) => ({ folder: fq.folder, index: i });\n\n\ttest('find query fragment aware substr correctly', () => {\n\t\tconst tree = new FolderQuerySearchTree(folderQueries, getFolderQueryInfo);\n\t\tconst result = tree.findQueryFragmentAwareSubstr(fq1.folder);\n\t\tconst result2 = tree.findQueryFragmentAwareSubstr(URI.parse('file:///folder1/foo/bar?query1#fragment1'));\n\t\tassert.deepStrictEqual(result, { folder: fq1.folder, index: 0 });\n\t\tassert.deepStrictEqual(result2, { folder: fq1.folder, index: 0 });\n\t});\n\n\ttest('do not to URIs that do not have queries if the base has query', () => {\n\t\tconst tree = new FolderQuerySearchTree(folderQueries, getFolderQueryInfo);\n\t\tconst result = tree.findQueryFragmentAwareSubstr(URI.parse('file:///folder1'));\n\t\tconst result2 = tree.findQueryFragmentAwareSubstr(URI.parse('file:///folder1?query1'));\n\t\tassert.deepStrictEqual(result, undefined);\n\t\tassert.deepStrictEqual(result2, undefined);\n\t});\n\n\ttest('match correct entry with query/fragment', () => {\n\t\tconst tree = new FolderQuerySearchTree(folderQueries, getFolderQueryInfo);\n\t\tconst result = tree.findQueryFragmentAwareSubstr(URI.parse('file:///folder3/file.txt?query3#fragment3'));\n\t\tassert.deepStrictEqual(result, { folder: fq3.folder, index: 2 });\n\n\t\tconst result2 = tree.findQueryFragmentAwareSubstr(URI.parse('file:///folder3/file.txt?query3'));\n\t\tassert.deepStrictEqual(result2, { folder: fq4.folder, index: 3 });\n\n\t\tconst result3 = tree.findQueryFragmentAwareSubstr(URI.parse('file:///folder3/file.txt'));\n\t\tassert.deepStrictEqual(result3, { folder: fq5.folder, index: 4 });\n\t});\n\n\ttest('can find substr of non-query/fragment URIs', () => {\n\t\tconst tree = new FolderQuerySearchTree(folderQueries, getFolderQueryInfo);\n\t\tconst result = tree.findQueryFragmentAwareSubstr(fq5.folder);\n\t\tconst result2 = tree.findQueryFragmentAwareSubstr(URI.parse('file:///folder3/hello/world'));\n\t\tassert.deepStrictEqual(result, { folder: fq5.folder, index: 4 });\n\t\tassert.deepStrictEqual(result2, { folder: fq5.folder, index: 4 });\n\t});\n\n\ttest('iterate over all folderQueryInfo correctly', () => {\n\t\tconst tree = new FolderQuerySearchTree(folderQueries, getFolderQueryInfo);\n\t\tconst results: any[] = [];\n\t\ttree.forEachFolderQueryInfo(info => results.push(info));\n\t\tassert.equal(results.length, 5);\n\t\tassert.deepStrictEqual(results, folderQueries.map((fq, i) => getFolderQueryInfo(fq, i)));\n\t});\n\n\n\ttest('`/` as a path', () => {\n\t\tconst trie = new FolderQuerySearchTree([{ folder: URI.parse('memfs:/?q=1') }], getFolderQueryInfo);\n\n\t\tassert.deepStrictEqual(trie.findQueryFragmentAwareSubstr(URI.parse('memfs:/file.txt?q=1')), { folder: URI.parse('memfs:/?q=1'), index: 0 });\n\t});\n});\n"]}