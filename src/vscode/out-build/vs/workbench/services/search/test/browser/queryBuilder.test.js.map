{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/search/test/browser/queryBuilder.test.ts","vs/workbench/services/search/test/browser/queryBuilder.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAChG,OAAO,MAAM,MAAM,QAAQ,CAAC;AAE5B,OAAO,EAAE,IAAI,EAAE,MAAM,oCAAoC,CAAC;AAC1D,OAAO,EAAE,SAAS,EAAE,MAAM,wCAAwC,CAAC;AACnE,OAAO,EAAE,GAAG,EAAE,GAAG,IAAI,GAAG,EAAE,MAAM,mCAAmC,CAAC;AACpE,OAAO,EAAE,qBAAqB,EAAE,MAAM,+DAA+D,CAAC;AACtG,OAAO,EAAE,wBAAwB,EAAE,MAAM,+EAA+E,CAAC;AACzH,OAAO,EAAE,wBAAwB,EAAE,MAAM,+EAA+E,CAAC;AACzH,OAAO,EAAE,wBAAwB,EAAE,iBAAiB,EAAE,MAAM,uDAAuD,CAAC;AACpH,OAAO,EAAE,kBAAkB,EAAE,MAAM,yDAAyD,CAAC;AAC7F,OAAO,EAAoB,YAAY,EAAE,MAAM,8BAA8B,CAAC;AAC9E,OAAO,EAAE,YAAY,EAAE,MAAM,qCAAqC,CAAC;AAEnE,OAAO,EAAE,eAAe,EAAE,sBAAsB,EAAE,MAAM,mDAAmD,CAAC;AAC5G,OAAO,EAAE,kBAAkB,EAAE,MAAM,kDAAkD,CAAC;AACtF,OAAO,EAAE,mBAAmB,EAAE,MAAM,2DAA2D,CAAC;AAChG,OAAO,EAAE,SAAS,EAAE,MAAM,gEAAgE,CAAC;AAC3F,OAAO,EAAE,0BAA0B,EAAE,MAAM,yCAAyC,CAAC;AACrF,OAAO,EAAE,uCAAuC,EAAE,MAAM,0CAA0C,CAAC;AAEnG,MAAM,qBAAqB,GAAG,EAAE,CAAC;AACjC,MAAM,mBAAmB,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE,cAAc,EAAE,IAAI,EAAE,oBAAoB,EAAE,IAAI,EAAE,oBAAoB,EAAE,IAAI,EAAE,CAAC;AAC/H,MAAM,mBAAmB,GAAG,EAAE,CAAC;AAC/B,MAAM,wBAAwB,GAAG,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;AAErD,KAAK,CAAC,cAAc,EAAE,GAAG,EAAE;IAC1B,uCAAuC,EAAE,CAAC;IAC1C,MAAM,YAAY,GAAiB,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC;IACpD,MAAM,MAAM,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;IACrC,MAAM,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;IAClC,MAAM,mBAAmB,GAAG,iBAAiB,CAAC,UAAU,CAAC,CAAC;IAC1D,MAAM,cAAc,GAAG,MAAM,CAAC,0BAA0B,CAAC,CAAC,CAAC,8EAA8E;IAEzI,IAAI,oBAA8C,CAAC;IACnD,IAAI,YAA0B,CAAC;IAC/B,IAAI,iBAA2C,CAAC;IAChD,IAAI,kBAAsC,CAAC;IAC3C,IAAI,aAAwB,CAAC;IAE7B,KAAK,CAAC,GAAG,EAAE;QACV,oBAAoB,GAAG,IAAI,wBAAwB,EAAE,CAAC;QAEtD,iBAAiB,GAAG,IAAI,wBAAwB,EAAE,CAAC;QACnD,iBAAiB,CAAC,oBAAoB,CAAC,QAAQ,EAAE,mBAAmB,CAAC,CAAC;QACtE,iBAAiB,CAAC,oBAAoB,CAAC,QAAQ,EAAE,qBAAqB,CAAC,CAAC;QACxE,oBAAoB,CAAC,IAAI,CAAC,qBAAqB,EAAE,iBAAiB,CAAC,CAAC;QAEpE,kBAAkB,GAAG,IAAI,kBAAkB,EAAE,CAAC;QAC9C,aAAa,GAAG,IAAI,SAAS,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QAC5E,kBAAkB,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;QAE/C,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,EAAE,kBAAkB,CAAC,CAAC;QACxE,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,sBAAsB,CAAC,CAAC;QACvE,oBAAoB,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,eAAe,EAAE,CAAC,CAAC;QAE/D,YAAY,GAAG,oBAAoB,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;IAClE,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,GAAG,EAAE;QACb,oBAAoB,CAAC,OAAO,EAAE,CAAC;IAChC,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,qBAAqB,EAAE,GAAG,EAAE;QAChC,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAAC,YAAY,CAAC,EAC/B;YACC,aAAa,EAAE,EAAE;YACjB,cAAc,EAAE,YAAY;YAC5B,IAAI,wBAAgB;SACpB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,4BAA4B,EAAE,GAAG,EAAE;QACvC,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,EAC1D;YACC,aAAa,EAAE,EAAE;YACjB,cAAc,EAAE;gBACf,OAAO,EAAE,WAAW;gBACpB,QAAQ,EAAE,IAAI;gBACd,WAAW,EAAE,IAAI;aACjB;YACD,IAAI,wBAAgB;SACpB,CAAC,CAAC;QAEJ,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,EAC3D;YACC,aAAa,EAAE,EAAE;YACjB,cAAc,EAAE;gBACf,OAAO,EAAE,UAAU;gBACnB,QAAQ,EAAE,KAAK;gBACf,WAAW,EAAE,IAAI;aACjB;YACD,IAAI,wBAAgB;SACpB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,oDAAoD,EAAE,GAAG,EAAE;QAC/D,kBAAkB,CACjB,YAAY,CAAC,IAAI,CAChB,CAAC,mBAAmB,CAAC,EACrB,EAAE,cAAc,EAAE,gBAAgB,EAAE,cAAc,EAAE,IAAI,EAAE,CAC1D,EACD;YACC,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;iBAClB,CAAC;YACF,IAAI,wBAAgB;YACpB,cAAc,EAAE;gBACf,QAAQ,EAAE,IAAI;gBACd,WAAW,EAAE,IAAI;gBACjB,QAAQ,EAAE,IAAI;gBACd,WAAW,EAAE,IAAI;aACjB;SACD,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,6DAA6D,EAAE,GAAG,EAAE;QACxE,kBAAkB,CACjB,YAAY,CAAC,IAAI,CAChB,CAAC,mBAAmB,CAAC,EACrB,EAAE,cAAc,EAAE,gBAAgB,EAAE,CACpC,EACD;YACC,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;iBAClB,CAAC;YACF,IAAI,wBAAgB;YACpB,cAAc,EAAE;gBACf,gBAAgB,EAAE,IAAI;aACtB;SACD,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,sBAAsB,EAAE,GAAG,EAAE;QACjC,kBAAkB,CACjB,YAAY,CAAC,IAAI,CAChB,CAAC,mBAAmB,CAAC,EACrB,EAAE,cAAc,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAAE,CACxC,EACD;YACC,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;iBAClB,CAAC;YACF,IAAI,wBAAgB;YACpB,cAAc,EAAE;gBACf,QAAQ,EAAE,IAAI;gBACd,QAAQ,EAAE,IAAI;aACd;SACD,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,0CAA0C,EAAE,GAAG,EAAE;QACrD,kBAAkB,CACjB,YAAY,CAAC,IAAI,CAChB,CAAC,mBAAmB,CAAC,EACrB,EAAE,cAAc,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAAE,cAAc,EAAE,IAAI,EAAE,CAC9D,EACD;YACC,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;iBAClB,CAAC;YACF,IAAI,wBAAgB;YACpB,cAAc,EAAE;gBACf,QAAQ,EAAE,IAAI;gBACd,WAAW,EAAE,IAAI;gBACjB,QAAQ,EAAE,IAAI;gBACd,WAAW,EAAE,IAAI;aACjB;SACD,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,iBAAiB,EAAE,GAAG,EAAE;QAC5B,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAChB,YAAY,EACZ,CAAC,UAAU,CAAC,CACZ,EACD;YACC,cAAc,EAAE,YAAY;YAC5B,aAAa,EAAE,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,CAAC;YACvC,IAAI,wBAAgB;SACpB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,wBAAwB,EAAE,GAAG,EAAE;QACnC,iBAAiB,CAAC,oBAAoB,CAAC,QAAQ,EAAE;YAChD,GAAG,mBAAmB;YACtB,OAAO,EAAE;gBACR,QAAQ,EAAE,IAAI;gBACd,QAAQ,EAAE;oBACT,MAAM,EAAE,gBAAgB;iBACxB;aACD;SACD,CAAC,CAAC;QAEH,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAChB,YAAY,EACZ,CAAC,UAAU,CAAC,EACZ;YACC,cAAc,EAAE,IAAI,CAAC,8DAA8D;SACnF,CACD,EACD;YACC,cAAc,EAAE,YAAY;YAC5B,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;oBAClB,cAAc,EAAE,CAAC;4BAChB,OAAO,EAAE;gCACR,QAAQ,EAAE,IAAI;gCACd,QAAQ,EAAE;oCACT,MAAM,EAAE,gBAAgB;iCACxB;6BACD;yBACD,CAAC;iBACF,CAAC;YACF,IAAI,wBAAgB;SACpB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,gBAAgB,EAAE,GAAG,EAAE;QAC3B,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAChB,YAAY,EACZ,CAAC,UAAU,CAAC,EACZ;YACC,cAAc,EAAE,KAAK;YACrB,cAAc,EAAE,IAAI;SACpB,CACD,EACD;YACC,cAAc,EAAE,YAAY;YAC5B,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;iBAClB,CAAC;YACF,cAAc,EAAE;gBACf,QAAQ,EAAE,IAAI;gBACd,WAAW,EAAE,IAAI;aACjB;YACD,IAAI,wBAAgB;SACpB,CAAC,CAAC;QAEJ,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAChB,YAAY,EACZ,CAAC,UAAU,CAAC,EACZ;YACC,cAAc,EAAE,KAAK;SACrB,CACD,EACD;YACC,cAAc,EAAE,YAAY;YAC5B,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;iBAClB,CAAC;YACF,cAAc,EAAE;gBACf,KAAK,EAAE,IAAI;aACX;YACD,IAAI,wBAAgB;SACpB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,+BAA+B,EAAE,GAAG,EAAE;QAE1C,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAChB,YAAY,EACZ,CAAC,UAAU,CAAC,EACZ;YACC,cAAc,EAAE,OAAO;YACvB,cAAc,EAAE,IAAI;SACpB,CACD,EACD;YACC,cAAc,EAAE,YAAY;YAC5B,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;oBAClB,cAAc,EAAE;wBACf,KAAK,EAAE,IAAI;wBACX,QAAQ,EAAE,IAAI;qBACd;iBACD,CAAC;YACF,IAAI,wBAAgB;SACpB,CAAC,CAAC;QAEJ,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAChB,YAAY,EACZ,CAAC,UAAU,CAAC,EACZ;YACC,cAAc,EAAE,QAAQ;YACxB,cAAc,EAAE,IAAI;SACpB,CACD,EACD;YACC,cAAc,EAAE,YAAY;YAC5B,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;oBAClB,cAAc,EAAE;wBACf,KAAK,EAAE,IAAI;wBACX,QAAQ,EAAE,IAAI;qBACd;iBACD,CAAC;YACF,IAAI,wBAAgB;SACpB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,gCAAgC,EAAE,GAAG,EAAE;QAC3C,iBAAiB,CAAC,oBAAoB,CAAC,QAAQ,EAAE;YAChD,GAAG,mBAAmB;YACtB,OAAO,EAAE;gBACR,aAAa,EAAE,IAAI;gBACnB,QAAQ,EAAE;oBACT,MAAM,EAAE,gBAAgB;iBACxB;aACD;SACD,CAAC,CAAC;QAEH,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAChB,YAAY,EACZ,CAAC,UAAU,CAAC,EACZ;YACC,cAAc,EAAE,OAAO;YACvB,cAAc,EAAE,IAAI;SACpB,CACD,EACD;YACC,cAAc,EAAE,YAAY;YAC5B,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;oBAClB,cAAc,EAAE;wBACf,KAAK,EAAE,IAAI;wBACX,QAAQ,EAAE,IAAI;qBACd;oBACD,cAAc,EAAE,CAAC;4BAChB,OAAO,EAAE;gCACR,aAAa,EAAE,IAAI;gCACnB,QAAQ,EAAE;oCACT,MAAM,EAAE,gBAAgB;iCACxB;6BACD;yBACD,CAAC;iBACF,CAAC;YACF,IAAI,wBAAgB;SACpB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,4BAA4B,EAAE,GAAG,EAAE;QACvC,MAAM,MAAM,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;QACzC,MAAM,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;QAClC,MAAM,MAAM,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;QACzC,MAAM,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;QAClC,aAAa,CAAC,OAAO,GAAG,kBAAkB,CAAC,CAAC,EAAE,IAAI,EAAE,UAAU,CAAC,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,UAAU,CAAC,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,cAAc,EAAE,0BAA0B,CAAC,CAAC;QAChL,aAAa,CAAC,aAAa,GAAG,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;QAE3D,iBAAiB,CAAC,oBAAoB,CAAC,QAAQ,EAAE;YAChD,GAAG,mBAAmB;YACtB,OAAO,EAAE,EAAE,aAAa,EAAE,IAAI,EAAE;SAChC,EAAE,UAAU,CAAC,CAAC;QAEf,iBAAiB,CAAC,oBAAoB,CAAC,QAAQ,EAAE;YAChD,GAAG,mBAAmB;YACtB,OAAO,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE;SACxB,EAAE,UAAU,CAAC,CAAC;QAEf,+GAA+G;QAC/G,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAChB,YAAY,EACZ,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC,CACpC,EACD;YACC,cAAc,EAAE,YAAY;YAC5B,aAAa,EAAE;gBACd,EAAE,MAAM,EAAE,UAAU,EAAE,cAAc,EAAE,8BAA8B,CAAC,aAAa,CAAC,EAAE;gBACrF,EAAE,MAAM,EAAE,UAAU,EAAE,cAAc,EAAE,8BAA8B,CAAC,KAAK,CAAC,EAAE;gBAC7E,EAAE,MAAM,EAAE,UAAU,EAAE;aACtB;YACD,IAAI,wBAAgB;SACpB,CACD,CAAC;QAEF,sEAAsE;QACtE,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAChB,YAAY,EACZ,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC,EACpC;YACC,cAAc,EAAE,aAAa;YAC7B,cAAc,EAAE,IAAI;SACpB,CACD,EACD;YACC,cAAc,EAAE,YAAY;YAC5B,aAAa,EAAE;gBACd;oBACC,MAAM,EAAE,UAAU;oBAClB,cAAc,EAAE;wBACf,KAAK,EAAE,IAAI;wBACX,QAAQ,EAAE,IAAI;qBACd;oBACD,cAAc,EAAE,CAAC;4BAChB,OAAO,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE;yBACxB,CAAC;iBACF;aACD;YACD,IAAI,wBAAgB;SACpB,CACD,CAAC;IACH,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,8BAA8B,EAAE,GAAG,EAAE;QACzC,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAChB,YAAY,EACZ,CAAC,UAAU,CAAC,EACZ;YACC,cAAc,EAAE,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;YACpC,cAAc,EAAE,IAAI;SACpB,CACD,EACD;YACC,cAAc,EAAE,YAAY;YAC5B,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;iBAClB,CAAC;YACF,IAAI,wBAAgB;YACpB,cAAc,EAAE,qBAAqB,CAAC,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;SAC3D,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,uBAAuB,EAAE,GAAG,EAAE;QAClC,MAAM,OAAO,GAAG,SAAS,CAAC;QAC1B,kBAAkB,CACjB,YAAY,CAAC,IAAI,CAChB,EAAE,EACF,EAAE,WAAW,EAAE,IAAI,OAAO,GAAG,EAAE,CAC/B,EACD;YACC,aAAa,EAAE,EAAE;YACjB,WAAW,EAAE,OAAO;YACpB,IAAI,wBAAgB;SACpB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,mBAAmB,EAAE,GAAG,EAAE;QAC9B,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAChB,YAAY,EACZ,CAAC,UAAU,CAAC,EACZ;YACC,cAAc,EAAE,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC;YACtC,cAAc,EAAE,IAAI;SACpB,CACD,EACD;YACC,cAAc,EAAE,YAAY;YAC5B,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;oBAClB,cAAc,EAAE,8BAA8B,CAAC,KAAK,EAAE,QAAQ,CAAC;iBAC/D,CAAC;YACF,IAAI,wBAAgB;SACpB,CAAC,CAAC;QAEJ,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAChB,YAAY,EACZ,CAAC,UAAU,CAAC,EACZ;YACC,cAAc,EAAE,CAAC,EAAE,OAAO,EAAE,eAAe,EAAE,CAAC;YAC9C,cAAc,EAAE,IAAI;SACpB,CACD,EACD;YACC,cAAc,EAAE,YAAY;YAC5B,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;oBAClB,cAAc,EAAE,8BAA8B,CAAC,aAAa,EAAE,gBAAgB,CAAC;iBAC/E,CAAC;YACF,IAAI,wBAAgB;SACpB,CAAC,CAAC;QAEJ,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAChB,YAAY,EACZ,CAAC,UAAU,CAAC,EACZ;YACC,cAAc,EAAE,CAAC,EAAE,OAAO,EAAE,kBAAkB,EAAE,CAAC;YACjD,cAAc,EAAE,IAAI;SACpB,CACD,EACD;YACC,cAAc,EAAE,YAAY;YAC5B,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;oBAClB,cAAc,EAAE,8BAA8B,CAAC,aAAa,EAAE,gBAAgB,CAAC;iBAC/E,CAAC;YACF,IAAI,wBAAgB;SACpB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,oBAAoB,EAAE,GAAG,EAAE;QAC/B,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAChB,YAAY,EACZ,CAAC,UAAU,CAAC,EACZ,EAAE,kBAAkB,EAAE,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,EAAE,CAC/C,EACD;YACC,cAAc,EAAE,YAAY;YAC5B,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;iBAClB,CAAC;YACF,kBAAkB,EAAE,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;YAC3C,IAAI,wBAAgB;SACpB,CAAC,CAAC;QAEJ,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAChB,YAAY,EACZ,CAAC,UAAU,CAAC,EACZ;YACC,kBAAkB,EAAE,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;YAC3C,cAAc,EAAE,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC;YACrC,cAAc,EAAE,IAAI;SACpB,CACD,EACD;YACC,cAAc,EAAE,YAAY;YAC5B,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;iBAClB,CAAC;YACF,cAAc,EAAE,qBAAqB,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;YAC5D,IAAI,wBAAgB;SACpB,CAAC,CAAC;QAEJ,sBAAsB,CACrB,YAAY,CAAC,IAAI,CAChB,YAAY,EACZ,CAAC,UAAU,CAAC,EACZ;YACC,kBAAkB,EAAE,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;YAC3C,cAAc,EAAE,OAAO;YACvB,cAAc,EAAE,IAAI;SACpB,CACD,EACD;YACC,cAAc,EAAE,YAAY;YAC5B,aAAa,EAAE,CAAC;oBACf,MAAM,EAAE,UAAU;iBAClB,CAAC;YACF,cAAc,EAAE,qBAAqB,CAAC,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC;YAC7D,IAAI,wBAAgB;SACpB,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,oBAAoB,EAAE,GAAG,EAAE;QAChC,IAAI,CAAC,iBAAiB,EAAE,GAAG,EAAE;YAC5B,SAAS,kBAAkB,CAAC,cAAsB,EAAE,gBAA0B;gBAC7E,MAAM,MAAM,GAAG,YAAY,CAAC,gBAAgB,CAAC,cAAc,CAAC,CAAC;gBAC7D,MAAM,CAAC,eAAe,CACrB,EAAE,GAAG,MAAM,CAAC,OAAO,EAAE,EACrB,qBAAqB,CAAC,GAAG,gBAAgB,CAAC,EAC1C,cAAc,CAAC,CAAC;gBACjB,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;YACnD,CAAC;YAED;gBACC,CAAC,GAAG,EAAE,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;gBAC1B,CAAC,KAAK,EAAE,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;gBAChC,CAAC,SAAS,EAAE,CAAC,QAAQ,EAAE,MAAM,EAAE,WAAW,EAAE,SAAS,CAAC,CAAC;gBACvD,CAAC,QAAQ,EAAE,CAAC,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,aAAa,CAAC,CAAC;gBAC1D,CAAC,OAAO,EAAE,CAAC,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,SAAS,CAAC,CAAC;gBACjD,CAAC,WAAW,EAAE,CAAC,MAAM,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;aAC7C,CAAC,OAAO,CAAC,CAAC,CAAC,cAAc,EAAE,gBAAgB,CAAC,EAAE,EAAE,CAAC,kBAAkB,CAAS,cAAc,EAAY,gBAAgB,CAAC,CAAC,CAAC;QAC3H,CAAC,CAAC,CAAC;QAEH,SAAS,YAAY,CAAC,cAAsB,EAAE,cAAgC;YAC7E,IAAI,MAAwB,CAAC;YAC7B,IAAI,CAAC;gBACJ,MAAM,GAAG,YAAY,CAAC,gBAAgB,CAAC,cAAc,CAAC,CAAC;YACxD,CAAC;YAAC,OAAO,CAAC,EAAE,CAAC;gBACZ,MAAM,GAAG,EAAE,WAAW,EAAE,EAAE,EAAE,CAAC;YAC9B,CAAC;YAED,4BAA4B,CAC3B,MAAM,EACN,cAAc,EACd,cAAc,CAAC,CAAC;QAClB,CAAC;QAED,SAAS,oBAAoB,CAAC,CAAC,cAAc,EAAE,cAAc,CAA6B;YACzF,YAAY,CAAC,cAAc,EAAE,cAAc,CAAC,CAAC;QAC9C,CAAC;QAED,IAAI,CAAC,mBAAmB,EAAE,GAAG,EAAE;YAC9B,MAAM,KAAK,GAAiC;gBAC3C;oBACC,OAAO,CAAC,UAAU,CAAC;oBACnB;wBACC,WAAW,EAAE,CAAC,EAAE,UAAU,EAAE,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC;qBACjD;iBACD;gBACD;oBACC,OAAO,CAAC,UAAU,CAAC,GAAG,GAAG,GAAG,GAAG;oBAC/B;wBACC,WAAW,EAAE,CAAC,EAAE,UAAU,EAAE,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC;wBACjD,OAAO,EAAE,qBAAqB,CAAC,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC;qBAClD;iBACD;gBACD;oBACC,OAAO,CAAC,UAAU,CAAC,GAAG,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC;oBAC3C;wBACC,WAAW,EAAE,CAAC,EAAE,UAAU,EAAE,MAAM,CAAC,UAAU,CAAC,EAAE,EAAE,EAAE,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC;qBACjF;iBACD;gBACD;oBACC,OAAO,CAAC,UAAU,CAAC,GAAG,GAAG,GAAG,OAAO,CAAC,0BAA0B,CAAC;oBAC/D;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,MAAM,CAAC,UAAU,CAAC;6BAC9B,CAAC;qBACF;iBACD;gBACD;oBACC,OAAO,CAAC,kBAAkB,CAAC;oBAC3B;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,MAAM,CAAC,UAAU,CAAC;gCAC9B,OAAO,EAAE,qBAAqB,CAAC,SAAS,EAAE,YAAY,CAAC;6BACvD,CAAC;qBACF;iBACD;gBACD;oBACC,OAAO,CAAC,iBAAiB,CAAC;oBAC1B;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,MAAM,CAAC,UAAU,CAAC;gCAC9B,OAAO,EAAE,qBAAqB,CAAC,QAAQ,EAAE,WAAW,CAAC;6BACrD,CAAC;qBACF;iBACD;gBACD;oBACC,OAAO,CAAC,SAAS,CAAC;oBAClB;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,MAAM,CAAC,GAAG,CAAC;gCACvB,OAAO,EAAE,qBAAqB,CAAC,QAAQ,EAAE,WAAW,CAAC;6BACrD,CAAC;qBACF;iBACD;gBACD;oBACC,OAAO,CAAC,cAAc,CAAC;oBACvB;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC;gCAC1B,OAAO,EAAE,qBAAqB,CAAC,SAAS,EAAE,YAAY,CAAC;6BACvD,CAAC;qBACF;iBACD;aACD,CAAC;YACF,KAAK,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,wCAAwC,EAAE,GAAG,EAAE;YACnD,MAAM,KAAK,GAAiC;gBAC3C;oBACC,KAAK;oBACL;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,UAAU;gCACtB,OAAO,EAAE,qBAAqB,CAAC,GAAG,EAAE,MAAM,CAAC;6BAC3C,CAAC;qBACF;iBACD;gBACD;oBACC,MAAM;oBACN;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,UAAU;gCACtB,OAAO,EAAE,qBAAqB,CAAC,GAAG,EAAE,MAAM,CAAC;6BAC3C,CAAC;qBACF;iBACD;gBACD;oBACC,UAAU;oBACV;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,UAAU;gCACtB,OAAO,EAAE,qBAAqB,CAAC,QAAQ,EAAE,WAAW,CAAC;6BACrD,CAAC;qBACF;iBACD;gBACD;oBACC,YAAY,GAAG,OAAO,CAAC,cAAc,CAAC;oBACtC;wBACC,WAAW,EAAE;4BACZ;gCACC,UAAU,EAAE,UAAU;gCACtB,OAAO,EAAE,qBAAqB,CAAC,QAAQ,EAAE,WAAW,CAAC;6BACrD;4BACD;gCACC,UAAU,EAAE,MAAM,CAAC,cAAc,CAAC;6BAClC;yBAAC;qBACH;iBACD;gBACD;oBACC,cAAc;oBACd;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,UAAU;gCACtB,OAAO,EAAE,qBAAqB,CAAC,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,CAAC;6BAChE,CAAC;qBACF;iBACD;gBACD;oBACC,KAAK;oBACL;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC;6BAC1B,CAAC;qBACF;iBACD;gBACD;oBACC,IAAI;oBACJ;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC;6BAC1B,CAAC;qBACF;iBACD;gBACD;oBACC,SAAS;oBACT;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,MAAM,CAAC,UAAU,CAAC;6BAC9B,CAAC;qBACF;iBACD;aACD,CAAC;YACF,KAAK,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,sCAAsC,EAAE,GAAG,EAAE;YACjD,MAAM,MAAM,GAAG,gBAAgB,CAAC;YAChC,aAAa,CAAC,OAAO,GAAG,kBAAkB,CAAC,CAAC,EAAE,IAAI,EAAE,UAAU,CAAC,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,cAAc,EAAE,0BAA0B,CAAC,CAAC;YACvJ,aAAa,CAAC,aAAa,GAAG,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;YAE1D,MAAM,KAAK,GAAiC;gBAC3C;oBACC,SAAS;oBACT;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC;6BAC1B,CAAC;qBACF;iBACD;gBACD;oBACC,SAAS;oBACT;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC;6BAC1B,CAAC;qBACF;iBACD;gBACD;oBACC,kCAAkC;oBAClC;wBACC,WAAW,EAAE;4BACZ;gCACC,UAAU,EAAE,UAAU;gCACtB,OAAO,EAAE,qBAAqB,CAAC,QAAQ,EAAE,WAAW,CAAC;6BACrD;4BACD;gCACC,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC;gCAC1B,OAAO,EAAE,qBAAqB,CAAC,UAAU,EAAE,aAAa,CAAC;6BACzD;yBAAC;qBACH;iBACD;aACD,CAAC;YACF,KAAK,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,sBAAsB,EAAE,GAAG,EAAE;YACjC,MAAM,MAAM,GAAG,gBAAgB,CAAC;YAChC,MAAM,iBAAiB,GAAG,YAAY,CAAC;YACvC,aAAa,CAAC,OAAO,GAAG,kBAAkB,CAAC,CAAC,EAAE,IAAI,EAAE,UAAU,CAAC,MAAM,EAAE,IAAI,EAAE,iBAAiB,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,cAAc,EAAE,0BAA0B,CAAC,CAAC;YAChL,aAAa,CAAC,aAAa,GAAG,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;YAE1D,MAAM,KAAK,GAAiC;gBAC3C;oBACC,cAAc;oBACd;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,UAAU;6BACtB,CAAC;qBACF;iBACD;gBACD;oBACC,kBAAkB;oBAClB;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,UAAU;gCACtB,OAAO,EAAE,qBAAqB,CAAC,KAAK,EAAE,QAAQ,CAAC;6BAC/C,CAAC;qBACF;iBACD;aACD,CAAC;YACF,KAAK,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,+BAA+B,EAAE,GAAG,EAAE;YAC1C,MAAM,MAAM,GAAG,gBAAgB,CAAC;YAChC,MAAM,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;YAClC,MAAM,iBAAiB,GAAG,YAAY,CAAC;YACvC,MAAM,iBAAiB,GAAG,aAAa,CAAC,CAAC,uCAAuC;YAChF,aAAa,CAAC,OAAO,GAAG,kBAAkB,CAAC,CAAC,EAAE,IAAI,EAAE,UAAU,CAAC,MAAM,EAAE,IAAI,EAAE,iBAAiB,EAAE,EAAE,EAAE,IAAI,EAAE,UAAU,CAAC,MAAM,EAAE,IAAI,EAAE,iBAAiB,EAAE,CAAC,EAAE,cAAc,EAAE,0BAA0B,CAAC,CAAC;YACrM,aAAa,CAAC,aAAa,GAAG,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;YAE1D,MAAM,KAAK,GAAiC;gBAC3C;oBACC,cAAc;oBACd;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,UAAU;6BACtB,CAAC;qBACF;iBACD;gBACD;oBACC,oBAAoB;oBACpB;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,UAAU;gCACtB,OAAO,EAAE,qBAAqB,CAAC,KAAK,EAAE,QAAQ,CAAC;6BAC/C,CAAC;qBACF;iBACD;gBACD;oBACC,2BAA2B;oBAC3B,EAAE,WAAW,EAAE,EAAE,EAAE;iBACnB;gBACD;oBACC,+BAA+B;oBAC/B,EAAE,WAAW,EAAE,EAAE,EAAE;iBACnB;gBACD;oBACC,UAAU;oBACV,EAAE,WAAW,EAAE,EAAE,EAAE;iBACnB;aACD,CAAC;YACF,KAAK,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qDAAqD,EAAE,GAAG,EAAE;YAChE,MAAM,MAAM,GAAG,gBAAgB,CAAC;YAChC,MAAM,MAAM,GAAG,qBAAqB,CAAC;YACrC,aAAa,CAAC,OAAO,GAAG,kBAAkB,CAAC,CAAC,EAAE,IAAI,EAAE,UAAU,CAAC,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,cAAc,EAAE,0BAA0B,CAAC,CAAC;YACxL,aAAa,CAAC,aAAa,GAAG,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC;YAE3D,MAAM,KAAK,GAAiC;gBAC3C;oBACC,EAAE;oBACF;wBACC,WAAW,EAAE,SAAS;qBACtB;iBACD;gBACD;oBACC,IAAI;oBACJ;wBACC,WAAW,EAAE,SAAS;qBACtB;iBACD;gBACD;oBACC,SAAS;oBACT;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC;6BAC1B,CAAC;qBACF;iBACD;gBACD;oBACC,YAAY;oBACZ;wBACC,WAAW,EAAE,CAAC;gCACb,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC;6BAC1B,CAAC;qBACF;iBACD;gBACD;oBACC,SAAS;oBACT;wBACC,WAAW,EAAE;4BACZ;gCACC,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC;6BAC1B;4BACD;gCACC,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC;6BAC1B;yBAAC;qBACH;iBACD;gBACD;oBACC,oCAAoC;oBACpC;wBACC,WAAW,EAAE;4BACZ;gCACC,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC;gCAC1B,OAAO,EAAE,qBAAqB,CAAC,QAAQ,EAAE,WAAW,EAAE,YAAY,EAAE,eAAe,CAAC;6BACpF;4BACD;gCACC,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC;gCAC1B,OAAO,EAAE,qBAAqB,CAAC,QAAQ,EAAE,WAAW,EAAE,YAAY,EAAE,eAAe,CAAC;6BACpF;yBAAC;qBACH;iBACD;gBACD;oBACC,uBAAuB;oBACvB;wBACC,OAAO,EAAE,qBAAqB,CAAC,QAAQ,EAAE,WAAW,CAAC;wBACrD,WAAW,EAAE;4BACZ;gCACC,UAAU,EAAE,UAAU;gCACtB,OAAO,EAAE,qBAAqB,CAAC,QAAQ,EAAE,WAAW,CAAC;6BACrD;yBAAC;qBACH;iBACD;aACD,CAAC;YACF,KAAK,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,oBAAoB,EAAE,GAAG,EAAE;QAEhC,SAAS,YAAY,CAAC,cAAsB,EAAE,cAAgC;YAC7E,4BAA4B,CAC3B,YAAY,CAAC,gBAAgB,CAAC,cAAc,CAAC,EAC7C,cAAc,EACd,cAAc,CAAC,CAAC;QAClB,CAAC;QAED,SAAS,oBAAoB,CAAC,CAAC,cAAc,EAAE,cAAc,CAA6B;YACzF,YAAY,CAAC,cAAc,EAAE,cAAc,CAAC,CAAC;QAC9C,CAAC;QAED,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,qBAAqB,EAAE,GAAG,EAAE;YAC1D,MAAM,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAC/B,MAAM,KAAK,GAAiC;gBAC3C;oBACC,WAAW;oBACX;wBACC,WAAW,EAAE,CAAC,EAAE,UAAU,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,UAAU,CAAC,EAAE,CAAC;qBAClE;iBACD;gBACD;oBACC,cAAc;oBACd;wBACC,WAAW,EAAE,CAAC,EAAE,UAAU,EAAE,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,UAAU,CAAC,EAAE,CAAC;wBAClE,OAAO,EAAE,qBAAqB,CAAC,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC;qBAClD;iBACD;gBACD;oBACC,OAAO,CAAC,YAAY,CAAC;oBACrB;wBACC,WAAW,EAAE,CAAC,EAAE,UAAU,EAAE,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC;qBACnD;iBACD;aACD,CAAC;YACF,KAAK,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,WAAW,EAAE,GAAG,EAAE;QACvB,IAAI,CAAC,uBAAuB,EAAE,GAAG,EAAE;YAClC,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAC9B;gBACC,OAAO,EAAE,GAAG;aACZ,EACD,EAAE,CAAC,CAAC;YAEL,MAAM,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;QAC/C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,kDAAkD,EAAE,GAAG,EAAE;YAC7D,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAC9B;gBACC,OAAO,EAAE,GAAG;gBACZ,eAAe,EAAE,IAAI;aACrB,EACD,EAAE,CAAC,CAAC;YAEL,MAAM,CAAC,KAAK,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,8CAA8C,EAAE,GAAG,EAAE;YACzD,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAC9B;gBACC,OAAO,EAAE,GAAG;gBACZ,eAAe,EAAE,IAAI;aACrB,EACD,EAAE,EACF;gBACC,WAAW,EAAE,IAAI;aACjB,CAAC,CAAC;YAEJ,MAAM,CAAC,KAAK,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,yCAAyC,EAAE,GAAG,EAAE;YACpD,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAC9B;gBACC,OAAO,EAAE,MAAM;aACf,EACD,EAAE,EACF;gBACC,WAAW,EAAE,IAAI;aACjB,CAAC,CAAC;YAEJ,MAAM,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;QAC/C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,qCAAqC,EAAE,GAAG,EAAE;YAChD,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAC9B;gBACC,OAAO,EAAE,MAAM;aACf,EACD,EAAE,EACF;gBACC,WAAW,EAAE,IAAI;aACjB,CAAC,CAAC;YAEJ,MAAM,CAAC,KAAK,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,iDAAiD,EAAE,GAAG,EAAE;YAC5D,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAC9B;gBACC,OAAO,EAAE,QAAQ;gBACjB,QAAQ,EAAE,IAAI;aACd,EACD,EAAE,EACF;gBACC,WAAW,EAAE,IAAI;aACjB,CAAC,CAAC;YAEJ,MAAM,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;QAC/C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,6CAA6C,EAAE,GAAG,EAAE;YACxD,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAC9B;gBACC,OAAO,EAAE,UAAU;gBACnB,QAAQ,EAAE,IAAI;aACd,EACD,EAAE,EACF;gBACC,WAAW,EAAE,IAAI;aACjB,CAAC,CAAC;YAEJ,MAAM,CAAC,KAAK,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;QAC9C,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,MAAM,EAAE,GAAG,EAAE;QAClB,IAAI,CAAC,mBAAmB,EAAE,GAAG,EAAE;YAC9B,MAAM,QAAQ,GAAG,MAAM,CAAC;YACxB,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAC9B,CAAC,mBAAmB,CAAC,EACrB;gBACC,QAAQ;gBACR,WAAW,EAAE,IAAI;aACjB,CACD,CAAC;YAEF,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;YAClD,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;YAC7C,MAAM,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,oBAAoB,EAAE,GAAG,EAAE;QAChC,IAAI,CAAC,4DAA4D,EAAE,GAAG,EAAE;YACvE,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAC9B,EAAE,OAAO,EAAE,EAAE,EAAE,EACf,EAAE,EACF;gBACC,cAAc,EAAE,WAAW;gBAC3B,cAAc,EAAE,IAAI;aACpB,CACD,CAAC;YACF,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,cAAc,EAAE;gBACtC,YAAY,EAAE,IAAI;gBAClB,SAAS,EAAE,IAAI;gBACf,YAAY,EAAE,IAAI;gBAClB,SAAS,EAAE,IAAI;aACf,CAAC,CAAC;YACH,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,yDAAyD,EAAE,GAAG,EAAE;YACpE,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAC9B,EAAE,OAAO,EAAE,EAAE,EAAE,EACf,CAAC,UAAU,CAAC,EACZ;gBACC,cAAc,EAAE,WAAW;gBAC3B,cAAc,EAAE,IAAI;aACpB,CACD,CAAC;YACF,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,cAAc,EAAE;gBACtC,YAAY,EAAE,IAAI;gBAClB,SAAS,EAAE,IAAI;gBACf,YAAY,EAAE,IAAI;gBAClB,SAAS,EAAE,IAAI;aACf,CAAC,CAAC;YACH,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,mDAAmD,EAAE,GAAG,EAAE;YAC9D,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAC9B,EAAE,OAAO,EAAE,EAAE,EAAE,EACf,EAAE,EACF;gBACC,cAAc,EAAE,CAAC,EAAE,OAAO,EAAE,WAAW,EAAE,CAAC;gBAC1C,cAAc,EAAE,IAAI;aACpB,CACD,CAAC;YACF,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,cAAc,EAAE;gBACtC,YAAY,EAAE,IAAI;gBAClB,SAAS,EAAE,IAAI;gBACf,YAAY,EAAE,IAAI;gBAClB,SAAS,EAAE,IAAI;aACf,CAAC,CAAC;YACH,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,kEAAkE,EAAE,GAAG,EAAE;YAC7E,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAC9B,EAAE,OAAO,EAAE,EAAE,EAAE,EACf,CAAC,mBAAmB,CAAC,GAAG,CAAC,EACzB;gBACC,cAAc,EAAE,CAAC,EAAE,OAAO,EAAE,WAAW,EAAE,CAAC;gBAC1C,cAAc,EAAE,IAAI;aACpB,CACD,CAAC;YACF,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,cAAc,EAAE;gBACtC,YAAY,EAAE,IAAI;gBAClB,SAAS,EAAE,IAAI;gBACf,YAAY,EAAE,IAAI;gBAClB,SAAS,EAAE,IAAI;aACf,CAAC,CAAC;YACH,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,IAAI,CAAC,mDAAmD,EAAE,GAAG,EAAE;YACnE,kFAAkF;YAClF,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAC9B,EAAE,OAAO,EAAE,EAAE,EAAE,EACf,CAAC,mBAAmB,CAAC,GAAG,CAAC,EACzB;gBACC,cAAc,EAAE,CAAC,EAAE,OAAO,EAAE,WAAW,EAAE,EAAE,EAAE,OAAO,EAAE,aAAa,EAAE,CAAC;gBACtE,cAAc,EAAE,IAAI;aACpB,CACD,CAAC;YACF,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,cAAc,EAAE;gBACtC;oBAEC,YAAY,EAAE,IAAI;oBAClB,SAAS,EAAE,IAAI;oBACf,YAAY,EAAE,IAAI;oBAClB,SAAS,EAAE,IAAI;iBACf;gBACD;oBACC,aAAa,EAAE,IAAI;oBACnB,UAAU,EAAE,IAAI;oBAChB,aAAa,EAAE,IAAI;oBACnB,UAAU,EAAE,IAAI;iBAChB;aACD,CAAC,CAAC;YACH,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,IAAI,CAAC,oCAAoC,EAAE,GAAG,EAAE;YACpD,oFAAoF;YACpF,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAC9B,EAAE,OAAO,EAAE,EAAE,EAAE,EACf,CAAC,mBAAmB,CAAC,GAAG,CAAC,EACzB;gBACC,cAAc,EAAE,CAAC,EAAE,GAAG,EAAE,UAAU,EAAE,OAAO,EAAE,WAAW,EAAE,CAAC;gBAC3D,cAAc,EAAE,IAAI;aACpB,CACD,CAAC;YACF,kDAAkD;YAClD,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,cAAc,EAAE;gBACtC,GAAG,EAAE,UAAU;gBACf,OAAO,EAAE;oBACR,YAAY,EAAE,IAAI;oBAClB,SAAS,EAAE,IAAI;oBACf,YAAY,EAAE,IAAI;oBAClB,SAAS,EAAE,IAAI;iBACf;aACD,CAAC,CAAC;YACH,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;AACJ,CAAC,CAAC,CAAC;AACH,SAAS,8BAA8B,CAAC,GAAG,QAAkB;IAG5D,MAAM,OAAO,GAAG,qBAAqB,CAAC,GAAG,QAAQ,CAAC,CAAC;IACnD,OAAO,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;AAC5C,CAAC;AAED,SAAS,sBAAsB,CAAC,MAAkB,EAAE,QAAoB;IACvE,QAAQ,GAAG;QACV,GAAG,wBAAwB;QAC3B,GAAG,QAAQ;KACX,CAAC;IAEF,OAAO,kBAAkB,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;AAC7C,CAAC;AAED,MAAM,UAAU,kBAAkB,CAAC,MAA+B,EAAE,QAAiC;IACpG,QAAQ,GAAG;QACV,GAAG,mBAAmB;QACtB,GAAG,QAAQ;KACX,CAAC;IAEF,MAAM,0BAA0B,GAAG,CAAC,EAAgB,EAAE,EAAE;QACvD,MAAM,cAAc,GAAG,EAAE,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,mBAAmB,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;QACnF,OAAO;YACN,IAAI,EAAE,EAAE,CAAC,MAAM,CAAC,MAAM;YACtB,cAAc,EAAE,cAAc,EAAE,MAAM,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,SAAS;YACnE,cAAc,EAAE,mBAAmB,CAAC,EAAE,CAAC,cAAc,CAAC;YACtD,YAAY,EAAE,EAAE,CAAC,YAAY;SAC7B,CAAC;IACH,CAAC,CAAC;IAEF,+CAA+C;IAC/C,IAAI,QAAQ,CAAC,aAAa,EAAE,CAAC;QAC5B,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,aAAa,CAAC,GAAG,CAAC,0BAA0B,CAAC,EAAE,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC,CAAC;QACrI,MAAM,CAAC,aAAa,GAAG,EAAE,CAAC;QAC1B,QAAQ,CAAC,aAAa,GAAG,EAAE,CAAC;IAC7B,CAAC;IAED,IAAI,QAAQ,CAAC,kBAAkB,EAAE,CAAC;QACjC,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,kBAAmB,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,QAAQ,CAAC,kBAAkB,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;QACtJ,OAAO,QAAQ,CAAC,kBAAkB,CAAC;QACnC,OAAO,MAAM,CAAC,kBAAkB,CAAC;IAClC,CAAC;IAED,OAAO,MAAM,CAAC,gBAAgB,CAAC;IAC/B,MAAM,CAAC,cAAc,GAAG,mBAAmB,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;IACnE,MAAM,CAAC,cAAc,GAAG,mBAAmB,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;IACnE,yBAAyB,CAAC,MAAM,CAAC,CAAC;IAElC,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;AAC1C,CAAC;AAED,MAAM,UAAU,4BAA4B,CAAC,MAAwB,EAAE,QAA0B,EAAE,OAAgB;IAClH,yBAAyB,CAAC,MAAM,CAAC,CAAC;IAClC,MAAM,CAAC,eAAe,CAAC,EAAE,GAAG,MAAM,CAAC,OAAO,EAAE,EAAE,EAAE,GAAG,QAAQ,CAAC,OAAO,EAAE,EAAE,OAAO,CAAC,CAAC;IAEhF,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,IAAI,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC,WAAW,IAAI,QAAQ,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;IACzH,IAAI,MAAM,CAAC,WAAW,EAAE,CAAC;QACxB,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,UAAU,EAAE,CAAC,EAAE,EAAE;YAC5C,MAAM,kBAAkB,GAAG,QAAQ,CAAC,WAAY,CAAC,CAAC,CAAC,CAAC;YACpD,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,OAAO,IAAI,EAAE,GAAG,UAAU,CAAC,OAAO,EAAE,EAAE,kBAAkB,CAAC,OAAO,CAAC,CAAC;YACpG,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE,EAAE,kBAAkB,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC,CAAC;QAChG,CAAC,CAAC,CAAC;IACJ,CAAC;AACF,CAAC;AAED;;;GAGG;AACH,MAAM,UAAU,yBAAyB,CAAC,CAAM;IAC/C,KAAK,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC;QACrB,IAAI,CAAC,CAAC,GAAG,CAAC,KAAK,SAAS,EAAE,CAAC;YAC1B,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;QACf,CAAC;aAAM,IAAI,OAAO,CAAC,CAAC,GAAG,CAAC,KAAK,QAAQ,EAAE,CAAC;YACvC,yBAAyB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QACnC,CAAC;IACF,CAAC;IAED,OAAO,CAAC,CAAC;AACV,CAAC;AAED,MAAM,UAAU,UAAU,CAAC,OAAe;IACzC,OAAO;QACN,MAAM,OAAO,KAAK;QAClB,MAAM,OAAO,EAAE;KACf,CAAC;AACH,CAAC;AAED,MAAM,UAAU,qBAAqB,CAAC,GAAG,QAAkB;IAC1D,OAAO,QAAQ,CAAC,MAAM,CAAC,CAAC;QACvB,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,CAAC,EAAE,EAAiB,CAAC,CAAC,CAAC;QACvF,SAAS,CAAC;AACZ,CAAC;AAED,MAAM,UAAU,MAAM,CAAC,GAAG,cAAwB;IACjD,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC;AAC7C,CAAC;AAED,MAAM,UAAU,OAAO,CAAC,GAAG,cAAwB;IAClD,IAAI,SAAS,IAAI,cAAc,CAAC,MAAM,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC;QAC5E,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC;IAED,OAAO,IAAI,CAAC,GAAG,cAAc,CAAC,CAAC;AAChC,CAAC;AAED,MAAM,UAAU,mBAAmB,CAAC,UAAmC;IACtE,IAAI,CAAC,UAAU,EAAE,CAAC;QACjB,OAAO,UAAU,CAAC;IACnB,CAAC;IAED,MAAM,UAAU,GAAgB,EAAE,CAAC;IACnC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;QACrC,UAAU,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC;IACvD,CAAC,CAAC,CAAC;IAEH,OAAO,UAAU,CAAC;AACnB,CAAC","file":"queryBuilder.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { IExpression } from '../../../../../base/common/glob.js';\nimport { join } from '../../../../../base/common/path.js';\nimport { isWindows } from '../../../../../base/common/platform.js';\nimport { URI, URI as uri } from '../../../../../base/common/uri.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { IWorkspaceContextService, toWorkspaceFolder } from '../../../../../platform/workspace/common/workspace.js';\nimport { toWorkspaceFolders } from '../../../../../platform/workspaces/common/workspaces.js';\nimport { ISearchPathsInfo, QueryBuilder } from '../../common/queryBuilder.js';\nimport { IPathService } from '../../../path/common/pathService.js';\nimport { IFileQuery, IFolderQuery, IPatternInfo, ITextQuery, QueryType } from '../../common/search.js';\nimport { TestPathService, TestEnvironmentService } from '../../../../test/browser/workbenchTestServices.js';\nimport { TestContextService } from '../../../../test/common/workbenchTestServices.js';\nimport { IEnvironmentService } from '../../../../../platform/environment/common/environment.js';\nimport { Workspace } from '../../../../../platform/workspace/test/common/testWorkspace.js';\nimport { extUriBiasedIgnorePathCase } from '../../../../../base/common/resources.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nconst DEFAULT_EDITOR_CONFIG = {};\nconst DEFAULT_USER_CONFIG = { useRipgrep: true, useIgnoreFiles: true, useGlobalIgnoreFiles: true, useParentIgnoreFiles: true };\nconst DEFAULT_QUERY_PROPS = {};\nconst DEFAULT_TEXT_QUERY_PROPS = { usePCRE2: false };\n\nsuite('QueryBuilder', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\tconst PATTERN_INFO: IPatternInfo = { pattern: 'a' };\n\tconst ROOT_1 = fixPath('/foo/root1');\n\tconst ROOT_1_URI = getUri(ROOT_1);\n\tconst ROOT_1_NAMED_FOLDER = toWorkspaceFolder(ROOT_1_URI);\n\tconst WS_CONFIG_PATH = getUri('/bar/test.code-workspace'); // location of the workspace file (not important except that it is a file URI)\n\n\tlet instantiationService: TestInstantiationService;\n\tlet queryBuilder: QueryBuilder;\n\tlet mockConfigService: TestConfigurationService;\n\tlet mockContextService: TestContextService;\n\tlet mockWorkspace: Workspace;\n\n\tsetup(() => {\n\t\tinstantiationService = new TestInstantiationService();\n\n\t\tmockConfigService = new TestConfigurationService();\n\t\tmockConfigService.setUserConfiguration('search', DEFAULT_USER_CONFIG);\n\t\tmockConfigService.setUserConfiguration('editor', DEFAULT_EDITOR_CONFIG);\n\t\tinstantiationService.stub(IConfigurationService, mockConfigService);\n\n\t\tmockContextService = new TestContextService();\n\t\tmockWorkspace = new Workspace('workspace', [toWorkspaceFolder(ROOT_1_URI)]);\n\t\tmockContextService.setWorkspace(mockWorkspace);\n\n\t\tinstantiationService.stub(IWorkspaceContextService, mockContextService);\n\t\tinstantiationService.stub(IEnvironmentService, TestEnvironmentService);\n\t\tinstantiationService.stub(IPathService, new TestPathService());\n\n\t\tqueryBuilder = instantiationService.createInstance(QueryBuilder);\n\t});\n\n\tteardown(() => {\n\t\tinstantiationService.dispose();\n\t});\n\n\ttest('simple text pattern', () => {\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(PATTERN_INFO),\n\t\t\t{\n\t\t\t\tfolderQueries: [],\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\ttest('normalize literal newlines', () => {\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text({ pattern: 'foo\\nbar', isRegExp: true }),\n\t\t\t{\n\t\t\t\tfolderQueries: [],\n\t\t\t\tcontentPattern: {\n\t\t\t\t\tpattern: 'foo\\\\nbar',\n\t\t\t\t\tisRegExp: true,\n\t\t\t\t\tisMultiline: true\n\t\t\t\t},\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text({ pattern: 'foo\\nbar', isRegExp: false }),\n\t\t\t{\n\t\t\t\tfolderQueries: [],\n\t\t\t\tcontentPattern: {\n\t\t\t\t\tpattern: 'foo\\nbar',\n\t\t\t\t\tisRegExp: false,\n\t\t\t\t\tisMultiline: true\n\t\t\t\t},\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\ttest('splits include pattern when expandPatterns enabled', () => {\n\t\tassertEqualQueries(\n\t\t\tqueryBuilder.file(\n\t\t\t\t[ROOT_1_NAMED_FOLDER],\n\t\t\t\t{ includePattern: '**/foo, **/bar', expandPatterns: true },\n\t\t\t),\n\t\t\t{\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.File,\n\t\t\t\tincludePattern: {\n\t\t\t\t\t'**/foo': true,\n\t\t\t\t\t'**/foo/**': true,\n\t\t\t\t\t'**/bar': true,\n\t\t\t\t\t'**/bar/**': true,\n\t\t\t\t}\n\t\t\t});\n\t});\n\n\ttest('does not split include pattern when expandPatterns disabled', () => {\n\t\tassertEqualQueries(\n\t\t\tqueryBuilder.file(\n\t\t\t\t[ROOT_1_NAMED_FOLDER],\n\t\t\t\t{ includePattern: '**/foo, **/bar' },\n\t\t\t),\n\t\t\t{\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.File,\n\t\t\t\tincludePattern: {\n\t\t\t\t\t'**/foo, **/bar': true\n\t\t\t\t}\n\t\t\t});\n\t});\n\n\ttest('includePattern array', () => {\n\t\tassertEqualQueries(\n\t\t\tqueryBuilder.file(\n\t\t\t\t[ROOT_1_NAMED_FOLDER],\n\t\t\t\t{ includePattern: ['**/foo', '**/bar'] },\n\t\t\t),\n\t\t\t{\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.File,\n\t\t\t\tincludePattern: {\n\t\t\t\t\t'**/foo': true,\n\t\t\t\t\t'**/bar': true\n\t\t\t\t}\n\t\t\t});\n\t});\n\n\ttest('includePattern array with expandPatterns', () => {\n\t\tassertEqualQueries(\n\t\t\tqueryBuilder.file(\n\t\t\t\t[ROOT_1_NAMED_FOLDER],\n\t\t\t\t{ includePattern: ['**/foo', '**/bar'], expandPatterns: true },\n\t\t\t),\n\t\t\t{\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.File,\n\t\t\t\tincludePattern: {\n\t\t\t\t\t'**/foo': true,\n\t\t\t\t\t'**/foo/**': true,\n\t\t\t\t\t'**/bar': true,\n\t\t\t\t\t'**/bar/**': true,\n\t\t\t\t}\n\t\t\t});\n\t});\n\n\ttest('folderResources', () => {\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI]\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{ folder: ROOT_1_URI }],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\ttest('simple exclude setting', () => {\n\t\tmockConfigService.setUserConfiguration('search', {\n\t\t\t...DEFAULT_USER_CONFIG,\n\t\t\texclude: {\n\t\t\t\t'bar/**': true,\n\t\t\t\t'foo/**': {\n\t\t\t\t\t'when': '$(basename).ts'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\texpandPatterns: true // verify that this doesn't affect patterns from configuration\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI,\n\t\t\t\t\texcludePattern: [{\n\t\t\t\t\t\tpattern: {\n\t\t\t\t\t\t\t'bar/**': true,\n\t\t\t\t\t\t\t'foo/**': {\n\t\t\t\t\t\t\t\t'when': '$(basename).ts'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\ttest('simple include', () => {\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\tincludePattern: 'bar',\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\tincludePattern: {\n\t\t\t\t\t'**/bar': true,\n\t\t\t\t\t'**/bar/**': true\n\t\t\t\t},\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\tincludePattern: 'bar'\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\tincludePattern: {\n\t\t\t\t\t'bar': true\n\t\t\t\t},\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\ttest('simple include with ./ syntax', () => {\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\tincludePattern: './bar',\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI,\n\t\t\t\t\tincludePattern: {\n\t\t\t\t\t\t'bar': true,\n\t\t\t\t\t\t'bar/**': true\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\tincludePattern: '.\\\\bar',\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI,\n\t\t\t\t\tincludePattern: {\n\t\t\t\t\t\t'bar': true,\n\t\t\t\t\t\t'bar/**': true\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\ttest('exclude setting and searchPath', () => {\n\t\tmockConfigService.setUserConfiguration('search', {\n\t\t\t...DEFAULT_USER_CONFIG,\n\t\t\texclude: {\n\t\t\t\t'foo/**/*.js': true,\n\t\t\t\t'bar/**': {\n\t\t\t\t\t'when': '$(basename).ts'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\tincludePattern: './foo',\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI,\n\t\t\t\t\tincludePattern: {\n\t\t\t\t\t\t'foo': true,\n\t\t\t\t\t\t'foo/**': true\n\t\t\t\t\t},\n\t\t\t\t\texcludePattern: [{\n\t\t\t\t\t\tpattern: {\n\t\t\t\t\t\t\t'foo/**/*.js': true,\n\t\t\t\t\t\t\t'bar/**': {\n\t\t\t\t\t\t\t\t'when': '$(basename).ts'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\ttest('multiroot exclude settings', () => {\n\t\tconst ROOT_2 = fixPath('/project/root2');\n\t\tconst ROOT_2_URI = getUri(ROOT_2);\n\t\tconst ROOT_3 = fixPath('/project/root3');\n\t\tconst ROOT_3_URI = getUri(ROOT_3);\n\t\tmockWorkspace.folders = toWorkspaceFolders([{ path: ROOT_1_URI.fsPath }, { path: ROOT_2_URI.fsPath }, { path: ROOT_3_URI.fsPath }], WS_CONFIG_PATH, extUriBiasedIgnorePathCase);\n\t\tmockWorkspace.configuration = uri.file(fixPath('/config'));\n\n\t\tmockConfigService.setUserConfiguration('search', {\n\t\t\t...DEFAULT_USER_CONFIG,\n\t\t\texclude: { 'foo/**/*.js': true }\n\t\t}, ROOT_1_URI);\n\n\t\tmockConfigService.setUserConfiguration('search', {\n\t\t\t...DEFAULT_USER_CONFIG,\n\t\t\texclude: { 'bar': true }\n\t\t}, ROOT_2_URI);\n\n\t\t// There are 3 roots, the first two have search.exclude settings, test that the correct basic query is returned\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI, ROOT_2_URI, ROOT_3_URI]\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [\n\t\t\t\t\t{ folder: ROOT_1_URI, excludePattern: makeExcludePatternFromPatterns('foo/**/*.js') },\n\t\t\t\t\t{ folder: ROOT_2_URI, excludePattern: makeExcludePatternFromPatterns('bar') },\n\t\t\t\t\t{ folder: ROOT_3_URI }\n\t\t\t\t],\n\t\t\t\ttype: QueryType.Text\n\t\t\t}\n\t\t);\n\n\t\t// Now test that it merges the root excludes when an 'include' is used\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI, ROOT_2_URI, ROOT_3_URI],\n\t\t\t\t{\n\t\t\t\t\tincludePattern: './root2/src',\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfolder: ROOT_2_URI,\n\t\t\t\t\t\tincludePattern: {\n\t\t\t\t\t\t\t'src': true,\n\t\t\t\t\t\t\t'src/**': true\n\t\t\t\t\t\t},\n\t\t\t\t\t\texcludePattern: [{\n\t\t\t\t\t\t\tpattern: { 'bar': true }\n\t\t\t\t\t\t}],\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\ttype: QueryType.Text\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('simple exclude input pattern', () => {\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\texcludePattern: [{ pattern: 'foo' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.Text,\n\t\t\t\texcludePattern: patternsToIExpression(...globalGlob('foo'))\n\t\t\t});\n\t});\n\n\ttest('file pattern trimming', () => {\n\t\tconst content = 'content';\n\t\tassertEqualQueries(\n\t\t\tqueryBuilder.file(\n\t\t\t\t[],\n\t\t\t\t{ filePattern: ` ${content} ` }\n\t\t\t),\n\t\t\t{\n\t\t\t\tfolderQueries: [],\n\t\t\t\tfilePattern: content,\n\t\t\t\ttype: QueryType.File\n\t\t\t});\n\t});\n\n\ttest('exclude ./ syntax', () => {\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\texcludePattern: [{ pattern: './bar' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI,\n\t\t\t\t\texcludePattern: makeExcludePatternFromPatterns('bar', 'bar/**'),\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\texcludePattern: [{ pattern: './bar/**/*.ts' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI,\n\t\t\t\t\texcludePattern: makeExcludePatternFromPatterns('bar/**/*.ts', 'bar/**/*.ts/**'),\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\texcludePattern: [{ pattern: '.\\\\bar\\\\**\\\\*.ts' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI,\n\t\t\t\t\texcludePattern: makeExcludePatternFromPatterns('bar/**/*.ts', 'bar/**/*.ts/**'),\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\ttest('extraFileResources', () => {\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{ extraFileResources: [getUri('/foo/bar.js')] }\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\textraFileResources: [getUri('/foo/bar.js')],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\textraFileResources: [getUri('/foo/bar.js')],\n\t\t\t\t\texcludePattern: [{ pattern: '*.js' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\texcludePattern: patternsToIExpression(...globalGlob('*.js')),\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\textraFileResources: [getUri('/foo/bar.js')],\n\t\t\t\t\tincludePattern: '*.txt',\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\tincludePattern: patternsToIExpression(...globalGlob('*.txt')),\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\tsuite('parseSearchPaths 1', () => {\n\t\ttest('simple includes', () => {\n\t\t\tfunction testSimpleIncludes(includePattern: string, expectedPatterns: string[]): void {\n\t\t\t\tconst result = queryBuilder.parseSearchPaths(includePattern);\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\t{ ...result.pattern },\n\t\t\t\t\tpatternsToIExpression(...expectedPatterns),\n\t\t\t\t\tincludePattern);\n\t\t\t\tassert.strictEqual(result.searchPaths, undefined);\n\t\t\t}\n\n\t\t\t[\n\t\t\t\t['a', ['**/a/**', '**/a']],\n\t\t\t\t['a/b', ['**/a/b', '**/a/b/**']],\n\t\t\t\t['a/b,  c', ['**/a/b', '**/c', '**/a/b/**', '**/c/**']],\n\t\t\t\t['a,.txt', ['**/a', '**/a/**', '**/*.txt', '**/*.txt/**']],\n\t\t\t\t['a,,,b', ['**/a', '**/a/**', '**/b', '**/b/**']],\n\t\t\t\t['**/a,b/**', ['**/a', '**/a/**', '**/b/**']]\n\t\t\t].forEach(([includePattern, expectedPatterns]) => testSimpleIncludes(<string>includePattern, <string[]>expectedPatterns));\n\t\t});\n\n\t\tfunction testIncludes(includePattern: string, expectedResult: ISearchPathsInfo): void {\n\t\t\tlet actual: ISearchPathsInfo;\n\t\t\ttry {\n\t\t\t\tactual = queryBuilder.parseSearchPaths(includePattern);\n\t\t\t} catch (_) {\n\t\t\t\tactual = { searchPaths: [] };\n\t\t\t}\n\n\t\t\tassertEqualSearchPathResults(\n\t\t\t\tactual,\n\t\t\t\texpectedResult,\n\t\t\t\tincludePattern);\n\t\t}\n\n\t\tfunction testIncludesDataItem([includePattern, expectedResult]: [string, ISearchPathsInfo]): void {\n\t\t\ttestIncludes(includePattern, expectedResult);\n\t\t}\n\n\t\ttest('absolute includes', () => {\n\t\t\tconst cases: [string, ISearchPathsInfo][] = [\n\t\t\t\t[\n\t\t\t\t\tfixPath('/foo/bar'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{ searchPath: getUri('/foo/bar') }]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tfixPath('/foo/bar') + ',' + 'a',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{ searchPath: getUri('/foo/bar') }],\n\t\t\t\t\t\tpattern: patternsToIExpression(...globalGlob('a'))\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tfixPath('/foo/bar') + ',' + fixPath('/1/2'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{ searchPath: getUri('/foo/bar') }, { searchPath: getUri('/1/2') }]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tfixPath('/foo/bar') + ',' + fixPath('/foo/../foo/bar/fooar/..'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri('/foo/bar')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tfixPath('/foo/bar/**/*.ts'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri('/foo/bar'),\n\t\t\t\t\t\t\tpattern: patternsToIExpression('**/*.ts', '**/*.ts/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tfixPath('/foo/bar/*a/b/c'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri('/foo/bar'),\n\t\t\t\t\t\t\tpattern: patternsToIExpression('*a/b/c', '*a/b/c/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tfixPath('/*a/b/c'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri('/'),\n\t\t\t\t\t\t\tpattern: patternsToIExpression('*a/b/c', '*a/b/c/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tfixPath('/foo/{b,c}ar'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri('/foo'),\n\t\t\t\t\t\t\tpattern: patternsToIExpression('{b,c}ar', '{b,c}ar/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t];\n\t\t\tcases.forEach(testIncludesDataItem);\n\t\t});\n\n\t\ttest('relative includes w/single root folder', () => {\n\t\t\tconst cases: [string, ISearchPathsInfo][] = [\n\t\t\t\t[\n\t\t\t\t\t'./a',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: ROOT_1_URI,\n\t\t\t\t\t\t\tpattern: patternsToIExpression('a', 'a/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./a/',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: ROOT_1_URI,\n\t\t\t\t\t\t\tpattern: patternsToIExpression('a', 'a/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./a/*b/c',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: ROOT_1_URI,\n\t\t\t\t\t\t\tpattern: patternsToIExpression('a/*b/c', 'a/*b/c/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./a/*b/c, ' + fixPath('/project/foo'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: ROOT_1_URI,\n\t\t\t\t\t\t\t\tpattern: patternsToIExpression('a/*b/c', 'a/*b/c/**')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: getUri('/project/foo')\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./a/b/,./c/d',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: ROOT_1_URI,\n\t\t\t\t\t\t\tpattern: patternsToIExpression('a/b', 'a/b/**', 'c/d', 'c/d/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'../',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri('/foo')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'..',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri('/foo')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'..\\\\bar',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri('/foo/bar')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t];\n\t\t\tcases.forEach(testIncludesDataItem);\n\t\t});\n\n\t\ttest('relative includes w/two root folders', () => {\n\t\t\tconst ROOT_2 = '/project/root2';\n\t\t\tmockWorkspace.folders = toWorkspaceFolders([{ path: ROOT_1_URI.fsPath }, { path: getUri(ROOT_2).fsPath }], WS_CONFIG_PATH, extUriBiasedIgnorePathCase);\n\t\t\tmockWorkspace.configuration = uri.file(fixPath('config'));\n\n\t\t\tconst cases: [string, ISearchPathsInfo][] = [\n\t\t\t\t[\n\t\t\t\t\t'./root1',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri(ROOT_1)\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./root2',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri(ROOT_2),\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./root1/a/**/b, ./root2/**/*.txt',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: ROOT_1_URI,\n\t\t\t\t\t\t\t\tpattern: patternsToIExpression('a/**/b', 'a/**/b/**')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: getUri(ROOT_2),\n\t\t\t\t\t\t\t\tpattern: patternsToIExpression('**/*.txt', '**/*.txt/**')\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t];\n\t\t\tcases.forEach(testIncludesDataItem);\n\t\t});\n\n\t\ttest('include ./foldername', () => {\n\t\t\tconst ROOT_2 = '/project/root2';\n\t\t\tconst ROOT_1_FOLDERNAME = 'foldername';\n\t\t\tmockWorkspace.folders = toWorkspaceFolders([{ path: ROOT_1_URI.fsPath, name: ROOT_1_FOLDERNAME }, { path: getUri(ROOT_2).fsPath }], WS_CONFIG_PATH, extUriBiasedIgnorePathCase);\n\t\t\tmockWorkspace.configuration = uri.file(fixPath('config'));\n\n\t\t\tconst cases: [string, ISearchPathsInfo][] = [\n\t\t\t\t[\n\t\t\t\t\t'./foldername',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: ROOT_1_URI\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./foldername/foo',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: ROOT_1_URI,\n\t\t\t\t\t\t\tpattern: patternsToIExpression('foo', 'foo/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t];\n\t\t\tcases.forEach(testIncludesDataItem);\n\t\t});\n\n\t\ttest('folder with slash in the name', () => {\n\t\t\tconst ROOT_2 = '/project/root2';\n\t\t\tconst ROOT_2_URI = getUri(ROOT_2);\n\t\t\tconst ROOT_1_FOLDERNAME = 'folder/one';\n\t\t\tconst ROOT_2_FOLDERNAME = 'folder/two+'; // And another regex character, #126003\n\t\t\tmockWorkspace.folders = toWorkspaceFolders([{ path: ROOT_1_URI.fsPath, name: ROOT_1_FOLDERNAME }, { path: ROOT_2_URI.fsPath, name: ROOT_2_FOLDERNAME }], WS_CONFIG_PATH, extUriBiasedIgnorePathCase);\n\t\t\tmockWorkspace.configuration = uri.file(fixPath('config'));\n\n\t\t\tconst cases: [string, ISearchPathsInfo][] = [\n\t\t\t\t[\n\t\t\t\t\t'./folder/one',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: ROOT_1_URI\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./folder/two+/foo/',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: ROOT_2_URI,\n\t\t\t\t\t\t\tpattern: patternsToIExpression('foo', 'foo/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./folder/onesomethingelse',\n\t\t\t\t\t{ searchPaths: [] }\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./folder/onesomethingelse/foo',\n\t\t\t\t\t{ searchPaths: [] }\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./folder',\n\t\t\t\t\t{ searchPaths: [] }\n\t\t\t\t]\n\t\t\t];\n\t\t\tcases.forEach(testIncludesDataItem);\n\t\t});\n\n\t\ttest('relative includes w/multiple ambiguous root folders', () => {\n\t\t\tconst ROOT_2 = '/project/rootB';\n\t\t\tconst ROOT_3 = '/otherproject/rootB';\n\t\t\tmockWorkspace.folders = toWorkspaceFolders([{ path: ROOT_1_URI.fsPath }, { path: getUri(ROOT_2).fsPath }, { path: getUri(ROOT_3).fsPath }], WS_CONFIG_PATH, extUriBiasedIgnorePathCase);\n\t\t\tmockWorkspace.configuration = uri.file(fixPath('/config'));\n\n\t\t\tconst cases: [string, ISearchPathsInfo][] = [\n\t\t\t\t[\n\t\t\t\t\t'',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: undefined\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: undefined\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./root1',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri(ROOT_1)\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./root1,./',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri(ROOT_1)\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./rootB',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: getUri(ROOT_2),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: getUri(ROOT_3),\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./rootB/a/**/b, ./rootB/b/**/*.txt',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: getUri(ROOT_2),\n\t\t\t\t\t\t\t\tpattern: patternsToIExpression('a/**/b', 'a/**/b/**', 'b/**/*.txt', 'b/**/*.txt/**')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: getUri(ROOT_3),\n\t\t\t\t\t\t\t\tpattern: patternsToIExpression('a/**/b', 'a/**/b/**', 'b/**/*.txt', 'b/**/*.txt/**')\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./root1/**/foo/, bar/',\n\t\t\t\t\t{\n\t\t\t\t\t\tpattern: patternsToIExpression('**/bar', '**/bar/**'),\n\t\t\t\t\t\tsearchPaths: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: ROOT_1_URI,\n\t\t\t\t\t\t\t\tpattern: patternsToIExpression('**/foo', '**/foo/**')\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t];\n\t\t\tcases.forEach(testIncludesDataItem);\n\t\t});\n\t});\n\n\tsuite('parseSearchPaths 2', () => {\n\n\t\tfunction testIncludes(includePattern: string, expectedResult: ISearchPathsInfo): void {\n\t\t\tassertEqualSearchPathResults(\n\t\t\t\tqueryBuilder.parseSearchPaths(includePattern),\n\t\t\t\texpectedResult,\n\t\t\t\tincludePattern);\n\t\t}\n\n\t\tfunction testIncludesDataItem([includePattern, expectedResult]: [string, ISearchPathsInfo]): void {\n\t\t\ttestIncludes(includePattern, expectedResult);\n\t\t}\n\n\t\t(isWindows ? test.skip : test)('includes with tilde', () => {\n\t\t\tconst userHome = URI.file('/');\n\t\t\tconst cases: [string, ISearchPathsInfo][] = [\n\t\t\t\t[\n\t\t\t\t\t'~/foo/bar',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{ searchPath: getUri(userHome.fsPath, '/foo/bar') }]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'~/foo/bar, a',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{ searchPath: getUri(userHome.fsPath, '/foo/bar') }],\n\t\t\t\t\t\tpattern: patternsToIExpression(...globalGlob('a'))\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tfixPath('/foo/~/bar'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{ searchPath: getUri('/foo/~/bar') }]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t];\n\t\t\tcases.forEach(testIncludesDataItem);\n\t\t});\n\t});\n\n\tsuite('smartCase', () => {\n\t\ttest('no flags -> no change', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{\n\t\t\t\t\tpattern: 'a'\n\t\t\t\t},\n\t\t\t\t[]);\n\n\t\t\tassert(!query.contentPattern.isCaseSensitive);\n\t\t});\n\n\t\ttest('maintains isCaseSensitive when smartCase not set', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{\n\t\t\t\t\tpattern: 'a',\n\t\t\t\t\tisCaseSensitive: true\n\t\t\t\t},\n\t\t\t\t[]);\n\n\t\t\tassert(query.contentPattern.isCaseSensitive);\n\t\t});\n\n\t\ttest('maintains isCaseSensitive when smartCase set', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{\n\t\t\t\t\tpattern: 'a',\n\t\t\t\t\tisCaseSensitive: true\n\t\t\t\t},\n\t\t\t\t[],\n\t\t\t\t{\n\t\t\t\t\tisSmartCase: true\n\t\t\t\t});\n\n\t\t\tassert(query.contentPattern.isCaseSensitive);\n\t\t});\n\n\t\ttest('smartCase determines not case sensitive', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{\n\t\t\t\t\tpattern: 'abcd'\n\t\t\t\t},\n\t\t\t\t[],\n\t\t\t\t{\n\t\t\t\t\tisSmartCase: true\n\t\t\t\t});\n\n\t\t\tassert(!query.contentPattern.isCaseSensitive);\n\t\t});\n\n\t\ttest('smartCase determines case sensitive', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{\n\t\t\t\t\tpattern: 'abCd'\n\t\t\t\t},\n\t\t\t\t[],\n\t\t\t\t{\n\t\t\t\t\tisSmartCase: true\n\t\t\t\t});\n\n\t\t\tassert(query.contentPattern.isCaseSensitive);\n\t\t});\n\n\t\ttest('smartCase determines not case sensitive (regex)', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{\n\t\t\t\t\tpattern: 'ab\\\\Sd',\n\t\t\t\t\tisRegExp: true\n\t\t\t\t},\n\t\t\t\t[],\n\t\t\t\t{\n\t\t\t\t\tisSmartCase: true\n\t\t\t\t});\n\n\t\t\tassert(!query.contentPattern.isCaseSensitive);\n\t\t});\n\n\t\ttest('smartCase determines case sensitive (regex)', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{\n\t\t\t\t\tpattern: 'ab[A-Z]d',\n\t\t\t\t\tisRegExp: true\n\t\t\t\t},\n\t\t\t\t[],\n\t\t\t\t{\n\t\t\t\t\tisSmartCase: true\n\t\t\t\t});\n\n\t\t\tassert(query.contentPattern.isCaseSensitive);\n\t\t});\n\t});\n\n\tsuite('file', () => {\n\t\ttest('simple file query', () => {\n\t\t\tconst cacheKey = 'asdf';\n\t\t\tconst query = queryBuilder.file(\n\t\t\t\t[ROOT_1_NAMED_FOLDER],\n\t\t\t\t{\n\t\t\t\t\tcacheKey,\n\t\t\t\t\tsortByScore: true\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tassert.strictEqual(query.folderQueries.length, 1);\n\t\t\tassert.strictEqual(query.cacheKey, cacheKey);\n\t\t\tassert(query.sortByScore);\n\t\t});\n\t});\n\n\tsuite('pattern processing', () => {\n\t\ttest('text query with comma-separated includes with no workspace', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{ pattern: `` },\n\t\t\t\t[],\n\t\t\t\t{\n\t\t\t\t\tincludePattern: '*.js,*.ts',\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t);\n\t\t\tassert.deepEqual(query.includePattern, {\n\t\t\t\t'**/*.js/**': true,\n\t\t\t\t'**/*.js': true,\n\t\t\t\t'**/*.ts/**': true,\n\t\t\t\t'**/*.ts': true,\n\t\t\t});\n\t\t\tassert.strictEqual(query.folderQueries.length, 0);\n\t\t});\n\t\ttest('text query with comma-separated includes with workspace', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{ pattern: `` },\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\tincludePattern: '*.js,*.ts',\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t);\n\t\t\tassert.deepEqual(query.includePattern, {\n\t\t\t\t'**/*.js/**': true,\n\t\t\t\t'**/*.js': true,\n\t\t\t\t'**/*.ts/**': true,\n\t\t\t\t'**/*.ts': true,\n\t\t\t});\n\t\t\tassert.strictEqual(query.folderQueries.length, 1);\n\t\t});\n\t\ttest('text query with comma-separated excludes globally', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{ pattern: `` },\n\t\t\t\t[],\n\t\t\t\t{\n\t\t\t\t\texcludePattern: [{ pattern: '*.js,*.ts' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t);\n\t\t\tassert.deepEqual(query.excludePattern, {\n\t\t\t\t'**/*.js/**': true,\n\t\t\t\t'**/*.js': true,\n\t\t\t\t'**/*.ts/**': true,\n\t\t\t\t'**/*.ts': true,\n\t\t\t});\n\t\t\tassert.strictEqual(query.folderQueries.length, 0);\n\t\t});\n\t\ttest('text query with comma-separated excludes globally in a workspace', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{ pattern: `` },\n\t\t\t\t[ROOT_1_NAMED_FOLDER.uri],\n\t\t\t\t{\n\t\t\t\t\texcludePattern: [{ pattern: '*.js,*.ts' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t);\n\t\t\tassert.deepEqual(query.excludePattern, {\n\t\t\t\t'**/*.js/**': true,\n\t\t\t\t'**/*.js': true,\n\t\t\t\t'**/*.ts/**': true,\n\t\t\t\t'**/*.ts': true,\n\t\t\t});\n\t\t\tassert.strictEqual(query.folderQueries.length, 1);\n\t\t});\n\t\ttest.skip('text query with multiple comma-separated excludes', () => {\n\t\t\t// TODO: Fix. Will require `ICommonQueryProps.excludePattern` to support an array.\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{ pattern: `` },\n\t\t\t\t[ROOT_1_NAMED_FOLDER.uri],\n\t\t\t\t{\n\t\t\t\t\texcludePattern: [{ pattern: '*.js,*.ts' }, { pattern: 'foo/*,bar/*' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t);\n\t\t\tassert.deepEqual(query.excludePattern, [\n\t\t\t\t{\n\n\t\t\t\t\t'**/*.js/**': true,\n\t\t\t\t\t'**/*.js': true,\n\t\t\t\t\t'**/*.ts/**': true,\n\t\t\t\t\t'**/*.ts': true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'**/foo/*/**': true,\n\t\t\t\t\t'**/foo/*': true,\n\t\t\t\t\t'**/bar/*/**': true,\n\t\t\t\t\t'**/bar/*': true,\n\t\t\t\t}\n\t\t\t]);\n\t\t\tassert.strictEqual(query.folderQueries.length, 1);\n\t\t});\n\t\ttest.skip('text query with base URI on exclud', () => {\n\t\t\t// TODO: Fix. Will require `ICommonQueryProps.excludePattern` to support an baseURI.\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{ pattern: `` },\n\t\t\t\t[ROOT_1_NAMED_FOLDER.uri],\n\t\t\t\t{\n\t\t\t\t\texcludePattern: [{ uri: ROOT_1_URI, pattern: '*.js,*.ts' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t);\n\t\t\t// todo: incorporate the base URI into the pattern\n\t\t\tassert.deepEqual(query.excludePattern, {\n\t\t\t\turi: ROOT_1_URI,\n\t\t\t\tpattern: {\n\t\t\t\t\t'**/*.js/**': true,\n\t\t\t\t\t'**/*.js': true,\n\t\t\t\t\t'**/*.ts/**': true,\n\t\t\t\t\t'**/*.ts': true,\n\t\t\t\t}\n\t\t\t});\n\t\t\tassert.strictEqual(query.folderQueries.length, 1);\n\t\t});\n\t});\n});\nfunction makeExcludePatternFromPatterns(...patterns: string[]): {\n\tpattern: IExpression;\n}[] | undefined {\n\tconst pattern = patternsToIExpression(...patterns);\n\treturn pattern ? [{ pattern }] : undefined;\n}\n\nfunction assertEqualTextQueries(actual: ITextQuery, expected: ITextQuery): void {\n\texpected = {\n\t\t...DEFAULT_TEXT_QUERY_PROPS,\n\t\t...expected\n\t};\n\n\treturn assertEqualQueries(actual, expected);\n}\n\nexport function assertEqualQueries(actual: ITextQuery | IFileQuery, expected: ITextQuery | IFileQuery): void {\n\texpected = {\n\t\t...DEFAULT_QUERY_PROPS,\n\t\t...expected\n\t};\n\n\tconst folderQueryToCompareObject = (fq: IFolderQuery) => {\n\t\tconst excludePattern = fq.excludePattern?.map(e => normalizeExpression(e.pattern));\n\t\treturn {\n\t\t\tpath: fq.folder.fsPath,\n\t\t\texcludePattern: excludePattern?.length ? excludePattern : undefined,\n\t\t\tincludePattern: normalizeExpression(fq.includePattern),\n\t\t\tfileEncoding: fq.fileEncoding\n\t\t};\n\t};\n\n\t// Avoid comparing URI objects, not a good idea\n\tif (expected.folderQueries) {\n\t\tassert.deepStrictEqual(actual.folderQueries.map(folderQueryToCompareObject), expected.folderQueries.map(folderQueryToCompareObject));\n\t\tactual.folderQueries = [];\n\t\texpected.folderQueries = [];\n\t}\n\n\tif (expected.extraFileResources) {\n\t\tassert.deepStrictEqual(actual.extraFileResources!.map(extraFile => extraFile.fsPath), expected.extraFileResources.map(extraFile => extraFile.fsPath));\n\t\tdelete expected.extraFileResources;\n\t\tdelete actual.extraFileResources;\n\t}\n\n\tdelete actual.usingSearchPaths;\n\tactual.includePattern = normalizeExpression(actual.includePattern);\n\tactual.excludePattern = normalizeExpression(actual.excludePattern);\n\tcleanUndefinedQueryValues(actual);\n\n\tassert.deepStrictEqual(actual, expected);\n}\n\nexport function assertEqualSearchPathResults(actual: ISearchPathsInfo, expected: ISearchPathsInfo, message?: string): void {\n\tcleanUndefinedQueryValues(actual);\n\tassert.deepStrictEqual({ ...actual.pattern }, { ...expected.pattern }, message);\n\n\tassert.strictEqual(actual.searchPaths && actual.searchPaths.length, expected.searchPaths && expected.searchPaths.length);\n\tif (actual.searchPaths) {\n\t\tactual.searchPaths.forEach((searchPath, i) => {\n\t\t\tconst expectedSearchPath = expected.searchPaths![i];\n\t\t\tassert.deepStrictEqual(searchPath.pattern && { ...searchPath.pattern }, expectedSearchPath.pattern);\n\t\t\tassert.strictEqual(searchPath.searchPath.toString(), expectedSearchPath.searchPath.toString());\n\t\t});\n\t}\n}\n\n/**\n * Recursively delete all undefined property values from the search query, to make it easier to\n * assert.deepStrictEqual with some expected object.\n */\nexport function cleanUndefinedQueryValues(q: any): void {\n\tfor (const key in q) {\n\t\tif (q[key] === undefined) {\n\t\t\tdelete q[key];\n\t\t} else if (typeof q[key] === 'object') {\n\t\t\tcleanUndefinedQueryValues(q[key]);\n\t\t}\n\t}\n\n\treturn q;\n}\n\nexport function globalGlob(pattern: string): string[] {\n\treturn [\n\t\t`**/${pattern}/**`,\n\t\t`**/${pattern}`\n\t];\n}\n\nexport function patternsToIExpression(...patterns: string[]): IExpression | undefined {\n\treturn patterns.length ?\n\t\tpatterns.reduce((glob, cur) => { glob[cur] = true; return glob; }, {} as IExpression) :\n\t\tundefined;\n}\n\nexport function getUri(...slashPathParts: string[]): uri {\n\treturn uri.file(fixPath(...slashPathParts));\n}\n\nexport function fixPath(...slashPathParts: string[]): string {\n\tif (isWindows && slashPathParts.length && !slashPathParts[0].match(/^c:/i)) {\n\t\tslashPathParts.unshift('c:');\n\t}\n\n\treturn join(...slashPathParts);\n}\n\nexport function normalizeExpression(expression: IExpression | undefined): IExpression | undefined {\n\tif (!expression) {\n\t\treturn expression;\n\t}\n\n\tconst normalized: IExpression = {};\n\tObject.keys(expression).forEach(key => {\n\t\tnormalized[key.replace(/\\\\/g, '/')] = expression[key];\n\t});\n\n\treturn normalized;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { IExpression } from '../../../../../base/common/glob.js';\nimport { join } from '../../../../../base/common/path.js';\nimport { isWindows } from '../../../../../base/common/platform.js';\nimport { URI, URI as uri } from '../../../../../base/common/uri.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { IWorkspaceContextService, toWorkspaceFolder } from '../../../../../platform/workspace/common/workspace.js';\nimport { toWorkspaceFolders } from '../../../../../platform/workspaces/common/workspaces.js';\nimport { ISearchPathsInfo, QueryBuilder } from '../../common/queryBuilder.js';\nimport { IPathService } from '../../../path/common/pathService.js';\nimport { IFileQuery, IFolderQuery, IPatternInfo, ITextQuery, QueryType } from '../../common/search.js';\nimport { TestPathService, TestEnvironmentService } from '../../../../test/browser/workbenchTestServices.js';\nimport { TestContextService } from '../../../../test/common/workbenchTestServices.js';\nimport { IEnvironmentService } from '../../../../../platform/environment/common/environment.js';\nimport { Workspace } from '../../../../../platform/workspace/test/common/testWorkspace.js';\nimport { extUriBiasedIgnorePathCase } from '../../../../../base/common/resources.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nconst DEFAULT_EDITOR_CONFIG = {};\nconst DEFAULT_USER_CONFIG = { useRipgrep: true, useIgnoreFiles: true, useGlobalIgnoreFiles: true, useParentIgnoreFiles: true };\nconst DEFAULT_QUERY_PROPS = {};\nconst DEFAULT_TEXT_QUERY_PROPS = { usePCRE2: false };\n\nsuite('QueryBuilder', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\tconst PATTERN_INFO: IPatternInfo = { pattern: 'a' };\n\tconst ROOT_1 = fixPath('/foo/root1');\n\tconst ROOT_1_URI = getUri(ROOT_1);\n\tconst ROOT_1_NAMED_FOLDER = toWorkspaceFolder(ROOT_1_URI);\n\tconst WS_CONFIG_PATH = getUri('/bar/test.code-workspace'); // location of the workspace file (not important except that it is a file URI)\n\n\tlet instantiationService: TestInstantiationService;\n\tlet queryBuilder: QueryBuilder;\n\tlet mockConfigService: TestConfigurationService;\n\tlet mockContextService: TestContextService;\n\tlet mockWorkspace: Workspace;\n\n\tsetup(() => {\n\t\tinstantiationService = new TestInstantiationService();\n\n\t\tmockConfigService = new TestConfigurationService();\n\t\tmockConfigService.setUserConfiguration('search', DEFAULT_USER_CONFIG);\n\t\tmockConfigService.setUserConfiguration('editor', DEFAULT_EDITOR_CONFIG);\n\t\tinstantiationService.stub(IConfigurationService, mockConfigService);\n\n\t\tmockContextService = new TestContextService();\n\t\tmockWorkspace = new Workspace('workspace', [toWorkspaceFolder(ROOT_1_URI)]);\n\t\tmockContextService.setWorkspace(mockWorkspace);\n\n\t\tinstantiationService.stub(IWorkspaceContextService, mockContextService);\n\t\tinstantiationService.stub(IEnvironmentService, TestEnvironmentService);\n\t\tinstantiationService.stub(IPathService, new TestPathService());\n\n\t\tqueryBuilder = instantiationService.createInstance(QueryBuilder);\n\t});\n\n\tteardown(() => {\n\t\tinstantiationService.dispose();\n\t});\n\n\ttest('simple text pattern', () => {\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(PATTERN_INFO),\n\t\t\t{\n\t\t\t\tfolderQueries: [],\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\ttest('normalize literal newlines', () => {\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text({ pattern: 'foo\\nbar', isRegExp: true }),\n\t\t\t{\n\t\t\t\tfolderQueries: [],\n\t\t\t\tcontentPattern: {\n\t\t\t\t\tpattern: 'foo\\\\nbar',\n\t\t\t\t\tisRegExp: true,\n\t\t\t\t\tisMultiline: true\n\t\t\t\t},\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text({ pattern: 'foo\\nbar', isRegExp: false }),\n\t\t\t{\n\t\t\t\tfolderQueries: [],\n\t\t\t\tcontentPattern: {\n\t\t\t\t\tpattern: 'foo\\nbar',\n\t\t\t\t\tisRegExp: false,\n\t\t\t\t\tisMultiline: true\n\t\t\t\t},\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\ttest('splits include pattern when expandPatterns enabled', () => {\n\t\tassertEqualQueries(\n\t\t\tqueryBuilder.file(\n\t\t\t\t[ROOT_1_NAMED_FOLDER],\n\t\t\t\t{ includePattern: '**/foo, **/bar', expandPatterns: true },\n\t\t\t),\n\t\t\t{\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.File,\n\t\t\t\tincludePattern: {\n\t\t\t\t\t'**/foo': true,\n\t\t\t\t\t'**/foo/**': true,\n\t\t\t\t\t'**/bar': true,\n\t\t\t\t\t'**/bar/**': true,\n\t\t\t\t}\n\t\t\t});\n\t});\n\n\ttest('does not split include pattern when expandPatterns disabled', () => {\n\t\tassertEqualQueries(\n\t\t\tqueryBuilder.file(\n\t\t\t\t[ROOT_1_NAMED_FOLDER],\n\t\t\t\t{ includePattern: '**/foo, **/bar' },\n\t\t\t),\n\t\t\t{\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.File,\n\t\t\t\tincludePattern: {\n\t\t\t\t\t'**/foo, **/bar': true\n\t\t\t\t}\n\t\t\t});\n\t});\n\n\ttest('includePattern array', () => {\n\t\tassertEqualQueries(\n\t\t\tqueryBuilder.file(\n\t\t\t\t[ROOT_1_NAMED_FOLDER],\n\t\t\t\t{ includePattern: ['**/foo', '**/bar'] },\n\t\t\t),\n\t\t\t{\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.File,\n\t\t\t\tincludePattern: {\n\t\t\t\t\t'**/foo': true,\n\t\t\t\t\t'**/bar': true\n\t\t\t\t}\n\t\t\t});\n\t});\n\n\ttest('includePattern array with expandPatterns', () => {\n\t\tassertEqualQueries(\n\t\t\tqueryBuilder.file(\n\t\t\t\t[ROOT_1_NAMED_FOLDER],\n\t\t\t\t{ includePattern: ['**/foo', '**/bar'], expandPatterns: true },\n\t\t\t),\n\t\t\t{\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.File,\n\t\t\t\tincludePattern: {\n\t\t\t\t\t'**/foo': true,\n\t\t\t\t\t'**/foo/**': true,\n\t\t\t\t\t'**/bar': true,\n\t\t\t\t\t'**/bar/**': true,\n\t\t\t\t}\n\t\t\t});\n\t});\n\n\ttest('folderResources', () => {\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI]\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{ folder: ROOT_1_URI }],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\ttest('simple exclude setting', () => {\n\t\tmockConfigService.setUserConfiguration('search', {\n\t\t\t...DEFAULT_USER_CONFIG,\n\t\t\texclude: {\n\t\t\t\t'bar/**': true,\n\t\t\t\t'foo/**': {\n\t\t\t\t\t'when': '$(basename).ts'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\texpandPatterns: true // verify that this doesn't affect patterns from configuration\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI,\n\t\t\t\t\texcludePattern: [{\n\t\t\t\t\t\tpattern: {\n\t\t\t\t\t\t\t'bar/**': true,\n\t\t\t\t\t\t\t'foo/**': {\n\t\t\t\t\t\t\t\t'when': '$(basename).ts'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\ttest('simple include', () => {\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\tincludePattern: 'bar',\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\tincludePattern: {\n\t\t\t\t\t'**/bar': true,\n\t\t\t\t\t'**/bar/**': true\n\t\t\t\t},\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\tincludePattern: 'bar'\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\tincludePattern: {\n\t\t\t\t\t'bar': true\n\t\t\t\t},\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\ttest('simple include with ./ syntax', () => {\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\tincludePattern: './bar',\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI,\n\t\t\t\t\tincludePattern: {\n\t\t\t\t\t\t'bar': true,\n\t\t\t\t\t\t'bar/**': true\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\tincludePattern: '.\\\\bar',\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI,\n\t\t\t\t\tincludePattern: {\n\t\t\t\t\t\t'bar': true,\n\t\t\t\t\t\t'bar/**': true\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\ttest('exclude setting and searchPath', () => {\n\t\tmockConfigService.setUserConfiguration('search', {\n\t\t\t...DEFAULT_USER_CONFIG,\n\t\t\texclude: {\n\t\t\t\t'foo/**/*.js': true,\n\t\t\t\t'bar/**': {\n\t\t\t\t\t'when': '$(basename).ts'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\tincludePattern: './foo',\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI,\n\t\t\t\t\tincludePattern: {\n\t\t\t\t\t\t'foo': true,\n\t\t\t\t\t\t'foo/**': true\n\t\t\t\t\t},\n\t\t\t\t\texcludePattern: [{\n\t\t\t\t\t\tpattern: {\n\t\t\t\t\t\t\t'foo/**/*.js': true,\n\t\t\t\t\t\t\t'bar/**': {\n\t\t\t\t\t\t\t\t'when': '$(basename).ts'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\ttest('multiroot exclude settings', () => {\n\t\tconst ROOT_2 = fixPath('/project/root2');\n\t\tconst ROOT_2_URI = getUri(ROOT_2);\n\t\tconst ROOT_3 = fixPath('/project/root3');\n\t\tconst ROOT_3_URI = getUri(ROOT_3);\n\t\tmockWorkspace.folders = toWorkspaceFolders([{ path: ROOT_1_URI.fsPath }, { path: ROOT_2_URI.fsPath }, { path: ROOT_3_URI.fsPath }], WS_CONFIG_PATH, extUriBiasedIgnorePathCase);\n\t\tmockWorkspace.configuration = uri.file(fixPath('/config'));\n\n\t\tmockConfigService.setUserConfiguration('search', {\n\t\t\t...DEFAULT_USER_CONFIG,\n\t\t\texclude: { 'foo/**/*.js': true }\n\t\t}, ROOT_1_URI);\n\n\t\tmockConfigService.setUserConfiguration('search', {\n\t\t\t...DEFAULT_USER_CONFIG,\n\t\t\texclude: { 'bar': true }\n\t\t}, ROOT_2_URI);\n\n\t\t// There are 3 roots, the first two have search.exclude settings, test that the correct basic query is returned\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI, ROOT_2_URI, ROOT_3_URI]\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [\n\t\t\t\t\t{ folder: ROOT_1_URI, excludePattern: makeExcludePatternFromPatterns('foo/**/*.js') },\n\t\t\t\t\t{ folder: ROOT_2_URI, excludePattern: makeExcludePatternFromPatterns('bar') },\n\t\t\t\t\t{ folder: ROOT_3_URI }\n\t\t\t\t],\n\t\t\t\ttype: QueryType.Text\n\t\t\t}\n\t\t);\n\n\t\t// Now test that it merges the root excludes when an 'include' is used\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI, ROOT_2_URI, ROOT_3_URI],\n\t\t\t\t{\n\t\t\t\t\tincludePattern: './root2/src',\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfolder: ROOT_2_URI,\n\t\t\t\t\t\tincludePattern: {\n\t\t\t\t\t\t\t'src': true,\n\t\t\t\t\t\t\t'src/**': true\n\t\t\t\t\t\t},\n\t\t\t\t\t\texcludePattern: [{\n\t\t\t\t\t\t\tpattern: { 'bar': true }\n\t\t\t\t\t\t}],\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\ttype: QueryType.Text\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('simple exclude input pattern', () => {\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\texcludePattern: [{ pattern: 'foo' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.Text,\n\t\t\t\texcludePattern: patternsToIExpression(...globalGlob('foo'))\n\t\t\t});\n\t});\n\n\ttest('file pattern trimming', () => {\n\t\tconst content = 'content';\n\t\tassertEqualQueries(\n\t\t\tqueryBuilder.file(\n\t\t\t\t[],\n\t\t\t\t{ filePattern: ` ${content} ` }\n\t\t\t),\n\t\t\t{\n\t\t\t\tfolderQueries: [],\n\t\t\t\tfilePattern: content,\n\t\t\t\ttype: QueryType.File\n\t\t\t});\n\t});\n\n\ttest('exclude ./ syntax', () => {\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\texcludePattern: [{ pattern: './bar' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI,\n\t\t\t\t\texcludePattern: makeExcludePatternFromPatterns('bar', 'bar/**'),\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\texcludePattern: [{ pattern: './bar/**/*.ts' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI,\n\t\t\t\t\texcludePattern: makeExcludePatternFromPatterns('bar/**/*.ts', 'bar/**/*.ts/**'),\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\texcludePattern: [{ pattern: '.\\\\bar\\\\**\\\\*.ts' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI,\n\t\t\t\t\texcludePattern: makeExcludePatternFromPatterns('bar/**/*.ts', 'bar/**/*.ts/**'),\n\t\t\t\t}],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\ttest('extraFileResources', () => {\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{ extraFileResources: [getUri('/foo/bar.js')] }\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\textraFileResources: [getUri('/foo/bar.js')],\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\textraFileResources: [getUri('/foo/bar.js')],\n\t\t\t\t\texcludePattern: [{ pattern: '*.js' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\texcludePattern: patternsToIExpression(...globalGlob('*.js')),\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\n\t\tassertEqualTextQueries(\n\t\t\tqueryBuilder.text(\n\t\t\t\tPATTERN_INFO,\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\textraFileResources: [getUri('/foo/bar.js')],\n\t\t\t\t\tincludePattern: '*.txt',\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcontentPattern: PATTERN_INFO,\n\t\t\t\tfolderQueries: [{\n\t\t\t\t\tfolder: ROOT_1_URI\n\t\t\t\t}],\n\t\t\t\tincludePattern: patternsToIExpression(...globalGlob('*.txt')),\n\t\t\t\ttype: QueryType.Text\n\t\t\t});\n\t});\n\n\tsuite('parseSearchPaths 1', () => {\n\t\ttest('simple includes', () => {\n\t\t\tfunction testSimpleIncludes(includePattern: string, expectedPatterns: string[]): void {\n\t\t\t\tconst result = queryBuilder.parseSearchPaths(includePattern);\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\t{ ...result.pattern },\n\t\t\t\t\tpatternsToIExpression(...expectedPatterns),\n\t\t\t\t\tincludePattern);\n\t\t\t\tassert.strictEqual(result.searchPaths, undefined);\n\t\t\t}\n\n\t\t\t[\n\t\t\t\t['a', ['**/a/**', '**/a']],\n\t\t\t\t['a/b', ['**/a/b', '**/a/b/**']],\n\t\t\t\t['a/b,  c', ['**/a/b', '**/c', '**/a/b/**', '**/c/**']],\n\t\t\t\t['a,.txt', ['**/a', '**/a/**', '**/*.txt', '**/*.txt/**']],\n\t\t\t\t['a,,,b', ['**/a', '**/a/**', '**/b', '**/b/**']],\n\t\t\t\t['**/a,b/**', ['**/a', '**/a/**', '**/b/**']]\n\t\t\t].forEach(([includePattern, expectedPatterns]) => testSimpleIncludes(<string>includePattern, <string[]>expectedPatterns));\n\t\t});\n\n\t\tfunction testIncludes(includePattern: string, expectedResult: ISearchPathsInfo): void {\n\t\t\tlet actual: ISearchPathsInfo;\n\t\t\ttry {\n\t\t\t\tactual = queryBuilder.parseSearchPaths(includePattern);\n\t\t\t} catch (_) {\n\t\t\t\tactual = { searchPaths: [] };\n\t\t\t}\n\n\t\t\tassertEqualSearchPathResults(\n\t\t\t\tactual,\n\t\t\t\texpectedResult,\n\t\t\t\tincludePattern);\n\t\t}\n\n\t\tfunction testIncludesDataItem([includePattern, expectedResult]: [string, ISearchPathsInfo]): void {\n\t\t\ttestIncludes(includePattern, expectedResult);\n\t\t}\n\n\t\ttest('absolute includes', () => {\n\t\t\tconst cases: [string, ISearchPathsInfo][] = [\n\t\t\t\t[\n\t\t\t\t\tfixPath('/foo/bar'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{ searchPath: getUri('/foo/bar') }]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tfixPath('/foo/bar') + ',' + 'a',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{ searchPath: getUri('/foo/bar') }],\n\t\t\t\t\t\tpattern: patternsToIExpression(...globalGlob('a'))\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tfixPath('/foo/bar') + ',' + fixPath('/1/2'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{ searchPath: getUri('/foo/bar') }, { searchPath: getUri('/1/2') }]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tfixPath('/foo/bar') + ',' + fixPath('/foo/../foo/bar/fooar/..'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri('/foo/bar')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tfixPath('/foo/bar/**/*.ts'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri('/foo/bar'),\n\t\t\t\t\t\t\tpattern: patternsToIExpression('**/*.ts', '**/*.ts/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tfixPath('/foo/bar/*a/b/c'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri('/foo/bar'),\n\t\t\t\t\t\t\tpattern: patternsToIExpression('*a/b/c', '*a/b/c/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tfixPath('/*a/b/c'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri('/'),\n\t\t\t\t\t\t\tpattern: patternsToIExpression('*a/b/c', '*a/b/c/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tfixPath('/foo/{b,c}ar'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri('/foo'),\n\t\t\t\t\t\t\tpattern: patternsToIExpression('{b,c}ar', '{b,c}ar/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t];\n\t\t\tcases.forEach(testIncludesDataItem);\n\t\t});\n\n\t\ttest('relative includes w/single root folder', () => {\n\t\t\tconst cases: [string, ISearchPathsInfo][] = [\n\t\t\t\t[\n\t\t\t\t\t'./a',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: ROOT_1_URI,\n\t\t\t\t\t\t\tpattern: patternsToIExpression('a', 'a/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./a/',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: ROOT_1_URI,\n\t\t\t\t\t\t\tpattern: patternsToIExpression('a', 'a/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./a/*b/c',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: ROOT_1_URI,\n\t\t\t\t\t\t\tpattern: patternsToIExpression('a/*b/c', 'a/*b/c/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./a/*b/c, ' + fixPath('/project/foo'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: ROOT_1_URI,\n\t\t\t\t\t\t\t\tpattern: patternsToIExpression('a/*b/c', 'a/*b/c/**')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: getUri('/project/foo')\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./a/b/,./c/d',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: ROOT_1_URI,\n\t\t\t\t\t\t\tpattern: patternsToIExpression('a/b', 'a/b/**', 'c/d', 'c/d/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'../',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri('/foo')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'..',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri('/foo')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'..\\\\bar',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri('/foo/bar')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t];\n\t\t\tcases.forEach(testIncludesDataItem);\n\t\t});\n\n\t\ttest('relative includes w/two root folders', () => {\n\t\t\tconst ROOT_2 = '/project/root2';\n\t\t\tmockWorkspace.folders = toWorkspaceFolders([{ path: ROOT_1_URI.fsPath }, { path: getUri(ROOT_2).fsPath }], WS_CONFIG_PATH, extUriBiasedIgnorePathCase);\n\t\t\tmockWorkspace.configuration = uri.file(fixPath('config'));\n\n\t\t\tconst cases: [string, ISearchPathsInfo][] = [\n\t\t\t\t[\n\t\t\t\t\t'./root1',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri(ROOT_1)\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./root2',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri(ROOT_2),\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./root1/a/**/b, ./root2/**/*.txt',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: ROOT_1_URI,\n\t\t\t\t\t\t\t\tpattern: patternsToIExpression('a/**/b', 'a/**/b/**')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: getUri(ROOT_2),\n\t\t\t\t\t\t\t\tpattern: patternsToIExpression('**/*.txt', '**/*.txt/**')\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t];\n\t\t\tcases.forEach(testIncludesDataItem);\n\t\t});\n\n\t\ttest('include ./foldername', () => {\n\t\t\tconst ROOT_2 = '/project/root2';\n\t\t\tconst ROOT_1_FOLDERNAME = 'foldername';\n\t\t\tmockWorkspace.folders = toWorkspaceFolders([{ path: ROOT_1_URI.fsPath, name: ROOT_1_FOLDERNAME }, { path: getUri(ROOT_2).fsPath }], WS_CONFIG_PATH, extUriBiasedIgnorePathCase);\n\t\t\tmockWorkspace.configuration = uri.file(fixPath('config'));\n\n\t\t\tconst cases: [string, ISearchPathsInfo][] = [\n\t\t\t\t[\n\t\t\t\t\t'./foldername',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: ROOT_1_URI\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./foldername/foo',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: ROOT_1_URI,\n\t\t\t\t\t\t\tpattern: patternsToIExpression('foo', 'foo/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t];\n\t\t\tcases.forEach(testIncludesDataItem);\n\t\t});\n\n\t\ttest('folder with slash in the name', () => {\n\t\t\tconst ROOT_2 = '/project/root2';\n\t\t\tconst ROOT_2_URI = getUri(ROOT_2);\n\t\t\tconst ROOT_1_FOLDERNAME = 'folder/one';\n\t\t\tconst ROOT_2_FOLDERNAME = 'folder/two+'; // And another regex character, #126003\n\t\t\tmockWorkspace.folders = toWorkspaceFolders([{ path: ROOT_1_URI.fsPath, name: ROOT_1_FOLDERNAME }, { path: ROOT_2_URI.fsPath, name: ROOT_2_FOLDERNAME }], WS_CONFIG_PATH, extUriBiasedIgnorePathCase);\n\t\t\tmockWorkspace.configuration = uri.file(fixPath('config'));\n\n\t\t\tconst cases: [string, ISearchPathsInfo][] = [\n\t\t\t\t[\n\t\t\t\t\t'./folder/one',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: ROOT_1_URI\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./folder/two+/foo/',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: ROOT_2_URI,\n\t\t\t\t\t\t\tpattern: patternsToIExpression('foo', 'foo/**')\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./folder/onesomethingelse',\n\t\t\t\t\t{ searchPaths: [] }\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./folder/onesomethingelse/foo',\n\t\t\t\t\t{ searchPaths: [] }\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./folder',\n\t\t\t\t\t{ searchPaths: [] }\n\t\t\t\t]\n\t\t\t];\n\t\t\tcases.forEach(testIncludesDataItem);\n\t\t});\n\n\t\ttest('relative includes w/multiple ambiguous root folders', () => {\n\t\t\tconst ROOT_2 = '/project/rootB';\n\t\t\tconst ROOT_3 = '/otherproject/rootB';\n\t\t\tmockWorkspace.folders = toWorkspaceFolders([{ path: ROOT_1_URI.fsPath }, { path: getUri(ROOT_2).fsPath }, { path: getUri(ROOT_3).fsPath }], WS_CONFIG_PATH, extUriBiasedIgnorePathCase);\n\t\t\tmockWorkspace.configuration = uri.file(fixPath('/config'));\n\n\t\t\tconst cases: [string, ISearchPathsInfo][] = [\n\t\t\t\t[\n\t\t\t\t\t'',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: undefined\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: undefined\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./root1',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri(ROOT_1)\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./root1,./',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{\n\t\t\t\t\t\t\tsearchPath: getUri(ROOT_1)\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./rootB',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: getUri(ROOT_2),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: getUri(ROOT_3),\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./rootB/a/**/b, ./rootB/b/**/*.txt',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: getUri(ROOT_2),\n\t\t\t\t\t\t\t\tpattern: patternsToIExpression('a/**/b', 'a/**/b/**', 'b/**/*.txt', 'b/**/*.txt/**')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: getUri(ROOT_3),\n\t\t\t\t\t\t\t\tpattern: patternsToIExpression('a/**/b', 'a/**/b/**', 'b/**/*.txt', 'b/**/*.txt/**')\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'./root1/**/foo/, bar/',\n\t\t\t\t\t{\n\t\t\t\t\t\tpattern: patternsToIExpression('**/bar', '**/bar/**'),\n\t\t\t\t\t\tsearchPaths: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsearchPath: ROOT_1_URI,\n\t\t\t\t\t\t\t\tpattern: patternsToIExpression('**/foo', '**/foo/**')\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t];\n\t\t\tcases.forEach(testIncludesDataItem);\n\t\t});\n\t});\n\n\tsuite('parseSearchPaths 2', () => {\n\n\t\tfunction testIncludes(includePattern: string, expectedResult: ISearchPathsInfo): void {\n\t\t\tassertEqualSearchPathResults(\n\t\t\t\tqueryBuilder.parseSearchPaths(includePattern),\n\t\t\t\texpectedResult,\n\t\t\t\tincludePattern);\n\t\t}\n\n\t\tfunction testIncludesDataItem([includePattern, expectedResult]: [string, ISearchPathsInfo]): void {\n\t\t\ttestIncludes(includePattern, expectedResult);\n\t\t}\n\n\t\t(isWindows ? test.skip : test)('includes with tilde', () => {\n\t\t\tconst userHome = URI.file('/');\n\t\t\tconst cases: [string, ISearchPathsInfo][] = [\n\t\t\t\t[\n\t\t\t\t\t'~/foo/bar',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{ searchPath: getUri(userHome.fsPath, '/foo/bar') }]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t'~/foo/bar, a',\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{ searchPath: getUri(userHome.fsPath, '/foo/bar') }],\n\t\t\t\t\t\tpattern: patternsToIExpression(...globalGlob('a'))\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\tfixPath('/foo/~/bar'),\n\t\t\t\t\t{\n\t\t\t\t\t\tsearchPaths: [{ searchPath: getUri('/foo/~/bar') }]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t];\n\t\t\tcases.forEach(testIncludesDataItem);\n\t\t});\n\t});\n\n\tsuite('smartCase', () => {\n\t\ttest('no flags -> no change', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{\n\t\t\t\t\tpattern: 'a'\n\t\t\t\t},\n\t\t\t\t[]);\n\n\t\t\tassert(!query.contentPattern.isCaseSensitive);\n\t\t});\n\n\t\ttest('maintains isCaseSensitive when smartCase not set', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{\n\t\t\t\t\tpattern: 'a',\n\t\t\t\t\tisCaseSensitive: true\n\t\t\t\t},\n\t\t\t\t[]);\n\n\t\t\tassert(query.contentPattern.isCaseSensitive);\n\t\t});\n\n\t\ttest('maintains isCaseSensitive when smartCase set', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{\n\t\t\t\t\tpattern: 'a',\n\t\t\t\t\tisCaseSensitive: true\n\t\t\t\t},\n\t\t\t\t[],\n\t\t\t\t{\n\t\t\t\t\tisSmartCase: true\n\t\t\t\t});\n\n\t\t\tassert(query.contentPattern.isCaseSensitive);\n\t\t});\n\n\t\ttest('smartCase determines not case sensitive', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{\n\t\t\t\t\tpattern: 'abcd'\n\t\t\t\t},\n\t\t\t\t[],\n\t\t\t\t{\n\t\t\t\t\tisSmartCase: true\n\t\t\t\t});\n\n\t\t\tassert(!query.contentPattern.isCaseSensitive);\n\t\t});\n\n\t\ttest('smartCase determines case sensitive', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{\n\t\t\t\t\tpattern: 'abCd'\n\t\t\t\t},\n\t\t\t\t[],\n\t\t\t\t{\n\t\t\t\t\tisSmartCase: true\n\t\t\t\t});\n\n\t\t\tassert(query.contentPattern.isCaseSensitive);\n\t\t});\n\n\t\ttest('smartCase determines not case sensitive (regex)', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{\n\t\t\t\t\tpattern: 'ab\\\\Sd',\n\t\t\t\t\tisRegExp: true\n\t\t\t\t},\n\t\t\t\t[],\n\t\t\t\t{\n\t\t\t\t\tisSmartCase: true\n\t\t\t\t});\n\n\t\t\tassert(!query.contentPattern.isCaseSensitive);\n\t\t});\n\n\t\ttest('smartCase determines case sensitive (regex)', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{\n\t\t\t\t\tpattern: 'ab[A-Z]d',\n\t\t\t\t\tisRegExp: true\n\t\t\t\t},\n\t\t\t\t[],\n\t\t\t\t{\n\t\t\t\t\tisSmartCase: true\n\t\t\t\t});\n\n\t\t\tassert(query.contentPattern.isCaseSensitive);\n\t\t});\n\t});\n\n\tsuite('file', () => {\n\t\ttest('simple file query', () => {\n\t\t\tconst cacheKey = 'asdf';\n\t\t\tconst query = queryBuilder.file(\n\t\t\t\t[ROOT_1_NAMED_FOLDER],\n\t\t\t\t{\n\t\t\t\t\tcacheKey,\n\t\t\t\t\tsortByScore: true\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tassert.strictEqual(query.folderQueries.length, 1);\n\t\t\tassert.strictEqual(query.cacheKey, cacheKey);\n\t\t\tassert(query.sortByScore);\n\t\t});\n\t});\n\n\tsuite('pattern processing', () => {\n\t\ttest('text query with comma-separated includes with no workspace', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{ pattern: `` },\n\t\t\t\t[],\n\t\t\t\t{\n\t\t\t\t\tincludePattern: '*.js,*.ts',\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t);\n\t\t\tassert.deepEqual(query.includePattern, {\n\t\t\t\t'**/*.js/**': true,\n\t\t\t\t'**/*.js': true,\n\t\t\t\t'**/*.ts/**': true,\n\t\t\t\t'**/*.ts': true,\n\t\t\t});\n\t\t\tassert.strictEqual(query.folderQueries.length, 0);\n\t\t});\n\t\ttest('text query with comma-separated includes with workspace', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{ pattern: `` },\n\t\t\t\t[ROOT_1_URI],\n\t\t\t\t{\n\t\t\t\t\tincludePattern: '*.js,*.ts',\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t);\n\t\t\tassert.deepEqual(query.includePattern, {\n\t\t\t\t'**/*.js/**': true,\n\t\t\t\t'**/*.js': true,\n\t\t\t\t'**/*.ts/**': true,\n\t\t\t\t'**/*.ts': true,\n\t\t\t});\n\t\t\tassert.strictEqual(query.folderQueries.length, 1);\n\t\t});\n\t\ttest('text query with comma-separated excludes globally', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{ pattern: `` },\n\t\t\t\t[],\n\t\t\t\t{\n\t\t\t\t\texcludePattern: [{ pattern: '*.js,*.ts' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t);\n\t\t\tassert.deepEqual(query.excludePattern, {\n\t\t\t\t'**/*.js/**': true,\n\t\t\t\t'**/*.js': true,\n\t\t\t\t'**/*.ts/**': true,\n\t\t\t\t'**/*.ts': true,\n\t\t\t});\n\t\t\tassert.strictEqual(query.folderQueries.length, 0);\n\t\t});\n\t\ttest('text query with comma-separated excludes globally in a workspace', () => {\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{ pattern: `` },\n\t\t\t\t[ROOT_1_NAMED_FOLDER.uri],\n\t\t\t\t{\n\t\t\t\t\texcludePattern: [{ pattern: '*.js,*.ts' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t);\n\t\t\tassert.deepEqual(query.excludePattern, {\n\t\t\t\t'**/*.js/**': true,\n\t\t\t\t'**/*.js': true,\n\t\t\t\t'**/*.ts/**': true,\n\t\t\t\t'**/*.ts': true,\n\t\t\t});\n\t\t\tassert.strictEqual(query.folderQueries.length, 1);\n\t\t});\n\t\ttest.skip('text query with multiple comma-separated excludes', () => {\n\t\t\t// TODO: Fix. Will require `ICommonQueryProps.excludePattern` to support an array.\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{ pattern: `` },\n\t\t\t\t[ROOT_1_NAMED_FOLDER.uri],\n\t\t\t\t{\n\t\t\t\t\texcludePattern: [{ pattern: '*.js,*.ts' }, { pattern: 'foo/*,bar/*' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t);\n\t\t\tassert.deepEqual(query.excludePattern, [\n\t\t\t\t{\n\n\t\t\t\t\t'**/*.js/**': true,\n\t\t\t\t\t'**/*.js': true,\n\t\t\t\t\t'**/*.ts/**': true,\n\t\t\t\t\t'**/*.ts': true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'**/foo/*/**': true,\n\t\t\t\t\t'**/foo/*': true,\n\t\t\t\t\t'**/bar/*/**': true,\n\t\t\t\t\t'**/bar/*': true,\n\t\t\t\t}\n\t\t\t]);\n\t\t\tassert.strictEqual(query.folderQueries.length, 1);\n\t\t});\n\t\ttest.skip('text query with base URI on exclud', () => {\n\t\t\t// TODO: Fix. Will require `ICommonQueryProps.excludePattern` to support an baseURI.\n\t\t\tconst query = queryBuilder.text(\n\t\t\t\t{ pattern: `` },\n\t\t\t\t[ROOT_1_NAMED_FOLDER.uri],\n\t\t\t\t{\n\t\t\t\t\texcludePattern: [{ uri: ROOT_1_URI, pattern: '*.js,*.ts' }],\n\t\t\t\t\texpandPatterns: true\n\t\t\t\t}\n\t\t\t);\n\t\t\t// todo: incorporate the base URI into the pattern\n\t\t\tassert.deepEqual(query.excludePattern, {\n\t\t\t\turi: ROOT_1_URI,\n\t\t\t\tpattern: {\n\t\t\t\t\t'**/*.js/**': true,\n\t\t\t\t\t'**/*.js': true,\n\t\t\t\t\t'**/*.ts/**': true,\n\t\t\t\t\t'**/*.ts': true,\n\t\t\t\t}\n\t\t\t});\n\t\t\tassert.strictEqual(query.folderQueries.length, 1);\n\t\t});\n\t});\n});\nfunction makeExcludePatternFromPatterns(...patterns: string[]): {\n\tpattern: IExpression;\n}[] | undefined {\n\tconst pattern = patternsToIExpression(...patterns);\n\treturn pattern ? [{ pattern }] : undefined;\n}\n\nfunction assertEqualTextQueries(actual: ITextQuery, expected: ITextQuery): void {\n\texpected = {\n\t\t...DEFAULT_TEXT_QUERY_PROPS,\n\t\t...expected\n\t};\n\n\treturn assertEqualQueries(actual, expected);\n}\n\nexport function assertEqualQueries(actual: ITextQuery | IFileQuery, expected: ITextQuery | IFileQuery): void {\n\texpected = {\n\t\t...DEFAULT_QUERY_PROPS,\n\t\t...expected\n\t};\n\n\tconst folderQueryToCompareObject = (fq: IFolderQuery) => {\n\t\tconst excludePattern = fq.excludePattern?.map(e => normalizeExpression(e.pattern));\n\t\treturn {\n\t\t\tpath: fq.folder.fsPath,\n\t\t\texcludePattern: excludePattern?.length ? excludePattern : undefined,\n\t\t\tincludePattern: normalizeExpression(fq.includePattern),\n\t\t\tfileEncoding: fq.fileEncoding\n\t\t};\n\t};\n\n\t// Avoid comparing URI objects, not a good idea\n\tif (expected.folderQueries) {\n\t\tassert.deepStrictEqual(actual.folderQueries.map(folderQueryToCompareObject), expected.folderQueries.map(folderQueryToCompareObject));\n\t\tactual.folderQueries = [];\n\t\texpected.folderQueries = [];\n\t}\n\n\tif (expected.extraFileResources) {\n\t\tassert.deepStrictEqual(actual.extraFileResources!.map(extraFile => extraFile.fsPath), expected.extraFileResources.map(extraFile => extraFile.fsPath));\n\t\tdelete expected.extraFileResources;\n\t\tdelete actual.extraFileResources;\n\t}\n\n\tdelete actual.usingSearchPaths;\n\tactual.includePattern = normalizeExpression(actual.includePattern);\n\tactual.excludePattern = normalizeExpression(actual.excludePattern);\n\tcleanUndefinedQueryValues(actual);\n\n\tassert.deepStrictEqual(actual, expected);\n}\n\nexport function assertEqualSearchPathResults(actual: ISearchPathsInfo, expected: ISearchPathsInfo, message?: string): void {\n\tcleanUndefinedQueryValues(actual);\n\tassert.deepStrictEqual({ ...actual.pattern }, { ...expected.pattern }, message);\n\n\tassert.strictEqual(actual.searchPaths && actual.searchPaths.length, expected.searchPaths && expected.searchPaths.length);\n\tif (actual.searchPaths) {\n\t\tactual.searchPaths.forEach((searchPath, i) => {\n\t\t\tconst expectedSearchPath = expected.searchPaths![i];\n\t\t\tassert.deepStrictEqual(searchPath.pattern && { ...searchPath.pattern }, expectedSearchPath.pattern);\n\t\t\tassert.strictEqual(searchPath.searchPath.toString(), expectedSearchPath.searchPath.toString());\n\t\t});\n\t}\n}\n\n/**\n * Recursively delete all undefined property values from the search query, to make it easier to\n * assert.deepStrictEqual with some expected object.\n */\nexport function cleanUndefinedQueryValues(q: any): void {\n\tfor (const key in q) {\n\t\tif (q[key] === undefined) {\n\t\t\tdelete q[key];\n\t\t} else if (typeof q[key] === 'object') {\n\t\t\tcleanUndefinedQueryValues(q[key]);\n\t\t}\n\t}\n\n\treturn q;\n}\n\nexport function globalGlob(pattern: string): string[] {\n\treturn [\n\t\t`**/${pattern}/**`,\n\t\t`**/${pattern}`\n\t];\n}\n\nexport function patternsToIExpression(...patterns: string[]): IExpression | undefined {\n\treturn patterns.length ?\n\t\tpatterns.reduce((glob, cur) => { glob[cur] = true; return glob; }, {} as IExpression) :\n\t\tundefined;\n}\n\nexport function getUri(...slashPathParts: string[]): uri {\n\treturn uri.file(fixPath(...slashPathParts));\n}\n\nexport function fixPath(...slashPathParts: string[]): string {\n\tif (isWindows && slashPathParts.length && !slashPathParts[0].match(/^c:/i)) {\n\t\tslashPathParts.unshift('c:');\n\t}\n\n\treturn join(...slashPathParts);\n}\n\nexport function normalizeExpression(expression: IExpression | undefined): IExpression | undefined {\n\tif (!expression) {\n\t\treturn expression;\n\t}\n\n\tconst normalized: IExpression = {};\n\tObject.keys(expression).forEach(key => {\n\t\tnormalized[key.replace(/\\\\/g, '/')] = expression[key];\n\t});\n\n\treturn normalized;\n}\n"]}