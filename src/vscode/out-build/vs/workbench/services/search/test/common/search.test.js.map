{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/search/test/common/search.test.ts","vs/workbench/services/search/test/common/search.test.ts"],"names":[],"mappings":"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","file":"search.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ITextSearchPreviewOptions, OneLineRange, TextSearchMatch, SearchRange } from '../../common/search.js';\n\nsuite('TextSearchResult', () => {\n\n\tconst previewOptions1: ITextSearchPreviewOptions = {\n\t\tmatchLines: 1,\n\t\tcharsPerLine: 100\n\t};\n\n\tfunction assertOneLinePreviewRangeText(text: string, result: TextSearchMatch): void {\n\t\tassert.strictEqual(result.rangeLocations.length, 1);\n\t\tassert.strictEqual(\n\t\t\tresult.previewText.substring((result.rangeLocations[0].preview).startColumn, (result.rangeLocations[0].preview).endColumn),\n\t\t\ttext);\n\t}\n\n\tfunction getFirstSourceFromResult(result: TextSearchMatch): OneLineRange {\n\t\treturn result.rangeLocations.map(e => e.source)[0];\n\t}\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('empty without preview options', () => {\n\t\tconst range = new OneLineRange(5, 0, 0);\n\t\tconst result = new TextSearchMatch('', range);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassertOneLinePreviewRangeText('', result);\n\t});\n\n\ttest('empty with preview options', () => {\n\t\tconst range = new OneLineRange(5, 0, 0);\n\t\tconst result = new TextSearchMatch('', range, previewOptions1);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassertOneLinePreviewRangeText('', result);\n\t});\n\n\ttest('short without preview options', () => {\n\t\tconst range = new OneLineRange(5, 4, 7);\n\t\tconst result = new TextSearchMatch('foo bar', range);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassertOneLinePreviewRangeText('bar', result);\n\t});\n\n\ttest('short with preview options', () => {\n\t\tconst range = new OneLineRange(5, 4, 7);\n\t\tconst result = new TextSearchMatch('foo bar', range, previewOptions1);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassertOneLinePreviewRangeText('bar', result);\n\t});\n\n\ttest('leading', () => {\n\t\tconst range = new OneLineRange(5, 25, 28);\n\t\tconst result = new TextSearchMatch('long text very long text foo', range, previewOptions1);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassertOneLinePreviewRangeText('foo', result);\n\t});\n\n\ttest('trailing', () => {\n\t\tconst range = new OneLineRange(5, 0, 3);\n\t\tconst result = new TextSearchMatch('foo long text very long text long text very long text long text very long text long text very long text long text very long text', range, previewOptions1);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassertOneLinePreviewRangeText('foo', result);\n\t});\n\n\ttest('middle', () => {\n\t\tconst range = new OneLineRange(5, 30, 33);\n\t\tconst result = new TextSearchMatch('long text very long text long foo text very long text long text very long text long text very long text long text very long text', range, previewOptions1);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassertOneLinePreviewRangeText('foo', result);\n\t});\n\n\ttest('truncating match', () => {\n\t\tconst previewOptions: ITextSearchPreviewOptions = {\n\t\t\tmatchLines: 1,\n\t\t\tcharsPerLine: 1\n\t\t};\n\n\t\tconst range = new OneLineRange(0, 4, 7);\n\t\tconst result = new TextSearchMatch('foo bar', range, previewOptions);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassertOneLinePreviewRangeText('b', result);\n\t});\n\n\ttest('one line of multiline match', () => {\n\t\tconst previewOptions: ITextSearchPreviewOptions = {\n\t\t\tmatchLines: 1,\n\t\t\tcharsPerLine: 10000\n\t\t};\n\n\t\tconst range = new SearchRange(5, 4, 6, 3);\n\t\tconst result = new TextSearchMatch('foo bar\\nfoo bar', range, previewOptions);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassert.strictEqual(result.previewText, 'foo bar\\nfoo bar');\n\t\tassert.strictEqual(result.rangeLocations.length, 1);\n\t\tassert.strictEqual(result.rangeLocations[0].preview.startLineNumber, 0);\n\t\tassert.strictEqual(result.rangeLocations[0].preview.startColumn, 4);\n\t\tassert.strictEqual(result.rangeLocations[0].preview.endLineNumber, 1);\n\t\tassert.strictEqual(result.rangeLocations[0].preview.endColumn, 3);\n\t});\n\n\ttest('compacts multiple ranges on long lines', () => {\n\t\tconst previewOptions: ITextSearchPreviewOptions = {\n\t\t\tmatchLines: 1,\n\t\t\tcharsPerLine: 10\n\t\t};\n\n\t\tconst range1 = new SearchRange(5, 4, 5, 7);\n\t\tconst range2 = new SearchRange(5, 133, 5, 136);\n\t\tconst range3 = new SearchRange(5, 141, 5, 144);\n\t\tconst result = new TextSearchMatch('foo bar 123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890 foo bar baz bar', [range1, range2, range3], previewOptions);\n\t\tassert.deepStrictEqual(result.rangeLocations.map(e => e.preview), [new OneLineRange(0, 4, 7), new OneLineRange(0, 42, 45), new OneLineRange(0, 50, 53)]);\n\t\tassert.strictEqual(result.previewText, 'foo bar 123456⟪ 117 characters skipped ⟫o bar baz bar');\n\t});\n\n\ttest('trims lines endings', () => {\n\t\tconst range = new SearchRange(5, 3, 5, 5);\n\t\tconst previewOptions: ITextSearchPreviewOptions = {\n\t\t\tmatchLines: 1,\n\t\t\tcharsPerLine: 10000\n\t\t};\n\n\t\tassert.strictEqual(new TextSearchMatch('foo bar\\n', range, previewOptions).previewText, 'foo bar');\n\t\tassert.strictEqual(new TextSearchMatch('foo bar\\r\\n', range, previewOptions).previewText, 'foo bar');\n\t});\n\n\t// test('all lines of multiline match', () => {\n\t// \tconst previewOptions: ITextSearchPreviewOptions = {\n\t// \t\tmatchLines: 5,\n\t// \t\tcharsPerLine: 10000\n\t// \t};\n\n\t// \tconst range = new SearchRange(5, 4, 6, 3);\n\t// \tconst result = new TextSearchResult('foo bar\\nfoo bar', range, previewOptions);\n\t// \tassert.deepStrictEqual(result.range, range);\n\t// \tassertPreviewRangeText('bar\\nfoo', result);\n\t// });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ITextSearchPreviewOptions, OneLineRange, TextSearchMatch, SearchRange } from '../../common/search.js';\n\nsuite('TextSearchResult', () => {\n\n\tconst previewOptions1: ITextSearchPreviewOptions = {\n\t\tmatchLines: 1,\n\t\tcharsPerLine: 100\n\t};\n\n\tfunction assertOneLinePreviewRangeText(text: string, result: TextSearchMatch): void {\n\t\tassert.strictEqual(result.rangeLocations.length, 1);\n\t\tassert.strictEqual(\n\t\t\tresult.previewText.substring((result.rangeLocations[0].preview).startColumn, (result.rangeLocations[0].preview).endColumn),\n\t\t\ttext);\n\t}\n\n\tfunction getFirstSourceFromResult(result: TextSearchMatch): OneLineRange {\n\t\treturn result.rangeLocations.map(e => e.source)[0];\n\t}\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('empty without preview options', () => {\n\t\tconst range = new OneLineRange(5, 0, 0);\n\t\tconst result = new TextSearchMatch('', range);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassertOneLinePreviewRangeText('', result);\n\t});\n\n\ttest('empty with preview options', () => {\n\t\tconst range = new OneLineRange(5, 0, 0);\n\t\tconst result = new TextSearchMatch('', range, previewOptions1);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassertOneLinePreviewRangeText('', result);\n\t});\n\n\ttest('short without preview options', () => {\n\t\tconst range = new OneLineRange(5, 4, 7);\n\t\tconst result = new TextSearchMatch('foo bar', range);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassertOneLinePreviewRangeText('bar', result);\n\t});\n\n\ttest('short with preview options', () => {\n\t\tconst range = new OneLineRange(5, 4, 7);\n\t\tconst result = new TextSearchMatch('foo bar', range, previewOptions1);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassertOneLinePreviewRangeText('bar', result);\n\t});\n\n\ttest('leading', () => {\n\t\tconst range = new OneLineRange(5, 25, 28);\n\t\tconst result = new TextSearchMatch('long text very long text foo', range, previewOptions1);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassertOneLinePreviewRangeText('foo', result);\n\t});\n\n\ttest('trailing', () => {\n\t\tconst range = new OneLineRange(5, 0, 3);\n\t\tconst result = new TextSearchMatch('foo long text very long text long text very long text long text very long text long text very long text long text very long text', range, previewOptions1);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassertOneLinePreviewRangeText('foo', result);\n\t});\n\n\ttest('middle', () => {\n\t\tconst range = new OneLineRange(5, 30, 33);\n\t\tconst result = new TextSearchMatch('long text very long text long foo text very long text long text very long text long text very long text long text very long text', range, previewOptions1);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassertOneLinePreviewRangeText('foo', result);\n\t});\n\n\ttest('truncating match', () => {\n\t\tconst previewOptions: ITextSearchPreviewOptions = {\n\t\t\tmatchLines: 1,\n\t\t\tcharsPerLine: 1\n\t\t};\n\n\t\tconst range = new OneLineRange(0, 4, 7);\n\t\tconst result = new TextSearchMatch('foo bar', range, previewOptions);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassertOneLinePreviewRangeText('b', result);\n\t});\n\n\ttest('one line of multiline match', () => {\n\t\tconst previewOptions: ITextSearchPreviewOptions = {\n\t\t\tmatchLines: 1,\n\t\t\tcharsPerLine: 10000\n\t\t};\n\n\t\tconst range = new SearchRange(5, 4, 6, 3);\n\t\tconst result = new TextSearchMatch('foo bar\\nfoo bar', range, previewOptions);\n\t\tassert.deepStrictEqual(getFirstSourceFromResult(result), range);\n\t\tassert.strictEqual(result.previewText, 'foo bar\\nfoo bar');\n\t\tassert.strictEqual(result.rangeLocations.length, 1);\n\t\tassert.strictEqual(result.rangeLocations[0].preview.startLineNumber, 0);\n\t\tassert.strictEqual(result.rangeLocations[0].preview.startColumn, 4);\n\t\tassert.strictEqual(result.rangeLocations[0].preview.endLineNumber, 1);\n\t\tassert.strictEqual(result.rangeLocations[0].preview.endColumn, 3);\n\t});\n\n\ttest('compacts multiple ranges on long lines', () => {\n\t\tconst previewOptions: ITextSearchPreviewOptions = {\n\t\t\tmatchLines: 1,\n\t\t\tcharsPerLine: 10\n\t\t};\n\n\t\tconst range1 = new SearchRange(5, 4, 5, 7);\n\t\tconst range2 = new SearchRange(5, 133, 5, 136);\n\t\tconst range3 = new SearchRange(5, 141, 5, 144);\n\t\tconst result = new TextSearchMatch('foo bar 123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890 foo bar baz bar', [range1, range2, range3], previewOptions);\n\t\tassert.deepStrictEqual(result.rangeLocations.map(e => e.preview), [new OneLineRange(0, 4, 7), new OneLineRange(0, 42, 45), new OneLineRange(0, 50, 53)]);\n\t\tassert.strictEqual(result.previewText, 'foo bar 123456⟪ 117 characters skipped ⟫o bar baz bar');\n\t});\n\n\ttest('trims lines endings', () => {\n\t\tconst range = new SearchRange(5, 3, 5, 5);\n\t\tconst previewOptions: ITextSearchPreviewOptions = {\n\t\t\tmatchLines: 1,\n\t\t\tcharsPerLine: 10000\n\t\t};\n\n\t\tassert.strictEqual(new TextSearchMatch('foo bar\\n', range, previewOptions).previewText, 'foo bar');\n\t\tassert.strictEqual(new TextSearchMatch('foo bar\\r\\n', range, previewOptions).previewText, 'foo bar');\n\t});\n\n\t// test('all lines of multiline match', () => {\n\t// \tconst previewOptions: ITextSearchPreviewOptions = {\n\t// \t\tmatchLines: 5,\n\t// \t\tcharsPerLine: 10000\n\t// \t};\n\n\t// \tconst range = new SearchRange(5, 4, 6, 3);\n\t// \tconst result = new TextSearchResult('foo bar\\nfoo bar', range, previewOptions);\n\t// \tassert.deepStrictEqual(result.range, range);\n\t// \tassertPreviewRangeText('bar\\nfoo', result);\n\t// });\n});\n"]}