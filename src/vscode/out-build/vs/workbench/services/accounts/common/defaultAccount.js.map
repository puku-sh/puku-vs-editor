{"version":3,"sources":["vs/workbench/services/accounts/common/defaultAccount.ts"],"names":[],"mappings":"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","file":"defaultAccount.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { AuthenticationSession, IAuthenticationService } from '../../authentication/common/authentication.js';\nimport { asJson, IRequestService } from '../../../../platform/request/common/request.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { IExtensionService } from '../../extensions/common/extensions.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IContextKey, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Action2, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { localize } from '../../../../nls.js';\nimport { IWorkbenchContribution, registerWorkbenchContribution2, WorkbenchPhase } from '../../../common/contributions.js';\nimport { Barrier } from '../../../../base/common/async.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { getErrorMessage } from '../../../../base/common/errors.js';\nimport { IDefaultAccount } from '../../../../base/common/defaultAccount.js';\nimport { isString } from '../../../../base/common/types.js';\nimport { IWorkbenchEnvironmentService } from '../../environment/common/environmentService.js';\nimport { isWeb } from '../../../../base/common/platform.js';\n\nexport const DEFAULT_ACCOUNT_SIGN_IN_COMMAND = 'workbench.actions.accounts.signIn';\n\nconst enum DefaultAccountStatus {\n\tUninitialized = 'uninitialized',\n\tUnavailable = 'unavailable',\n\tAvailable = 'available',\n}\n\nconst CONTEXT_DEFAULT_ACCOUNT_STATE = new RawContextKey<string>('defaultAccountStatus', DefaultAccountStatus.Uninitialized);\n\ninterface IChatEntitlementsResponse {\n\treadonly access_type_sku: string;\n\treadonly assigned_date: string;\n\treadonly can_signup_for_limited: boolean;\n\treadonly chat_enabled: boolean;\n\treadonly analytics_tracking_id: string;\n\treadonly limited_user_quotas?: {\n\t\treadonly chat: number;\n\t\treadonly completions: number;\n\t};\n\treadonly monthly_quotas?: {\n\t\treadonly chat: number;\n\t\treadonly completions: number;\n\t};\n\treadonly limited_user_reset_date: string;\n}\n\ninterface ITokenEntitlementsResponse {\n\ttoken: string;\n}\n\ninterface IMcpRegistryProvider {\n\treadonly url: string;\n\treadonly registry_access: 'allow_all' | 'registry_only';\n\treadonly owner: {\n\t\treadonly login: string;\n\t\treadonly id: number;\n\t\treadonly type: string;\n\t\treadonly parent_login: string | null;\n\t\treadonly priority: number;\n\t};\n}\n\ninterface IMcpRegistryResponse {\n\treadonly mcp_registries: ReadonlyArray<IMcpRegistryProvider>;\n}\n\nexport const IDefaultAccountService = createDecorator<IDefaultAccountService>('defaultAccountService');\n\nexport interface IDefaultAccountService {\n\n\treadonly _serviceBrand: undefined;\n\n\treadonly onDidChangeDefaultAccount: Event<IDefaultAccount | null>;\n\n\tgetDefaultAccount(): Promise<IDefaultAccount | null>;\n\tsetDefaultAccount(account: IDefaultAccount | null): void;\n}\n\nexport class DefaultAccountService extends Disposable implements IDefaultAccountService {\n\tdeclare _serviceBrand: undefined;\n\n\tprivate _defaultAccount: IDefaultAccount | null | undefined = undefined;\n\tget defaultAccount(): IDefaultAccount | null { return this._defaultAccount ?? null; }\n\n\tprivate readonly initBarrier = new Barrier();\n\n\tprivate readonly _onDidChangeDefaultAccount = this._register(new Emitter<IDefaultAccount | null>());\n\treadonly onDidChangeDefaultAccount = this._onDidChangeDefaultAccount.event;\n\n\tasync getDefaultAccount(): Promise<IDefaultAccount | null> {\n\t\tawait this.initBarrier.wait();\n\t\treturn this.defaultAccount;\n\t}\n\n\tsetDefaultAccount(account: IDefaultAccount | null): void {\n\t\tconst oldAccount = this._defaultAccount;\n\t\tthis._defaultAccount = account;\n\n\t\tif (oldAccount !== this._defaultAccount) {\n\t\t\tthis._onDidChangeDefaultAccount.fire(this._defaultAccount);\n\t\t}\n\n\t\tthis.initBarrier.open();\n\t}\n\n}\n\nexport class DefaultAccountManagementContribution extends Disposable implements IWorkbenchContribution {\n\n\tstatic ID = 'workbench.contributions.defaultAccountManagement';\n\n\tprivate defaultAccount: IDefaultAccount | null = null;\n\tprivate readonly accountStatusContext: IContextKey<string>;\n\n\tconstructor(\n\t\t@IDefaultAccountService private readonly defaultAccountService: IDefaultAccountService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IAuthenticationService private readonly authenticationService: IAuthenticationService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IRequestService private readonly requestService: IRequestService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IWorkbenchEnvironmentService private readonly environmentService: IWorkbenchEnvironmentService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t) {\n\t\tsuper();\n\t\tthis.accountStatusContext = CONTEXT_DEFAULT_ACCOUNT_STATE.bindTo(contextKeyService);\n\t\tthis.initialize();\n\t}\n\n\tprivate async initialize(): Promise<void> {\n\t\tthis.logService.debug('[DefaultAccount] Starting initialization');\n\n\t\tif (!this.productService.defaultAccount) {\n\t\t\tthis.logService.debug('[DefaultAccount] No default account configuration in product service, skipping initialization');\n\t\t\treturn;\n\t\t}\n\n\t\tif (isWeb && !this.environmentService.remoteAuthority) {\n\t\t\tthis.logService.debug('[DefaultAccount] Running in web without remote, skipping initialization');\n\t\t\treturn;\n\t\t}\n\n\t\tconst defaultAccountProviderId = this.getDefaultAccountProviderId();\n\t\tthis.logService.debug('[DefaultAccount] Default account provider ID:', defaultAccountProviderId);\n\t\tif (!defaultAccountProviderId) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.extensionService.whenInstalledExtensionsRegistered();\n\t\tthis.logService.debug('[DefaultAccount] Installed extensions registered.');\n\n\t\tconst declaredProvider = this.authenticationService.declaredProviders.find(provider => provider.id === defaultAccountProviderId);\n\t\tif (!declaredProvider) {\n\t\t\tthis.logService.info(`[DefaultAccount] Authentication provider is not declared.`, defaultAccountProviderId);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.registerSignInAction(defaultAccountProviderId, this.productService.defaultAccount.authenticationProvider.scopes[0]);\n\t\tthis.setDefaultAccount(await this.getDefaultAccountFromAuthenticatedSessions(defaultAccountProviderId, this.productService.defaultAccount.authenticationProvider.scopes));\n\n\t\tthis._register(this.authenticationService.onDidChangeSessions(async e => {\n\t\t\tif (e.providerId !== this.getDefaultAccountProviderId()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.defaultAccount && e.event.removed?.some(session => session.id === this.defaultAccount?.sessionId)) {\n\t\t\t\tthis.setDefaultAccount(null);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.setDefaultAccount(await this.getDefaultAccountFromAuthenticatedSessions(defaultAccountProviderId, this.productService.defaultAccount!.authenticationProvider.scopes));\n\t\t}));\n\n\t\tthis.logService.debug('[DefaultAccount] Initialization complete');\n\t}\n\n\tprivate setDefaultAccount(account: IDefaultAccount | null): void {\n\t\tthis.defaultAccount = account;\n\t\tthis.defaultAccountService.setDefaultAccount(this.defaultAccount);\n\t\tif (this.defaultAccount) {\n\t\t\tthis.accountStatusContext.set(DefaultAccountStatus.Available);\n\t\t\tthis.logService.debug('[DefaultAccount] Account status set to Available');\n\t\t} else {\n\t\t\tthis.accountStatusContext.set(DefaultAccountStatus.Unavailable);\n\t\t\tthis.logService.debug('[DefaultAccount] Account status set to Unavailable');\n\t\t}\n\t}\n\n\tprivate extractFromToken(token: string): Map<string, string> {\n\t\tconst result = new Map<string, string>();\n\t\tconst firstPart = token?.split(':')[0];\n\t\tconst fields = firstPart?.split(';');\n\t\tfor (const field of fields) {\n\t\t\tconst [key, value] = field.split('=');\n\t\t\tresult.set(key, value);\n\t\t}\n\t\tthis.logService.debug(`[DefaultAccount] extractFromToken: ${JSON.stringify(Object.fromEntries(result))}`);\n\t\treturn result;\n\t}\n\n\tprivate async getDefaultAccountFromAuthenticatedSessions(authProviderId: string, scopes: string[][]): Promise<IDefaultAccount | null> {\n\t\ttry {\n\t\t\tthis.logService.debug('[DefaultAccount] Getting Default Account from authenticated sessions for provider:', authProviderId);\n\t\t\tconst session = await this.findMatchingProviderSession(authProviderId, scopes);\n\n\t\t\tif (!session) {\n\t\t\t\tthis.logService.debug('[DefaultAccount] No matching session found for provider:', authProviderId);\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst [chatEntitlements, tokenEntitlements] = await Promise.all([\n\t\t\t\tthis.getChatEntitlements(session.accessToken),\n\t\t\t\tthis.getTokenEntitlements(session.accessToken),\n\t\t\t]);\n\n\t\t\tconst mcpRegistryProvider = tokenEntitlements.mcp ? await this.getMcpRegistryProvider(session.accessToken) : undefined;\n\n\t\t\tconst account = {\n\t\t\t\tsessionId: session.id,\n\t\t\t\tenterprise: this.isEnterpriseAuthenticationProvider(authProviderId) || session.account.label.includes('_'),\n\t\t\t\t...chatEntitlements,\n\t\t\t\t...tokenEntitlements,\n\t\t\t\tmcpRegistryUrl: mcpRegistryProvider?.url,\n\t\t\t\tmcpAccess: mcpRegistryProvider?.registry_access,\n\t\t\t};\n\t\t\tthis.logService.debug('[DefaultAccount] Successfully created default account for provider:', authProviderId);\n\t\t\treturn account;\n\t\t} catch (error) {\n\t\t\tthis.logService.error('[DefaultAccount] Failed to create default account for provider:', authProviderId, getErrorMessage(error));\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tprivate async findMatchingProviderSession(authProviderId: string, allScopes: string[][]): Promise<AuthenticationSession | undefined> {\n\t\tconst sessions = await this.authenticationService.getSessions(authProviderId, undefined, undefined, true);\n\t\tfor (const session of sessions) {\n\t\t\tthis.logService.debug('[DefaultAccount] Checking session with scopes', session.scopes);\n\t\t\tfor (const scopes of allScopes) {\n\t\t\t\tif (this.scopesMatch(session.scopes, scopes)) {\n\t\t\t\t\treturn session;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate scopesMatch(scopes: ReadonlyArray<string>, expectedScopes: string[]): boolean {\n\t\treturn scopes.length === expectedScopes.length && expectedScopes.every(scope => scopes.includes(scope));\n\t}\n\n\tprivate async getTokenEntitlements(accessToken: string): Promise<Partial<IDefaultAccount>> {\n\t\tconst tokenEntitlementsUrl = this.getTokenEntitlementUrl();\n\t\tif (!tokenEntitlementsUrl) {\n\t\t\tthis.logService.debug('[DefaultAccount] No token entitlements URL found');\n\t\t\treturn {};\n\t\t}\n\n\t\tthis.logService.debug('[DefaultAccount] Fetching token entitlements from:', tokenEntitlementsUrl);\n\t\ttry {\n\t\t\tconst chatContext = await this.requestService.request({\n\t\t\t\ttype: 'GET',\n\t\t\t\turl: tokenEntitlementsUrl,\n\t\t\t\tdisableCache: true,\n\t\t\t\theaders: {\n\t\t\t\t\t'Authorization': `Bearer ${accessToken}`\n\t\t\t\t}\n\t\t\t}, CancellationToken.None);\n\n\t\t\tconst chatData = await asJson<ITokenEntitlementsResponse>(chatContext);\n\t\t\tif (chatData) {\n\t\t\t\tconst tokenMap = this.extractFromToken(chatData.token);\n\t\t\t\treturn {\n\t\t\t\t\t// Editor preview features are disabled if the flag is present and set to 0\n\t\t\t\t\tchat_preview_features_enabled: tokenMap.get('editor_preview_features') !== '0',\n\t\t\t\t\tchat_agent_enabled: tokenMap.get('agent_mode') !== '0',\n\t\t\t\t\t// MCP is disabled if the flag is present and set to 0\n\t\t\t\t\tmcp: tokenMap.get('mcp') !== '0',\n\t\t\t\t};\n\t\t\t}\n\t\t\tthis.logService.error('Failed to fetch token entitlements', 'No data returned');\n\t\t} catch (error) {\n\t\t\tthis.logService.error('Failed to fetch token entitlements', getErrorMessage(error));\n\t\t}\n\n\t\treturn {};\n\t}\n\n\tprivate async getChatEntitlements(accessToken: string): Promise<Partial<IChatEntitlementsResponse>> {\n\t\tconst chatEntitlementsUrl = this.getChatEntitlementUrl();\n\t\tif (!chatEntitlementsUrl) {\n\t\t\tthis.logService.debug('[DefaultAccount] No chat entitlements URL found');\n\t\t\treturn {};\n\t\t}\n\n\t\tthis.logService.debug('[DefaultAccount] Fetching chat entitlements from:', chatEntitlementsUrl);\n\t\ttry {\n\t\t\tconst context = await this.requestService.request({\n\t\t\t\ttype: 'GET',\n\t\t\t\turl: chatEntitlementsUrl,\n\t\t\t\tdisableCache: true,\n\t\t\t\theaders: {\n\t\t\t\t\t'Authorization': `Bearer ${accessToken}`\n\t\t\t\t}\n\t\t\t}, CancellationToken.None);\n\n\t\t\tconst data = await asJson<IChatEntitlementsResponse>(context);\n\t\t\tif (data) {\n\t\t\t\treturn data;\n\t\t\t}\n\t\t\tthis.logService.error('Failed to fetch entitlements', 'No data returned');\n\t\t} catch (error) {\n\t\t\tthis.logService.error('Failed to fetch entitlements', getErrorMessage(error));\n\t\t}\n\t\treturn {};\n\t}\n\n\tprivate async getMcpRegistryProvider(accessToken: string): Promise<IMcpRegistryProvider | undefined> {\n\t\tconst mcpRegistryDataUrl = this.getMcpRegistryDataUrl();\n\t\tif (!mcpRegistryDataUrl) {\n\t\t\tthis.logService.debug('[DefaultAccount] No MCP registry data URL found');\n\t\t\treturn undefined;\n\t\t}\n\n\t\ttry {\n\t\t\tconst context = await this.requestService.request({\n\t\t\t\ttype: 'GET',\n\t\t\t\turl: mcpRegistryDataUrl,\n\t\t\t\tdisableCache: true,\n\t\t\t\theaders: {\n\t\t\t\t\t'Authorization': `Bearer ${accessToken}`\n\t\t\t\t}\n\t\t\t}, CancellationToken.None);\n\n\t\t\tconst data = await asJson<IMcpRegistryResponse>(context);\n\t\t\tif (data) {\n\t\t\t\tthis.logService.debug('Fetched MCP registry providers', data.mcp_registries);\n\t\t\t\treturn data.mcp_registries[0];\n\t\t\t}\n\t\t\tthis.logService.debug('Failed to fetch MCP registry providers', 'No data returned');\n\t\t} catch (error) {\n\t\t\tthis.logService.error('Failed to fetch MCP registry providers', getErrorMessage(error));\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate getChatEntitlementUrl(): string | undefined {\n\t\tif (!this.productService.defaultAccount) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (this.isEnterpriseAuthenticationProvider(this.getDefaultAccountProviderId())) {\n\t\t\ttry {\n\t\t\t\tconst enterpriseUrl = this.getEnterpriseUrl();\n\t\t\t\tif (!enterpriseUrl) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn `${enterpriseUrl.protocol}//api.${enterpriseUrl.hostname}${enterpriseUrl.port ? ':' + enterpriseUrl.port : ''}/copilot_internal/user`;\n\t\t\t} catch (error) {\n\t\t\t\tthis.logService.error(error);\n\t\t\t}\n\t\t}\n\n\t\treturn this.productService.defaultAccount?.chatEntitlementUrl;\n\t}\n\n\tprivate getTokenEntitlementUrl(): string | undefined {\n\t\tif (!this.productService.defaultAccount) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (this.isEnterpriseAuthenticationProvider(this.getDefaultAccountProviderId())) {\n\t\t\ttry {\n\t\t\t\tconst enterpriseUrl = this.getEnterpriseUrl();\n\t\t\t\tif (!enterpriseUrl) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn `${enterpriseUrl.protocol}//api.${enterpriseUrl.hostname}${enterpriseUrl.port ? ':' + enterpriseUrl.port : ''}/copilot_internal/v2/token`;\n\t\t\t} catch (error) {\n\t\t\t\tthis.logService.error(error);\n\t\t\t}\n\t\t}\n\n\t\treturn this.productService.defaultAccount?.tokenEntitlementUrl;\n\t}\n\n\tprivate getMcpRegistryDataUrl(): string | undefined {\n\t\tif (!this.productService.defaultAccount) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (this.isEnterpriseAuthenticationProvider(this.getDefaultAccountProviderId())) {\n\t\t\ttry {\n\t\t\t\tconst enterpriseUrl = this.getEnterpriseUrl();\n\t\t\t\tif (!enterpriseUrl) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn `${enterpriseUrl.protocol}//api.${enterpriseUrl.hostname}${enterpriseUrl.port ? ':' + enterpriseUrl.port : ''}/copilot/mcp_registry`;\n\t\t\t} catch (error) {\n\t\t\t\tthis.logService.error(error);\n\t\t\t}\n\t\t}\n\n\t\treturn this.productService.defaultAccount?.mcpRegistryDataUrl;\n\t}\n\n\tprivate getDefaultAccountProviderId(): string | undefined {\n\t\tif (this.productService.defaultAccount && this.configurationService.getValue<string | undefined>(this.productService.defaultAccount.authenticationProvider.enterpriseProviderConfig) === this.productService.defaultAccount?.authenticationProvider.enterpriseProviderId) {\n\t\t\treturn this.productService.defaultAccount?.authenticationProvider.enterpriseProviderId;\n\t\t}\n\t\treturn this.productService.defaultAccount?.authenticationProvider.id;\n\t}\n\n\tprivate isEnterpriseAuthenticationProvider(providerId: string | undefined): boolean {\n\t\tif (!providerId) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn providerId === this.productService.defaultAccount?.authenticationProvider.enterpriseProviderId;\n\t}\n\n\tprivate getEnterpriseUrl(): URL | undefined {\n\t\tif (!this.productService.defaultAccount) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst value = this.configurationService.getValue(this.productService.defaultAccount.authenticationProvider.enterpriseProviderUriSetting);\n\t\tif (!isString(value)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn new URL(value);\n\t}\n\n\tprivate registerSignInAction(authProviderId: string, scopes: string[]): void {\n\t\tconst that = this;\n\t\tthis._register(registerAction2(class extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: DEFAULT_ACCOUNT_SIGN_IN_COMMAND,\n\t\t\t\t\ttitle: localize('sign in', \"Sign in\"),\n\t\t\t\t});\n\t\t\t}\n\t\t\trun(): Promise<AuthenticationSession> {\n\t\t\t\treturn that.authenticationService.createSession(authProviderId, scopes);\n\t\t\t}\n\t\t}));\n\t}\n\n}\n\nregisterWorkbenchContribution2('workbench.contributions.defaultAccountManagement', DefaultAccountManagementContribution, WorkbenchPhase.AfterRestored);\n"]}