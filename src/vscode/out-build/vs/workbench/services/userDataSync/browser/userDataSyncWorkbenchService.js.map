{"version":3,"sources":["vs/workbench/services/userDataSync/browser/userDataSyncWorkbenchService.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;;;;;;;;;;;AAEhG,OAAO,EAAE,oBAAoB,EAA2B,wBAAwB,EAAE,wBAAwB,EAAE,mCAAmC,EAAc,8BAA8B,EAA2C,qBAAqB,EAAE,qBAAqB,GAAG,MAAM,0DAA0D,CAAC;AACtV,OAAO,EAAqB,iBAAiB,EAAE,MAAM,yDAAyD,CAAC;AAC/G,OAAO,EAAE,6BAA6B,EAAuC,uBAAuB,EAAE,kBAAkB,EAAE,qBAAqB,EAAE,wBAAwB,EAAE,6BAA6B,EAAE,sBAAsB,EAAE,UAAU,EAAE,sBAAsB,EAAE,kCAAkC,EAAE,qBAAqB,EAA8B,gBAAgB,EAAE,MAAM,2BAA2B,CAAC;AACjZ,OAAO,EAAE,UAAU,EAAE,eAAe,EAAE,MAAM,sCAAsC,CAAC;AACnF,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,kCAAkC,CAAC;AAClE,OAAO,EAAE,mCAAmC,EAAE,MAAM,uDAAuD,CAAC;AAC5G,OAAO,EAA4D,sBAAsB,EAAE,MAAM,+CAA+C,CAAC;AACjJ,OAAO,EAAE,2BAA2B,EAAE,MAAM,iEAAiE,CAAC;AAC9G,OAAO,EAAE,kBAAkB,EAAuB,MAAM,sDAAsD,CAAC;AAC/G,OAAO,EAAE,eAAe,EAA+B,MAAM,gDAAgD,CAAC;AAC9G,OAAO,EAAE,WAAW,EAAE,MAAM,wCAAwC,CAAC;AACrE,OAAO,EAAE,eAAe,EAAE,MAAM,uDAAuD,CAAC;AACxF,OAAO,EAAE,iBAAiB,EAAE,MAAM,uCAAuC,CAAC;AAC1E,OAAO,EAAE,QAAQ,EAAE,MAAM,oBAAoB,CAAC;AAC9C,OAAO,EAAE,oBAAoB,EAAE,QAAQ,EAAE,MAAM,0DAA0D,CAAC;AAC1G,OAAO,EAAE,cAAc,EAAE,kBAAkB,EAAE,MAAM,gDAAgD,CAAC;AACpG,OAAO,EAAe,kBAAkB,EAAE,MAAM,sDAAsD,CAAC;AACvG,OAAO,EAAE,gBAAgB,EAAoB,MAAM,kDAAkD,CAAC;AACtG,OAAO,EAAE,GAAG,EAAE,MAAM,gCAAgC,CAAC;AACrD,OAAO,EAAE,sBAAsB,EAAE,MAAM,0BAA0B,CAAC;AAClE,OAAO,EAAE,aAAa,EAAE,MAAM,oCAAoC,CAAC;AACnE,OAAO,EAAE,iBAAiB,EAAE,MAAM,qCAAqC,CAAC;AACxE,OAAO,EAAE,KAAK,EAAE,MAAM,qCAAqC,CAAC;AAC5D,OAAO,EAAE,qBAAqB,EAAE,MAAM,4DAA4D,CAAC;AACnG,OAAO,EAAE,uBAAuB,EAAE,MAAM,sEAAsE,CAAC;AAC/G,OAAO,EAAE,iCAAiC,EAAE,MAAM,6DAA6D,CAAC;AAChH,OAAO,EAAE,iBAAiB,EAAE,MAAM,mCAAmC,CAAC;AACtE,OAAO,EAAE,qBAAqB,EAAE,MAAM,kCAAkC,CAAC;AACzE,OAAO,EAAqB,uBAAuB,EAAE,MAAM,yCAAyC,CAAC;AACrG,OAAO,EAAE,cAAc,EAAE,MAAM,sCAAsC,CAAC;AACtE,OAAO,EAAE,mBAAmB,EAAE,MAAM,wDAAwD,CAAC;AAC7F,OAAO,EAAE,iBAAiB,EAAE,MAAM,2BAA2B,CAAC;AAC9D,OAAO,EAAE,mCAAmC,EAAE,MAAM,iDAAiD,CAAC;AACtG,OAAO,EAAE,8BAA8B,EAAE,MAAM,wCAAwC,CAAC;AACxF,OAAO,EAAE,qBAAqB,EAAE,MAAM,gDAAgD,CAAC;AACvF,OAAO,EAAE,YAAY,EAAE,MAAM,4CAA4C,CAAC;AAC1E,OAAO,EAAE,sBAAsB,EAAE,MAAM,oCAAoC,CAAC;AAC5E,OAAO,EAAE,4BAA4B,EAAE,MAAM,kEAAkE,CAAC;AAChH,OAAO,EAAE,MAAM,EAAE,MAAM,mCAAmC,CAAC;AAC3D,OAAO,EAAE,GAAG,EAAE,MAAM,oCAAoC,CAAC;AAIzD,MAAM,mBAAmB;IAExB,YAAqB,wBAAgC,EAAmB,OAA8B;QAAjF,6BAAwB,GAAxB,wBAAwB,CAAQ;QAAmB,YAAO,GAAP,OAAO,CAAuB;IAAI,CAAC;IAE3G,IAAI,SAAS,KAAa,OAAO,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;IACnD,IAAI,WAAW,KAAa,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;IAChE,IAAI,SAAS,KAAa,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;IAC3D,IAAI,KAAK,KAAa,OAAO,IAAI,CAAC,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC;CAChF;AAGD,MAAM,UAAU,kBAAkB,CAAC,MAAe;IACjD,MAAM,SAAS,GAAG,MAA0B,CAAC;IAC7C,OAAO,GAAG,CAAC,KAAK,CAAC,SAAS,EAAE,IAAI,CAAC,IAAI,GAAG,CAAC,KAAK,CAAC,SAAS,EAAE,MAAM,EAAE,GAAG,CAAC,IAAI,GAAG,CAAC,KAAK,CAAC,SAAS,EAAE,MAAM,EAAE,GAAG,CAAC,IAAI,GAAG,CAAC,KAAK,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;AAC7I,CAAC;AAEM,IAAM,4BAA4B,GAAlC,MAAM,4BAA6B,SAAQ,UAAU;;aAI5C,4CAAuC,GAAG,8CAAH,AAAiD,CAAC;aACzF,uCAAkC,GAAG,6BAAH,AAAgC,CAAC;aACnE,+BAA0B,GAAG,+BAAH,AAAkC,CAAC;IAE5E,IAAI,OAAO,KAAK,OAAO,CAAC,CAAC,IAAI,CAAC,kCAAkC,CAAC,iBAAiB,CAAC,CAAC,CAAC;IAGrF,IAAI,uBAAuB,KAAK,OAAO,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC;IAGvE,IAAI,aAAa,KAAoB,OAAO,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;IAQlE,IAAI,OAAO,KAAsC,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;IAWxE,YACuB,mBAA0D,EAC3D,kBAAwD,EACrD,qBAA8D,EACzD,0BAAwE,EACjF,iBAAsD,EACzD,cAAgD,EACjC,6BAA8E,EACpF,uBAAkE,EAC/E,UAAwC,EACpC,cAAgD,EAC9C,gBAAoD,EAClC,kBAAwE,EACtF,oBAA4D,EAC7D,mBAA0D,EAC9D,eAAkD,EACpD,aAA8C,EAC1C,iBAAqC,EAC1C,YAA4C,EACnC,qBAA8D,EACjD,kCAAwF,EAC1G,gBAAoD,EAChD,oBAA4D,EACnE,aAA8C,EAC9B,6BAA8E,EAChG,WAA0C,EACpC,iBAAsD,EAC5C,2BAA0E;QAExG,KAAK,EAAE,CAAC;QA5B+B,wBAAmB,GAAnB,mBAAmB,CAAsB;QAC1C,uBAAkB,GAAlB,kBAAkB,CAAqB;QACpC,0BAAqB,GAArB,qBAAqB,CAAwB;QACxC,+BAA0B,GAA1B,0BAA0B,CAA6B;QAChE,sBAAiB,GAAjB,iBAAiB,CAAoB;QACxC,mBAAc,GAAd,cAAc,CAAiB;QAChB,kCAA6B,GAA7B,6BAA6B,CAAgC;QACnE,4BAAuB,GAAvB,uBAAuB,CAA0B;QAC9D,eAAU,GAAV,UAAU,CAAa;QACnB,mBAAc,GAAd,cAAc,CAAiB;QAC7B,qBAAgB,GAAhB,gBAAgB,CAAmB;QACjB,uBAAkB,GAAlB,kBAAkB,CAAqC;QACrE,yBAAoB,GAApB,oBAAoB,CAAuB;QAC5C,wBAAmB,GAAnB,mBAAmB,CAAsB;QAC7C,oBAAe,GAAf,eAAe,CAAkB;QACnC,kBAAa,GAAb,aAAa,CAAgB;QAE9B,iBAAY,GAAZ,YAAY,CAAe;QAClB,0BAAqB,GAArB,qBAAqB,CAAwB;QAChC,uCAAkC,GAAlC,kCAAkC,CAAqC;QACzF,qBAAgB,GAAhB,gBAAgB,CAAmB;QAC/B,yBAAoB,GAApB,oBAAoB,CAAuB;QAClD,kBAAa,GAAb,aAAa,CAAgB;QACb,kCAA6B,GAA7B,6BAA6B,CAAgC;QAC/E,gBAAW,GAAX,WAAW,CAAc;QACnB,sBAAiB,GAAjB,iBAAiB,CAAoB;QAC3B,gCAA2B,GAA3B,2BAA2B,CAA8B;QAlDjG,6BAAwB,GAA8B,EAAE,CAAC;QAGzD,mBAAc,qDAA8C;QAEnD,8BAAyB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAAiB,CAAC,CAAC;QACjF,6BAAwB,GAAG,IAAI,CAAC,yBAAyB,CAAC,KAAK,CAAC;QAExD,qBAAgB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,OAAO,EAAQ,CAAC,CAAC;QAC/D,oBAAe,GAAG,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC;QAY/C,gCAA2B,GAAwC,SAAS,CAAC;QAmoB7E,2CAAsC,GAA8B,IAAI,CAAC;QAmBzE,4BAAuB,GAA8B,IAAI,CAAC;QAtnBjE,IAAI,CAAC,qBAAqB,GAAG,uBAAuB,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAC/E,IAAI,CAAC,iBAAiB,GAAG,kBAAkB,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;QACtE,IAAI,CAAC,oBAAoB,GAAG,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAC5E,IAAI,CAAC,8BAA8B,GAAG,6BAA6B,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAC9F,IAAI,CAAC,YAAY,GAAG,qBAAqB,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;QACpE,IAAI,CAAC,0BAA0B,GAAG,kCAAkC,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC;QAE/F,IAAI,IAAI,CAAC,kCAAkC,CAAC,iBAAiB,EAAE,CAAC;YAC/D,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,CAAC;YAC5D,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACpG,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,6BAA6B,CAAC,SAAS,EAAE,CAAC,CAAC;YAC1E,IAAI,CAAC,SAAS,CAAC,6BAA6B,CAAC,qBAAqB,CAAC,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YAExH,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC1B,CAAC;IACF,CAAC;IAEO,6BAA6B;QACpC,MAAM,QAAQ,GAAG,IAAI,CAAC,wBAAwB,CAAC;QAC/C,IAAI,CAAC,wBAAwB,GAAG,CAAC,IAAI,CAAC,kCAAkC,CAAC,iBAAiB,EAAE,uBAAuB,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;QACjO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,iDAAiD,EAAE,IAAI,CAAC,wBAAwB,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC5H,OAAO,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,wBAAwB,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IACjF,CAAC;IAEO,mCAAmC,CAAC,wBAAgC;QAC3E,OAAO,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,KAAK,wBAAwB,CAAC,CAAC;IACvF,CAAC;IAEO,KAAK,CAAC,iBAAiB;QAC9B,IAAI,CAAC;YACJ,UAAU;YACV,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,iCAAiC,EAAE,EAAE,IAAI,CAAC,6BAA6B,CAAC,0BAA0B,EAAE,CAAC,CAAC,CAAC;YAEhJ,gBAAgB;YAChB,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;QACzB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YAChB,8DAA8D;YAC9D,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,yBAAyB,EAAE,CAAC;gBACxD,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YAC9B,CAAC;QACF,CAAC;IACF,CAAC;IAEO,KAAK,CAAC,UAAU;QACvB,IAAI,KAAK,EAAE,CAAC;YACX,MAAM,qBAAqB,GAAG,MAAM,mCAAmC,CAAC,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;YACxH,IAAI,IAAI,CAAC,gBAAgB,KAAK,SAAS,IAAI,qBAAqB,EAAE,EAAE,EAAE,CAAC;gBACtE,IAAI,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,mBAAmB,EAAE,sBAAsB,IAAI,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,mBAAmB,CAAC,OAAO,EAAE,CAAC;oBACjJ,IAAI,CAAC,gBAAgB,GAAG,qBAAqB,CAAC,EAAE,CAAC;gBAClD,CAAC;gBAED,yBAAyB;qBACpB,IAAI,IAAI,CAAC,qBAAqB,EAAE,CAAC;oBACrC,IAAI,CAAC,gBAAgB,GAAG,qBAAqB,CAAC,EAAE,CAAC;gBAClD,CAAC;gBACD,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;YACpC,CAAC;QACF,CAAC;QAED,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC9C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,qBAAqB,CAAC,4BAA4B,CAAC,GAAG,EAAE;YAC3E,IAAI,IAAI,CAAC,6BAA6B,EAAE,EAAE,CAAC;gBAC1C,uDAAuD;gBACvD,WAAW,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,2CAA2C,CAAC,CAAC,CAAC;YACrF,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;QACJ,MAAM,WAAW,CAAC;QAElB,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAC1B,KAAK,CAAC,GAAG,CACR,IAAI,CAAC,qBAAqB,CAAC,mCAAmC,EAC9D,IAAI,CAAC,qBAAqB,CAAC,qCAAqC,CAChE,EAAE,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,mCAAmC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,gCAAgC,CAAC,CAAC,CAAC,CAAC;QAErH,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,0BAA0B,CAAC,aAAa,EAAE,YAAY,CAAC,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;QAE/I,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,qBAAqB,CAAC,mBAAmB,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,mCAAmC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAC1L,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,gBAAgB,oCAA2B,8BAA4B,CAAC,0BAA0B,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;QACtL,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,0BAA0B,CAAC,aAAa,EAAE,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC;QAC/H,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QACrE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,mBAAmB,CAAC,oBAAoB,CAAC,SAAS,CAAC,EAAE;YACxE,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YAC5C,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC;gBACvB,IAAI,CAAC,0BAA0B,CAAC,KAAK,EAAE,CAAC;YACzC,CAAC;YACD,wCAAwC;YACxC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;gBACzC,MAAM,cAAc,GAAG,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,CAAC;gBACrI,IAAI,cAAc,EAAE,MAAM,KAAK,qBAAqB,EAAE,CAAC;oBACtD,OAAO,KAAK,CAAC;gBACd,CAAC;gBACD,OAAO,CAAC,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,SAAS,EAAE,EAAE,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,eAAe,EAAE,EAAE,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,OAAO,CAAC,eAAe,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACtL,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QACtC,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,KAAK,CAAC,MAAM,CAAC,MAAc;QAClC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,kCAAkC,MAAM,EAAE,CAAC,CAAC;QAElE,IAAI,CAAC,6BAA6B,EAAE,CAAC;QACrC,MAAM,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAElC,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YACnB,IAAI,CAAC,+BAA+B,GAAG,IAAI,CAAC,QAAQ,CAAC,wBAAwB,CAAC;QAC/E,CAAC;QAED,MAAM,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACtC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,2CAAyB,CAAC,8CAA0B,CAAC,CAAC;IAC/F,CAAC;IAEO,KAAK,CAAC,oBAAoB;QACjC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,6CAA6C,CAAC,CAAC;QACrE,MAAM,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAC/C,MAAM,+BAA+B,GAAG,IAAI,CAAC,+BAA+B,CAAC;QAC7E,IAAI,gBAAgB,EAAE,CAAC;YACtB,MAAM,uBAAuB,GAAG,+BAA+B,CAAC,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,KAAK,+BAA+B,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC;YACzL,KAAK,MAAM,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,uBAAuB,EAAE,CAAC;gBACtD,MAAM,QAAQ,GAAG,CAAC,MAAM,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;gBAClF,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE,CAAC;oBAChC,IAAI,OAAO,CAAC,EAAE,KAAK,gBAAgB,EAAE,CAAC;wBACrC,IAAI,CAAC,QAAQ,GAAG,IAAI,mBAAmB,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;wBACrD,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,4CAA4C,EAAE,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;wBAC/F,OAAO;oBACR,CAAC;gBACF,CAAC;YACF,CAAC;QACF,CAAC;QACD,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC;IAC3B,CAAC;IAEO,KAAK,CAAC,WAAW,CAAC,OAAwC;QACjE,IAAI,KAAK,GAAoE,SAAS,CAAC;QACvF,IAAI,OAAO,EAAE,CAAC;YACb,IAAI,CAAC;gBACJ,MAAM,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC;gBAC5B,KAAK,GAAG,EAAE,KAAK,EAAE,wBAAwB,EAAE,OAAO,CAAC,wBAAwB,EAAE,CAAC;YAC/E,CAAC;YAAC,OAAO,CAAC,EAAE,CAAC;gBACZ,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC1B,CAAC;QACF,CAAC;QACD,MAAM,IAAI,CAAC,0BAA0B,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IAC5D,CAAC;IAEO,mBAAmB,CAAC,aAA4B;QACvD,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,iDAAiD,aAAa,EAAE,CAAC,CAAC;QACxF,IAAI,IAAI,CAAC,cAAc,KAAK,aAAa,EAAE,CAAC;YAC3C,MAAM,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC;YACrC,MAAM,MAAM,GAAG,8CAA8C,QAAQ,OAAO,aAAa,EAAE,CAAC;YAC5F,IAAI,GAAG,CAAC,UAAU,EAAE,CAAC;gBACpB,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YAC/B,CAAC;iBAAM,CAAC;gBACP,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC9B,CAAC;YAED,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;YACpC,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAC7C,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACpD,CAAC;IACF,CAAC;IAED,KAAK,CAAC,MAAM;QACX,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAM,EAAE,CAAC;YAC1C,MAAM,IAAI,KAAK,CAAC,QAAQ,CAAC,KAA6B,EAAE,IAA4F,CAAC,CAAC,CAAC;QACxJ,CAAC;QACD,IAAI,IAAI,CAAC,6BAA6B,CAAC,SAAS,EAAE,EAAE,CAAC;YACpD,OAAO;QACR,CAAC;QACD,IAAI,IAAI,CAAC,mBAAmB,CAAC,MAAM,iCAAoB,EAAE,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC;QACtD,CAAC;QAED,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;QACjC,IAAI,CAAC,MAAM,EAAE,CAAC;YACb,MAAM,IAAI,iBAAiB,EAAE,CAAC;QAC/B,CAAC;QAED,+CAA+C;QAC/C,IAAI,IAAI,CAAC,aAAa,8CAA4B,EAAE,CAAC;YACpD,MAAM,IAAI,KAAK,CAAC,QAAQ,CAAC,KAAY,EAAE,IAAsB,CAAC,CAAC,CAAC;QACjE,CAAC;QAED,MAAM,2BAA2B,GAAG,IAAI,CAAC,2BAA2B,GAAG,IAAI,uBAAuB,EAAE,CAAC;QACrG,MAAM,UAAU,GAAG,KAAK,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,IAAI,EAAE;YAC3G,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC;gBACtD,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE,QAAQ,CAAC,KAAkB,EAAE,IAAgE,CAAC;gBACvG,KAAK,EAAE,QAAQ,CAAC,KAAe,EAAE,IAAe,CAAC;gBACjD,aAAa,EAAE,QAAQ,CAAC,EAAE,GAAG,AAA6C,EAA3C,AAA6C,IAAO,CAA/C,AAAgD,EAA9C,OAAO,EAAE,CAAC,uBAAuB,CAAC;gBACxE,YAAY,EAAE,QAAQ,CAAC,KAAI,EAAE,IAAI,CAAC;aAClC,CAAC,CAAC;YACH,IAAI,SAAS,EAAE,CAAC;gBACf,2BAA2B,CAAC,MAAM,EAAE,CAAC;YACtC,CAAC;YACD,OAAO,CAAC,SAAS,CAAC;QACnB,CAAC,CAAC,EAAE,EAAE,mBAAmB,CAAC,CAAC,CAAC;QAC5B,IAAI,CAAC;YACJ,MAAM,IAAI,CAAC,YAAY,CAAC,2BAA2B,CAAC,KAAK,CAAC,CAAC;QAC5D,CAAC;gBAAS,CAAC;YACV,UAAU,CAAC,OAAO,EAAE,CAAC;YACrB,IAAI,CAAC,2BAA2B,GAAG,SAAS,CAAC;QAC9C,CAAC;QACD,MAAM,IAAI,CAAC,uBAAuB,CAAC,MAAM,EAAE,CAAC;QAE5C,IAAI,IAAI,CAAC,kCAAkC,CAAC,iBAAiB,EAAE,SAAS,EAAE,CAAC;YAC1E,MAAM,IAAI,CAAC,gCAAgC,EAAE,CAAC;QAC/C,CAAC;QAED,IAAI,CAAC,+BAA+B,GAAG,IAAI,CAAC,OAAO,EAAE,wBAAwB,CAAC;QAC9E,IAAI,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,mBAAmB,EAAE,iBAAiB,IAAI,IAAI,CAAC,+BAA+B,EAAE,CAAC;YACrH,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,+BAA+B,CAAC,CAAC;QACnH,CAAC;QAED,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAgB,EAAE,IAAkB,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;QAChG,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;IAC9B,CAAC;IAED,KAAK,CAAC,OAAO,CAAC,UAAmB;QAChC,IAAI,IAAI,CAAC,6BAA6B,CAAC,SAAS,EAAE,EAAE,CAAC;YACpD,MAAM,IAAI,CAAC,uBAAuB,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;YACvD,IAAI,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,mBAAmB,EAAE,iBAAiB,IAAI,IAAI,CAAC,+BAA+B,EAAE,CAAC;gBACrH,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,KAAK,EAAE,IAAI,CAAC,+BAA+B,CAAC,CAAC;YACpH,CAAC;QACF,CAAC;QACD,IAAI,IAAI,CAAC,2BAA2B,EAAE,CAAC;YACtC,IAAI,CAAC,2BAA2B,CAAC,MAAM,EAAE,CAAC;QAC3C,CAAC;IACF,CAAC;IAED,KAAK,CAAC,gCAAgC;QACrC,IAAI,CAAC,IAAI,CAAC,0BAA0B,CAAC,OAAO,EAAE,CAAC;YAC9C,MAAM,IAAI,KAAK,CAAC,4FAA4F,CAAC,CAAC;QAC/G,CAAC;QACD,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,kCAAkC,CAAC,iBAAiB,EAAE,CAAC;YAC1E,gBAAgB;YAChB,OAAO;QACR,CAAC;QAED,MAAM,oBAAoB,GAAG,IAAI,CAAC,kCAAkC,CAAC,iBAAiB,CAAC,IAAI,KAAK,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,kCAAkC,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,kCAAkC,CAAC,iBAAiB,CAAC,WAAW,CAAC;QACzP,MAAM,uBAAuB,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,uBAAuB,EAAE,oBAAoB,CAAC,CAAC;QACxH,uBAAuB,CAAC,YAAY,CAAC,IAAI,CAAC,0BAA0B,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,0BAA0B,CAAC,OAAO,CAAC,wBAAwB,CAAC,CAAC;QACtJ,MAAM,IAAI,CAAC,oBAAoB,CAAC,cAAc,CAAC,iCAAiC,EAAE,uBAAuB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,kCAAkC,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;IACjL,CAAC;IAED,OAAO;QACN,OAAO,IAAI,CAAC,uBAAuB,CAAC,WAAW,CAAC,CAAC,UAAU,CAAC,EAAE,EAAE,WAAW,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,CAAC;IAC1G,CAAC;IAEO,KAAK,CAAC,YAAY,CAAC,KAAwB;QAClD,MAAM,WAAW,GAAG,IAAI,eAAe,EAAE,CAAC;QAC1C,MAAM,cAAc,GAAG,MAAM,IAAI,CAAC,mBAAmB,CAAC,oBAAoB,EAAE,CAAC;QAC7E,IAAI,CAAC;YACJ,MAAM,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC;gBACvC,QAAQ,kCAAyB;gBACjC,KAAK,EAAE,UAAU,CAAC,KAAK;gBACvB,OAAO,EAAE,wBAAwB;gBACjC,KAAK,EAAE,GAAG;aACV,EAAE,KAAK,EAAC,QAAQ,EAAC,EAAE;gBACnB,QAAQ,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,QAAQ,CAAC,KAAY,EAAE,IAAe,CAAC,EAAE,CAAC,CAAC;gBACtE,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,MAAM,CAAC,EAAE;oBACnE,IAAI,MAAM,iDAA4B,EAAE,CAAC;wBACxC,QAAQ,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,QAAQ,CAAC,KAAqB,EAAE,IAAwB,CAAC,EAAE,CAAC,CAAC;oBACzF,CAAC;yBAAM,CAAC;wBACP,QAAQ,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,QAAQ,CAAC,KAAY,EAAE,IAAe,CAAC,EAAE,CAAC,CAAC;oBACvE,CAAC;gBACF,CAAC,CAAC,CAAC,CAAC;gBACJ,MAAM,cAAc,CAAC,KAAK,EAAE,CAAC;gBAC7B,IAAI,IAAI,CAAC,mBAAmB,CAAC,MAAM,iDAA4B,EAAE,CAAC;oBACjE,MAAM,IAAI,CAAC,6BAA6B,CAAC,KAAK,CAAC,CAAC;gBACjD,CAAC;gBACD,MAAM,cAAc,CAAC,KAAK,EAAE,CAAC;YAC9B,CAAC,CAAC,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YAChB,MAAM,cAAc,CAAC,IAAI,EAAE,CAAC;YAC5B,MAAM,KAAK,CAAC;QACb,CAAC;gBAAS,CAAC;YACV,WAAW,CAAC,OAAO,EAAE,CAAC;QACvB,CAAC;IACF,CAAC;IAEO,KAAK,CAAC,6BAA6B,CAAC,KAAwB;QACnE,MAAM,SAAS,GAAG,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC;QACrD,MAAM,YAAY,GAAG,QAAQ,CAAC,KAAK,EAAE,IAAO,CAAC,CAAC;QAC9C,IAAI,aAAa,GAAG,EAAE,CAAC;QACvB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAC3C,IAAI,CAAC,KAAK,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;gBAC3C,aAAa,IAAI,YAAY,CAAC;YAC/B,CAAC;iBAAM,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;gBACpB,aAAa,IAAI,IAAI,CAAC;YACvB,CAAC;YACD,aAAa,IAAI,gBAAgB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC;QAC9D,CAAC;QACD,MAAM,sBAAsB,GAAG,SAAS,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QAChH,MAAM,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;YAC/B,IAAI,EAAE,QAAQ,CAAC,OAAO;YACtB,OAAO,EAAE,QAAQ,CAAC,KAAoB,EAAE,IAA2B,EAAE,aAAa,CAAC;YACnF,MAAM,EAAE,QAAQ,CAAC,KAAS,EAAE,IAAwC,CAAC;YACrE,OAAO,EAAE;gBACR;oBACC,KAAK,EAAE,QAAQ,CAAC,EAAE,GAAG,AAAwD,EAAtD,AAAwD,IAAkB,CAAC,WAA3D,EAAE,OAAO,EAAE,CAAC,uBAAuB,CAAC;oBAC3E,GAAG,EAAE,KAAK,IAAI,EAAE;wBACf,MAAM,oCAAoC,GAAG,qBAAqB,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,mBAAmB,CAAC,oBAAoB,EAAE,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;wBAC3L,MAAM,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC9E,MAAM,oCAAoC,CAAC;oBAC5C,CAAC;iBACD;gBACD;oBACC,KAAK,EAAE,sBAAsB,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,GAAG,AAA8D,EAA5D,AAA8D,IAAqB,EAAE,gBAA/D,EAAE,IAAmF,CAAC,CAAC,CAA9E,AAA+E,CAAC,CAA9E,CAAC,MAAqF,CAAC,EAAE,GAAG,AAAuD,EAArD,AAAuD,IAAiB,CAAC,IAA/I,CAAC,KAAoF,EAAE,OAAO,EAAE,CAAC,uBAAuB,CAAC;oBAClO,GAAG,EAAE,KAAK,IAAI,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;iBACnC;gBACD;oBACC,KAAK,EAAE,sBAAsB,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,GAAG,AAA+D,EAA7D,AAA+D,IAAoB,EAAE,iBAA9D,EAAE,GAAkF,CAAC,CAAC,CAAC,CAA9E,AAA+E,EAA7E,CAAC,KAAoF,CAAC,EAAE,GAAG,AAAwD,EAAtD,AAAwD,IAAgB,CAAC,KAA9I,CAAC,KAAoF,EAAE,OAAO,EAAE,CAAC,uBAAuB,CAAC;oBACnO,GAAG,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;iBAC9B;aACD;YACD,YAAY,EAAE;gBACb,GAAG,EAAE,GAAG,EAAE;oBACT,MAAM,IAAI,iBAAiB,EAAE,CAAC;gBAC/B,CAAC;aACD;SACD,CAAC,CAAC;IACJ,CAAC;IAEO,KAAK,CAAC,OAAO,CAAC,KAAc;QACnC,KAAK,MAAM,QAAQ,IAAI,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE,CAAC;YAC3D,KAAK,MAAM,OAAO,IAAI,QAAQ,CAAC,SAAS,EAAE,CAAC;gBAC1C,MAAM,IAAI,CAAC,MAAM,CAAC,EAAE,YAAY,EAAE,QAAQ,CAAC,YAAY,EAAE,OAAO,EAAE,QAAQ,CAAC,OAAO,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,OAAO,CAAC,aAAa,EAAE,SAAS,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;YAC3K,CAAC;QACF,CAAC;IACF,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,QAA+B,EAAE,gBAAqB,EAAE,OAAkC,EAAE,KAAmC;QAC3I,OAAO,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,QAAQ,EAAE,gBAAgB,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;IACpF,CAAC;IAED,KAAK,CAAC,aAAa,CAAC,cAAiC;QACpD,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC;YAChD,OAAO;QACR,CAAC;QACD,IAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAC1C,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,QAAQ,CAA6B,sBAAsB,CAAC,CAAC;QAClG,IAAI,IAAI,IAAI,cAAc,EAAE,CAAC;YAC5B,MAAM,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QACjC,CAAC;IACF,CAAC;IAED,KAAK,CAAC,eAAe;QACpB,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC;YACtD,IAAI,EAAE,MAAM;YACZ,OAAO,EAAE,QAAQ,CAAC,KAAO,EAAE,IAA2E,CAAC;YACvG,KAAK,EAAE,QAAQ,CAAC,KAAa,EAAE,IAAO,CAAC;YACvC,aAAa,EAAE,QAAQ,CAAC,EAAE,GAAG,AAAqD,EAAnD,AAAqD,IAAS,CAAC,QAAlD,EAAE,OAAO,EAAE,CAAC,uBAAuB,CAAC;SAChF,CAAC,CAAC;QACH,IAAI,SAAS,EAAE,CAAC;YACf,MAAM,IAAI,CAAC,mBAAmB,CAAC,WAAW,EAAE,CAAC;QAC9C,CAAC;IACF,CAAC;IAED,KAAK,CAAC,kBAAkB;QACvB,MAAM,WAAW,GAAU,EAAE,CAAC;QAC9B,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC,CAAC;QACtH,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YACnB,WAAW,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ;iBAC/B,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,IAAI,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACnE,IAAI,EAAE;iBACN,OAAO,EAAE;iBACT,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;QACzB,CAAC;QACD,MAAM,MAAM,GAAU,EAAE,CAAC;QACzB,KAAK,MAAM,SAAS,IAAI,WAAW,EAAE,CAAC;YACrC,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;YAC7D,MAAM,SAAS,GAAG,UAAU,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,UAAU,CAAC,GAAG,qBAAqB,GAAG,CAAC,CAAC,CAAC;YACpJ,IAAI,SAAS,EAAE,CAAC;gBACf,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;YACjC,CAAC;QACF,CAAC;QACD,OAAO,MAAM,CAAC;IACf,CAAC;IAED,KAAK,CAAC,gBAAgB;QACrB,IAAI,CAAC,8BAA8B,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAC9C,MAAM,IAAI,CAAC,sBAAsB,EAAE,CAAC;QACpC,MAAM,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,sBAAsB,CAAC,CAAC;IACnE,CAAC;IAED,KAAK,CAAC,oBAAoB;QACzB,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC;YAC1D,KAAK,EAAE,QAAQ,CAAC,KAAqC,EAAE,IAAkD,CAAC;YAC1G,cAAc,EAAE,KAAK;YACrB,gBAAgB,EAAE,IAAI;YACtB,aAAa,EAAE,KAAK;YACpB,SAAS,EAAE,QAAQ,CAAC,KAA0C,EAAE,IAAM,CAAC;SACvE,CAAC,CAAC;QAEH,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;YAClB,OAAO;QACR,CAAC;QAED,OAAO,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,EAAE,QAAQ,kCAAyB,EAAE,EAAE,KAAK,IAAI,EAAE;YAC1F,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,2BAA2B,CAAC,WAAW,EAAE,CAAC;YACtE,MAAM,cAAc,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;YACvD,MAAM,IAAI,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC,cAAc,CAAC,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,wBAAwB,CAAC;YAC5F,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YAEvD,MAAM,SAAS,GAAG,IAAI,MAAM,CAAC,GAAG,sBAAsB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACzE,MAAM,OAAO,GAAa,EAAE,CAAC;YAC7B,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,QAAQ,IAAI,EAAE,EAAE,CAAC;gBACzC,IAAI,KAAK,CAAC,IAAI,KAAK,IAAI,EAAE,CAAC;oBACzB,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBACjB,CAAC;qBAAM,CAAC;oBACP,MAAM,OAAO,GAAG,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;oBAC3C,IAAI,OAAO,EAAE,CAAC;wBACb,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACpC,CAAC;gBACF,CAAC;YACF,CAAC;YACD,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YAE9B,MAAM,MAAM,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAC1I,MAAM,OAAO,CAAC,GAAG,CAAC;gBACjB,IAAI,CAAC,mBAAmB,CAAC,sBAAsB,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,qBAAqB,CAAC,CAAC;gBACvH,CAAC,KAAK,IAAI,EAAE;oBACX,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,kBAAkB,EAAE,CAAC;oBACrD,MAAM,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,EAAC,WAAW,EAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC9P,CAAC,CAAC,EAAE;gBACJ,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,EAAE,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,eAAe,CAAC,CAAC;aACjI,CAAC,CAAC;YACH,OAAO,MAAM,CAAC;QACf,CAAC,CAAC,CAAC;IACJ,CAAC;IAEO,KAAK,CAAC,sBAAsB;QACnC,MAAM,aAAa,GAAG,IAAI,CAAC,qBAAqB,CAAC,oBAAoB,CAAC,sBAAsB,CAAC,CAAC;QAC9F,IAAI,aAAa,EAAE,CAAC;YACnB,MAAM,KAAK,GAAG,IAAI,CAAC,qBAAqB,CAAC,qBAAqB,CAAC,aAAa,CAAC,CAAC;YAC9E,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,MAAM,EAAE,CAAC;gBACzC,MAAM,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,gCAAgC,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,qBAAqB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC1H,CAAC;QACF,CAAC;IACF,CAAC;IAED,KAAK,CAAC,MAAM;QACX,MAAM,+BAA+B,GAAG,IAAI,CAAC,+BAA+B,CAAC;QAC7E,MAAM,sBAAsB,GAAG,+BAA+B,CAAC,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,+BAA+B,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QAC9J,IAAI,sBAAsB,EAAE,CAAC;YAC5B,MAAM,IAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC;QAC7C,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,MAAM,EAAE,CAAC;gBAC1C,MAAM,IAAI,KAAK,CAAC,QAAQ,CAAC,KAA2C,EAAE,IAAyE,CAAC,CAAC,CAAC;YACnJ,CAAC;YACD,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC;QACnB,CAAC;IACF,CAAC;IAEO,KAAK,CAAC,IAAI;QACjB,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,MAAM,EAAE,CAAC;QACnC,IAAI,CAAC,MAAM,EAAE,CAAC;YACb,OAAO,KAAK,CAAC;QACd,CAAC;QACD,MAAM,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QAC5B,OAAO,IAAI,CAAC;IACb,CAAC;IAEO,KAAK,CAAC,MAAM;QACnB,IAAI,IAAI,CAAC,uBAAuB,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YAC/C,OAAO,SAAS,CAAC;QAClB,CAAC;QAED,MAAM,uBAAuB,GAAG,CAAC,GAAG,IAAI,CAAC,uBAAuB,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,KAAK,IAAI,CAAC,+BAA+B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACzI,MAAM,WAAW,GAAG,IAAI,GAAG,EAAiC,CAAC;QAE7D,IAAI,uBAAuB,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YAC1C,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,uBAAuB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;YAC1G,IAAI,QAAQ,CAAC,MAAM,EAAE,CAAC;gBACrB,WAAW,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;YAC1D,CAAC;iBAAM,CAAC;gBACP,uCAAuC;gBACvC,OAAO,uBAAuB,CAAC,CAAC,CAAC,CAAC;YACnC,CAAC;QACF,CAAC;QAED,IAAI,MAAiE,CAAC;QACtE,MAAM,WAAW,GAAoB,IAAI,eAAe,EAAE,CAAC;QAC3D,MAAM,SAAS,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAC,eAAe,CAAuB,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QAEzH,MAAM,OAAO,GAAG,IAAI,OAAO,CAA4D,CAAC,CAAC,EAAE;YAC1F,WAAW,CAAC,GAAG,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,EAAE;gBACxC,WAAW,CAAC,OAAO,EAAE,CAAC;gBACtB,CAAC,CAAC,MAAM,CAAC,CAAC;YACX,CAAC,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,SAAS,CAAC,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC;QACnC,SAAS,CAAC,EAAE,GAAG,KAAK,CAAC;QACrB,SAAS,CAAC,cAAc,GAAG,IAAI,CAAC;QAChC,SAAS,CAAC,WAAW,GAAG,QAAQ,CAAC,KAA4B,EAAE,IAA8B,CAAC,CAAC;QAC/F,SAAS,CAAC,IAAI,EAAE,CAAC;QAEjB,IAAI,uBAAuB,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YACxC,SAAS,CAAC,IAAI,GAAG,IAAI,CAAC;YACtB,KAAK,MAAM,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,uBAAuB,EAAE,CAAC;gBACtD,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;gBACpD,IAAI,QAAQ,CAAC,MAAM,EAAE,CAAC;oBACrB,WAAW,CAAC,GAAG,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC;gBAC/B,CAAC;YACF,CAAC;YACD,SAAS,CAAC,IAAI,GAAG,KAAK,CAAC;QACxB,CAAC;QAED,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC,oBAAoB,CAAC,uBAAuB,EAAE,WAAW,CAAC,CAAC;QAClF,WAAW,CAAC,GAAG,CAAC,SAAS,CAAC,WAAW,CAAC,GAAG,EAAE;YAC1C,MAAM,GAAG,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,sBAAsB,CAAC;YACxI,SAAS,CAAC,IAAI,EAAE,CAAC;QAClB,CAAC,CAAC,CAAC,CAAC;QAEJ,OAAO,OAAO,CAAC;IAChB,CAAC;IAEO,KAAK,CAAC,WAAW,CAAC,wBAAgC,EAAE,MAAgB;QAC3E,MAAM,QAAQ,GAAqC,IAAI,GAAG,EAA+B,CAAC;QAC1F,IAAI,cAAc,GAA+B,IAAI,CAAC;QAEtD,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,wBAAwB,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC;QACtG,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE,CAAC;YAChC,MAAM,OAAO,GAAwB,IAAI,mBAAmB,CAAC,wBAAwB,EAAE,OAAO,CAAC,CAAC;YAChG,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;YACzC,IAAI,OAAO,CAAC,SAAS,KAAK,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACjD,cAAc,GAAG,OAAO,CAAC;YAC1B,CAAC;QACF,CAAC;QAED,IAAI,cAAc,EAAE,CAAC;YACpB,0CAA0C;YAC1C,QAAQ,CAAC,GAAG,CAAC,cAAc,CAAC,SAAS,EAAE,cAAc,CAAC,CAAC;QACxD,CAAC;QAED,OAAO,cAAc,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,SAAS,EAAE,EAAE,EAAE,CAAC,SAAS,KAAK,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/I,CAAC;IAEO,oBAAoB,CAAC,uBAAkD,EAAE,WAA+C;QAC/H,MAAM,cAAc,GAAmD,EAAE,CAAC;QAE1E,qBAAqB;QACrB,IAAI,WAAW,CAAC,IAAI,EAAE,CAAC;YACtB,cAAc,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,QAAQ,CAAC,KAAW,EAAE,IAAW,CAAC,EAAE,CAAC,CAAC;YACtF,KAAK,MAAM,sBAAsB,IAAI,uBAAuB,EAAE,CAAC;gBAC9D,MAAM,QAAQ,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,sBAAsB,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,SAAS,EAAE,EAAE,EAAE,CAAC,SAAS,KAAK,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC1I,MAAM,YAAY,GAAG,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC;gBAC7F,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE,CAAC;oBAChC,cAAc,CAAC,IAAI,CAAC;wBACnB,KAAK,EAAE,GAAG,OAAO,CAAC,WAAW,KAAK,YAAY,GAAG;wBACjD,WAAW,EAAE,OAAO,CAAC,SAAS,KAAK,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAW,EAAE,IAAqB,CAAC,CAAC,CAAC,CAAC,SAAS;wBACrH,OAAO;wBACP,sBAAsB;qBACtB,CAAC,CAAC;gBACJ,CAAC;YACF,CAAC;YACD,cAAc,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,QAAQ,CAAC,KAAQ,EAAE,IAAQ,CAAC,EAAE,CAAC,CAAC;QACjF,CAAC;QAED,oBAAoB;QACpB,KAAK,MAAM,sBAAsB,IAAI,uBAAuB,EAAE,CAAC;YAC9D,MAAM,QAAQ,GAAG,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC;YACnF,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,sBAAsB,CAAC,EAAE,CAAC,IAAI,QAAQ,CAAC,wBAAwB,EAAE,CAAC;gBACtF,MAAM,YAAY,GAAG,QAAQ,CAAC,KAAK,CAAC;gBACpC,cAAc,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,QAAQ,CAAC,KAAuB,EAAE,IAAkB,EAAE,YAAY,CAAC,EAAE,sBAAsB,EAAE,CAAC,CAAC;YAC7H,CAAC;QACF,CAAC;QAED,OAAO,cAAc,CAAC;IACvB,CAAC;IAEO,KAAK,CAAC,QAAQ,CAAC,qBAAoE;QAC1F,IAAI,SAAiB,CAAC;QACtB,IAAI,wBAAwB,CAAC,qBAAqB,CAAC,EAAE,CAAC;YACrD,IAAI,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,mBAAmB,EAAE,sBAAsB,EAAE,EAAE,KAAK,qBAAqB,CAAC,EAAE,EAAE,CAAC;gBACnH,SAAS,GAAG,MAAM,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,mBAAmB,EAAE,sBAAsB,EAAE,MAAM,EAAE,CAAC;YAC1G,CAAC;iBAAM,CAAC;gBACP,SAAS,GAAG,CAAC,MAAM,IAAI,CAAC,qBAAqB,CAAC,aAAa,CAAC,qBAAqB,CAAC,EAAE,EAAE,qBAAqB,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC;YACzH,CAAC;YACD,IAAI,CAAC,+BAA+B,GAAG,qBAAqB,CAAC,EAAE,CAAC;QACjE,CAAC;aAAM,CAAC;YACP,IAAI,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,mBAAmB,EAAE,sBAAsB,EAAE,EAAE,KAAK,qBAAqB,CAAC,wBAAwB,EAAE,CAAC;gBACzI,SAAS,GAAG,MAAM,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,mBAAmB,EAAE,sBAAsB,EAAE,MAAM,EAAE,CAAC;YAC1G,CAAC;iBAAM,CAAC;gBACP,SAAS,GAAG,qBAAqB,CAAC,SAAS,CAAC;YAC7C,CAAC;YACD,IAAI,CAAC,+BAA+B,GAAG,qBAAqB,CAAC,wBAAwB,CAAC;QACvF,CAAC;QACD,IAAI,CAAC,gBAAgB,GAAG,SAAS,CAAC;QAClC,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;IAC9B,CAAC;IAEO,KAAK,CAAC,gBAAgB;QAC7B,IAAI,CAAC,gBAAgB,GAAG,SAAS,CAAC;QAClC,MAAM,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;IACnC,CAAC;IAEO,mBAAmB,CAAC,CAAoC;QAC/D,IAAI,IAAI,CAAC,gBAAgB,IAAI,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,KAAK,IAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC;YAC/F,IAAI,CAAC,gBAAgB,GAAG,SAAS,CAAC;QACnC,CAAC;QACD,IAAI,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC;IACnC,CAAC;IAEO,kBAAkB;QACzB,IAAI,IAAI,CAAC,gBAAgB,KAAK,IAAI,CAAC,wBAAwB,EAAE,CAAC,4DAA4D,EAAE,CAAC;YAC5H,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;YACpC,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC;QAClC,CAAC;IACF,CAAC;IAGD,IAAY,+BAA+B;QAC1C,IAAI,IAAI,CAAC,sCAAsC,KAAK,IAAI,EAAE,CAAC;YAC1D,IAAI,CAAC,sCAAsC,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,8BAA4B,CAAC,kCAAkC,oCAA2B,CAAC;QAClK,CAAC;QACD,OAAO,IAAI,CAAC,sCAAsC,CAAC;IACpD,CAAC;IAED,IAAY,+BAA+B,CAAC,+BAAmD;QAC9F,IAAI,IAAI,CAAC,sCAAsC,KAAK,+BAA+B,EAAE,CAAC;YACrF,IAAI,CAAC,sCAAsC,GAAG,+BAA+B,CAAC;YAC9E,IAAI,+BAA+B,KAAK,SAAS,EAAE,CAAC;gBACnD,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,8BAA4B,CAAC,kCAAkC,oCAA2B,CAAC;YACvH,CAAC;iBAAM,CAAC;gBACP,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,8BAA4B,CAAC,kCAAkC,EAAE,+BAA+B,mEAAkD,CAAC;YAC9K,CAAC;QACF,CAAC;IACF,CAAC;IAGD,IAAY,gBAAgB;QAC3B,IAAI,IAAI,CAAC,uBAAuB,KAAK,IAAI,EAAE,CAAC;YAC3C,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAChE,CAAC;QACD,OAAO,IAAI,CAAC,uBAAuB,CAAC;IACrC,CAAC;IAED,IAAY,gBAAgB,CAAC,eAAmC;QAC/D,IAAI,IAAI,CAAC,uBAAuB,KAAK,eAAe,EAAE,CAAC;YACtD,IAAI,CAAC,uBAAuB,GAAG,eAAe,CAAC;YAC/C,IAAI,eAAe,KAAK,SAAS,EAAE,CAAC;gBACnC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,sCAAsC,CAAC,CAAC;gBAC7D,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,8BAA4B,CAAC,0BAA0B,oCAA2B,CAAC;YAC/G,CAAC;iBAAM,CAAC;gBACP,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,wCAAwC,EAAE,eAAe,CAAC,CAAC;gBAChF,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,8BAA4B,CAAC,0BAA0B,EAAE,eAAe,mEAAkD,CAAC;YACtJ,CAAC;QACF,CAAC;IACF,CAAC;IAEO,wBAAwB;QAC/B,OAAO,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,8BAA4B,CAAC,0BAA0B,oCAA2B,CAAC;IACnH,CAAC;IAED,IAAY,qBAAqB;QAChC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,8BAA4B,CAAC,uCAAuC,qCAA4B,KAAK,CAAC,CAAC;IAC/I,CAAC;IAED,IAAY,qBAAqB,CAAC,mBAA4B;QAC7D,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,8BAA4B,CAAC,uCAAuC,EAAE,CAAC,mBAAmB,mEAAkD,CAAC;IACxK,CAAC;;AAptBW,4BAA4B;IAkCtC,WAAA,oBAAoB,CAAA;IACpB,WAAA,mBAAmB,CAAA;IACnB,WAAA,sBAAsB,CAAA;IACtB,WAAA,2BAA2B,CAAA;IAC3B,WAAA,kBAAkB,CAAA;IAClB,WAAA,eAAe,CAAA;IACf,WAAA,8BAA8B,CAAA;IAC9B,WAAA,wBAAwB,CAAA;IACxB,WAAA,WAAW,CAAA;IACX,WAAA,eAAe,CAAA;IACf,YAAA,iBAAiB,CAAA;IACjB,YAAA,mCAAmC,CAAA;IACnC,YAAA,qBAAqB,CAAA;IACrB,YAAA,oBAAoB,CAAA;IACpB,YAAA,gBAAgB,CAAA;IAChB,YAAA,cAAc,CAAA;IACd,YAAA,kBAAkB,CAAA;IAClB,YAAA,aAAa,CAAA;IACb,YAAA,sBAAsB,CAAA;IACtB,YAAA,mCAAmC,CAAA;IACnC,YAAA,iBAAiB,CAAA;IACjB,YAAA,qBAAqB,CAAA;IACrB,YAAA,cAAc,CAAA;IACd,YAAA,8BAA8B,CAAA;IAC9B,YAAA,YAAY,CAAA;IACZ,YAAA,kBAAkB,CAAA;IAClB,YAAA,4BAA4B,CAAA;GA5DlB,4BAA4B,CAstBxC;;AAED,iBAAiB,CAAC,6BAA6B,EAAE,4BAA4B,kCAAoF,CAAC","file":"userDataSyncWorkbenchService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IUserDataSyncService, IAuthenticationProvider, isAuthenticationProvider, IUserDataAutoSyncService, IUserDataSyncStoreManagementService, SyncStatus, IUserDataSyncEnablementService, IUserDataSyncResource, IResourcePreview, USER_DATA_SYNC_SCHEME, USER_DATA_SYNC_LOG_ID, } from '../../../../platform/userDataSync/common/userDataSync.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IUserDataSyncWorkbenchService, IUserDataSyncAccount, AccountStatus, CONTEXT_SYNC_ENABLEMENT, CONTEXT_SYNC_STATE, CONTEXT_ACCOUNT_STATE, SHOW_SYNC_LOG_COMMAND_ID, CONTEXT_ENABLE_ACTIVITY_VIEWS, SYNC_VIEW_CONTAINER_ID, SYNC_TITLE, SYNC_CONFLICTS_VIEW_ID, CONTEXT_ENABLE_SYNC_CONFLICTS_VIEW, CONTEXT_HAS_CONFLICTS, IUserDataSyncConflictsView, getSyncAreaLabel } from '../common/userDataSync.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { getCurrentAuthenticationSessionInfo } from '../../authentication/browser/authenticationService.js';\nimport { AuthenticationSession, AuthenticationSessionsChangeEvent, IAuthenticationService } from '../../authentication/common/authentication.js';\nimport { IUserDataSyncAccountService } from '../../../../platform/userDataSync/common/userDataSyncAccount.js';\nimport { IQuickInputService, IQuickPickSeparator } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { IExtensionService } from '../../extensions/common/extensions.js';\nimport { localize } from '../../../../nls.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport { IDialogService, IFileDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IProgressService, ProgressLocation } from '../../../../platform/progress/common/progress.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IViewDescriptorService } from '../../../common/views.js';\nimport { IViewsService } from '../../views/common/viewsService.js';\nimport { ILifecycleService } from '../../lifecycle/common/lifecycle.js';\nimport { isWeb } from '../../../../base/common/platform.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { UserDataSyncStoreClient } from '../../../../platform/userDataSync/common/userDataSyncStoreService.js';\nimport { UserDataSyncStoreTypeSynchronizer } from '../../../../platform/userDataSync/common/globalStateSync.js';\nimport { CancellationError } from '../../../../base/common/errors.js';\nimport { raceCancellationError } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { IEditorService } from '../../editor/common/editorService.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { isDiffEditorInput } from '../../../common/editor.js';\nimport { IBrowserWorkbenchEnvironmentService } from '../../environment/browser/environmentService.js';\nimport { IUserDataInitializationService } from '../../userData/browser/userDataInit.js';\nimport { ISecretStorageService } from '../../../../platform/secrets/common/secrets.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { IUserDataSyncMachinesService } from '../../../../platform/userDataSync/common/userDataSyncMachines.js';\nimport { equals } from '../../../../base/common/arrays.js';\nimport { env } from '../../../../base/common/process.js';\n\ntype AccountQuickPickItem = { label: string; authenticationProvider: IAuthenticationProvider; account?: UserDataSyncAccount; description?: string };\n\nclass UserDataSyncAccount implements IUserDataSyncAccount {\n\n\tconstructor(readonly authenticationProviderId: string, private readonly session: AuthenticationSession) { }\n\n\tget sessionId(): string { return this.session.id; }\n\tget accountName(): string { return this.session.account.label; }\n\tget accountId(): string { return this.session.account.id; }\n\tget token(): string { return this.session.idToken || this.session.accessToken; }\n}\n\ntype MergeEditorInput = { base: URI; input1: { uri: URI }; input2: { uri: URI }; result: URI };\nexport function isMergeEditorInput(editor: unknown): editor is MergeEditorInput {\n\tconst candidate = editor as MergeEditorInput;\n\treturn URI.isUri(candidate?.base) && URI.isUri(candidate?.input1?.uri) && URI.isUri(candidate?.input2?.uri) && URI.isUri(candidate?.result);\n}\n\nexport class UserDataSyncWorkbenchService extends Disposable implements IUserDataSyncWorkbenchService {\n\n\t_serviceBrand: undefined;\n\n\tprivate static DONOT_USE_WORKBENCH_SESSION_STORAGE_KEY = 'userDataSyncAccount.donotUseWorkbenchSession';\n\tprivate static CACHED_AUTHENTICATION_PROVIDER_KEY = 'userDataSyncAccountProvider';\n\tprivate static CACHED_SESSION_STORAGE_KEY = 'userDataSyncAccountPreference';\n\n\tget enabled() { return !!this.userDataSyncStoreManagementService.userDataSyncStore; }\n\n\tprivate _authenticationProviders: IAuthenticationProvider[] = [];\n\tget authenticationProviders() { return this._authenticationProviders; }\n\n\tprivate _accountStatus: AccountStatus = AccountStatus.Uninitialized;\n\tget accountStatus(): AccountStatus { return this._accountStatus; }\n\tprivate readonly _onDidChangeAccountStatus = this._register(new Emitter<AccountStatus>());\n\treadonly onDidChangeAccountStatus = this._onDidChangeAccountStatus.event;\n\n\tprivate readonly _onDidTurnOnSync = this._register(new Emitter<void>());\n\treadonly onDidTurnOnSync = this._onDidTurnOnSync.event;\n\n\tprivate _current: UserDataSyncAccount | undefined;\n\tget current(): UserDataSyncAccount | undefined { return this._current; }\n\n\tprivate readonly syncEnablementContext: IContextKey<boolean>;\n\tprivate readonly syncStatusContext: IContextKey<string>;\n\tprivate readonly accountStatusContext: IContextKey<string>;\n\tprivate readonly enableConflictsViewContext: IContextKey<boolean>;\n\tprivate readonly hasConflicts: IContextKey<boolean>;\n\tprivate readonly activityViewsEnablementContext: IContextKey<boolean>;\n\n\tprivate turnOnSyncCancellationToken: CancellationTokenSource | undefined = undefined;\n\n\tconstructor(\n\t\t@IUserDataSyncService private readonly userDataSyncService: IUserDataSyncService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@IAuthenticationService private readonly authenticationService: IAuthenticationService,\n\t\t@IUserDataSyncAccountService private readonly userDataSyncAccountService: IUserDataSyncAccountService,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IUserDataSyncEnablementService private readonly userDataSyncEnablementService: IUserDataSyncEnablementService,\n\t\t@IUserDataAutoSyncService private readonly userDataAutoSyncService: IUserDataAutoSyncService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IBrowserWorkbenchEnvironmentService private readonly environmentService: IBrowserWorkbenchEnvironmentService,\n\t\t@ISecretStorageService private readonly secretStorageService: ISecretStorageService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IViewsService private readonly viewsService: IViewsService,\n\t\t@IViewDescriptorService private readonly viewDescriptorService: IViewDescriptorService,\n\t\t@IUserDataSyncStoreManagementService private readonly userDataSyncStoreManagementService: IUserDataSyncStoreManagementService,\n\t\t@ILifecycleService private readonly lifecycleService: ILifecycleService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IUserDataInitializationService private readonly userDataInitializationService: IUserDataInitializationService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IFileDialogService private readonly fileDialogService: IFileDialogService,\n\t\t@IUserDataSyncMachinesService private readonly userDataSyncMachinesService: IUserDataSyncMachinesService,\n\t) {\n\t\tsuper();\n\t\tthis.syncEnablementContext = CONTEXT_SYNC_ENABLEMENT.bindTo(contextKeyService);\n\t\tthis.syncStatusContext = CONTEXT_SYNC_STATE.bindTo(contextKeyService);\n\t\tthis.accountStatusContext = CONTEXT_ACCOUNT_STATE.bindTo(contextKeyService);\n\t\tthis.activityViewsEnablementContext = CONTEXT_ENABLE_ACTIVITY_VIEWS.bindTo(contextKeyService);\n\t\tthis.hasConflicts = CONTEXT_HAS_CONFLICTS.bindTo(contextKeyService);\n\t\tthis.enableConflictsViewContext = CONTEXT_ENABLE_SYNC_CONFLICTS_VIEW.bindTo(contextKeyService);\n\n\t\tif (this.userDataSyncStoreManagementService.userDataSyncStore) {\n\t\t\tthis.syncStatusContext.set(this.userDataSyncService.status);\n\t\t\tthis._register(userDataSyncService.onDidChangeStatus(status => this.syncStatusContext.set(status)));\n\t\t\tthis.syncEnablementContext.set(userDataSyncEnablementService.isEnabled());\n\t\t\tthis._register(userDataSyncEnablementService.onDidChangeEnablement(enabled => this.syncEnablementContext.set(enabled)));\n\n\t\t\tthis.waitAndInitialize();\n\t\t}\n\t}\n\n\tprivate updateAuthenticationProviders(): boolean {\n\t\tconst oldValue = this._authenticationProviders;\n\t\tthis._authenticationProviders = (this.userDataSyncStoreManagementService.userDataSyncStore?.authenticationProviders || []).filter(({ id }) => this.authenticationService.declaredProviders.some(provider => provider.id === id));\n\t\tthis.logService.trace('Settings Sync: Authentication providers updated', this._authenticationProviders.map(({ id }) => id));\n\t\treturn equals(oldValue, this._authenticationProviders, (a, b) => a.id === b.id);\n\t}\n\n\tprivate isSupportedAuthenticationProviderId(authenticationProviderId: string): boolean {\n\t\treturn this.authenticationProviders.some(({ id }) => id === authenticationProviderId);\n\t}\n\n\tprivate async waitAndInitialize(): Promise<void> {\n\t\ttry {\n\t\t\t/* wait */\n\t\t\tawait Promise.all([this.extensionService.whenInstalledExtensionsRegistered(), this.userDataInitializationService.whenInitializationFinished()]);\n\n\t\t\t/* initialize */\n\t\t\tawait this.initialize();\n\t\t} catch (error) {\n\t\t\t// Do not log if the current window is running extension tests\n\t\t\tif (!this.environmentService.extensionTestsLocationURI) {\n\t\t\t\tthis.logService.error(error);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async initialize(): Promise<void> {\n\t\tif (isWeb) {\n\t\t\tconst authenticationSession = await getCurrentAuthenticationSessionInfo(this.secretStorageService, this.productService);\n\t\t\tif (this.currentSessionId === undefined && authenticationSession?.id) {\n\t\t\t\tif (this.environmentService.options?.settingsSyncOptions?.authenticationProvider && this.environmentService.options.settingsSyncOptions.enabled) {\n\t\t\t\t\tthis.currentSessionId = authenticationSession.id;\n\t\t\t\t}\n\n\t\t\t\t// Backward compatibility\n\t\t\t\telse if (this.useWorkbenchSessionId) {\n\t\t\t\t\tthis.currentSessionId = authenticationSession.id;\n\t\t\t\t}\n\t\t\t\tthis.useWorkbenchSessionId = false;\n\t\t\t}\n\t\t}\n\n\t\tconst initPromise = this.update('initialize');\n\t\tthis._register(this.authenticationService.onDidChangeDeclaredProviders(() => {\n\t\t\tif (this.updateAuthenticationProviders()) {\n\t\t\t\t// Trigger update only after the initialization is done\n\t\t\t\tinitPromise.finally(() => this.update('declared authentication providers changed'));\n\t\t\t}\n\t\t}));\n\t\tawait initPromise;\n\n\t\tthis._register(Event.filter(\n\t\t\tEvent.any(\n\t\t\t\tthis.authenticationService.onDidRegisterAuthenticationProvider,\n\t\t\t\tthis.authenticationService.onDidUnregisterAuthenticationProvider,\n\t\t\t), info => this.isSupportedAuthenticationProviderId(info.id))(() => this.update('authentication provider change')));\n\n\t\tthis._register(Event.filter(this.userDataSyncAccountService.onTokenFailed, isSuccessive => !isSuccessive)(() => this.update('token failure')));\n\n\t\tthis._register(Event.filter(this.authenticationService.onDidChangeSessions, e => this.isSupportedAuthenticationProviderId(e.providerId))(({ event }) => this.onDidChangeSessions(event)));\n\t\tthis._register(this.storageService.onDidChangeValue(StorageScope.APPLICATION, UserDataSyncWorkbenchService.CACHED_SESSION_STORAGE_KEY, this._store)(() => this.onDidChangeStorage()));\n\t\tthis._register(Event.filter(this.userDataSyncAccountService.onTokenFailed, bailout => bailout)(() => this.onDidAuthFailure()));\n\t\tthis.hasConflicts.set(this.userDataSyncService.conflicts.length > 0);\n\t\tthis._register(this.userDataSyncService.onDidChangeConflicts(conflicts => {\n\t\t\tthis.hasConflicts.set(conflicts.length > 0);\n\t\t\tif (!conflicts.length) {\n\t\t\t\tthis.enableConflictsViewContext.reset();\n\t\t\t}\n\t\t\t// Close merge editors with no conflicts\n\t\t\tthis.editorService.editors.filter(input => {\n\t\t\t\tconst remoteResource = isDiffEditorInput(input) ? input.original.resource : isMergeEditorInput(input) ? input.input1.uri : undefined;\n\t\t\t\tif (remoteResource?.scheme !== USER_DATA_SYNC_SCHEME) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn !this.userDataSyncService.conflicts.some(({ conflicts }) => conflicts.some(({ previewResource }) => this.uriIdentityService.extUri.isEqual(previewResource, input.resource)));\n\t\t\t}).forEach(input => input.dispose());\n\t\t}));\n\t}\n\n\tprivate async update(reason: string): Promise<void> {\n\t\tthis.logService.trace(`Settings Sync: Updating due to ${reason}`);\n\n\t\tthis.updateAuthenticationProviders();\n\t\tawait this.updateCurrentAccount();\n\n\t\tif (this._current) {\n\t\t\tthis.currentAuthenticationProviderId = this._current.authenticationProviderId;\n\t\t}\n\n\t\tawait this.updateToken(this._current);\n\t\tthis.updateAccountStatus(this._current ? AccountStatus.Available : AccountStatus.Unavailable);\n\t}\n\n\tprivate async updateCurrentAccount(): Promise<void> {\n\t\tthis.logService.trace('Settings Sync: Updating the current account');\n\t\tconst currentSessionId = this.currentSessionId;\n\t\tconst currentAuthenticationProviderId = this.currentAuthenticationProviderId;\n\t\tif (currentSessionId) {\n\t\t\tconst authenticationProviders = currentAuthenticationProviderId ? this.authenticationProviders.filter(({ id }) => id === currentAuthenticationProviderId) : this.authenticationProviders;\n\t\t\tfor (const { id, scopes } of authenticationProviders) {\n\t\t\t\tconst sessions = (await this.authenticationService.getSessions(id, scopes)) || [];\n\t\t\t\tfor (const session of sessions) {\n\t\t\t\t\tif (session.id === currentSessionId) {\n\t\t\t\t\t\tthis._current = new UserDataSyncAccount(id, session);\n\t\t\t\t\t\tthis.logService.trace('Settings Sync: Updated the current account', this._current.accountName);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._current = undefined;\n\t}\n\n\tprivate async updateToken(current: UserDataSyncAccount | undefined): Promise<void> {\n\t\tlet value: { token: string; authenticationProviderId: string } | undefined = undefined;\n\t\tif (current) {\n\t\t\ttry {\n\t\t\t\tconst token = current.token;\n\t\t\t\tvalue = { token, authenticationProviderId: current.authenticationProviderId };\n\t\t\t} catch (e) {\n\t\t\t\tthis.logService.error(e);\n\t\t\t}\n\t\t}\n\t\tawait this.userDataSyncAccountService.updateAccount(value);\n\t}\n\n\tprivate updateAccountStatus(accountStatus: AccountStatus): void {\n\t\tthis.logService.trace(`Settings Sync: Updating the account status to ${accountStatus}`);\n\t\tif (this._accountStatus !== accountStatus) {\n\t\t\tconst previous = this._accountStatus;\n\t\t\tconst logMsg = `Settings Sync: Account status changed from ${previous} to ${accountStatus}`;\n\t\t\tif (env.VSCODE_DEV) {\n\t\t\t\tthis.logService.trace(logMsg);\n\t\t\t} else {\n\t\t\t\tthis.logService.info(logMsg);\n\t\t\t}\n\n\t\t\tthis._accountStatus = accountStatus;\n\t\t\tthis.accountStatusContext.set(accountStatus);\n\t\t\tthis._onDidChangeAccountStatus.fire(accountStatus);\n\t\t}\n\t}\n\n\tasync turnOn(): Promise<void> {\n\t\tif (!this.authenticationProviders.length) {\n\t\t\tthrow new Error(localize('no authentication providers', \"Settings sync cannot be turned on because there are no authentication providers available.\"));\n\t\t}\n\t\tif (this.userDataSyncEnablementService.isEnabled()) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.userDataSyncService.status !== SyncStatus.Idle) {\n\t\t\tthrow new Error('Cannot turn on sync while syncing');\n\t\t}\n\n\t\tconst picked = await this.pick();\n\t\tif (!picked) {\n\t\t\tthrow new CancellationError();\n\t\t}\n\n\t\t// User did not pick an account or login failed\n\t\tif (this.accountStatus !== AccountStatus.Available) {\n\t\t\tthrow new Error(localize('no account', \"No account available\"));\n\t\t}\n\n\t\tconst turnOnSyncCancellationToken = this.turnOnSyncCancellationToken = new CancellationTokenSource();\n\t\tconst disposable = isWeb ? Disposable.None : this.lifecycleService.onBeforeShutdown(e => e.veto((async () => {\n\t\t\tconst { confirmed } = await this.dialogService.confirm({\n\t\t\t\ttype: 'warning',\n\t\t\t\tmessage: localize('sync in progress', \"Settings Sync is being turned on. Would you like to cancel it?\"),\n\t\t\t\ttitle: localize('settings sync', \"Settings Sync\"),\n\t\t\t\tprimaryButton: localize({ key: 'yes', comment: ['&& denotes a mnemonic'] }, \"&&Yes\"),\n\t\t\t\tcancelButton: localize('no', \"No\")\n\t\t\t});\n\t\t\tif (confirmed) {\n\t\t\t\tturnOnSyncCancellationToken.cancel();\n\t\t\t}\n\t\t\treturn !confirmed;\n\t\t})(), 'veto.settingsSync'));\n\t\ttry {\n\t\t\tawait this.doTurnOnSync(turnOnSyncCancellationToken.token);\n\t\t} finally {\n\t\t\tdisposable.dispose();\n\t\t\tthis.turnOnSyncCancellationToken = undefined;\n\t\t}\n\t\tawait this.userDataAutoSyncService.turnOn();\n\n\t\tif (this.userDataSyncStoreManagementService.userDataSyncStore?.canSwitch) {\n\t\t\tawait this.synchroniseUserDataSyncStoreType();\n\t\t}\n\n\t\tthis.currentAuthenticationProviderId = this.current?.authenticationProviderId;\n\t\tif (this.environmentService.options?.settingsSyncOptions?.enablementHandler && this.currentAuthenticationProviderId) {\n\t\t\tthis.environmentService.options.settingsSyncOptions.enablementHandler(true, this.currentAuthenticationProviderId);\n\t\t}\n\n\t\tthis.notificationService.info(localize('sync turned on', \"{0} is turned on\", SYNC_TITLE.value));\n\t\tthis._onDidTurnOnSync.fire();\n\t}\n\n\tasync turnoff(everywhere: boolean): Promise<void> {\n\t\tif (this.userDataSyncEnablementService.isEnabled()) {\n\t\t\tawait this.userDataAutoSyncService.turnOff(everywhere);\n\t\t\tif (this.environmentService.options?.settingsSyncOptions?.enablementHandler && this.currentAuthenticationProviderId) {\n\t\t\t\tthis.environmentService.options.settingsSyncOptions.enablementHandler(false, this.currentAuthenticationProviderId);\n\t\t\t}\n\t\t}\n\t\tif (this.turnOnSyncCancellationToken) {\n\t\t\tthis.turnOnSyncCancellationToken.cancel();\n\t\t}\n\t}\n\n\tasync synchroniseUserDataSyncStoreType(): Promise<void> {\n\t\tif (!this.userDataSyncAccountService.account) {\n\t\t\tthrow new Error('Cannot update because you are signed out from settings sync. Please sign in and try again.');\n\t\t}\n\t\tif (!isWeb || !this.userDataSyncStoreManagementService.userDataSyncStore) {\n\t\t\t// Not supported\n\t\t\treturn;\n\t\t}\n\n\t\tconst userDataSyncStoreUrl = this.userDataSyncStoreManagementService.userDataSyncStore.type === 'insiders' ? this.userDataSyncStoreManagementService.userDataSyncStore.stableUrl : this.userDataSyncStoreManagementService.userDataSyncStore.insidersUrl;\n\t\tconst userDataSyncStoreClient = this.instantiationService.createInstance(UserDataSyncStoreClient, userDataSyncStoreUrl);\n\t\tuserDataSyncStoreClient.setAuthToken(this.userDataSyncAccountService.account.token, this.userDataSyncAccountService.account.authenticationProviderId);\n\t\tawait this.instantiationService.createInstance(UserDataSyncStoreTypeSynchronizer, userDataSyncStoreClient).sync(this.userDataSyncStoreManagementService.userDataSyncStore.type);\n\t}\n\n\tsyncNow(): Promise<void> {\n\t\treturn this.userDataAutoSyncService.triggerSync(['Sync Now'], { immediately: true, disableCache: true });\n\t}\n\n\tprivate async doTurnOnSync(token: CancellationToken): Promise<void> {\n\t\tconst disposables = new DisposableStore();\n\t\tconst manualSyncTask = await this.userDataSyncService.createManualSyncTask();\n\t\ttry {\n\t\t\tawait this.progressService.withProgress({\n\t\t\t\tlocation: ProgressLocation.Window,\n\t\t\t\ttitle: SYNC_TITLE.value,\n\t\t\t\tcommand: SHOW_SYNC_LOG_COMMAND_ID,\n\t\t\t\tdelay: 500,\n\t\t\t}, async progress => {\n\t\t\t\tprogress.report({ message: localize('turning on', \"Turning on...\") });\n\t\t\t\tdisposables.add(this.userDataSyncService.onDidChangeStatus(status => {\n\t\t\t\t\tif (status === SyncStatus.HasConflicts) {\n\t\t\t\t\t\tprogress.report({ message: localize('resolving conflicts', \"Resolving conflicts...\") });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprogress.report({ message: localize('syncing...', \"Turning on...\") });\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\tawait manualSyncTask.merge();\n\t\t\t\tif (this.userDataSyncService.status === SyncStatus.HasConflicts) {\n\t\t\t\t\tawait this.handleConflictsWhileTurningOn(token);\n\t\t\t\t}\n\t\t\t\tawait manualSyncTask.apply();\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tawait manualSyncTask.stop();\n\t\t\tthrow error;\n\t\t} finally {\n\t\t\tdisposables.dispose();\n\t\t}\n\t}\n\n\tprivate async handleConflictsWhileTurningOn(token: CancellationToken): Promise<void> {\n\t\tconst conflicts = this.userDataSyncService.conflicts;\n\t\tconst andSeparator = localize('and', ' and ');\n\t\tlet conflictsText = '';\n\t\tfor (let i = 0; i < conflicts.length; i++) {\n\t\t\tif (i === conflicts.length - 1 && i !== 0) {\n\t\t\t\tconflictsText += andSeparator;\n\t\t\t} else if (i !== 0) {\n\t\t\t\tconflictsText += ', ';\n\t\t\t}\n\t\t\tconflictsText += getSyncAreaLabel(conflicts[i].syncResource);\n\t\t}\n\t\tconst singleConflictResource = conflicts.length === 1 ? getSyncAreaLabel(conflicts[0].syncResource) : undefined;\n\t\tawait this.dialogService.prompt({\n\t\t\ttype: Severity.Warning,\n\t\t\tmessage: localize('conflicts detected', \"Conflicts Detected in {0}\", conflictsText),\n\t\t\tdetail: localize('resolve', \"Please resolve conflicts to turn on...\"),\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\tlabel: localize({ key: 'show conflicts', comment: ['&& denotes a mnemonic'] }, \"&&Show Conflicts\"),\n\t\t\t\t\trun: async () => {\n\t\t\t\t\t\tconst waitUntilConflictsAreResolvedPromise = raceCancellationError(Event.toPromise(Event.filter(this.userDataSyncService.onDidChangeConflicts, conficts => conficts.length === 0)), token);\n\t\t\t\t\t\tawait this.showConflicts(this.userDataSyncService.conflicts[0]?.conflicts[0]);\n\t\t\t\t\t\tawait waitUntilConflictsAreResolvedPromise;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: singleConflictResource ? localize({ key: 'replace local single', comment: ['&& denotes a mnemonic'] }, \"Accept &&Remote {0}\", singleConflictResource) : localize({ key: 'replace local', comment: ['&& denotes a mnemonic'] }, \"Accept &&Remote\"),\n\t\t\t\t\trun: async () => this.replace(true)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: singleConflictResource ? localize({ key: 'replace remote single', comment: ['&& denotes a mnemonic'] }, \"Accept &&Local {0}\", singleConflictResource) : localize({ key: 'replace remote', comment: ['&& denotes a mnemonic'] }, \"Accept &&Local\"),\n\t\t\t\t\trun: () => this.replace(false)\n\t\t\t\t},\n\t\t\t],\n\t\t\tcancelButton: {\n\t\t\t\trun: () => {\n\t\t\t\t\tthrow new CancellationError();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async replace(local: boolean): Promise<void> {\n\t\tfor (const conflict of this.userDataSyncService.conflicts) {\n\t\t\tfor (const preview of conflict.conflicts) {\n\t\t\t\tawait this.accept({ syncResource: conflict.syncResource, profile: conflict.profile }, local ? preview.remoteResource : preview.localResource, undefined, { force: true });\n\t\t\t}\n\t\t}\n\t}\n\n\tasync accept(resource: IUserDataSyncResource, conflictResource: URI, content: string | null | undefined, apply: boolean | { force: boolean }): Promise<void> {\n\t\treturn this.userDataSyncService.accept(resource, conflictResource, content, apply);\n\t}\n\n\tasync showConflicts(conflictToOpen?: IResourcePreview): Promise<void> {\n\t\tif (!this.userDataSyncService.conflicts.length) {\n\t\t\treturn;\n\t\t}\n\t\tthis.enableConflictsViewContext.set(true);\n\t\tconst view = await this.viewsService.openView<IUserDataSyncConflictsView>(SYNC_CONFLICTS_VIEW_ID);\n\t\tif (view && conflictToOpen) {\n\t\t\tawait view.open(conflictToOpen);\n\t\t}\n\t}\n\n\tasync resetSyncedData(): Promise<void> {\n\t\tconst { confirmed } = await this.dialogService.confirm({\n\t\t\ttype: 'info',\n\t\t\tmessage: localize('reset', \"This will clear your data in the cloud and stop sync on all your devices.\"),\n\t\t\ttitle: localize('reset title', \"Clear\"),\n\t\t\tprimaryButton: localize({ key: 'resetButton', comment: ['&& denotes a mnemonic'] }, \"&&Reset\"),\n\t\t});\n\t\tif (confirmed) {\n\t\t\tawait this.userDataSyncService.resetRemote();\n\t\t}\n\t}\n\n\tasync getAllLogResources(): Promise<URI[]> {\n\t\tconst logsFolders: URI[] = [];\n\t\tconst stat = await this.fileService.resolve(this.uriIdentityService.extUri.dirname(this.environmentService.logsHome));\n\t\tif (stat.children) {\n\t\t\tlogsFolders.push(...stat.children\n\t\t\t\t.filter(stat => stat.isDirectory && /^\\d{8}T\\d{6}$/.test(stat.name))\n\t\t\t\t.sort()\n\t\t\t\t.reverse()\n\t\t\t\t.map(d => d.resource));\n\t\t}\n\t\tconst result: URI[] = [];\n\t\tfor (const logFolder of logsFolders) {\n\t\t\tconst folderStat = await this.fileService.resolve(logFolder);\n\t\t\tconst childStat = folderStat.children?.find(stat => this.uriIdentityService.extUri.basename(stat.resource).startsWith(`${USER_DATA_SYNC_LOG_ID}.`));\n\t\t\tif (childStat) {\n\t\t\t\tresult.push(childStat.resource);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tasync showSyncActivity(): Promise<void> {\n\t\tthis.activityViewsEnablementContext.set(true);\n\t\tawait this.waitForActiveSyncViews();\n\t\tawait this.viewsService.openViewContainer(SYNC_VIEW_CONTAINER_ID);\n\t}\n\n\tasync downloadSyncActivity(): Promise<URI | undefined> {\n\t\tconst result = await this.fileDialogService.showOpenDialog({\n\t\t\ttitle: localize('download sync activity dialog title', \"Select folder to download Settings Sync activity\"),\n\t\t\tcanSelectFiles: false,\n\t\t\tcanSelectFolders: true,\n\t\t\tcanSelectMany: false,\n\t\t\topenLabel: localize('download sync activity dialog open label', \"Save\"),\n\t\t});\n\n\t\tif (!result?.[0]) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.progressService.withProgress({ location: ProgressLocation.Window }, async () => {\n\t\t\tconst machines = await this.userDataSyncMachinesService.getMachines();\n\t\t\tconst currentMachine = machines.find(m => m.isCurrent);\n\t\t\tconst name = (currentMachine ? currentMachine.name + ' - ' : '') + 'Settings Sync Activity';\n\t\t\tconst stat = await this.fileService.resolve(result[0]);\n\n\t\t\tconst nameRegEx = new RegExp(`${escapeRegExpCharacters(name)}\\\\s(\\\\d+)`);\n\t\t\tconst indexes: number[] = [];\n\t\t\tfor (const child of stat.children ?? []) {\n\t\t\t\tif (child.name === name) {\n\t\t\t\t\tindexes.push(0);\n\t\t\t\t} else {\n\t\t\t\t\tconst matches = nameRegEx.exec(child.name);\n\t\t\t\t\tif (matches) {\n\t\t\t\t\t\tindexes.push(parseInt(matches[1]));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tindexes.sort((a, b) => a - b);\n\n\t\t\tconst folder = this.uriIdentityService.extUri.joinPath(result[0], indexes[0] !== 0 ? name : `${name} ${indexes[indexes.length - 1] + 1}`);\n\t\t\tawait Promise.all([\n\t\t\t\tthis.userDataSyncService.saveRemoteActivityData(this.uriIdentityService.extUri.joinPath(folder, 'remoteActivity.json')),\n\t\t\t\t(async () => {\n\t\t\t\t\tconst logResources = await this.getAllLogResources();\n\t\t\t\t\tawait Promise.all(logResources.map(async logResource => this.fileService.copy(logResource, this.uriIdentityService.extUri.joinPath(folder, 'logs', `${this.uriIdentityService.extUri.basename(this.uriIdentityService.extUri.dirname(logResource))}.log`))));\n\t\t\t\t})(),\n\t\t\t\tthis.fileService.copy(this.environmentService.userDataSyncHome, this.uriIdentityService.extUri.joinPath(folder, 'localActivity')),\n\t\t\t]);\n\t\t\treturn folder;\n\t\t});\n\t}\n\n\tprivate async waitForActiveSyncViews(): Promise<void> {\n\t\tconst viewContainer = this.viewDescriptorService.getViewContainerById(SYNC_VIEW_CONTAINER_ID);\n\t\tif (viewContainer) {\n\t\t\tconst model = this.viewDescriptorService.getViewContainerModel(viewContainer);\n\t\t\tif (!model.activeViewDescriptors.length) {\n\t\t\t\tawait Event.toPromise(Event.filter(model.onDidChangeActiveViewDescriptors, e => model.activeViewDescriptors.length > 0));\n\t\t\t}\n\t\t}\n\t}\n\n\tasync signIn(): Promise<void> {\n\t\tconst currentAuthenticationProviderId = this.currentAuthenticationProviderId;\n\t\tconst authenticationProvider = currentAuthenticationProviderId ? this.authenticationProviders.find(p => p.id === currentAuthenticationProviderId) : undefined;\n\t\tif (authenticationProvider) {\n\t\t\tawait this.doSignIn(authenticationProvider);\n\t\t} else {\n\t\t\tif (!this.authenticationProviders.length) {\n\t\t\t\tthrow new Error(localize('no authentication providers during signin', \"Cannot sign in because there are no authentication providers available.\"));\n\t\t\t}\n\t\t\tawait this.pick();\n\t\t}\n\t}\n\n\tprivate async pick(): Promise<boolean> {\n\t\tconst result = await this.doPick();\n\t\tif (!result) {\n\t\t\treturn false;\n\t\t}\n\t\tawait this.doSignIn(result);\n\t\treturn true;\n\t}\n\n\tprivate async doPick(): Promise<UserDataSyncAccount | IAuthenticationProvider | undefined> {\n\t\tif (this.authenticationProviders.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst authenticationProviders = [...this.authenticationProviders].sort(({ id }) => id === this.currentAuthenticationProviderId ? -1 : 1);\n\t\tconst allAccounts = new Map<string, UserDataSyncAccount[]>();\n\n\t\tif (authenticationProviders.length === 1) {\n\t\t\tconst accounts = await this.getAccounts(authenticationProviders[0].id, authenticationProviders[0].scopes);\n\t\t\tif (accounts.length) {\n\t\t\t\tallAccounts.set(authenticationProviders[0].id, accounts);\n\t\t\t} else {\n\t\t\t\t// Single auth provider and no accounts\n\t\t\t\treturn authenticationProviders[0];\n\t\t\t}\n\t\t}\n\n\t\tlet result: UserDataSyncAccount | IAuthenticationProvider | undefined;\n\t\tconst disposables: DisposableStore = new DisposableStore();\n\t\tconst quickPick = disposables.add(this.quickInputService.createQuickPick<AccountQuickPickItem>({ useSeparators: true }));\n\n\t\tconst promise = new Promise<UserDataSyncAccount | IAuthenticationProvider | undefined>(c => {\n\t\t\tdisposables.add(quickPick.onDidHide(() => {\n\t\t\t\tdisposables.dispose();\n\t\t\t\tc(result);\n\t\t\t}));\n\t\t});\n\n\t\tquickPick.title = SYNC_TITLE.value;\n\t\tquickPick.ok = false;\n\t\tquickPick.ignoreFocusOut = true;\n\t\tquickPick.placeholder = localize('choose account placeholder', \"Select an account to sign in\");\n\t\tquickPick.show();\n\n\t\tif (authenticationProviders.length > 1) {\n\t\t\tquickPick.busy = true;\n\t\t\tfor (const { id, scopes } of authenticationProviders) {\n\t\t\t\tconst accounts = await this.getAccounts(id, scopes);\n\t\t\t\tif (accounts.length) {\n\t\t\t\t\tallAccounts.set(id, accounts);\n\t\t\t\t}\n\t\t\t}\n\t\t\tquickPick.busy = false;\n\t\t}\n\n\t\tquickPick.items = this.createQuickpickItems(authenticationProviders, allAccounts);\n\t\tdisposables.add(quickPick.onDidAccept(() => {\n\t\t\tresult = quickPick.selectedItems[0]?.account ? quickPick.selectedItems[0]?.account : quickPick.selectedItems[0]?.authenticationProvider;\n\t\t\tquickPick.hide();\n\t\t}));\n\n\t\treturn promise;\n\t}\n\n\tprivate async getAccounts(authenticationProviderId: string, scopes: string[]): Promise<UserDataSyncAccount[]> {\n\t\tconst accounts: Map<string, UserDataSyncAccount> = new Map<string, UserDataSyncAccount>();\n\t\tlet currentAccount: UserDataSyncAccount | null = null;\n\n\t\tconst sessions = await this.authenticationService.getSessions(authenticationProviderId, scopes) || [];\n\t\tfor (const session of sessions) {\n\t\t\tconst account: UserDataSyncAccount = new UserDataSyncAccount(authenticationProviderId, session);\n\t\t\taccounts.set(account.accountId, account);\n\t\t\tif (account.sessionId === this.currentSessionId) {\n\t\t\t\tcurrentAccount = account;\n\t\t\t}\n\t\t}\n\n\t\tif (currentAccount) {\n\t\t\t// Always use current account if available\n\t\t\taccounts.set(currentAccount.accountId, currentAccount);\n\t\t}\n\n\t\treturn currentAccount ? [...accounts.values()] : [...accounts.values()].sort(({ sessionId }) => sessionId === this.currentSessionId ? -1 : 1);\n\t}\n\n\tprivate createQuickpickItems(authenticationProviders: IAuthenticationProvider[], allAccounts: Map<string, UserDataSyncAccount[]>): (AccountQuickPickItem | IQuickPickSeparator)[] {\n\t\tconst quickPickItems: (AccountQuickPickItem | IQuickPickSeparator)[] = [];\n\n\t\t// Signed in Accounts\n\t\tif (allAccounts.size) {\n\t\t\tquickPickItems.push({ type: 'separator', label: localize('signed in', \"Signed in\") });\n\t\t\tfor (const authenticationProvider of authenticationProviders) {\n\t\t\t\tconst accounts = (allAccounts.get(authenticationProvider.id) || []).sort(({ sessionId }) => sessionId === this.currentSessionId ? -1 : 1);\n\t\t\t\tconst providerName = this.authenticationService.getProvider(authenticationProvider.id).label;\n\t\t\t\tfor (const account of accounts) {\n\t\t\t\t\tquickPickItems.push({\n\t\t\t\t\t\tlabel: `${account.accountName} (${providerName})`,\n\t\t\t\t\t\tdescription: account.sessionId === this.current?.sessionId ? localize('last used', \"Last Used with Sync\") : undefined,\n\t\t\t\t\t\taccount,\n\t\t\t\t\t\tauthenticationProvider,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tquickPickItems.push({ type: 'separator', label: localize('others', \"Others\") });\n\t\t}\n\n\t\t// Account Providers\n\t\tfor (const authenticationProvider of authenticationProviders) {\n\t\t\tconst provider = this.authenticationService.getProvider(authenticationProvider.id);\n\t\t\tif (!allAccounts.has(authenticationProvider.id) || provider.supportsMultipleAccounts) {\n\t\t\t\tconst providerName = provider.label;\n\t\t\t\tquickPickItems.push({ label: localize('sign in using account', \"Sign in with {0}\", providerName), authenticationProvider });\n\t\t\t}\n\t\t}\n\n\t\treturn quickPickItems;\n\t}\n\n\tprivate async doSignIn(accountOrAuthProvider: UserDataSyncAccount | IAuthenticationProvider): Promise<void> {\n\t\tlet sessionId: string;\n\t\tif (isAuthenticationProvider(accountOrAuthProvider)) {\n\t\t\tif (this.environmentService.options?.settingsSyncOptions?.authenticationProvider?.id === accountOrAuthProvider.id) {\n\t\t\t\tsessionId = await this.environmentService.options?.settingsSyncOptions?.authenticationProvider?.signIn();\n\t\t\t} else {\n\t\t\t\tsessionId = (await this.authenticationService.createSession(accountOrAuthProvider.id, accountOrAuthProvider.scopes)).id;\n\t\t\t}\n\t\t\tthis.currentAuthenticationProviderId = accountOrAuthProvider.id;\n\t\t} else {\n\t\t\tif (this.environmentService.options?.settingsSyncOptions?.authenticationProvider?.id === accountOrAuthProvider.authenticationProviderId) {\n\t\t\t\tsessionId = await this.environmentService.options?.settingsSyncOptions?.authenticationProvider?.signIn();\n\t\t\t} else {\n\t\t\t\tsessionId = accountOrAuthProvider.sessionId;\n\t\t\t}\n\t\t\tthis.currentAuthenticationProviderId = accountOrAuthProvider.authenticationProviderId;\n\t\t}\n\t\tthis.currentSessionId = sessionId;\n\t\tawait this.update('sign in');\n\t}\n\n\tprivate async onDidAuthFailure(): Promise<void> {\n\t\tthis.currentSessionId = undefined;\n\t\tawait this.update('auth failure');\n\t}\n\n\tprivate onDidChangeSessions(e: AuthenticationSessionsChangeEvent): void {\n\t\tif (this.currentSessionId && e.removed?.find(session => session.id === this.currentSessionId)) {\n\t\t\tthis.currentSessionId = undefined;\n\t\t}\n\t\tthis.update('change in sessions');\n\t}\n\n\tprivate onDidChangeStorage(): void {\n\t\tif (this.currentSessionId !== this.getStoredCachedSessionId() /* This checks if current window changed the value or not */) {\n\t\t\tthis._cachedCurrentSessionId = null;\n\t\t\tthis.update('change in storage');\n\t\t}\n\t}\n\n\tprivate _cachedCurrentAuthenticationProviderId: string | undefined | null = null;\n\tprivate get currentAuthenticationProviderId(): string | undefined {\n\t\tif (this._cachedCurrentAuthenticationProviderId === null) {\n\t\t\tthis._cachedCurrentAuthenticationProviderId = this.storageService.get(UserDataSyncWorkbenchService.CACHED_AUTHENTICATION_PROVIDER_KEY, StorageScope.APPLICATION);\n\t\t}\n\t\treturn this._cachedCurrentAuthenticationProviderId;\n\t}\n\n\tprivate set currentAuthenticationProviderId(currentAuthenticationProviderId: string | undefined) {\n\t\tif (this._cachedCurrentAuthenticationProviderId !== currentAuthenticationProviderId) {\n\t\t\tthis._cachedCurrentAuthenticationProviderId = currentAuthenticationProviderId;\n\t\t\tif (currentAuthenticationProviderId === undefined) {\n\t\t\t\tthis.storageService.remove(UserDataSyncWorkbenchService.CACHED_AUTHENTICATION_PROVIDER_KEY, StorageScope.APPLICATION);\n\t\t\t} else {\n\t\t\t\tthis.storageService.store(UserDataSyncWorkbenchService.CACHED_AUTHENTICATION_PROVIDER_KEY, currentAuthenticationProviderId, StorageScope.APPLICATION, StorageTarget.MACHINE);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _cachedCurrentSessionId: string | undefined | null = null;\n\tprivate get currentSessionId(): string | undefined {\n\t\tif (this._cachedCurrentSessionId === null) {\n\t\t\tthis._cachedCurrentSessionId = this.getStoredCachedSessionId();\n\t\t}\n\t\treturn this._cachedCurrentSessionId;\n\t}\n\n\tprivate set currentSessionId(cachedSessionId: string | undefined) {\n\t\tif (this._cachedCurrentSessionId !== cachedSessionId) {\n\t\t\tthis._cachedCurrentSessionId = cachedSessionId;\n\t\t\tif (cachedSessionId === undefined) {\n\t\t\t\tthis.logService.info('Settings Sync: Reset current session');\n\t\t\t\tthis.storageService.remove(UserDataSyncWorkbenchService.CACHED_SESSION_STORAGE_KEY, StorageScope.APPLICATION);\n\t\t\t} else {\n\t\t\t\tthis.logService.info('Settings Sync: Updated current session', cachedSessionId);\n\t\t\t\tthis.storageService.store(UserDataSyncWorkbenchService.CACHED_SESSION_STORAGE_KEY, cachedSessionId, StorageScope.APPLICATION, StorageTarget.MACHINE);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getStoredCachedSessionId(): string | undefined {\n\t\treturn this.storageService.get(UserDataSyncWorkbenchService.CACHED_SESSION_STORAGE_KEY, StorageScope.APPLICATION);\n\t}\n\n\tprivate get useWorkbenchSessionId(): boolean {\n\t\treturn !this.storageService.getBoolean(UserDataSyncWorkbenchService.DONOT_USE_WORKBENCH_SESSION_STORAGE_KEY, StorageScope.APPLICATION, false);\n\t}\n\n\tprivate set useWorkbenchSessionId(useWorkbenchSession: boolean) {\n\t\tthis.storageService.store(UserDataSyncWorkbenchService.DONOT_USE_WORKBENCH_SESSION_STORAGE_KEY, !useWorkbenchSession, StorageScope.APPLICATION, StorageTarget.MACHINE);\n\t}\n\n}\n\nregisterSingleton(IUserDataSyncWorkbenchService, UserDataSyncWorkbenchService, InstantiationType.Eager /* Eager because it initializes settings sync accounts */);\n"]}