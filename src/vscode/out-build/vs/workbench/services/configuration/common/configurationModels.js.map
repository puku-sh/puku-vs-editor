{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/configuration/common/configurationModels.ts","vs/workbench/services/configuration/common/configurationModels.ts"],"names":[],"mappings":"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","file":"configurationModels.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { equals } from '../../../../base/common/objects.js';\nimport { toValuesTree, IConfigurationModel, IConfigurationOverrides, IConfigurationValue, IConfigurationChange } from '../../../../platform/configuration/common/configuration.js';\nimport { Configuration as BaseConfiguration, ConfigurationModelParser, ConfigurationModel, ConfigurationParseOptions } from '../../../../platform/configuration/common/configurationModels.js';\nimport { IStoredWorkspaceFolder } from '../../../../platform/workspaces/common/workspaces.js';\nimport { Workspace } from '../../../../platform/workspace/common/workspace.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { isBoolean } from '../../../../base/common/types.js';\nimport { distinct } from '../../../../base/common/arrays.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IStringDictionary } from '../../../../base/common/collections.js';\n\nexport class WorkspaceConfigurationModelParser extends ConfigurationModelParser {\n\n\tprivate _folders: IStoredWorkspaceFolder[] = [];\n\tprivate _transient: boolean = false;\n\tprivate _settingsModelParser: ConfigurationModelParser;\n\tprivate _launchModel: ConfigurationModel;\n\tprivate _tasksModel: ConfigurationModel;\n\n\tconstructor(name: string, logService: ILogService) {\n\t\tsuper(name, logService);\n\t\tthis._settingsModelParser = new ConfigurationModelParser(name, logService);\n\t\tthis._launchModel = ConfigurationModel.createEmptyModel(logService);\n\t\tthis._tasksModel = ConfigurationModel.createEmptyModel(logService);\n\t}\n\n\tget folders(): IStoredWorkspaceFolder[] {\n\t\treturn this._folders;\n\t}\n\n\tget transient(): boolean {\n\t\treturn this._transient;\n\t}\n\n\tget settingsModel(): ConfigurationModel {\n\t\treturn this._settingsModelParser.configurationModel;\n\t}\n\n\tget launchModel(): ConfigurationModel {\n\t\treturn this._launchModel;\n\t}\n\n\tget tasksModel(): ConfigurationModel {\n\t\treturn this._tasksModel;\n\t}\n\n\treparseWorkspaceSettings(configurationParseOptions: ConfigurationParseOptions): void {\n\t\tthis._settingsModelParser.reparse(configurationParseOptions);\n\t}\n\n\tgetRestrictedWorkspaceSettings(): string[] {\n\t\treturn this._settingsModelParser.restrictedConfigurations;\n\t}\n\n\tprotected override doParseRaw(raw: IStringDictionary<unknown>, configurationParseOptions?: ConfigurationParseOptions): IConfigurationModel {\n\t\tthis._folders = (raw['folders'] || []) as IStoredWorkspaceFolder[];\n\t\tthis._transient = isBoolean(raw['transient']) && raw['transient'];\n\t\tthis._settingsModelParser.parseRaw(raw['settings'] as IStringDictionary<unknown>, configurationParseOptions);\n\t\tthis._launchModel = this.createConfigurationModelFrom(raw, 'launch');\n\t\tthis._tasksModel = this.createConfigurationModelFrom(raw, 'tasks');\n\t\treturn super.doParseRaw(raw, configurationParseOptions);\n\t}\n\n\tprivate createConfigurationModelFrom(raw: IStringDictionary<unknown>, key: string): ConfigurationModel {\n\t\tconst data = raw[key] as IStringDictionary<unknown> | undefined;\n\t\tif (data) {\n\t\t\tconst contents = toValuesTree(data, message => console.error(`Conflict in settings file ${this._name}: ${message}`));\n\t\t\tconst scopedContents = Object.create(null);\n\t\t\tscopedContents[key] = contents;\n\t\t\tconst keys = Object.keys(data).map(k => `${key}.${k}`);\n\t\t\treturn new ConfigurationModel(scopedContents, keys, [], undefined, this.logService);\n\t\t}\n\t\treturn ConfigurationModel.createEmptyModel(this.logService);\n\t}\n}\n\nexport class StandaloneConfigurationModelParser extends ConfigurationModelParser {\n\n\tconstructor(name: string, private readonly scope: string, logService: ILogService,) {\n\t\tsuper(name, logService);\n\t}\n\n\tprotected override doParseRaw(raw: IStringDictionary<unknown>, configurationParseOptions?: ConfigurationParseOptions): IConfigurationModel {\n\t\tconst contents = toValuesTree(raw, message => console.error(`Conflict in settings file ${this._name}: ${message}`));\n\t\tconst scopedContents = Object.create(null);\n\t\tscopedContents[this.scope] = contents;\n\t\tconst keys = Object.keys(raw).map(key => `${this.scope}.${key}`);\n\t\treturn { contents: scopedContents, keys, overrides: [] };\n\t}\n\n}\n\nexport class Configuration extends BaseConfiguration {\n\n\tconstructor(\n\t\tdefaults: ConfigurationModel,\n\t\tpolicy: ConfigurationModel,\n\t\tapplication: ConfigurationModel,\n\t\tlocalUser: ConfigurationModel,\n\t\tremoteUser: ConfigurationModel,\n\t\tworkspaceConfiguration: ConfigurationModel,\n\t\tfolders: ResourceMap<ConfigurationModel>,\n\t\tmemoryConfiguration: ConfigurationModel,\n\t\tmemoryConfigurationByResource: ResourceMap<ConfigurationModel>,\n\t\tprivate readonly _workspace: Workspace | undefined,\n\t\tlogService: ILogService\n\t) {\n\t\tsuper(defaults, policy, application, localUser, remoteUser, workspaceConfiguration, folders, memoryConfiguration, memoryConfigurationByResource, logService);\n\t}\n\n\toverride getValue(key: string | undefined, overrides: IConfigurationOverrides = {}): unknown {\n\t\treturn super.getValue(key, overrides, this._workspace);\n\t}\n\n\toverride inspect<C>(key: string, overrides: IConfigurationOverrides = {}): IConfigurationValue<C> {\n\t\treturn super.inspect(key, overrides, this._workspace);\n\t}\n\n\toverride keys(): {\n\t\tdefault: string[];\n\t\tpolicy: string[];\n\t\tuser: string[];\n\t\tworkspace: string[];\n\t\tworkspaceFolder: string[];\n\t} {\n\t\treturn super.keys(this._workspace);\n\t}\n\n\toverride compareAndDeleteFolderConfiguration(folder: URI): IConfigurationChange {\n\t\tif (this._workspace && this._workspace.folders.length > 0 && this._workspace.folders[0].uri.toString() === folder.toString()) {\n\t\t\t// Do not remove workspace configuration\n\t\t\treturn { keys: [], overrides: [] };\n\t\t}\n\t\treturn super.compareAndDeleteFolderConfiguration(folder);\n\t}\n\n\tcompare(other: Configuration): IConfigurationChange {\n\t\tconst compare = (fromKeys: string[], toKeys: string[], overrideIdentifier?: string): string[] => {\n\t\t\tconst keys: string[] = [];\n\t\t\tkeys.push(...toKeys.filter(key => fromKeys.indexOf(key) === -1));\n\t\t\tkeys.push(...fromKeys.filter(key => toKeys.indexOf(key) === -1));\n\t\t\tkeys.push(...fromKeys.filter(key => {\n\t\t\t\t// Ignore if the key does not exist in both models\n\t\t\t\tif (toKeys.indexOf(key) === -1) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t// Compare workspace value\n\t\t\t\tif (!equals(this.getValue(key, { overrideIdentifier }), other.getValue(key, { overrideIdentifier }))) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// Compare workspace folder value\n\t\t\t\treturn this._workspace && this._workspace.folders.some(folder => !equals(this.getValue(key, { resource: folder.uri, overrideIdentifier }), other.getValue(key, { resource: folder.uri, overrideIdentifier })));\n\t\t\t}));\n\t\t\treturn keys;\n\t\t};\n\t\tconst keys = compare(this.allKeys(), other.allKeys());\n\t\tconst overrides: [string, string[]][] = [];\n\t\tconst allOverrideIdentifiers = distinct([...this.allOverrideIdentifiers(), ...other.allOverrideIdentifiers()]);\n\t\tfor (const overrideIdentifier of allOverrideIdentifiers) {\n\t\t\tconst keys = compare(this.getAllKeysForOverrideIdentifier(overrideIdentifier), other.getAllKeysForOverrideIdentifier(overrideIdentifier), overrideIdentifier);\n\t\t\tif (keys.length) {\n\t\t\t\toverrides.push([overrideIdentifier, keys]);\n\t\t\t}\n\t\t}\n\t\treturn { keys, overrides };\n\t}\n\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { equals } from '../../../../base/common/objects.js';\nimport { toValuesTree, IConfigurationModel, IConfigurationOverrides, IConfigurationValue, IConfigurationChange } from '../../../../platform/configuration/common/configuration.js';\nimport { Configuration as BaseConfiguration, ConfigurationModelParser, ConfigurationModel, ConfigurationParseOptions } from '../../../../platform/configuration/common/configurationModels.js';\nimport { IStoredWorkspaceFolder } from '../../../../platform/workspaces/common/workspaces.js';\nimport { Workspace } from '../../../../platform/workspace/common/workspace.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { isBoolean } from '../../../../base/common/types.js';\nimport { distinct } from '../../../../base/common/arrays.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IStringDictionary } from '../../../../base/common/collections.js';\n\nexport class WorkspaceConfigurationModelParser extends ConfigurationModelParser {\n\n\tprivate _folders: IStoredWorkspaceFolder[] = [];\n\tprivate _transient: boolean = false;\n\tprivate _settingsModelParser: ConfigurationModelParser;\n\tprivate _launchModel: ConfigurationModel;\n\tprivate _tasksModel: ConfigurationModel;\n\n\tconstructor(name: string, logService: ILogService) {\n\t\tsuper(name, logService);\n\t\tthis._settingsModelParser = new ConfigurationModelParser(name, logService);\n\t\tthis._launchModel = ConfigurationModel.createEmptyModel(logService);\n\t\tthis._tasksModel = ConfigurationModel.createEmptyModel(logService);\n\t}\n\n\tget folders(): IStoredWorkspaceFolder[] {\n\t\treturn this._folders;\n\t}\n\n\tget transient(): boolean {\n\t\treturn this._transient;\n\t}\n\n\tget settingsModel(): ConfigurationModel {\n\t\treturn this._settingsModelParser.configurationModel;\n\t}\n\n\tget launchModel(): ConfigurationModel {\n\t\treturn this._launchModel;\n\t}\n\n\tget tasksModel(): ConfigurationModel {\n\t\treturn this._tasksModel;\n\t}\n\n\treparseWorkspaceSettings(configurationParseOptions: ConfigurationParseOptions): void {\n\t\tthis._settingsModelParser.reparse(configurationParseOptions);\n\t}\n\n\tgetRestrictedWorkspaceSettings(): string[] {\n\t\treturn this._settingsModelParser.restrictedConfigurations;\n\t}\n\n\tprotected override doParseRaw(raw: IStringDictionary<unknown>, configurationParseOptions?: ConfigurationParseOptions): IConfigurationModel {\n\t\tthis._folders = (raw['folders'] || []) as IStoredWorkspaceFolder[];\n\t\tthis._transient = isBoolean(raw['transient']) && raw['transient'];\n\t\tthis._settingsModelParser.parseRaw(raw['settings'] as IStringDictionary<unknown>, configurationParseOptions);\n\t\tthis._launchModel = this.createConfigurationModelFrom(raw, 'launch');\n\t\tthis._tasksModel = this.createConfigurationModelFrom(raw, 'tasks');\n\t\treturn super.doParseRaw(raw, configurationParseOptions);\n\t}\n\n\tprivate createConfigurationModelFrom(raw: IStringDictionary<unknown>, key: string): ConfigurationModel {\n\t\tconst data = raw[key] as IStringDictionary<unknown> | undefined;\n\t\tif (data) {\n\t\t\tconst contents = toValuesTree(data, message => console.error(`Conflict in settings file ${this._name}: ${message}`));\n\t\t\tconst scopedContents = Object.create(null);\n\t\t\tscopedContents[key] = contents;\n\t\t\tconst keys = Object.keys(data).map(k => `${key}.${k}`);\n\t\t\treturn new ConfigurationModel(scopedContents, keys, [], undefined, this.logService);\n\t\t}\n\t\treturn ConfigurationModel.createEmptyModel(this.logService);\n\t}\n}\n\nexport class StandaloneConfigurationModelParser extends ConfigurationModelParser {\n\n\tconstructor(name: string, private readonly scope: string, logService: ILogService,) {\n\t\tsuper(name, logService);\n\t}\n\n\tprotected override doParseRaw(raw: IStringDictionary<unknown>, configurationParseOptions?: ConfigurationParseOptions): IConfigurationModel {\n\t\tconst contents = toValuesTree(raw, message => console.error(`Conflict in settings file ${this._name}: ${message}`));\n\t\tconst scopedContents = Object.create(null);\n\t\tscopedContents[this.scope] = contents;\n\t\tconst keys = Object.keys(raw).map(key => `${this.scope}.${key}`);\n\t\treturn { contents: scopedContents, keys, overrides: [] };\n\t}\n\n}\n\nexport class Configuration extends BaseConfiguration {\n\n\tconstructor(\n\t\tdefaults: ConfigurationModel,\n\t\tpolicy: ConfigurationModel,\n\t\tapplication: ConfigurationModel,\n\t\tlocalUser: ConfigurationModel,\n\t\tremoteUser: ConfigurationModel,\n\t\tworkspaceConfiguration: ConfigurationModel,\n\t\tfolders: ResourceMap<ConfigurationModel>,\n\t\tmemoryConfiguration: ConfigurationModel,\n\t\tmemoryConfigurationByResource: ResourceMap<ConfigurationModel>,\n\t\tprivate readonly _workspace: Workspace | undefined,\n\t\tlogService: ILogService\n\t) {\n\t\tsuper(defaults, policy, application, localUser, remoteUser, workspaceConfiguration, folders, memoryConfiguration, memoryConfigurationByResource, logService);\n\t}\n\n\toverride getValue(key: string | undefined, overrides: IConfigurationOverrides = {}): unknown {\n\t\treturn super.getValue(key, overrides, this._workspace);\n\t}\n\n\toverride inspect<C>(key: string, overrides: IConfigurationOverrides = {}): IConfigurationValue<C> {\n\t\treturn super.inspect(key, overrides, this._workspace);\n\t}\n\n\toverride keys(): {\n\t\tdefault: string[];\n\t\tpolicy: string[];\n\t\tuser: string[];\n\t\tworkspace: string[];\n\t\tworkspaceFolder: string[];\n\t} {\n\t\treturn super.keys(this._workspace);\n\t}\n\n\toverride compareAndDeleteFolderConfiguration(folder: URI): IConfigurationChange {\n\t\tif (this._workspace && this._workspace.folders.length > 0 && this._workspace.folders[0].uri.toString() === folder.toString()) {\n\t\t\t// Do not remove workspace configuration\n\t\t\treturn { keys: [], overrides: [] };\n\t\t}\n\t\treturn super.compareAndDeleteFolderConfiguration(folder);\n\t}\n\n\tcompare(other: Configuration): IConfigurationChange {\n\t\tconst compare = (fromKeys: string[], toKeys: string[], overrideIdentifier?: string): string[] => {\n\t\t\tconst keys: string[] = [];\n\t\t\tkeys.push(...toKeys.filter(key => fromKeys.indexOf(key) === -1));\n\t\t\tkeys.push(...fromKeys.filter(key => toKeys.indexOf(key) === -1));\n\t\t\tkeys.push(...fromKeys.filter(key => {\n\t\t\t\t// Ignore if the key does not exist in both models\n\t\t\t\tif (toKeys.indexOf(key) === -1) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t// Compare workspace value\n\t\t\t\tif (!equals(this.getValue(key, { overrideIdentifier }), other.getValue(key, { overrideIdentifier }))) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// Compare workspace folder value\n\t\t\t\treturn this._workspace && this._workspace.folders.some(folder => !equals(this.getValue(key, { resource: folder.uri, overrideIdentifier }), other.getValue(key, { resource: folder.uri, overrideIdentifier })));\n\t\t\t}));\n\t\t\treturn keys;\n\t\t};\n\t\tconst keys = compare(this.allKeys(), other.allKeys());\n\t\tconst overrides: [string, string[]][] = [];\n\t\tconst allOverrideIdentifiers = distinct([...this.allOverrideIdentifiers(), ...other.allOverrideIdentifiers()]);\n\t\tfor (const overrideIdentifier of allOverrideIdentifiers) {\n\t\t\tconst keys = compare(this.getAllKeysForOverrideIdentifier(overrideIdentifier), other.getAllKeysForOverrideIdentifier(overrideIdentifier), overrideIdentifier);\n\t\t\tif (keys.length) {\n\t\t\t\toverrides.push([overrideIdentifier, keys]);\n\t\t\t}\n\t\t}\n\t\treturn { keys, overrides };\n\t}\n\n}\n"]}