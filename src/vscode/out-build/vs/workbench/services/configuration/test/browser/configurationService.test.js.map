{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/configuration/test/browser/configurationService.test.ts","vs/workbench/services/configuration/test/browser/configurationService.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,MAAM,MAAM,QAAQ,CAAC;AAC5B,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAC/B,OAAO,EAAE,GAAG,EAAE,MAAM,mCAAmC,CAAC;AACxD,OAAO,EAAE,QAAQ,EAAE,MAAM,qDAAqD,CAAC;AAC/E,OAAO,EAAE,mBAAmB,EAAE,MAAM,2DAA2D,CAAC;AAChG,OAAO,EAA0B,UAAU,IAAI,uBAAuB,EAAsB,0BAA0B,EAAE,MAAM,uEAAuE,CAAC;AACtM,OAAO,EAAE,gBAAgB,EAAE,MAAM,uCAAuC,CAAC;AAEzE,OAAO,EAAE,YAAY,EAAE,MAAM,+CAA+C,CAAC;AAC7E,OAAO,EAAE,wBAAwB,EAAwG,MAAM,uDAAuD,CAAC;AACvM,OAAO,EAAuB,qBAAqB,EAA6B,MAAM,+DAA+D,CAAC;AACtJ,OAAO,EAAE,6BAA6B,EAAE,wBAAwB,EAAE,sBAAsB,EAAE,mBAAmB,EAAE,MAAM,mDAAmD,CAAC;AAEzK,OAAO,EAAE,gBAAgB,EAAE,MAAM,uCAAuC,CAAC;AACzE,OAAO,EAAE,iBAAiB,EAAE,MAAM,0DAA0D,CAAC;AAC7F,OAAO,EAAE,wBAAwB,EAAE,MAAM,+DAA+D,CAAC;AACzG,OAAO,EAAE,mBAAmB,EAAE,MAAM,6BAA6B,CAAC;AAClE,OAAO,EAAE,kBAAkB,EAAE,MAAM,oCAAoC,CAAC;AACxE,OAAO,EAAE,OAAO,EAAE,MAAM,uCAAuC,CAAC;AAChE,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,yCAAyC,CAAC;AACtF,OAAO,EAAE,OAAO,EAAE,WAAW,EAAE,MAAM,wCAAwC,CAAC;AAC9E,OAAO,EAAE,mBAAmB,EAAE,MAAM,8CAA8C,CAAC;AACnF,OAAO,EAAE,WAAW,EAAE,MAAM,qDAAqD,CAAC;AAClF,OAAO,EAAE,cAAc,EAAE,MAAM,2CAA2C,CAAC;AAE3E,OAAO,EAAE,0BAA0B,EAAuB,MAAM,+BAA+B,CAAC;AAChG,OAAO,EAAE,WAAW,EAAE,MAAM,qDAAqD,CAAC;AAClF,OAAO,EAAE,oBAAoB,EAAE,MAAM,iEAAiE,CAAC;AACvG,OAAO,EAAE,yBAAyB,EAAE,yBAAyB,EAAE,MAAM,iDAAiD,CAAC;AACvH,OAAO,EAAE,4BAA4B,EAAE,MAAM,mDAAmD,CAAC;AACjG,OAAO,EAAE,OAAO,EAAE,MAAM,qCAAqC,CAAC;AAC9D,OAAO,EAAE,QAAQ,EAAE,MAAM,sCAAsC,CAAC;AAChE,OAAO,EAAE,KAAK,EAAE,MAAM,qCAAqC,CAAC;AAC5D,OAAO,EAAE,kBAAkB,EAAE,MAAM,kEAAkE,CAAC;AACtG,OAAO,EAAE,0BAA0B,EAAE,MAAM,oEAAoE,CAAC;AAEhH,OAAO,EAAE,kBAAkB,EAAE,MAAM,+CAA+C,CAAC;AACnF,OAAO,EAAE,8BAA8B,EAAE,MAAM,0EAA0E,CAAC;AAC1H,OAAO,EAAE,IAAI,EAAE,MAAM,oCAAoC,CAAC;AAC1D,OAAO,EAAE,kBAAkB,EAAE,MAAM,kDAAkD,CAAC;AACtF,OAAO,EAAE,wBAAwB,EAAE,iBAAiB,EAAE,uBAAuB,EAAE,MAAM,mEAAmE,CAAC;AACzJ,OAAO,EAAE,iBAAiB,EAAE,MAAM,iDAAiD,CAAC;AACpF,OAAO,EAAE,iBAAiB,EAAE,MAAM,4DAA4D,CAAC;AAC/F,OAAO,EAAE,kBAAkB,EAAE,MAAM,wDAAwD,CAAC;AAC5F,OAAO,EAAE,sBAAsB,EAAE,MAAM,2DAA2D,CAAC;AACnG,OAAO,EAAE,uBAAuB,EAAE,MAAM,oDAAoD,CAAC;AAE7F,OAAO,EAAE,0BAA0B,EAAE,MAAM,qEAAqE,CAAC;AACjH,OAAO,EAAE,uCAAuC,EAAE,MAAM,0CAA0C,CAAC;AACnG,OAAO,EAAE,cAAc,EAAE,MAAM,sCAAsC,CAAC;AAEtE,SAAS,yBAAyB,CAAC,MAAW;IAC7C,OAAO;QACN,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC;QACxC,GAAG,EAAE,MAAM;KACX,CAAC;AACH,CAAC;AAED,MAAM,kBAAkB;IACvB,YAAY,CAAC,QAAa,IAAa,OAAO,KAAK,CAAC,CAAC,CAAC;IACtD,KAAK,CAAC,IAAI,KAAsB,OAAO,EAAE,CAAC,CAAC,CAAC;IAC5C,KAAK,CAAC,KAAK,KAAoB,CAAC;IAChC,KAAK,CAAC,MAAM,KAAoB,CAAC;CACjC;AAED,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,cAAc,EAAE,CAAC,CAAC;AAEhE,KAAK,CAAC,kCAAkC,EAAE,GAAG,EAAE;IAE9C,MAAM,UAAU,GAAG,UAAU,CAAC;IAC9B,IAAI,MAAW,CAAC;IAChB,IAAI,UAA4B,CAAC;IACjC,MAAM,WAAW,GAAG,uCAAuC,EAAE,CAAC;IAE9D,KAAK,CAAC,KAAK,IAAI,EAAE;QAChB,MAAM,UAAU,GAAG,IAAI,cAAc,EAAE,CAAC;QACxC,MAAM,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC;QACjE,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,0BAA0B,EAAE,CAAC,CAAC;QAC7E,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC,CAAC;QAE/E,MAAM,GAAG,QAAQ,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;QACpC,MAAM,WAAW,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAEvC,MAAM,kBAAkB,GAAG,sBAAsB,CAAC;QAClD,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,CAAC,WAAW,CAAC,CAAC,CAAC;QAChF,MAAM,uBAAuB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,uBAAuB,CAAC,kBAAkB,EAAE,WAAW,EAAE,kBAAkB,EAAE,UAAU,CAAC,CAAC,CAAC;QAC9I,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,OAAO,CAAC,cAAc,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,oBAAoB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,EAAE,OAAO,CAAC,cAAc,EAAE,uBAAuB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7O,MAAM,sBAAsB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,sBAAsB,CAAC,uBAAuB,CAAC,cAAc,CAAC,CAAC,CAAC;QACnH,UAAU,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,gBAAgB,CAChD,EAAE,kBAAkB,EAAE,IAAI,kBAAkB,EAAE,EAAE,EAChD,kBAAkB,EAClB,sBAAsB,EACtB,uBAAuB,EACvB,WAAW,EACX,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,CACrC,IAAI,0BAA0B,EAAE,EAChC,sBAAsB,EACtB,kBAAkB,EAClB,kBAAkB,EAClB,WAAW,CAAC,GAAG,CAAC,IAAI,8BAA8B,CAAC,KAAK,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,kBAAkB,EAAE,UAAU,CAAC,CAAC,EAC3H,IAAI,WAAW,CAAC,kBAAkB,CAAC,EAAE,IAAI,cAAc,EAAE,CAAC,CAAC,EAC5D,kBAAkB,EAClB,IAAI,cAAc,EAAE,EACpB,IAAI,iBAAiB,EAAE,CAAC,CAAC,CAAC;QAC3B,MAAyB,UAAW,CAAC,UAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC,CAAC;IACpF,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,gBAAgB,EAAE,GAAG,EAAE;QAC3B,MAAM,MAAM,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC;QAEzC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QAC7C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;QAC5D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QAC/C,MAAM,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;IAClC,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,qBAAqB,EAAE,GAAG,EAAE;QAChC,MAAM,MAAM,GAAG,UAAU,CAAC,iBAAiB,EAAE,CAAC;QAE9C,MAAM,CAAC,WAAW,CAAC,MAAM,gCAAwB,CAAC;IACnD,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,sBAAsB,EAAE,GAAG,EAAE;QACjC,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC,QAAQ,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC;QAEpE,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IAClE,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,oDAAoD,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAE7H,MAAM,UAAU,GAAG,IAAI,cAAc,EAAE,CAAC;QACxC,MAAM,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC;QACjE,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,0BAA0B,EAAE,CAAC,CAAC;QAC7E,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC,CAAC;QAE/E,MAAM,MAAM,GAAG,QAAQ,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC,CAAC;QACvE,MAAM,WAAW,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAEvC,MAAM,kBAAkB,GAAG,sBAAsB,CAAC;QAClD,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,CAAC,WAAW,CAAC,CAAC,CAAC;QAChF,MAAM,uBAAuB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,uBAAuB,CAAC,kBAAkB,EAAE,WAAW,EAAE,kBAAkB,EAAE,UAAU,CAAC,CAAC,CAAC;QAC9I,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,OAAO,CAAC,cAAc,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,oBAAoB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,EAAE,OAAO,CAAC,cAAc,EAAE,uBAAuB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7O,MAAM,sBAAsB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,sBAAsB,CAAC,uBAAuB,CAAC,cAAc,CAAC,CAAC,CAAC;QACnH,MAAM,UAAU,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,gBAAgB,CACtD,EAAE,kBAAkB,EAAE,IAAI,kBAAkB,EAAE,EAAE,EAChD,kBAAkB,EAClB,sBAAsB,EACtB,uBAAuB,EACvB,WAAW,EACX,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,CAAC,IAAI,0BAA0B,EAAE,EAAE,sBAAsB,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,8BAA8B,CAAC,KAAK,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,kBAAkB,EAAE,UAAU,CAAC,CAAC,EAAE,IAAI,WAAW,CAAC,kBAAkB,CAAC,EAAE,IAAI,cAAc,EAAE,CAAC,CAAC,EACjU,kBAAkB,EAClB,IAAI,cAAc,EAAE,EACpB,IAAI,iBAAiB,EAAE,CAAC,CAAC,CAAC;QAC3B,MAAyB,UAAW,CAAC,UAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC,CAAC;QAEnF,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC,QAAQ,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC;QAEpE,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IAClE,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,4CAA4C,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAErH,MAAM,UAAU,GAAG,IAAI,cAAc,EAAE,CAAC;QACxC,MAAM,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC;QACjE,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,0BAA0B,EAAE,CAAC,CAAC;QAC7E,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC,CAAC;QAE/E,MAAM,MAAM,GAAG,QAAQ,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;QAC1C,MAAM,WAAW,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAEvC,MAAM,kBAAkB,GAAG,sBAAsB,CAAC;QAClD,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,CAAC,WAAW,CAAC,CAAC,CAAC;QAChF,MAAM,uBAAuB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,uBAAuB,CAAC,kBAAkB,EAAE,WAAW,EAAE,kBAAkB,EAAE,UAAU,CAAC,CAAC,CAAC;QAC9I,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,OAAO,CAAC,cAAc,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,oBAAoB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,EAAE,OAAO,CAAC,cAAc,EAAE,uBAAuB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7O,MAAM,sBAAsB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,sBAAsB,CAAC,uBAAuB,CAAC,cAAc,CAAC,CAAC,CAAC;QACnH,MAAM,UAAU,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,gBAAgB,CACtD,EAAE,kBAAkB,EAAE,IAAI,kBAAkB,EAAE,EAAE,EAChD,kBAAkB,EAClB,sBAAsB,EACtB,uBAAuB,EACvB,WAAW,EACX,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,CAAC,IAAI,0BAA0B,EAAE,EAAE,sBAAsB,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,8BAA8B,CAAC,KAAK,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,kBAAkB,EAAE,UAAU,CAAC,CAAC,EAAE,IAAI,WAAW,CAAC,kBAAkB,CAAC,EAAE,IAAI,cAAc,EAAE,CAAC,CAAC,EACjU,kBAAkB,EAClB,IAAI,cAAc,EAAE,EACpB,IAAI,iBAAiB,EAAE,CAAC,CAAC,CAAC;QAC3B,MAAM,UAAU,CAAC,UAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC,CAAC;QAE/D,MAAM,MAAM,GAAG,UAAU,CAAC,kBAAkB,CAAC,QAAQ,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC,CAAC,CAAC;QAEjG,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;IAClE,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,8BAA8B,EAAE,GAAG,EAAE;QACzC,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,+BAA+B,EAAE,GAAG,EAAE;QAC1C,MAAM,CAAC,EAAE,CAAC,CAAC,UAAU,CAAC,kBAAkB,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;IAC7E,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,uBAAuB,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC,oBAAoB,EAAE,CAAC,CAAC;AACxE,CAAC,CAAC,CAAC;AAEH,KAAK,CAAC,qCAAqC,EAAE,GAAG,EAAE;IAEjD,IAAI,UAA4B,CAAC;IACjC,MAAM,WAAW,GAAG,uCAAuC,EAAE,CAAC;IAE9D,KAAK,CAAC,KAAK,IAAI,EAAE;QAChB,MAAM,UAAU,GAAG,IAAI,cAAc,EAAE,CAAC;QACxC,MAAM,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC;QACjE,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,0BAA0B,EAAE,CAAC,CAAC;QAC7E,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC,CAAC;QAE/E,MAAM,eAAe,GAAG,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAC/C,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QACpC,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QACpC,MAAM,cAAc,GAAG,QAAQ,CAAC,IAAI,EAAE,yBAAyB,CAAC,CAAC;QACjE,MAAM,SAAS,GAAG,EAAE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;QAEhF,MAAM,WAAW,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;QAChD,MAAM,WAAW,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QACxC,MAAM,WAAW,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QACxC,MAAM,WAAW,CAAC,SAAS,CAAC,cAAc,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;QAExG,MAAM,oBAAoB,GAAG,6BAA6B,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QACnF,MAAM,kBAAkB,GAAG,sBAAsB,CAAC;QAClD,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;QACrH,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,kBAAkB,CAAC,CAAC;QACnE,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,CAAC,WAAW,CAAC,CAAC,CAAC;QAChF,MAAM,uBAAuB,GAAG,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,uBAAuB,CAAC,kBAAkB,EAAE,WAAW,EAAE,kBAAkB,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;QACnM,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,OAAO,CAAC,cAAc,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,oBAAoB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,EAAE,OAAO,CAAC,cAAc,EAAE,uBAAuB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7O,UAAU,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,gBAAgB,CAChD,EAAE,kBAAkB,EAAE,IAAI,kBAAkB,EAAE,EAAE,EAChD,kBAAkB,EAClB,WAAW,CAAC,GAAG,CAAC,IAAI,sBAAsB,CAAC,uBAAuB,CAAC,cAAc,CAAC,CAAC,EACnF,uBAAuB,EAAE,WAAW,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,EAAE,IAAI,iBAAiB,EAAE,CAAC,CAAC,CAAC;QAE/H,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,EAAE,UAAU,CAAC,CAAC;QAChE,oBAAoB,CAAC,IAAI,CAAC,qBAAqB,EAAE,UAAU,CAAC,CAAC;QAC7D,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,kBAAkB,CAAC,CAAC;QAEnE,MAAM,UAAU,CAAC,UAAU,CAAC,sBAAsB,CAAC,cAAc,CAAC,CAAC,CAAC;QACpE,UAAU,CAAC,2BAA2B,CAAC,oBAAoB,CAAC,CAAC;IAC9D,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,mBAAmB,EAAE,GAAG,EAAE;QAC9B,MAAM,MAAM,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC;QAEjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,qBAAqB,EAAE,GAAG,EAAE;QAChC,MAAM,MAAM,GAAG,UAAU,CAAC,iBAAiB,EAAE,CAAC;QAE9C,MAAM,CAAC,WAAW,CAAC,MAAM,mCAA2B,CAAC;IACtD,CAAC,CAAC,CAAC;IAGH,IAAI,CAAC,uBAAuB,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC,oBAAoB,EAAE,CAAC,CAAC;AAExE,CAAC,CAAC,CAAC;AAEH,KAAK,CAAC,6CAA6C,EAAE,GAAG,EAAE;IAEzD,IAAI,UAA4B,EAAE,WAAyB,CAAC;IAC5D,MAAM,WAAW,GAAG,uCAAuC,EAAE,CAAC;IAE9D,KAAK,CAAC,KAAK,IAAI,EAAE;QAChB,MAAM,UAAU,GAAG,IAAI,cAAc,EAAE,CAAC;QACxC,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC;QAC3D,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,0BAA0B,EAAE,CAAC,CAAC;QAC7E,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC,CAAC;QAE/E,MAAM,eAAe,GAAG,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAC/C,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QACpC,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QACpC,MAAM,cAAc,GAAG,QAAQ,CAAC,IAAI,EAAE,yBAAyB,CAAC,CAAC;QACjE,MAAM,SAAS,GAAG,EAAE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;QAEhF,MAAM,WAAW,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;QAChD,MAAM,WAAW,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QACxC,MAAM,WAAW,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QACxC,MAAM,WAAW,CAAC,SAAS,CAAC,cAAc,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;QAExG,MAAM,oBAAoB,GAAG,6BAA6B,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QACnF,MAAM,kBAAkB,GAAG,sBAAsB,CAAC;QAClD,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC,CAAC;QACpG,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,kBAAkB,CAAC,CAAC;QACnE,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,CAAC,WAAW,CAAC,CAAC,CAAC;QAChF,MAAM,uBAAuB,GAAG,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,uBAAuB,CAAC,kBAAkB,EAAE,WAAW,EAAE,kBAAkB,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;QACnM,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,OAAO,CAAC,cAAc,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,oBAAoB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,EAAE,OAAO,CAAC,cAAc,EAAE,uBAAuB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7O,UAAU,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,gBAAgB,CAChD,EAAE,kBAAkB,EAAE,IAAI,kBAAkB,EAAE,EAAE,EAChD,kBAAkB,EAClB,WAAW,CAAC,GAAG,CAAC,IAAI,sBAAsB,CAAC,uBAAuB,CAAC,cAAc,CAAC,CAAC,EACnF,uBAAuB,EAAE,WAAW,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,EAAE,IAAI,iBAAiB,EAAE,CAAC,CAAC,CAAC;QAE/H,oBAAoB,CAAC,IAAI,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;QACrD,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,EAAE,UAAU,CAAC,CAAC;QAChE,oBAAoB,CAAC,IAAI,CAAC,qBAAqB,EAAE,UAAU,CAAC,CAAC;QAC7D,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,kBAAkB,CAAC,CAAC;QAEnE,MAAM,UAAU,CAAC,UAAU,CAAC,sBAAsB,CAAC,cAAc,CAAC,CAAC,CAAC;QACpE,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,EAAE,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;QACvH,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,EAAE,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;QAC7H,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,oBAAoB,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC,CAAC;QACxG,UAAU,CAAC,2BAA2B,CAAC,oBAAoB,CAAC,CAAC;IAC9D,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,aAAa,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACtF,MAAM,UAAU,CAAC,UAAU,CAAC,CAAC,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1F,MAAM,MAAM,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC;QAEjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,iCAAiC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC1G,MAAM,UAAU,CAAC,UAAU,CAAC,CAAC,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC7F,MAAM,MAAM,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC;QAEjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,uCAAuC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAChH,MAAM,UAAU,CAAC,UAAU,CAAC,CAAC,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;QAC9F,MAAM,MAAM,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC;QAEjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,yBAAyB,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAClG,MAAM,UAAU,CAAC,UAAU,CAAC,CAAC,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;QACpH,MAAM,MAAM,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC;QAEjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;QAC1C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;IAC3C,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,mCAAmC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC5G,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,4BAA4B,CAAC,MAAM,CAAC,CAAC,CAAC;QACjE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC,CAAC;QAEhE,MAAM,YAAY,GAAG,CAAC,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC;QAClF,MAAM,UAAU,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;QAE1C,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,EAAE,yCAAyC,MAAM,CAAC,SAAS,QAAQ,CAAC,CAAC;QAC3G,MAAM,QAAQ,GAAkC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC;QACnE,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAC3G,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QAC7C,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,gBAAgB,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACzF,MAAM,UAAU,CAAC,aAAa,CAAC,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAC3E,MAAM,MAAM,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC;QAEjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,sCAAsC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC/G,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,4BAA4B,CAAC,MAAM,CAAC,CAAC,CAAC;QACjE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC,CAAC;QAChE,MAAM,aAAa,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAC3D,MAAM,UAAU,CAAC,aAAa,CAAC,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC;QAEpD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,EAAE,yCAAyC,MAAM,CAAC,SAAS,QAAQ,CAAC,CAAC;QAC3G,MAAM,QAAQ,GAAkC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC;QACnE,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;QAC3C,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QACpG,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;IAC5H,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,2DAA2D,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACpI,MAAM,OAAO,GAAG,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC;QAClD,MAAM,UAAU,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAEjD,MAAM,OAAO,GAAG,IAAI,OAAO,CAAO,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACrD,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,2BAA2B,CAAC,MAAM,CAAC,EAAE;gBAC/D,IAAI,CAAC;oBACJ,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;oBAC7F,OAAO,EAAE,CAAC;gBACX,CAAC;gBAAC,OAAO,KAAK,EAAE,CAAC;oBAChB,MAAM,CAAC,KAAK,CAAC,CAAC;gBACf,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,MAAM,SAAS,GAAG,EAAE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;QAC9F,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,aAAc,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;QAClI,MAAM,OAAO,CAAC;IACf,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,6CAA6C,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACtH,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,4BAA4B,CAAC,MAAM,CAAC,CAAC,CAAC;QACjE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC,CAAC;QAChE,MAAM,YAAY,GAAG,CAAC,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC;QAClF,MAAM,cAAc,GAAG,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QAC9E,MAAM,UAAU,CAAC,aAAa,CAAC,YAAY,EAAE,cAAc,CAAC,CAAC;QAE7D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,EAAE,yCAAyC,MAAM,CAAC,SAAS,QAAQ,CAAC,CAAC;QAC3G,MAAM,QAAQ,GAAkC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC;QACnE,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAC3G,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,cAAc,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QACnH,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,kDAAkD,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC3H,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,4BAA4B,CAAC,MAAM,CAAC,CAAC,CAAC;QACjE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC,CAAC;QAChE,MAAM,YAAY,GAAG,CAAC,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC,CAAC;QACxE,MAAM,cAAc,GAAG,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QAC9E,MAAM,UAAU,CAAC,aAAa,CAAC,YAAY,EAAE,cAAc,EAAE,CAAC,CAAC,CAAC;QAEhE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,EAAE,yCAAyC,MAAM,CAAC,SAAS,QAAQ,CAAC,CAAC;QAC3G,MAAM,QAAQ,GAAkC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC;QACnE,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;QAC3C,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QAC7C,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;IAC5G,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,8CAA8C,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACvH,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,4BAA4B,CAAC,MAAM,CAAC,CAAC,CAAC;QACjE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC,CAAC;QAChE,MAAM,YAAY,GAAG,CAAC,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC;QAClF,MAAM,cAAc,GAAG,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QAC9E,MAAM,cAAc,GAAG,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QAC9E,MAAM,UAAU,CAAC,aAAa,CAAC,YAAY,EAAE,cAAc,CAAC,CAAC;QAE7D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,EAAE,yCAAyC,MAAM,CAAC,SAAS,QAAQ,CAAC,CAAC;QAC3G,MAAM,QAAQ,GAAkC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC;QACnE,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAC3G,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,cAAc,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QACnH,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,cAAc,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;IACpH,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,sCAAsC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC/G,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,4BAA4B,CAAC,MAAM,CAAC,CAAC,CAAC;QACjE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC,CAAC;QAChE,MAAM,SAAS,GAAG,EAAE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;QAClJ,MAAM,WAAW,CAAC,SAAS,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,aAAc,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;QAClI,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,EAAE,yCAAyC,MAAM,CAAC,SAAS,QAAQ,CAAC,CAAC;QAC3G,MAAM,QAAQ,GAAkC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC;QACnE,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;QAC3C,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QAC7C,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC;IAC7I,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,qCAAqC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC9G,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,4BAA4B,CAAC,MAAM,CAAC,CAAC,CAAC;QACjE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC,CAAC;QAChE,MAAM,SAAS,GAAG,EAAE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;QAC7J,WAAW,CAAC,SAAS,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,aAAc,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;QAC5H,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,EAAE,yCAAyC,MAAM,CAAC,SAAS,QAAQ,CAAC,CAAC;QAC3G,MAAM,QAAQ,GAAkC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC;QACnE,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;QAC3C,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QAC7C,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;IAC5H,CAAC,CAAC,CAAC,CAAC;AAEL,CAAC,CAAC,CAAC;AAEH,KAAK,CAAC,mCAAmC,EAAE,GAAG,EAAE;IAE/C,IAAI,cAAmB,EAAE,UAA4B,EAAE,WAAyB,EAAE,kBAAsD,EAAE,sBAA+C,CAAC;IAC1L,MAAM,qBAAqB,GAAG,QAAQ,CAAC,EAAE,CAAyB,uBAAuB,CAAC,aAAa,CAAC,CAAC;IACzG,MAAM,WAAW,GAAG,uCAAuC,EAAE,CAAC;IAE9D,UAAU,CAAC,GAAG,EAAE;QACf,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,6BAA6B,EAAE;oBAC9B,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,qCAA6B;iBAClC;gBACD,6BAA6B,EAAE;oBAC9B,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,qCAA6B;iBAClC;aACD;SACD,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,KAAK,IAAI,EAAE;QAChB,MAAM,UAAU,GAAG,IAAI,cAAc,EAAE,CAAC;QACxC,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC;QAC3D,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,0BAA0B,EAAE,CAAC,CAAC;QAC7E,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC,CAAC;QAE/E,MAAM,eAAe,GAAG,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAC/C,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QACpC,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QACpC,cAAc,GAAG,QAAQ,CAAC,IAAI,EAAE,yBAAyB,CAAC,CAAC;QAC3D,MAAM,SAAS,GAAG,EAAE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;QAEhF,MAAM,WAAW,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;QAChD,MAAM,WAAW,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QACxC,MAAM,WAAW,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QACxC,MAAM,WAAW,CAAC,SAAS,CAAC,cAAc,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;QAExG,MAAM,oBAAoB,GAAG,6BAA6B,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QACnF,kBAAkB,GAAG,sBAAsB,CAAC;QAC5C,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC,CAAC;QACpG,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,kBAAkB,CAAC,CAAC;QACnE,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,CAAC,WAAW,CAAC,CAAC,CAAC;QAChF,MAAM,uBAAuB,GAAG,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,uBAAuB,CAAC,kBAAkB,EAAE,WAAW,EAAE,kBAAkB,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;QACnM,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,OAAO,CAAC,cAAc,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,oBAAoB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,EAAE,OAAO,CAAC,cAAc,EAAE,uBAAuB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7O,sBAAsB,GAAG,oBAAoB,CAAC,IAAI,CAAC,uBAAuB,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,sBAAsB,CAAC,uBAAuB,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;QACjK,UAAU,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,gBAAgB,CAChD,EAAE,kBAAkB,EAAE,IAAI,kBAAkB,EAAE,EAAE,EAChD,kBAAkB,EAClB,sBAAsB,EACtB,uBAAuB,EAAE,WAAW,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,EAAE,IAAI,iBAAiB,EAAE,CAAC,CAAC,CAAC;QAC/H,oBAAoB,CAAC,IAAI,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;QACrD,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,EAAE,UAAU,CAAC,CAAC;QAChE,oBAAoB,CAAC,IAAI,CAAC,qBAAqB,EAAE,UAAU,CAAC,CAAC;QAC7D,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,kBAAkB,CAAC,CAAC;QAEnE,MAAM,UAAU,CAAC,UAAU,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;QACxC,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,EAAE,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;QACvH,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,EAAE,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;QAC7H,UAAU,CAAC,2BAA2B,CAAC,oBAAoB,CAAC,CAAC;IAC9D,CAAC,CAAC,CAAC;IAEH,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,qFAAqF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAE1L,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,gDAAgD,CAAC,CAAC,CAAC;QAE3J,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC9D,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,4BAA4B,CAAC,MAAM,CAAC,CAAC,CAAC;QACjE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC,CAAC;QAChE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAE7D,MAAM,MAAM,GAAG,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QACnC,MAAM,UAAU,CAAC,UAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC,CAAC;QAE/D,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6BAA6B,CAAC,EAAE,WAAW,CAAC,CAAC;QACpF,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,+BAAuB,CAAC,CAAC;QAChE,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;QACpD,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAChI,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QACtF,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;IAEvF,CAAC,CAAC,CAAC,CAAC;IAEJ,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,kFAAkF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAEvL,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,gDAAgD,CAAC,CAAC,CAAC;QAE3J,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC9D,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,4BAA4B,CAAC,MAAM,CAAC,CAAC,CAAC;QACjE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC,CAAC;QAChE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAE7D,MAAM,MAAM,GAAG,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QACnC,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,qDAAqD,CAAC,CAAC,CAAC;QACtJ,MAAM,UAAU,CAAC,UAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC,CAAC;QAE/D,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6BAA6B,CAAC,EAAE,gBAAgB,CAAC,CAAC;QACzF,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,eAAe,CAAC,CAAC,GAA+B,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,YAAY,CAAC,EAAE,CAAC,6BAA6B,CAAC,CAAC,CAAC;QAC1H,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,+BAAuB,CAAC,CAAC;QAChE,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;QACpD,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAChI,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QACtF,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;IAEvF,CAAC,CAAC,CAAC,CAAC;IAEJ,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,yFAAyF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAE9L,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,gDAAgD,CAAC,CAAC,CAAC;QAE3J,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC9D,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,4BAA4B,CAAC,MAAM,CAAC,CAAC,CAAC;QACjE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC,CAAC;QAChE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAE7D,MAAM,UAAU,CAAC,UAAU,CAAC,sBAAsB,CAAC,cAAc,CAAC,CAAC,CAAC;QAEpE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,kCAA0B,CAAC,CAAC;QACnE,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;QACpD,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QACvL,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QACtF,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;IAEvF,CAAC,CAAC,CAAC,CAAC;IAEJ,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,sFAAsF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAE3L,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,gDAAgD,CAAC,CAAC,CAAC;QAE3J,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC9D,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,4BAA4B,CAAC,MAAM,CAAC,CAAC,CAAC;QACjE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC,CAAC;QAChE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAE7D,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,sDAAsD,CAAC,CAAC,CAAC;QAC1J,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,sDAAsD,CAAC,CAAC,CAAC;QAC1J,MAAM,UAAU,CAAC,UAAU,CAAC,sBAAsB,CAAC,cAAc,CAAC,CAAC,CAAC;QAEpE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,eAAe,CAAC,CAAC,GAA+B,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,YAAY,CAAC,EAAE,CAAC,6BAA6B,EAAE,6BAA6B,CAAC,CAAC,CAAC;QACzJ,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,kCAA0B,CAAC,CAAC;QACnE,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;QACpD,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QACvL,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QACtF,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;IAEvF,CAAC,CAAC,CAAC,CAAC;IAEJ,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,qFAAqF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAE1L,MAAM,UAAU,CAAC,UAAU,CAAC,yBAAyB,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QAC5E,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,gDAAgD,CAAC,CAAC,CAAC;QAC3J,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC9D,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,4BAA4B,CAAC,MAAM,CAAC,CAAC,CAAC;QACjE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC,CAAC;QAChE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAE7D,MAAM,UAAU,CAAC,UAAU,CAAC,yBAAyB,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QAE5E,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6BAA6B,CAAC,EAAE,WAAW,CAAC,CAAC;QACpF,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAC3J,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAC7J,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;IAEvF,CAAC,CAAC,CAAC,CAAC;IAEJ,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,kFAAkF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAEvL,MAAM,UAAU,CAAC,UAAU,CAAC,yBAAyB,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QAC5E,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC9D,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,4BAA4B,CAAC,MAAM,CAAC,CAAC,CAAC;QACjE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC,CAAC;QAChE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAE7D,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,sDAAsD,CAAC,CAAC,CAAC;QAC1J,MAAM,UAAU,CAAC,UAAU,CAAC,yBAAyB,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QAE5E,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6BAA6B,CAAC,EAAE,iBAAiB,CAAC,CAAC;QAC1F,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,eAAe,CAAC,CAAC,GAA+B,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,YAAY,CAAC,EAAE,CAAC,6BAA6B,CAAC,CAAC,CAAC;QAC1H,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAC3J,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAC7J,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;IAEvF,CAAC,CAAC,CAAC,CAAC;IAEJ,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,wGAAwG,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC7M,MAAM,UAAU,CAAC,UAAU,CAAC,yBAAyB,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QAC5E,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC9D,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,4BAA4B,CAAC,MAAM,CAAC,CAAC,CAAC;QACjE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,2BAA2B,CAAC,MAAM,CAAC,CAAC,CAAC;QAChE,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAE7D,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,sDAAsD,CAAC,CAAC,CAAC;QAC1J,MAAM,UAAU,CAAC,UAAU,CAAC,sBAAsB,CAAC,cAAc,CAAC,CAAC,CAAC;QAEpE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;QACxC,MAAM,CAAC,eAAe,CAAC,CAAC,GAA+B,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,YAAY,CAAC,EAAE,CAAC,6BAA6B,CAAC,CAAC,CAAC;QAC1H,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,kCAA0B,CAAC,CAAC;QACnE,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;QACpD,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAC3J,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QACtF,MAAM,CAAC,eAAe,CAAgC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;IACvF,CAAC,CAAC,CAAC,CAAC;AAEL,CAAC,CAAC,CAAC;AAEH,KAAK,CAAC,wCAAwC,EAAE,GAAG,EAAE;IAEpD,IAAI,UAA4B,EAAE,gBAAkC,EAAE,WAAyB,EAAE,kBAAuD,EAAE,sBAA+C,EAAE,oBAA8C,CAAC;IAC1P,MAAM,qBAAqB,GAAG,QAAQ,CAAC,EAAE,CAAyB,uBAAuB,CAAC,aAAa,CAAC,CAAC;IACzG,MAAM,WAAW,GAAG,uCAAuC,EAAE,CAAC;IAE9D,UAAU,CAAC,GAAG,EAAE;QACf,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,gDAAgD,EAAE;oBACjD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,wCAAgC;iBACrC;gBACD,4CAA4C,EAAE;oBAC7C,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,oCAA4B;iBACjC;gBACD,uDAAuD,EAAE;oBACxD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,gDAAwC;iBAC7C;gBACD,uDAAuD,EAAE;oBACxD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,gDAAwC;iBAC7C;gBACD,yCAAyC,EAAE;oBAC1C,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,qCAA6B;iBAClC;gBACD,6CAA6C,EAAE;oBAC9C,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,iDAAyC;iBAC9C;gBACD,+CAA+C,EAAE;oBAChD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,UAAU,EAAE,IAAI;iBAChB;gBACD,2CAA2C,EAAE;oBAC5C,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,MAAM,EAAE;wBACP,IAAI,EAAE,2CAA2C;wBACjD,QAAQ,EAAE,cAAc,CAAC,UAAU;wBACnC,cAAc,EAAE,OAAO;wBACvB,YAAY,EAAE,EAAE,WAAW,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE;qBACrD;iBACD;gBACD,iDAAiD,EAAE;oBAClD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,EAAE;oBACb,MAAM,EAAE;wBACP,IAAI,EAAE,iDAAiD;wBACvD,QAAQ,EAAE,cAAc,CAAC,UAAU;wBACnC,cAAc,EAAE,OAAO;wBACvB,YAAY,EAAE,EAAE,WAAW,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE;qBACrD;iBACD;aACD;SACD,CAAC,CAAC;QAEH,qBAAqB,CAAC,6BAA6B,CAAC,CAAC;gBACpD,SAAS,EAAE;oBACV,SAAS,EAAE;wBACV,6CAA6C,EAAE,eAAe;qBAC9D;iBACD;aACD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,KAAK,IAAI,EAAE;QAChB,MAAM,UAAU,GAAG,IAAI,cAAc,EAAE,CAAC;QACxC,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC;QAC3D,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,0BAA0B,EAAE,CAAC,CAAC;QAC7E,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC,CAAC;QAE/E,MAAM,MAAM,GAAG,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QACnC,MAAM,WAAW,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAEvC,oBAAoB,GAAG,6BAA6B,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QAC7E,kBAAkB,GAAG,sBAAsB,CAAC;QAC5C,kBAAkB,CAAC,UAAU,GAAG,QAAQ,CAAC,MAAM,EAAE,eAAe,CAAC,CAAC;QAClE,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC,CAAC;QACpG,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,kBAAkB,CAAC,CAAC;QACnE,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,CAAC,WAAW,CAAC,CAAC,CAAC;QAChF,MAAM,uBAAuB,GAAG,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,uBAAuB,CAAC,kBAAkB,EAAE,WAAW,EAAE,kBAAkB,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;QACnM,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,OAAO,CAAC,cAAc,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,oBAAoB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,EAAE,OAAO,CAAC,cAAc,EAAE,uBAAuB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7O,sBAAsB,GAAG,oBAAoB,CAAC,IAAI,CAAC,uBAAuB,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,sBAAsB,CAAC,uBAAuB,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;QACjK,gBAAgB,GAAG,UAAU,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,gBAAgB,CACnE,EAAE,kBAAkB,EAAE,IAAI,kBAAkB,EAAE,EAAE,EAChD,kBAAkB,EAAE,sBAAsB,EAAE,uBAAuB,EACnE,WAAW,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,EACzE,WAAW,CAAC,GAAG,CAAC,IAAI,iBAAiB,CAAC,kBAAkB,CAAC,UAAU,EAAE,WAAW,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;QAClG,oBAAoB,CAAC,IAAI,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;QACrD,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,EAAE,UAAU,CAAC,CAAC;QAChE,oBAAoB,CAAC,IAAI,CAAC,qBAAqB,EAAE,UAAU,CAAC,CAAC;QAC7D,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,kBAAkB,CAAC,CAAC;QAEnE,MAAM,gBAAgB,CAAC,UAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC,CAAC;QACrE,oBAAoB,CAAC,IAAI,CAAC,yBAAyB,EAAE,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC;QACtI,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,EAAE,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;QACvH,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,EAAqB,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;QAChJ,gBAAgB,CAAC,2BAA2B,CAAC,oBAAoB,CAAC,CAAC;IACpE,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,UAAU,EAAE,GAAG,EAAE;QACrB,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,QAAQ,CAAC,sBAAsB,CAAC,EACjE;YACC,QAAQ,EAAE;gBACT,oBAAoB,EAAE,OAAO;gBAC7B,gBAAgB,EAAE,OAAO;gBACzB,2BAA2B,EAAE,OAAO;gBACpC,2BAA2B,EAAE,OAAO;gBACpC,aAAa,EAAE,OAAO;gBACtB,iBAAiB,EAAE,OAAO;gBAC1B,mBAAmB,EAAE,OAAO;gBAC5B,eAAe,EAAE,OAAO;gBACxB,qBAAqB,EAAE,EAAE;aACzB;SACD,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,2BAA2B,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACpG,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,4DAA4D,CAAC,CAAC,CAAC;QACvK,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,yCAAyC,CAAC,EAAE,WAAW,CAAC,CAAC;IACjG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,SAAS,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAClF,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,uCAAuC,CAAC,CAAC,CAAC;QAClJ,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,2BAA2B,CAAC,EAAE,IAAI,CAAC,CAAC;IAC5E,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,oBAAoB,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC7F,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,wCAAwC,CAAC,CAAC,CAAC;QACjL,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4BAA4B,CAAC,EAAE,IAAI,CAAC,CAAC;IAC7E,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,2CAA2C,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACpH,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,4DAA4D,CAAC,CAAC,CAAC;QACvK,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,iEAAiE,CAAC,CAAC,CAAC;QAC1M,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,yCAAyC,CAAC,EAAE,gBAAgB,CAAC,CAAC;IACtG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,qDAAqD,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC9H,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,0EAA0E,CAAC,CAAC,CAAC;QACrL,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,+EAA+E,CAAC,CAAC,CAAC;QACxN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,uDAAuD,CAAC,EAAE,gBAAgB,CAAC,CAAC;IACpH,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,0EAA0E,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACnJ,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,2DAA2D,CAAC,CAAC,CAAC;QACtK,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,gEAAgE,CAAC,CAAC,CAAC;QACzM,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,wCAAwC,EAAE;oBACzC,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;iBAClB;aACD;SACD,CAAC,CAAC;QACH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,wCAAwC,CAAC,EAAE,gBAAgB,CAAC,CAAC;IACrG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,oFAAoF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC7J,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,6EAA6E,CAAC,CAAC,CAAC;QACxL,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,kFAAkF,CAAC,CAAC,CAAC;QAC3N,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,0DAA0D,EAAE;oBAC3D,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,gDAAwC;iBAC7C;aACD;SACD,CAAC,CAAC;QACH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,0DAA0D,CAAC,EAAE,gBAAgB,CAAC,CAAC;IACvH,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,kDAAkD,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC3H,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,mEAAmE,CAAC,CAAC,CAAC;QAC9K,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,wEAAwE,CAAC,CAAC,CAAC;QAEjN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,gDAAgD,CAAC,EAAE,WAAW,CAAC,CAAC;IACxG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,sFAAsF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC/J,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,mEAAmE,CAAC,CAAC,CAAC;QAC9K,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,wEAAwE,CAAC,CAAC,CAAC;QAEjN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,gDAAgD,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;IACtK,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,8CAA8C,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACvH,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,+DAA+D,CAAC,CAAC,CAAC;QAC1K,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,oEAAoE,CAAC,CAAC,CAAC;QAE7M,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;IAClK,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,kFAAkF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC3J,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,+DAA+D,CAAC,CAAC,CAAC;QAC1K,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,oEAAoE,CAAC,CAAC,CAAC;QAE7M,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;IAClK,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,sEAAsE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC/I,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,0EAA0E,CAAC,CAAC,CAAC;QACrL,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,+EAA+E,CAAC,CAAC,CAAC;QAExN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,uDAAuD,CAAC,EAAE,WAAW,CAAC,CAAC;IAC/G,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,0GAA0G,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACnL,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,0EAA0E,CAAC,CAAC,CAAC;QACrL,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,+EAA+E,CAAC,CAAC,CAAC;QAExN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,uDAAuD,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;IAC7K,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,yEAAyE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAClJ,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,qEAAqE,CAAC,CAAC,CAAC;QAChL,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,0EAA0E,CAAC,CAAC,CAAC;QAEnN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,kDAAkD,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAE9G,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,kDAAkD,EAAE;oBACnD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,wCAAgC;iBACrC;aACD;SACD,CAAC,CAAC;QAEH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,kDAAkD,CAAC,EAAE,WAAW,CAAC,CAAC;QAEzG,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,kDAAkD,CAAC,EAAE,WAAW,CAAC,CAAC;IAC1G,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,iHAAiH,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC1L,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,qEAAqE,CAAC,CAAC,CAAC;QAChL,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,0EAA0E,CAAC,CAAC,CAAC;QAEnN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,kDAAkD,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAE5K,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,kDAAkD,EAAE;oBACnD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,wCAAgC;iBACrC;aACD;SACD,CAAC,CAAC;QAEH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,kDAAkD,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;QAEvK,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,kDAAkD,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;IACxK,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,6FAA6F,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACtK,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,4EAA4E,CAAC,CAAC,CAAC;QACvL,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,iFAAiF,CAAC,CAAC,CAAC;QAE1N,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,yDAAyD,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAErH,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,yDAAyD,EAAE;oBAC1D,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,wCAAgC;iBACrC;aACD;SACD,CAAC,CAAC;QAEH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,yDAAyD,CAAC,EAAE,WAAW,CAAC,CAAC;QAEhH,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,yDAAyD,CAAC,EAAE,WAAW,CAAC,CAAC;IACjH,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,iIAAiI,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC1M,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,4EAA4E,CAAC,CAAC,CAAC;QACvL,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,iFAAiF,CAAC,CAAC,CAAC;QAE1N,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,yDAAyD,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAEnL,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,yDAAyD,EAAE;oBAC1D,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,wCAAgC;iBACrC;aACD;SACD,CAAC,CAAC;QAEH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,yDAAyD,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;QAE9K,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,yDAAyD,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;IAC/K,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,yEAAyE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAClJ,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,iEAAiE,CAAC,CAAC,CAAC;QAC5K,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,sEAAsE,CAAC,CAAC,CAAC;QAE/M,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,8CAA8C,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAE1G,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,8CAA8C,EAAE;oBAC/C,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,oCAA4B;iBACjC;aACD;SACD,CAAC,CAAC;QAEH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,8CAA8C,CAAC,EAAE,WAAW,CAAC,CAAC;QAErG,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,8CAA8C,CAAC,EAAE,WAAW,CAAC,CAAC;IACtG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,6GAA6G,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACtL,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,iEAAiE,CAAC,CAAC,CAAC;QAC5K,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,sEAAsE,CAAC,CAAC,CAAC;QAE/M,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,8CAA8C,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAExK,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,8CAA8C,EAAE;oBAC/C,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,oCAA4B;iBACjC;aACD;SACD,CAAC,CAAC;QAEH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,8CAA8C,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;QAEnK,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,8CAA8C,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;IACpK,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,2BAA2B,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACpG,MAAM,MAAM,GAAG,MAAM,kBAAkB,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;YAC3E,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;YACrE,MAAM,WAAW,CAAC,SAAS,CAAC,kBAAkB,CAAC,UAAW,EAAE,QAAQ,CAAC,UAAU,CAAC,gEAAgE,CAAC,CAAC,CAAC;YACnJ,OAAO,OAAO,CAAC;QAChB,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,eAAe,CAAC,CAAC,GAAG,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,2CAA2C,CAAC,CAAC,CAAC;QAChG,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,2CAA2C,CAAC,EAAE,aAAa,CAAC,CAAC;QACpG,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,OAAO,CAAC,2CAA2C,CAAC,CAAC,WAAW,EAAE,aAAa,CAAC,CAAC;IAChH,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,8CAA8C,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACvH,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,8DAA8D,CAAC,CAAC,CAAC;QACzK,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,mEAAmE,CAAC,CAAC,CAAC;QAC5M,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,2CAA2C,CAAC,EAAE,gBAAgB,CAAC,CAAC;QACvG,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,OAAO,CAAC,2CAA2C,CAAC,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;IAC5G,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,mDAAmD,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC5H,MAAM,kBAAkB,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;YAC5D,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;YACrE,MAAM,WAAW,CAAC,SAAS,CAAC,kBAAkB,CAAC,UAAW,EAAE,QAAQ,CAAC,UAAU,CAAC,oEAAoE,CAAC,CAAC,CAAC;YACvJ,OAAO,OAAO,CAAC;QAChB,CAAC,CAAC,CAAC;QAEH,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,oEAAoE,CAAC,CAAC,CAAC;QAC/K,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,QAAQ,CAAC,iDAAiD,CAAC,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;IAC7G,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,sEAAsE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC/I,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,uCAAuC,CAAC,CAAC,CAAC;QAClJ,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAC1B,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,yEAAyE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAClJ,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,iEAAiE,CAAC,CAAC,CAAC;QAC1M,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAC1B,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,0DAA0D,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACnI,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,uCAAuC,CAAC,CAAC,CAAC;QAClJ,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,iEAAiE,CAAC,CAAC,CAAC;QAC1M,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,GAAG,EAAE,GAAG,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1E,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAC3B,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,SAAS,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAClF,IAAI,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;QACnD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;QAE5C,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,yCAAyC,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QAE1C,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,4DAA4D,CAAC,CAAC,CAAC;QACvK,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,yCAAyC,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;QAE9C,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,iEAAiE,CAAC,CAAC,CAAC;QAC1M,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,yCAAyC,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,gBAAgB,CAAC,CAAC;QAC5D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,gBAAgB,CAAC,CAAC;QAEnD,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,YAAY,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,4DAA4D,CAAC,CAAC,CAAC;QAClM,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;QACnD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;QAC7C,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,cAAc,EAAE;YAC7C,sBAAsB,EAAE;gBACvB,OAAO,EAAE;oBACR,aAAa,EAAE,YAAY;iBAC3B;aACD;SACD,CAAC,CAAC;QACH,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,KAAK,EAAE;YACpC,sBAAsB,EAAE;gBACvB,OAAO,EAAE;oBACR,aAAa,EAAE,YAAY;iBAC3B;aACD;SACD,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,6BAA6B,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACtG,UAAU,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QACvC,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,4EAA4E,CAAC,CAAC,CAAC;QACvL,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,IAAI,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,+CAA+C,CAAC,CAAC;QACjF,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,qBAAqB,CAAC,CAAC;QAC5D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,qBAAqB,CAAC,CAAC;QAExD,UAAU,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;QACtC,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,+CAA+C,CAAC,CAAC;QAC7E,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,qBAAqB,CAAC,CAAC;QAC5D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,qBAAqB,CAAC,CAAC;QAExD,UAAU,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QACvC,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,iFAAiF,CAAC,CAAC,CAAC;QAC1N,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,+CAA+C,CAAC,CAAC;QAC7E,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,qBAAqB,CAAC,CAAC;QAC5D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,0BAA0B,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,qBAAqB,CAAC,CAAC;QAExD,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,YAAY,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,4DAA4D,CAAC,CAAC,CAAC;QAClM,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;QACnD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;QAC7C,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,cAAc,EAAE;YAC7C,sBAAsB,EAAE;gBACvB,OAAO,EAAE;oBACR,aAAa,EAAE,YAAY;iBAC3B;aACD;SACD,CAAC,CAAC;QACH,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,KAAK,EAAE;YACpC,sBAAsB,EAAE;gBACvB,OAAO,EAAE;oBACR,aAAa,EAAE,YAAY;iBAC3B;aACD;SACD,CAAC,CAAC;QAEH,UAAU,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;QACtC,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,+CAA+C,CAAC,CAAC;QAC7E,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,qBAAqB,CAAC,CAAC;QAC5D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,0BAA0B,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,0BAA0B,CAAC,CAAC;QAE7D,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,YAAY,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,4DAA4D,CAAC,CAAC,CAAC;QAClM,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACrC,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;QACnD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;QAC7C,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,cAAc,EAAE;YAC7C,sBAAsB,EAAE;gBACvB,OAAO,EAAE;oBACR,aAAa,EAAE,YAAY;iBAC3B;aACD;SACD,CAAC,CAAC;QACH,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,KAAK,EAAE;YACpC,sBAAsB,EAAE;gBACvB,OAAO,EAAE;oBACR,aAAa,EAAE,YAAY;iBAC3B;aACD;SACD,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,0CAA0C,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACnH,UAAU,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QACvC,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,4EAA4E,CAAC,CAAC,CAAC;QACvL,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;QACrE,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,iFAAiF,CAAC,CAAC,CAAC;QAC1N,MAAM,KAAK,GAAG,MAAM,OAAO,CAAC;QAE5B,MAAM,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,+CAA+C,CAAC,CAAC;QACnF,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,qBAAqB,CAAC,CAAC;QAC5D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,0BAA0B,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,qBAAqB,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,oBAAoB,CAAC,+CAA+C,CAAC,EAAE,IAAI,CAAC,CAAC;IACvG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC/E,IAAI,MAAM,GAAG,UAAU,CAAC,IAAI,EAAE,CAAC;QAC/B,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,yCAAyC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACpF,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;QACxC,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;QAC7C,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;QAEnD,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,4DAA4D,CAAC,CAAC,CAAC;QACvK,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,IAAI,EAAE,CAAC;QAC3B,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,yCAAyC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACpF,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,yCAAyC,CAAC,CAAC,CAAC;QACjF,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;QAC7C,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;QAEnD,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,iEAAiE,CAAC,CAAC,CAAC;QAC1M,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,IAAI,EAAE,CAAC;QAC3B,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,yCAAyC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACpF,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,yCAAyC,CAAC,CAAC,CAAC;QACjF,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,yCAAyC,CAAC,CAAC,CAAC;QACtF,MAAM,CAAC,eAAe,CAAC,MAAM,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;IACpD,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,2BAA2B,EAAE,GAAG,EAAE;QACtC,OAAO,UAAU,CAAC,WAAW,CAAC,yCAAyC,EAAE,OAAO,mCAA2B;aACzG,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,yCAAyC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC;IAC3G,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,gCAAgC,EAAE,GAAG,EAAE;QAC3C,OAAO,UAAU,CAAC,WAAW,CAAC,2BAA2B,EAAE,OAAO,wCAAgC;aAChG,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,4EAA0C,EAAE,OAAO,CAAC,CAAC,CAAC;IAC1G,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,+BAA+B,EAAE,GAAG,EAAE;QAC1C,OAAO,UAAU,CAAC,WAAW,CAAC,yCAAyC,EAAE,OAAO,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,+CAAuC;aACnL,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,yCAAyC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC;IAC3G,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,6DAA6D,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACtI,MAAM,UAAU,CAAC,WAAW,CAAC,6CAA6C,EAAE,cAAc,EAAE,EAAE,kBAAkB,EAAE,SAAS,EAAE,CAAC,CAAC;QAC/H,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6CAA6C,EAAE,EAAE,kBAAkB,EAAE,SAAS,EAAE,CAAC,EAAE,cAAc,CAAC,CAAC;IAC3I,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,oEAAoE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC7I,MAAM,UAAU,CAAC,WAAW,CAAC,6CAA6C,EAAE,cAAc,EAAE,EAAE,mBAAmB,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;QAClI,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6CAA6C,EAAE,EAAE,kBAAkB,EAAE,SAAS,EAAE,CAAC,EAAE,cAAc,CAAC,CAAC;IAC3I,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,sDAAsD,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC/H,MAAM,UAAU,CAAC,WAAW,CAAC,6CAA6C,EAAE,gBAAgB,EAAE,EAAE,mBAAmB,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC,EAAE,mCAA2B,CAAC;QACzK,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6CAA6C,EAAE,EAAE,kBAAkB,EAAE,SAAS,EAAE,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAC5I,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6CAA6C,EAAE,EAAE,kBAAkB,EAAE,SAAS,EAAE,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAC5I,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,QAAQ,CAAC,0BAA0B,CAAC,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,6CAA6C,EAAE,gBAAgB,EAAE,CAAC,CAAC;IACtK,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,uEAAuE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAChJ,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,yFAAyF,CAAC,CAAC,CAAC;QACpM,MAAM,UAAU,CAAC,WAAW,CAAC,6CAA6C,EAAE,gBAAgB,EAAE,EAAE,mBAAmB,EAAE,CAAC,SAAS,EAAE,SAAS,CAAC,EAAE,mCAA2B,CAAC;QACzK,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6CAA6C,EAAE,EAAE,kBAAkB,EAAE,SAAS,EAAE,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAC5I,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6CAA6C,EAAE,EAAE,kBAAkB,EAAE,SAAS,EAAE,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAC5I,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,QAAQ,CAAC,0BAA0B,CAAC,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,6CAA6C,EAAE,gBAAgB,EAAE,CAAC,CAAC;QACrK,MAAM,aAAa,GAAG,CAAC,MAAM,WAAW,CAAC,QAAQ,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;QAC5H,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,EAAE,EAAE,oBAAoB,EAAE,EAAE,6CAA6C,EAAE,gBAAgB,EAAE,EAAE,CAAC,CAAC;IAClJ,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,wCAAwC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACjH,MAAM,UAAU,CAAC,WAAW,CAAC,6CAA6C,EAAE,OAAO,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,+CAAuC,CAAC;QACzL,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6CAA6C,CAAC,EAAE,OAAO,CAAC,CAAC;IACjG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,qFAAqF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC9J,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6CAA6C,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,kBAAkB,EAAE,OAAO,EAAE,CAAC,EAAE,eAAe,CAAC,CAAC;QACnM,MAAM,UAAU,CAAC,WAAW,CAAC,6CAA6C,EAAE,sBAAsB,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,kBAAkB,EAAE,OAAO,EAAE,+CAAuC,CAAC;QACrO,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6CAA6C,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,kBAAkB,EAAE,OAAO,EAAE,CAAC,EAAE,sBAAsB,CAAC,CAAC;IAC3M,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,4FAA4F,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACrK,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6CAA6C,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,kBAAkB,EAAE,OAAO,EAAE,CAAC,EAAE,eAAe,CAAC,CAAC;QACnM,MAAM,UAAU,CAAC,WAAW,CAAC,6CAA6C,EAAE,sBAAsB,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,mBAAmB,EAAE,CAAC,OAAO,CAAC,EAAE,+CAAuC,CAAC;QACxO,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6CAA6C,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,kBAAkB,EAAE,OAAO,EAAE,CAAC,EAAE,sBAAsB,CAAC,CAAC;IAC3M,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,yFAAyF,EAAE,GAAG,EAAE;QACpG,OAAO,UAAU,CAAC,WAAW,CAAC,gDAAgD,EAAE,gBAAgB,EAAE,EAAE,yCAAiC,EAAE,gBAAgB,EAAE,IAAI,EAAE,CAAC;aAC9J,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,yBAAyB,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,0FAAkF,CAAC,CAAC;IAC1K,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,6GAA6G,EAAE,GAAG,EAAE;QACxH,OAAO,UAAU,CAAC,WAAW,CAAC,uDAAuD,EAAE,gBAAgB,EAAE,EAAE,yCAAiC,EAAE,gBAAgB,EAAE,IAAI,EAAE,CAAC;aACrK,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,yBAAyB,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,0FAAkF,CAAC,CAAC;IAC1K,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,qFAAqF,EAAE,GAAG,EAAE;QAChG,OAAO,UAAU,CAAC,WAAW,CAAC,4CAA4C,EAAE,gBAAgB,EAAE,EAAE,yCAAiC,EAAE,gBAAgB,EAAE,IAAI,EAAE,CAAC;aAC1J,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,yBAAyB,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,sFAA8E,CAAC,CAAC;IACtK,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,4BAA4B,EAAE,GAAG,EAAE;QACvC,OAAO,UAAU,CAAC,WAAW,CAAC,OAAO,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,CAAC,EAAE,wCAAgC;aAC9H,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,QAAQ,2CAA6B,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACnJ,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,iFAAiF,EAAE,GAAG,EAAE;QAC5F,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,OAAO,UAAU,CAAC,WAAW,CAAC,yCAAyC,EAAE,OAAO,mCAA2B;aACzG,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;IACxC,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,sFAAsF,EAAE,GAAG,EAAE;QACjG,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,OAAO,UAAU,CAAC,WAAW,CAAC,yCAAyC,EAAE,OAAO,wCAAgC;aAC9G,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;IACxC,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,6BAA6B,EAAE,GAAG,EAAE;QACxC,OAAO,UAAU,CAAC,WAAW,CAAC,yCAAyC,EAAE,aAAa,qCAA6B;aACjH,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,yCAAyC,CAAC,EAAE,aAAa,CAAC,CAAC,CAAC;IACjH,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,mFAAmF,EAAE,GAAG,EAAE;QAC9F,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,OAAO,UAAU,CAAC,WAAW,CAAC,yCAAyC,EAAE,aAAa,qCAA6B;aACjH,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;IACxC,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,iCAAiC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC1G,MAAM,GAAG,GAAG,yCAAyC,CAAC;QACtD,MAAM,UAAU,CAAC,WAAW,CAAC,GAAG,EAAE,gBAAgB,wCAAgC,CAAC;QACnF,MAAM,UAAU,CAAC,WAAW,CAAC,GAAG,EAAE,WAAW,mCAA2B,CAAC;QAEzE,MAAM,UAAU,CAAC,WAAW,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;QAC7C,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QACrG,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;IAC5D,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,sEAAsE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC/I,MAAM,UAAU,CAAC,WAAW,CAAC,yCAAyC,EAAE,OAAO,mCAA2B,CAAC;QAC3G,MAAM,UAAU,CAAC,WAAW,CAAC,yCAAyC,EAAE,OAAO,CAAC,CAAC;QACjF,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,OAAO,CAAC,yCAAyC,CAAC,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;IACxG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,kEAAkE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC3I,MAAM,UAAU,CAAC,WAAW,CAAC,yCAAyC,EAAE,OAAO,mCAA2B,CAAC;QAC3G,MAAM,UAAU,CAAC,WAAW,CAAC,yCAAyC,EAAE,OAAO,mCAA2B,CAAC;QAC3G,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,OAAO,CAAC,yCAAyC,CAAC,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;IACtG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,iFAAiF,EAAE,GAAG,EAAE;QAC5F,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,OAAO,UAAU,CAAC,WAAW,CAAC,OAAO,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,CAAC,EAAE,wCAAgC;aAC9H,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;IACxC,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,gDAAgD,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACzH,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,MAAM,OAAO,CAAC,CAAC,CAAC,CAAC;QACjB,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;IAC7B,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,0CAA0C,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACnH,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,kBAAkB,CAAC,mBAAmB,EAAE,YAAY,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,0DAA0D,CAAC,CAAC,CAAC;QAC7K,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;QACrE,MAAM,UAAU,CAAC,4BAA4B,EAAE,CAAC;QAChD,MAAM,OAAO,CAAC;IACf,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,6BAA6B,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAChG,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,4DAA4D,CAAC,CAAC,CAAC;QACvK,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,IAAI,OAAO,CAAO,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;YAChC,MAAM,UAAU,GAAG,UAAU,CAAC,wBAAwB,CAAC,CAAC,CAAC,EAAE;gBAC1D,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,oBAAoB,CAAC,yCAAyC,CAAC,CAAC,CAAC;gBAC7E,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,yCAAyC,CAAC,EAAE,gBAAgB,CAAC,CAAC;gBACrG,UAAU,CAAC,OAAO,EAAE,CAAC;gBACrB,CAAC,EAAE,CAAC;YACL,CAAC,CAAC,CAAC;YACH,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,iEAAiE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAC9M,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,6BAA6B,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAChG,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,4DAA4D,CAAC,CAAC,CAAC;QACvK,MAAM,yBAAyB,GAAG,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,CAAC;QACvH,MAAM,WAAW,CAAC,SAAS,CAAC,yBAAyB,EAAE,QAAQ,CAAC,UAAU,CAAC,iEAAiE,CAAC,CAAC,CAAC;QAC/I,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,GAAG,MAAM,IAAI,OAAO,CAA4B,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;YAC/D,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC;YACnD,WAAW,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACrD,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC,oBAAoB,CAAC,yCAAyC,CAAC,CAAC,CAAC;QAC7E,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,yCAAyC,CAAC,EAAE,WAAW,CAAC,CAAC;IACjG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,qEAAqE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC9I,UAAU,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;QAEtC,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,kEAAkE,CAAC,CAAC,CAAC;QAC7K,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,uEAAuE,CAAC,CAAC,CAAC;QAChN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,+CAA+C,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,gBAAgB,CAAC,CAAC;QACzK,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,kBAAkB,CAAC,OAAO,CAAC,QAAQ,CAAC,+CAA+C,CAAC,CAAC,CAAC;QAC3G,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;QACxE,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC,+CAA+C,CAAC,CAAC,CAAC;QACnH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QAC3E,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,kBAAkB,CAAC,eAAe,EAAE,GAAG,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,+CAA+C,CAAC,CAAC,CAAC;IAC/K,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,oFAAoF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC7J,UAAU,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;QAEtC,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,kEAAkE,CAAC,CAAC,CAAC;QAC7K,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,uEAAuE,CAAC,CAAC,CAAC;QAChN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,UAAU,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,+CAA+C,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;QACpK,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,kBAAkB,CAAC,OAAO,CAAC,QAAQ,CAAC,+CAA+C,CAAC,CAAC,CAAC;QAC3G,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;QACxE,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC,+CAA+C,CAAC,CAAC,CAAC;QACnH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QAC3E,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,kBAAkB,CAAC,eAAe,EAAE,GAAG,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,+CAA+C,CAAC,CAAC,CAAC;IAC/K,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,kEAAkE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC3I,UAAU,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;QAEtC,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,kEAAkE,CAAC,CAAC,CAAC;QAC7K,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,uEAAuE,CAAC,CAAC,CAAC;QAChN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;QACrE,UAAU,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QAEvC,MAAM,KAAK,GAAG,MAAM,OAAO,CAAC;QAC5B,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,YAAY,CAAC,GAAG,CAAC,+CAA+C,CAAC,CAAC,CAAC;QACnF,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,oBAAoB,CAAC,+CAA+C,CAAC,CAAC,CAAC;IACxF,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,6EAA6E,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACtJ,UAAU,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QAEvC,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,kEAAkE,CAAC,CAAC,CAAC;QAC7K,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,uEAAuE,CAAC,CAAC,CAAC;QAChN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,+CAA+C,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;QACpK,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,kBAAkB,CAAC,OAAO,CAAC,QAAQ,CAAC,+CAA+C,CAAC,CAAC,CAAC;QAC3G,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;QACxE,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC,+CAA+C,CAAC,CAAC,CAAC;QACnH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QAC3E,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,kBAAkB,CAAC,eAAe,EAAE,GAAG,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,+CAA+C,CAAC,CAAC,CAAC;IAC/K,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,iEAAiE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC1I,UAAU,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QAEvC,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,kEAAkE,CAAC,CAAC,CAAC;QAC7K,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,uEAAuE,CAAC,CAAC,CAAC;QAChN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,UAAU,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;QAEtC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,+CAA+C,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,gBAAgB,CAAC,CAAC;QACzK,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,kBAAkB,CAAC,OAAO,CAAC,QAAQ,CAAC,+CAA+C,CAAC,CAAC,CAAC;QAC3G,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;QACxE,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC,+CAA+C,CAAC,CAAC,CAAC;QACnH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QAC3E,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,kBAAkB,CAAC,eAAe,EAAE,GAAG,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,+CAA+C,CAAC,CAAC,CAAC;IAC/K,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,gEAAgE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACzI,UAAU,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QAEvC,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,kEAAkE,CAAC,CAAC,CAAC;QAC7K,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,uEAAuE,CAAC,CAAC,CAAC;QAChN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;QACrE,UAAU,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;QAEtC,MAAM,KAAK,GAAG,MAAM,OAAO,CAAC;QAC5B,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,YAAY,CAAC,GAAG,CAAC,+CAA+C,CAAC,CAAC,CAAC;QACnF,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,oBAAoB,CAAC,+CAA+C,CAAC,CAAC,CAAC;IACxF,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,oDAAoD,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACvH,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,kEAAkE,CAAC,CAAC,CAAC;QAC7K,UAAU,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QAEvC,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,6BAA6B,CAAC,CAAC;QAC1E,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,uEAAuE,CAAC,CAAC,CAAC;QAEhN,OAAO,OAAO,CAAC;IAChB,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,gCAAgC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACzG,MAAM,GAAG,GAAG,4CAA4C,CAAC;QACzD,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,+DAA+D,CAAC,CAAC,CAAC;QAC1K,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,oEAAoE,CAAC,CAAC,CAAC;QAE7M,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,UAAU,CAAC,WAAW,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;QAE7C,MAAM,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QACrG,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;IAC5D,CAAC,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEH,KAAK,CAAC,0CAA0C,EAAE,GAAG,EAAE;IAEtD,IAAI,UAA4B,EAAE,gBAAkC,EAAE,WAAyB,EAAE,kBAAuD,EAAE,sBAA+C,EAAE,oBAA8C,CAAC;IAC1P,MAAM,qBAAqB,GAAG,QAAQ,CAAC,EAAE,CAAyB,uBAAuB,CAAC,aAAa,CAAC,CAAC;IACzG,MAAM,WAAW,GAAG,uCAAuC,EAAE,CAAC;IAE9D,UAAU,CAAC,GAAG,EAAE;QACf,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,CAAC,0BAA0B,CAAC,EAAE;oBAC7B,MAAM,EAAE,OAAO;oBACf,SAAS,EAAE,EAAE;oBACb,OAAO,wCAAgC;iBACvC;gBACD,kDAAkD,EAAE;oBACnD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,wCAAgC;iBACrC;gBACD,yDAAyD,EAAE;oBAC1D,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,gDAAwC;iBAC7C;gBACD,2CAA2C,EAAE;oBAC5C,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;iBAClB;gBACD,mDAAmD,EAAE;oBACpD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,wCAAgC;iBACrC;gBACD,4CAA4C,EAAE;oBAC7C,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;iBAClB;aACD;SACD,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,KAAK,IAAI,EAAE;QAChB,MAAM,UAAU,GAAG,IAAI,cAAc,EAAE,CAAC;QACxC,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC;QAC3D,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,0BAA0B,EAAE,CAAC,CAAC;QAC7E,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC,CAAC;QAE/E,MAAM,MAAM,GAAG,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QACnC,MAAM,WAAW,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAEvC,oBAAoB,GAAG,6BAA6B,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QAC7E,kBAAkB,GAAG,sBAAsB,CAAC;QAC5C,kBAAkB,CAAC,UAAU,GAAG,QAAQ,CAAC,MAAM,EAAE,eAAe,CAAC,CAAC;QAClE,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC,CAAC;QACpG,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,kBAAkB,CAAC,CAAC;QACnE,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,CAAC,WAAW,CAAC,CAAC,CAAC;QAChF,MAAM,uBAAuB,GAAG,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,uBAAuB,CAAC,kBAAkB,EAAE,WAAW,EAAE,kBAAkB,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;QACnM,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,OAAO,CAAC,cAAc,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,oBAAoB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,EAAE,OAAO,CAAC,cAAc,EAAE,uBAAuB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7O,sBAAsB,GAAG,oBAAoB,CAAC,IAAI,CAAC,uBAAuB,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,sBAAsB,CAAC,iBAAiB,CAAC,QAAQ,EAAE,QAAQ,EAAE,QAAQ,CAAC,kBAAkB,CAAC,mBAAmB,EAAE,UAAU,EAAE,MAAM,CAAC,EAAE,QAAQ,CAAC,kBAAkB,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/R,gBAAgB,GAAG,UAAU,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,gBAAgB,CACnE,EAAE,kBAAkB,EAAE,IAAI,kBAAkB,EAAE,EAAE,EAChD,kBAAkB,EAAE,sBAAsB,EAAE,uBAAuB,EACnE,WAAW,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,EACzE,WAAW,CAAC,GAAG,CAAC,IAAI,iBAAiB,CAAC,kBAAkB,CAAC,UAAU,EAAE,WAAW,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;QAClG,oBAAoB,CAAC,IAAI,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;QACrD,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,EAAE,UAAU,CAAC,CAAC;QAChE,oBAAoB,CAAC,IAAI,CAAC,qBAAqB,EAAE,UAAU,CAAC,CAAC;QAC7D,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,kBAAkB,CAAC,CAAC;QAEnE,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,wIAAwI,CAAC,CAAC,CAAC;QACpP,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,uIAAuI,CAAC,CAAC,CAAC;QAClP,MAAM,gBAAgB,CAAC,UAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC,CAAC;QACrE,oBAAoB,CAAC,IAAI,CAAC,yBAAyB,EAAE,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC;QACtI,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,EAAE,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;QACvH,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,EAAE,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;QAC7H,gBAAgB,CAAC,2BAA2B,CAAC,oBAAoB,CAAC,CAAC;IACpE,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,YAAY,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACrF,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,mDAAmD,CAAC,EAAE,kBAAkB,CAAC,CAAC;QACjH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,cAAc,CAAC,CAAC;IACvG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,SAAS,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAClF,IAAI,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;QACnD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;QAE5C,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,kDAAkD,CAAC,CAAC;QAChF,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QAE1C,MAAM,WAAW,CAAC,SAAS,CAAC,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,4EAA4E,CAAC,CAAC,CAAC;QACnN,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,wEAAwE,CAAC,CAAC,CAAC;QACnL,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,kDAAkD,CAAC,CAAC;QAChF,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,gBAAgB,EAAE,kBAAkB,CAAC,CAAC;QAChE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,cAAc,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,kBAAkB,CAAC,CAAC;QAErD,MAAM,WAAW,CAAC,SAAS,CAAC,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,qEAAqE,CAAC,CAAC,CAAC;QAC5M,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,iEAAiE,CAAC,CAAC,CAAC;QAC5K,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,2CAA2C,CAAC,CAAC;QACzE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,gBAAgB,EAAE,SAAS,CAAC,CAAC;QACvD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,cAAc,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,kCAAkC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC3G,MAAM,UAAU,CAAC,WAAW,CAAC,kDAAkD,EAAE,kBAAkB,CAAC,CAAC;QAErG,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,WAAW,CAAC,QAAQ,CAAC,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE,kDAAkD,EAAE,kBAAkB,EAAE,mDAAmD,EAAE,kBAAkB,EAAE,4CAA4C,EAAE,WAAW,EAAE,CAAC,CAAC;QACtX,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,kDAAkD,CAAC,EAAE,kBAAkB,CAAC,CAAC;IACjH,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,oCAAoC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC7G,MAAM,UAAU,CAAC,WAAW,CAAC,yDAAyD,EAAE,kBAAkB,CAAC,CAAC;QAE5G,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,WAAW,CAAC,QAAQ,CAAC,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE,yDAAyD,EAAE,kBAAkB,EAAE,mDAAmD,EAAE,kBAAkB,EAAE,4CAA4C,EAAE,WAAW,EAAE,CAAC,CAAC;QAC7X,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,yDAAyD,CAAC,EAAE,kBAAkB,CAAC,CAAC;IACxH,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,uBAAuB,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAChG,MAAM,UAAU,CAAC,WAAW,CAAC,2CAA2C,EAAE,cAAc,CAAC,CAAC;QAE1F,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,WAAW,CAAC,QAAQ,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE,2CAA2C,EAAE,cAAc,EAAE,4CAA4C,EAAE,cAAc,EAAE,mDAAmD,EAAE,cAAc,EAAE,CAAC,CAAC;QAC9U,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,2CAA2C,CAAC,EAAE,cAAc,CAAC,CAAC;IACtG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,uCAAuC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAChH,MAAM,WAAW,CAAC,SAAS,CAAC,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,oEAAoE,CAAC,CAAC,CAAC;QAC3M,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,4CAA4C,EAAE;oBAC7C,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;iBAClB;aACD;SACD,CAAC,CAAC;QAEH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,OAAO,CAAC,CAAC;IAChG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,kDAAkD,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC3H,MAAM,WAAW,CAAC,SAAS,CAAC,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,2EAA2E,CAAC,CAAC,CAAC;QAClN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,mDAAmD,EAAE;oBACpD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,wCAAgC;iBACrC;aACD;SACD,CAAC,CAAC;QAEH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,mDAAmD,CAAC,EAAE,gBAAgB,CAAC,CAAC;IAChH,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,iEAAiE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC1I,MAAM,WAAW,CAAC,SAAS,CAAC,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,qEAAqE,CAAC,CAAC,CAAC;QAC5M,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6CAA6C,CAAC,EAAE,SAAS,CAAC,CAAC;IACnG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,8CAA8C,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACvH,MAAM,UAAU,CAAC,WAAW,CAAC,0BAA0B,EAAE,CAAC,4CAA4C,CAAC,yCAAiC,CAAC;QAEzI,MAAM,UAAU,CAAC,UAAU,CAAC,yBAAyB,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;QAE5E,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,mDAAmD,CAAC,EAAE,kBAAkB,CAAC,CAAC;QACjH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,WAAW,CAAC,CAAC;IACpG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,8BAA8B,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACvG,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;QACrE,MAAM,UAAU,CAAC,WAAW,CAAC,0BAA0B,EAAE,CAAC,4CAA4C,CAAC,yCAAiC,CAAC;QAEzI,MAAM,WAAW,GAAG,MAAM,OAAO,CAAC;QAClC,MAAM,CAAC,eAAe,CAAC,CAAC,GAAG,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,0BAA0B,EAAE,4CAA4C,CAAC,CAAC,CAAC;QAClI,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,WAAW,CAAC,CAAC;IACpG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,qDAAqD,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC9H,MAAM,WAAW,CAAC,SAAS,CAAC,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,+DAA+D,CAAC,CAAC,CAAC;QACtM,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,kEAAkE,CAAC,CAAC,CAAC;QAC7K,MAAM,UAAU,CAAC,WAAW,CAAC,0BAA0B,EAAE,CAAC,4CAA4C,CAAC,yCAAiC,CAAC;QACzI,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,WAAW,CAAC,CAAC;QAEnG,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,4CAA4C,EAAE;oBAC7C,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;iBAClB;aACD;SACD,CAAC,CAAC;QAEH,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,WAAW,CAAC,CAAC;IACpG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,gDAAgD,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACzH,MAAM,UAAU,CAAC,WAAW,CAAC,0BAA0B,EAAE,CAAC,4CAA4C,CAAC,yCAAiC,CAAC;QACzI,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;QACrE,MAAM,UAAU,CAAC,WAAW,CAAC,4CAA4C,EAAE,cAAc,yCAAiC,CAAC;QAE3H,MAAM,WAAW,GAAG,MAAM,OAAO,CAAC;QAClC,MAAM,CAAC,eAAe,CAAC,CAAC,GAAG,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,4CAA4C,CAAC,CAAC,CAAC;QACtG,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,cAAc,CAAC,CAAC;IACvG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,oCAAoC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC7G,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,8BAA8B,CAAC,mDAAmD,CAAC,EAAE,IAAI,CAAC,CAAC;QACzH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,8BAA8B,CAAC,4CAA4C,CAAC,EAAE,KAAK,CAAC,CAAC;QAEnH,MAAM,UAAU,CAAC,WAAW,CAAC,0BAA0B,EAAE,CAAC,4CAA4C,CAAC,yCAAiC,CAAC;QACzI,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,8BAA8B,CAAC,4CAA4C,CAAC,EAAE,IAAI,CAAC,CAAC;IACnH,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,2BAA2B,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACpG,MAAM,WAAW,CAAC,SAAS,CAAC,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,sIAAsI,CAAC,CAAC,CAAC;QAC7Q,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,qIAAqI,CAAC,CAAC,CAAC;QAChP,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;QACrE,MAAM,sBAAsB,CAAC,oBAAoB,CAAC,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,CAAC;QAErH,MAAM,WAAW,GAAG,MAAM,OAAO,CAAC;QAClC,MAAM,CAAC,eAAe,CAAC,CAAC,GAAG,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,2CAA2C,CAAC,CAAC,CAAC;QACrG,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,kDAAkD,CAAC,EAAE,kBAAkB,CAAC,CAAC;QAChH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,2CAA2C,CAAC,EAAE,WAAW,CAAC,CAAC;IACnG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,+BAA+B,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACxG,MAAM,WAAW,CAAC,SAAS,CAAC,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,sIAAsI,CAAC,CAAC,CAAC;QAC7Q,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,qIAAqI,CAAC,CAAC,CAAC;QAChP,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,OAAO,GAAG,iBAAiB,CAAC,SAAS,EAAE,SAAS,EAAE,QAAQ,CAAC,kBAAkB,CAAC,mBAAmB,EAAE,UAAU,EAAE,SAAS,CAAC,EAAE,QAAQ,CAAC,kBAAkB,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC,CAAC;QAC1L,MAAM,WAAW,CAAC,SAAS,CAAC,OAAO,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,uIAAuI,CAAC,CAAC,CAAC;QACpN,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;QACrE,MAAM,sBAAsB,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC;QAE3D,MAAM,WAAW,GAAG,MAAM,OAAO,CAAC;QAClC,MAAM,CAAC,eAAe,CAAC,CAAC,GAAG,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,2CAA2C,CAAC,CAAC,CAAC;QACrG,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,kDAAkD,CAAC,EAAE,kBAAkB,CAAC,CAAC;QAChH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,2CAA2C,CAAC,EAAE,eAAe,CAAC,CAAC;IACvG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,mEAAmE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC5I,MAAM,WAAW,CAAC,SAAS,CAAC,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,sIAAsI,CAAC,CAAC,CAAC;QAC7Q,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,qIAAqI,CAAC,CAAC,CAAC;QAChP,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,OAAO,GAAG,iBAAiB,CAAC,SAAS,EAAE,SAAS,EAAE,QAAQ,CAAC,kBAAkB,CAAC,mBAAmB,EAAE,UAAU,EAAE,SAAS,CAAC,EAAE,QAAQ,CAAC,kBAAkB,CAAC,SAAS,EAAE,eAAe,CAAC,EAAE,EAAE,eAAe,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,EAAE,EAAE,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,CAAC;QACtS,MAAM,WAAW,CAAC,SAAS,CAAC,OAAO,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,2IAA2I,CAAC,CAAC,CAAC;QACxN,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;QACrE,MAAM,sBAAsB,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC;QAE3D,MAAM,WAAW,GAAG,MAAM,OAAO,CAAC;QAClC,MAAM,CAAC,eAAe,CAAC,CAAC,GAAG,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,kDAAkD,EAAE,2CAA2C,CAAC,CAAC,CAAC;QACzJ,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,kDAAkD,CAAC,EAAE,mBAAmB,CAAC,CAAC;QACjH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,2CAA2C,CAAC,EAAE,eAAe,CAAC,CAAC;IACvG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,yHAAyH,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAClM,MAAM,WAAW,CAAC,SAAS,CAAC,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;QAC3I,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;QACrE,MAAM,WAAW,CAAC,SAAS,CAAC,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,6IAA6I,CAAC,CAAC,CAAC;QAEpR,MAAM,WAAW,GAAG,MAAM,OAAO,CAAC;QAClC,MAAM,CAAC,eAAe,CAAC,CAAC,GAAG,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,kDAAkD,CAAC,CAAC,CAAC;QAC5G,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,kDAAkD,CAAC,EAAE,kBAAkB,CAAC,CAAC;QAChH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,2CAA2C,CAAC,EAAE,OAAO,CAAC,CAAC;IAC/F,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,iEAAiE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC1I,MAAM,UAAU,CAAC,WAAW,CAAC,0BAA0B,EAAE,CAAC,4CAA4C,CAAC,yCAAiC,CAAC;QAEzI,MAAM,sBAAsB,CAAC,oBAAoB,CAAC,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,CAAC;QAErH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,mDAAmD,CAAC,EAAE,kBAAkB,CAAC,CAAC;QACjH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,WAAW,CAAC,CAAC;IACpG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,qEAAqE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC9I,MAAM,UAAU,CAAC,WAAW,CAAC,0BAA0B,EAAE,CAAC,4CAA4C,CAAC,yCAAiC,CAAC;QAEzI,MAAM,OAAO,GAAG,iBAAiB,CAAC,SAAS,EAAE,SAAS,EAAE,QAAQ,CAAC,kBAAkB,CAAC,mBAAmB,EAAE,UAAU,EAAE,SAAS,CAAC,EAAE,QAAQ,CAAC,kBAAkB,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC,CAAC;QAC1L,MAAM,WAAW,CAAC,SAAS,CAAC,OAAO,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,gIAAgI,CAAC,CAAC,CAAC;QAC7M,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;QACrE,MAAM,sBAAsB,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC;QAE3D,MAAM,WAAW,GAAG,MAAM,OAAO,CAAC;QAClC,MAAM,CAAC,eAAe,CAAC,CAAC,GAAG,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,2CAA2C,CAAC,CAAC,CAAC;QACrG,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,mDAAmD,CAAC,EAAE,kBAAkB,CAAC,CAAC;QACjH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,WAAW,CAAC,CAAC;QACnG,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,2CAA2C,CAAC,EAAE,cAAc,CAAC,CAAC;IACtG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,kFAAkF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC3J,MAAM,UAAU,CAAC,WAAW,CAAC,0BAA0B,EAAE,CAAC,4CAA4C,CAAC,yCAAiC,CAAC;QACzI,MAAM,sBAAsB,CAAC,oBAAoB,CAAC,oBAAoB,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC,cAAc,CAAC,CAAC;QAErH,MAAM,OAAO,GAAG,iBAAiB,CAAC,SAAS,EAAE,SAAS,EAAE,QAAQ,CAAC,kBAAkB,CAAC,mBAAmB,EAAE,UAAU,EAAE,SAAS,CAAC,EAAE,QAAQ,CAAC,kBAAkB,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC,CAAC;QAC1L,MAAM,WAAW,CAAC,SAAS,CAAC,OAAO,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,gIAAgI,CAAC,CAAC,CAAC;QAC7M,MAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;QACrE,MAAM,sBAAsB,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC;QAE3D,MAAM,WAAW,GAAG,MAAM,OAAO,CAAC;QAClC,MAAM,CAAC,eAAe,CAAC,CAAC,GAAG,WAAW,CAAC,YAAY,CAAC,EAAE,CAAC,2CAA2C,CAAC,CAAC,CAAC;QACrG,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,mDAAmD,CAAC,EAAE,kBAAkB,CAAC,CAAC;QACjH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,WAAW,CAAC,CAAC;QACnG,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,2CAA2C,CAAC,EAAE,cAAc,CAAC,CAAC;IACtG,CAAC,CAAC,CAAC,CAAC;AAEL,CAAC,CAAC,CAAC;AAEH,KAAK,CAAC,yCAAyC,EAAE,GAAG,EAAE;IAErD,IAAI,uBAAiD,EAAE,iBAAsC,EAAE,UAA4B,EAAE,WAAyB,EAAE,kBAAsD,EAAE,sBAA+C,CAAC;IAChQ,MAAM,qBAAqB,GAAG,QAAQ,CAAC,EAAE,CAAyB,uBAAuB,CAAC,aAAa,CAAC,CAAC;IACzG,MAAM,WAAW,GAAG,uCAAuC,EAAE,CAAC;IAE9D,UAAU,CAAC,GAAG,EAAE;QACf,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,4CAA4C,EAAE;oBAC7C,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;iBAClB;gBACD,mDAAmD,EAAE;oBACpD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,wCAAgC;iBACrC;gBACD,+CAA+C,EAAE;oBAChD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,oCAA4B;iBACjC;gBACD,0DAA0D,EAAE;oBAC3D,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,gDAAwC;iBAC7C;gBACD,oDAAoD,EAAE;oBACrD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,qCAA6B;iBAClC;gBACD,oDAAoD,EAAE;oBACrD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,iDAAyC;iBAC9C;gBACD,uDAAuD,EAAE;oBACxD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,UAAU,EAAE,IAAI;oBAChB,KAAK,qCAA6B;iBAClC;gBACD,uDAAuD,EAAE;oBACxD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,UAAU,EAAE,IAAI;oBAChB,KAAK,qCAA6B;iBAClC;aACD;SACD,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,KAAK,IAAI,EAAE;QAChB,MAAM,UAAU,GAAG,IAAI,cAAc,EAAE,CAAC;QACxC,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC;QAC3D,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,0BAA0B,EAAE,CAAC,CAAC;QAC7E,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC,CAAC;QAE/E,MAAM,eAAe,GAAG,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAC/C,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QACpC,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QACpC,MAAM,cAAc,GAAG,QAAQ,CAAC,IAAI,EAAE,yBAAyB,CAAC,CAAC;QACjE,MAAM,SAAS,GAAG,EAAE,OAAO,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,OAAO,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC;QAEhF,MAAM,WAAW,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;QAChD,MAAM,WAAW,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QACxC,MAAM,WAAW,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QACxC,MAAM,WAAW,CAAC,SAAS,CAAC,cAAc,EAAE,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;QAExG,MAAM,oBAAoB,GAAG,6BAA6B,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QACnF,kBAAkB,GAAG,sBAAsB,CAAC;QAC5C,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC,CAAC;QACpG,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,kBAAkB,CAAC,CAAC;QACnE,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,CAAC,WAAW,CAAC,CAAC,CAAC;QAChF,MAAM,uBAAuB,GAAG,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,uBAAuB,CAAC,kBAAkB,EAAE,WAAW,EAAE,kBAAkB,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;QACnM,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,OAAO,CAAC,cAAc,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,oBAAoB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,EAAE,OAAO,CAAC,cAAc,EAAE,uBAAuB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7O,sBAAsB,GAAG,oBAAoB,CAAC,IAAI,CAAC,uBAAuB,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,sBAAsB,CAAC,uBAAuB,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;QACjK,MAAM,gBAAgB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,gBAAgB,CAC5D,EAAE,kBAAkB,EAAE,IAAI,kBAAkB,EAAE,EAAE,EAChD,kBAAkB,EAAE,sBAAsB,EAAE,uBAAuB,EACnE,WAAW,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,EAAE,IAAI,iBAAiB,EAAE,CAAC,CAAC,CAAC;QAEtG,oBAAoB,CAAC,IAAI,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;QACrD,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,EAAE,gBAAgB,CAAC,CAAC;QACtE,oBAAoB,CAAC,IAAI,CAAC,qBAAqB,EAAE,gBAAgB,CAAC,CAAC;QACnE,oBAAoB,CAAC,IAAI,CAAC,4BAA4B,EAAE,kBAAkB,CAAC,CAAC;QAC5E,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,kBAAkB,CAAC,CAAC;QAEnE,MAAM,gBAAgB,CAAC,UAAU,CAAC,sBAAsB,CAAC,cAAc,CAAC,CAAC,CAAC;QAC1E,oBAAoB,CAAC,IAAI,CAAC,yBAAyB,EAAE,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,yBAAyB,CAAC,CAAC,CAAC,CAAC;QACtI,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,EAAE,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;QACvH,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,EAAE,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;QAC7H,iBAAiB,GAAG,oBAAoB,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC;QAC5E,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,iBAAiB,CAAC,CAAC;QAClE,gBAAgB,CAAC,2BAA2B,CAAC,oBAAoB,CAAC,CAAC;QAEnE,uBAAuB,GAAG,gBAAgB,CAAC;QAC3C,UAAU,GAAG,gBAAgB,CAAC;IAC/B,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,kDAAkD,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC3H,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,sEAAsE,CAAC,CAAC,CAAC;QACjL,MAAM,iBAAiB,CAAC,KAAK,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,mDAAmD,EAAE,gBAAgB,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAEvM,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,mDAAmD,CAAC,EAAE,WAAW,CAAC,CAAC;IAC3G,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,wEAAwE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACjJ,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,sEAAsE,CAAC,CAAC,CAAC;QACjL,MAAM,iBAAiB,CAAC,KAAK,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,mDAAmD,EAAE,gBAAgB,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAEvM,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,mDAAmD,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;IAChL,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,8CAA8C,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACvH,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,+DAA+D,CAAC,CAAC,CAAC;QAC1K,MAAM,iBAAiB,CAAC,KAAK,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,+CAA+C,EAAE,gBAAgB,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAEnM,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,WAAW,CAAC,CAAC;IACpG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,oEAAoE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC7I,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,+DAA+D,CAAC,CAAC,CAAC;QAC1K,MAAM,iBAAiB,CAAC,KAAK,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,+CAA+C,EAAE,gBAAgB,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAEnM,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;IACzK,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,6EAA6E,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACtJ,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,8DAA8D,CAAC,CAAC,CAAC;QACzK,MAAM,iBAAiB,CAAC,KAAK,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,2CAA2C,EAAE,gBAAgB,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAE/L,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,2CAA2C,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAEvG,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,2CAA2C,EAAE;oBAC5C,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,wCAAgC;iBACrC;aACD;SACD,CAAC,CAAC;QAEH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,2CAA2C,CAAC,EAAE,WAAW,CAAC,CAAC;QAElG,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,2CAA2C,CAAC,EAAE,WAAW,CAAC,CAAC;IACnG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,6GAA6G,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACtL,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,gEAAgE,CAAC,CAAC,CAAC;QAC3K,MAAM,iBAAiB,CAAC,KAAK,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,6CAA6C,EAAE,gBAAgB,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAEjM,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6CAA6C,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAE9K,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,6CAA6C,EAAE;oBAC9C,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,wCAAgC;iBACrC;aACD;SACD,CAAC,CAAC;QAEH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6CAA6C,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;QAEzK,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6CAA6C,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;IAC1K,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,2GAA2G,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACpL,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,gFAAgF,CAAC,CAAC,CAAC;QAC3L,MAAM,iBAAiB,CAAC,KAAK,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,6DAA6D,EAAE,gBAAgB,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAEjN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6DAA6D,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAEzH,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,6DAA6D,EAAE;oBAC9D,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,gDAAwC;iBAC7C;aACD;SACD,CAAC,CAAC;QAEH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6DAA6D,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAEzH,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,6DAA6D,CAAC,EAAE,gBAAgB,CAAC,CAAC;IAE1H,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,yDAAyD,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAClI,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,sEAAsE,CAAC,CAAC,CAAC;QACjL,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,uBAAuB,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,iFAAiF,CAAC,CAAC,CAAC;QAE3N,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,mDAAmD,CAAC,EAAE,WAAW,CAAC,CAAC;IAC3G,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,yFAAyF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAClK,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,sEAAsE,CAAC,CAAC,CAAC;QACjL,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,uBAAuB,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,iFAAiF,CAAC,CAAC,CAAC;QAE3N,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,mDAAmD,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;IAChL,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,qDAAqD,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC9H,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,kEAAkE,CAAC,CAAC,CAAC;QAC7K,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,uBAAuB,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,6EAA6E,CAAC,CAAC,CAAC;QAEvN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,+CAA+C,CAAC,EAAE,WAAW,CAAC,CAAC;IACvG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,qFAAqF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC9J,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,kEAAkE,CAAC,CAAC,CAAC;QAC7K,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,uBAAuB,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,6EAA6E,CAAC,CAAC,CAAC;QAEvN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,+CAA+C,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;IAC5K,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,uFAAuF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAChK,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,6EAA6E,CAAC,CAAC,CAAC;QACxL,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,uBAAuB,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,wFAAwF,CAAC,CAAC,CAAC;QAElO,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,0DAA0D,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,sBAAsB,CAAC,CAAC;QAEjM,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,0DAA0D,EAAE;oBAC3D,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,wCAAgC;iBACrC;aACD;SACD,CAAC,CAAC;QAEH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,0DAA0D,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;QAEtL,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,0DAA0D,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;IACvL,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,mFAAmF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC5J,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,yEAAyE,CAAC,CAAC,CAAC;QACpL,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,uBAAuB,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,oFAAoF,CAAC,CAAC,CAAC;QAC9N,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,sDAAsD,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,sBAAsB,CAAC,CAAC;QAE7L,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,sDAAsD,EAAE;oBACvD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,oCAA4B;iBACjC;aACD;SACD,CAAC,CAAC;QAEH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,sDAAsD,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;QAElL,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,sDAAsD,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;IACnL,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,iEAAiE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC1I,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,uBAAuB,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,sFAAsF,CAAC,CAAC,CAAC;QAChO,MAAM,iBAAiB,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,wDAAwD,EAAE,gBAAgB,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC9M,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,wDAAwD,EAAE;oBACzD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,qCAA6B;iBAClC;aACD;SACD,CAAC,CAAC;QACH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,wDAAwD,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,sBAAsB,CAAC,CAAC;IAChM,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,0EAA0E,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACnJ,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,uBAAuB,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,8FAA8F,CAAC,CAAC,CAAC;QACxO,MAAM,iBAAiB,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,gEAAgE,EAAE,gBAAgB,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACtN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,gEAAgE,EAAE;oBACjE,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,iDAAyC;iBAC9C;aACD;SACD,CAAC,CAAC;QACH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,gEAAgE,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,sBAAsB,CAAC,CAAC;IACxM,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,4EAA4E,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACrJ,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,uBAAuB,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,gGAAgG,CAAC,CAAC,CAAC;QAC1O,MAAM,iBAAiB,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,kEAAkE,EAAE,gBAAgB,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACxN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,kEAAkE,EAAE;oBACnE,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,gDAAwC;iBAC7C;aACD;SACD,CAAC,CAAC;QACH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,kEAAkE,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,sBAAsB,CAAC,CAAC;IAC1M,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,SAAS,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAClF,IAAI,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,SAAS,CAAC,CAAC;QACnD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;QAE5C,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,oDAAoD,CAAC,CAAC;QAClF,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QAE1C,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,uEAAuE,CAAC,CAAC,CAAC;QAClL,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,oDAAoD,CAAC,CAAC;QAClF,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;QAE9C,MAAM,iBAAiB,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,oDAAoD,EAAE,gBAAgB,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC1M,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,oDAAoD,CAAC,CAAC;QAClF,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,gBAAgB,CAAC,CAAC;QAC5D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,gBAAgB,CAAC,CAAC;QAEnD,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,uBAAuB,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,kFAAkF,CAAC,CAAC,CAAC;QAC5N,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,oDAAoD,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QACvJ,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,gBAAgB,CAAC,CAAC;QAC5D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,sBAAsB,CAAC,CAAC;QACxE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,sBAAsB,CAAC,CAAC;IAC1D,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,6BAA6B,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACtG,UAAU,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QACvC,MAAM,iBAAiB,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,uDAAuD,EAAE,0BAA0B,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACvN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,IAAI,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,uDAAuD,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC9J,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,0BAA0B,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QAE1C,UAAU,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;QACtC,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,uDAAuD,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC1J,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,0BAA0B,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,0BAA0B,CAAC,CAAC;QAE7D,UAAU,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QACvC,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,uBAAuB,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,+FAA+F,CAAC,CAAC,CAAC;QACzO,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,uDAAuD,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC1J,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,0BAA0B,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,gCAAgC,CAAC,CAAC;QAClF,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QAE1C,UAAU,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;QACtC,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,uDAAuD,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC1J,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,0BAA0B,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,gCAAgC,CAAC,CAAC;QAClF,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,gCAAgC,CAAC,CAAC;IACpE,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,0CAA0C,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACnH,UAAU,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QACvC,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,oFAAoF,CAAC,CAAC,CAAC;QAC/L,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,IAAI,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;QACnE,MAAM,iBAAiB,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,uDAAuD,EAAE,0BAA0B,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACvN,IAAI,KAAK,GAAG,MAAM,OAAO,CAAC;QAE1B,IAAI,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,uDAAuD,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC9J,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,qBAAqB,CAAC,CAAC;QAC5D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,0BAA0B,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAC3D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,qBAAqB,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,oBAAoB,CAAC,uDAAuD,CAAC,EAAE,IAAI,CAAC,CAAC;QAE9G,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,wBAAwB,CAAC,CAAC;QAC/D,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,uBAAuB,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,+FAA+F,CAAC,CAAC,CAAC;QACzO,KAAK,GAAG,MAAM,OAAO,CAAC;QAEtB,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,uDAAuD,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC1J,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QACjD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAClD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,qBAAqB,CAAC,CAAC;QAC5D,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,0BAA0B,CAAC,CAAC;QACtE,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,gCAAgC,CAAC,CAAC;QAClF,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,qBAAqB,CAAC,CAAC;QACxD,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,oBAAoB,CAAC,uDAAuD,CAAC,EAAE,IAAI,CAAC,CAAC;IAC/G,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,0BAA0B,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACnG,MAAM,2BAA2B,GAAG;YACnC,SAAS,EAAE,OAAO;YAClB,gBAAgB,EAAE;gBACjB;oBACC,MAAM,EAAE,MAAM;oBACd,SAAS,EAAE,QAAQ;oBACnB,MAAM,EAAE,YAAY;oBACpB,SAAS,EAAE,kDAAkD;oBAC7D,aAAa,EAAE,IAAI;oBACnB,MAAM,EAAE;wBACP,6BAA6B;qBAC7B;oBACD,KAAK,EAAE,oBAAoB;iBAC3B;aACD;SACD,CAAC;QACF,MAAM,iBAAiB,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,2BAA2B,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACzJ,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,MAAM,GAAG,UAAU,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAC7C,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,2BAA2B,CAAC,CAAC;IAC7D,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,8BAA8B,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACvG,MAAM,2BAA2B,GAAG;YACnC,SAAS,EAAE,OAAO;YAClB,gBAAgB,EAAE;gBACjB;oBACC,MAAM,EAAE,MAAM;oBACd,SAAS,EAAE,QAAQ;oBACnB,MAAM,EAAE,YAAY;oBACpB,SAAS,EAAE,kDAAkD;oBAC7D,aAAa,EAAE,IAAI;oBACnB,MAAM,EAAE;wBACP,6BAA6B;qBAC7B;oBACD,KAAK,EAAE,oBAAoB;iBAC3B;aACD;SACD,CAAC;QACF,MAAM,iBAAiB,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,2BAA2B,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACzJ,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC;QAC3D,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,2BAA2B,CAAC,CAAC;IAC7D,CAAC,CAAC,CAAC,CAAC;IAGJ,IAAI,CAAC,yBAAyB,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAClG,MAAM,0BAA0B,GAAG;YAClC,SAAS,EAAE,OAAO;YAClB,OAAO,EAAE;gBACR;oBACC,OAAO,EAAE,SAAS;oBAClB,MAAM,EAAE,OAAO;oBACf,SAAS,EAAE,mBAAmB;oBAC9B,SAAS,EAAE;wBACV,SAAS,EAAE,sBAAsB;qBACjC;oBACD,gBAAgB,EAAE,EAAE;iBACpB;aACD;SACD,CAAC;QACF,MAAM,iBAAiB,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,0BAA0B,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACvJ,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,MAAM,GAAG,UAAU,CAAC,QAAQ,2CAA6B,CAAC;QAChE,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,0BAA0B,CAAC,CAAC;IAC5D,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,6BAA6B,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACtG,MAAM,0BAA0B,GAAG;YAClC,SAAS,EAAE,OAAO;YAClB,OAAO,EAAE;gBACR;oBACC,OAAO,EAAE,SAAS;oBAClB,MAAM,EAAE,OAAO;oBACf,SAAS,EAAE,mBAAmB;oBAC9B,SAAS,EAAE;wBACV,SAAS,EAAE,sBAAsB;qBACjC;oBACD,gBAAgB,EAAE,EAAE;iBACpB;aACD;SACD,CAAC;QACF,MAAM,iBAAiB,CAAC,KAAK,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,0BAA0B,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACrJ,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC;QAC1D,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,0BAA0B,CAAC,CAAC;IAC5D,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,2BAA2B,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACpG,MAAM,UAAU,CAAC,WAAW,CAAC,4CAA4C,EAAE,WAAW,mCAA2B,CAAC;QAClH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,WAAW,CAAC,CAAC;IACpG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,iFAAiF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC1J,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,MAAM,UAAU,CAAC,WAAW,CAAC,4CAA4C,EAAE,WAAW,mCAA2B,CAAC;QAClH,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAC1B,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,gCAAgC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACzG,MAAM,UAAU,CAAC,WAAW,CAAC,4CAA4C,EAAE,gBAAgB,wCAAgC,CAAC;QAC5H,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,gBAAgB,CAAC,CAAC;IACzG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,sFAAsF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC/J,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,MAAM,UAAU,CAAC,WAAW,CAAC,4CAA4C,EAAE,gBAAgB,wCAAgC,CAAC;QAC5H,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAC1B,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,yFAAyF,EAAE,GAAG,EAAE;QACpG,OAAO,UAAU,CAAC,WAAW,CAAC,mDAAmD,EAAE,gBAAgB,EAAE,EAAE,yCAAiC,EAAE,gBAAgB,EAAE,IAAI,EAAE,CAAC;aACjK,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,yBAAyB,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,0FAAkF,CAAC,CAAC;IAC1K,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,qFAAqF,EAAE,GAAG,EAAE;QAChG,OAAO,UAAU,CAAC,WAAW,CAAC,+CAA+C,EAAE,gBAAgB,EAAE,EAAE,yCAAiC,EAAE,gBAAgB,EAAE,IAAI,EAAE,CAAC;aAC7J,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,yBAAyB,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,sFAA8E,CAAC,CAAC;IACtK,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,uCAAuC,EAAE,GAAG,EAAE;QAClD,MAAM,SAAS,GAAG,uBAAuB,CAAC,YAAY,EAAE,CAAC;QACzD,OAAO,UAAU,CAAC,WAAW,CAAC,oDAAoD,EAAE,sBAAsB,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,+CAAuC;aACvL,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,oDAAoD,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,sBAAsB,CAAC,CAAC,CAAC;IAC7K,CAAC,CAAC,CAAC;IAEH,IAAI,CAAC,4DAA4D,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACrI,MAAM,SAAS,GAAG,uBAAuB,CAAC,YAAY,EAAE,CAAC;QACzD,MAAM,UAAU,CAAC,WAAW,CAAC,oDAAoD,EAAE,sBAAsB,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,+CAAuC,CAAC;QACzL,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,oDAAoD,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,sBAAsB,CAAC,CAAC;IAC/J,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,6FAA6F,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACtK,MAAM,SAAS,GAAG,uBAAuB,CAAC,YAAY,EAAE,CAAC;QACzD,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,MAAM,UAAU,CAAC,WAAW,CAAC,oDAAoD,EAAE,sBAAsB,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,+CAAuC,CAAC;QACzL,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAC1B,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,yGAAyG,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAClL,MAAM,SAAS,GAAG,uBAAuB,CAAC,YAAY,EAAE,CAAC;QACzD,MAAM,UAAU,CAAC,WAAW,CAAC,oDAAoD,EAAE,sBAAsB,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,+CAAuC,CAAC;QACzL,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,MAAM,UAAU,CAAC,WAAW,CAAC,oDAAoD,EAAE,uBAAuB,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,+CAAuC,CAAC;QAC1L,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAC1B,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,8CAA8C,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACvH,MAAM,SAAS,GAAG,uBAAuB,CAAC,YAAY,EAAE,CAAC;QACzD,MAAM,UAAU,CAAC,WAAW,CAAC,0DAA0D,EAAE,sBAAsB,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,+CAAuC,CAAC;QAC/L,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,0DAA0D,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,sBAAsB,CAAC,CAAC;IACrK,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,6BAA6B,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACtG,MAAM,UAAU,CAAC,WAAW,CAAC,4CAA4C,EAAE,aAAa,qCAA6B,CAAC;QACtH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,aAAa,CAAC,CAAC;IACtG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,mFAAmF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC5J,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;QAC3B,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC7D,MAAM,UAAU,CAAC,WAAW,CAAC,4CAA4C,EAAE,aAAa,qCAA6B,CAAC;QACtH,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAC1B,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,iCAAiC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC1G,MAAM,SAAS,GAAG,uBAAuB,CAAC,YAAY,EAAE,CAAC;QACzD,MAAM,GAAG,GAAG,oDAAoD,CAAC;QACjE,MAAM,UAAU,CAAC,WAAW,CAAC,GAAG,EAAE,sBAAsB,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,+CAAuC,CAAC;QACxI,MAAM,UAAU,CAAC,WAAW,CAAC,GAAG,EAAE,gBAAgB,wCAAgC,CAAC;QACnF,MAAM,UAAU,CAAC,WAAW,CAAC,GAAG,EAAE,WAAW,mCAA2B,CAAC;QAEzE,MAAM,UAAU,CAAC,WAAW,CAAC,GAAG,EAAE,SAAS,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QACrF,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC/E,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;IAC5D,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,wCAAwC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACjH,MAAM,SAAS,GAAG,uBAAuB,CAAC,YAAY,EAAE,CAAC;QACzD,MAAM,UAAU,CAAC,WAAW,CAAC,OAAO,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,+CAAuC,CAAC;QAC/K,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,QAAQ,4CAA8B,EAAE,QAAQ,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC;IAC7K,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,4CAA4C,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACrH,MAAM,SAAS,GAAG,uBAAuB,CAAC,YAAY,EAAE,CAAC;QACzD,MAAM,UAAU,CAAC,WAAW,CAAC,QAAQ,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,cAAc,EAAE,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,yCAAiC,EAAE,gBAAgB,EAAE,IAAI,EAAE,CAAC,CAAC;QAC5M,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,cAAc,EAAE,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,CAAC,EAAE,CAAC,CAAC;IACzH,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,2CAA2C,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACpH,MAAM,SAAS,GAAG,uBAAuB,CAAC,YAAY,EAAE,CAAC;QACzD,MAAM,KAAK,GAAG,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC;QACrE,MAAM,UAAU,CAAC,WAAW,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,yCAAiC,EAAE,gBAAgB,EAAE,IAAI,EAAE,CAAC,CAAC;QAChJ,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,QAAQ,2CAA6B,EAAE,KAAK,CAAC,CAAC;IACjF,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,gFAAgF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACzJ,MAAM,gBAAgB,GAAqB,UAAU,CAAC;QACtD,MAAM,GAAG,GAAG,gBAAgB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;QAC3D,MAAM,gBAAgB,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAC5C,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,kFAAkF,CAAC,CAAC,CAAC;QAEhL,OAAO,IAAI,OAAO,CAAO,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;YACjC,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,GAAG,EAAE;gBACxD,IAAI,CAAC;oBACJ,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,oDAAoD,EAAE,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,EAAE,sBAAsB,CAAC,CAAC;oBACzI,CAAC,EAAE,CAAC;gBACL,CAAC;gBAAC,OAAO,KAAK,EAAE,CAAC;oBAChB,CAAC,CAAC,KAAK,CAAC,CAAC;gBACV,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;YACJ,gBAAgB,CAAC,UAAU,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;QACxC,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,6EAA6E,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACtJ,UAAU,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;QAEtC,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,gJAAgJ,CAAC,CAAC,CAAC;QAC3P,MAAM,iBAAiB,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,uDAAuD,EAAE,gBAAgB,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC7M,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,sFAAsF,CAAC,CAAC,CAAC;QACzN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,uDAAuD,EAAE,EAAE,QAAQ,EAAE,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,gBAAgB,CAAC,CAAC;QAC3K,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,uDAAuD,EAAE,EAAE,QAAQ,EAAE,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,uBAAuB,CAAC,CAAC;QAClL,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,kBAAkB,CAAC,OAAO,CAAC,QAAQ,CAAC,uDAAuD,CAAC,CAAC,CAAC;QACnH,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,kBAAkB,CAAC,OAAO,CAAC,QAAQ,CAAC,uDAAuD,CAAC,CAAC,CAAC;QACnH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;QACxE,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC,uDAAuD,CAAC,CAAC,CAAC;QAC3H,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QAC3E,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,eAAe,EAAE,GAAG,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,SAAS,CAAC,CAAC;QAC5H,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,kBAAkB,CAAC,eAAe,EAAE,GAAG,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,uDAAuD,CAAC,CAAC,CAAC;IACjL,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,6EAA6E,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACtJ,UAAU,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QAEvC,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,gJAAgJ,CAAC,CAAC,CAAC;QAC3P,MAAM,iBAAiB,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,uDAAuD,EAAE,gBAAgB,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QAC7M,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,sFAAsF,CAAC,CAAC,CAAC;QACzN,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QAEvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,uDAAuD,EAAE,EAAE,QAAQ,EAAE,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;QACtK,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,uDAAuD,EAAE,EAAE,QAAQ,EAAE,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC;QACtK,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,kBAAkB,CAAC,OAAO,CAAC,QAAQ,CAAC,uDAAuD,CAAC,CAAC,CAAC;QACnH,MAAM,CAAC,EAAE,CAAC,UAAU,CAAC,kBAAkB,CAAC,OAAO,CAAC,QAAQ,CAAC,uDAAuD,CAAC,CAAC,CAAC;QACnH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QACvE,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;QACxE,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC,uDAAuD,CAAC,CAAC,CAAC;QAC3H,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QAC3E,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,kBAAkB,CAAC,eAAe,EAAE,GAAG,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,SAAS,CAAC,CAAC;QAC5H,MAAM,CAAC,eAAe,CAAC,UAAU,CAAC,kBAAkB,CAAC,eAAe,EAAE,GAAG,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,uDAAuD,CAAC,CAAC,CAAC;IACjL,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,gCAAgC,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACzG,MAAM,GAAG,GAAG,+CAA+C,CAAC;QAC5D,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,kEAAkE,CAAC,CAAC,CAAC;QAC7K,MAAM,iBAAiB,CAAC,KAAK,CAAC,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,aAAc,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,+CAA+C,EAAE,gBAAgB,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;QACrM,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,8EAA8E,CAAC,CAAC,CAAC;QAC9N,MAAM,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,eAAe,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,8EAA8E,CAAC,CAAC,CAAC;QAE9N,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,UAAU,CAAC,WAAW,CAAC,GAAG,EAAE,SAAS,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAElH,IAAI,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC1G,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;QAE3D,MAAM,UAAU,CAAC,WAAW,CAAC,GAAG,EAAE,SAAS,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAClH,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,uBAAuB,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QACtG,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC;QAChD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,cAAc,EAAE,SAAS,CAAC,CAAC;QACrD,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,EAAE,SAAS,CAAC,CAAC;IAC5D,CAAC,CAAC,CAAC,CAAC;AAEL,CAAC,CAAC,CAAC;AAEH,KAAK,CAAC,+CAA+C,EAAE,GAAG,EAAE;IAE3D,IAAI,UAA4B,EAAE,MAAW,EAC5C,uBAA4B,EAAE,sBAA2B,EAAE,kBAA8C,EAAE,wBAAoC,EAC/I,oBAA8C,EAAE,WAAyB,EAAE,kBAAsD,EAAE,sBAA+C,CAAC;IACpL,MAAM,eAAe,GAAG,qBAAqB,CAAC;IAC9C,MAAM,qBAAqB,GAAG,QAAQ,CAAC,EAAE,CAAyB,uBAAuB,CAAC,aAAa,CAAC,CAAC;IACzG,MAAM,WAAW,GAAG,uCAAuC,EAAE,CAAC;IAE9D,UAAU,CAAC,GAAG,EAAE;QACf,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,gDAAgD,EAAE;oBACjD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,wCAAgC;iBACrC;gBACD,4CAA4C,EAAE;oBAC7C,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,oCAA4B;iBACjC;gBACD,uDAAuD,EAAE;oBACxD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,gDAAwC;iBAC7C;gBACD,uDAAuD,EAAE;oBACxD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,gDAAwC;iBAC7C;gBACD,yCAAyC,EAAE;oBAC1C,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,qCAA6B;iBAClC;aACD;SACD,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,KAAK,CAAC,KAAK,IAAI,EAAE;QAChB,MAAM,UAAU,GAAG,IAAI,cAAc,EAAE,CAAC;QACxC,WAAW,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC;QAC3D,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,0BAA0B,EAAE,CAAC,CAAC;QACvE,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,CAAC,CAAC,CAAC;QAE/E,MAAM,eAAe,GAAG,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAC/C,MAAM,GAAG,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;QAC7B,MAAM,WAAW,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QACvC,MAAM,WAAW,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;QAChD,uBAAuB,GAAG,QAAQ,CAAC,IAAI,EAAE,uBAAuB,CAAC,CAAC;QAClE,sBAAsB,GAAG,uBAAuB,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,OAAO,CAAC,YAAY,EAAE,SAAS,EAAE,eAAe,EAAE,CAAC,CAAC;QAEpH,oBAAoB,GAAG,6BAA6B,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QAC7E,kBAAkB,GAAG,sBAAsB,CAAC;QAC5C,MAAM,wBAAwB,GAAG,IAAI,OAAO,CAAmC,CAAC,CAAC,EAAE,CAAC,wBAAwB,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,YAAY,EAAE,sBAAsB,EAAE,CAAC,CAAC,CAAC;QAClK,MAAM,kBAAkB,GAAG,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAgC,EAAE,cAAc,EAAE,GAAG,EAAE,CAAC,wBAAwB,EAAE,CAAC,CAAC;QAC5J,MAAM,kBAAkB,GAAwB,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,YAAY,EAAE,GAAG,EAAE,CAAC,KAAK,EAAE,CAAC;QAChL,MAAM,kBAAkB,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,kBAAkB,CAAC,WAAW,CAAC,CAAC,CAAC;QAChF,MAAM,uBAAuB,GAAG,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,uBAAuB,CAAC,kBAAkB,EAAE,WAAW,EAAE,kBAAkB,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;QACnM,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,OAAO,CAAC,cAAc,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,oBAAoB,CAAC,IAAI,CAAC,MAAM,EAAE,kBAAkB,EAAE,OAAO,CAAC,cAAc,EAAE,uBAAuB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7O,sBAAsB,GAAG,oBAAoB,CAAC,IAAI,CAAC,uBAAuB,EAAE,WAAW,CAAC,GAAG,CAAC,IAAI,sBAAsB,CAAC,uBAAuB,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;QACjK,UAAU,GAAG,WAAW,CAAC,GAAG,CAAC,IAAI,gBAAgB,CAAC,EAAE,kBAAkB,EAAE,eAAe,EAAE,EAAE,kBAAkB,EAAE,sBAAsB,EAAE,uBAAuB,EAAE,WAAW,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,IAAI,cAAc,EAAE,EAAE,IAAI,iBAAiB,EAAE,CAAC,CAAC,CAAC;QACrQ,oBAAoB,CAAC,IAAI,CAAC,wBAAwB,EAAE,UAAU,CAAC,CAAC;QAChE,oBAAoB,CAAC,IAAI,CAAC,qBAAqB,EAAE,UAAU,CAAC,CAAC;QAC7D,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,kBAAkB,CAAC,CAAC;QACnE,oBAAoB,CAAC,IAAI,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;IACtD,CAAC,CAAC,CAAC;IAEH,KAAK,UAAU,UAAU;QACxB,MAAM,UAAU,CAAC,UAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC,CAAC;QAC/D,oBAAoB,CAAC,IAAI,CAAC,gBAAgB,EAAE,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;QACvH,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,EAAqB,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,cAAc,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;QAChJ,oBAAoB,CAAC,IAAI,CAAC,mBAAmB,EAAE,oBAAoB,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC,CAAC;QACxG,UAAU,CAAC,2BAA2B,CAAC,oBAAoB,CAAC,CAAC;IAC9D,CAAC;IAED,SAAS,gCAAgC;QACxC,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,gBAAgB,CAAC,OAAO,CAAC,YAAY,EAAE,IAAI,wBAAwB,CAAC,kBAAkB,EAAE,eAAe,CAAC,CAAC,CAAC,CAAC;IACnK,CAAC;IAED,SAAS,4CAA4C;QACpD,MAAM,UAAU,GAAG,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,gCAAgC,CAAC,CAAC,CAAC,EAAE;YAC9G,IAAI,CAAC,CAAC,MAAM,KAAK,OAAO,CAAC,YAAY,EAAE,CAAC;gBACvC,UAAU,CAAC,OAAO,EAAE,CAAC;gBACrB,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,gCAAgC,EAAE,CAAC,CAAC,CAAC;YAC1E,CAAC;QACF,CAAC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,IAAI,CAAC,0CAA0C,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACnH,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,EAAE,QAAQ,CAAC,UAAU,CAAC,iEAAiE,CAAC,CAAC,CAAC;QAC7I,gCAAgC,EAAE,CAAC;QACnC,wBAAwB,EAAE,CAAC;QAC3B,MAAM,UAAU,EAAE,CAAC;QACnB,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,aAAa,CAAC,CAAC;IACtG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,4FAA4F,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACrK,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,EAAE,QAAQ,CAAC,UAAU,CAAC,iEAAiE,CAAC,CAAC,CAAC;QAC7I,wBAAwB,EAAE,CAAC;QAC3B,4CAA4C,EAAE,CAAC;QAC/C,MAAM,UAAU,EAAE,CAAC;QACnB,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,aAAa,CAAC,CAAC;IACtG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,+EAA+E,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACxJ,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,EAAE,QAAQ,CAAC,UAAU,CAAC,iEAAiE,CAAC,CAAC,CAAC;QAC7I,gCAAgC,EAAE,CAAC;QACnC,MAAM,UAAU,EAAE,CAAC;QACnB,MAAM,OAAO,GAAG,IAAI,OAAO,CAAO,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;YAC1C,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,KAAK,CAAC,EAAE;gBAC3D,IAAI,CAAC;oBACJ,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,mCAA2B,CAAC;oBAC3D,MAAM,CAAC,eAAe,CAAC,CAAC,GAAG,KAAK,CAAC,YAAY,CAAC,EAAE,CAAC,4CAA4C,CAAC,CAAC,CAAC;oBAChG,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,aAAa,CAAC,CAAC;oBACrG,CAAC,EAAE,CAAC;gBACL,CAAC;gBAAC,OAAO,KAAK,EAAE,CAAC;oBAChB,CAAC,CAAC,KAAK,CAAC,CAAC;gBACV,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,wBAAwB,EAAE,CAAC;QAC3B,OAAO,OAAO,CAAC;IAChB,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,uHAAuH,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAChM,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,EAAE,QAAQ,CAAC,UAAU,CAAC,iEAAiE,CAAC,CAAC,CAAC;QAC7I,4CAA4C,EAAE,CAAC;QAC/C,MAAM,UAAU,EAAE,CAAC;QACnB,MAAM,OAAO,GAAG,IAAI,OAAO,CAAO,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;YAC1C,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,KAAK,CAAC,EAAE;gBAC3D,IAAI,CAAC;oBACJ,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,mCAA2B,CAAC;oBAC3D,MAAM,CAAC,eAAe,CAAC,CAAC,GAAG,KAAK,CAAC,YAAY,CAAC,EAAE,CAAC,4CAA4C,CAAC,CAAC,CAAC;oBAChG,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,aAAa,CAAC,CAAC;oBACrG,CAAC,EAAE,CAAC;gBACL,CAAC;gBAAC,OAAO,KAAK,EAAE,CAAC;oBAChB,CAAC,CAAC,KAAK,CAAC,CAAC;gBACV,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,wBAAwB,EAAE,CAAC;QAC3B,OAAO,OAAO,CAAC;IAChB,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,oEAAoE,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC7I,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,iEAAiE,CAAC,CAAC,CAAC;QAC5K,gCAAgC,EAAE,CAAC;QACnC,wBAAwB,EAAE,CAAC;QAC3B,MAAM,UAAU,EAAE,CAAC;QACnB,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,OAAO,CAAC,CAAC;IAChG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,sDAAsD,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC/H,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,EAAE,QAAQ,CAAC,UAAU,CAAC,4EAA4E,CAAC,CAAC,CAAC;QACxJ,gCAAgC,EAAE,CAAC;QACnC,wBAAwB,EAAE,CAAC;QAC3B,MAAM,UAAU,EAAE,CAAC;QACnB,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,uDAAuD,CAAC,EAAE,aAAa,CAAC,CAAC;IACjH,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,wGAAwG,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACjL,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,EAAE,QAAQ,CAAC,UAAU,CAAC,4EAA4E,CAAC,CAAC,CAAC;QACxJ,wBAAwB,EAAE,CAAC;QAC3B,4CAA4C,EAAE,CAAC;QAC/C,MAAM,UAAU,EAAE,CAAC;QACnB,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,uDAAuD,CAAC,EAAE,aAAa,CAAC,CAAC;IACjH,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,2FAA2F,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACpK,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,EAAE,QAAQ,CAAC,UAAU,CAAC,4EAA4E,CAAC,CAAC,CAAC;QACxJ,gCAAgC,EAAE,CAAC;QACnC,MAAM,UAAU,EAAE,CAAC;QACnB,MAAM,OAAO,GAAG,IAAI,OAAO,CAAO,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;YAC1C,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,KAAK,CAAC,EAAE;gBAC3D,IAAI,CAAC;oBACJ,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,mCAA2B,CAAC;oBAC3D,MAAM,CAAC,eAAe,CAAC,CAAC,GAAG,KAAK,CAAC,YAAY,CAAC,EAAE,CAAC,uDAAuD,CAAC,CAAC,CAAC;oBAC3G,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,uDAAuD,CAAC,EAAE,aAAa,CAAC,CAAC;oBAChH,CAAC,EAAE,CAAC;gBACL,CAAC;gBAAC,OAAO,KAAK,EAAE,CAAC;oBAChB,CAAC,CAAC,KAAK,CAAC,CAAC;gBACV,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,wBAAwB,EAAE,CAAC;QAC3B,OAAO,OAAO,CAAC;IAChB,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,2IAA2I,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACpN,MAAM,WAAW,CAAC,SAAS,CAAC,uBAAuB,EAAE,QAAQ,CAAC,UAAU,CAAC,4EAA4E,CAAC,CAAC,CAAC;QACxJ,4CAA4C,EAAE,CAAC;QAC/C,MAAM,UAAU,EAAE,CAAC;QACnB,MAAM,OAAO,GAAG,IAAI,OAAO,CAAO,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;YAC1C,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,wBAAwB,CAAC,KAAK,CAAC,EAAE;gBAC3D,IAAI,CAAC;oBACJ,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,mCAA2B,CAAC;oBAC3D,MAAM,CAAC,eAAe,CAAC,CAAC,GAAG,KAAK,CAAC,YAAY,CAAC,EAAE,CAAC,uDAAuD,CAAC,CAAC,CAAC;oBAC3G,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,uDAAuD,CAAC,EAAE,aAAa,CAAC,CAAC;oBAChH,CAAC,EAAE,CAAC;gBACL,CAAC;gBAAC,OAAO,KAAK,EAAE,CAAC;oBAChB,CAAC,CAAC,KAAK,CAAC,CAAC;gBACV,CAAC;YACF,CAAC,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,wBAAwB,EAAE,CAAC;QAC3B,OAAO,OAAO,CAAC;IAChB,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,gFAAgF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACzJ,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,4EAA4E,CAAC,CAAC,CAAC;QACvL,gCAAgC,EAAE,CAAC;QACnC,wBAAwB,EAAE,CAAC;QAC3B,MAAM,UAAU,EAAE,CAAC;QACnB,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,uDAAuD,CAAC,EAAE,OAAO,CAAC,CAAC;IAC3G,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,gFAAgF,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACzJ,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,4EAA4E,CAAC,CAAC,CAAC;QACvL,gCAAgC,EAAE,CAAC;QACnC,wBAAwB,EAAE,CAAC;QAC3B,MAAM,UAAU,EAAE,CAAC;QACnB,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,uDAAuD,CAAC,EAAE,OAAO,CAAC,CAAC;IAC3G,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,kDAAkD,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC3H,gCAAgC,EAAE,CAAC;QACnC,wBAAwB,EAAE,CAAC;QAC3B,MAAM,UAAU,EAAE,CAAC;QACnB,MAAM,UAAU,CAAC,WAAW,CAAC,gDAAgD,EAAE,kBAAkB,CAAC,CAAC;QACnG,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,OAAO,CAAC,gDAAgD,CAAC,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC;IAC7H,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,+CAA+C,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACxH,gCAAgC,EAAE,CAAC;QACnC,wBAAwB,EAAE,CAAC;QAC3B,MAAM,UAAU,EAAE,CAAC;QACnB,MAAM,UAAU,CAAC,WAAW,CAAC,4CAA4C,EAAE,cAAc,CAAC,CAAC;QAC3F,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,OAAO,CAAC,4CAA4C,CAAC,CAAC,eAAe,EAAE,cAAc,CAAC,CAAC;IACtH,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,2DAA2D,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACpI,gCAAgC,EAAE,CAAC;QACnC,wBAAwB,EAAE,CAAC;QAC3B,MAAM,UAAU,EAAE,CAAC;QACnB,MAAM,UAAU,CAAC,WAAW,CAAC,uDAAuD,EAAE,cAAc,CAAC,CAAC;QACtG,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,MAAM,GAAG,UAAU,CAAC,OAAO,CAAC,uDAAuD,CAAC,CAAC;QAC3F,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,EAAE,cAAc,CAAC,CAAC;IAC5D,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,2DAA2D,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACpI,gCAAgC,EAAE,CAAC;QACnC,wBAAwB,EAAE,CAAC;QAC3B,MAAM,UAAU,EAAE,CAAC;QACnB,MAAM,UAAU,CAAC,WAAW,CAAC,uDAAuD,EAAE,cAAc,CAAC,CAAC;QACtG,MAAM,UAAU,CAAC,mBAAmB,EAAE,CAAC;QACvC,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,OAAO,CAAC,uDAAuD,CAAC,CAAC,eAAe,EAAE,cAAc,CAAC,CAAC;IACjI,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,kGAAkG,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QAC3K,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,kEAAkE,CAAC,CAAC,CAAC;QAC7K,gCAAgC,EAAE,CAAC;QACnC,wBAAwB,EAAE,CAAC;QAC3B,MAAM,UAAU,EAAE,CAAC;QACnB,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,+CAA+C,EAAE;oBAChD,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,oCAA4B;iBACjC;aACD;SACD,CAAC,CAAC;QACH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,+CAA+C,CAAC,EAAE,OAAO,CAAC,CAAC;IACnG,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,+GAA+G,EAAE,GAAG,EAAE,CAAC,kBAAkB,CAAO,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,KAAK,IAAI,EAAE;QACxL,MAAM,WAAW,CAAC,SAAS,CAAC,sBAAsB,CAAC,cAAc,CAAC,gBAAgB,EAAE,QAAQ,CAAC,UAAU,CAAC,6EAA6E,CAAC,CAAC,CAAC;QACxL,gCAAgC,EAAE,CAAC;QACnC,wBAAwB,EAAE,CAAC;QAC3B,MAAM,UAAU,EAAE,CAAC;QACnB,qBAAqB,CAAC,qBAAqB,CAAC;YAC3C,IAAI,EAAE,OAAO;YACb,MAAM,EAAE,QAAQ;YAChB,YAAY,EAAE;gBACb,0DAA0D,EAAE;oBAC3D,MAAM,EAAE,QAAQ;oBAChB,SAAS,EAAE,OAAO;oBAClB,KAAK,gDAAwC;iBAC7C;aACD;SACD,CAAC,CAAC;QACH,MAAM,CAAC,WAAW,CAAC,UAAU,CAAC,QAAQ,CAAC,0DAA0D,CAAC,EAAE,OAAO,CAAC,CAAC;IAC9G,CAAC,CAAC,CAAC,CAAC;AAEL,CAAC,CAAC,CAAC;AAEH,SAAS,cAAc,CAAC,UAAe;IACtC,IAAI,mBAAmB,GAAG,UAAU,CAAC,QAAQ,EAAE,CAAC;IAChD,IAAI,CAAC,OAAO,EAAE,CAAC;QACd,mBAAmB,GAAG,mBAAmB,CAAC,WAAW,EAAE,CAAC,CAAC,oCAAoC;IAC9F,CAAC;IACD,OAAO,IAAI,CAAC,mBAAmB,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;AAC/C,CAAC;AAED,SAAS,sBAAsB,CAAC,UAAe;IAC9C,OAAO;QACN,UAAU;QACV,EAAE,EAAE,cAAc,CAAC,UAAU,CAAC;KAC9B,CAAC;AACH,CAAC","file":"configurationService.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as sinon from 'sinon';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { Registry } from '../../../../../platform/registry/common/platform.js';\nimport { IEnvironmentService } from '../../../../../platform/environment/common/environment.js';\nimport { IConfigurationRegistry, Extensions as ConfigurationExtensions, ConfigurationScope, keyFromOverrideIdentifiers } from '../../../../../platform/configuration/common/configurationRegistry.js';\nimport { WorkspaceService } from '../../browser/configurationService.js';\nimport { ConfigurationEditingErrorCode } from '../../common/configurationEditing.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IWorkspaceContextService, WorkbenchState, IWorkspaceFoldersChangeEvent, ISingleFolderWorkspaceIdentifier, IWorkspaceIdentifier } from '../../../../../platform/workspace/common/workspace.js';\nimport { ConfigurationTarget, IConfigurationService, IConfigurationChangeEvent } from '../../../../../platform/configuration/common/configuration.js';\nimport { workbenchInstantiationService, RemoteFileSystemProvider, TestEnvironmentService, TestTextFileService } from '../../../../test/browser/workbenchTestServices.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ITextFileService } from '../../../textfile/common/textfiles.js';\nimport { ITextModelService } from '../../../../../editor/common/services/resolverService.js';\nimport { TextModelResolverService } from '../../../textmodelResolver/common/textModelResolverService.js';\nimport { IJSONEditingService } from '../../common/jsonEditing.js';\nimport { JSONEditingService } from '../../common/jsonEditingService.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { joinPath, dirname, basename } from '../../../../../base/common/resources.js';\nimport { isLinux, isMacintosh } from '../../../../../base/common/platform.js';\nimport { IRemoteAgentService } from '../../../remote/common/remoteAgentService.js';\nimport { FileService } from '../../../../../platform/files/common/fileService.js';\nimport { NullLogService } from '../../../../../platform/log/common/log.js';\nimport { IRemoteAgentEnvironment } from '../../../../../platform/remote/common/remoteAgentEnvironment.js';\nimport { APPLY_ALL_PROFILES_SETTING, IConfigurationCache } from '../../common/configuration.js';\nimport { SignService } from '../../../../../platform/sign/browser/signService.js';\nimport { FileUserDataProvider } from '../../../../../platform/userData/common/fileUserDataProvider.js';\nimport { IKeybindingEditingService, KeybindingsEditingService } from '../../../keybinding/common/keybindingEditing.js';\nimport { IWorkbenchEnvironmentService } from '../../../environment/common/environmentService.js';\nimport { timeout } from '../../../../../base/common/async.js';\nimport { VSBuffer } from '../../../../../base/common/buffer.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { UriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentityService.js';\nimport { InMemoryFileSystemProvider } from '../../../../../platform/files/common/inMemoryFilesystemProvider.js';\nimport { BrowserWorkbenchEnvironmentService, IBrowserWorkbenchEnvironmentService } from '../../../environment/browser/environmentService.js';\nimport { RemoteAgentService } from '../../../remote/browser/remoteAgentService.js';\nimport { RemoteAuthorityResolverService } from '../../../../../platform/remote/browser/remoteAuthorityResolverService.js';\nimport { hash } from '../../../../../base/common/hash.js';\nimport { TestProductService } from '../../../../test/common/workbenchTestServices.js';\nimport { IUserDataProfilesService, toUserDataProfile, UserDataProfilesService } from '../../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { NullPolicyService } from '../../../../../platform/policy/common/policy.js';\nimport { FilePolicyService } from '../../../../../platform/policy/common/filePolicyService.js';\nimport { runWithFakedTimers } from '../../../../../base/test/common/timeTravelScheduler.js';\nimport { UserDataProfileService } from '../../../userDataProfile/common/userDataProfileService.js';\nimport { IUserDataProfileService } from '../../../userDataProfile/common/userDataProfile.js';\nimport { TasksSchemaProperties } from '../../../../contrib/tasks/common/tasks.js';\nimport { RemoteSocketFactoryService } from '../../../../../platform/remote/common/remoteSocketFactoryService.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { PolicyCategory } from '../../../../../base/common/policy.js';\n\nfunction convertToWorkspacePayload(folder: URI): ISingleFolderWorkspaceIdentifier {\n\treturn {\n\t\tid: hash(folder.toString()).toString(16),\n\t\turi: folder\n\t};\n}\n\nclass ConfigurationCache implements IConfigurationCache {\n\tneedsCaching(resource: URI): boolean { return false; }\n\tasync read(): Promise<string> { return ''; }\n\tasync write(): Promise<void> { }\n\tasync remove(): Promise<void> { }\n}\n\nconst ROOT = URI.file('tests').with({ scheme: 'vscode-tests' });\n\nsuite('WorkspaceContextService - Folder', () => {\n\n\tconst folderName = 'Folder A';\n\tlet folder: URI;\n\tlet testObject: WorkspaceService;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tconst fileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tfolder = joinPath(ROOT, folderName);\n\t\tawait fileService.createFolder(folder);\n\n\t\tconst environmentService = TestEnvironmentService;\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\tconst userDataProfileService = disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile));\n\t\ttestObject = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService,\n\t\t\tuserDataProfileService,\n\t\t\tuserDataProfilesService,\n\t\t\tfileService,\n\t\t\tdisposables.add(new RemoteAgentService(\n\t\t\t\tnew RemoteSocketFactoryService(),\n\t\t\t\tuserDataProfileService,\n\t\t\t\tenvironmentService,\n\t\t\t\tTestProductService,\n\t\t\t\tdisposables.add(new RemoteAuthorityResolverService(false, undefined, undefined, undefined, TestProductService, logService)),\n\t\t\t\tnew SignService(TestProductService), new NullLogService())),\n\t\t\turiIdentityService,\n\t\t\tnew NullLogService(),\n\t\t\tnew NullPolicyService()));\n\t\tawait (<WorkspaceService>testObject).initialize(convertToWorkspacePayload(folder));\n\t});\n\n\ttest('getWorkspace()', () => {\n\t\tconst actual = testObject.getWorkspace();\n\n\t\tassert.strictEqual(actual.folders.length, 1);\n\t\tassert.strictEqual(actual.folders[0].uri.path, folder.path);\n\t\tassert.strictEqual(actual.folders[0].name, folderName);\n\t\tassert.strictEqual(actual.folders[0].index, 0);\n\t\tassert.ok(!actual.configuration);\n\t});\n\n\ttest('getWorkbenchState()', () => {\n\t\tconst actual = testObject.getWorkbenchState();\n\n\t\tassert.strictEqual(actual, WorkbenchState.FOLDER);\n\t});\n\n\ttest('getWorkspaceFolder()', () => {\n\t\tconst actual = testObject.getWorkspaceFolder(joinPath(folder, 'a'));\n\n\t\tassert.strictEqual(actual, testObject.getWorkspace().folders[0]);\n\t});\n\n\ttest('getWorkspaceFolder() - queries in workspace folder', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\n\t\tconst logService = new NullLogService();\n\t\tconst fileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst folder = joinPath(ROOT, folderName).with({ query: 'myquery=1' });\n\t\tawait fileService.createFolder(folder);\n\n\t\tconst environmentService = TestEnvironmentService;\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\tconst userDataProfileService = disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile));\n\t\tconst testObject = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService,\n\t\t\tuserDataProfileService,\n\t\t\tuserDataProfilesService,\n\t\t\tfileService,\n\t\t\tdisposables.add(new RemoteAgentService(new RemoteSocketFactoryService(), userDataProfileService, environmentService, TestProductService, disposables.add(new RemoteAuthorityResolverService(false, undefined, undefined, undefined, TestProductService, logService)), new SignService(TestProductService), new NullLogService())),\n\t\t\turiIdentityService,\n\t\t\tnew NullLogService(),\n\t\t\tnew NullPolicyService()));\n\t\tawait (<WorkspaceService>testObject).initialize(convertToWorkspacePayload(folder));\n\n\t\tconst actual = testObject.getWorkspaceFolder(joinPath(folder, 'a'));\n\n\t\tassert.strictEqual(actual, testObject.getWorkspace().folders[0]);\n\t}));\n\n\ttest('getWorkspaceFolder() - queries in resource', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\n\t\tconst logService = new NullLogService();\n\t\tconst fileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst folder = joinPath(ROOT, folderName);\n\t\tawait fileService.createFolder(folder);\n\n\t\tconst environmentService = TestEnvironmentService;\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\tconst userDataProfileService = disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile));\n\t\tconst testObject = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService,\n\t\t\tuserDataProfileService,\n\t\t\tuserDataProfilesService,\n\t\t\tfileService,\n\t\t\tdisposables.add(new RemoteAgentService(new RemoteSocketFactoryService(), userDataProfileService, environmentService, TestProductService, disposables.add(new RemoteAuthorityResolverService(false, undefined, undefined, undefined, TestProductService, logService)), new SignService(TestProductService), new NullLogService())),\n\t\t\turiIdentityService,\n\t\t\tnew NullLogService(),\n\t\t\tnew NullPolicyService()));\n\t\tawait testObject.initialize(convertToWorkspacePayload(folder));\n\n\t\tconst actual = testObject.getWorkspaceFolder(joinPath(folder, 'a').with({ query: 'myquery=1' }));\n\n\t\tassert.strictEqual(actual, testObject.getWorkspace().folders[0]);\n\t}));\n\n\ttest('isCurrentWorkspace() => true', () => {\n\t\tassert.ok(testObject.isCurrentWorkspace(folder));\n\t});\n\n\ttest('isCurrentWorkspace() => false', () => {\n\t\tassert.ok(!testObject.isCurrentWorkspace(joinPath(dirname(folder), 'abc')));\n\t});\n\n\ttest('workspace is complete', () => testObject.getCompleteWorkspace());\n});\n\nsuite('WorkspaceContextService - Workspace', () => {\n\n\tlet testObject: WorkspaceService;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tconst fileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst appSettingsHome = joinPath(ROOT, 'user');\n\t\tconst folderA = joinPath(ROOT, 'a');\n\t\tconst folderB = joinPath(ROOT, 'b');\n\t\tconst configResource = joinPath(ROOT, 'vsctests.code-workspace');\n\t\tconst workspace = { folders: [{ path: folderA.path }, { path: folderB.path }] };\n\n\t\tawait fileService.createFolder(appSettingsHome);\n\t\tawait fileService.createFolder(folderA);\n\t\tawait fileService.createFolder(folderB);\n\t\tawait fileService.writeFile(configResource, VSBuffer.fromString(JSON.stringify(workspace, null, '\\t')));\n\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tconst environmentService = TestEnvironmentService;\n\t\tconst remoteAgentService = disposables.add(disposables.add(instantiationService.createInstance(RemoteAgentService)));\n\t\tinstantiationService.stub(IRemoteAgentService, remoteAgentService);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = instantiationService.stub(IUserDataProfilesService, disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService)));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\ttestObject = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService,\n\t\t\tdisposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile)),\n\t\t\tuserDataProfilesService, fileService, remoteAgentService, uriIdentityService, new NullLogService(), new NullPolicyService()));\n\n\t\tinstantiationService.stub(IWorkspaceContextService, testObject);\n\t\tinstantiationService.stub(IConfigurationService, testObject);\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\n\t\tawait testObject.initialize(getWorkspaceIdentifier(configResource));\n\t\ttestObject.acquireInstantiationService(instantiationService);\n\t});\n\n\ttest('workspace folders', () => {\n\t\tconst actual = testObject.getWorkspace().folders;\n\n\t\tassert.strictEqual(actual.length, 2);\n\t\tassert.strictEqual(basename(actual[0].uri), 'a');\n\t\tassert.strictEqual(basename(actual[1].uri), 'b');\n\t});\n\n\ttest('getWorkbenchState()', () => {\n\t\tconst actual = testObject.getWorkbenchState();\n\n\t\tassert.strictEqual(actual, WorkbenchState.WORKSPACE);\n\t});\n\n\n\ttest('workspace is complete', () => testObject.getCompleteWorkspace());\n\n});\n\nsuite('WorkspaceContextService - Workspace Editing', () => {\n\n\tlet testObject: WorkspaceService, fileService: IFileService;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst appSettingsHome = joinPath(ROOT, 'user');\n\t\tconst folderA = joinPath(ROOT, 'a');\n\t\tconst folderB = joinPath(ROOT, 'b');\n\t\tconst configResource = joinPath(ROOT, 'vsctests.code-workspace');\n\t\tconst workspace = { folders: [{ path: folderA.path }, { path: folderB.path }] };\n\n\t\tawait fileService.createFolder(appSettingsHome);\n\t\tawait fileService.createFolder(folderA);\n\t\tawait fileService.createFolder(folderB);\n\t\tawait fileService.writeFile(configResource, VSBuffer.fromString(JSON.stringify(workspace, null, '\\t')));\n\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tconst environmentService = TestEnvironmentService;\n\t\tconst remoteAgentService = disposables.add(instantiationService.createInstance(RemoteAgentService));\n\t\tinstantiationService.stub(IRemoteAgentService, remoteAgentService);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = instantiationService.stub(IUserDataProfilesService, disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService)));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\ttestObject = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService,\n\t\t\tdisposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile)),\n\t\t\tuserDataProfilesService, fileService, remoteAgentService, uriIdentityService, new NullLogService(), new NullPolicyService()));\n\n\t\tinstantiationService.stub(IFileService, fileService);\n\t\tinstantiationService.stub(IWorkspaceContextService, testObject);\n\t\tinstantiationService.stub(IConfigurationService, testObject);\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\n\t\tawait testObject.initialize(getWorkspaceIdentifier(configResource));\n\t\tinstantiationService.stub(ITextFileService, disposables.add(instantiationService.createInstance(TestTextFileService)));\n\t\tinstantiationService.stub(ITextModelService, disposables.add(instantiationService.createInstance(TextModelResolverService)));\n\t\tinstantiationService.stub(IJSONEditingService, instantiationService.createInstance(JSONEditingService));\n\t\ttestObject.acquireInstantiationService(instantiationService);\n\t});\n\n\ttest('add folders', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.addFolders([{ uri: joinPath(ROOT, 'd') }, { uri: joinPath(ROOT, 'c') }]);\n\t\tconst actual = testObject.getWorkspace().folders;\n\n\t\tassert.strictEqual(actual.length, 4);\n\t\tassert.strictEqual(basename(actual[0].uri), 'a');\n\t\tassert.strictEqual(basename(actual[1].uri), 'b');\n\t\tassert.strictEqual(basename(actual[2].uri), 'd');\n\t\tassert.strictEqual(basename(actual[3].uri), 'c');\n\t}));\n\n\ttest('add folders (at specific index)', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.addFolders([{ uri: joinPath(ROOT, 'd') }, { uri: joinPath(ROOT, 'c') }], 0);\n\t\tconst actual = testObject.getWorkspace().folders;\n\n\t\tassert.strictEqual(actual.length, 4);\n\t\tassert.strictEqual(basename(actual[0].uri), 'd');\n\t\tassert.strictEqual(basename(actual[1].uri), 'c');\n\t\tassert.strictEqual(basename(actual[2].uri), 'a');\n\t\tassert.strictEqual(basename(actual[3].uri), 'b');\n\t}));\n\n\ttest('add folders (at specific wrong index)', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.addFolders([{ uri: joinPath(ROOT, 'd') }, { uri: joinPath(ROOT, 'c') }], 10);\n\t\tconst actual = testObject.getWorkspace().folders;\n\n\t\tassert.strictEqual(actual.length, 4);\n\t\tassert.strictEqual(basename(actual[0].uri), 'a');\n\t\tassert.strictEqual(basename(actual[1].uri), 'b');\n\t\tassert.strictEqual(basename(actual[2].uri), 'd');\n\t\tassert.strictEqual(basename(actual[3].uri), 'c');\n\t}));\n\n\ttest('add folders (with name)', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.addFolders([{ uri: joinPath(ROOT, 'd'), name: 'DDD' }, { uri: joinPath(ROOT, 'c'), name: 'CCC' }]);\n\t\tconst actual = testObject.getWorkspace().folders;\n\n\t\tassert.strictEqual(actual.length, 4);\n\t\tassert.strictEqual(basename(actual[0].uri), 'a');\n\t\tassert.strictEqual(basename(actual[1].uri), 'b');\n\t\tassert.strictEqual(basename(actual[2].uri), 'd');\n\t\tassert.strictEqual(basename(actual[3].uri), 'c');\n\t\tassert.strictEqual(actual[2].name, 'DDD');\n\t\tassert.strictEqual(actual[3].name, 'CCC');\n\t}));\n\n\ttest('add folders triggers change event', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\n\t\tconst addedFolders = [{ uri: joinPath(ROOT, 'd') }, { uri: joinPath(ROOT, 'c') }];\n\t\tawait testObject.addFolders(addedFolders);\n\n\t\tassert.strictEqual(target.callCount, 2, `Should be called only once but called ${target.callCount} times`);\n\t\tconst actual_1 = (<IWorkspaceFoldersChangeEvent>target.args[1][0]);\n\t\tassert.deepStrictEqual(actual_1.added.map(r => r.uri.toString()), addedFolders.map(a => a.uri.toString()));\n\t\tassert.deepStrictEqual(actual_1.removed, []);\n\t\tassert.deepStrictEqual(actual_1.changed, []);\n\t}));\n\n\ttest('remove folders', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.removeFolders([testObject.getWorkspace().folders[0].uri]);\n\t\tconst actual = testObject.getWorkspace().folders;\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(basename(actual[0].uri), 'b');\n\t}));\n\n\ttest('remove folders triggers change event', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tconst removedFolder = testObject.getWorkspace().folders[0];\n\t\tawait testObject.removeFolders([removedFolder.uri]);\n\n\t\tassert.strictEqual(target.callCount, 2, `Should be called only once but called ${target.callCount} times`);\n\t\tconst actual_1 = (<IWorkspaceFoldersChangeEvent>target.args[1][0]);\n\t\tassert.deepStrictEqual(actual_1.added, []);\n\t\tassert.deepStrictEqual(actual_1.removed.map(r => r.uri.toString()), [removedFolder.uri.toString()]);\n\t\tassert.deepStrictEqual(actual_1.changed.map(c => c.uri.toString()), [testObject.getWorkspace().folders[0].uri.toString()]);\n\t}));\n\n\ttest('remove folders and add them back by writing into the file', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst folders = testObject.getWorkspace().folders;\n\t\tawait testObject.removeFolders([folders[0].uri]);\n\n\t\tconst promise = new Promise<void>((resolve, reject) => {\n\t\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(actual => {\n\t\t\t\ttry {\n\t\t\t\t\tassert.deepStrictEqual(actual.added.map(r => r.uri.toString()), [folders[0].uri.toString()]);\n\t\t\t\t\tresolve();\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\n\t\tconst workspace = { folders: [{ path: folders[0].uri.path }, { path: folders[1].uri.path }] };\n\t\tawait fileService.writeFile(testObject.getWorkspace().configuration!, VSBuffer.fromString(JSON.stringify(workspace, null, '\\t')));\n\t\tawait promise;\n\t}));\n\n\ttest('update folders (remove last and add to end)', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tconst addedFolders = [{ uri: joinPath(ROOT, 'd') }, { uri: joinPath(ROOT, 'c') }];\n\t\tconst removedFolders = [testObject.getWorkspace().folders[1]].map(f => f.uri);\n\t\tawait testObject.updateFolders(addedFolders, removedFolders);\n\n\t\tassert.strictEqual(target.callCount, 2, `Should be called only once but called ${target.callCount} times`);\n\t\tconst actual_1 = (<IWorkspaceFoldersChangeEvent>target.args[1][0]);\n\t\tassert.deepStrictEqual(actual_1.added.map(r => r.uri.toString()), addedFolders.map(a => a.uri.toString()));\n\t\tassert.deepStrictEqual(actual_1.removed.map(r_1 => r_1.uri.toString()), removedFolders.map(a_1 => a_1.toString()));\n\t\tassert.deepStrictEqual(actual_1.changed, []);\n\t}));\n\n\ttest('update folders (rename first via add and remove)', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tconst addedFolders = [{ uri: joinPath(ROOT, 'a'), name: 'The Folder' }];\n\t\tconst removedFolders = [testObject.getWorkspace().folders[0]].map(f => f.uri);\n\t\tawait testObject.updateFolders(addedFolders, removedFolders, 0);\n\n\t\tassert.strictEqual(target.callCount, 2, `Should be called only once but called ${target.callCount} times`);\n\t\tconst actual_1 = (<IWorkspaceFoldersChangeEvent>target.args[1][0]);\n\t\tassert.deepStrictEqual(actual_1.added, []);\n\t\tassert.deepStrictEqual(actual_1.removed, []);\n\t\tassert.deepStrictEqual(actual_1.changed.map(r => r.uri.toString()), removedFolders.map(a => a.toString()));\n\t}));\n\n\ttest('update folders (remove first and add to end)', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tconst addedFolders = [{ uri: joinPath(ROOT, 'd') }, { uri: joinPath(ROOT, 'c') }];\n\t\tconst removedFolders = [testObject.getWorkspace().folders[0]].map(f => f.uri);\n\t\tconst changedFolders = [testObject.getWorkspace().folders[1]].map(f => f.uri);\n\t\tawait testObject.updateFolders(addedFolders, removedFolders);\n\n\t\tassert.strictEqual(target.callCount, 2, `Should be called only once but called ${target.callCount} times`);\n\t\tconst actual_1 = (<IWorkspaceFoldersChangeEvent>target.args[1][0]);\n\t\tassert.deepStrictEqual(actual_1.added.map(r => r.uri.toString()), addedFolders.map(a => a.uri.toString()));\n\t\tassert.deepStrictEqual(actual_1.removed.map(r_1 => r_1.uri.toString()), removedFolders.map(a_1 => a_1.toString()));\n\t\tassert.deepStrictEqual(actual_1.changed.map(r_2 => r_2.uri.toString()), changedFolders.map(a_2 => a_2.toString()));\n\t}));\n\n\ttest('reorder folders trigger change event', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tconst workspace = { folders: [{ path: testObject.getWorkspace().folders[1].uri.path }, { path: testObject.getWorkspace().folders[0].uri.path }] };\n\t\tawait fileService.writeFile(testObject.getWorkspace().configuration!, VSBuffer.fromString(JSON.stringify(workspace, null, '\\t')));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(target.callCount, 2, `Should be called only once but called ${target.callCount} times`);\n\t\tconst actual_1 = (<IWorkspaceFoldersChangeEvent>target.args[1][0]);\n\t\tassert.deepStrictEqual(actual_1.added, []);\n\t\tassert.deepStrictEqual(actual_1.removed, []);\n\t\tassert.deepStrictEqual(actual_1.changed.map(c => c.uri.toString()), testObject.getWorkspace().folders.map(f => f.uri.toString()).reverse());\n\t}));\n\n\ttest('rename folders trigger change event', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tconst workspace = { folders: [{ path: testObject.getWorkspace().folders[0].uri.path, name: '1' }, { path: testObject.getWorkspace().folders[1].uri.path }] };\n\t\tfileService.writeFile(testObject.getWorkspace().configuration!, VSBuffer.fromString(JSON.stringify(workspace, null, '\\t')));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(target.callCount, 2, `Should be called only once but called ${target.callCount} times`);\n\t\tconst actual_1 = (<IWorkspaceFoldersChangeEvent>target.args[1][0]);\n\t\tassert.deepStrictEqual(actual_1.added, []);\n\t\tassert.deepStrictEqual(actual_1.removed, []);\n\t\tassert.deepStrictEqual(actual_1.changed.map(c => c.uri.toString()), [testObject.getWorkspace().folders[0].uri.toString()]);\n\t}));\n\n});\n\nsuite('WorkspaceService - Initialization', () => {\n\n\tlet configResource: URI, testObject: WorkspaceService, fileService: IFileService, environmentService: BrowserWorkbenchEnvironmentService, userDataProfileService: IUserDataProfileService;\n\tconst configurationRegistry = Registry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration);\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuiteSetup(() => {\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'initialization.testSetting1': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.RESOURCE\n\t\t\t\t},\n\t\t\t\t'initialization.testSetting2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.RESOURCE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst appSettingsHome = joinPath(ROOT, 'user');\n\t\tconst folderA = joinPath(ROOT, 'a');\n\t\tconst folderB = joinPath(ROOT, 'b');\n\t\tconfigResource = joinPath(ROOT, 'vsctests.code-workspace');\n\t\tconst workspace = { folders: [{ path: folderA.path }, { path: folderB.path }] };\n\n\t\tawait fileService.createFolder(appSettingsHome);\n\t\tawait fileService.createFolder(folderA);\n\t\tawait fileService.createFolder(folderB);\n\t\tawait fileService.writeFile(configResource, VSBuffer.fromString(JSON.stringify(workspace, null, '\\t')));\n\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tenvironmentService = TestEnvironmentService;\n\t\tconst remoteAgentService = disposables.add(instantiationService.createInstance(RemoteAgentService));\n\t\tinstantiationService.stub(IRemoteAgentService, remoteAgentService);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = instantiationService.stub(IUserDataProfilesService, disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService)));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\tuserDataProfileService = instantiationService.stub(IUserDataProfileService, disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile)));\n\t\ttestObject = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService,\n\t\t\tuserDataProfileService,\n\t\t\tuserDataProfilesService, fileService, remoteAgentService, uriIdentityService, new NullLogService(), new NullPolicyService()));\n\t\tinstantiationService.stub(IFileService, fileService);\n\t\tinstantiationService.stub(IWorkspaceContextService, testObject);\n\t\tinstantiationService.stub(IConfigurationService, testObject);\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\n\t\tawait testObject.initialize({ id: '' });\n\t\tinstantiationService.stub(ITextFileService, disposables.add(instantiationService.createInstance(TestTextFileService)));\n\t\tinstantiationService.stub(ITextModelService, disposables.add(instantiationService.createInstance(TextModelResolverService)));\n\t\ttestObject.acquireInstantiationService(instantiationService);\n\t});\n\n\t(isMacintosh ? test.skip : test)('initialize a folder workspace from an empty workspace with no configuration changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"initialization.testSetting1\": \"userValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeWorkbenchState(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceName(target));\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\n\t\tconst folder = joinPath(ROOT, 'a');\n\t\tawait testObject.initialize(convertToWorkspacePayload(folder));\n\n\t\tassert.strictEqual(testObject.getValue('initialization.testSetting1'), 'userValue');\n\t\tassert.strictEqual(target.callCount, 4);\n\t\tassert.deepStrictEqual(target.args[0], [WorkbenchState.FOLDER]);\n\t\tassert.deepStrictEqual(target.args[1], [undefined]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[3][0]).added.map(f => f.uri.toString()), [folder.toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[3][0]).removed, []);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[3][0]).changed, []);\n\n\t}));\n\n\t(isMacintosh ? test.skip : test)('initialize a folder workspace from an empty workspace with configuration changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"initialization.testSetting1\": \"userValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeWorkbenchState(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceName(target));\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\n\t\tconst folder = joinPath(ROOT, 'a');\n\t\tawait fileService.writeFile(joinPath(folder, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"initialization.testSetting1\": \"workspaceValue\" }'));\n\t\tawait testObject.initialize(convertToWorkspacePayload(folder));\n\n\t\tassert.strictEqual(testObject.getValue('initialization.testSetting1'), 'workspaceValue');\n\t\tassert.strictEqual(target.callCount, 5);\n\t\tassert.deepStrictEqual([...(<IConfigurationChangeEvent>target.args[0][0]).affectedKeys], ['initialization.testSetting1']);\n\t\tassert.deepStrictEqual(target.args[1], [WorkbenchState.FOLDER]);\n\t\tassert.deepStrictEqual(target.args[2], [undefined]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).added.map(f => f.uri.toString()), [folder.toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).removed, []);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).changed, []);\n\n\t}));\n\n\t(isMacintosh ? test.skip : test)('initialize a multi root workspace from an empty workspace with no configuration changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"initialization.testSetting1\": \"userValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeWorkbenchState(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceName(target));\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\n\t\tawait testObject.initialize(getWorkspaceIdentifier(configResource));\n\n\t\tassert.strictEqual(target.callCount, 4);\n\t\tassert.deepStrictEqual(target.args[0], [WorkbenchState.WORKSPACE]);\n\t\tassert.deepStrictEqual(target.args[1], [undefined]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[3][0]).added.map(folder => folder.uri.toString()), [joinPath(ROOT, 'a').toString(), joinPath(ROOT, 'b').toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[3][0]).removed, []);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[3][0]).changed, []);\n\n\t}));\n\n\t(isMacintosh ? test.skip : test)('initialize a multi root workspace from an empty workspace with configuration changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"initialization.testSetting1\": \"userValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeWorkbenchState(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceName(target));\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\n\t\tawait fileService.writeFile(joinPath(ROOT, 'a', '.vscode', 'settings.json'), VSBuffer.fromString('{ \"initialization.testSetting1\": \"workspaceValue1\" }'));\n\t\tawait fileService.writeFile(joinPath(ROOT, 'b', '.vscode', 'settings.json'), VSBuffer.fromString('{ \"initialization.testSetting2\": \"workspaceValue2\" }'));\n\t\tawait testObject.initialize(getWorkspaceIdentifier(configResource));\n\n\t\tassert.strictEqual(target.callCount, 5);\n\t\tassert.deepStrictEqual([...(<IConfigurationChangeEvent>target.args[0][0]).affectedKeys], ['initialization.testSetting1', 'initialization.testSetting2']);\n\t\tassert.deepStrictEqual(target.args[1], [WorkbenchState.WORKSPACE]);\n\t\tassert.deepStrictEqual(target.args[2], [undefined]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).added.map(folder => folder.uri.toString()), [joinPath(ROOT, 'a').toString(), joinPath(ROOT, 'b').toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).removed, []);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).changed, []);\n\n\t}));\n\n\t(isMacintosh ? test.skip : test)('initialize a folder workspace from a folder workspace with no configuration changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\n\t\tawait testObject.initialize(convertToWorkspacePayload(joinPath(ROOT, 'a')));\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"initialization.testSetting1\": \"userValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeWorkbenchState(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceName(target));\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\n\t\tawait testObject.initialize(convertToWorkspacePayload(joinPath(ROOT, 'b')));\n\n\t\tassert.strictEqual(testObject.getValue('initialization.testSetting1'), 'userValue');\n\t\tassert.strictEqual(target.callCount, 2);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[1][0]).added.map(folder_1 => folder_1.uri.toString()), [joinPath(ROOT, 'b').toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[1][0]).removed.map(folder_2 => folder_2.uri.toString()), [joinPath(ROOT, 'a').toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[1][0]).changed, []);\n\n\t}));\n\n\t(isMacintosh ? test.skip : test)('initialize a folder workspace from a folder workspace with configuration changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\n\t\tawait testObject.initialize(convertToWorkspacePayload(joinPath(ROOT, 'a')));\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeWorkbenchState(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceName(target));\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\n\t\tawait fileService.writeFile(joinPath(ROOT, 'b', '.vscode', 'settings.json'), VSBuffer.fromString('{ \"initialization.testSetting1\": \"workspaceValue2\" }'));\n\t\tawait testObject.initialize(convertToWorkspacePayload(joinPath(ROOT, 'b')));\n\n\t\tassert.strictEqual(testObject.getValue('initialization.testSetting1'), 'workspaceValue2');\n\t\tassert.strictEqual(target.callCount, 3);\n\t\tassert.deepStrictEqual([...(<IConfigurationChangeEvent>target.args[0][0]).affectedKeys], ['initialization.testSetting1']);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[2][0]).added.map(folder_1 => folder_1.uri.toString()), [joinPath(ROOT, 'b').toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[2][0]).removed.map(folder_2 => folder_2.uri.toString()), [joinPath(ROOT, 'a').toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[2][0]).changed, []);\n\n\t}));\n\n\t(isMacintosh ? test.skip : test)('initialize a multi folder workspace from a folder workspacce triggers change events in the right order', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.initialize(convertToWorkspacePayload(joinPath(ROOT, 'a')));\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeWorkbenchState(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceName(target));\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\n\t\tawait fileService.writeFile(joinPath(ROOT, 'a', '.vscode', 'settings.json'), VSBuffer.fromString('{ \"initialization.testSetting1\": \"workspaceValue2\" }'));\n\t\tawait testObject.initialize(getWorkspaceIdentifier(configResource));\n\n\t\tassert.strictEqual(target.callCount, 5);\n\t\tassert.deepStrictEqual([...(<IConfigurationChangeEvent>target.args[0][0]).affectedKeys], ['initialization.testSetting1']);\n\t\tassert.deepStrictEqual(target.args[1], [WorkbenchState.WORKSPACE]);\n\t\tassert.deepStrictEqual(target.args[2], [undefined]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).added.map(folder_1 => folder_1.uri.toString()), [joinPath(ROOT, 'b').toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).removed, []);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).changed, []);\n\t}));\n\n});\n\nsuite('WorkspaceConfigurationService - Folder', () => {\n\n\tlet testObject: WorkspaceService, workspaceService: WorkspaceService, fileService: IFileService, environmentService: IBrowserWorkbenchEnvironmentService, userDataProfileService: IUserDataProfileService, instantiationService: TestInstantiationService;\n\tconst configurationRegistry = Registry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration);\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuiteSetup(() => {\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.applicationSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t},\n\t\t\t\t'configurationService.folder.machineSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE\n\t\t\t\t},\n\t\t\t\t'configurationService.folder.applicationMachineSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION_MACHINE\n\t\t\t\t},\n\t\t\t\t'configurationService.folder.machineOverridableSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE_OVERRIDABLE\n\t\t\t\t},\n\t\t\t\t'configurationService.folder.testSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.RESOURCE\n\t\t\t\t},\n\t\t\t\t'configurationService.folder.languageSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.LANGUAGE_OVERRIDABLE\n\t\t\t\t},\n\t\t\t\t'configurationService.folder.restrictedSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\trestricted: true\n\t\t\t\t},\n\t\t\t\t'configurationService.folder.policySetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tpolicy: {\n\t\t\t\t\t\tname: 'configurationService.folder.policySetting',\n\t\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\t\tlocalization: { description: { key: '', value: '' } }\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'configurationService.folder.policyObjectSetting': {\n\t\t\t\t\t'type': 'object',\n\t\t\t\t\t'default': {},\n\t\t\t\t\tpolicy: {\n\t\t\t\t\t\tname: 'configurationService.folder.policyObjectSetting',\n\t\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\t\tlocalization: { description: { key: '', value: '' } }\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\n\t\tconfigurationRegistry.registerDefaultConfigurations([{\n\t\t\toverrides: {\n\t\t\t\t'[jsonc]': {\n\t\t\t\t\t'configurationService.folder.languageSetting': 'languageValue'\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t});\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst folder = joinPath(ROOT, 'a');\n\t\tawait fileService.createFolder(folder);\n\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tenvironmentService = TestEnvironmentService;\n\t\tenvironmentService.policyFile = joinPath(folder, 'policies.json');\n\t\tconst remoteAgentService = disposables.add(instantiationService.createInstance(RemoteAgentService));\n\t\tinstantiationService.stub(IRemoteAgentService, remoteAgentService);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = instantiationService.stub(IUserDataProfilesService, disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService)));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\tuserDataProfileService = instantiationService.stub(IUserDataProfileService, disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile)));\n\t\tworkspaceService = testObject = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService, userDataProfileService, userDataProfilesService,\n\t\t\tfileService, remoteAgentService, uriIdentityService, new NullLogService(),\n\t\t\tdisposables.add(new FilePolicyService(environmentService.policyFile, fileService, logService))));\n\t\tinstantiationService.stub(IFileService, fileService);\n\t\tinstantiationService.stub(IWorkspaceContextService, testObject);\n\t\tinstantiationService.stub(IConfigurationService, testObject);\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\n\t\tawait workspaceService.initialize(convertToWorkspacePayload(folder));\n\t\tinstantiationService.stub(IKeybindingEditingService, disposables.add(instantiationService.createInstance(KeybindingsEditingService)));\n\t\tinstantiationService.stub(ITextFileService, disposables.add(instantiationService.createInstance(TestTextFileService)));\n\t\tinstantiationService.stub(ITextModelService, <ITextModelService>disposables.add(instantiationService.createInstance(TextModelResolverService)));\n\t\tworkspaceService.acquireInstantiationService(instantiationService);\n\t});\n\n\ttest('defaults', () => {\n\t\tassert.deepStrictEqual(testObject.getValue('configurationService'),\n\t\t\t{\n\t\t\t\t'folder': {\n\t\t\t\t\t'applicationSetting': 'isSet',\n\t\t\t\t\t'machineSetting': 'isSet',\n\t\t\t\t\t'applicationMachineSetting': 'isSet',\n\t\t\t\t\t'machineOverridableSetting': 'isSet',\n\t\t\t\t\t'testSetting': 'isSet',\n\t\t\t\t\t'languageSetting': 'isSet',\n\t\t\t\t\t'restrictedSetting': 'isSet',\n\t\t\t\t\t'policySetting': 'isSet',\n\t\t\t\t\t'policyObjectSetting': {}\n\t\t\t\t}\n\t\t\t});\n\t});\n\n\ttest('globals override defaults', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"userValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.testSetting'), 'userValue');\n\t}));\n\n\ttest('globals', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"testworkbench.editor.tabs\": true }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('testworkbench.editor.tabs'), true);\n\t}));\n\n\ttest('workspace settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"testworkbench.editor.icons\": true }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('testworkbench.editor.icons'), true);\n\t}));\n\n\ttest('workspace settings override user settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.testSetting'), 'workspaceValue');\n\t}));\n\n\ttest('machine overridable settings override user Settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.machineOverridableSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.machineOverridableSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineOverridableSetting'), 'workspaceValue');\n\t}));\n\n\ttest('workspace settings override user settings after defaults are registered ', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.newSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.newSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.newSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.newSetting'), 'workspaceValue');\n\t}));\n\n\ttest('machine overridable settings override user settings after defaults are registered ', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.newMachineOverridableSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.newMachineOverridableSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.newMachineOverridableSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE_OVERRIDABLE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.newMachineOverridableSetting'), 'workspaceValue');\n\t}));\n\n\ttest('application settings are not read from workspace', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.applicationSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.applicationSetting\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationSetting'), 'userValue');\n\t}));\n\n\ttest('application settings are not read from workspace when workspace folder uri is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.applicationSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.applicationSetting\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationSetting', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('machine settings are not read from workspace', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.machineSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.machineSetting\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('machine settings are not read from workspace when workspace folder uri is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.machineSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.machineSetting\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('application machine overridable settings are not read from workspace', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.applicationMachineSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.applicationMachineSetting\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationMachineSetting'), 'userValue');\n\t}));\n\n\ttest('application machine overridable settings are not read from workspace when workspace folder uri is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.applicationMachineSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.applicationMachineSetting\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationMachineSetting', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('get application scope settings are loaded after defaults are registered', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.applicationSetting-2\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.applicationSetting-2\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationSetting-2'), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.applicationSetting-2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationSetting-2'), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationSetting-2'), 'userValue');\n\t}));\n\n\ttest('get application scope settings are not loaded after defaults are registered when workspace folder uri is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.applicationSetting-3\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.applicationSetting-3\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.applicationSetting-3': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('get application machine overridable scope settings are loaded after defaults are registered', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.applicationMachineSetting-2\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.applicationMachineSetting-2\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationMachineSetting-2'), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.applicationMachineSetting-2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationMachineSetting-2'), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationMachineSetting-2'), 'userValue');\n\t}));\n\n\ttest('get application machine overridable scope settings are loaded after defaults are registered when workspace folder uri is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.applicationMachineSetting-3\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.applicationMachineSetting-3\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationMachineSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.applicationMachineSetting-3': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationMachineSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationMachineSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('get machine scope settings are not loaded after defaults are registered', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.machineSetting-2\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.machineSetting-2\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting-2'), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.machineSetting-2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting-2'), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting-2'), 'userValue');\n\t}));\n\n\ttest('get machine scope settings are not loaded after defaults are registered when workspace folder uri is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.machineSetting-3\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.machineSetting-3\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.machineSetting-3': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('policy value override all', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst result = await runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\t\tawait fileService.writeFile(environmentService.policyFile!, VSBuffer.fromString('{ \"configurationService.folder.policySetting\": \"policyValue\" }'));\n\t\t\treturn promise;\n\t\t});\n\t\tassert.deepStrictEqual([...result.affectedKeys], ['configurationService.folder.policySetting']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.policySetting'), 'policyValue');\n\t\tassert.strictEqual(testObject.inspect('configurationService.folder.policySetting').policyValue, 'policyValue');\n\t}));\n\n\ttest('policy settings when policy value is not set', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.policySetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.policySetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.policySetting'), 'workspaceValue');\n\t\tassert.strictEqual(testObject.inspect('configurationService.folder.policySetting').policyValue, undefined);\n\t}));\n\n\ttest('policy value override all for object type setting', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\t\tawait fileService.writeFile(environmentService.policyFile!, VSBuffer.fromString('{ \"configurationService.folder.policyObjectSetting\": {\"a\": true} }'));\n\t\t\treturn promise;\n\t\t});\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.policyObjectSetting\": {\"b\": true} }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.deepStrictEqual(testObject.getValue('configurationService.folder.policyObjectSetting'), { a: true });\n\t}));\n\n\ttest('reload configuration emits events after global configuraiton changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"testworkbench.editor.tabs\": true }'));\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.ok(target.called);\n\t}));\n\n\ttest('reload configuration emits events after workspace configuraiton changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"workspaceValue\" }'));\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.ok(target.called);\n\t}));\n\n\ttest('reload configuration should not emit event if no changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"testworkbench.editor.tabs\": true }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(() => { target(); }));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.ok(!target.called);\n\t}));\n\n\ttest('inspect', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tlet actual = testObject.inspect('something.missing');\n\t\tassert.strictEqual(actual.defaultValue, undefined);\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, undefined);\n\n\t\tactual = testObject.inspect('configurationService.folder.testSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'isSet');\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"userValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.folder.testSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userValue');\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'userValue');\n\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.folder.testSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userValue');\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'workspaceValue');\n\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'tasks.json'), VSBuffer.fromString('{ \"configurationService.tasks.testSetting\": \"tasksValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('tasks');\n\t\tassert.strictEqual(actual.defaultValue, undefined);\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.deepStrictEqual(actual.userValue, {});\n\t\tassert.deepStrictEqual(actual.workspaceValue, {\n\t\t\t'configurationService': {\n\t\t\t\t'tasks': {\n\t\t\t\t\t'testSetting': 'tasksValue'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.deepStrictEqual(actual.value, {\n\t\t\t'configurationService': {\n\t\t\t\t'tasks': {\n\t\t\t\t\t'testSetting': 'tasksValue'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}));\n\n\ttest('inspect restricted settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(false);\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userRestrictedValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tlet actual = testObject.inspect('configurationService.folder.restrictedSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'userRestrictedValue');\n\n\t\ttestObject.updateWorkspaceTrust(true);\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.folder.restrictedSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'userRestrictedValue');\n\n\t\ttestObject.updateWorkspaceTrust(false);\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceRestrictedValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.folder.restrictedSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'userRestrictedValue');\n\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'tasks.json'), VSBuffer.fromString('{ \"configurationService.tasks.testSetting\": \"tasksValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('tasks');\n\t\tassert.strictEqual(actual.defaultValue, undefined);\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.deepStrictEqual(actual.userValue, {});\n\t\tassert.deepStrictEqual(actual.workspaceValue, {\n\t\t\t'configurationService': {\n\t\t\t\t'tasks': {\n\t\t\t\t\t'testSetting': 'tasksValue'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.deepStrictEqual(actual.value, {\n\t\t\t'configurationService': {\n\t\t\t\t'tasks': {\n\t\t\t\t\t'testSetting': 'tasksValue'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\ttestObject.updateWorkspaceTrust(true);\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.folder.restrictedSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'workspaceRestrictedValue');\n\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'tasks.json'), VSBuffer.fromString('{ \"configurationService.tasks.testSetting\": \"tasksValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('tasks');\n\t\tassert.strictEqual(actual.defaultValue, undefined);\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.deepStrictEqual(actual.userValue, {});\n\t\tassert.deepStrictEqual(actual.workspaceValue, {\n\t\t\t'configurationService': {\n\t\t\t\t'tasks': {\n\t\t\t\t\t'testSetting': 'tasksValue'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.deepStrictEqual(actual.value, {\n\t\t\t'configurationService': {\n\t\t\t\t'tasks': {\n\t\t\t\t\t'testSetting': 'tasksValue'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}));\n\n\ttest('inspect restricted settings after change', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(false);\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userRestrictedValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceRestrictedValue\" }'));\n\t\tconst event = await promise;\n\n\t\tconst actual = testObject.inspect('configurationService.folder.restrictedSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'userRestrictedValue');\n\t\tassert.strictEqual(event.affectsConfiguration('configurationService.folder.restrictedSetting'), true);\n\t}));\n\n\ttest('keys', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tlet actual = testObject.keys();\n\t\tassert.ok(actual.default.indexOf('configurationService.folder.testSetting') !== -1);\n\t\tassert.deepStrictEqual(actual.user, []);\n\t\tassert.deepStrictEqual(actual.workspace, []);\n\t\tassert.deepStrictEqual(actual.workspaceFolder, []);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"userValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.keys();\n\t\tassert.ok(actual.default.indexOf('configurationService.folder.testSetting') !== -1);\n\t\tassert.deepStrictEqual(actual.user, ['configurationService.folder.testSetting']);\n\t\tassert.deepStrictEqual(actual.workspace, []);\n\t\tassert.deepStrictEqual(actual.workspaceFolder, []);\n\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.keys();\n\t\tassert.ok(actual.default.indexOf('configurationService.folder.testSetting') !== -1);\n\t\tassert.deepStrictEqual(actual.user, ['configurationService.folder.testSetting']);\n\t\tassert.deepStrictEqual(actual.workspace, ['configurationService.folder.testSetting']);\n\t\tassert.deepStrictEqual(actual.workspaceFolder, []);\n\t}));\n\n\ttest('update user configuration', () => {\n\t\treturn testObject.updateValue('configurationService.folder.testSetting', 'value', ConfigurationTarget.USER)\n\t\t\t.then(() => assert.strictEqual(testObject.getValue('configurationService.folder.testSetting'), 'value'));\n\t});\n\n\ttest('update workspace configuration', () => {\n\t\treturn testObject.updateValue('tasks.service.testSetting', 'value', ConfigurationTarget.WORKSPACE)\n\t\t\t.then(() => assert.strictEqual(testObject.getValue(TasksSchemaProperties.ServiceTestSetting), 'value'));\n\t});\n\n\ttest('update resource configuration', () => {\n\t\treturn testObject.updateValue('configurationService.folder.testSetting', 'value', { resource: workspaceService.getWorkspace().folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER)\n\t\t\t.then(() => assert.strictEqual(testObject.getValue('configurationService.folder.testSetting'), 'value'));\n\t});\n\n\ttest('update language configuration using configuration overrides', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.folder.languageSetting', 'abcLangValue', { overrideIdentifier: 'abclang' });\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { overrideIdentifier: 'abclang' }), 'abcLangValue');\n\t}));\n\n\ttest('update language configuration using configuration update overrides', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.folder.languageSetting', 'abcLangValue', { overrideIdentifiers: ['abclang'] });\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { overrideIdentifier: 'abclang' }), 'abcLangValue');\n\t}));\n\n\ttest('update language configuration for multiple languages', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.folder.languageSetting', 'multiLangValue', { overrideIdentifiers: ['xyzlang', 'deflang'] }, ConfigurationTarget.USER);\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { overrideIdentifier: 'deflang' }), 'multiLangValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { overrideIdentifier: 'xyzlang' }), 'multiLangValue');\n\t\tassert.deepStrictEqual(testObject.getValue(keyFromOverrideIdentifiers(['deflang', 'xyzlang'])), { 'configurationService.folder.languageSetting': 'multiLangValue' });\n\t}));\n\n\ttest('update language configuration for multiple languages when already set', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"[deflang][xyzlang]\": { \"configurationService.folder.languageSetting\": \"userValue\" }}'));\n\t\tawait testObject.updateValue('configurationService.folder.languageSetting', 'multiLangValue', { overrideIdentifiers: ['xyzlang', 'deflang'] }, ConfigurationTarget.USER);\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { overrideIdentifier: 'deflang' }), 'multiLangValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { overrideIdentifier: 'xyzlang' }), 'multiLangValue');\n\t\tassert.deepStrictEqual(testObject.getValue(keyFromOverrideIdentifiers(['deflang', 'xyzlang'])), { 'configurationService.folder.languageSetting': 'multiLangValue' });\n\t\tconst actualContent = (await fileService.readFile(userDataProfileService.currentProfile.settingsResource)).value.toString();\n\t\tassert.deepStrictEqual(JSON.parse(actualContent), { '[deflang][xyzlang]': { 'configurationService.folder.languageSetting': 'multiLangValue' } });\n\t}));\n\n\ttest('update resource language configuration', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.folder.languageSetting', 'value', { resource: workspaceService.getWorkspace().folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting'), 'value');\n\t}));\n\n\ttest('update resource language configuration for a language using configuration overrides', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { resource: workspaceService.getWorkspace().folders[0].uri, overrideIdentifier: 'jsonc' }), 'languageValue');\n\t\tawait testObject.updateValue('configurationService.folder.languageSetting', 'languageValueUpdated', { resource: workspaceService.getWorkspace().folders[0].uri, overrideIdentifier: 'jsonc' }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { resource: workspaceService.getWorkspace().folders[0].uri, overrideIdentifier: 'jsonc' }), 'languageValueUpdated');\n\t}));\n\n\ttest('update resource language configuration for a language using configuration update overrides', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { resource: workspaceService.getWorkspace().folders[0].uri, overrideIdentifier: 'jsonc' }), 'languageValue');\n\t\tawait testObject.updateValue('configurationService.folder.languageSetting', 'languageValueUpdated', { resource: workspaceService.getWorkspace().folders[0].uri, overrideIdentifiers: ['jsonc'] }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { resource: workspaceService.getWorkspace().folders[0].uri, overrideIdentifier: 'jsonc' }), 'languageValueUpdated');\n\t}));\n\n\ttest('update application setting into workspace configuration in a workspace is not supported', () => {\n\t\treturn testObject.updateValue('configurationService.folder.applicationSetting', 'workspaceValue', {}, ConfigurationTarget.WORKSPACE, { donotNotifyError: true })\n\t\t\t.then(() => assert.fail('Should not be supported'), (e) => assert.strictEqual(e.code, ConfigurationEditingErrorCode.ERROR_INVALID_WORKSPACE_CONFIGURATION_APPLICATION));\n\t});\n\n\ttest('update application machine overridable setting into workspace configuration in a workspace is not supported', () => {\n\t\treturn testObject.updateValue('configurationService.folder.applicationMachineSetting', 'workspaceValue', {}, ConfigurationTarget.WORKSPACE, { donotNotifyError: true })\n\t\t\t.then(() => assert.fail('Should not be supported'), (e) => assert.strictEqual(e.code, ConfigurationEditingErrorCode.ERROR_INVALID_WORKSPACE_CONFIGURATION_APPLICATION));\n\t});\n\n\ttest('update machine setting into workspace configuration in a workspace is not supported', () => {\n\t\treturn testObject.updateValue('configurationService.folder.machineSetting', 'workspaceValue', {}, ConfigurationTarget.WORKSPACE, { donotNotifyError: true })\n\t\t\t.then(() => assert.fail('Should not be supported'), (e) => assert.strictEqual(e.code, ConfigurationEditingErrorCode.ERROR_INVALID_WORKSPACE_CONFIGURATION_MACHINE));\n\t});\n\n\ttest('update tasks configuration', () => {\n\t\treturn testObject.updateValue('tasks', { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] }, ConfigurationTarget.WORKSPACE)\n\t\t\t.then(() => assert.deepStrictEqual(testObject.getValue(TasksSchemaProperties.Tasks), { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] }));\n\t});\n\n\ttest('update user configuration should trigger change event before promise is resolve', () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\treturn testObject.updateValue('configurationService.folder.testSetting', 'value', ConfigurationTarget.USER)\n\t\t\t.then(() => assert.ok(target.called));\n\t});\n\n\ttest('update workspace configuration should trigger change event before promise is resolve', () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\treturn testObject.updateValue('configurationService.folder.testSetting', 'value', ConfigurationTarget.WORKSPACE)\n\t\t\t.then(() => assert.ok(target.called));\n\t});\n\n\ttest('update memory configuration', () => {\n\t\treturn testObject.updateValue('configurationService.folder.testSetting', 'memoryValue', ConfigurationTarget.MEMORY)\n\t\t\t.then(() => assert.strictEqual(testObject.getValue('configurationService.folder.testSetting'), 'memoryValue'));\n\t});\n\n\ttest('update memory configuration should trigger change event before promise is resolve', () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\treturn testObject.updateValue('configurationService.folder.testSetting', 'memoryValue', ConfigurationTarget.MEMORY)\n\t\t\t.then(() => assert.ok(target.called));\n\t});\n\n\ttest('remove setting from all targets', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst key = 'configurationService.folder.testSetting';\n\t\tawait testObject.updateValue(key, 'workspaceValue', ConfigurationTarget.WORKSPACE);\n\t\tawait testObject.updateValue(key, 'userValue', ConfigurationTarget.USER);\n\n\t\tawait testObject.updateValue(key, undefined);\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst actual = testObject.inspect(key, { resource: workspaceService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t}));\n\n\ttest('update user configuration to default value when target is not passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.folder.testSetting', 'value', ConfigurationTarget.USER);\n\t\tawait testObject.updateValue('configurationService.folder.testSetting', 'isSet');\n\t\tassert.strictEqual(testObject.inspect('configurationService.folder.testSetting').userValue, undefined);\n\t}));\n\n\ttest('update user configuration to default value when target is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.folder.testSetting', 'value', ConfigurationTarget.USER);\n\t\tawait testObject.updateValue('configurationService.folder.testSetting', 'isSet', ConfigurationTarget.USER);\n\t\tassert.strictEqual(testObject.inspect('configurationService.folder.testSetting').userValue, 'isSet');\n\t}));\n\n\ttest('update task configuration should trigger change event before promise is resolve', () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\treturn testObject.updateValue('tasks', { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] }, ConfigurationTarget.WORKSPACE)\n\t\t\t.then(() => assert.ok(target.called));\n\t});\n\n\ttest('no change event when there are no global tasks', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\tawait timeout(5);\n\t\tassert.ok(target.notCalled);\n\t}));\n\n\ttest('change event when there are global tasks', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(joinPath(environmentService.userRoamingDataHome, 'tasks.json'), VSBuffer.fromString('{ \"version\": \"1.0.0\", \"tasks\": [{ \"taskName\": \"myTask\" }'));\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait testObject.reloadLocalUserConfiguration();\n\t\tawait promise;\n\t}));\n\n\ttest('creating workspace settings', () => runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"userValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tawait new Promise<void>((c, e) => {\n\t\t\tconst disposable = testObject.onDidChangeConfiguration(e => {\n\t\t\t\tassert.ok(e.affectsConfiguration('configurationService.folder.testSetting'));\n\t\t\t\tassert.strictEqual(testObject.getValue('configurationService.folder.testSetting'), 'workspaceValue');\n\t\t\t\tdisposable.dispose();\n\t\t\t\tc();\n\t\t\t});\n\t\t\tfileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"workspaceValue\" }')).catch(e);\n\t\t});\n\t}));\n\n\ttest('deleting workspace settings', () => runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"userValue\" }'));\n\t\tconst workspaceSettingsResource = joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json');\n\t\tawait fileService.writeFile(workspaceSettingsResource, VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tconst e = await new Promise<IConfigurationChangeEvent>((c, e) => {\n\t\t\tEvent.once(testObject.onDidChangeConfiguration)(c);\n\t\t\tfileService.del(workspaceSettingsResource).catch(e);\n\t\t});\n\t\tassert.ok(e.affectsConfiguration('configurationService.folder.testSetting'));\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.testSetting'), 'userValue');\n\t}));\n\n\ttest('restricted setting is read from workspace when workspace is trusted', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(true);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.restrictedSetting', { resource: workspaceService.getWorkspace().folders[0].uri }), 'workspaceValue');\n\t\tassert.ok(testObject.restrictedSettings.default.includes('configurationService.folder.restrictedSetting'));\n\t\tassert.strictEqual(testObject.restrictedSettings.userLocal, undefined);\n\t\tassert.strictEqual(testObject.restrictedSettings.userRemote, undefined);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspace, ['configurationService.folder.restrictedSetting']);\n\t\tassert.strictEqual(testObject.restrictedSettings.workspaceFolder?.size, 1);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspaceFolder?.get(workspaceService.getWorkspace().folders[0].uri), ['configurationService.folder.restrictedSetting']);\n\t}));\n\n\ttest('restricted setting is not read from workspace when workspace is changed to trusted', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(true);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\ttestObject.updateWorkspaceTrust(false);\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.restrictedSetting', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t\tassert.ok(testObject.restrictedSettings.default.includes('configurationService.folder.restrictedSetting'));\n\t\tassert.strictEqual(testObject.restrictedSettings.userLocal, undefined);\n\t\tassert.strictEqual(testObject.restrictedSettings.userRemote, undefined);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspace, ['configurationService.folder.restrictedSetting']);\n\t\tassert.strictEqual(testObject.restrictedSettings.workspaceFolder?.size, 1);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspaceFolder?.get(workspaceService.getWorkspace().folders[0].uri), ['configurationService.folder.restrictedSetting']);\n\t}));\n\n\ttest('change event is triggered when workspace is changed to untrusted', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(true);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\ttestObject.updateWorkspaceTrust(false);\n\n\t\tconst event = await promise;\n\t\tassert.ok(event.affectedKeys.has('configurationService.folder.restrictedSetting'));\n\t\tassert.ok(event.affectsConfiguration('configurationService.folder.restrictedSetting'));\n\t}));\n\n\ttest('restricted setting is not read from workspace when workspace is not trusted', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(false);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.restrictedSetting', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t\tassert.ok(testObject.restrictedSettings.default.includes('configurationService.folder.restrictedSetting'));\n\t\tassert.strictEqual(testObject.restrictedSettings.userLocal, undefined);\n\t\tassert.strictEqual(testObject.restrictedSettings.userRemote, undefined);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspace, ['configurationService.folder.restrictedSetting']);\n\t\tassert.strictEqual(testObject.restrictedSettings.workspaceFolder?.size, 1);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspaceFolder?.get(workspaceService.getWorkspace().folders[0].uri), ['configurationService.folder.restrictedSetting']);\n\t}));\n\n\ttest('restricted setting is read when workspace is changed to trusted', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(false);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\ttestObject.updateWorkspaceTrust(true);\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.restrictedSetting', { resource: workspaceService.getWorkspace().folders[0].uri }), 'workspaceValue');\n\t\tassert.ok(testObject.restrictedSettings.default.includes('configurationService.folder.restrictedSetting'));\n\t\tassert.strictEqual(testObject.restrictedSettings.userLocal, undefined);\n\t\tassert.strictEqual(testObject.restrictedSettings.userRemote, undefined);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspace, ['configurationService.folder.restrictedSetting']);\n\t\tassert.strictEqual(testObject.restrictedSettings.workspaceFolder?.size, 1);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspaceFolder?.get(workspaceService.getWorkspace().folders[0].uri), ['configurationService.folder.restrictedSetting']);\n\t}));\n\n\ttest('change event is triggered when workspace is changed to trusted', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(false);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\ttestObject.updateWorkspaceTrust(true);\n\n\t\tconst event = await promise;\n\t\tassert.ok(event.affectedKeys.has('configurationService.folder.restrictedSetting'));\n\t\tassert.ok(event.affectsConfiguration('configurationService.folder.restrictedSetting'));\n\t}));\n\n\ttest('adding an restricted setting triggers change event', () => runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userValue\" }'));\n\t\ttestObject.updateWorkspaceTrust(false);\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeRestrictedSettings);\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceValue\" }'));\n\n\t\treturn promise;\n\t}));\n\n\ttest('remove an unregistered setting', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst key = 'configurationService.folder.unknownSetting';\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.unknownSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.unknownSetting\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tawait testObject.updateValue(key, undefined);\n\n\t\tconst actual = testObject.inspect(key, { resource: workspaceService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t}));\n});\n\nsuite('WorkspaceConfigurationService - Profiles', () => {\n\n\tlet testObject: WorkspaceService, workspaceService: WorkspaceService, fileService: IFileService, environmentService: IBrowserWorkbenchEnvironmentService, userDataProfileService: IUserDataProfileService, instantiationService: TestInstantiationService;\n\tconst configurationRegistry = Registry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration);\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuiteSetup(() => {\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t[APPLY_ALL_PROFILES_SETTING]: {\n\t\t\t\t\t'type': 'array',\n\t\t\t\t\t'default': [],\n\t\t\t\t\t'scope': ConfigurationScope.APPLICATION,\n\t\t\t\t},\n\t\t\t\t'configurationService.profiles.applicationSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t},\n\t\t\t\t'configurationService.profiles.applicationMachineSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION_MACHINE\n\t\t\t\t},\n\t\t\t\t'configurationService.profiles.testSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t},\n\t\t\t\t'configurationService.profiles.applicationSetting2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t},\n\t\t\t\t'configurationService.profiles.testSetting2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t});\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst folder = joinPath(ROOT, 'a');\n\t\tawait fileService.createFolder(folder);\n\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tenvironmentService = TestEnvironmentService;\n\t\tenvironmentService.policyFile = joinPath(folder, 'policies.json');\n\t\tconst remoteAgentService = disposables.add(instantiationService.createInstance(RemoteAgentService));\n\t\tinstantiationService.stub(IRemoteAgentService, remoteAgentService);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = instantiationService.stub(IUserDataProfilesService, disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService)));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\tuserDataProfileService = instantiationService.stub(IUserDataProfileService, disposables.add(new UserDataProfileService(toUserDataProfile('custom', 'custom', joinPath(environmentService.userRoamingDataHome, 'profiles', 'temp'), joinPath(environmentService.cacheHome, 'profilesCache')))));\n\t\tworkspaceService = testObject = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService, userDataProfileService, userDataProfilesService,\n\t\t\tfileService, remoteAgentService, uriIdentityService, new NullLogService(),\n\t\t\tdisposables.add(new FilePolicyService(environmentService.policyFile, fileService, logService))));\n\t\tinstantiationService.stub(IFileService, fileService);\n\t\tinstantiationService.stub(IWorkspaceContextService, testObject);\n\t\tinstantiationService.stub(IConfigurationService, testObject);\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\n\t\tawait fileService.writeFile(userDataProfilesService.defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting2\": \"applicationValue\", \"configurationService.profiles.testSetting2\": \"userValue\" }'));\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting2\": \"profileValue\", \"configurationService.profiles.testSetting2\": \"profileValue\" }'));\n\t\tawait workspaceService.initialize(convertToWorkspacePayload(folder));\n\t\tinstantiationService.stub(IKeybindingEditingService, disposables.add(instantiationService.createInstance(KeybindingsEditingService)));\n\t\tinstantiationService.stub(ITextFileService, disposables.add(instantiationService.createInstance(TestTextFileService)));\n\t\tinstantiationService.stub(ITextModelService, disposables.add(instantiationService.createInstance(TextModelResolverService)));\n\t\tworkspaceService.acquireInstantiationService(instantiationService);\n\t});\n\n\ttest('initialize', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting2'), 'applicationValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting2'), 'profileValue');\n\t}));\n\n\ttest('inspect', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tlet actual = testObject.inspect('something.missing');\n\t\tassert.strictEqual(actual.defaultValue, undefined);\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, undefined);\n\n\t\tactual = testObject.inspect('configurationService.profiles.applicationSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'isSet');\n\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"applicationValue\" }'));\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"profileValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.profiles.applicationSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.applicationValue, 'applicationValue');\n\t\tassert.strictEqual(actual.userValue, 'profileValue');\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'applicationValue');\n\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.testSetting\": \"applicationValue\" }'));\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.testSetting\": \"profileValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.profiles.testSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.applicationValue, undefined);\n\t\tassert.strictEqual(actual.userValue, 'profileValue');\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'profileValue');\n\t}));\n\n\ttest('update application scope setting', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.profiles.applicationSetting', 'applicationValue');\n\n\t\tassert.deepStrictEqual(JSON.parse((await fileService.readFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource)).value.toString()), { 'configurationService.profiles.applicationSetting': 'applicationValue', 'configurationService.profiles.applicationSetting2': 'applicationValue', 'configurationService.profiles.testSetting2': 'userValue' });\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting'), 'applicationValue');\n\t}));\n\n\ttest('update application machine setting', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.profiles.applicationMachineSetting', 'applicationValue');\n\n\t\tassert.deepStrictEqual(JSON.parse((await fileService.readFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource)).value.toString()), { 'configurationService.profiles.applicationMachineSetting': 'applicationValue', 'configurationService.profiles.applicationSetting2': 'applicationValue', 'configurationService.profiles.testSetting2': 'userValue' });\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationMachineSetting'), 'applicationValue');\n\t}));\n\n\ttest('update normal setting', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.profiles.testSetting', 'profileValue');\n\n\t\tassert.deepStrictEqual(JSON.parse((await fileService.readFile(userDataProfileService.currentProfile.settingsResource)).value.toString()), { 'configurationService.profiles.testSetting': 'profileValue', 'configurationService.profiles.testSetting2': 'profileValue', 'configurationService.profiles.applicationSetting2': 'profileValue' });\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting'), 'profileValue');\n\t}));\n\n\ttest('registering normal setting after init', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.testSetting3\": \"defaultProfile\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.profiles.testSetting3': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting3'), 'isSet');\n\t}));\n\n\ttest('registering application scope setting after init', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting3\": \"defaultProfile\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.profiles.applicationSetting3': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting3'), 'defaultProfile');\n\t}));\n\n\ttest('non registering setting should not be read from default profile', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.nonregistered\": \"defaultProfile\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.nonregistered'), undefined);\n\t}));\n\n\ttest('initialize with custom all profiles settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue(APPLY_ALL_PROFILES_SETTING, ['configurationService.profiles.testSetting2'], ConfigurationTarget.USER_LOCAL);\n\n\t\tawait testObject.initialize(convertToWorkspacePayload(joinPath(ROOT, 'a')));\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting2'), 'applicationValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting2'), 'userValue');\n\t}));\n\n\ttest('update all profiles settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait testObject.updateValue(APPLY_ALL_PROFILES_SETTING, ['configurationService.profiles.testSetting2'], ConfigurationTarget.USER_LOCAL);\n\n\t\tconst changeEvent = await promise;\n\t\tassert.deepStrictEqual([...changeEvent.affectedKeys], [APPLY_ALL_PROFILES_SETTING, 'configurationService.profiles.testSetting2']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting2'), 'userValue');\n\t}));\n\n\ttest('setting applied to all profiles is registered later', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.testSetting4\": \"userValue\" }'));\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.testSetting4\": \"profileValue\" }'));\n\t\tawait testObject.updateValue(APPLY_ALL_PROFILES_SETTING, ['configurationService.profiles.testSetting4'], ConfigurationTarget.USER_LOCAL);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting4'), 'userValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.profiles.testSetting4': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting4'), 'userValue');\n\t}));\n\n\ttest('update setting that is applied to all profiles', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue(APPLY_ALL_PROFILES_SETTING, ['configurationService.profiles.testSetting2'], ConfigurationTarget.USER_LOCAL);\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait testObject.updateValue('configurationService.profiles.testSetting2', 'updatedValue', ConfigurationTarget.USER_LOCAL);\n\n\t\tconst changeEvent = await promise;\n\t\tassert.deepStrictEqual([...changeEvent.affectedKeys], ['configurationService.profiles.testSetting2']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting2'), 'updatedValue');\n\t}));\n\n\ttest('test isSettingAppliedToAllProfiles', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tassert.strictEqual(testObject.isSettingAppliedForAllProfiles('configurationService.profiles.applicationSetting2'), true);\n\t\tassert.strictEqual(testObject.isSettingAppliedForAllProfiles('configurationService.profiles.testSetting2'), false);\n\n\t\tawait testObject.updateValue(APPLY_ALL_PROFILES_SETTING, ['configurationService.profiles.testSetting2'], ConfigurationTarget.USER_LOCAL);\n\t\tassert.strictEqual(testObject.isSettingAppliedForAllProfiles('configurationService.profiles.testSetting2'), true);\n\t}));\n\n\ttest('switch to default profile', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"applicationValue\", \"configurationService.profiles.testSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"profileValue\", \"configurationService.profiles.testSetting\": \"profileValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait userDataProfileService.updateCurrentProfile(instantiationService.get(IUserDataProfilesService).defaultProfile);\n\n\t\tconst changeEvent = await promise;\n\t\tassert.deepStrictEqual([...changeEvent.affectedKeys], ['configurationService.profiles.testSetting']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting'), 'applicationValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting'), 'userValue');\n\t}));\n\n\ttest('switch to non default profile', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"applicationValue\", \"configurationService.profiles.testSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"profileValue\", \"configurationService.profiles.testSetting\": \"profileValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst profile = toUserDataProfile('custom2', 'custom2', joinPath(environmentService.userRoamingDataHome, 'profiles', 'custom2'), joinPath(environmentService.cacheHome, 'profilesCache'));\n\t\tawait fileService.writeFile(profile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"profileValue2\", \"configurationService.profiles.testSetting\": \"profileValue2\" }'));\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait userDataProfileService.updateCurrentProfile(profile);\n\n\t\tconst changeEvent = await promise;\n\t\tassert.deepStrictEqual([...changeEvent.affectedKeys], ['configurationService.profiles.testSetting']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting'), 'applicationValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting'), 'profileValue2');\n\t}));\n\n\ttest('switch to non default profile using settings from default profile', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"applicationValue\", \"configurationService.profiles.testSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"profileValue\", \"configurationService.profiles.testSetting\": \"profileValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst profile = toUserDataProfile('custom3', 'custom3', joinPath(environmentService.userRoamingDataHome, 'profiles', 'custom2'), joinPath(environmentService.cacheHome, 'profilesCache'), { useDefaultFlags: { settings: true } }, instantiationService.get(IUserDataProfilesService).defaultProfile);\n\t\tawait fileService.writeFile(profile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"applicationValue2\", \"configurationService.profiles.testSetting\": \"profileValue2\" }'));\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait userDataProfileService.updateCurrentProfile(profile);\n\n\t\tconst changeEvent = await promise;\n\t\tassert.deepStrictEqual([...changeEvent.affectedKeys], ['configurationService.profiles.applicationSetting', 'configurationService.profiles.testSetting']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting'), 'applicationValue2');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting'), 'profileValue2');\n\t}));\n\n\ttest('In non-default profile, changing application settings shall include only application scope settings in the change event', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{}'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"applicationValue\", \"configurationService.profiles.testSetting\": \"applicationValue\" }'));\n\n\t\tconst changeEvent = await promise;\n\t\tassert.deepStrictEqual([...changeEvent.affectedKeys], ['configurationService.profiles.applicationSetting']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting'), 'applicationValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting'), 'isSet');\n\t}));\n\n\ttest('switch to default profile with settings applied to all profiles', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue(APPLY_ALL_PROFILES_SETTING, ['configurationService.profiles.testSetting2'], ConfigurationTarget.USER_LOCAL);\n\n\t\tawait userDataProfileService.updateCurrentProfile(instantiationService.get(IUserDataProfilesService).defaultProfile);\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting2'), 'applicationValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting2'), 'userValue');\n\t}));\n\n\ttest('switch to non default profile with settings applied to all profiles', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue(APPLY_ALL_PROFILES_SETTING, ['configurationService.profiles.testSetting2'], ConfigurationTarget.USER_LOCAL);\n\n\t\tconst profile = toUserDataProfile('custom2', 'custom2', joinPath(environmentService.userRoamingDataHome, 'profiles', 'custom2'), joinPath(environmentService.cacheHome, 'profilesCache'));\n\t\tawait fileService.writeFile(profile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.testSetting\": \"profileValue\", \"configurationService.profiles.testSetting2\": \"profileValue2\" }'));\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait userDataProfileService.updateCurrentProfile(profile);\n\n\t\tconst changeEvent = await promise;\n\t\tassert.deepStrictEqual([...changeEvent.affectedKeys], ['configurationService.profiles.testSetting']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting2'), 'applicationValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting2'), 'userValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting'), 'profileValue');\n\t}));\n\n\ttest('switch to non default from default profile with settings applied to all profiles', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue(APPLY_ALL_PROFILES_SETTING, ['configurationService.profiles.testSetting2'], ConfigurationTarget.USER_LOCAL);\n\t\tawait userDataProfileService.updateCurrentProfile(instantiationService.get(IUserDataProfilesService).defaultProfile);\n\n\t\tconst profile = toUserDataProfile('custom2', 'custom2', joinPath(environmentService.userRoamingDataHome, 'profiles', 'custom2'), joinPath(environmentService.cacheHome, 'profilesCache'));\n\t\tawait fileService.writeFile(profile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.testSetting\": \"profileValue\", \"configurationService.profiles.testSetting2\": \"profileValue2\" }'));\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait userDataProfileService.updateCurrentProfile(profile);\n\n\t\tconst changeEvent = await promise;\n\t\tassert.deepStrictEqual([...changeEvent.affectedKeys], ['configurationService.profiles.testSetting']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting2'), 'applicationValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting2'), 'userValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting'), 'profileValue');\n\t}));\n\n});\n\nsuite('WorkspaceConfigurationService-Multiroot', () => {\n\n\tlet workspaceContextService: IWorkspaceContextService, jsonEditingServce: IJSONEditingService, testObject: WorkspaceService, fileService: IFileService, environmentService: BrowserWorkbenchEnvironmentService, userDataProfileService: IUserDataProfileService;\n\tconst configurationRegistry = Registry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration);\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuiteSetup(() => {\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.testSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet'\n\t\t\t\t},\n\t\t\t\t'configurationService.workspace.applicationSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t},\n\t\t\t\t'configurationService.workspace.machineSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE\n\t\t\t\t},\n\t\t\t\t'configurationService.workspace.machineOverridableSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE_OVERRIDABLE\n\t\t\t\t},\n\t\t\t\t'configurationService.workspace.testResourceSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.RESOURCE\n\t\t\t\t},\n\t\t\t\t'configurationService.workspace.testLanguageSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.LANGUAGE_OVERRIDABLE\n\t\t\t\t},\n\t\t\t\t'configurationService.workspace.testRestrictedSetting1': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\trestricted: true,\n\t\t\t\t\tscope: ConfigurationScope.RESOURCE\n\t\t\t\t},\n\t\t\t\t'configurationService.workspace.testRestrictedSetting2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\trestricted: true,\n\t\t\t\t\tscope: ConfigurationScope.RESOURCE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst appSettingsHome = joinPath(ROOT, 'user');\n\t\tconst folderA = joinPath(ROOT, 'a');\n\t\tconst folderB = joinPath(ROOT, 'b');\n\t\tconst configResource = joinPath(ROOT, 'vsctests.code-workspace');\n\t\tconst workspace = { folders: [{ path: folderA.path }, { path: folderB.path }] };\n\n\t\tawait fileService.createFolder(appSettingsHome);\n\t\tawait fileService.createFolder(folderA);\n\t\tawait fileService.createFolder(folderB);\n\t\tawait fileService.writeFile(configResource, VSBuffer.fromString(JSON.stringify(workspace, null, '\\t')));\n\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tenvironmentService = TestEnvironmentService;\n\t\tconst remoteAgentService = disposables.add(instantiationService.createInstance(RemoteAgentService));\n\t\tinstantiationService.stub(IRemoteAgentService, remoteAgentService);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = instantiationService.stub(IUserDataProfilesService, disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService)));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\tuserDataProfileService = instantiationService.stub(IUserDataProfileService, disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile)));\n\t\tconst workspaceService = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService, userDataProfileService, userDataProfilesService,\n\t\t\tfileService, remoteAgentService, uriIdentityService, new NullLogService(), new NullPolicyService()));\n\n\t\tinstantiationService.stub(IFileService, fileService);\n\t\tinstantiationService.stub(IWorkspaceContextService, workspaceService);\n\t\tinstantiationService.stub(IConfigurationService, workspaceService);\n\t\tinstantiationService.stub(IWorkbenchEnvironmentService, environmentService);\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\n\t\tawait workspaceService.initialize(getWorkspaceIdentifier(configResource));\n\t\tinstantiationService.stub(IKeybindingEditingService, disposables.add(instantiationService.createInstance(KeybindingsEditingService)));\n\t\tinstantiationService.stub(ITextFileService, disposables.add(instantiationService.createInstance(TestTextFileService)));\n\t\tinstantiationService.stub(ITextModelService, disposables.add(instantiationService.createInstance(TextModelResolverService)));\n\t\tjsonEditingServce = instantiationService.createInstance(JSONEditingService);\n\t\tinstantiationService.stub(IJSONEditingService, jsonEditingServce);\n\t\tworkspaceService.acquireInstantiationService(instantiationService);\n\n\t\tworkspaceContextService = workspaceService;\n\t\ttestObject = workspaceService;\n\t});\n\n\ttest('application settings are not read from workspace', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.applicationSetting\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write(workspaceContextService.getWorkspace().configuration!, [{ path: ['settings'], value: { 'configurationService.workspace.applicationSetting': 'workspaceValue' } }], true);\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.applicationSetting'), 'userValue');\n\t}));\n\n\ttest('application settings are not read from workspace when folder is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.applicationSetting\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write(workspaceContextService.getWorkspace().configuration!, [{ path: ['settings'], value: { 'configurationService.workspace.applicationSetting': 'workspaceValue' } }], true);\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.applicationSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('machine settings are not read from workspace', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.machineSetting\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write(workspaceContextService.getWorkspace().configuration!, [{ path: ['settings'], value: { 'configurationService.workspace.machineSetting': 'workspaceValue' } }], true);\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting'), 'userValue');\n\t}));\n\n\ttest('machine settings are not read from workspace when folder is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.machineSetting\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write(workspaceContextService.getWorkspace().configuration!, [{ path: ['settings'], value: { 'configurationService.workspace.machineSetting': 'workspaceValue' } }], true);\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('get application scope settings are not loaded after defaults are registered', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.newSetting\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write(workspaceContextService.getWorkspace().configuration!, [{ path: ['settings'], value: { 'configurationService.workspace.newSetting': 'workspaceValue' } }], true);\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newSetting'), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.newSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newSetting'), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newSetting'), 'userValue');\n\t}));\n\n\ttest('get application scope settings are not loaded after defaults are registered when workspace folder is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.newSetting-2\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write(workspaceContextService.getWorkspace().configuration!, [{ path: ['settings'], value: { 'configurationService.workspace.newSetting-2': 'workspaceValue' } }], true);\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newSetting-2', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.newSetting-2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newSetting-2', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newSetting-2', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('workspace settings override user settings after defaults are registered for machine overridable settings ', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.newMachineOverridableSetting\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write(workspaceContextService.getWorkspace().configuration!, [{ path: ['settings'], value: { 'configurationService.workspace.newMachineOverridableSetting': 'workspaceValue' } }], true);\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newMachineOverridableSetting'), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.newMachineOverridableSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE_OVERRIDABLE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newMachineOverridableSetting'), 'workspaceValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newMachineOverridableSetting'), 'workspaceValue');\n\n\t}));\n\n\ttest('application settings are not read from workspace folder', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.applicationSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.applicationSetting\": \"workspaceFolderValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.applicationSetting'), 'userValue');\n\t}));\n\n\ttest('application settings are not read from workspace folder when workspace folder is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.applicationSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.applicationSetting\": \"workspaceFolderValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.applicationSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('machine settings are not read from workspace folder', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.machineSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.machineSetting\": \"workspaceFolderValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.machineSetting'), 'userValue');\n\t}));\n\n\ttest('machine settings are not read from workspace folder when workspace folder is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.machineSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.machineSetting\": \"workspaceFolderValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.machineSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('application settings are not read from workspace folder after defaults are registered', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.testNewApplicationSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testNewApplicationSetting\": \"workspaceFolderValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewApplicationSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'workspaceFolderValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.testNewApplicationSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewApplicationSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewApplicationSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('machine settings are not read from workspace folder after defaults are registered', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.testNewMachineSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testNewMachineSetting\": \"workspaceFolderValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewMachineSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'workspaceFolderValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.testNewMachineSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewMachineSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewMachineSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('resource setting in folder is read after it is registered later', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testNewResourceSetting2\": \"workspaceFolderValue\" }'));\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.testNewResourceSetting2': 'workspaceValue' } }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.testNewResourceSetting2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.RESOURCE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewResourceSetting2', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'workspaceFolderValue');\n\t}));\n\n\ttest('resource language setting in folder is read after it is registered later', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testNewResourceLanguageSetting2\": \"workspaceFolderValue\" }'));\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.testNewResourceLanguageSetting2': 'workspaceValue' } }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.testNewResourceLanguageSetting2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.LANGUAGE_OVERRIDABLE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewResourceLanguageSetting2', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'workspaceFolderValue');\n\t}));\n\n\ttest('machine overridable setting in folder is read after it is registered later', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testNewMachineOverridableSetting2\": \"workspaceFolderValue\" }'));\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.testNewMachineOverridableSetting2': 'workspaceValue' } }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.testNewMachineOverridableSetting2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE_OVERRIDABLE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewMachineOverridableSetting2', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'workspaceFolderValue');\n\t}));\n\n\ttest('inspect', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tlet actual = testObject.inspect('something.missing');\n\t\tassert.strictEqual(actual.defaultValue, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, undefined);\n\n\t\tactual = testObject.inspect('configurationService.workspace.testResourceSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'isSet');\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.testResourceSetting\": \"userValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.workspace.testResourceSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.userValue, 'userValue');\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'userValue');\n\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.testResourceSetting': 'workspaceValue' } }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.workspace.testResourceSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.userValue, 'userValue');\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'workspaceValue');\n\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testResourceSetting\": \"workspaceFolderValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.workspace.testResourceSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.userValue, 'userValue');\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, 'workspaceFolderValue');\n\t\tassert.strictEqual(actual.value, 'workspaceFolderValue');\n\t}));\n\n\ttest('inspect restricted settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(false);\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.testRestrictedSetting1': 'workspaceRestrictedValue' } }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tlet actual = testObject.inspect('configurationService.workspace.testRestrictedSetting1', { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'isSet');\n\n\t\ttestObject.updateWorkspaceTrust(true);\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.workspace.testRestrictedSetting1', { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'workspaceRestrictedValue');\n\n\t\ttestObject.updateWorkspaceTrust(false);\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testRestrictedSetting1\": \"workspaceFolderRestrictedValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.workspace.testRestrictedSetting1', { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, 'workspaceFolderRestrictedValue');\n\t\tassert.strictEqual(actual.value, 'isSet');\n\n\t\ttestObject.updateWorkspaceTrust(true);\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.workspace.testRestrictedSetting1', { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, 'workspaceFolderRestrictedValue');\n\t\tassert.strictEqual(actual.value, 'workspaceFolderRestrictedValue');\n\t}));\n\n\ttest('inspect restricted settings after change', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(false);\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.testRestrictedSetting1\": \"userRestrictedValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tlet promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.testRestrictedSetting1': 'workspaceRestrictedValue' } }], true);\n\t\tlet event = await promise;\n\n\t\tlet actual = testObject.inspect('configurationService.workspace.testRestrictedSetting1', { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'userRestrictedValue');\n\t\tassert.strictEqual(event.affectsConfiguration('configurationService.workspace.testRestrictedSetting1'), true);\n\n\t\tpromise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testRestrictedSetting1\": \"workspaceFolderRestrictedValue\" }'));\n\t\tevent = await promise;\n\n\t\tactual = testObject.inspect('configurationService.workspace.testRestrictedSetting1', { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, 'workspaceFolderRestrictedValue');\n\t\tassert.strictEqual(actual.value, 'userRestrictedValue');\n\t\tassert.strictEqual(event.affectsConfiguration('configurationService.workspace.testRestrictedSetting1'), true);\n\t}));\n\n\ttest('get launch configuration', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst expectedLaunchConfiguration = {\n\t\t\t'version': '0.1.0',\n\t\t\t'configurations': [\n\t\t\t\t{\n\t\t\t\t\t'type': 'node',\n\t\t\t\t\t'request': 'launch',\n\t\t\t\t\t'name': 'Gulp Build',\n\t\t\t\t\t'program': '${workspaceFolder}/node_modules/gulp/bin/gulp.js',\n\t\t\t\t\t'stopOnEntry': true,\n\t\t\t\t\t'args': [\n\t\t\t\t\t\t'watch-extension:json-client'\n\t\t\t\t\t],\n\t\t\t\t\t'cwd': '${workspaceFolder}'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['launch'], value: expectedLaunchConfiguration }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tconst actual = testObject.getValue('launch');\n\t\tassert.deepStrictEqual(actual, expectedLaunchConfiguration);\n\t}));\n\n\ttest('inspect launch configuration', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst expectedLaunchConfiguration = {\n\t\t\t'version': '0.1.0',\n\t\t\t'configurations': [\n\t\t\t\t{\n\t\t\t\t\t'type': 'node',\n\t\t\t\t\t'request': 'launch',\n\t\t\t\t\t'name': 'Gulp Build',\n\t\t\t\t\t'program': '${workspaceFolder}/node_modules/gulp/bin/gulp.js',\n\t\t\t\t\t'stopOnEntry': true,\n\t\t\t\t\t'args': [\n\t\t\t\t\t\t'watch-extension:json-client'\n\t\t\t\t\t],\n\t\t\t\t\t'cwd': '${workspaceFolder}'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['launch'], value: expectedLaunchConfiguration }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tconst actual = testObject.inspect('launch').workspaceValue;\n\t\tassert.deepStrictEqual(actual, expectedLaunchConfiguration);\n\t}));\n\n\n\ttest('get tasks configuration', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst expectedTasksConfiguration = {\n\t\t\t'version': '2.0.0',\n\t\t\t'tasks': [\n\t\t\t\t{\n\t\t\t\t\t'label': 'Run Dev',\n\t\t\t\t\t'type': 'shell',\n\t\t\t\t\t'command': './scripts/code.sh',\n\t\t\t\t\t'windows': {\n\t\t\t\t\t\t'command': '.\\\\scripts\\\\code.bat'\n\t\t\t\t\t},\n\t\t\t\t\t'problemMatcher': []\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['tasks'], value: expectedTasksConfiguration }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tconst actual = testObject.getValue(TasksSchemaProperties.Tasks);\n\t\tassert.deepStrictEqual(actual, expectedTasksConfiguration);\n\t}));\n\n\ttest('inspect tasks configuration', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst expectedTasksConfiguration = {\n\t\t\t'version': '2.0.0',\n\t\t\t'tasks': [\n\t\t\t\t{\n\t\t\t\t\t'label': 'Run Dev',\n\t\t\t\t\t'type': 'shell',\n\t\t\t\t\t'command': './scripts/code.sh',\n\t\t\t\t\t'windows': {\n\t\t\t\t\t\t'command': '.\\\\scripts\\\\code.bat'\n\t\t\t\t\t},\n\t\t\t\t\t'problemMatcher': []\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t\tawait jsonEditingServce.write(workspaceContextService.getWorkspace().configuration!, [{ path: ['tasks'], value: expectedTasksConfiguration }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tconst actual = testObject.inspect('tasks').workspaceValue;\n\t\tassert.deepStrictEqual(actual, expectedTasksConfiguration);\n\t}));\n\n\ttest('update user configuration', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.workspace.testSetting', 'userValue', ConfigurationTarget.USER);\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testSetting'), 'userValue');\n\t}));\n\n\ttest('update user configuration should trigger change event before promise is resolve', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\tawait testObject.updateValue('configurationService.workspace.testSetting', 'userValue', ConfigurationTarget.USER);\n\t\tassert.ok(target.called);\n\t}));\n\n\ttest('update workspace configuration', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.workspace.testSetting', 'workspaceValue', ConfigurationTarget.WORKSPACE);\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testSetting'), 'workspaceValue');\n\t}));\n\n\ttest('update workspace configuration should trigger change event before promise is resolve', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\tawait testObject.updateValue('configurationService.workspace.testSetting', 'workspaceValue', ConfigurationTarget.WORKSPACE);\n\t\tassert.ok(target.called);\n\t}));\n\n\ttest('update application setting into workspace configuration in a workspace is not supported', () => {\n\t\treturn testObject.updateValue('configurationService.workspace.applicationSetting', 'workspaceValue', {}, ConfigurationTarget.WORKSPACE, { donotNotifyError: true })\n\t\t\t.then(() => assert.fail('Should not be supported'), (e) => assert.strictEqual(e.code, ConfigurationEditingErrorCode.ERROR_INVALID_WORKSPACE_CONFIGURATION_APPLICATION));\n\t});\n\n\ttest('update machine setting into workspace configuration in a workspace is not supported', () => {\n\t\treturn testObject.updateValue('configurationService.workspace.machineSetting', 'workspaceValue', {}, ConfigurationTarget.WORKSPACE, { donotNotifyError: true })\n\t\t\t.then(() => assert.fail('Should not be supported'), (e) => assert.strictEqual(e.code, ConfigurationEditingErrorCode.ERROR_INVALID_WORKSPACE_CONFIGURATION_MACHINE));\n\t});\n\n\ttest('update workspace folder configuration', () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\treturn testObject.updateValue('configurationService.workspace.testResourceSetting', 'workspaceFolderValue', { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER)\n\t\t\t.then(() => assert.strictEqual(testObject.getValue('configurationService.workspace.testResourceSetting', { resource: workspace.folders[0].uri }), 'workspaceFolderValue'));\n\t});\n\n\ttest('update resource language configuration in workspace folder', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\tawait testObject.updateValue('configurationService.workspace.testLanguageSetting', 'workspaceFolderValue', { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testLanguageSetting', { resource: workspace.folders[0].uri }), 'workspaceFolderValue');\n\t}));\n\n\ttest('update workspace folder configuration should trigger change event before promise is resolve', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\tawait testObject.updateValue('configurationService.workspace.testResourceSetting', 'workspaceFolderValue', { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tassert.ok(target.called);\n\t}));\n\n\ttest('update workspace folder configuration second time should trigger change event before promise is resolve', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\tawait testObject.updateValue('configurationService.workspace.testResourceSetting', 'workspaceFolderValue', { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\tawait testObject.updateValue('configurationService.workspace.testResourceSetting', 'workspaceFolderValue2', { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tassert.ok(target.called);\n\t}));\n\n\ttest('update machine overridable setting in folder', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\tawait testObject.updateValue('configurationService.workspace.machineOverridableSetting', 'workspaceFolderValue', { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.machineOverridableSetting', { resource: workspace.folders[0].uri }), 'workspaceFolderValue');\n\t}));\n\n\ttest('update memory configuration', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.workspace.testSetting', 'memoryValue', ConfigurationTarget.MEMORY);\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testSetting'), 'memoryValue');\n\t}));\n\n\ttest('update memory configuration should trigger change event before promise is resolve', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\tawait testObject.updateValue('configurationService.workspace.testSetting', 'memoryValue', ConfigurationTarget.MEMORY);\n\t\tassert.ok(target.called);\n\t}));\n\n\ttest('remove setting from all targets', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\tconst key = 'configurationService.workspace.testResourceSetting';\n\t\tawait testObject.updateValue(key, 'workspaceFolderValue', { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tawait testObject.updateValue(key, 'workspaceValue', ConfigurationTarget.WORKSPACE);\n\t\tawait testObject.updateValue(key, 'userValue', ConfigurationTarget.USER);\n\n\t\tawait testObject.updateValue(key, undefined, { resource: workspace.folders[0].uri });\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst actual = testObject.inspect(key, { resource: workspace.folders[0].uri });\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t}));\n\n\ttest('update tasks configuration in a folder', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\tawait testObject.updateValue('tasks', { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] }, { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tassert.deepStrictEqual(testObject.getValue(TasksSchemaProperties.Tasks, { resource: workspace.folders[0].uri }), { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] });\n\t}));\n\n\ttest('update launch configuration in a workspace', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\tawait testObject.updateValue('launch', { 'version': '1.0.0', configurations: [{ 'name': 'myLaunch' }] }, { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE, { donotNotifyError: true });\n\t\tassert.deepStrictEqual(testObject.getValue('launch'), { 'version': '1.0.0', configurations: [{ 'name': 'myLaunch' }] });\n\t}));\n\n\ttest('update tasks configuration in a workspace', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\tconst tasks = { 'version': '2.0.0', tasks: [{ 'label': 'myTask' }] };\n\t\tawait testObject.updateValue('tasks', tasks, { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE, { donotNotifyError: true });\n\t\tassert.deepStrictEqual(testObject.getValue(TasksSchemaProperties.Tasks), tasks);\n\t}));\n\n\ttest('configuration of newly added folder is available on configuration change event', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspaceService = <WorkspaceService>testObject;\n\t\tconst uri = workspaceService.getWorkspace().folders[1].uri;\n\t\tawait workspaceService.removeFolders([uri]);\n\t\tawait fileService.writeFile(joinPath(uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testResourceSetting\": \"workspaceFolderValue\" }'));\n\n\t\treturn new Promise<void>((c, e) => {\n\t\t\tdisposables.add(testObject.onDidChangeConfiguration(() => {\n\t\t\t\ttry {\n\t\t\t\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testResourceSetting', { resource: uri }), 'workspaceFolderValue');\n\t\t\t\t\tc();\n\t\t\t\t} catch (error) {\n\t\t\t\t\te(error);\n\t\t\t\t}\n\t\t\t}));\n\t\t\tworkspaceService.addFolders([{ uri }]);\n\t\t});\n\t}));\n\n\ttest('restricted setting is read from workspace folders when workspace is trusted', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(true);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.testRestrictedSetting1\": \"userValue\", \"configurationService.workspace.testRestrictedSetting2\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.testRestrictedSetting1': 'workspaceValue' } }], true);\n\t\tawait fileService.writeFile(joinPath(testObject.getWorkspace().folders[1].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testRestrictedSetting2\": \"workspaceFolder2Value\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testRestrictedSetting1', { resource: testObject.getWorkspace().folders[0].uri }), 'workspaceValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testRestrictedSetting2', { resource: testObject.getWorkspace().folders[1].uri }), 'workspaceFolder2Value');\n\t\tassert.ok(testObject.restrictedSettings.default.includes('configurationService.workspace.testRestrictedSetting1'));\n\t\tassert.ok(testObject.restrictedSettings.default.includes('configurationService.workspace.testRestrictedSetting2'));\n\t\tassert.strictEqual(testObject.restrictedSettings.userLocal, undefined);\n\t\tassert.strictEqual(testObject.restrictedSettings.userRemote, undefined);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspace, ['configurationService.workspace.testRestrictedSetting1']);\n\t\tassert.strictEqual(testObject.restrictedSettings.workspaceFolder?.size, 1);\n\t\tassert.strictEqual(testObject.restrictedSettings.workspaceFolder?.get(testObject.getWorkspace().folders[0].uri), undefined);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspaceFolder?.get(testObject.getWorkspace().folders[1].uri), ['configurationService.workspace.testRestrictedSetting2']);\n\t}));\n\n\ttest('restricted setting is not read from workspace when workspace is not trusted', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(false);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.testRestrictedSetting1\": \"userValue\", \"configurationService.workspace.testRestrictedSetting2\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.testRestrictedSetting1': 'workspaceValue' } }], true);\n\t\tawait fileService.writeFile(joinPath(testObject.getWorkspace().folders[1].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testRestrictedSetting2\": \"workspaceFolder2Value\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testRestrictedSetting1', { resource: testObject.getWorkspace().folders[0].uri }), 'userValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testRestrictedSetting2', { resource: testObject.getWorkspace().folders[1].uri }), 'userValue');\n\t\tassert.ok(testObject.restrictedSettings.default.includes('configurationService.workspace.testRestrictedSetting1'));\n\t\tassert.ok(testObject.restrictedSettings.default.includes('configurationService.workspace.testRestrictedSetting2'));\n\t\tassert.strictEqual(testObject.restrictedSettings.userLocal, undefined);\n\t\tassert.strictEqual(testObject.restrictedSettings.userRemote, undefined);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspace, ['configurationService.workspace.testRestrictedSetting1']);\n\t\tassert.strictEqual(testObject.restrictedSettings.workspaceFolder?.size, 1);\n\t\tassert.strictEqual(testObject.restrictedSettings.workspaceFolder?.get(testObject.getWorkspace().folders[0].uri), undefined);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspaceFolder?.get(testObject.getWorkspace().folders[1].uri), ['configurationService.workspace.testRestrictedSetting2']);\n\t}));\n\n\ttest('remove an unregistered setting', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst key = 'configurationService.workspace.unknownSetting';\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.unknownSetting\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.unknownSetting': 'workspaceValue' } }], true);\n\t\tawait fileService.writeFile(joinPath(workspaceContextService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.unknownSetting\": \"workspaceFolderValue1\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceContextService.getWorkspace().folders[1].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.unknownSetting\": \"workspaceFolderValue2\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tawait testObject.updateValue(key, undefined, { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\n\t\tlet actual = testObject.inspect(key, { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\n\t\tawait testObject.updateValue(key, undefined, { resource: workspaceContextService.getWorkspace().folders[1].uri });\n\t\tactual = testObject.inspect(key, { resource: workspaceContextService.getWorkspace().folders[1].uri });\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t}));\n\n});\n\nsuite('WorkspaceConfigurationService - Remote Folder', () => {\n\n\tlet testObject: WorkspaceService, folder: URI,\n\t\tmachineSettingsResource: URI, remoteSettingsResource: URI, fileSystemProvider: InMemoryFileSystemProvider, resolveRemoteEnvironment: () => void,\n\t\tinstantiationService: TestInstantiationService, fileService: IFileService, environmentService: BrowserWorkbenchEnvironmentService, userDataProfileService: IUserDataProfileService;\n\tconst remoteAuthority = 'configuraiton-tests';\n\tconst configurationRegistry = Registry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration);\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuiteSetup(() => {\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.remote.applicationSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t},\n\t\t\t\t'configurationService.remote.machineSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE\n\t\t\t\t},\n\t\t\t\t'configurationService.remote.applicationMachineSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION_MACHINE\n\t\t\t\t},\n\t\t\t\t'configurationService.remote.machineOverridableSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE_OVERRIDABLE\n\t\t\t\t},\n\t\t\t\t'configurationService.remote.testSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.RESOURCE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tfileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst appSettingsHome = joinPath(ROOT, 'user');\n\t\tfolder = joinPath(ROOT, 'a');\n\t\tawait fileService.createFolder(folder);\n\t\tawait fileService.createFolder(appSettingsHome);\n\t\tmachineSettingsResource = joinPath(ROOT, 'machine-settings.json');\n\t\tremoteSettingsResource = machineSettingsResource.with({ scheme: Schemas.vscodeRemote, authority: remoteAuthority });\n\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tenvironmentService = TestEnvironmentService;\n\t\tconst remoteEnvironmentPromise = new Promise<Partial<IRemoteAgentEnvironment>>(c => resolveRemoteEnvironment = () => c({ settingsPath: remoteSettingsResource }));\n\t\tconst remoteAgentService = instantiationService.stub(IRemoteAgentService, <Partial<IRemoteAgentService>>{ getEnvironment: () => remoteEnvironmentPromise });\n\t\tconst configurationCache: IConfigurationCache = { read: () => Promise.resolve(''), write: () => Promise.resolve(), remove: () => Promise.resolve(), needsCaching: () => false };\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = instantiationService.stub(IUserDataProfilesService, disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService)));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\tuserDataProfileService = instantiationService.stub(IUserDataProfileService, disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile)));\n\t\ttestObject = disposables.add(new WorkspaceService({ configurationCache, remoteAuthority }, environmentService, userDataProfileService, userDataProfilesService, fileService, remoteAgentService, uriIdentityService, new NullLogService(), new NullPolicyService()));\n\t\tinstantiationService.stub(IWorkspaceContextService, testObject);\n\t\tinstantiationService.stub(IConfigurationService, testObject);\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\t\tinstantiationService.stub(IFileService, fileService);\n\t});\n\n\tasync function initialize(): Promise<void> {\n\t\tawait testObject.initialize(convertToWorkspacePayload(folder));\n\t\tinstantiationService.stub(ITextFileService, disposables.add(instantiationService.createInstance(TestTextFileService)));\n\t\tinstantiationService.stub(ITextModelService, <ITextModelService>disposables.add(instantiationService.createInstance(TextModelResolverService)));\n\t\tinstantiationService.stub(IJSONEditingService, instantiationService.createInstance(JSONEditingService));\n\t\ttestObject.acquireInstantiationService(instantiationService);\n\t}\n\n\tfunction registerRemoteFileSystemProvider(): void {\n\t\tdisposables.add(instantiationService.get(IFileService).registerProvider(Schemas.vscodeRemote, new RemoteFileSystemProvider(fileSystemProvider, remoteAuthority)));\n\t}\n\n\tfunction registerRemoteFileSystemProviderOnActivation(): void {\n\t\tconst disposable = disposables.add(instantiationService.get(IFileService).onWillActivateFileSystemProvider(e => {\n\t\t\tif (e.scheme === Schemas.vscodeRemote) {\n\t\t\t\tdisposable.dispose();\n\t\t\t\te.join(Promise.resolve().then(() => registerRemoteFileSystemProvider()));\n\t\t\t}\n\t\t}));\n\t}\n\n\ttest('remote machine settings override globals', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(machineSettingsResource, VSBuffer.fromString('{ \"configurationService.remote.machineSetting\": \"remoteValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.machineSetting'), 'remoteValue');\n\t}));\n\n\ttest('remote machine settings override globals after remote provider is registered on activation', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(machineSettingsResource, VSBuffer.fromString('{ \"configurationService.remote.machineSetting\": \"remoteValue\" }'));\n\t\tresolveRemoteEnvironment();\n\t\tregisterRemoteFileSystemProviderOnActivation();\n\t\tawait initialize();\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.machineSetting'), 'remoteValue');\n\t}));\n\n\ttest('remote machine settings override globals after remote environment is resolved', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(machineSettingsResource, VSBuffer.fromString('{ \"configurationService.remote.machineSetting\": \"remoteValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tawait initialize();\n\t\tconst promise = new Promise<void>((c, e) => {\n\t\t\tdisposables.add(testObject.onDidChangeConfiguration(event => {\n\t\t\t\ttry {\n\t\t\t\t\tassert.strictEqual(event.source, ConfigurationTarget.USER);\n\t\t\t\t\tassert.deepStrictEqual([...event.affectedKeys], ['configurationService.remote.machineSetting']);\n\t\t\t\t\tassert.strictEqual(testObject.getValue('configurationService.remote.machineSetting'), 'remoteValue');\n\t\t\t\t\tc();\n\t\t\t\t} catch (error) {\n\t\t\t\t\te(error);\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\t\tresolveRemoteEnvironment();\n\t\treturn promise;\n\t}));\n\n\ttest('remote settings override globals after remote provider is registered on activation and remote environment is resolved', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(machineSettingsResource, VSBuffer.fromString('{ \"configurationService.remote.machineSetting\": \"remoteValue\" }'));\n\t\tregisterRemoteFileSystemProviderOnActivation();\n\t\tawait initialize();\n\t\tconst promise = new Promise<void>((c, e) => {\n\t\t\tdisposables.add(testObject.onDidChangeConfiguration(event => {\n\t\t\t\ttry {\n\t\t\t\t\tassert.strictEqual(event.source, ConfigurationTarget.USER);\n\t\t\t\t\tassert.deepStrictEqual([...event.affectedKeys], ['configurationService.remote.machineSetting']);\n\t\t\t\t\tassert.strictEqual(testObject.getValue('configurationService.remote.machineSetting'), 'remoteValue');\n\t\t\t\t\tc();\n\t\t\t\t} catch (error) {\n\t\t\t\t\te(error);\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\t\tresolveRemoteEnvironment();\n\t\treturn promise;\n\t}));\n\n\ttest('machine settings in local user settings does not override defaults', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.remote.machineSetting\": \"globalValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.machineSetting'), 'isSet');\n\t}));\n\n\ttest('remote application machine settings override globals', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(machineSettingsResource, VSBuffer.fromString('{ \"configurationService.remote.applicationMachineSetting\": \"remoteValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.applicationMachineSetting'), 'remoteValue');\n\t}));\n\n\ttest('remote application machine settings override globals after remote provider is registered on activation', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(machineSettingsResource, VSBuffer.fromString('{ \"configurationService.remote.applicationMachineSetting\": \"remoteValue\" }'));\n\t\tresolveRemoteEnvironment();\n\t\tregisterRemoteFileSystemProviderOnActivation();\n\t\tawait initialize();\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.applicationMachineSetting'), 'remoteValue');\n\t}));\n\n\ttest('remote application machine settings override globals after remote environment is resolved', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(machineSettingsResource, VSBuffer.fromString('{ \"configurationService.remote.applicationMachineSetting\": \"remoteValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tawait initialize();\n\t\tconst promise = new Promise<void>((c, e) => {\n\t\t\tdisposables.add(testObject.onDidChangeConfiguration(event => {\n\t\t\t\ttry {\n\t\t\t\t\tassert.strictEqual(event.source, ConfigurationTarget.USER);\n\t\t\t\t\tassert.deepStrictEqual([...event.affectedKeys], ['configurationService.remote.applicationMachineSetting']);\n\t\t\t\t\tassert.strictEqual(testObject.getValue('configurationService.remote.applicationMachineSetting'), 'remoteValue');\n\t\t\t\t\tc();\n\t\t\t\t} catch (error) {\n\t\t\t\t\te(error);\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\t\tresolveRemoteEnvironment();\n\t\treturn promise;\n\t}));\n\n\ttest('remote application machine settings override globals after remote provider is registered on activation and remote environment is resolved', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(machineSettingsResource, VSBuffer.fromString('{ \"configurationService.remote.applicationMachineSetting\": \"remoteValue\" }'));\n\t\tregisterRemoteFileSystemProviderOnActivation();\n\t\tawait initialize();\n\t\tconst promise = new Promise<void>((c, e) => {\n\t\t\tdisposables.add(testObject.onDidChangeConfiguration(event => {\n\t\t\t\ttry {\n\t\t\t\t\tassert.strictEqual(event.source, ConfigurationTarget.USER);\n\t\t\t\t\tassert.deepStrictEqual([...event.affectedKeys], ['configurationService.remote.applicationMachineSetting']);\n\t\t\t\t\tassert.strictEqual(testObject.getValue('configurationService.remote.applicationMachineSetting'), 'remoteValue');\n\t\t\t\t\tc();\n\t\t\t\t} catch (error) {\n\t\t\t\t\te(error);\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\t\tresolveRemoteEnvironment();\n\t\treturn promise;\n\t}));\n\n\ttest('application machine settings in local user settings does not override defaults', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.remote.applicationMachineSetting\": \"globalValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.applicationMachineSetting'), 'isSet');\n\t}));\n\n\ttest('machine overridable settings in local user settings does not override defaults', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.remote.machineOverridableSetting\": \"globalValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.machineOverridableSetting'), 'isSet');\n\t}));\n\n\ttest('non machine setting is written in local settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tawait testObject.updateValue('configurationService.remote.applicationSetting', 'applicationValue');\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.inspect('configurationService.remote.applicationSetting').userLocalValue, 'applicationValue');\n\t}));\n\n\ttest('machine setting is written in remote settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tawait testObject.updateValue('configurationService.remote.machineSetting', 'machineValue');\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.inspect('configurationService.remote.machineSetting').userRemoteValue, 'machineValue');\n\t}));\n\n\ttest('application machine setting is written in remote settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tawait testObject.updateValue('configurationService.remote.applicationMachineSetting', 'machineValue');\n\t\tawait testObject.reloadConfiguration();\n\t\tconst actual = testObject.inspect('configurationService.remote.applicationMachineSetting');\n\t\tassert.strictEqual(actual.userRemoteValue, 'machineValue');\n\t}));\n\n\ttest('machine overridable setting is written in remote settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tawait testObject.updateValue('configurationService.remote.machineOverridableSetting', 'machineValue');\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.inspect('configurationService.remote.machineOverridableSetting').userRemoteValue, 'machineValue');\n\t}));\n\n\ttest('machine settings in local user settings does not override defaults after defalts are registered ', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.remote.newMachineSetting\": \"userValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.remote.newMachineSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.newMachineSetting'), 'isSet');\n\t}));\n\n\ttest('machine overridable settings in local user settings does not override defaults after defaults are registered ', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.remote.newMachineOverridableSetting\": \"userValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.remote.newMachineOverridableSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE_OVERRIDABLE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.newMachineOverridableSetting'), 'isSet');\n\t}));\n\n});\n\nfunction getWorkspaceId(configPath: URI): string {\n\tlet workspaceConfigPath = configPath.toString();\n\tif (!isLinux) {\n\t\tworkspaceConfigPath = workspaceConfigPath.toLowerCase(); // sanitize for platform file system\n\t}\n\treturn hash(workspaceConfigPath).toString(16);\n}\n\nfunction getWorkspaceIdentifier(configPath: URI): IWorkspaceIdentifier {\n\treturn {\n\t\tconfigPath,\n\t\tid: getWorkspaceId(configPath)\n\t};\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as sinon from 'sinon';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { Registry } from '../../../../../platform/registry/common/platform.js';\nimport { IEnvironmentService } from '../../../../../platform/environment/common/environment.js';\nimport { IConfigurationRegistry, Extensions as ConfigurationExtensions, ConfigurationScope, keyFromOverrideIdentifiers } from '../../../../../platform/configuration/common/configurationRegistry.js';\nimport { WorkspaceService } from '../../browser/configurationService.js';\nimport { ConfigurationEditingErrorCode } from '../../common/configurationEditing.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IWorkspaceContextService, WorkbenchState, IWorkspaceFoldersChangeEvent, ISingleFolderWorkspaceIdentifier, IWorkspaceIdentifier } from '../../../../../platform/workspace/common/workspace.js';\nimport { ConfigurationTarget, IConfigurationService, IConfigurationChangeEvent } from '../../../../../platform/configuration/common/configuration.js';\nimport { workbenchInstantiationService, RemoteFileSystemProvider, TestEnvironmentService, TestTextFileService } from '../../../../test/browser/workbenchTestServices.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ITextFileService } from '../../../textfile/common/textfiles.js';\nimport { ITextModelService } from '../../../../../editor/common/services/resolverService.js';\nimport { TextModelResolverService } from '../../../textmodelResolver/common/textModelResolverService.js';\nimport { IJSONEditingService } from '../../common/jsonEditing.js';\nimport { JSONEditingService } from '../../common/jsonEditingService.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { joinPath, dirname, basename } from '../../../../../base/common/resources.js';\nimport { isLinux, isMacintosh } from '../../../../../base/common/platform.js';\nimport { IRemoteAgentService } from '../../../remote/common/remoteAgentService.js';\nimport { FileService } from '../../../../../platform/files/common/fileService.js';\nimport { NullLogService } from '../../../../../platform/log/common/log.js';\nimport { IRemoteAgentEnvironment } from '../../../../../platform/remote/common/remoteAgentEnvironment.js';\nimport { APPLY_ALL_PROFILES_SETTING, IConfigurationCache } from '../../common/configuration.js';\nimport { SignService } from '../../../../../platform/sign/browser/signService.js';\nimport { FileUserDataProvider } from '../../../../../platform/userData/common/fileUserDataProvider.js';\nimport { IKeybindingEditingService, KeybindingsEditingService } from '../../../keybinding/common/keybindingEditing.js';\nimport { IWorkbenchEnvironmentService } from '../../../environment/common/environmentService.js';\nimport { timeout } from '../../../../../base/common/async.js';\nimport { VSBuffer } from '../../../../../base/common/buffer.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { UriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentityService.js';\nimport { InMemoryFileSystemProvider } from '../../../../../platform/files/common/inMemoryFilesystemProvider.js';\nimport { BrowserWorkbenchEnvironmentService, IBrowserWorkbenchEnvironmentService } from '../../../environment/browser/environmentService.js';\nimport { RemoteAgentService } from '../../../remote/browser/remoteAgentService.js';\nimport { RemoteAuthorityResolverService } from '../../../../../platform/remote/browser/remoteAuthorityResolverService.js';\nimport { hash } from '../../../../../base/common/hash.js';\nimport { TestProductService } from '../../../../test/common/workbenchTestServices.js';\nimport { IUserDataProfilesService, toUserDataProfile, UserDataProfilesService } from '../../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { NullPolicyService } from '../../../../../platform/policy/common/policy.js';\nimport { FilePolicyService } from '../../../../../platform/policy/common/filePolicyService.js';\nimport { runWithFakedTimers } from '../../../../../base/test/common/timeTravelScheduler.js';\nimport { UserDataProfileService } from '../../../userDataProfile/common/userDataProfileService.js';\nimport { IUserDataProfileService } from '../../../userDataProfile/common/userDataProfile.js';\nimport { TasksSchemaProperties } from '../../../../contrib/tasks/common/tasks.js';\nimport { RemoteSocketFactoryService } from '../../../../../platform/remote/common/remoteSocketFactoryService.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { PolicyCategory } from '../../../../../base/common/policy.js';\n\nfunction convertToWorkspacePayload(folder: URI): ISingleFolderWorkspaceIdentifier {\n\treturn {\n\t\tid: hash(folder.toString()).toString(16),\n\t\turi: folder\n\t};\n}\n\nclass ConfigurationCache implements IConfigurationCache {\n\tneedsCaching(resource: URI): boolean { return false; }\n\tasync read(): Promise<string> { return ''; }\n\tasync write(): Promise<void> { }\n\tasync remove(): Promise<void> { }\n}\n\nconst ROOT = URI.file('tests').with({ scheme: 'vscode-tests' });\n\nsuite('WorkspaceContextService - Folder', () => {\n\n\tconst folderName = 'Folder A';\n\tlet folder: URI;\n\tlet testObject: WorkspaceService;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tconst fileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tfolder = joinPath(ROOT, folderName);\n\t\tawait fileService.createFolder(folder);\n\n\t\tconst environmentService = TestEnvironmentService;\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\tconst userDataProfileService = disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile));\n\t\ttestObject = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService,\n\t\t\tuserDataProfileService,\n\t\t\tuserDataProfilesService,\n\t\t\tfileService,\n\t\t\tdisposables.add(new RemoteAgentService(\n\t\t\t\tnew RemoteSocketFactoryService(),\n\t\t\t\tuserDataProfileService,\n\t\t\t\tenvironmentService,\n\t\t\t\tTestProductService,\n\t\t\t\tdisposables.add(new RemoteAuthorityResolverService(false, undefined, undefined, undefined, TestProductService, logService)),\n\t\t\t\tnew SignService(TestProductService), new NullLogService())),\n\t\t\turiIdentityService,\n\t\t\tnew NullLogService(),\n\t\t\tnew NullPolicyService()));\n\t\tawait (<WorkspaceService>testObject).initialize(convertToWorkspacePayload(folder));\n\t});\n\n\ttest('getWorkspace()', () => {\n\t\tconst actual = testObject.getWorkspace();\n\n\t\tassert.strictEqual(actual.folders.length, 1);\n\t\tassert.strictEqual(actual.folders[0].uri.path, folder.path);\n\t\tassert.strictEqual(actual.folders[0].name, folderName);\n\t\tassert.strictEqual(actual.folders[0].index, 0);\n\t\tassert.ok(!actual.configuration);\n\t});\n\n\ttest('getWorkbenchState()', () => {\n\t\tconst actual = testObject.getWorkbenchState();\n\n\t\tassert.strictEqual(actual, WorkbenchState.FOLDER);\n\t});\n\n\ttest('getWorkspaceFolder()', () => {\n\t\tconst actual = testObject.getWorkspaceFolder(joinPath(folder, 'a'));\n\n\t\tassert.strictEqual(actual, testObject.getWorkspace().folders[0]);\n\t});\n\n\ttest('getWorkspaceFolder() - queries in workspace folder', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\n\t\tconst logService = new NullLogService();\n\t\tconst fileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst folder = joinPath(ROOT, folderName).with({ query: 'myquery=1' });\n\t\tawait fileService.createFolder(folder);\n\n\t\tconst environmentService = TestEnvironmentService;\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\tconst userDataProfileService = disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile));\n\t\tconst testObject = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService,\n\t\t\tuserDataProfileService,\n\t\t\tuserDataProfilesService,\n\t\t\tfileService,\n\t\t\tdisposables.add(new RemoteAgentService(new RemoteSocketFactoryService(), userDataProfileService, environmentService, TestProductService, disposables.add(new RemoteAuthorityResolverService(false, undefined, undefined, undefined, TestProductService, logService)), new SignService(TestProductService), new NullLogService())),\n\t\t\turiIdentityService,\n\t\t\tnew NullLogService(),\n\t\t\tnew NullPolicyService()));\n\t\tawait (<WorkspaceService>testObject).initialize(convertToWorkspacePayload(folder));\n\n\t\tconst actual = testObject.getWorkspaceFolder(joinPath(folder, 'a'));\n\n\t\tassert.strictEqual(actual, testObject.getWorkspace().folders[0]);\n\t}));\n\n\ttest('getWorkspaceFolder() - queries in resource', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\n\t\tconst logService = new NullLogService();\n\t\tconst fileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst folder = joinPath(ROOT, folderName);\n\t\tawait fileService.createFolder(folder);\n\n\t\tconst environmentService = TestEnvironmentService;\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\tconst userDataProfileService = disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile));\n\t\tconst testObject = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService,\n\t\t\tuserDataProfileService,\n\t\t\tuserDataProfilesService,\n\t\t\tfileService,\n\t\t\tdisposables.add(new RemoteAgentService(new RemoteSocketFactoryService(), userDataProfileService, environmentService, TestProductService, disposables.add(new RemoteAuthorityResolverService(false, undefined, undefined, undefined, TestProductService, logService)), new SignService(TestProductService), new NullLogService())),\n\t\t\turiIdentityService,\n\t\t\tnew NullLogService(),\n\t\t\tnew NullPolicyService()));\n\t\tawait testObject.initialize(convertToWorkspacePayload(folder));\n\n\t\tconst actual = testObject.getWorkspaceFolder(joinPath(folder, 'a').with({ query: 'myquery=1' }));\n\n\t\tassert.strictEqual(actual, testObject.getWorkspace().folders[0]);\n\t}));\n\n\ttest('isCurrentWorkspace() => true', () => {\n\t\tassert.ok(testObject.isCurrentWorkspace(folder));\n\t});\n\n\ttest('isCurrentWorkspace() => false', () => {\n\t\tassert.ok(!testObject.isCurrentWorkspace(joinPath(dirname(folder), 'abc')));\n\t});\n\n\ttest('workspace is complete', () => testObject.getCompleteWorkspace());\n});\n\nsuite('WorkspaceContextService - Workspace', () => {\n\n\tlet testObject: WorkspaceService;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tconst fileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst appSettingsHome = joinPath(ROOT, 'user');\n\t\tconst folderA = joinPath(ROOT, 'a');\n\t\tconst folderB = joinPath(ROOT, 'b');\n\t\tconst configResource = joinPath(ROOT, 'vsctests.code-workspace');\n\t\tconst workspace = { folders: [{ path: folderA.path }, { path: folderB.path }] };\n\n\t\tawait fileService.createFolder(appSettingsHome);\n\t\tawait fileService.createFolder(folderA);\n\t\tawait fileService.createFolder(folderB);\n\t\tawait fileService.writeFile(configResource, VSBuffer.fromString(JSON.stringify(workspace, null, '\\t')));\n\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tconst environmentService = TestEnvironmentService;\n\t\tconst remoteAgentService = disposables.add(disposables.add(instantiationService.createInstance(RemoteAgentService)));\n\t\tinstantiationService.stub(IRemoteAgentService, remoteAgentService);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = instantiationService.stub(IUserDataProfilesService, disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService)));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\ttestObject = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService,\n\t\t\tdisposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile)),\n\t\t\tuserDataProfilesService, fileService, remoteAgentService, uriIdentityService, new NullLogService(), new NullPolicyService()));\n\n\t\tinstantiationService.stub(IWorkspaceContextService, testObject);\n\t\tinstantiationService.stub(IConfigurationService, testObject);\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\n\t\tawait testObject.initialize(getWorkspaceIdentifier(configResource));\n\t\ttestObject.acquireInstantiationService(instantiationService);\n\t});\n\n\ttest('workspace folders', () => {\n\t\tconst actual = testObject.getWorkspace().folders;\n\n\t\tassert.strictEqual(actual.length, 2);\n\t\tassert.strictEqual(basename(actual[0].uri), 'a');\n\t\tassert.strictEqual(basename(actual[1].uri), 'b');\n\t});\n\n\ttest('getWorkbenchState()', () => {\n\t\tconst actual = testObject.getWorkbenchState();\n\n\t\tassert.strictEqual(actual, WorkbenchState.WORKSPACE);\n\t});\n\n\n\ttest('workspace is complete', () => testObject.getCompleteWorkspace());\n\n});\n\nsuite('WorkspaceContextService - Workspace Editing', () => {\n\n\tlet testObject: WorkspaceService, fileService: IFileService;\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst appSettingsHome = joinPath(ROOT, 'user');\n\t\tconst folderA = joinPath(ROOT, 'a');\n\t\tconst folderB = joinPath(ROOT, 'b');\n\t\tconst configResource = joinPath(ROOT, 'vsctests.code-workspace');\n\t\tconst workspace = { folders: [{ path: folderA.path }, { path: folderB.path }] };\n\n\t\tawait fileService.createFolder(appSettingsHome);\n\t\tawait fileService.createFolder(folderA);\n\t\tawait fileService.createFolder(folderB);\n\t\tawait fileService.writeFile(configResource, VSBuffer.fromString(JSON.stringify(workspace, null, '\\t')));\n\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tconst environmentService = TestEnvironmentService;\n\t\tconst remoteAgentService = disposables.add(instantiationService.createInstance(RemoteAgentService));\n\t\tinstantiationService.stub(IRemoteAgentService, remoteAgentService);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = instantiationService.stub(IUserDataProfilesService, disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService)));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\ttestObject = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService,\n\t\t\tdisposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile)),\n\t\t\tuserDataProfilesService, fileService, remoteAgentService, uriIdentityService, new NullLogService(), new NullPolicyService()));\n\n\t\tinstantiationService.stub(IFileService, fileService);\n\t\tinstantiationService.stub(IWorkspaceContextService, testObject);\n\t\tinstantiationService.stub(IConfigurationService, testObject);\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\n\t\tawait testObject.initialize(getWorkspaceIdentifier(configResource));\n\t\tinstantiationService.stub(ITextFileService, disposables.add(instantiationService.createInstance(TestTextFileService)));\n\t\tinstantiationService.stub(ITextModelService, disposables.add(instantiationService.createInstance(TextModelResolverService)));\n\t\tinstantiationService.stub(IJSONEditingService, instantiationService.createInstance(JSONEditingService));\n\t\ttestObject.acquireInstantiationService(instantiationService);\n\t});\n\n\ttest('add folders', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.addFolders([{ uri: joinPath(ROOT, 'd') }, { uri: joinPath(ROOT, 'c') }]);\n\t\tconst actual = testObject.getWorkspace().folders;\n\n\t\tassert.strictEqual(actual.length, 4);\n\t\tassert.strictEqual(basename(actual[0].uri), 'a');\n\t\tassert.strictEqual(basename(actual[1].uri), 'b');\n\t\tassert.strictEqual(basename(actual[2].uri), 'd');\n\t\tassert.strictEqual(basename(actual[3].uri), 'c');\n\t}));\n\n\ttest('add folders (at specific index)', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.addFolders([{ uri: joinPath(ROOT, 'd') }, { uri: joinPath(ROOT, 'c') }], 0);\n\t\tconst actual = testObject.getWorkspace().folders;\n\n\t\tassert.strictEqual(actual.length, 4);\n\t\tassert.strictEqual(basename(actual[0].uri), 'd');\n\t\tassert.strictEqual(basename(actual[1].uri), 'c');\n\t\tassert.strictEqual(basename(actual[2].uri), 'a');\n\t\tassert.strictEqual(basename(actual[3].uri), 'b');\n\t}));\n\n\ttest('add folders (at specific wrong index)', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.addFolders([{ uri: joinPath(ROOT, 'd') }, { uri: joinPath(ROOT, 'c') }], 10);\n\t\tconst actual = testObject.getWorkspace().folders;\n\n\t\tassert.strictEqual(actual.length, 4);\n\t\tassert.strictEqual(basename(actual[0].uri), 'a');\n\t\tassert.strictEqual(basename(actual[1].uri), 'b');\n\t\tassert.strictEqual(basename(actual[2].uri), 'd');\n\t\tassert.strictEqual(basename(actual[3].uri), 'c');\n\t}));\n\n\ttest('add folders (with name)', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.addFolders([{ uri: joinPath(ROOT, 'd'), name: 'DDD' }, { uri: joinPath(ROOT, 'c'), name: 'CCC' }]);\n\t\tconst actual = testObject.getWorkspace().folders;\n\n\t\tassert.strictEqual(actual.length, 4);\n\t\tassert.strictEqual(basename(actual[0].uri), 'a');\n\t\tassert.strictEqual(basename(actual[1].uri), 'b');\n\t\tassert.strictEqual(basename(actual[2].uri), 'd');\n\t\tassert.strictEqual(basename(actual[3].uri), 'c');\n\t\tassert.strictEqual(actual[2].name, 'DDD');\n\t\tassert.strictEqual(actual[3].name, 'CCC');\n\t}));\n\n\ttest('add folders triggers change event', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\n\t\tconst addedFolders = [{ uri: joinPath(ROOT, 'd') }, { uri: joinPath(ROOT, 'c') }];\n\t\tawait testObject.addFolders(addedFolders);\n\n\t\tassert.strictEqual(target.callCount, 2, `Should be called only once but called ${target.callCount} times`);\n\t\tconst actual_1 = (<IWorkspaceFoldersChangeEvent>target.args[1][0]);\n\t\tassert.deepStrictEqual(actual_1.added.map(r => r.uri.toString()), addedFolders.map(a => a.uri.toString()));\n\t\tassert.deepStrictEqual(actual_1.removed, []);\n\t\tassert.deepStrictEqual(actual_1.changed, []);\n\t}));\n\n\ttest('remove folders', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.removeFolders([testObject.getWorkspace().folders[0].uri]);\n\t\tconst actual = testObject.getWorkspace().folders;\n\n\t\tassert.strictEqual(actual.length, 1);\n\t\tassert.strictEqual(basename(actual[0].uri), 'b');\n\t}));\n\n\ttest('remove folders triggers change event', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tconst removedFolder = testObject.getWorkspace().folders[0];\n\t\tawait testObject.removeFolders([removedFolder.uri]);\n\n\t\tassert.strictEqual(target.callCount, 2, `Should be called only once but called ${target.callCount} times`);\n\t\tconst actual_1 = (<IWorkspaceFoldersChangeEvent>target.args[1][0]);\n\t\tassert.deepStrictEqual(actual_1.added, []);\n\t\tassert.deepStrictEqual(actual_1.removed.map(r => r.uri.toString()), [removedFolder.uri.toString()]);\n\t\tassert.deepStrictEqual(actual_1.changed.map(c => c.uri.toString()), [testObject.getWorkspace().folders[0].uri.toString()]);\n\t}));\n\n\ttest('remove folders and add them back by writing into the file', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst folders = testObject.getWorkspace().folders;\n\t\tawait testObject.removeFolders([folders[0].uri]);\n\n\t\tconst promise = new Promise<void>((resolve, reject) => {\n\t\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(actual => {\n\t\t\t\ttry {\n\t\t\t\t\tassert.deepStrictEqual(actual.added.map(r => r.uri.toString()), [folders[0].uri.toString()]);\n\t\t\t\t\tresolve();\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\n\t\tconst workspace = { folders: [{ path: folders[0].uri.path }, { path: folders[1].uri.path }] };\n\t\tawait fileService.writeFile(testObject.getWorkspace().configuration!, VSBuffer.fromString(JSON.stringify(workspace, null, '\\t')));\n\t\tawait promise;\n\t}));\n\n\ttest('update folders (remove last and add to end)', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tconst addedFolders = [{ uri: joinPath(ROOT, 'd') }, { uri: joinPath(ROOT, 'c') }];\n\t\tconst removedFolders = [testObject.getWorkspace().folders[1]].map(f => f.uri);\n\t\tawait testObject.updateFolders(addedFolders, removedFolders);\n\n\t\tassert.strictEqual(target.callCount, 2, `Should be called only once but called ${target.callCount} times`);\n\t\tconst actual_1 = (<IWorkspaceFoldersChangeEvent>target.args[1][0]);\n\t\tassert.deepStrictEqual(actual_1.added.map(r => r.uri.toString()), addedFolders.map(a => a.uri.toString()));\n\t\tassert.deepStrictEqual(actual_1.removed.map(r_1 => r_1.uri.toString()), removedFolders.map(a_1 => a_1.toString()));\n\t\tassert.deepStrictEqual(actual_1.changed, []);\n\t}));\n\n\ttest('update folders (rename first via add and remove)', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tconst addedFolders = [{ uri: joinPath(ROOT, 'a'), name: 'The Folder' }];\n\t\tconst removedFolders = [testObject.getWorkspace().folders[0]].map(f => f.uri);\n\t\tawait testObject.updateFolders(addedFolders, removedFolders, 0);\n\n\t\tassert.strictEqual(target.callCount, 2, `Should be called only once but called ${target.callCount} times`);\n\t\tconst actual_1 = (<IWorkspaceFoldersChangeEvent>target.args[1][0]);\n\t\tassert.deepStrictEqual(actual_1.added, []);\n\t\tassert.deepStrictEqual(actual_1.removed, []);\n\t\tassert.deepStrictEqual(actual_1.changed.map(r => r.uri.toString()), removedFolders.map(a => a.toString()));\n\t}));\n\n\ttest('update folders (remove first and add to end)', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tconst addedFolders = [{ uri: joinPath(ROOT, 'd') }, { uri: joinPath(ROOT, 'c') }];\n\t\tconst removedFolders = [testObject.getWorkspace().folders[0]].map(f => f.uri);\n\t\tconst changedFolders = [testObject.getWorkspace().folders[1]].map(f => f.uri);\n\t\tawait testObject.updateFolders(addedFolders, removedFolders);\n\n\t\tassert.strictEqual(target.callCount, 2, `Should be called only once but called ${target.callCount} times`);\n\t\tconst actual_1 = (<IWorkspaceFoldersChangeEvent>target.args[1][0]);\n\t\tassert.deepStrictEqual(actual_1.added.map(r => r.uri.toString()), addedFolders.map(a => a.uri.toString()));\n\t\tassert.deepStrictEqual(actual_1.removed.map(r_1 => r_1.uri.toString()), removedFolders.map(a_1 => a_1.toString()));\n\t\tassert.deepStrictEqual(actual_1.changed.map(r_2 => r_2.uri.toString()), changedFolders.map(a_2 => a_2.toString()));\n\t}));\n\n\ttest('reorder folders trigger change event', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tconst workspace = { folders: [{ path: testObject.getWorkspace().folders[1].uri.path }, { path: testObject.getWorkspace().folders[0].uri.path }] };\n\t\tawait fileService.writeFile(testObject.getWorkspace().configuration!, VSBuffer.fromString(JSON.stringify(workspace, null, '\\t')));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(target.callCount, 2, `Should be called only once but called ${target.callCount} times`);\n\t\tconst actual_1 = (<IWorkspaceFoldersChangeEvent>target.args[1][0]);\n\t\tassert.deepStrictEqual(actual_1.added, []);\n\t\tassert.deepStrictEqual(actual_1.removed, []);\n\t\tassert.deepStrictEqual(actual_1.changed.map(c => c.uri.toString()), testObject.getWorkspace().folders.map(f => f.uri.toString()).reverse());\n\t}));\n\n\ttest('rename folders trigger change event', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tconst workspace = { folders: [{ path: testObject.getWorkspace().folders[0].uri.path, name: '1' }, { path: testObject.getWorkspace().folders[1].uri.path }] };\n\t\tfileService.writeFile(testObject.getWorkspace().configuration!, VSBuffer.fromString(JSON.stringify(workspace, null, '\\t')));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(target.callCount, 2, `Should be called only once but called ${target.callCount} times`);\n\t\tconst actual_1 = (<IWorkspaceFoldersChangeEvent>target.args[1][0]);\n\t\tassert.deepStrictEqual(actual_1.added, []);\n\t\tassert.deepStrictEqual(actual_1.removed, []);\n\t\tassert.deepStrictEqual(actual_1.changed.map(c => c.uri.toString()), [testObject.getWorkspace().folders[0].uri.toString()]);\n\t}));\n\n});\n\nsuite('WorkspaceService - Initialization', () => {\n\n\tlet configResource: URI, testObject: WorkspaceService, fileService: IFileService, environmentService: BrowserWorkbenchEnvironmentService, userDataProfileService: IUserDataProfileService;\n\tconst configurationRegistry = Registry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration);\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuiteSetup(() => {\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'initialization.testSetting1': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.RESOURCE\n\t\t\t\t},\n\t\t\t\t'initialization.testSetting2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.RESOURCE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst appSettingsHome = joinPath(ROOT, 'user');\n\t\tconst folderA = joinPath(ROOT, 'a');\n\t\tconst folderB = joinPath(ROOT, 'b');\n\t\tconfigResource = joinPath(ROOT, 'vsctests.code-workspace');\n\t\tconst workspace = { folders: [{ path: folderA.path }, { path: folderB.path }] };\n\n\t\tawait fileService.createFolder(appSettingsHome);\n\t\tawait fileService.createFolder(folderA);\n\t\tawait fileService.createFolder(folderB);\n\t\tawait fileService.writeFile(configResource, VSBuffer.fromString(JSON.stringify(workspace, null, '\\t')));\n\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tenvironmentService = TestEnvironmentService;\n\t\tconst remoteAgentService = disposables.add(instantiationService.createInstance(RemoteAgentService));\n\t\tinstantiationService.stub(IRemoteAgentService, remoteAgentService);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = instantiationService.stub(IUserDataProfilesService, disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService)));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\tuserDataProfileService = instantiationService.stub(IUserDataProfileService, disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile)));\n\t\ttestObject = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService,\n\t\t\tuserDataProfileService,\n\t\t\tuserDataProfilesService, fileService, remoteAgentService, uriIdentityService, new NullLogService(), new NullPolicyService()));\n\t\tinstantiationService.stub(IFileService, fileService);\n\t\tinstantiationService.stub(IWorkspaceContextService, testObject);\n\t\tinstantiationService.stub(IConfigurationService, testObject);\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\n\t\tawait testObject.initialize({ id: '' });\n\t\tinstantiationService.stub(ITextFileService, disposables.add(instantiationService.createInstance(TestTextFileService)));\n\t\tinstantiationService.stub(ITextModelService, disposables.add(instantiationService.createInstance(TextModelResolverService)));\n\t\ttestObject.acquireInstantiationService(instantiationService);\n\t});\n\n\t(isMacintosh ? test.skip : test)('initialize a folder workspace from an empty workspace with no configuration changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"initialization.testSetting1\": \"userValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeWorkbenchState(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceName(target));\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\n\t\tconst folder = joinPath(ROOT, 'a');\n\t\tawait testObject.initialize(convertToWorkspacePayload(folder));\n\n\t\tassert.strictEqual(testObject.getValue('initialization.testSetting1'), 'userValue');\n\t\tassert.strictEqual(target.callCount, 4);\n\t\tassert.deepStrictEqual(target.args[0], [WorkbenchState.FOLDER]);\n\t\tassert.deepStrictEqual(target.args[1], [undefined]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[3][0]).added.map(f => f.uri.toString()), [folder.toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[3][0]).removed, []);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[3][0]).changed, []);\n\n\t}));\n\n\t(isMacintosh ? test.skip : test)('initialize a folder workspace from an empty workspace with configuration changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"initialization.testSetting1\": \"userValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeWorkbenchState(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceName(target));\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\n\t\tconst folder = joinPath(ROOT, 'a');\n\t\tawait fileService.writeFile(joinPath(folder, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"initialization.testSetting1\": \"workspaceValue\" }'));\n\t\tawait testObject.initialize(convertToWorkspacePayload(folder));\n\n\t\tassert.strictEqual(testObject.getValue('initialization.testSetting1'), 'workspaceValue');\n\t\tassert.strictEqual(target.callCount, 5);\n\t\tassert.deepStrictEqual([...(<IConfigurationChangeEvent>target.args[0][0]).affectedKeys], ['initialization.testSetting1']);\n\t\tassert.deepStrictEqual(target.args[1], [WorkbenchState.FOLDER]);\n\t\tassert.deepStrictEqual(target.args[2], [undefined]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).added.map(f => f.uri.toString()), [folder.toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).removed, []);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).changed, []);\n\n\t}));\n\n\t(isMacintosh ? test.skip : test)('initialize a multi root workspace from an empty workspace with no configuration changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"initialization.testSetting1\": \"userValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeWorkbenchState(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceName(target));\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\n\t\tawait testObject.initialize(getWorkspaceIdentifier(configResource));\n\n\t\tassert.strictEqual(target.callCount, 4);\n\t\tassert.deepStrictEqual(target.args[0], [WorkbenchState.WORKSPACE]);\n\t\tassert.deepStrictEqual(target.args[1], [undefined]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[3][0]).added.map(folder => folder.uri.toString()), [joinPath(ROOT, 'a').toString(), joinPath(ROOT, 'b').toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[3][0]).removed, []);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[3][0]).changed, []);\n\n\t}));\n\n\t(isMacintosh ? test.skip : test)('initialize a multi root workspace from an empty workspace with configuration changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"initialization.testSetting1\": \"userValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeWorkbenchState(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceName(target));\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\n\t\tawait fileService.writeFile(joinPath(ROOT, 'a', '.vscode', 'settings.json'), VSBuffer.fromString('{ \"initialization.testSetting1\": \"workspaceValue1\" }'));\n\t\tawait fileService.writeFile(joinPath(ROOT, 'b', '.vscode', 'settings.json'), VSBuffer.fromString('{ \"initialization.testSetting2\": \"workspaceValue2\" }'));\n\t\tawait testObject.initialize(getWorkspaceIdentifier(configResource));\n\n\t\tassert.strictEqual(target.callCount, 5);\n\t\tassert.deepStrictEqual([...(<IConfigurationChangeEvent>target.args[0][0]).affectedKeys], ['initialization.testSetting1', 'initialization.testSetting2']);\n\t\tassert.deepStrictEqual(target.args[1], [WorkbenchState.WORKSPACE]);\n\t\tassert.deepStrictEqual(target.args[2], [undefined]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).added.map(folder => folder.uri.toString()), [joinPath(ROOT, 'a').toString(), joinPath(ROOT, 'b').toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).removed, []);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).changed, []);\n\n\t}));\n\n\t(isMacintosh ? test.skip : test)('initialize a folder workspace from a folder workspace with no configuration changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\n\t\tawait testObject.initialize(convertToWorkspacePayload(joinPath(ROOT, 'a')));\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"initialization.testSetting1\": \"userValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeWorkbenchState(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceName(target));\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\n\t\tawait testObject.initialize(convertToWorkspacePayload(joinPath(ROOT, 'b')));\n\n\t\tassert.strictEqual(testObject.getValue('initialization.testSetting1'), 'userValue');\n\t\tassert.strictEqual(target.callCount, 2);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[1][0]).added.map(folder_1 => folder_1.uri.toString()), [joinPath(ROOT, 'b').toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[1][0]).removed.map(folder_2 => folder_2.uri.toString()), [joinPath(ROOT, 'a').toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[1][0]).changed, []);\n\n\t}));\n\n\t(isMacintosh ? test.skip : test)('initialize a folder workspace from a folder workspace with configuration changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\n\t\tawait testObject.initialize(convertToWorkspacePayload(joinPath(ROOT, 'a')));\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeWorkbenchState(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceName(target));\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\n\t\tawait fileService.writeFile(joinPath(ROOT, 'b', '.vscode', 'settings.json'), VSBuffer.fromString('{ \"initialization.testSetting1\": \"workspaceValue2\" }'));\n\t\tawait testObject.initialize(convertToWorkspacePayload(joinPath(ROOT, 'b')));\n\n\t\tassert.strictEqual(testObject.getValue('initialization.testSetting1'), 'workspaceValue2');\n\t\tassert.strictEqual(target.callCount, 3);\n\t\tassert.deepStrictEqual([...(<IConfigurationChangeEvent>target.args[0][0]).affectedKeys], ['initialization.testSetting1']);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[2][0]).added.map(folder_1 => folder_1.uri.toString()), [joinPath(ROOT, 'b').toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[2][0]).removed.map(folder_2 => folder_2.uri.toString()), [joinPath(ROOT, 'a').toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[2][0]).changed, []);\n\n\t}));\n\n\t(isMacintosh ? test.skip : test)('initialize a multi folder workspace from a folder workspacce triggers change events in the right order', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.initialize(convertToWorkspacePayload(joinPath(ROOT, 'a')));\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeWorkbenchState(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceName(target));\n\t\tdisposables.add(testObject.onWillChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeWorkspaceFolders(target));\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\n\t\tawait fileService.writeFile(joinPath(ROOT, 'a', '.vscode', 'settings.json'), VSBuffer.fromString('{ \"initialization.testSetting1\": \"workspaceValue2\" }'));\n\t\tawait testObject.initialize(getWorkspaceIdentifier(configResource));\n\n\t\tassert.strictEqual(target.callCount, 5);\n\t\tassert.deepStrictEqual([...(<IConfigurationChangeEvent>target.args[0][0]).affectedKeys], ['initialization.testSetting1']);\n\t\tassert.deepStrictEqual(target.args[1], [WorkbenchState.WORKSPACE]);\n\t\tassert.deepStrictEqual(target.args[2], [undefined]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).added.map(folder_1 => folder_1.uri.toString()), [joinPath(ROOT, 'b').toString()]);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).removed, []);\n\t\tassert.deepStrictEqual((<IWorkspaceFoldersChangeEvent>target.args[4][0]).changed, []);\n\t}));\n\n});\n\nsuite('WorkspaceConfigurationService - Folder', () => {\n\n\tlet testObject: WorkspaceService, workspaceService: WorkspaceService, fileService: IFileService, environmentService: IBrowserWorkbenchEnvironmentService, userDataProfileService: IUserDataProfileService, instantiationService: TestInstantiationService;\n\tconst configurationRegistry = Registry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration);\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuiteSetup(() => {\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.applicationSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t},\n\t\t\t\t'configurationService.folder.machineSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE\n\t\t\t\t},\n\t\t\t\t'configurationService.folder.applicationMachineSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION_MACHINE\n\t\t\t\t},\n\t\t\t\t'configurationService.folder.machineOverridableSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE_OVERRIDABLE\n\t\t\t\t},\n\t\t\t\t'configurationService.folder.testSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.RESOURCE\n\t\t\t\t},\n\t\t\t\t'configurationService.folder.languageSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.LANGUAGE_OVERRIDABLE\n\t\t\t\t},\n\t\t\t\t'configurationService.folder.restrictedSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\trestricted: true\n\t\t\t\t},\n\t\t\t\t'configurationService.folder.policySetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tpolicy: {\n\t\t\t\t\t\tname: 'configurationService.folder.policySetting',\n\t\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\t\tlocalization: { description: { key: '', value: '' } }\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'configurationService.folder.policyObjectSetting': {\n\t\t\t\t\t'type': 'object',\n\t\t\t\t\t'default': {},\n\t\t\t\t\tpolicy: {\n\t\t\t\t\t\tname: 'configurationService.folder.policyObjectSetting',\n\t\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\t\tlocalization: { description: { key: '', value: '' } }\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\n\t\tconfigurationRegistry.registerDefaultConfigurations([{\n\t\t\toverrides: {\n\t\t\t\t'[jsonc]': {\n\t\t\t\t\t'configurationService.folder.languageSetting': 'languageValue'\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t});\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst folder = joinPath(ROOT, 'a');\n\t\tawait fileService.createFolder(folder);\n\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tenvironmentService = TestEnvironmentService;\n\t\tenvironmentService.policyFile = joinPath(folder, 'policies.json');\n\t\tconst remoteAgentService = disposables.add(instantiationService.createInstance(RemoteAgentService));\n\t\tinstantiationService.stub(IRemoteAgentService, remoteAgentService);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = instantiationService.stub(IUserDataProfilesService, disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService)));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\tuserDataProfileService = instantiationService.stub(IUserDataProfileService, disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile)));\n\t\tworkspaceService = testObject = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService, userDataProfileService, userDataProfilesService,\n\t\t\tfileService, remoteAgentService, uriIdentityService, new NullLogService(),\n\t\t\tdisposables.add(new FilePolicyService(environmentService.policyFile, fileService, logService))));\n\t\tinstantiationService.stub(IFileService, fileService);\n\t\tinstantiationService.stub(IWorkspaceContextService, testObject);\n\t\tinstantiationService.stub(IConfigurationService, testObject);\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\n\t\tawait workspaceService.initialize(convertToWorkspacePayload(folder));\n\t\tinstantiationService.stub(IKeybindingEditingService, disposables.add(instantiationService.createInstance(KeybindingsEditingService)));\n\t\tinstantiationService.stub(ITextFileService, disposables.add(instantiationService.createInstance(TestTextFileService)));\n\t\tinstantiationService.stub(ITextModelService, <ITextModelService>disposables.add(instantiationService.createInstance(TextModelResolverService)));\n\t\tworkspaceService.acquireInstantiationService(instantiationService);\n\t});\n\n\ttest('defaults', () => {\n\t\tassert.deepStrictEqual(testObject.getValue('configurationService'),\n\t\t\t{\n\t\t\t\t'folder': {\n\t\t\t\t\t'applicationSetting': 'isSet',\n\t\t\t\t\t'machineSetting': 'isSet',\n\t\t\t\t\t'applicationMachineSetting': 'isSet',\n\t\t\t\t\t'machineOverridableSetting': 'isSet',\n\t\t\t\t\t'testSetting': 'isSet',\n\t\t\t\t\t'languageSetting': 'isSet',\n\t\t\t\t\t'restrictedSetting': 'isSet',\n\t\t\t\t\t'policySetting': 'isSet',\n\t\t\t\t\t'policyObjectSetting': {}\n\t\t\t\t}\n\t\t\t});\n\t});\n\n\ttest('globals override defaults', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"userValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.testSetting'), 'userValue');\n\t}));\n\n\ttest('globals', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"testworkbench.editor.tabs\": true }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('testworkbench.editor.tabs'), true);\n\t}));\n\n\ttest('workspace settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"testworkbench.editor.icons\": true }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('testworkbench.editor.icons'), true);\n\t}));\n\n\ttest('workspace settings override user settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.testSetting'), 'workspaceValue');\n\t}));\n\n\ttest('machine overridable settings override user Settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.machineOverridableSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.machineOverridableSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineOverridableSetting'), 'workspaceValue');\n\t}));\n\n\ttest('workspace settings override user settings after defaults are registered ', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.newSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.newSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.newSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.newSetting'), 'workspaceValue');\n\t}));\n\n\ttest('machine overridable settings override user settings after defaults are registered ', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.newMachineOverridableSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.newMachineOverridableSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.newMachineOverridableSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE_OVERRIDABLE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.newMachineOverridableSetting'), 'workspaceValue');\n\t}));\n\n\ttest('application settings are not read from workspace', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.applicationSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.applicationSetting\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationSetting'), 'userValue');\n\t}));\n\n\ttest('application settings are not read from workspace when workspace folder uri is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.applicationSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.applicationSetting\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationSetting', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('machine settings are not read from workspace', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.machineSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.machineSetting\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('machine settings are not read from workspace when workspace folder uri is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.machineSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.machineSetting\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('application machine overridable settings are not read from workspace', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.applicationMachineSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.applicationMachineSetting\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationMachineSetting'), 'userValue');\n\t}));\n\n\ttest('application machine overridable settings are not read from workspace when workspace folder uri is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.applicationMachineSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.applicationMachineSetting\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationMachineSetting', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('get application scope settings are loaded after defaults are registered', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.applicationSetting-2\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.applicationSetting-2\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationSetting-2'), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.applicationSetting-2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationSetting-2'), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationSetting-2'), 'userValue');\n\t}));\n\n\ttest('get application scope settings are not loaded after defaults are registered when workspace folder uri is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.applicationSetting-3\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.applicationSetting-3\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.applicationSetting-3': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('get application machine overridable scope settings are loaded after defaults are registered', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.applicationMachineSetting-2\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.applicationMachineSetting-2\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationMachineSetting-2'), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.applicationMachineSetting-2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationMachineSetting-2'), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationMachineSetting-2'), 'userValue');\n\t}));\n\n\ttest('get application machine overridable scope settings are loaded after defaults are registered when workspace folder uri is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.applicationMachineSetting-3\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.applicationMachineSetting-3\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationMachineSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.applicationMachineSetting-3': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationMachineSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.applicationMachineSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('get machine scope settings are not loaded after defaults are registered', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.machineSetting-2\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.machineSetting-2\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting-2'), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.machineSetting-2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting-2'), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting-2'), 'userValue');\n\t}));\n\n\ttest('get machine scope settings are not loaded after defaults are registered when workspace folder uri is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.machineSetting-3\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.machineSetting-3\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.folder.machineSetting-3': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting-3', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('policy value override all', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst result = await runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\t\tawait fileService.writeFile(environmentService.policyFile!, VSBuffer.fromString('{ \"configurationService.folder.policySetting\": \"policyValue\" }'));\n\t\t\treturn promise;\n\t\t});\n\t\tassert.deepStrictEqual([...result.affectedKeys], ['configurationService.folder.policySetting']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.policySetting'), 'policyValue');\n\t\tassert.strictEqual(testObject.inspect('configurationService.folder.policySetting').policyValue, 'policyValue');\n\t}));\n\n\ttest('policy settings when policy value is not set', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.policySetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.policySetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.policySetting'), 'workspaceValue');\n\t\tassert.strictEqual(testObject.inspect('configurationService.folder.policySetting').policyValue, undefined);\n\t}));\n\n\ttest('policy value override all for object type setting', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\t\tawait fileService.writeFile(environmentService.policyFile!, VSBuffer.fromString('{ \"configurationService.folder.policyObjectSetting\": {\"a\": true} }'));\n\t\t\treturn promise;\n\t\t});\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.policyObjectSetting\": {\"b\": true} }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.deepStrictEqual(testObject.getValue('configurationService.folder.policyObjectSetting'), { a: true });\n\t}));\n\n\ttest('reload configuration emits events after global configuraiton changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"testworkbench.editor.tabs\": true }'));\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.ok(target.called);\n\t}));\n\n\ttest('reload configuration emits events after workspace configuraiton changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"workspaceValue\" }'));\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.ok(target.called);\n\t}));\n\n\ttest('reload configuration should not emit event if no changes', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"testworkbench.editor.tabs\": true }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(() => { target(); }));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.ok(!target.called);\n\t}));\n\n\ttest('inspect', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tlet actual = testObject.inspect('something.missing');\n\t\tassert.strictEqual(actual.defaultValue, undefined);\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, undefined);\n\n\t\tactual = testObject.inspect('configurationService.folder.testSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'isSet');\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"userValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.folder.testSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userValue');\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'userValue');\n\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.folder.testSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userValue');\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'workspaceValue');\n\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'tasks.json'), VSBuffer.fromString('{ \"configurationService.tasks.testSetting\": \"tasksValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('tasks');\n\t\tassert.strictEqual(actual.defaultValue, undefined);\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.deepStrictEqual(actual.userValue, {});\n\t\tassert.deepStrictEqual(actual.workspaceValue, {\n\t\t\t'configurationService': {\n\t\t\t\t'tasks': {\n\t\t\t\t\t'testSetting': 'tasksValue'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.deepStrictEqual(actual.value, {\n\t\t\t'configurationService': {\n\t\t\t\t'tasks': {\n\t\t\t\t\t'testSetting': 'tasksValue'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}));\n\n\ttest('inspect restricted settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(false);\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userRestrictedValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tlet actual = testObject.inspect('configurationService.folder.restrictedSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'userRestrictedValue');\n\n\t\ttestObject.updateWorkspaceTrust(true);\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.folder.restrictedSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'userRestrictedValue');\n\n\t\ttestObject.updateWorkspaceTrust(false);\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceRestrictedValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.folder.restrictedSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'userRestrictedValue');\n\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'tasks.json'), VSBuffer.fromString('{ \"configurationService.tasks.testSetting\": \"tasksValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('tasks');\n\t\tassert.strictEqual(actual.defaultValue, undefined);\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.deepStrictEqual(actual.userValue, {});\n\t\tassert.deepStrictEqual(actual.workspaceValue, {\n\t\t\t'configurationService': {\n\t\t\t\t'tasks': {\n\t\t\t\t\t'testSetting': 'tasksValue'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.deepStrictEqual(actual.value, {\n\t\t\t'configurationService': {\n\t\t\t\t'tasks': {\n\t\t\t\t\t'testSetting': 'tasksValue'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\ttestObject.updateWorkspaceTrust(true);\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.folder.restrictedSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'workspaceRestrictedValue');\n\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'tasks.json'), VSBuffer.fromString('{ \"configurationService.tasks.testSetting\": \"tasksValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('tasks');\n\t\tassert.strictEqual(actual.defaultValue, undefined);\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.deepStrictEqual(actual.userValue, {});\n\t\tassert.deepStrictEqual(actual.workspaceValue, {\n\t\t\t'configurationService': {\n\t\t\t\t'tasks': {\n\t\t\t\t\t'testSetting': 'tasksValue'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.deepStrictEqual(actual.value, {\n\t\t\t'configurationService': {\n\t\t\t\t'tasks': {\n\t\t\t\t\t'testSetting': 'tasksValue'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}));\n\n\ttest('inspect restricted settings after change', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(false);\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userRestrictedValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceRestrictedValue\" }'));\n\t\tconst event = await promise;\n\n\t\tconst actual = testObject.inspect('configurationService.folder.restrictedSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'userRestrictedValue');\n\t\tassert.strictEqual(event.affectsConfiguration('configurationService.folder.restrictedSetting'), true);\n\t}));\n\n\ttest('keys', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tlet actual = testObject.keys();\n\t\tassert.ok(actual.default.indexOf('configurationService.folder.testSetting') !== -1);\n\t\tassert.deepStrictEqual(actual.user, []);\n\t\tassert.deepStrictEqual(actual.workspace, []);\n\t\tassert.deepStrictEqual(actual.workspaceFolder, []);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"userValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.keys();\n\t\tassert.ok(actual.default.indexOf('configurationService.folder.testSetting') !== -1);\n\t\tassert.deepStrictEqual(actual.user, ['configurationService.folder.testSetting']);\n\t\tassert.deepStrictEqual(actual.workspace, []);\n\t\tassert.deepStrictEqual(actual.workspaceFolder, []);\n\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.keys();\n\t\tassert.ok(actual.default.indexOf('configurationService.folder.testSetting') !== -1);\n\t\tassert.deepStrictEqual(actual.user, ['configurationService.folder.testSetting']);\n\t\tassert.deepStrictEqual(actual.workspace, ['configurationService.folder.testSetting']);\n\t\tassert.deepStrictEqual(actual.workspaceFolder, []);\n\t}));\n\n\ttest('update user configuration', () => {\n\t\treturn testObject.updateValue('configurationService.folder.testSetting', 'value', ConfigurationTarget.USER)\n\t\t\t.then(() => assert.strictEqual(testObject.getValue('configurationService.folder.testSetting'), 'value'));\n\t});\n\n\ttest('update workspace configuration', () => {\n\t\treturn testObject.updateValue('tasks.service.testSetting', 'value', ConfigurationTarget.WORKSPACE)\n\t\t\t.then(() => assert.strictEqual(testObject.getValue(TasksSchemaProperties.ServiceTestSetting), 'value'));\n\t});\n\n\ttest('update resource configuration', () => {\n\t\treturn testObject.updateValue('configurationService.folder.testSetting', 'value', { resource: workspaceService.getWorkspace().folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER)\n\t\t\t.then(() => assert.strictEqual(testObject.getValue('configurationService.folder.testSetting'), 'value'));\n\t});\n\n\ttest('update language configuration using configuration overrides', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.folder.languageSetting', 'abcLangValue', { overrideIdentifier: 'abclang' });\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { overrideIdentifier: 'abclang' }), 'abcLangValue');\n\t}));\n\n\ttest('update language configuration using configuration update overrides', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.folder.languageSetting', 'abcLangValue', { overrideIdentifiers: ['abclang'] });\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { overrideIdentifier: 'abclang' }), 'abcLangValue');\n\t}));\n\n\ttest('update language configuration for multiple languages', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.folder.languageSetting', 'multiLangValue', { overrideIdentifiers: ['xyzlang', 'deflang'] }, ConfigurationTarget.USER);\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { overrideIdentifier: 'deflang' }), 'multiLangValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { overrideIdentifier: 'xyzlang' }), 'multiLangValue');\n\t\tassert.deepStrictEqual(testObject.getValue(keyFromOverrideIdentifiers(['deflang', 'xyzlang'])), { 'configurationService.folder.languageSetting': 'multiLangValue' });\n\t}));\n\n\ttest('update language configuration for multiple languages when already set', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"[deflang][xyzlang]\": { \"configurationService.folder.languageSetting\": \"userValue\" }}'));\n\t\tawait testObject.updateValue('configurationService.folder.languageSetting', 'multiLangValue', { overrideIdentifiers: ['xyzlang', 'deflang'] }, ConfigurationTarget.USER);\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { overrideIdentifier: 'deflang' }), 'multiLangValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { overrideIdentifier: 'xyzlang' }), 'multiLangValue');\n\t\tassert.deepStrictEqual(testObject.getValue(keyFromOverrideIdentifiers(['deflang', 'xyzlang'])), { 'configurationService.folder.languageSetting': 'multiLangValue' });\n\t\tconst actualContent = (await fileService.readFile(userDataProfileService.currentProfile.settingsResource)).value.toString();\n\t\tassert.deepStrictEqual(JSON.parse(actualContent), { '[deflang][xyzlang]': { 'configurationService.folder.languageSetting': 'multiLangValue' } });\n\t}));\n\n\ttest('update resource language configuration', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.folder.languageSetting', 'value', { resource: workspaceService.getWorkspace().folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting'), 'value');\n\t}));\n\n\ttest('update resource language configuration for a language using configuration overrides', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { resource: workspaceService.getWorkspace().folders[0].uri, overrideIdentifier: 'jsonc' }), 'languageValue');\n\t\tawait testObject.updateValue('configurationService.folder.languageSetting', 'languageValueUpdated', { resource: workspaceService.getWorkspace().folders[0].uri, overrideIdentifier: 'jsonc' }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { resource: workspaceService.getWorkspace().folders[0].uri, overrideIdentifier: 'jsonc' }), 'languageValueUpdated');\n\t}));\n\n\ttest('update resource language configuration for a language using configuration update overrides', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { resource: workspaceService.getWorkspace().folders[0].uri, overrideIdentifier: 'jsonc' }), 'languageValue');\n\t\tawait testObject.updateValue('configurationService.folder.languageSetting', 'languageValueUpdated', { resource: workspaceService.getWorkspace().folders[0].uri, overrideIdentifiers: ['jsonc'] }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.languageSetting', { resource: workspaceService.getWorkspace().folders[0].uri, overrideIdentifier: 'jsonc' }), 'languageValueUpdated');\n\t}));\n\n\ttest('update application setting into workspace configuration in a workspace is not supported', () => {\n\t\treturn testObject.updateValue('configurationService.folder.applicationSetting', 'workspaceValue', {}, ConfigurationTarget.WORKSPACE, { donotNotifyError: true })\n\t\t\t.then(() => assert.fail('Should not be supported'), (e) => assert.strictEqual(e.code, ConfigurationEditingErrorCode.ERROR_INVALID_WORKSPACE_CONFIGURATION_APPLICATION));\n\t});\n\n\ttest('update application machine overridable setting into workspace configuration in a workspace is not supported', () => {\n\t\treturn testObject.updateValue('configurationService.folder.applicationMachineSetting', 'workspaceValue', {}, ConfigurationTarget.WORKSPACE, { donotNotifyError: true })\n\t\t\t.then(() => assert.fail('Should not be supported'), (e) => assert.strictEqual(e.code, ConfigurationEditingErrorCode.ERROR_INVALID_WORKSPACE_CONFIGURATION_APPLICATION));\n\t});\n\n\ttest('update machine setting into workspace configuration in a workspace is not supported', () => {\n\t\treturn testObject.updateValue('configurationService.folder.machineSetting', 'workspaceValue', {}, ConfigurationTarget.WORKSPACE, { donotNotifyError: true })\n\t\t\t.then(() => assert.fail('Should not be supported'), (e) => assert.strictEqual(e.code, ConfigurationEditingErrorCode.ERROR_INVALID_WORKSPACE_CONFIGURATION_MACHINE));\n\t});\n\n\ttest('update tasks configuration', () => {\n\t\treturn testObject.updateValue('tasks', { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] }, ConfigurationTarget.WORKSPACE)\n\t\t\t.then(() => assert.deepStrictEqual(testObject.getValue(TasksSchemaProperties.Tasks), { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] }));\n\t});\n\n\ttest('update user configuration should trigger change event before promise is resolve', () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\treturn testObject.updateValue('configurationService.folder.testSetting', 'value', ConfigurationTarget.USER)\n\t\t\t.then(() => assert.ok(target.called));\n\t});\n\n\ttest('update workspace configuration should trigger change event before promise is resolve', () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\treturn testObject.updateValue('configurationService.folder.testSetting', 'value', ConfigurationTarget.WORKSPACE)\n\t\t\t.then(() => assert.ok(target.called));\n\t});\n\n\ttest('update memory configuration', () => {\n\t\treturn testObject.updateValue('configurationService.folder.testSetting', 'memoryValue', ConfigurationTarget.MEMORY)\n\t\t\t.then(() => assert.strictEqual(testObject.getValue('configurationService.folder.testSetting'), 'memoryValue'));\n\t});\n\n\ttest('update memory configuration should trigger change event before promise is resolve', () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\treturn testObject.updateValue('configurationService.folder.testSetting', 'memoryValue', ConfigurationTarget.MEMORY)\n\t\t\t.then(() => assert.ok(target.called));\n\t});\n\n\ttest('remove setting from all targets', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst key = 'configurationService.folder.testSetting';\n\t\tawait testObject.updateValue(key, 'workspaceValue', ConfigurationTarget.WORKSPACE);\n\t\tawait testObject.updateValue(key, 'userValue', ConfigurationTarget.USER);\n\n\t\tawait testObject.updateValue(key, undefined);\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst actual = testObject.inspect(key, { resource: workspaceService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t}));\n\n\ttest('update user configuration to default value when target is not passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.folder.testSetting', 'value', ConfigurationTarget.USER);\n\t\tawait testObject.updateValue('configurationService.folder.testSetting', 'isSet');\n\t\tassert.strictEqual(testObject.inspect('configurationService.folder.testSetting').userValue, undefined);\n\t}));\n\n\ttest('update user configuration to default value when target is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.folder.testSetting', 'value', ConfigurationTarget.USER);\n\t\tawait testObject.updateValue('configurationService.folder.testSetting', 'isSet', ConfigurationTarget.USER);\n\t\tassert.strictEqual(testObject.inspect('configurationService.folder.testSetting').userValue, 'isSet');\n\t}));\n\n\ttest('update task configuration should trigger change event before promise is resolve', () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\treturn testObject.updateValue('tasks', { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] }, ConfigurationTarget.WORKSPACE)\n\t\t\t.then(() => assert.ok(target.called));\n\t});\n\n\ttest('no change event when there are no global tasks', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\tawait timeout(5);\n\t\tassert.ok(target.notCalled);\n\t}));\n\n\ttest('change event when there are global tasks', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(joinPath(environmentService.userRoamingDataHome, 'tasks.json'), VSBuffer.fromString('{ \"version\": \"1.0.0\", \"tasks\": [{ \"taskName\": \"myTask\" }'));\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait testObject.reloadLocalUserConfiguration();\n\t\tawait promise;\n\t}));\n\n\ttest('creating workspace settings', () => runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"userValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tawait new Promise<void>((c, e) => {\n\t\t\tconst disposable = testObject.onDidChangeConfiguration(e => {\n\t\t\t\tassert.ok(e.affectsConfiguration('configurationService.folder.testSetting'));\n\t\t\t\tassert.strictEqual(testObject.getValue('configurationService.folder.testSetting'), 'workspaceValue');\n\t\t\t\tdisposable.dispose();\n\t\t\t\tc();\n\t\t\t});\n\t\t\tfileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"workspaceValue\" }')).catch(e);\n\t\t});\n\t}));\n\n\ttest('deleting workspace settings', () => runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"userValue\" }'));\n\t\tconst workspaceSettingsResource = joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json');\n\t\tawait fileService.writeFile(workspaceSettingsResource, VSBuffer.fromString('{ \"configurationService.folder.testSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tconst e = await new Promise<IConfigurationChangeEvent>((c, e) => {\n\t\t\tEvent.once(testObject.onDidChangeConfiguration)(c);\n\t\t\tfileService.del(workspaceSettingsResource).catch(e);\n\t\t});\n\t\tassert.ok(e.affectsConfiguration('configurationService.folder.testSetting'));\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.testSetting'), 'userValue');\n\t}));\n\n\ttest('restricted setting is read from workspace when workspace is trusted', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(true);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.restrictedSetting', { resource: workspaceService.getWorkspace().folders[0].uri }), 'workspaceValue');\n\t\tassert.ok(testObject.restrictedSettings.default.includes('configurationService.folder.restrictedSetting'));\n\t\tassert.strictEqual(testObject.restrictedSettings.userLocal, undefined);\n\t\tassert.strictEqual(testObject.restrictedSettings.userRemote, undefined);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspace, ['configurationService.folder.restrictedSetting']);\n\t\tassert.strictEqual(testObject.restrictedSettings.workspaceFolder?.size, 1);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspaceFolder?.get(workspaceService.getWorkspace().folders[0].uri), ['configurationService.folder.restrictedSetting']);\n\t}));\n\n\ttest('restricted setting is not read from workspace when workspace is changed to trusted', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(true);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\ttestObject.updateWorkspaceTrust(false);\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.restrictedSetting', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t\tassert.ok(testObject.restrictedSettings.default.includes('configurationService.folder.restrictedSetting'));\n\t\tassert.strictEqual(testObject.restrictedSettings.userLocal, undefined);\n\t\tassert.strictEqual(testObject.restrictedSettings.userRemote, undefined);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspace, ['configurationService.folder.restrictedSetting']);\n\t\tassert.strictEqual(testObject.restrictedSettings.workspaceFolder?.size, 1);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspaceFolder?.get(workspaceService.getWorkspace().folders[0].uri), ['configurationService.folder.restrictedSetting']);\n\t}));\n\n\ttest('change event is triggered when workspace is changed to untrusted', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(true);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\ttestObject.updateWorkspaceTrust(false);\n\n\t\tconst event = await promise;\n\t\tassert.ok(event.affectedKeys.has('configurationService.folder.restrictedSetting'));\n\t\tassert.ok(event.affectsConfiguration('configurationService.folder.restrictedSetting'));\n\t}));\n\n\ttest('restricted setting is not read from workspace when workspace is not trusted', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(false);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.restrictedSetting', { resource: workspaceService.getWorkspace().folders[0].uri }), 'userValue');\n\t\tassert.ok(testObject.restrictedSettings.default.includes('configurationService.folder.restrictedSetting'));\n\t\tassert.strictEqual(testObject.restrictedSettings.userLocal, undefined);\n\t\tassert.strictEqual(testObject.restrictedSettings.userRemote, undefined);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspace, ['configurationService.folder.restrictedSetting']);\n\t\tassert.strictEqual(testObject.restrictedSettings.workspaceFolder?.size, 1);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspaceFolder?.get(workspaceService.getWorkspace().folders[0].uri), ['configurationService.folder.restrictedSetting']);\n\t}));\n\n\ttest('restricted setting is read when workspace is changed to trusted', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(false);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\ttestObject.updateWorkspaceTrust(true);\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.restrictedSetting', { resource: workspaceService.getWorkspace().folders[0].uri }), 'workspaceValue');\n\t\tassert.ok(testObject.restrictedSettings.default.includes('configurationService.folder.restrictedSetting'));\n\t\tassert.strictEqual(testObject.restrictedSettings.userLocal, undefined);\n\t\tassert.strictEqual(testObject.restrictedSettings.userRemote, undefined);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspace, ['configurationService.folder.restrictedSetting']);\n\t\tassert.strictEqual(testObject.restrictedSettings.workspaceFolder?.size, 1);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspaceFolder?.get(workspaceService.getWorkspace().folders[0].uri), ['configurationService.folder.restrictedSetting']);\n\t}));\n\n\ttest('change event is triggered when workspace is changed to trusted', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(false);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\ttestObject.updateWorkspaceTrust(true);\n\n\t\tconst event = await promise;\n\t\tassert.ok(event.affectedKeys.has('configurationService.folder.restrictedSetting'));\n\t\tassert.ok(event.affectsConfiguration('configurationService.folder.restrictedSetting'));\n\t}));\n\n\ttest('adding an restricted setting triggers change event', () => runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"userValue\" }'));\n\t\ttestObject.updateWorkspaceTrust(false);\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeRestrictedSettings);\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.restrictedSetting\": \"workspaceValue\" }'));\n\n\t\treturn promise;\n\t}));\n\n\ttest('remove an unregistered setting', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst key = 'configurationService.folder.unknownSetting';\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.unknownSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.folder.unknownSetting\": \"workspaceValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tawait testObject.updateValue(key, undefined);\n\n\t\tconst actual = testObject.inspect(key, { resource: workspaceService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t}));\n});\n\nsuite('WorkspaceConfigurationService - Profiles', () => {\n\n\tlet testObject: WorkspaceService, workspaceService: WorkspaceService, fileService: IFileService, environmentService: IBrowserWorkbenchEnvironmentService, userDataProfileService: IUserDataProfileService, instantiationService: TestInstantiationService;\n\tconst configurationRegistry = Registry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration);\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuiteSetup(() => {\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t[APPLY_ALL_PROFILES_SETTING]: {\n\t\t\t\t\t'type': 'array',\n\t\t\t\t\t'default': [],\n\t\t\t\t\t'scope': ConfigurationScope.APPLICATION,\n\t\t\t\t},\n\t\t\t\t'configurationService.profiles.applicationSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t},\n\t\t\t\t'configurationService.profiles.applicationMachineSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION_MACHINE\n\t\t\t\t},\n\t\t\t\t'configurationService.profiles.testSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t},\n\t\t\t\t'configurationService.profiles.applicationSetting2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t},\n\t\t\t\t'configurationService.profiles.testSetting2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t});\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst folder = joinPath(ROOT, 'a');\n\t\tawait fileService.createFolder(folder);\n\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tenvironmentService = TestEnvironmentService;\n\t\tenvironmentService.policyFile = joinPath(folder, 'policies.json');\n\t\tconst remoteAgentService = disposables.add(instantiationService.createInstance(RemoteAgentService));\n\t\tinstantiationService.stub(IRemoteAgentService, remoteAgentService);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = instantiationService.stub(IUserDataProfilesService, disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService)));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\tuserDataProfileService = instantiationService.stub(IUserDataProfileService, disposables.add(new UserDataProfileService(toUserDataProfile('custom', 'custom', joinPath(environmentService.userRoamingDataHome, 'profiles', 'temp'), joinPath(environmentService.cacheHome, 'profilesCache')))));\n\t\tworkspaceService = testObject = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService, userDataProfileService, userDataProfilesService,\n\t\t\tfileService, remoteAgentService, uriIdentityService, new NullLogService(),\n\t\t\tdisposables.add(new FilePolicyService(environmentService.policyFile, fileService, logService))));\n\t\tinstantiationService.stub(IFileService, fileService);\n\t\tinstantiationService.stub(IWorkspaceContextService, testObject);\n\t\tinstantiationService.stub(IConfigurationService, testObject);\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\n\t\tawait fileService.writeFile(userDataProfilesService.defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting2\": \"applicationValue\", \"configurationService.profiles.testSetting2\": \"userValue\" }'));\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting2\": \"profileValue\", \"configurationService.profiles.testSetting2\": \"profileValue\" }'));\n\t\tawait workspaceService.initialize(convertToWorkspacePayload(folder));\n\t\tinstantiationService.stub(IKeybindingEditingService, disposables.add(instantiationService.createInstance(KeybindingsEditingService)));\n\t\tinstantiationService.stub(ITextFileService, disposables.add(instantiationService.createInstance(TestTextFileService)));\n\t\tinstantiationService.stub(ITextModelService, disposables.add(instantiationService.createInstance(TextModelResolverService)));\n\t\tworkspaceService.acquireInstantiationService(instantiationService);\n\t});\n\n\ttest('initialize', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting2'), 'applicationValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting2'), 'profileValue');\n\t}));\n\n\ttest('inspect', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tlet actual = testObject.inspect('something.missing');\n\t\tassert.strictEqual(actual.defaultValue, undefined);\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, undefined);\n\n\t\tactual = testObject.inspect('configurationService.profiles.applicationSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'isSet');\n\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"applicationValue\" }'));\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"profileValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.profiles.applicationSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.applicationValue, 'applicationValue');\n\t\tassert.strictEqual(actual.userValue, 'profileValue');\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'applicationValue');\n\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.testSetting\": \"applicationValue\" }'));\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.testSetting\": \"profileValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.profiles.testSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.applicationValue, undefined);\n\t\tassert.strictEqual(actual.userValue, 'profileValue');\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'profileValue');\n\t}));\n\n\ttest('update application scope setting', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.profiles.applicationSetting', 'applicationValue');\n\n\t\tassert.deepStrictEqual(JSON.parse((await fileService.readFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource)).value.toString()), { 'configurationService.profiles.applicationSetting': 'applicationValue', 'configurationService.profiles.applicationSetting2': 'applicationValue', 'configurationService.profiles.testSetting2': 'userValue' });\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting'), 'applicationValue');\n\t}));\n\n\ttest('update application machine setting', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.profiles.applicationMachineSetting', 'applicationValue');\n\n\t\tassert.deepStrictEqual(JSON.parse((await fileService.readFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource)).value.toString()), { 'configurationService.profiles.applicationMachineSetting': 'applicationValue', 'configurationService.profiles.applicationSetting2': 'applicationValue', 'configurationService.profiles.testSetting2': 'userValue' });\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationMachineSetting'), 'applicationValue');\n\t}));\n\n\ttest('update normal setting', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.profiles.testSetting', 'profileValue');\n\n\t\tassert.deepStrictEqual(JSON.parse((await fileService.readFile(userDataProfileService.currentProfile.settingsResource)).value.toString()), { 'configurationService.profiles.testSetting': 'profileValue', 'configurationService.profiles.testSetting2': 'profileValue', 'configurationService.profiles.applicationSetting2': 'profileValue' });\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting'), 'profileValue');\n\t}));\n\n\ttest('registering normal setting after init', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.testSetting3\": \"defaultProfile\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.profiles.testSetting3': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting3'), 'isSet');\n\t}));\n\n\ttest('registering application scope setting after init', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting3\": \"defaultProfile\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.profiles.applicationSetting3': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting3'), 'defaultProfile');\n\t}));\n\n\ttest('non registering setting should not be read from default profile', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.nonregistered\": \"defaultProfile\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.nonregistered'), undefined);\n\t}));\n\n\ttest('initialize with custom all profiles settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue(APPLY_ALL_PROFILES_SETTING, ['configurationService.profiles.testSetting2'], ConfigurationTarget.USER_LOCAL);\n\n\t\tawait testObject.initialize(convertToWorkspacePayload(joinPath(ROOT, 'a')));\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting2'), 'applicationValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting2'), 'userValue');\n\t}));\n\n\ttest('update all profiles settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait testObject.updateValue(APPLY_ALL_PROFILES_SETTING, ['configurationService.profiles.testSetting2'], ConfigurationTarget.USER_LOCAL);\n\n\t\tconst changeEvent = await promise;\n\t\tassert.deepStrictEqual([...changeEvent.affectedKeys], [APPLY_ALL_PROFILES_SETTING, 'configurationService.profiles.testSetting2']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting2'), 'userValue');\n\t}));\n\n\ttest('setting applied to all profiles is registered later', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.testSetting4\": \"userValue\" }'));\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.testSetting4\": \"profileValue\" }'));\n\t\tawait testObject.updateValue(APPLY_ALL_PROFILES_SETTING, ['configurationService.profiles.testSetting4'], ConfigurationTarget.USER_LOCAL);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting4'), 'userValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.profiles.testSetting4': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting4'), 'userValue');\n\t}));\n\n\ttest('update setting that is applied to all profiles', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue(APPLY_ALL_PROFILES_SETTING, ['configurationService.profiles.testSetting2'], ConfigurationTarget.USER_LOCAL);\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait testObject.updateValue('configurationService.profiles.testSetting2', 'updatedValue', ConfigurationTarget.USER_LOCAL);\n\n\t\tconst changeEvent = await promise;\n\t\tassert.deepStrictEqual([...changeEvent.affectedKeys], ['configurationService.profiles.testSetting2']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting2'), 'updatedValue');\n\t}));\n\n\ttest('test isSettingAppliedToAllProfiles', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tassert.strictEqual(testObject.isSettingAppliedForAllProfiles('configurationService.profiles.applicationSetting2'), true);\n\t\tassert.strictEqual(testObject.isSettingAppliedForAllProfiles('configurationService.profiles.testSetting2'), false);\n\n\t\tawait testObject.updateValue(APPLY_ALL_PROFILES_SETTING, ['configurationService.profiles.testSetting2'], ConfigurationTarget.USER_LOCAL);\n\t\tassert.strictEqual(testObject.isSettingAppliedForAllProfiles('configurationService.profiles.testSetting2'), true);\n\t}));\n\n\ttest('switch to default profile', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"applicationValue\", \"configurationService.profiles.testSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"profileValue\", \"configurationService.profiles.testSetting\": \"profileValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait userDataProfileService.updateCurrentProfile(instantiationService.get(IUserDataProfilesService).defaultProfile);\n\n\t\tconst changeEvent = await promise;\n\t\tassert.deepStrictEqual([...changeEvent.affectedKeys], ['configurationService.profiles.testSetting']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting'), 'applicationValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting'), 'userValue');\n\t}));\n\n\ttest('switch to non default profile', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"applicationValue\", \"configurationService.profiles.testSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"profileValue\", \"configurationService.profiles.testSetting\": \"profileValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst profile = toUserDataProfile('custom2', 'custom2', joinPath(environmentService.userRoamingDataHome, 'profiles', 'custom2'), joinPath(environmentService.cacheHome, 'profilesCache'));\n\t\tawait fileService.writeFile(profile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"profileValue2\", \"configurationService.profiles.testSetting\": \"profileValue2\" }'));\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait userDataProfileService.updateCurrentProfile(profile);\n\n\t\tconst changeEvent = await promise;\n\t\tassert.deepStrictEqual([...changeEvent.affectedKeys], ['configurationService.profiles.testSetting']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting'), 'applicationValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting'), 'profileValue2');\n\t}));\n\n\ttest('switch to non default profile using settings from default profile', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"applicationValue\", \"configurationService.profiles.testSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"profileValue\", \"configurationService.profiles.testSetting\": \"profileValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst profile = toUserDataProfile('custom3', 'custom3', joinPath(environmentService.userRoamingDataHome, 'profiles', 'custom2'), joinPath(environmentService.cacheHome, 'profilesCache'), { useDefaultFlags: { settings: true } }, instantiationService.get(IUserDataProfilesService).defaultProfile);\n\t\tawait fileService.writeFile(profile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"applicationValue2\", \"configurationService.profiles.testSetting\": \"profileValue2\" }'));\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait userDataProfileService.updateCurrentProfile(profile);\n\n\t\tconst changeEvent = await promise;\n\t\tassert.deepStrictEqual([...changeEvent.affectedKeys], ['configurationService.profiles.applicationSetting', 'configurationService.profiles.testSetting']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting'), 'applicationValue2');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting'), 'profileValue2');\n\t}));\n\n\ttest('In non-default profile, changing application settings shall include only application scope settings in the change event', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{}'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait fileService.writeFile(instantiationService.get(IUserDataProfilesService).defaultProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.applicationSetting\": \"applicationValue\", \"configurationService.profiles.testSetting\": \"applicationValue\" }'));\n\n\t\tconst changeEvent = await promise;\n\t\tassert.deepStrictEqual([...changeEvent.affectedKeys], ['configurationService.profiles.applicationSetting']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting'), 'applicationValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting'), 'isSet');\n\t}));\n\n\ttest('switch to default profile with settings applied to all profiles', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue(APPLY_ALL_PROFILES_SETTING, ['configurationService.profiles.testSetting2'], ConfigurationTarget.USER_LOCAL);\n\n\t\tawait userDataProfileService.updateCurrentProfile(instantiationService.get(IUserDataProfilesService).defaultProfile);\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting2'), 'applicationValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting2'), 'userValue');\n\t}));\n\n\ttest('switch to non default profile with settings applied to all profiles', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue(APPLY_ALL_PROFILES_SETTING, ['configurationService.profiles.testSetting2'], ConfigurationTarget.USER_LOCAL);\n\n\t\tconst profile = toUserDataProfile('custom2', 'custom2', joinPath(environmentService.userRoamingDataHome, 'profiles', 'custom2'), joinPath(environmentService.cacheHome, 'profilesCache'));\n\t\tawait fileService.writeFile(profile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.testSetting\": \"profileValue\", \"configurationService.profiles.testSetting2\": \"profileValue2\" }'));\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait userDataProfileService.updateCurrentProfile(profile);\n\n\t\tconst changeEvent = await promise;\n\t\tassert.deepStrictEqual([...changeEvent.affectedKeys], ['configurationService.profiles.testSetting']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting2'), 'applicationValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting2'), 'userValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting'), 'profileValue');\n\t}));\n\n\ttest('switch to non default from default profile with settings applied to all profiles', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue(APPLY_ALL_PROFILES_SETTING, ['configurationService.profiles.testSetting2'], ConfigurationTarget.USER_LOCAL);\n\t\tawait userDataProfileService.updateCurrentProfile(instantiationService.get(IUserDataProfilesService).defaultProfile);\n\n\t\tconst profile = toUserDataProfile('custom2', 'custom2', joinPath(environmentService.userRoamingDataHome, 'profiles', 'custom2'), joinPath(environmentService.cacheHome, 'profilesCache'));\n\t\tawait fileService.writeFile(profile.settingsResource, VSBuffer.fromString('{ \"configurationService.profiles.testSetting\": \"profileValue\", \"configurationService.profiles.testSetting2\": \"profileValue2\" }'));\n\t\tconst promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait userDataProfileService.updateCurrentProfile(profile);\n\n\t\tconst changeEvent = await promise;\n\t\tassert.deepStrictEqual([...changeEvent.affectedKeys], ['configurationService.profiles.testSetting']);\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.applicationSetting2'), 'applicationValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting2'), 'userValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.profiles.testSetting'), 'profileValue');\n\t}));\n\n});\n\nsuite('WorkspaceConfigurationService-Multiroot', () => {\n\n\tlet workspaceContextService: IWorkspaceContextService, jsonEditingServce: IJSONEditingService, testObject: WorkspaceService, fileService: IFileService, environmentService: BrowserWorkbenchEnvironmentService, userDataProfileService: IUserDataProfileService;\n\tconst configurationRegistry = Registry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration);\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuiteSetup(() => {\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.testSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet'\n\t\t\t\t},\n\t\t\t\t'configurationService.workspace.applicationSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t},\n\t\t\t\t'configurationService.workspace.machineSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE\n\t\t\t\t},\n\t\t\t\t'configurationService.workspace.machineOverridableSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE_OVERRIDABLE\n\t\t\t\t},\n\t\t\t\t'configurationService.workspace.testResourceSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.RESOURCE\n\t\t\t\t},\n\t\t\t\t'configurationService.workspace.testLanguageSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.LANGUAGE_OVERRIDABLE\n\t\t\t\t},\n\t\t\t\t'configurationService.workspace.testRestrictedSetting1': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\trestricted: true,\n\t\t\t\t\tscope: ConfigurationScope.RESOURCE\n\t\t\t\t},\n\t\t\t\t'configurationService.workspace.testRestrictedSetting2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\trestricted: true,\n\t\t\t\t\tscope: ConfigurationScope.RESOURCE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst appSettingsHome = joinPath(ROOT, 'user');\n\t\tconst folderA = joinPath(ROOT, 'a');\n\t\tconst folderB = joinPath(ROOT, 'b');\n\t\tconst configResource = joinPath(ROOT, 'vsctests.code-workspace');\n\t\tconst workspace = { folders: [{ path: folderA.path }, { path: folderB.path }] };\n\n\t\tawait fileService.createFolder(appSettingsHome);\n\t\tawait fileService.createFolder(folderA);\n\t\tawait fileService.createFolder(folderB);\n\t\tawait fileService.writeFile(configResource, VSBuffer.fromString(JSON.stringify(workspace, null, '\\t')));\n\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tenvironmentService = TestEnvironmentService;\n\t\tconst remoteAgentService = disposables.add(instantiationService.createInstance(RemoteAgentService));\n\t\tinstantiationService.stub(IRemoteAgentService, remoteAgentService);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = instantiationService.stub(IUserDataProfilesService, disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService)));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\tuserDataProfileService = instantiationService.stub(IUserDataProfileService, disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile)));\n\t\tconst workspaceService = disposables.add(new WorkspaceService(\n\t\t\t{ configurationCache: new ConfigurationCache() },\n\t\t\tenvironmentService, userDataProfileService, userDataProfilesService,\n\t\t\tfileService, remoteAgentService, uriIdentityService, new NullLogService(), new NullPolicyService()));\n\n\t\tinstantiationService.stub(IFileService, fileService);\n\t\tinstantiationService.stub(IWorkspaceContextService, workspaceService);\n\t\tinstantiationService.stub(IConfigurationService, workspaceService);\n\t\tinstantiationService.stub(IWorkbenchEnvironmentService, environmentService);\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\n\t\tawait workspaceService.initialize(getWorkspaceIdentifier(configResource));\n\t\tinstantiationService.stub(IKeybindingEditingService, disposables.add(instantiationService.createInstance(KeybindingsEditingService)));\n\t\tinstantiationService.stub(ITextFileService, disposables.add(instantiationService.createInstance(TestTextFileService)));\n\t\tinstantiationService.stub(ITextModelService, disposables.add(instantiationService.createInstance(TextModelResolverService)));\n\t\tjsonEditingServce = instantiationService.createInstance(JSONEditingService);\n\t\tinstantiationService.stub(IJSONEditingService, jsonEditingServce);\n\t\tworkspaceService.acquireInstantiationService(instantiationService);\n\n\t\tworkspaceContextService = workspaceService;\n\t\ttestObject = workspaceService;\n\t});\n\n\ttest('application settings are not read from workspace', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.applicationSetting\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write(workspaceContextService.getWorkspace().configuration!, [{ path: ['settings'], value: { 'configurationService.workspace.applicationSetting': 'workspaceValue' } }], true);\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.applicationSetting'), 'userValue');\n\t}));\n\n\ttest('application settings are not read from workspace when folder is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.applicationSetting\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write(workspaceContextService.getWorkspace().configuration!, [{ path: ['settings'], value: { 'configurationService.workspace.applicationSetting': 'workspaceValue' } }], true);\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.applicationSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('machine settings are not read from workspace', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.machineSetting\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write(workspaceContextService.getWorkspace().configuration!, [{ path: ['settings'], value: { 'configurationService.workspace.machineSetting': 'workspaceValue' } }], true);\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting'), 'userValue');\n\t}));\n\n\ttest('machine settings are not read from workspace when folder is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.folder.machineSetting\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write(workspaceContextService.getWorkspace().configuration!, [{ path: ['settings'], value: { 'configurationService.workspace.machineSetting': 'workspaceValue' } }], true);\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.folder.machineSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('get application scope settings are not loaded after defaults are registered', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.newSetting\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write(workspaceContextService.getWorkspace().configuration!, [{ path: ['settings'], value: { 'configurationService.workspace.newSetting': 'workspaceValue' } }], true);\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newSetting'), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.newSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newSetting'), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newSetting'), 'userValue');\n\t}));\n\n\ttest('get application scope settings are not loaded after defaults are registered when workspace folder is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.newSetting-2\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write(workspaceContextService.getWorkspace().configuration!, [{ path: ['settings'], value: { 'configurationService.workspace.newSetting-2': 'workspaceValue' } }], true);\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newSetting-2', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.newSetting-2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newSetting-2', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newSetting-2', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('workspace settings override user settings after defaults are registered for machine overridable settings ', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.newMachineOverridableSetting\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write(workspaceContextService.getWorkspace().configuration!, [{ path: ['settings'], value: { 'configurationService.workspace.newMachineOverridableSetting': 'workspaceValue' } }], true);\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newMachineOverridableSetting'), 'workspaceValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.newMachineOverridableSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE_OVERRIDABLE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newMachineOverridableSetting'), 'workspaceValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.newMachineOverridableSetting'), 'workspaceValue');\n\n\t}));\n\n\ttest('application settings are not read from workspace folder', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.applicationSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.applicationSetting\": \"workspaceFolderValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.applicationSetting'), 'userValue');\n\t}));\n\n\ttest('application settings are not read from workspace folder when workspace folder is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.applicationSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.applicationSetting\": \"workspaceFolderValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.applicationSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('machine settings are not read from workspace folder', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.machineSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.machineSetting\": \"workspaceFolderValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.machineSetting'), 'userValue');\n\t}));\n\n\ttest('machine settings are not read from workspace folder when workspace folder is passed', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.machineSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.machineSetting\": \"workspaceFolderValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.machineSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('application settings are not read from workspace folder after defaults are registered', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.testNewApplicationSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testNewApplicationSetting\": \"workspaceFolderValue\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewApplicationSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'workspaceFolderValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.testNewApplicationSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewApplicationSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewApplicationSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('machine settings are not read from workspace folder after defaults are registered', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.testNewMachineSetting\": \"userValue\" }'));\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testNewMachineSetting\": \"workspaceFolderValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewMachineSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'workspaceFolderValue');\n\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.testNewMachineSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewMachineSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewMachineSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'userValue');\n\t}));\n\n\ttest('resource setting in folder is read after it is registered later', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testNewResourceSetting2\": \"workspaceFolderValue\" }'));\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.testNewResourceSetting2': 'workspaceValue' } }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.testNewResourceSetting2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.RESOURCE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewResourceSetting2', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'workspaceFolderValue');\n\t}));\n\n\ttest('resource language setting in folder is read after it is registered later', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testNewResourceLanguageSetting2\": \"workspaceFolderValue\" }'));\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.testNewResourceLanguageSetting2': 'workspaceValue' } }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.testNewResourceLanguageSetting2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.LANGUAGE_OVERRIDABLE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewResourceLanguageSetting2', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'workspaceFolderValue');\n\t}));\n\n\ttest('machine overridable setting in folder is read after it is registered later', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testNewMachineOverridableSetting2\": \"workspaceFolderValue\" }'));\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.testNewMachineOverridableSetting2': 'workspaceValue' } }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.workspace.testNewMachineOverridableSetting2': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE_OVERRIDABLE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testNewMachineOverridableSetting2', { resource: workspaceContextService.getWorkspace().folders[0].uri }), 'workspaceFolderValue');\n\t}));\n\n\ttest('inspect', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tlet actual = testObject.inspect('something.missing');\n\t\tassert.strictEqual(actual.defaultValue, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, undefined);\n\n\t\tactual = testObject.inspect('configurationService.workspace.testResourceSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'isSet');\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.testResourceSetting\": \"userValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.workspace.testResourceSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.userValue, 'userValue');\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'userValue');\n\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.testResourceSetting': 'workspaceValue' } }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.workspace.testResourceSetting');\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.userValue, 'userValue');\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'workspaceValue');\n\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testResourceSetting\": \"workspaceFolderValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.workspace.testResourceSetting', { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.userValue, 'userValue');\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, 'workspaceFolderValue');\n\t\tassert.strictEqual(actual.value, 'workspaceFolderValue');\n\t}));\n\n\ttest('inspect restricted settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(false);\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.testRestrictedSetting1': 'workspaceRestrictedValue' } }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tlet actual = testObject.inspect('configurationService.workspace.testRestrictedSetting1', { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'isSet');\n\n\t\ttestObject.updateWorkspaceTrust(true);\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.workspace.testRestrictedSetting1', { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'workspaceRestrictedValue');\n\n\t\ttestObject.updateWorkspaceTrust(false);\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testRestrictedSetting1\": \"workspaceFolderRestrictedValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.workspace.testRestrictedSetting1', { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, 'workspaceFolderRestrictedValue');\n\t\tassert.strictEqual(actual.value, 'isSet');\n\n\t\ttestObject.updateWorkspaceTrust(true);\n\t\tawait testObject.reloadConfiguration();\n\t\tactual = testObject.inspect('configurationService.workspace.testRestrictedSetting1', { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, 'workspaceFolderRestrictedValue');\n\t\tassert.strictEqual(actual.value, 'workspaceFolderRestrictedValue');\n\t}));\n\n\ttest('inspect restricted settings after change', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(false);\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.testRestrictedSetting1\": \"userRestrictedValue\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tlet promise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.testRestrictedSetting1': 'workspaceRestrictedValue' } }], true);\n\t\tlet event = await promise;\n\n\t\tlet actual = testObject.inspect('configurationService.workspace.testRestrictedSetting1', { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t\tassert.strictEqual(actual.value, 'userRestrictedValue');\n\t\tassert.strictEqual(event.affectsConfiguration('configurationService.workspace.testRestrictedSetting1'), true);\n\n\t\tpromise = Event.toPromise(testObject.onDidChangeConfiguration);\n\t\tawait fileService.writeFile(workspaceContextService.getWorkspace().folders[0].toResource('.vscode/settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testRestrictedSetting1\": \"workspaceFolderRestrictedValue\" }'));\n\t\tevent = await promise;\n\n\t\tactual = testObject.inspect('configurationService.workspace.testRestrictedSetting1', { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.defaultValue, 'isSet');\n\t\tassert.strictEqual(actual.application, undefined);\n\t\tassert.strictEqual(actual.userValue, 'userRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceValue, 'workspaceRestrictedValue');\n\t\tassert.strictEqual(actual.workspaceFolderValue, 'workspaceFolderRestrictedValue');\n\t\tassert.strictEqual(actual.value, 'userRestrictedValue');\n\t\tassert.strictEqual(event.affectsConfiguration('configurationService.workspace.testRestrictedSetting1'), true);\n\t}));\n\n\ttest('get launch configuration', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst expectedLaunchConfiguration = {\n\t\t\t'version': '0.1.0',\n\t\t\t'configurations': [\n\t\t\t\t{\n\t\t\t\t\t'type': 'node',\n\t\t\t\t\t'request': 'launch',\n\t\t\t\t\t'name': 'Gulp Build',\n\t\t\t\t\t'program': '${workspaceFolder}/node_modules/gulp/bin/gulp.js',\n\t\t\t\t\t'stopOnEntry': true,\n\t\t\t\t\t'args': [\n\t\t\t\t\t\t'watch-extension:json-client'\n\t\t\t\t\t],\n\t\t\t\t\t'cwd': '${workspaceFolder}'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['launch'], value: expectedLaunchConfiguration }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tconst actual = testObject.getValue('launch');\n\t\tassert.deepStrictEqual(actual, expectedLaunchConfiguration);\n\t}));\n\n\ttest('inspect launch configuration', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst expectedLaunchConfiguration = {\n\t\t\t'version': '0.1.0',\n\t\t\t'configurations': [\n\t\t\t\t{\n\t\t\t\t\t'type': 'node',\n\t\t\t\t\t'request': 'launch',\n\t\t\t\t\t'name': 'Gulp Build',\n\t\t\t\t\t'program': '${workspaceFolder}/node_modules/gulp/bin/gulp.js',\n\t\t\t\t\t'stopOnEntry': true,\n\t\t\t\t\t'args': [\n\t\t\t\t\t\t'watch-extension:json-client'\n\t\t\t\t\t],\n\t\t\t\t\t'cwd': '${workspaceFolder}'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['launch'], value: expectedLaunchConfiguration }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tconst actual = testObject.inspect('launch').workspaceValue;\n\t\tassert.deepStrictEqual(actual, expectedLaunchConfiguration);\n\t}));\n\n\n\ttest('get tasks configuration', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst expectedTasksConfiguration = {\n\t\t\t'version': '2.0.0',\n\t\t\t'tasks': [\n\t\t\t\t{\n\t\t\t\t\t'label': 'Run Dev',\n\t\t\t\t\t'type': 'shell',\n\t\t\t\t\t'command': './scripts/code.sh',\n\t\t\t\t\t'windows': {\n\t\t\t\t\t\t'command': '.\\\\scripts\\\\code.bat'\n\t\t\t\t\t},\n\t\t\t\t\t'problemMatcher': []\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['tasks'], value: expectedTasksConfiguration }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tconst actual = testObject.getValue(TasksSchemaProperties.Tasks);\n\t\tassert.deepStrictEqual(actual, expectedTasksConfiguration);\n\t}));\n\n\ttest('inspect tasks configuration', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst expectedTasksConfiguration = {\n\t\t\t'version': '2.0.0',\n\t\t\t'tasks': [\n\t\t\t\t{\n\t\t\t\t\t'label': 'Run Dev',\n\t\t\t\t\t'type': 'shell',\n\t\t\t\t\t'command': './scripts/code.sh',\n\t\t\t\t\t'windows': {\n\t\t\t\t\t\t'command': '.\\\\scripts\\\\code.bat'\n\t\t\t\t\t},\n\t\t\t\t\t'problemMatcher': []\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t\tawait jsonEditingServce.write(workspaceContextService.getWorkspace().configuration!, [{ path: ['tasks'], value: expectedTasksConfiguration }], true);\n\t\tawait testObject.reloadConfiguration();\n\t\tconst actual = testObject.inspect('tasks').workspaceValue;\n\t\tassert.deepStrictEqual(actual, expectedTasksConfiguration);\n\t}));\n\n\ttest('update user configuration', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.workspace.testSetting', 'userValue', ConfigurationTarget.USER);\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testSetting'), 'userValue');\n\t}));\n\n\ttest('update user configuration should trigger change event before promise is resolve', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\tawait testObject.updateValue('configurationService.workspace.testSetting', 'userValue', ConfigurationTarget.USER);\n\t\tassert.ok(target.called);\n\t}));\n\n\ttest('update workspace configuration', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.workspace.testSetting', 'workspaceValue', ConfigurationTarget.WORKSPACE);\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testSetting'), 'workspaceValue');\n\t}));\n\n\ttest('update workspace configuration should trigger change event before promise is resolve', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\tawait testObject.updateValue('configurationService.workspace.testSetting', 'workspaceValue', ConfigurationTarget.WORKSPACE);\n\t\tassert.ok(target.called);\n\t}));\n\n\ttest('update application setting into workspace configuration in a workspace is not supported', () => {\n\t\treturn testObject.updateValue('configurationService.workspace.applicationSetting', 'workspaceValue', {}, ConfigurationTarget.WORKSPACE, { donotNotifyError: true })\n\t\t\t.then(() => assert.fail('Should not be supported'), (e) => assert.strictEqual(e.code, ConfigurationEditingErrorCode.ERROR_INVALID_WORKSPACE_CONFIGURATION_APPLICATION));\n\t});\n\n\ttest('update machine setting into workspace configuration in a workspace is not supported', () => {\n\t\treturn testObject.updateValue('configurationService.workspace.machineSetting', 'workspaceValue', {}, ConfigurationTarget.WORKSPACE, { donotNotifyError: true })\n\t\t\t.then(() => assert.fail('Should not be supported'), (e) => assert.strictEqual(e.code, ConfigurationEditingErrorCode.ERROR_INVALID_WORKSPACE_CONFIGURATION_MACHINE));\n\t});\n\n\ttest('update workspace folder configuration', () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\treturn testObject.updateValue('configurationService.workspace.testResourceSetting', 'workspaceFolderValue', { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER)\n\t\t\t.then(() => assert.strictEqual(testObject.getValue('configurationService.workspace.testResourceSetting', { resource: workspace.folders[0].uri }), 'workspaceFolderValue'));\n\t});\n\n\ttest('update resource language configuration in workspace folder', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\tawait testObject.updateValue('configurationService.workspace.testLanguageSetting', 'workspaceFolderValue', { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testLanguageSetting', { resource: workspace.folders[0].uri }), 'workspaceFolderValue');\n\t}));\n\n\ttest('update workspace folder configuration should trigger change event before promise is resolve', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\tawait testObject.updateValue('configurationService.workspace.testResourceSetting', 'workspaceFolderValue', { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tassert.ok(target.called);\n\t}));\n\n\ttest('update workspace folder configuration second time should trigger change event before promise is resolve', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\tawait testObject.updateValue('configurationService.workspace.testResourceSetting', 'workspaceFolderValue', { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\tawait testObject.updateValue('configurationService.workspace.testResourceSetting', 'workspaceFolderValue2', { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tassert.ok(target.called);\n\t}));\n\n\ttest('update machine overridable setting in folder', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\tawait testObject.updateValue('configurationService.workspace.machineOverridableSetting', 'workspaceFolderValue', { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.machineOverridableSetting', { resource: workspace.folders[0].uri }), 'workspaceFolderValue');\n\t}));\n\n\ttest('update memory configuration', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait testObject.updateValue('configurationService.workspace.testSetting', 'memoryValue', ConfigurationTarget.MEMORY);\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testSetting'), 'memoryValue');\n\t}));\n\n\ttest('update memory configuration should trigger change event before promise is resolve', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst target = sinon.spy();\n\t\tdisposables.add(testObject.onDidChangeConfiguration(target));\n\t\tawait testObject.updateValue('configurationService.workspace.testSetting', 'memoryValue', ConfigurationTarget.MEMORY);\n\t\tassert.ok(target.called);\n\t}));\n\n\ttest('remove setting from all targets', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\tconst key = 'configurationService.workspace.testResourceSetting';\n\t\tawait testObject.updateValue(key, 'workspaceFolderValue', { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tawait testObject.updateValue(key, 'workspaceValue', ConfigurationTarget.WORKSPACE);\n\t\tawait testObject.updateValue(key, 'userValue', ConfigurationTarget.USER);\n\n\t\tawait testObject.updateValue(key, undefined, { resource: workspace.folders[0].uri });\n\t\tawait testObject.reloadConfiguration();\n\n\t\tconst actual = testObject.inspect(key, { resource: workspace.folders[0].uri });\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t}));\n\n\ttest('update tasks configuration in a folder', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\tawait testObject.updateValue('tasks', { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] }, { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\tassert.deepStrictEqual(testObject.getValue(TasksSchemaProperties.Tasks, { resource: workspace.folders[0].uri }), { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] });\n\t}));\n\n\ttest('update launch configuration in a workspace', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\tawait testObject.updateValue('launch', { 'version': '1.0.0', configurations: [{ 'name': 'myLaunch' }] }, { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE, { donotNotifyError: true });\n\t\tassert.deepStrictEqual(testObject.getValue('launch'), { 'version': '1.0.0', configurations: [{ 'name': 'myLaunch' }] });\n\t}));\n\n\ttest('update tasks configuration in a workspace', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspace = workspaceContextService.getWorkspace();\n\t\tconst tasks = { 'version': '2.0.0', tasks: [{ 'label': 'myTask' }] };\n\t\tawait testObject.updateValue('tasks', tasks, { resource: workspace.folders[0].uri }, ConfigurationTarget.WORKSPACE, { donotNotifyError: true });\n\t\tassert.deepStrictEqual(testObject.getValue(TasksSchemaProperties.Tasks), tasks);\n\t}));\n\n\ttest('configuration of newly added folder is available on configuration change event', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst workspaceService = <WorkspaceService>testObject;\n\t\tconst uri = workspaceService.getWorkspace().folders[1].uri;\n\t\tawait workspaceService.removeFolders([uri]);\n\t\tawait fileService.writeFile(joinPath(uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testResourceSetting\": \"workspaceFolderValue\" }'));\n\n\t\treturn new Promise<void>((c, e) => {\n\t\t\tdisposables.add(testObject.onDidChangeConfiguration(() => {\n\t\t\t\ttry {\n\t\t\t\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testResourceSetting', { resource: uri }), 'workspaceFolderValue');\n\t\t\t\t\tc();\n\t\t\t\t} catch (error) {\n\t\t\t\t\te(error);\n\t\t\t\t}\n\t\t\t}));\n\t\t\tworkspaceService.addFolders([{ uri }]);\n\t\t});\n\t}));\n\n\ttest('restricted setting is read from workspace folders when workspace is trusted', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(true);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.testRestrictedSetting1\": \"userValue\", \"configurationService.workspace.testRestrictedSetting2\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.testRestrictedSetting1': 'workspaceValue' } }], true);\n\t\tawait fileService.writeFile(joinPath(testObject.getWorkspace().folders[1].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testRestrictedSetting2\": \"workspaceFolder2Value\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testRestrictedSetting1', { resource: testObject.getWorkspace().folders[0].uri }), 'workspaceValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testRestrictedSetting2', { resource: testObject.getWorkspace().folders[1].uri }), 'workspaceFolder2Value');\n\t\tassert.ok(testObject.restrictedSettings.default.includes('configurationService.workspace.testRestrictedSetting1'));\n\t\tassert.ok(testObject.restrictedSettings.default.includes('configurationService.workspace.testRestrictedSetting2'));\n\t\tassert.strictEqual(testObject.restrictedSettings.userLocal, undefined);\n\t\tassert.strictEqual(testObject.restrictedSettings.userRemote, undefined);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspace, ['configurationService.workspace.testRestrictedSetting1']);\n\t\tassert.strictEqual(testObject.restrictedSettings.workspaceFolder?.size, 1);\n\t\tassert.strictEqual(testObject.restrictedSettings.workspaceFolder?.get(testObject.getWorkspace().folders[0].uri), undefined);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspaceFolder?.get(testObject.getWorkspace().folders[1].uri), ['configurationService.workspace.testRestrictedSetting2']);\n\t}));\n\n\ttest('restricted setting is not read from workspace when workspace is not trusted', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\ttestObject.updateWorkspaceTrust(false);\n\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.testRestrictedSetting1\": \"userValue\", \"configurationService.workspace.testRestrictedSetting2\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.testRestrictedSetting1': 'workspaceValue' } }], true);\n\t\tawait fileService.writeFile(joinPath(testObject.getWorkspace().folders[1].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.testRestrictedSetting2\": \"workspaceFolder2Value\" }'));\n\t\tawait testObject.reloadConfiguration();\n\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testRestrictedSetting1', { resource: testObject.getWorkspace().folders[0].uri }), 'userValue');\n\t\tassert.strictEqual(testObject.getValue('configurationService.workspace.testRestrictedSetting2', { resource: testObject.getWorkspace().folders[1].uri }), 'userValue');\n\t\tassert.ok(testObject.restrictedSettings.default.includes('configurationService.workspace.testRestrictedSetting1'));\n\t\tassert.ok(testObject.restrictedSettings.default.includes('configurationService.workspace.testRestrictedSetting2'));\n\t\tassert.strictEqual(testObject.restrictedSettings.userLocal, undefined);\n\t\tassert.strictEqual(testObject.restrictedSettings.userRemote, undefined);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspace, ['configurationService.workspace.testRestrictedSetting1']);\n\t\tassert.strictEqual(testObject.restrictedSettings.workspaceFolder?.size, 1);\n\t\tassert.strictEqual(testObject.restrictedSettings.workspaceFolder?.get(testObject.getWorkspace().folders[0].uri), undefined);\n\t\tassert.deepStrictEqual(testObject.restrictedSettings.workspaceFolder?.get(testObject.getWorkspace().folders[1].uri), ['configurationService.workspace.testRestrictedSetting2']);\n\t}));\n\n\ttest('remove an unregistered setting', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tconst key = 'configurationService.workspace.unknownSetting';\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.workspace.unknownSetting\": \"userValue\" }'));\n\t\tawait jsonEditingServce.write((workspaceContextService.getWorkspace().configuration!), [{ path: ['settings'], value: { 'configurationService.workspace.unknownSetting': 'workspaceValue' } }], true);\n\t\tawait fileService.writeFile(joinPath(workspaceContextService.getWorkspace().folders[0].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.unknownSetting\": \"workspaceFolderValue1\" }'));\n\t\tawait fileService.writeFile(joinPath(workspaceContextService.getWorkspace().folders[1].uri, '.vscode', 'settings.json'), VSBuffer.fromString('{ \"configurationService.workspace.unknownSetting\": \"workspaceFolderValue2\" }'));\n\n\t\tawait testObject.reloadConfiguration();\n\t\tawait testObject.updateValue(key, undefined, { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\n\t\tlet actual = testObject.inspect(key, { resource: workspaceContextService.getWorkspace().folders[0].uri });\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\n\t\tawait testObject.updateValue(key, undefined, { resource: workspaceContextService.getWorkspace().folders[1].uri });\n\t\tactual = testObject.inspect(key, { resource: workspaceContextService.getWorkspace().folders[1].uri });\n\t\tassert.strictEqual(actual.userValue, undefined);\n\t\tassert.strictEqual(actual.workspaceValue, undefined);\n\t\tassert.strictEqual(actual.workspaceFolderValue, undefined);\n\t}));\n\n});\n\nsuite('WorkspaceConfigurationService - Remote Folder', () => {\n\n\tlet testObject: WorkspaceService, folder: URI,\n\t\tmachineSettingsResource: URI, remoteSettingsResource: URI, fileSystemProvider: InMemoryFileSystemProvider, resolveRemoteEnvironment: () => void,\n\t\tinstantiationService: TestInstantiationService, fileService: IFileService, environmentService: BrowserWorkbenchEnvironmentService, userDataProfileService: IUserDataProfileService;\n\tconst remoteAuthority = 'configuraiton-tests';\n\tconst configurationRegistry = Registry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration);\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuiteSetup(() => {\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.remote.applicationSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION\n\t\t\t\t},\n\t\t\t\t'configurationService.remote.machineSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE\n\t\t\t\t},\n\t\t\t\t'configurationService.remote.applicationMachineSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.APPLICATION_MACHINE\n\t\t\t\t},\n\t\t\t\t'configurationService.remote.machineOverridableSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE_OVERRIDABLE\n\t\t\t\t},\n\t\t\t\t'configurationService.remote.testSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.RESOURCE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tsetup(async () => {\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tfileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst appSettingsHome = joinPath(ROOT, 'user');\n\t\tfolder = joinPath(ROOT, 'a');\n\t\tawait fileService.createFolder(folder);\n\t\tawait fileService.createFolder(appSettingsHome);\n\t\tmachineSettingsResource = joinPath(ROOT, 'machine-settings.json');\n\t\tremoteSettingsResource = machineSettingsResource.with({ scheme: Schemas.vscodeRemote, authority: remoteAuthority });\n\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tenvironmentService = TestEnvironmentService;\n\t\tconst remoteEnvironmentPromise = new Promise<Partial<IRemoteAgentEnvironment>>(c => resolveRemoteEnvironment = () => c({ settingsPath: remoteSettingsResource }));\n\t\tconst remoteAgentService = instantiationService.stub(IRemoteAgentService, <Partial<IRemoteAgentService>>{ getEnvironment: () => remoteEnvironmentPromise });\n\t\tconst configurationCache: IConfigurationCache = { read: () => Promise.resolve(''), write: () => Promise.resolve(), remove: () => Promise.resolve(), needsCaching: () => false };\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = instantiationService.stub(IUserDataProfilesService, disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService)));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, new NullLogService()))));\n\t\tuserDataProfileService = instantiationService.stub(IUserDataProfileService, disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile)));\n\t\ttestObject = disposables.add(new WorkspaceService({ configurationCache, remoteAuthority }, environmentService, userDataProfileService, userDataProfilesService, fileService, remoteAgentService, uriIdentityService, new NullLogService(), new NullPolicyService()));\n\t\tinstantiationService.stub(IWorkspaceContextService, testObject);\n\t\tinstantiationService.stub(IConfigurationService, testObject);\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\t\tinstantiationService.stub(IFileService, fileService);\n\t});\n\n\tasync function initialize(): Promise<void> {\n\t\tawait testObject.initialize(convertToWorkspacePayload(folder));\n\t\tinstantiationService.stub(ITextFileService, disposables.add(instantiationService.createInstance(TestTextFileService)));\n\t\tinstantiationService.stub(ITextModelService, <ITextModelService>disposables.add(instantiationService.createInstance(TextModelResolverService)));\n\t\tinstantiationService.stub(IJSONEditingService, instantiationService.createInstance(JSONEditingService));\n\t\ttestObject.acquireInstantiationService(instantiationService);\n\t}\n\n\tfunction registerRemoteFileSystemProvider(): void {\n\t\tdisposables.add(instantiationService.get(IFileService).registerProvider(Schemas.vscodeRemote, new RemoteFileSystemProvider(fileSystemProvider, remoteAuthority)));\n\t}\n\n\tfunction registerRemoteFileSystemProviderOnActivation(): void {\n\t\tconst disposable = disposables.add(instantiationService.get(IFileService).onWillActivateFileSystemProvider(e => {\n\t\t\tif (e.scheme === Schemas.vscodeRemote) {\n\t\t\t\tdisposable.dispose();\n\t\t\t\te.join(Promise.resolve().then(() => registerRemoteFileSystemProvider()));\n\t\t\t}\n\t\t}));\n\t}\n\n\ttest('remote machine settings override globals', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(machineSettingsResource, VSBuffer.fromString('{ \"configurationService.remote.machineSetting\": \"remoteValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.machineSetting'), 'remoteValue');\n\t}));\n\n\ttest('remote machine settings override globals after remote provider is registered on activation', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(machineSettingsResource, VSBuffer.fromString('{ \"configurationService.remote.machineSetting\": \"remoteValue\" }'));\n\t\tresolveRemoteEnvironment();\n\t\tregisterRemoteFileSystemProviderOnActivation();\n\t\tawait initialize();\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.machineSetting'), 'remoteValue');\n\t}));\n\n\ttest('remote machine settings override globals after remote environment is resolved', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(machineSettingsResource, VSBuffer.fromString('{ \"configurationService.remote.machineSetting\": \"remoteValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tawait initialize();\n\t\tconst promise = new Promise<void>((c, e) => {\n\t\t\tdisposables.add(testObject.onDidChangeConfiguration(event => {\n\t\t\t\ttry {\n\t\t\t\t\tassert.strictEqual(event.source, ConfigurationTarget.USER);\n\t\t\t\t\tassert.deepStrictEqual([...event.affectedKeys], ['configurationService.remote.machineSetting']);\n\t\t\t\t\tassert.strictEqual(testObject.getValue('configurationService.remote.machineSetting'), 'remoteValue');\n\t\t\t\t\tc();\n\t\t\t\t} catch (error) {\n\t\t\t\t\te(error);\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\t\tresolveRemoteEnvironment();\n\t\treturn promise;\n\t}));\n\n\ttest('remote settings override globals after remote provider is registered on activation and remote environment is resolved', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(machineSettingsResource, VSBuffer.fromString('{ \"configurationService.remote.machineSetting\": \"remoteValue\" }'));\n\t\tregisterRemoteFileSystemProviderOnActivation();\n\t\tawait initialize();\n\t\tconst promise = new Promise<void>((c, e) => {\n\t\t\tdisposables.add(testObject.onDidChangeConfiguration(event => {\n\t\t\t\ttry {\n\t\t\t\t\tassert.strictEqual(event.source, ConfigurationTarget.USER);\n\t\t\t\t\tassert.deepStrictEqual([...event.affectedKeys], ['configurationService.remote.machineSetting']);\n\t\t\t\t\tassert.strictEqual(testObject.getValue('configurationService.remote.machineSetting'), 'remoteValue');\n\t\t\t\t\tc();\n\t\t\t\t} catch (error) {\n\t\t\t\t\te(error);\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\t\tresolveRemoteEnvironment();\n\t\treturn promise;\n\t}));\n\n\ttest('machine settings in local user settings does not override defaults', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.remote.machineSetting\": \"globalValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.machineSetting'), 'isSet');\n\t}));\n\n\ttest('remote application machine settings override globals', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(machineSettingsResource, VSBuffer.fromString('{ \"configurationService.remote.applicationMachineSetting\": \"remoteValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.applicationMachineSetting'), 'remoteValue');\n\t}));\n\n\ttest('remote application machine settings override globals after remote provider is registered on activation', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(machineSettingsResource, VSBuffer.fromString('{ \"configurationService.remote.applicationMachineSetting\": \"remoteValue\" }'));\n\t\tresolveRemoteEnvironment();\n\t\tregisterRemoteFileSystemProviderOnActivation();\n\t\tawait initialize();\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.applicationMachineSetting'), 'remoteValue');\n\t}));\n\n\ttest('remote application machine settings override globals after remote environment is resolved', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(machineSettingsResource, VSBuffer.fromString('{ \"configurationService.remote.applicationMachineSetting\": \"remoteValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tawait initialize();\n\t\tconst promise = new Promise<void>((c, e) => {\n\t\t\tdisposables.add(testObject.onDidChangeConfiguration(event => {\n\t\t\t\ttry {\n\t\t\t\t\tassert.strictEqual(event.source, ConfigurationTarget.USER);\n\t\t\t\t\tassert.deepStrictEqual([...event.affectedKeys], ['configurationService.remote.applicationMachineSetting']);\n\t\t\t\t\tassert.strictEqual(testObject.getValue('configurationService.remote.applicationMachineSetting'), 'remoteValue');\n\t\t\t\t\tc();\n\t\t\t\t} catch (error) {\n\t\t\t\t\te(error);\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\t\tresolveRemoteEnvironment();\n\t\treturn promise;\n\t}));\n\n\ttest('remote application machine settings override globals after remote provider is registered on activation and remote environment is resolved', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(machineSettingsResource, VSBuffer.fromString('{ \"configurationService.remote.applicationMachineSetting\": \"remoteValue\" }'));\n\t\tregisterRemoteFileSystemProviderOnActivation();\n\t\tawait initialize();\n\t\tconst promise = new Promise<void>((c, e) => {\n\t\t\tdisposables.add(testObject.onDidChangeConfiguration(event => {\n\t\t\t\ttry {\n\t\t\t\t\tassert.strictEqual(event.source, ConfigurationTarget.USER);\n\t\t\t\t\tassert.deepStrictEqual([...event.affectedKeys], ['configurationService.remote.applicationMachineSetting']);\n\t\t\t\t\tassert.strictEqual(testObject.getValue('configurationService.remote.applicationMachineSetting'), 'remoteValue');\n\t\t\t\t\tc();\n\t\t\t\t} catch (error) {\n\t\t\t\t\te(error);\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\t\tresolveRemoteEnvironment();\n\t\treturn promise;\n\t}));\n\n\ttest('application machine settings in local user settings does not override defaults', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.remote.applicationMachineSetting\": \"globalValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.applicationMachineSetting'), 'isSet');\n\t}));\n\n\ttest('machine overridable settings in local user settings does not override defaults', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.remote.machineOverridableSetting\": \"globalValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.machineOverridableSetting'), 'isSet');\n\t}));\n\n\ttest('non machine setting is written in local settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tawait testObject.updateValue('configurationService.remote.applicationSetting', 'applicationValue');\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.inspect('configurationService.remote.applicationSetting').userLocalValue, 'applicationValue');\n\t}));\n\n\ttest('machine setting is written in remote settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tawait testObject.updateValue('configurationService.remote.machineSetting', 'machineValue');\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.inspect('configurationService.remote.machineSetting').userRemoteValue, 'machineValue');\n\t}));\n\n\ttest('application machine setting is written in remote settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tawait testObject.updateValue('configurationService.remote.applicationMachineSetting', 'machineValue');\n\t\tawait testObject.reloadConfiguration();\n\t\tconst actual = testObject.inspect('configurationService.remote.applicationMachineSetting');\n\t\tassert.strictEqual(actual.userRemoteValue, 'machineValue');\n\t}));\n\n\ttest('machine overridable setting is written in remote settings', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tawait testObject.updateValue('configurationService.remote.machineOverridableSetting', 'machineValue');\n\t\tawait testObject.reloadConfiguration();\n\t\tassert.strictEqual(testObject.inspect('configurationService.remote.machineOverridableSetting').userRemoteValue, 'machineValue');\n\t}));\n\n\ttest('machine settings in local user settings does not override defaults after defalts are registered ', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.remote.newMachineSetting\": \"userValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.remote.newMachineSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.newMachineSetting'), 'isSet');\n\t}));\n\n\ttest('machine overridable settings in local user settings does not override defaults after defaults are registered ', () => runWithFakedTimers<void>({ useFakeTimers: true }, async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"configurationService.remote.newMachineOverridableSetting\": \"userValue\" }'));\n\t\tregisterRemoteFileSystemProvider();\n\t\tresolveRemoteEnvironment();\n\t\tawait initialize();\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationService.remote.newMachineOverridableSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tscope: ConfigurationScope.MACHINE_OVERRIDABLE\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(testObject.getValue('configurationService.remote.newMachineOverridableSetting'), 'isSet');\n\t}));\n\n});\n\nfunction getWorkspaceId(configPath: URI): string {\n\tlet workspaceConfigPath = configPath.toString();\n\tif (!isLinux) {\n\t\tworkspaceConfigPath = workspaceConfigPath.toLowerCase(); // sanitize for platform file system\n\t}\n\treturn hash(workspaceConfigPath).toString(16);\n}\n\nfunction getWorkspaceIdentifier(configPath: URI): IWorkspaceIdentifier {\n\treturn {\n\t\tconfigPath,\n\t\tid: getWorkspaceId(configPath)\n\t};\n}\n"]}