{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/configuration/test/browser/configurationEditing.test.ts","vs/workbench/services/configuration/test/browser/configurationEditing.test.ts"],"names":[],"mappings":"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","file":"configurationEditing.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as sinon from 'sinon';\nimport assert from 'assert';\nimport * as json from '../../../../../base/common/json.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { Registry } from '../../../../../platform/registry/common/platform.js';\nimport { IEnvironmentService } from '../../../../../platform/environment/common/environment.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { TestEnvironmentService, TestTextFileService, workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\nimport * as uuid from '../../../../../base/common/uuid.js';\nimport { IConfigurationRegistry, Extensions as ConfigurationExtensions } from '../../../../../platform/configuration/common/configurationRegistry.js';\nimport { WorkspaceService } from '../../browser/configurationService.js';\nimport { ConfigurationEditing, ConfigurationEditingErrorCode, EditableConfigurationTarget } from '../../common/configurationEditing.js';\nimport { WORKSPACE_STANDALONE_CONFIGURATIONS, FOLDER_SETTINGS_PATH, USER_STANDALONE_CONFIGURATIONS, IConfigurationCache } from '../../common/configuration.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ITextFileService } from '../../../textfile/common/textfiles.js';\nimport { ITextModelService } from '../../../../../editor/common/services/resolverService.js';\nimport { TextModelResolverService } from '../../../textmodelResolver/common/textModelResolverService.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { CommandService } from '../../../commands/common/commandService.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { IRemoteAgentService } from '../../../remote/common/remoteAgentService.js';\nimport { FileService } from '../../../../../platform/files/common/fileService.js';\nimport { NullLogService } from '../../../../../platform/log/common/log.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { KeybindingsEditingService, IKeybindingEditingService } from '../../../keybinding/common/keybindingEditing.js';\nimport { FileUserDataProvider } from '../../../../../platform/userData/common/fileUserDataProvider.js';\nimport { UriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentityService.js';\nimport { toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { InMemoryFileSystemProvider } from '../../../../../platform/files/common/inMemoryFilesystemProvider.js';\nimport { joinPath } from '../../../../../base/common/resources.js';\nimport { VSBuffer } from '../../../../../base/common/buffer.js';\nimport { RemoteAgentService } from '../../../remote/browser/remoteAgentService.js';\nimport { getSingleFolderWorkspaceIdentifier } from '../../../workspaces/browser/workspaces.js';\nimport { IUserDataProfilesService, UserDataProfilesService } from '../../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { hash } from '../../../../../base/common/hash.js';\nimport { FilePolicyService } from '../../../../../platform/policy/common/filePolicyService.js';\nimport { runWithFakedTimers } from '../../../../../base/test/common/timeTravelScheduler.js';\nimport { UserDataProfileService } from '../../../userDataProfile/common/userDataProfileService.js';\nimport { IUserDataProfileService } from '../../../userDataProfile/common/userDataProfile.js';\nimport { IBrowserWorkbenchEnvironmentService } from '../../../environment/browser/environmentService.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { PolicyCategory } from '../../../../../base/common/policy.js';\n\nconst ROOT = URI.file('tests').with({ scheme: 'vscode-tests' });\n\nclass ConfigurationCache implements IConfigurationCache {\n\tneedsCaching(resource: URI): boolean { return false; }\n\tasync read(): Promise<string> { return ''; }\n\tasync write(): Promise<void> { }\n\tasync remove(): Promise<void> { }\n}\n\nsuite('ConfigurationEditing', () => {\n\n\tlet instantiationService: TestInstantiationService;\n\tlet userDataProfileService: IUserDataProfileService;\n\tlet environmentService: IBrowserWorkbenchEnvironmentService;\n\tlet fileService: IFileService;\n\tlet workspaceService: WorkspaceService;\n\tlet testObject: ConfigurationEditing;\n\n\tsuiteSetup(() => {\n\t\tconst configurationRegistry = Registry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration);\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationEditing.service.testSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet'\n\t\t\t\t},\n\t\t\t\t'configurationEditing.service.testSettingTwo': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet'\n\t\t\t\t},\n\t\t\t\t'configurationEditing.service.testSettingThree': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet'\n\t\t\t\t},\n\t\t\t\t'configurationEditing.service.policySetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tpolicy: {\n\t\t\t\t\t\tname: 'configurationEditing.service.policySetting',\n\t\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\t\tlocalization: { description: { key: '', value: '' } }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(async () => {\n\t\tdisposables.add(toDisposable(() => sinon.restore()));\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst workspaceFolder = joinPath(ROOT, uuid.generateUuid());\n\t\tawait fileService.createFolder(workspaceFolder);\n\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tenvironmentService = TestEnvironmentService;\n\t\tenvironmentService.policyFile = joinPath(workspaceFolder, 'policies.json');\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = instantiationService.stub(IUserDataProfilesService, disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService)));\n\t\tuserDataProfileService = disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile));\n\t\tconst remoteAgentService = disposables.add(instantiationService.createInstance(RemoteAgentService));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, logService))));\n\t\tinstantiationService.stub(IFileService, fileService);\n\t\tinstantiationService.stub(IRemoteAgentService, remoteAgentService);\n\t\tworkspaceService = disposables.add(new WorkspaceService({ configurationCache: new ConfigurationCache() }, environmentService, userDataProfileService, userDataProfilesService, fileService, remoteAgentService, uriIdentityService, new NullLogService(), disposables.add(new FilePolicyService(environmentService.policyFile, fileService, logService))));\n\t\tawait workspaceService.initialize({\n\t\t\tid: hash(workspaceFolder.toString()).toString(16),\n\t\t\turi: workspaceFolder\n\t\t});\n\t\tinstantiationService.stub(IWorkspaceContextService, workspaceService);\n\n\t\tawait workspaceService.initialize(getSingleFolderWorkspaceIdentifier(workspaceFolder));\n\t\tinstantiationService.stub(IConfigurationService, workspaceService);\n\t\tinstantiationService.stub(IKeybindingEditingService, disposables.add(instantiationService.createInstance(KeybindingsEditingService)));\n\t\tinstantiationService.stub(ITextFileService, disposables.add(instantiationService.createInstance(TestTextFileService)));\n\t\tinstantiationService.stub(ITextModelService, <ITextModelService>disposables.add(instantiationService.createInstance(TextModelResolverService)));\n\t\tinstantiationService.stub(ICommandService, CommandService);\n\t\ttestObject = instantiationService.createInstance(ConfigurationEditing, null);\n\t});\n\n\ttest('errors cases - invalid key', async () => {\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'unknown.key', value: 'value' }, { donotNotifyError: true });\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_UNKNOWN_KEY);\n\t\t\treturn;\n\t\t}\n\t\tassert.fail('Should fail with ERROR_UNKNOWN_KEY');\n\t});\n\n\ttest('errors cases - no workspace', async () => {\n\t\tawait workspaceService.initialize({ id: uuid.generateUuid() });\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'configurationEditing.service.testSetting', value: 'value' }, { donotNotifyError: true });\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_NO_WORKSPACE_OPENED);\n\t\t\treturn;\n\t\t}\n\t\tassert.fail('Should fail with ERROR_NO_WORKSPACE_OPENED');\n\t});\n\n\ttest('errors cases - invalid configuration', async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString(',,,,,,,,,,,,,,'));\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: 'value' }, { donotNotifyError: true });\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_INVALID_CONFIGURATION);\n\t\t\treturn;\n\t\t}\n\t\tassert.fail('Should fail with ERROR_INVALID_CONFIGURATION');\n\t});\n\n\ttest('errors cases - invalid global tasks configuration', async () => {\n\t\tconst resource = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(resource, VSBuffer.fromString(',,,,,,,,,,,,,,'));\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks.configurationEditing.service.testSetting', value: 'value' }, { donotNotifyError: true });\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_INVALID_CONFIGURATION);\n\t\t\treturn;\n\t\t}\n\t\tassert.fail('Should fail with ERROR_INVALID_CONFIGURATION');\n\t});\n\n\ttest('errors cases - dirty', async () => {\n\t\tinstantiationService.stub(ITextFileService, 'isDirty', true);\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: 'value' }, { donotNotifyError: true });\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_CONFIGURATION_FILE_DIRTY);\n\t\t\treturn;\n\t\t}\n\t\tassert.fail('Should fail with ERROR_CONFIGURATION_FILE_DIRTY error.');\n\t});\n\n\ttest('do not notify error', async () => {\n\t\tinstantiationService.stub(ITextFileService, 'isDirty', true);\n\t\tconst target = sinon.stub();\n\t\tinstantiationService.stub(INotificationService, <INotificationService>{ prompt: target, _serviceBrand: undefined, filter: false, onDidChangeFilter: undefined!, notify: null!, error: null!, info: null!, warn: null!, status: null!, setFilter: null!, getFilter: null!, getFilters: null!, removeFilter: null! });\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: 'value' }, { donotNotifyError: true });\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(false, target.calledOnce);\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_CONFIGURATION_FILE_DIRTY);\n\t\t\treturn;\n\t\t}\n\t\tassert.fail('Should fail with ERROR_CONFIGURATION_FILE_DIRTY error.');\n\t});\n\n\ttest('errors cases - ERROR_POLICY_CONFIGURATION', async () => {\n\t\tawait runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst promise = Event.toPromise(instantiationService.get(IConfigurationService).onDidChangeConfiguration);\n\t\t\tawait fileService.writeFile(environmentService.policyFile!, VSBuffer.fromString('{ \"configurationEditing.service.policySetting\": \"policyValue\" }'));\n\t\t\tawait promise;\n\t\t});\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.policySetting', value: 'value' }, { donotNotifyError: true });\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_POLICY_CONFIGURATION);\n\t\t\treturn;\n\t\t}\n\t\tassert.fail('Should fail with ERROR_POLICY_CONFIGURATION');\n\t});\n\n\ttest('write policy setting - when not set', async () => {\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.policySetting', value: 'value' }, { donotNotifyError: true });\n\t\tconst contents = await fileService.readFile(userDataProfileService.currentProfile.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['configurationEditing.service.policySetting'], 'value');\n\t});\n\n\ttest('write one setting - empty file', async () => {\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: 'value' });\n\t\tconst contents = await fileService.readFile(userDataProfileService.currentProfile.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['configurationEditing.service.testSetting'], 'value');\n\t});\n\n\ttest('write one setting - existing file', async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(userDataProfileService.currentProfile.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['configurationEditing.service.testSetting'], 'value');\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('remove an existing setting - existing file', async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\", \"configurationEditing.service.testSetting\": \"value\" }'));\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: undefined });\n\n\t\tconst contents = await fileService.readFile(userDataProfileService.currentProfile.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.deepStrictEqual(Object.keys(parsed), ['my.super.setting']);\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('remove non existing setting - existing file', async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: undefined });\n\n\t\tconst contents = await fileService.readFile(userDataProfileService.currentProfile.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.deepStrictEqual(Object.keys(parsed), ['my.super.setting']);\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('write overridable settings to user settings', async () => {\n\t\tconst key = '[language]';\n\t\tconst value = { 'configurationEditing.service.testSetting': 'overridden value' };\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key, value });\n\n\t\tconst contents = await fileService.readFile(userDataProfileService.currentProfile.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.deepStrictEqual(parsed[key], value);\n\t});\n\n\ttest('write overridable settings to workspace settings', async () => {\n\t\tconst key = '[language]';\n\t\tconst value = { 'configurationEditing.service.testSetting': 'overridden value' };\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key, value });\n\n\t\tconst contents = await fileService.readFile(joinPath(workspaceService.getWorkspace().folders[0].uri, FOLDER_SETTINGS_PATH));\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.deepStrictEqual(parsed[key], value);\n\t});\n\n\ttest('write overridable settings to workspace folder settings', async () => {\n\t\tconst key = '[language]';\n\t\tconst value = { 'configurationEditing.service.testSetting': 'overridden value' };\n\t\tconst folderSettingsFile = joinPath(workspaceService.getWorkspace().folders[0].uri, FOLDER_SETTINGS_PATH);\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE_FOLDER, { key, value }, { scopes: { resource: folderSettingsFile } });\n\n\t\tconst contents = await fileService.readFile(folderSettingsFile);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.deepStrictEqual(parsed[key], value);\n\t});\n\n\ttest('write workspace standalone setting - empty file', async () => {\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['service.testSetting'], 'value');\n\t});\n\n\ttest('write user standalone setting - empty file', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['service.testSetting'], 'value');\n\t});\n\n\ttest('write workspace standalone setting - existing file', async () => {\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['service.testSetting'], 'value');\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('write user standalone setting - existing file', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['service.testSetting'], 'value');\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('write user standalone mcp setting - existing file', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['mcp']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'mcp.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['service.testSetting'], 'value');\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('write workspace standalone setting - empty file - full JSON', async () => {\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write user standalone setting - empty file - full JSON', async () => {\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write workspace standalone setting - existing file - full JSON', async () => {\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write user standalone setting - existing file - full JSON', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write workspace standalone setting - existing file with JSON errors - full JSON', async () => {\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": ')); // invalid JSON\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write user standalone setting - existing file with JSON errors - full JSON', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": ')); // invalid JSON\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write workspace standalone setting should replace complete file', async () => {\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString(`{\n\t\t\t\"version\": \"1.0.0\",\n\t\t\t\"tasks\": [\n\t\t\t\t{\n\t\t\t\t\t\"taskName\": \"myTask1\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"taskName\": \"myTask2\"\n\t\t\t\t}\n\t\t\t]\n\t\t}`));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask1' }] } });\n\n\t\tconst actual = await fileService.readFile(target);\n\t\tconst expected = JSON.stringify({ 'version': '1.0.0', tasks: [{ 'taskName': 'myTask1' }] }, null, '\\t');\n\t\tassert.strictEqual(actual.value.toString(), expected);\n\t});\n\n\ttest('write user standalone setting should replace complete file', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString(`{\n\t\t\t\"version\": \"1.0.0\",\n\t\t\t\"tasks\": [\n\t\t\t\t{\n\t\t\t\t\t\"taskName\": \"myTask1\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"taskName\": \"myTask2\"\n\t\t\t\t}\n\t\t\t]\n\t\t}`));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask1' }] } });\n\n\t\tconst actual = await fileService.readFile(target);\n\t\tconst expected = JSON.stringify({ 'version': '1.0.0', tasks: [{ 'taskName': 'myTask1' }] }, null, '\\t');\n\t\tassert.strictEqual(actual.value.toString(), expected);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as sinon from 'sinon';\nimport assert from 'assert';\nimport * as json from '../../../../../base/common/json.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { Registry } from '../../../../../platform/registry/common/platform.js';\nimport { IEnvironmentService } from '../../../../../platform/environment/common/environment.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { TestEnvironmentService, TestTextFileService, workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\nimport * as uuid from '../../../../../base/common/uuid.js';\nimport { IConfigurationRegistry, Extensions as ConfigurationExtensions } from '../../../../../platform/configuration/common/configurationRegistry.js';\nimport { WorkspaceService } from '../../browser/configurationService.js';\nimport { ConfigurationEditing, ConfigurationEditingErrorCode, EditableConfigurationTarget } from '../../common/configurationEditing.js';\nimport { WORKSPACE_STANDALONE_CONFIGURATIONS, FOLDER_SETTINGS_PATH, USER_STANDALONE_CONFIGURATIONS, IConfigurationCache } from '../../common/configuration.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ITextFileService } from '../../../textfile/common/textfiles.js';\nimport { ITextModelService } from '../../../../../editor/common/services/resolverService.js';\nimport { TextModelResolverService } from '../../../textmodelResolver/common/textModelResolverService.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { CommandService } from '../../../commands/common/commandService.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { IRemoteAgentService } from '../../../remote/common/remoteAgentService.js';\nimport { FileService } from '../../../../../platform/files/common/fileService.js';\nimport { NullLogService } from '../../../../../platform/log/common/log.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { KeybindingsEditingService, IKeybindingEditingService } from '../../../keybinding/common/keybindingEditing.js';\nimport { FileUserDataProvider } from '../../../../../platform/userData/common/fileUserDataProvider.js';\nimport { UriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentityService.js';\nimport { toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { InMemoryFileSystemProvider } from '../../../../../platform/files/common/inMemoryFilesystemProvider.js';\nimport { joinPath } from '../../../../../base/common/resources.js';\nimport { VSBuffer } from '../../../../../base/common/buffer.js';\nimport { RemoteAgentService } from '../../../remote/browser/remoteAgentService.js';\nimport { getSingleFolderWorkspaceIdentifier } from '../../../workspaces/browser/workspaces.js';\nimport { IUserDataProfilesService, UserDataProfilesService } from '../../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { hash } from '../../../../../base/common/hash.js';\nimport { FilePolicyService } from '../../../../../platform/policy/common/filePolicyService.js';\nimport { runWithFakedTimers } from '../../../../../base/test/common/timeTravelScheduler.js';\nimport { UserDataProfileService } from '../../../userDataProfile/common/userDataProfileService.js';\nimport { IUserDataProfileService } from '../../../userDataProfile/common/userDataProfile.js';\nimport { IBrowserWorkbenchEnvironmentService } from '../../../environment/browser/environmentService.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { PolicyCategory } from '../../../../../base/common/policy.js';\n\nconst ROOT = URI.file('tests').with({ scheme: 'vscode-tests' });\n\nclass ConfigurationCache implements IConfigurationCache {\n\tneedsCaching(resource: URI): boolean { return false; }\n\tasync read(): Promise<string> { return ''; }\n\tasync write(): Promise<void> { }\n\tasync remove(): Promise<void> { }\n}\n\nsuite('ConfigurationEditing', () => {\n\n\tlet instantiationService: TestInstantiationService;\n\tlet userDataProfileService: IUserDataProfileService;\n\tlet environmentService: IBrowserWorkbenchEnvironmentService;\n\tlet fileService: IFileService;\n\tlet workspaceService: WorkspaceService;\n\tlet testObject: ConfigurationEditing;\n\n\tsuiteSetup(() => {\n\t\tconst configurationRegistry = Registry.as<IConfigurationRegistry>(ConfigurationExtensions.Configuration);\n\t\tconfigurationRegistry.registerConfiguration({\n\t\t\t'id': '_test',\n\t\t\t'type': 'object',\n\t\t\t'properties': {\n\t\t\t\t'configurationEditing.service.testSetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet'\n\t\t\t\t},\n\t\t\t\t'configurationEditing.service.testSettingTwo': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet'\n\t\t\t\t},\n\t\t\t\t'configurationEditing.service.testSettingThree': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet'\n\t\t\t\t},\n\t\t\t\t'configurationEditing.service.policySetting': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'default': 'isSet',\n\t\t\t\t\tpolicy: {\n\t\t\t\t\t\tname: 'configurationEditing.service.policySetting',\n\t\t\t\t\t\tcategory: PolicyCategory.Extensions,\n\t\t\t\t\t\tminimumVersion: '1.0.0',\n\t\t\t\t\t\tlocalization: { description: { key: '', value: '' } }\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsetup(async () => {\n\t\tdisposables.add(toDisposable(() => sinon.restore()));\n\t\tconst logService = new NullLogService();\n\t\tfileService = disposables.add(new FileService(logService));\n\t\tconst fileSystemProvider = disposables.add(new InMemoryFileSystemProvider());\n\t\tdisposables.add(fileService.registerProvider(ROOT.scheme, fileSystemProvider));\n\n\t\tconst workspaceFolder = joinPath(ROOT, uuid.generateUuid());\n\t\tawait fileService.createFolder(workspaceFolder);\n\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tenvironmentService = TestEnvironmentService;\n\t\tenvironmentService.policyFile = joinPath(workspaceFolder, 'policies.json');\n\t\tinstantiationService.stub(IEnvironmentService, environmentService);\n\t\tconst uriIdentityService = disposables.add(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = instantiationService.stub(IUserDataProfilesService, disposables.add(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService)));\n\t\tuserDataProfileService = disposables.add(new UserDataProfileService(userDataProfilesService.defaultProfile));\n\t\tconst remoteAgentService = disposables.add(instantiationService.createInstance(RemoteAgentService));\n\t\tdisposables.add(fileService.registerProvider(Schemas.vscodeUserData, disposables.add(new FileUserDataProvider(ROOT.scheme, fileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, logService))));\n\t\tinstantiationService.stub(IFileService, fileService);\n\t\tinstantiationService.stub(IRemoteAgentService, remoteAgentService);\n\t\tworkspaceService = disposables.add(new WorkspaceService({ configurationCache: new ConfigurationCache() }, environmentService, userDataProfileService, userDataProfilesService, fileService, remoteAgentService, uriIdentityService, new NullLogService(), disposables.add(new FilePolicyService(environmentService.policyFile, fileService, logService))));\n\t\tawait workspaceService.initialize({\n\t\t\tid: hash(workspaceFolder.toString()).toString(16),\n\t\t\turi: workspaceFolder\n\t\t});\n\t\tinstantiationService.stub(IWorkspaceContextService, workspaceService);\n\n\t\tawait workspaceService.initialize(getSingleFolderWorkspaceIdentifier(workspaceFolder));\n\t\tinstantiationService.stub(IConfigurationService, workspaceService);\n\t\tinstantiationService.stub(IKeybindingEditingService, disposables.add(instantiationService.createInstance(KeybindingsEditingService)));\n\t\tinstantiationService.stub(ITextFileService, disposables.add(instantiationService.createInstance(TestTextFileService)));\n\t\tinstantiationService.stub(ITextModelService, <ITextModelService>disposables.add(instantiationService.createInstance(TextModelResolverService)));\n\t\tinstantiationService.stub(ICommandService, CommandService);\n\t\ttestObject = instantiationService.createInstance(ConfigurationEditing, null);\n\t});\n\n\ttest('errors cases - invalid key', async () => {\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'unknown.key', value: 'value' }, { donotNotifyError: true });\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_UNKNOWN_KEY);\n\t\t\treturn;\n\t\t}\n\t\tassert.fail('Should fail with ERROR_UNKNOWN_KEY');\n\t});\n\n\ttest('errors cases - no workspace', async () => {\n\t\tawait workspaceService.initialize({ id: uuid.generateUuid() });\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'configurationEditing.service.testSetting', value: 'value' }, { donotNotifyError: true });\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_NO_WORKSPACE_OPENED);\n\t\t\treturn;\n\t\t}\n\t\tassert.fail('Should fail with ERROR_NO_WORKSPACE_OPENED');\n\t});\n\n\ttest('errors cases - invalid configuration', async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString(',,,,,,,,,,,,,,'));\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: 'value' }, { donotNotifyError: true });\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_INVALID_CONFIGURATION);\n\t\t\treturn;\n\t\t}\n\t\tassert.fail('Should fail with ERROR_INVALID_CONFIGURATION');\n\t});\n\n\ttest('errors cases - invalid global tasks configuration', async () => {\n\t\tconst resource = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(resource, VSBuffer.fromString(',,,,,,,,,,,,,,'));\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks.configurationEditing.service.testSetting', value: 'value' }, { donotNotifyError: true });\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_INVALID_CONFIGURATION);\n\t\t\treturn;\n\t\t}\n\t\tassert.fail('Should fail with ERROR_INVALID_CONFIGURATION');\n\t});\n\n\ttest('errors cases - dirty', async () => {\n\t\tinstantiationService.stub(ITextFileService, 'isDirty', true);\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: 'value' }, { donotNotifyError: true });\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_CONFIGURATION_FILE_DIRTY);\n\t\t\treturn;\n\t\t}\n\t\tassert.fail('Should fail with ERROR_CONFIGURATION_FILE_DIRTY error.');\n\t});\n\n\ttest('do not notify error', async () => {\n\t\tinstantiationService.stub(ITextFileService, 'isDirty', true);\n\t\tconst target = sinon.stub();\n\t\tinstantiationService.stub(INotificationService, <INotificationService>{ prompt: target, _serviceBrand: undefined, filter: false, onDidChangeFilter: undefined!, notify: null!, error: null!, info: null!, warn: null!, status: null!, setFilter: null!, getFilter: null!, getFilters: null!, removeFilter: null! });\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: 'value' }, { donotNotifyError: true });\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(false, target.calledOnce);\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_CONFIGURATION_FILE_DIRTY);\n\t\t\treturn;\n\t\t}\n\t\tassert.fail('Should fail with ERROR_CONFIGURATION_FILE_DIRTY error.');\n\t});\n\n\ttest('errors cases - ERROR_POLICY_CONFIGURATION', async () => {\n\t\tawait runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst promise = Event.toPromise(instantiationService.get(IConfigurationService).onDidChangeConfiguration);\n\t\t\tawait fileService.writeFile(environmentService.policyFile!, VSBuffer.fromString('{ \"configurationEditing.service.policySetting\": \"policyValue\" }'));\n\t\t\tawait promise;\n\t\t});\n\t\ttry {\n\t\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.policySetting', value: 'value' }, { donotNotifyError: true });\n\t\t} catch (error) {\n\t\t\tassert.strictEqual(error.code, ConfigurationEditingErrorCode.ERROR_POLICY_CONFIGURATION);\n\t\t\treturn;\n\t\t}\n\t\tassert.fail('Should fail with ERROR_POLICY_CONFIGURATION');\n\t});\n\n\ttest('write policy setting - when not set', async () => {\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.policySetting', value: 'value' }, { donotNotifyError: true });\n\t\tconst contents = await fileService.readFile(userDataProfileService.currentProfile.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['configurationEditing.service.policySetting'], 'value');\n\t});\n\n\ttest('write one setting - empty file', async () => {\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: 'value' });\n\t\tconst contents = await fileService.readFile(userDataProfileService.currentProfile.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['configurationEditing.service.testSetting'], 'value');\n\t});\n\n\ttest('write one setting - existing file', async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(userDataProfileService.currentProfile.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['configurationEditing.service.testSetting'], 'value');\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('remove an existing setting - existing file', async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\", \"configurationEditing.service.testSetting\": \"value\" }'));\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: undefined });\n\n\t\tconst contents = await fileService.readFile(userDataProfileService.currentProfile.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.deepStrictEqual(Object.keys(parsed), ['my.super.setting']);\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('remove non existing setting - existing file', async () => {\n\t\tawait fileService.writeFile(userDataProfileService.currentProfile.settingsResource, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'configurationEditing.service.testSetting', value: undefined });\n\n\t\tconst contents = await fileService.readFile(userDataProfileService.currentProfile.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.deepStrictEqual(Object.keys(parsed), ['my.super.setting']);\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('write overridable settings to user settings', async () => {\n\t\tconst key = '[language]';\n\t\tconst value = { 'configurationEditing.service.testSetting': 'overridden value' };\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key, value });\n\n\t\tconst contents = await fileService.readFile(userDataProfileService.currentProfile.settingsResource);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.deepStrictEqual(parsed[key], value);\n\t});\n\n\ttest('write overridable settings to workspace settings', async () => {\n\t\tconst key = '[language]';\n\t\tconst value = { 'configurationEditing.service.testSetting': 'overridden value' };\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key, value });\n\n\t\tconst contents = await fileService.readFile(joinPath(workspaceService.getWorkspace().folders[0].uri, FOLDER_SETTINGS_PATH));\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.deepStrictEqual(parsed[key], value);\n\t});\n\n\ttest('write overridable settings to workspace folder settings', async () => {\n\t\tconst key = '[language]';\n\t\tconst value = { 'configurationEditing.service.testSetting': 'overridden value' };\n\t\tconst folderSettingsFile = joinPath(workspaceService.getWorkspace().folders[0].uri, FOLDER_SETTINGS_PATH);\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE_FOLDER, { key, value }, { scopes: { resource: folderSettingsFile } });\n\n\t\tconst contents = await fileService.readFile(folderSettingsFile);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.deepStrictEqual(parsed[key], value);\n\t});\n\n\ttest('write workspace standalone setting - empty file', async () => {\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['service.testSetting'], 'value');\n\t});\n\n\ttest('write user standalone setting - empty file', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['service.testSetting'], 'value');\n\t});\n\n\ttest('write workspace standalone setting - existing file', async () => {\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['service.testSetting'], 'value');\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('write user standalone setting - existing file', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['service.testSetting'], 'value');\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('write user standalone mcp setting - existing file', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['mcp']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'mcp.service.testSetting', value: 'value' });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['service.testSetting'], 'value');\n\t\tassert.strictEqual(parsed['my.super.setting'], 'my.super.value');\n\t});\n\n\ttest('write workspace standalone setting - empty file - full JSON', async () => {\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write user standalone setting - empty file - full JSON', async () => {\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write workspace standalone setting - existing file - full JSON', async () => {\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write user standalone setting - existing file - full JSON', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": \"my.super.value\" }'));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write workspace standalone setting - existing file with JSON errors - full JSON', async () => {\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": ')); // invalid JSON\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write user standalone setting - existing file with JSON errors - full JSON', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString('{ \"my.super.setting\": ')); // invalid JSON\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask' }] } });\n\n\t\tconst contents = await fileService.readFile(target);\n\t\tconst parsed = json.parse(contents.value.toString());\n\t\tassert.strictEqual(parsed['version'], '1.0.0');\n\t\tassert.strictEqual(parsed['tasks'][0]['taskName'], 'myTask');\n\t});\n\n\ttest('write workspace standalone setting should replace complete file', async () => {\n\t\tconst target = joinPath(workspaceService.getWorkspace().folders[0].uri, WORKSPACE_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString(`{\n\t\t\t\"version\": \"1.0.0\",\n\t\t\t\"tasks\": [\n\t\t\t\t{\n\t\t\t\t\t\"taskName\": \"myTask1\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"taskName\": \"myTask2\"\n\t\t\t\t}\n\t\t\t]\n\t\t}`));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.WORKSPACE, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask1' }] } });\n\n\t\tconst actual = await fileService.readFile(target);\n\t\tconst expected = JSON.stringify({ 'version': '1.0.0', tasks: [{ 'taskName': 'myTask1' }] }, null, '\\t');\n\t\tassert.strictEqual(actual.value.toString(), expected);\n\t});\n\n\ttest('write user standalone setting should replace complete file', async () => {\n\t\tconst target = joinPath(environmentService.userRoamingDataHome, USER_STANDALONE_CONFIGURATIONS['tasks']);\n\t\tawait fileService.writeFile(target, VSBuffer.fromString(`{\n\t\t\t\"version\": \"1.0.0\",\n\t\t\t\"tasks\": [\n\t\t\t\t{\n\t\t\t\t\t\"taskName\": \"myTask1\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"taskName\": \"myTask2\"\n\t\t\t\t}\n\t\t\t]\n\t\t}`));\n\n\t\tawait testObject.writeConfiguration(EditableConfigurationTarget.USER_LOCAL, { key: 'tasks', value: { 'version': '1.0.0', tasks: [{ 'taskName': 'myTask1' }] } });\n\n\t\tconst actual = await fileService.readFile(target);\n\t\tconst expected = JSON.stringify({ 'version': '1.0.0', tasks: [{ 'taskName': 'myTask1' }] }, null, '\\t');\n\t\tassert.strictEqual(actual.value.toString(), expected);\n\t});\n});\n"]}