{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/services/configuration/browser/configuration.ts","vs/workbench/services/configuration/browser/configuration.ts"],"names":[],"mappings":"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","file":"configuration.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../base/common/uri.js';\nimport { Event, Emitter } from '../../../../base/common/event.js';\nimport * as errors from '../../../../base/common/errors.js';\nimport { Disposable, IDisposable, dispose, toDisposable, MutableDisposable, combinedDisposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { FileChangeType, FileChangesEvent, IFileService, whenProviderRegistered, FileOperationError, FileOperationResult, FileOperation, FileOperationEvent } from '../../../../platform/files/common/files.js';\nimport { ConfigurationModel, ConfigurationModelParser, ConfigurationParseOptions, UserSettings } from '../../../../platform/configuration/common/configurationModels.js';\nimport { WorkspaceConfigurationModelParser, StandaloneConfigurationModelParser } from '../common/configurationModels.js';\nimport { TASKS_CONFIGURATION_KEY, FOLDER_SETTINGS_NAME, LAUNCH_CONFIGURATION_KEY, IConfigurationCache, ConfigurationKey, REMOTE_MACHINE_SCOPES, FOLDER_SCOPES, WORKSPACE_SCOPES, APPLY_ALL_PROFILES_SETTING, APPLICATION_SCOPES, MCP_CONFIGURATION_KEY } from '../common/configuration.js';\nimport { IStoredWorkspaceFolder } from '../../../../platform/workspaces/common/workspaces.js';\nimport { WorkbenchState, IWorkspaceFolder, IWorkspaceIdentifier } from '../../../../platform/workspace/common/workspace.js';\nimport { ConfigurationScope, Extensions, IConfigurationRegistry, OVERRIDE_PROPERTY_REGEX } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { equals } from '../../../../base/common/objects.js';\nimport { IRemoteAgentService } from '../../remote/common/remoteAgentService.js';\nimport { hash } from '../../../../base/common/hash.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IStringDictionary } from '../../../../base/common/collections.js';\nimport { joinPath } from '../../../../base/common/resources.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { IBrowserWorkbenchEnvironmentService } from '../../environment/browser/environmentService.js';\nimport { isEmptyObject, isObject } from '../../../../base/common/types.js';\nimport { DefaultConfiguration as BaseDefaultConfiguration } from '../../../../platform/configuration/common/configurations.js';\nimport { IJSONEditingService } from '../common/jsonEditing.js';\nimport { IUserDataProfilesService } from '../../../../platform/userDataProfile/common/userDataProfile.js';\n\nexport class DefaultConfiguration extends BaseDefaultConfiguration {\n\n\tstatic readonly DEFAULT_OVERRIDES_CACHE_EXISTS_KEY = 'DefaultOverridesCacheExists';\n\n\tprivate readonly configurationRegistry = Registry.as<IConfigurationRegistry>(Extensions.Configuration);\n\tprivate cachedConfigurationDefaultsOverrides: IStringDictionary<unknown> = {};\n\tprivate readonly cacheKey: ConfigurationKey = { type: 'defaults', key: 'configurationDefaultsOverrides' };\n\n\tconstructor(\n\t\tprivate readonly configurationCache: IConfigurationCache,\n\t\tenvironmentService: IBrowserWorkbenchEnvironmentService,\n\t\tlogService: ILogService,\n\t) {\n\t\tsuper(logService);\n\t\tif (environmentService.options?.configurationDefaults) {\n\t\t\tthis.configurationRegistry.registerDefaultConfigurations([{ overrides: environmentService.options.configurationDefaults as IStringDictionary<IStringDictionary<unknown>> }]);\n\t\t}\n\t}\n\n\tprotected override getConfigurationDefaultOverrides(): IStringDictionary<unknown> {\n\t\treturn this.cachedConfigurationDefaultsOverrides;\n\t}\n\n\toverride async initialize(): Promise<ConfigurationModel> {\n\t\tawait this.initializeCachedConfigurationDefaultsOverrides();\n\t\treturn super.initialize();\n\t}\n\n\toverride reload(): ConfigurationModel {\n\t\tthis.cachedConfigurationDefaultsOverrides = {};\n\t\tthis.updateCachedConfigurationDefaultsOverrides();\n\t\treturn super.reload();\n\t}\n\n\thasCachedConfigurationDefaultsOverrides(): boolean {\n\t\treturn !isEmptyObject(this.cachedConfigurationDefaultsOverrides);\n\t}\n\n\tprivate initiaizeCachedConfigurationDefaultsOverridesPromise: Promise<void> | undefined;\n\tprivate initializeCachedConfigurationDefaultsOverrides(): Promise<void> {\n\t\tif (!this.initiaizeCachedConfigurationDefaultsOverridesPromise) {\n\t\t\tthis.initiaizeCachedConfigurationDefaultsOverridesPromise = (async () => {\n\t\t\t\ttry {\n\t\t\t\t\t// Read only when the cache exists\n\t\t\t\t\tif (localStorage.getItem(DefaultConfiguration.DEFAULT_OVERRIDES_CACHE_EXISTS_KEY)) {\n\t\t\t\t\t\tconst content = await this.configurationCache.read(this.cacheKey);\n\t\t\t\t\t\tif (content) {\n\t\t\t\t\t\t\tthis.cachedConfigurationDefaultsOverrides = JSON.parse(content);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) { /* ignore */ }\n\t\t\t\tthis.cachedConfigurationDefaultsOverrides = isObject(this.cachedConfigurationDefaultsOverrides) ? this.cachedConfigurationDefaultsOverrides : {};\n\t\t\t})();\n\t\t}\n\t\treturn this.initiaizeCachedConfigurationDefaultsOverridesPromise;\n\t}\n\n\tprotected override onDidUpdateConfiguration(properties: string[], defaultsOverrides?: boolean): void {\n\t\tsuper.onDidUpdateConfiguration(properties, defaultsOverrides);\n\t\tif (defaultsOverrides) {\n\t\t\tthis.updateCachedConfigurationDefaultsOverrides();\n\t\t}\n\t}\n\n\tprivate async updateCachedConfigurationDefaultsOverrides(): Promise<void> {\n\t\tconst cachedConfigurationDefaultsOverrides: IStringDictionary<unknown> = {};\n\t\tconst configurationDefaultsOverrides = this.configurationRegistry.getConfigurationDefaultsOverrides();\n\t\tfor (const [key, value] of configurationDefaultsOverrides) {\n\t\t\tif (!OVERRIDE_PROPERTY_REGEX.test(key) && value.value !== undefined) {\n\t\t\t\tcachedConfigurationDefaultsOverrides[key] = value.value;\n\t\t\t}\n\t\t}\n\t\ttry {\n\t\t\tif (Object.keys(cachedConfigurationDefaultsOverrides).length) {\n\t\t\t\tlocalStorage.setItem(DefaultConfiguration.DEFAULT_OVERRIDES_CACHE_EXISTS_KEY, 'yes');\n\t\t\t\tawait this.configurationCache.write(this.cacheKey, JSON.stringify(cachedConfigurationDefaultsOverrides));\n\t\t\t} else {\n\t\t\t\tlocalStorage.removeItem(DefaultConfiguration.DEFAULT_OVERRIDES_CACHE_EXISTS_KEY);\n\t\t\t\tawait this.configurationCache.remove(this.cacheKey);\n\t\t\t}\n\t\t} catch (error) {/* Ignore error */ }\n\t}\n\n}\n\nexport class ApplicationConfiguration extends UserSettings {\n\n\tprivate readonly _onDidChangeConfiguration: Emitter<ConfigurationModel> = this._register(new Emitter<ConfigurationModel>());\n\treadonly onDidChangeConfiguration: Event<ConfigurationModel> = this._onDidChangeConfiguration.event;\n\n\tprivate readonly reloadConfigurationScheduler: RunOnceScheduler;\n\n\tconstructor(\n\t\tuserDataProfilesService: IUserDataProfilesService,\n\t\tfileService: IFileService,\n\t\turiIdentityService: IUriIdentityService,\n\t\tlogService: ILogService,\n\t) {\n\t\tsuper(userDataProfilesService.defaultProfile.settingsResource, { scopes: APPLICATION_SCOPES, skipUnregistered: true }, uriIdentityService.extUri, fileService, logService);\n\t\tthis._register(this.onDidChange(() => this.reloadConfigurationScheduler.schedule()));\n\t\tthis.reloadConfigurationScheduler = this._register(new RunOnceScheduler(() => this.loadConfiguration().then(configurationModel => this._onDidChangeConfiguration.fire(configurationModel)), 50));\n\t}\n\n\tasync initialize(): Promise<ConfigurationModel> {\n\t\treturn this.loadConfiguration();\n\t}\n\n\toverride async loadConfiguration(): Promise<ConfigurationModel> {\n\t\tconst model = await super.loadConfiguration();\n\t\tconst value = model.getValue<string[]>(APPLY_ALL_PROFILES_SETTING);\n\t\tconst allProfilesSettings = Array.isArray(value) ? value : [];\n\t\treturn this.parseOptions.include || allProfilesSettings.length\n\t\t\t? this.reparse({ ...this.parseOptions, include: allProfilesSettings })\n\t\t\t: model;\n\t}\n}\n\nexport class UserConfiguration extends Disposable {\n\n\tprivate readonly _onDidChangeConfiguration: Emitter<ConfigurationModel> = this._register(new Emitter<ConfigurationModel>());\n\treadonly onDidChangeConfiguration: Event<ConfigurationModel> = this._onDidChangeConfiguration.event;\n\n\tprivate readonly userConfiguration = this._register(new MutableDisposable<UserSettings | FileServiceBasedConfiguration>());\n\tprivate readonly userConfigurationChangeDisposable = this._register(new MutableDisposable<IDisposable>());\n\tprivate readonly reloadConfigurationScheduler: RunOnceScheduler;\n\n\tget hasTasksLoaded(): boolean { return this.userConfiguration.value instanceof FileServiceBasedConfiguration; }\n\n\tconstructor(\n\t\tprivate settingsResource: URI,\n\t\tprivate tasksResource: URI | undefined,\n\t\tprivate mcpResource: URI | undefined,\n\t\tprivate configurationParseOptions: ConfigurationParseOptions,\n\t\tprivate readonly fileService: IFileService,\n\t\tprivate readonly uriIdentityService: IUriIdentityService,\n\t\tprivate readonly logService: ILogService,\n\t) {\n\t\tsuper();\n\t\tthis.userConfiguration.value = new UserSettings(settingsResource, this.configurationParseOptions, uriIdentityService.extUri, this.fileService, logService);\n\t\tthis.userConfigurationChangeDisposable.value = this.userConfiguration.value.onDidChange(() => this.reloadConfigurationScheduler.schedule());\n\t\tthis.reloadConfigurationScheduler = this._register(new RunOnceScheduler(() => this.userConfiguration.value!.loadConfiguration().then(configurationModel => this._onDidChangeConfiguration.fire(configurationModel)), 50));\n\t}\n\n\tasync reset(settingsResource: URI, tasksResource: URI | undefined, mcpResource: URI | undefined, configurationParseOptions: ConfigurationParseOptions): Promise<ConfigurationModel> {\n\t\tthis.settingsResource = settingsResource;\n\t\tthis.tasksResource = tasksResource;\n\t\tthis.mcpResource = mcpResource;\n\t\tthis.configurationParseOptions = configurationParseOptions;\n\t\treturn this.doReset();\n\t}\n\n\tprivate async doReset(settingsConfiguration?: ConfigurationModel): Promise<ConfigurationModel> {\n\t\tconst folder = this.uriIdentityService.extUri.dirname(this.settingsResource);\n\t\tconst standAloneConfigurationResources: [string, URI][] = [];\n\t\tif (this.tasksResource) {\n\t\t\tstandAloneConfigurationResources.push([TASKS_CONFIGURATION_KEY, this.tasksResource]);\n\t\t}\n\t\tif (this.mcpResource) {\n\t\t\tstandAloneConfigurationResources.push([MCP_CONFIGURATION_KEY, this.mcpResource]);\n\t\t}\n\t\tconst fileServiceBasedConfiguration = new FileServiceBasedConfiguration(folder.toString(), this.settingsResource, standAloneConfigurationResources, this.configurationParseOptions, this.fileService, this.uriIdentityService, this.logService);\n\t\tconst configurationModel = await fileServiceBasedConfiguration.loadConfiguration(settingsConfiguration);\n\t\tthis.userConfiguration.value = fileServiceBasedConfiguration;\n\n\t\t// Check for value because userConfiguration might have been disposed.\n\t\tif (this.userConfigurationChangeDisposable.value) {\n\t\t\tthis.userConfigurationChangeDisposable.value = this.userConfiguration.value.onDidChange(() => this.reloadConfigurationScheduler.schedule());\n\t\t}\n\n\t\treturn configurationModel;\n\t}\n\n\tasync initialize(): Promise<ConfigurationModel> {\n\t\treturn this.userConfiguration.value!.loadConfiguration();\n\t}\n\n\tasync reload(settingsConfiguration?: ConfigurationModel): Promise<ConfigurationModel> {\n\t\tif (this.hasTasksLoaded) {\n\t\t\treturn this.userConfiguration.value!.loadConfiguration();\n\t\t}\n\t\treturn this.doReset(settingsConfiguration);\n\t}\n\n\treparse(parseOptions?: Partial<ConfigurationParseOptions>): ConfigurationModel {\n\t\tthis.configurationParseOptions = { ...this.configurationParseOptions, ...parseOptions };\n\t\treturn this.userConfiguration.value!.reparse(this.configurationParseOptions);\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.userConfiguration.value!.getRestrictedSettings();\n\t}\n}\n\nclass FileServiceBasedConfiguration extends Disposable {\n\n\tprivate readonly allResources: URI[];\n\tprivate _folderSettingsModelParser: ConfigurationModelParser;\n\tprivate _folderSettingsParseOptions: ConfigurationParseOptions;\n\tprivate _standAloneConfigurations: ConfigurationModel[];\n\tprivate _cache: ConfigurationModel;\n\n\tprivate readonly _onDidChange: Emitter<void> = this._register(new Emitter<void>());\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\n\tconstructor(\n\t\tname: string,\n\t\tprivate readonly settingsResource: URI,\n\t\tprivate readonly standAloneConfigurationResources: [string, URI][],\n\t\tconfigurationParseOptions: ConfigurationParseOptions,\n\t\tprivate readonly fileService: IFileService,\n\t\tprivate readonly uriIdentityService: IUriIdentityService,\n\t\tprivate readonly logService: ILogService,\n\t) {\n\t\tsuper();\n\t\tthis.allResources = [this.settingsResource, ...this.standAloneConfigurationResources.map(([, resource]) => resource)];\n\t\tthis._register(combinedDisposable(...this.allResources.map(resource => combinedDisposable(\n\t\t\tthis.fileService.watch(uriIdentityService.extUri.dirname(resource)),\n\t\t\t// Also listen to the resource incase the resource is a symlink - https://github.com/microsoft/vscode/issues/118134\n\t\t\tthis.fileService.watch(resource)\n\t\t))));\n\n\t\tthis._folderSettingsModelParser = new ConfigurationModelParser(name, logService);\n\t\tthis._folderSettingsParseOptions = configurationParseOptions;\n\t\tthis._standAloneConfigurations = [];\n\t\tthis._cache = ConfigurationModel.createEmptyModel(this.logService);\n\n\t\tthis._register(Event.debounce(\n\t\t\tEvent.any(\n\t\t\t\tEvent.filter(this.fileService.onDidFilesChange, e => this.handleFileChangesEvent(e)),\n\t\t\t\tEvent.filter(this.fileService.onDidRunOperation, e => this.handleFileOperationEvent(e))\n\t\t\t), () => undefined, 100)(() => this._onDidChange.fire()));\n\t}\n\n\tasync resolveContents(donotResolveSettings?: boolean): Promise<[string | undefined, [string, string | undefined][]]> {\n\n\t\tconst resolveContents = async (resources: URI[]): Promise<(string | undefined)[]> => {\n\t\t\treturn Promise.all(resources.map(async resource => {\n\t\t\t\ttry {\n\t\t\t\t\tconst content = await this.fileService.readFile(resource, { atomic: true });\n\t\t\t\t\treturn content.value.toString();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.logService.trace(`Error while resolving configuration file '${resource.toString()}': ${errors.getErrorMessage(error)}`);\n\t\t\t\t\tif ((<FileOperationError>error).fileOperationResult !== FileOperationResult.FILE_NOT_FOUND\n\t\t\t\t\t\t&& (<FileOperationError>error).fileOperationResult !== FileOperationResult.FILE_NOT_DIRECTORY) {\n\t\t\t\t\t\tthis.logService.error(error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn '{}';\n\t\t\t}));\n\t\t};\n\n\t\tconst [[settingsContent], standAloneConfigurationContents] = await Promise.all([\n\t\t\tdonotResolveSettings ? Promise.resolve([undefined]) : resolveContents([this.settingsResource]),\n\t\t\tresolveContents(this.standAloneConfigurationResources.map(([, resource]) => resource)),\n\t\t]);\n\n\t\treturn [settingsContent, standAloneConfigurationContents.map((content, index) => ([this.standAloneConfigurationResources[index][0], content]))];\n\t}\n\n\tasync loadConfiguration(settingsConfiguration?: ConfigurationModel): Promise<ConfigurationModel> {\n\n\t\tconst [settingsContent, standAloneConfigurationContents] = await this.resolveContents(!!settingsConfiguration);\n\n\t\t// reset\n\t\tthis._standAloneConfigurations = [];\n\t\tthis._folderSettingsModelParser.parse('', this._folderSettingsParseOptions);\n\n\t\t// parse\n\t\tif (settingsContent !== undefined) {\n\t\t\tthis._folderSettingsModelParser.parse(settingsContent, this._folderSettingsParseOptions);\n\t\t}\n\t\tfor (let index = 0; index < standAloneConfigurationContents.length; index++) {\n\t\t\tconst contents = standAloneConfigurationContents[index][1];\n\t\t\tif (contents !== undefined) {\n\t\t\t\tconst standAloneConfigurationModelParser = new StandaloneConfigurationModelParser(this.standAloneConfigurationResources[index][1].toString(), this.standAloneConfigurationResources[index][0], this.logService);\n\t\t\t\tstandAloneConfigurationModelParser.parse(contents);\n\t\t\t\tthis._standAloneConfigurations.push(standAloneConfigurationModelParser.configurationModel);\n\t\t\t}\n\t\t}\n\n\t\t// Consolidate (support *.json files in the workspace settings folder)\n\t\tthis.consolidate(settingsConfiguration);\n\n\t\treturn this._cache;\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this._folderSettingsModelParser.restrictedConfigurations;\n\t}\n\n\treparse(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tconst oldContents = this._folderSettingsModelParser.configurationModel.contents;\n\t\tthis._folderSettingsParseOptions = configurationParseOptions;\n\t\tthis._folderSettingsModelParser.reparse(this._folderSettingsParseOptions);\n\t\tif (!equals(oldContents, this._folderSettingsModelParser.configurationModel.contents)) {\n\t\t\tthis.consolidate();\n\t\t}\n\t\treturn this._cache;\n\t}\n\n\tprivate consolidate(settingsConfiguration?: ConfigurationModel): void {\n\t\tthis._cache = (settingsConfiguration ?? this._folderSettingsModelParser.configurationModel).merge(...this._standAloneConfigurations);\n\t}\n\n\tprivate handleFileChangesEvent(event: FileChangesEvent): boolean {\n\t\t// One of the resources has changed\n\t\tif (this.allResources.some(resource => event.contains(resource))) {\n\t\t\treturn true;\n\t\t}\n\t\t// One of the resource's parent got deleted\n\t\tif (this.allResources.some(resource => event.contains(this.uriIdentityService.extUri.dirname(resource), FileChangeType.DELETED))) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate handleFileOperationEvent(event: FileOperationEvent): boolean {\n\t\t// One of the resources has changed\n\t\tif ((event.isOperation(FileOperation.CREATE) || event.isOperation(FileOperation.COPY) || event.isOperation(FileOperation.DELETE) || event.isOperation(FileOperation.WRITE))\n\t\t\t&& this.allResources.some(resource => this.uriIdentityService.extUri.isEqual(event.resource, resource))) {\n\t\t\treturn true;\n\t\t}\n\t\t// One of the resource's parent got deleted\n\t\tif (event.isOperation(FileOperation.DELETE) && this.allResources.some(resource => this.uriIdentityService.extUri.isEqual(event.resource, this.uriIdentityService.extUri.dirname(resource)))) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n}\n\nexport class RemoteUserConfiguration extends Disposable {\n\n\tprivate readonly _cachedConfiguration: CachedRemoteUserConfiguration;\n\tprivate readonly _fileService: IFileService;\n\tprivate _userConfiguration: FileServiceBasedRemoteUserConfiguration | CachedRemoteUserConfiguration;\n\tprivate _userConfigurationInitializationPromise: Promise<ConfigurationModel> | null = null;\n\n\tprivate readonly _onDidChangeConfiguration: Emitter<ConfigurationModel> = this._register(new Emitter<ConfigurationModel>());\n\tpublic readonly onDidChangeConfiguration: Event<ConfigurationModel> = this._onDidChangeConfiguration.event;\n\n\tprivate readonly _onDidInitialize = this._register(new Emitter<ConfigurationModel>());\n\tpublic readonly onDidInitialize = this._onDidInitialize.event;\n\n\tconstructor(\n\t\tremoteAuthority: string,\n\t\tconfigurationCache: IConfigurationCache,\n\t\tfileService: IFileService,\n\t\turiIdentityService: IUriIdentityService,\n\t\tremoteAgentService: IRemoteAgentService,\n\t\tlogService: ILogService\n\t) {\n\t\tsuper();\n\t\tthis._fileService = fileService;\n\t\tthis._userConfiguration = this._cachedConfiguration = new CachedRemoteUserConfiguration(remoteAuthority, configurationCache, { scopes: REMOTE_MACHINE_SCOPES }, logService);\n\t\tremoteAgentService.getEnvironment().then(async environment => {\n\t\t\tif (environment) {\n\t\t\t\tconst userConfiguration = this._register(new FileServiceBasedRemoteUserConfiguration(environment.settingsPath, { scopes: REMOTE_MACHINE_SCOPES }, this._fileService, uriIdentityService, logService));\n\t\t\t\tthis._register(userConfiguration.onDidChangeConfiguration(configurationModel => this.onDidUserConfigurationChange(configurationModel)));\n\t\t\t\tthis._userConfigurationInitializationPromise = userConfiguration.initialize();\n\t\t\t\tconst configurationModel = await this._userConfigurationInitializationPromise;\n\t\t\t\tthis._userConfiguration.dispose();\n\t\t\t\tthis._userConfiguration = userConfiguration;\n\t\t\t\tthis.onDidUserConfigurationChange(configurationModel);\n\t\t\t\tthis._onDidInitialize.fire(configurationModel);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync initialize(): Promise<ConfigurationModel> {\n\t\tif (this._userConfiguration instanceof FileServiceBasedRemoteUserConfiguration) {\n\t\t\treturn this._userConfiguration.initialize();\n\t\t}\n\n\t\t// Initialize cached configuration\n\t\tlet configurationModel = await this._userConfiguration.initialize();\n\t\tif (this._userConfigurationInitializationPromise) {\n\t\t\t// Use user configuration\n\t\t\tconfigurationModel = await this._userConfigurationInitializationPromise;\n\t\t\tthis._userConfigurationInitializationPromise = null;\n\t\t}\n\n\t\treturn configurationModel;\n\t}\n\n\treload(): Promise<ConfigurationModel> {\n\t\treturn this._userConfiguration.reload();\n\t}\n\n\treparse(): ConfigurationModel {\n\t\treturn this._userConfiguration.reparse({ scopes: REMOTE_MACHINE_SCOPES });\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this._userConfiguration.getRestrictedSettings();\n\t}\n\n\tprivate onDidUserConfigurationChange(configurationModel: ConfigurationModel): void {\n\t\tthis.updateCache();\n\t\tthis._onDidChangeConfiguration.fire(configurationModel);\n\t}\n\n\tprivate async updateCache(): Promise<void> {\n\t\tif (this._userConfiguration instanceof FileServiceBasedRemoteUserConfiguration) {\n\t\t\tlet content: string | undefined;\n\t\t\ttry {\n\t\t\t\tcontent = await this._userConfiguration.resolveContent();\n\t\t\t} catch (error) {\n\t\t\t\tif ((<FileOperationError>error).fileOperationResult !== FileOperationResult.FILE_NOT_FOUND) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait this._cachedConfiguration.updateConfiguration(content);\n\t\t}\n\t}\n\n}\n\nclass FileServiceBasedRemoteUserConfiguration extends Disposable {\n\n\tprivate readonly parser: ConfigurationModelParser;\n\tprivate parseOptions: ConfigurationParseOptions;\n\tprivate readonly reloadConfigurationScheduler: RunOnceScheduler;\n\tprotected readonly _onDidChangeConfiguration: Emitter<ConfigurationModel> = this._register(new Emitter<ConfigurationModel>());\n\treadonly onDidChangeConfiguration: Event<ConfigurationModel> = this._onDidChangeConfiguration.event;\n\n\tprivate readonly fileWatcherDisposable = this._register(new MutableDisposable());\n\tprivate readonly directoryWatcherDisposable = this._register(new MutableDisposable());\n\n\tconstructor(\n\t\tprivate readonly configurationResource: URI,\n\t\tconfigurationParseOptions: ConfigurationParseOptions,\n\t\tprivate readonly fileService: IFileService,\n\t\tprivate readonly uriIdentityService: IUriIdentityService,\n\t\tprivate readonly logService: ILogService,\n\t) {\n\t\tsuper();\n\n\t\tthis.parser = new ConfigurationModelParser(this.configurationResource.toString(), logService);\n\t\tthis.parseOptions = configurationParseOptions;\n\t\tthis._register(fileService.onDidFilesChange(e => this.handleFileChangesEvent(e)));\n\t\tthis._register(fileService.onDidRunOperation(e => this.handleFileOperationEvent(e)));\n\t\tthis.reloadConfigurationScheduler = this._register(new RunOnceScheduler(() => this.reload().then(configurationModel => this._onDidChangeConfiguration.fire(configurationModel)), 50));\n\t\tthis._register(toDisposable(() => {\n\t\t\tthis.stopWatchingResource();\n\t\t\tthis.stopWatchingDirectory();\n\t\t}));\n\t}\n\n\tprivate watchResource(): void {\n\t\tthis.fileWatcherDisposable.value = this.fileService.watch(this.configurationResource);\n\t}\n\n\tprivate stopWatchingResource(): void {\n\t\tthis.fileWatcherDisposable.value = undefined;\n\t}\n\n\tprivate watchDirectory(): void {\n\t\tconst directory = this.uriIdentityService.extUri.dirname(this.configurationResource);\n\t\tthis.directoryWatcherDisposable.value = this.fileService.watch(directory);\n\t}\n\n\tprivate stopWatchingDirectory(): void {\n\t\tthis.directoryWatcherDisposable.value = undefined;\n\t}\n\n\tasync initialize(): Promise<ConfigurationModel> {\n\t\tconst exists = await this.fileService.exists(this.configurationResource);\n\t\tthis.onResourceExists(exists);\n\t\treturn this.reload();\n\t}\n\n\tasync resolveContent(): Promise<string> {\n\t\tconst content = await this.fileService.readFile(this.configurationResource, { atomic: true });\n\t\treturn content.value.toString();\n\t}\n\n\tasync reload(): Promise<ConfigurationModel> {\n\t\ttry {\n\t\t\tconst content = await this.resolveContent();\n\t\t\tthis.parser.parse(content, this.parseOptions);\n\t\t\treturn this.parser.configurationModel;\n\t\t} catch (e) {\n\t\t\treturn ConfigurationModel.createEmptyModel(this.logService);\n\t\t}\n\t}\n\n\treparse(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tthis.parseOptions = configurationParseOptions;\n\t\tthis.parser.reparse(this.parseOptions);\n\t\treturn this.parser.configurationModel;\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.parser.restrictedConfigurations;\n\t}\n\n\tprivate handleFileChangesEvent(event: FileChangesEvent): void {\n\n\t\t// Find changes that affect the resource\n\t\tlet affectedByChanges = false;\n\t\tif (event.contains(this.configurationResource, FileChangeType.ADDED)) {\n\t\t\taffectedByChanges = true;\n\t\t\tthis.onResourceExists(true);\n\t\t} else if (event.contains(this.configurationResource, FileChangeType.DELETED)) {\n\t\t\taffectedByChanges = true;\n\t\t\tthis.onResourceExists(false);\n\t\t} else if (event.contains(this.configurationResource, FileChangeType.UPDATED)) {\n\t\t\taffectedByChanges = true;\n\t\t}\n\n\t\tif (affectedByChanges) {\n\t\t\tthis.reloadConfigurationScheduler.schedule();\n\t\t}\n\t}\n\n\tprivate handleFileOperationEvent(event: FileOperationEvent): void {\n\t\tif ((event.isOperation(FileOperation.CREATE) || event.isOperation(FileOperation.COPY) || event.isOperation(FileOperation.DELETE) || event.isOperation(FileOperation.WRITE))\n\t\t\t&& this.uriIdentityService.extUri.isEqual(event.resource, this.configurationResource)) {\n\t\t\tthis.reloadConfigurationScheduler.schedule();\n\t\t}\n\t}\n\n\tprivate onResourceExists(exists: boolean): void {\n\t\tif (exists) {\n\t\t\tthis.stopWatchingDirectory();\n\t\t\tthis.watchResource();\n\t\t} else {\n\t\t\tthis.stopWatchingResource();\n\t\t\tthis.watchDirectory();\n\t\t}\n\t}\n}\n\nclass CachedRemoteUserConfiguration extends Disposable {\n\n\tprivate readonly _onDidChange: Emitter<ConfigurationModel> = this._register(new Emitter<ConfigurationModel>());\n\treadonly onDidChange: Event<ConfigurationModel> = this._onDidChange.event;\n\n\tprivate readonly key: ConfigurationKey;\n\tprivate readonly parser: ConfigurationModelParser;\n\tprivate parseOptions: ConfigurationParseOptions;\n\tprivate configurationModel: ConfigurationModel;\n\n\tconstructor(\n\t\tremoteAuthority: string,\n\t\tprivate readonly configurationCache: IConfigurationCache,\n\t\tconfigurationParseOptions: ConfigurationParseOptions,\n\t\tlogService: ILogService,\n\t) {\n\t\tsuper();\n\t\tthis.key = { type: 'user', key: remoteAuthority };\n\t\tthis.parser = new ConfigurationModelParser('CachedRemoteUserConfiguration', logService);\n\t\tthis.parseOptions = configurationParseOptions;\n\t\tthis.configurationModel = ConfigurationModel.createEmptyModel(logService);\n\t}\n\n\tgetConfigurationModel(): ConfigurationModel {\n\t\treturn this.configurationModel;\n\t}\n\n\tinitialize(): Promise<ConfigurationModel> {\n\t\treturn this.reload();\n\t}\n\n\treparse(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tthis.parseOptions = configurationParseOptions;\n\t\tthis.parser.reparse(this.parseOptions);\n\t\tthis.configurationModel = this.parser.configurationModel;\n\t\treturn this.configurationModel;\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.parser.restrictedConfigurations;\n\t}\n\n\tasync reload(): Promise<ConfigurationModel> {\n\t\ttry {\n\t\t\tconst content = await this.configurationCache.read(this.key);\n\t\t\tconst parsed: { content: string } = JSON.parse(content);\n\t\t\tif (parsed.content) {\n\t\t\t\tthis.parser.parse(parsed.content, this.parseOptions);\n\t\t\t\tthis.configurationModel = this.parser.configurationModel;\n\t\t\t}\n\t\t} catch (e) { /* Ignore error */ }\n\t\treturn this.configurationModel;\n\t}\n\n\tasync updateConfiguration(content: string | undefined): Promise<void> {\n\t\tif (content) {\n\t\t\treturn this.configurationCache.write(this.key, JSON.stringify({ content }));\n\t\t} else {\n\t\t\treturn this.configurationCache.remove(this.key);\n\t\t}\n\t}\n}\n\nexport class WorkspaceConfiguration extends Disposable {\n\n\tprivate readonly _cachedConfiguration: CachedWorkspaceConfiguration;\n\tprivate _workspaceConfiguration: CachedWorkspaceConfiguration | FileServiceBasedWorkspaceConfiguration;\n\tprivate readonly _workspaceConfigurationDisposables = this._register(new DisposableStore());\n\tprivate _workspaceIdentifier: IWorkspaceIdentifier | null = null;\n\tprivate _isWorkspaceTrusted: boolean = false;\n\n\tprivate readonly _onDidUpdateConfiguration = this._register(new Emitter<boolean>());\n\tpublic readonly onDidUpdateConfiguration = this._onDidUpdateConfiguration.event;\n\n\tprivate _initialized: boolean = false;\n\tget initialized(): boolean { return this._initialized; }\n\tconstructor(\n\t\tprivate readonly configurationCache: IConfigurationCache,\n\t\tprivate readonly fileService: IFileService,\n\t\tprivate readonly uriIdentityService: IUriIdentityService,\n\t\tprivate readonly logService: ILogService,\n\t) {\n\t\tsuper();\n\t\tthis.fileService = fileService;\n\t\tthis._workspaceConfiguration = this._cachedConfiguration = new CachedWorkspaceConfiguration(configurationCache, logService);\n\t}\n\n\tasync initialize(workspaceIdentifier: IWorkspaceIdentifier, workspaceTrusted: boolean): Promise<void> {\n\t\tthis._workspaceIdentifier = workspaceIdentifier;\n\t\tthis._isWorkspaceTrusted = workspaceTrusted;\n\t\tif (!this._initialized) {\n\t\t\tif (this.configurationCache.needsCaching(this._workspaceIdentifier.configPath)) {\n\t\t\t\tthis._workspaceConfiguration = this._cachedConfiguration;\n\t\t\t\tthis.waitAndInitialize(this._workspaceIdentifier);\n\t\t\t} else {\n\t\t\t\tthis.doInitialize(new FileServiceBasedWorkspaceConfiguration(this.fileService, this.uriIdentityService, this.logService));\n\t\t\t}\n\t\t}\n\t\tawait this.reload();\n\t}\n\n\tasync reload(): Promise<void> {\n\t\tif (this._workspaceIdentifier) {\n\t\t\tawait this._workspaceConfiguration.load(this._workspaceIdentifier, { scopes: WORKSPACE_SCOPES, skipRestricted: this.isUntrusted() });\n\t\t}\n\t}\n\n\tgetFolders(): IStoredWorkspaceFolder[] {\n\t\treturn this._workspaceConfiguration.getFolders();\n\t}\n\n\tsetFolders(folders: IStoredWorkspaceFolder[], jsonEditingService: IJSONEditingService): Promise<void> {\n\t\tif (this._workspaceIdentifier) {\n\t\t\treturn jsonEditingService.write(this._workspaceIdentifier.configPath, [{ path: ['folders'], value: folders }], true)\n\t\t\t\t.then(() => this.reload());\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\tisTransient(): boolean {\n\t\treturn this._workspaceConfiguration.isTransient();\n\t}\n\n\tgetConfiguration(): ConfigurationModel {\n\t\treturn this._workspaceConfiguration.getWorkspaceSettings();\n\t}\n\n\tupdateWorkspaceTrust(trusted: boolean): ConfigurationModel {\n\t\tthis._isWorkspaceTrusted = trusted;\n\t\treturn this.reparseWorkspaceSettings();\n\t}\n\n\treparseWorkspaceSettings(): ConfigurationModel {\n\t\tthis._workspaceConfiguration.reparseWorkspaceSettings({ scopes: WORKSPACE_SCOPES, skipRestricted: this.isUntrusted() });\n\t\treturn this.getConfiguration();\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this._workspaceConfiguration.getRestrictedSettings();\n\t}\n\n\tprivate async waitAndInitialize(workspaceIdentifier: IWorkspaceIdentifier): Promise<void> {\n\t\tawait whenProviderRegistered(workspaceIdentifier.configPath, this.fileService);\n\t\tif (!(this._workspaceConfiguration instanceof FileServiceBasedWorkspaceConfiguration)) {\n\t\t\tconst fileServiceBasedWorkspaceConfiguration = this._register(new FileServiceBasedWorkspaceConfiguration(this.fileService, this.uriIdentityService, this.logService));\n\t\t\tawait fileServiceBasedWorkspaceConfiguration.load(workspaceIdentifier, { scopes: WORKSPACE_SCOPES, skipRestricted: this.isUntrusted() });\n\t\t\tthis.doInitialize(fileServiceBasedWorkspaceConfiguration);\n\t\t\tthis.onDidWorkspaceConfigurationChange(false, true);\n\t\t}\n\t}\n\n\tprivate doInitialize(fileServiceBasedWorkspaceConfiguration: FileServiceBasedWorkspaceConfiguration): void {\n\t\tthis._workspaceConfigurationDisposables.clear();\n\t\tthis._workspaceConfiguration = this._workspaceConfigurationDisposables.add(fileServiceBasedWorkspaceConfiguration);\n\t\tthis._workspaceConfigurationDisposables.add(this._workspaceConfiguration.onDidChange(e => this.onDidWorkspaceConfigurationChange(true, false)));\n\t\tthis._initialized = true;\n\t}\n\n\tprivate isUntrusted(): boolean {\n\t\treturn !this._isWorkspaceTrusted;\n\t}\n\n\tprivate async onDidWorkspaceConfigurationChange(reload: boolean, fromCache: boolean): Promise<void> {\n\t\tif (reload) {\n\t\t\tawait this.reload();\n\t\t}\n\t\tthis.updateCache();\n\t\tthis._onDidUpdateConfiguration.fire(fromCache);\n\t}\n\n\tprivate async updateCache(): Promise<void> {\n\t\tif (this._workspaceIdentifier && this.configurationCache.needsCaching(this._workspaceIdentifier.configPath) && this._workspaceConfiguration instanceof FileServiceBasedWorkspaceConfiguration) {\n\t\t\tconst content = await this._workspaceConfiguration.resolveContent(this._workspaceIdentifier);\n\t\t\tawait this._cachedConfiguration.updateWorkspace(this._workspaceIdentifier, content);\n\t\t}\n\t}\n}\n\nclass FileServiceBasedWorkspaceConfiguration extends Disposable {\n\n\tworkspaceConfigurationModelParser: WorkspaceConfigurationModelParser;\n\tworkspaceSettings: ConfigurationModel;\n\tprivate _workspaceIdentifier: IWorkspaceIdentifier | null = null;\n\tprivate workspaceConfigWatcher: IDisposable;\n\tprivate readonly reloadConfigurationScheduler: RunOnceScheduler;\n\n\tprotected readonly _onDidChange: Emitter<void> = this._register(new Emitter<void>());\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\n\tconstructor(\n\t\tprivate readonly fileService: IFileService,\n\t\turiIdentityService: IUriIdentityService,\n\t\tprivate readonly logService: ILogService,\n\t) {\n\t\tsuper();\n\n\t\tthis.workspaceConfigurationModelParser = new WorkspaceConfigurationModelParser('', logService);\n\t\tthis.workspaceSettings = ConfigurationModel.createEmptyModel(logService);\n\n\t\tthis._register(Event.any(\n\t\t\tEvent.filter(this.fileService.onDidFilesChange, e => !!this._workspaceIdentifier && e.contains(this._workspaceIdentifier.configPath)),\n\t\t\tEvent.filter(this.fileService.onDidRunOperation, e => !!this._workspaceIdentifier && (e.isOperation(FileOperation.CREATE) || e.isOperation(FileOperation.COPY) || e.isOperation(FileOperation.DELETE) || e.isOperation(FileOperation.WRITE)) && uriIdentityService.extUri.isEqual(e.resource, this._workspaceIdentifier.configPath))\n\t\t)(() => this.reloadConfigurationScheduler.schedule()));\n\t\tthis.reloadConfigurationScheduler = this._register(new RunOnceScheduler(() => this._onDidChange.fire(), 50));\n\t\tthis.workspaceConfigWatcher = this._register(this.watchWorkspaceConfigurationFile());\n\t}\n\n\tget workspaceIdentifier(): IWorkspaceIdentifier | null {\n\t\treturn this._workspaceIdentifier;\n\t}\n\n\tasync resolveContent(workspaceIdentifier: IWorkspaceIdentifier): Promise<string> {\n\t\tconst content = await this.fileService.readFile(workspaceIdentifier.configPath, { atomic: true });\n\t\treturn content.value.toString();\n\t}\n\n\tasync load(workspaceIdentifier: IWorkspaceIdentifier, configurationParseOptions: ConfigurationParseOptions): Promise<void> {\n\t\tif (!this._workspaceIdentifier || this._workspaceIdentifier.id !== workspaceIdentifier.id) {\n\t\t\tthis._workspaceIdentifier = workspaceIdentifier;\n\t\t\tthis.workspaceConfigurationModelParser = new WorkspaceConfigurationModelParser(this._workspaceIdentifier.id, this.logService);\n\t\t\tdispose(this.workspaceConfigWatcher);\n\t\t\tthis.workspaceConfigWatcher = this._register(this.watchWorkspaceConfigurationFile());\n\t\t}\n\t\tlet contents = '';\n\t\ttry {\n\t\t\tcontents = await this.resolveContent(this._workspaceIdentifier);\n\t\t} catch (error) {\n\t\t\tconst exists = await this.fileService.exists(this._workspaceIdentifier.configPath);\n\t\t\tif (exists) {\n\t\t\t\tthis.logService.error(error);\n\t\t\t}\n\t\t}\n\t\tthis.workspaceConfigurationModelParser.parse(contents, configurationParseOptions);\n\t\tthis.consolidate();\n\t}\n\n\tgetConfigurationModel(): ConfigurationModel {\n\t\treturn this.workspaceConfigurationModelParser.configurationModel;\n\t}\n\n\tgetFolders(): IStoredWorkspaceFolder[] {\n\t\treturn this.workspaceConfigurationModelParser.folders;\n\t}\n\n\tisTransient(): boolean {\n\t\treturn this.workspaceConfigurationModelParser.transient;\n\t}\n\n\tgetWorkspaceSettings(): ConfigurationModel {\n\t\treturn this.workspaceSettings;\n\t}\n\n\treparseWorkspaceSettings(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tthis.workspaceConfigurationModelParser.reparseWorkspaceSettings(configurationParseOptions);\n\t\tthis.consolidate();\n\t\treturn this.getWorkspaceSettings();\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.workspaceConfigurationModelParser.getRestrictedWorkspaceSettings();\n\t}\n\n\tprivate consolidate(): void {\n\t\tthis.workspaceSettings = this.workspaceConfigurationModelParser.settingsModel.merge(this.workspaceConfigurationModelParser.launchModel, this.workspaceConfigurationModelParser.tasksModel);\n\t}\n\n\tprivate watchWorkspaceConfigurationFile(): IDisposable {\n\t\treturn this._workspaceIdentifier ? this.fileService.watch(this._workspaceIdentifier.configPath) : Disposable.None;\n\t}\n\n}\n\nclass CachedWorkspaceConfiguration {\n\n\treadonly onDidChange: Event<void> = Event.None;\n\n\tworkspaceConfigurationModelParser: WorkspaceConfigurationModelParser;\n\tworkspaceSettings: ConfigurationModel;\n\n\tconstructor(\n\t\tprivate readonly configurationCache: IConfigurationCache,\n\t\tprivate readonly logService: ILogService\n\t) {\n\t\tthis.workspaceConfigurationModelParser = new WorkspaceConfigurationModelParser('', logService);\n\t\tthis.workspaceSettings = ConfigurationModel.createEmptyModel(logService);\n\t}\n\n\tasync load(workspaceIdentifier: IWorkspaceIdentifier, configurationParseOptions: ConfigurationParseOptions): Promise<void> {\n\t\ttry {\n\t\t\tconst key = this.getKey(workspaceIdentifier);\n\t\t\tconst contents = await this.configurationCache.read(key);\n\t\t\tconst parsed: { content: string } = JSON.parse(contents);\n\t\t\tif (parsed.content) {\n\t\t\t\tthis.workspaceConfigurationModelParser = new WorkspaceConfigurationModelParser(key.key, this.logService);\n\t\t\t\tthis.workspaceConfigurationModelParser.parse(parsed.content, configurationParseOptions);\n\t\t\t\tthis.consolidate();\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\t}\n\n\tget workspaceIdentifier(): IWorkspaceIdentifier | null {\n\t\treturn null;\n\t}\n\n\tgetConfigurationModel(): ConfigurationModel {\n\t\treturn this.workspaceConfigurationModelParser.configurationModel;\n\t}\n\n\tgetFolders(): IStoredWorkspaceFolder[] {\n\t\treturn this.workspaceConfigurationModelParser.folders;\n\t}\n\n\tisTransient(): boolean {\n\t\treturn this.workspaceConfigurationModelParser.transient;\n\t}\n\n\tgetWorkspaceSettings(): ConfigurationModel {\n\t\treturn this.workspaceSettings;\n\t}\n\n\treparseWorkspaceSettings(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tthis.workspaceConfigurationModelParser.reparseWorkspaceSettings(configurationParseOptions);\n\t\tthis.consolidate();\n\t\treturn this.getWorkspaceSettings();\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.workspaceConfigurationModelParser.getRestrictedWorkspaceSettings();\n\t}\n\n\tprivate consolidate(): void {\n\t\tthis.workspaceSettings = this.workspaceConfigurationModelParser.settingsModel.merge(this.workspaceConfigurationModelParser.launchModel, this.workspaceConfigurationModelParser.tasksModel);\n\t}\n\n\tasync updateWorkspace(workspaceIdentifier: IWorkspaceIdentifier, content: string | undefined): Promise<void> {\n\t\ttry {\n\t\t\tconst key = this.getKey(workspaceIdentifier);\n\t\t\tif (content) {\n\t\t\t\tawait this.configurationCache.write(key, JSON.stringify({ content }));\n\t\t\t} else {\n\t\t\t\tawait this.configurationCache.remove(key);\n\t\t\t}\n\t\t} catch (error) {\n\t\t}\n\t}\n\n\tprivate getKey(workspaceIdentifier: IWorkspaceIdentifier): ConfigurationKey {\n\t\treturn {\n\t\t\ttype: 'workspaces',\n\t\t\tkey: workspaceIdentifier.id\n\t\t};\n\t}\n}\n\nclass CachedFolderConfiguration {\n\n\treadonly onDidChange = Event.None;\n\n\tprivate _folderSettingsModelParser: ConfigurationModelParser;\n\tprivate _folderSettingsParseOptions: ConfigurationParseOptions;\n\tprivate _standAloneConfigurations: ConfigurationModel[];\n\tprivate configurationModel: ConfigurationModel;\n\tprivate readonly key: ConfigurationKey;\n\n\tconstructor(\n\t\tfolder: URI,\n\t\tconfigFolderRelativePath: string,\n\t\tconfigurationParseOptions: ConfigurationParseOptions,\n\t\tprivate readonly configurationCache: IConfigurationCache,\n\t\tprivate readonly logService: ILogService\n\t) {\n\t\tthis.key = { type: 'folder', key: hash(joinPath(folder, configFolderRelativePath).toString()).toString(16) };\n\t\tthis._folderSettingsModelParser = new ConfigurationModelParser('CachedFolderConfiguration', logService);\n\t\tthis._folderSettingsParseOptions = configurationParseOptions;\n\t\tthis._standAloneConfigurations = [];\n\t\tthis.configurationModel = ConfigurationModel.createEmptyModel(logService);\n\t}\n\n\tasync loadConfiguration(): Promise<ConfigurationModel> {\n\t\ttry {\n\t\t\tconst contents = await this.configurationCache.read(this.key);\n\t\t\tconst { content: configurationContents }: { content: IStringDictionary<string> } = JSON.parse(contents.toString());\n\t\t\tif (configurationContents) {\n\t\t\t\tfor (const key of Object.keys(configurationContents)) {\n\t\t\t\t\tif (key === FOLDER_SETTINGS_NAME) {\n\t\t\t\t\t\tthis._folderSettingsModelParser.parse(configurationContents[key], this._folderSettingsParseOptions);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst standAloneConfigurationModelParser = new StandaloneConfigurationModelParser(key, key, this.logService);\n\t\t\t\t\t\tstandAloneConfigurationModelParser.parse(configurationContents[key]);\n\t\t\t\t\t\tthis._standAloneConfigurations.push(standAloneConfigurationModelParser.configurationModel);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.consolidate();\n\t\t} catch (e) {\n\t\t}\n\t\treturn this.configurationModel;\n\t}\n\n\tasync updateConfiguration(settingsContent: string | undefined, standAloneConfigurationContents: [string, string | undefined][]): Promise<void> {\n\t\tconst content: IStringDictionary<unknown> = {};\n\t\tif (settingsContent) {\n\t\t\tcontent[FOLDER_SETTINGS_NAME] = settingsContent;\n\t\t}\n\t\tstandAloneConfigurationContents.forEach(([key, contents]) => {\n\t\t\tif (contents) {\n\t\t\t\tcontent[key] = contents;\n\t\t\t}\n\t\t});\n\t\tif (Object.keys(content).length) {\n\t\t\tawait this.configurationCache.write(this.key, JSON.stringify({ content }));\n\t\t} else {\n\t\t\tawait this.configurationCache.remove(this.key);\n\t\t}\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this._folderSettingsModelParser.restrictedConfigurations;\n\t}\n\n\treparse(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tthis._folderSettingsParseOptions = configurationParseOptions;\n\t\tthis._folderSettingsModelParser.reparse(this._folderSettingsParseOptions);\n\t\tthis.consolidate();\n\t\treturn this.configurationModel;\n\t}\n\n\tprivate consolidate(): void {\n\t\tthis.configurationModel = this._folderSettingsModelParser.configurationModel.merge(...this._standAloneConfigurations);\n\t}\n\n\tgetUnsupportedKeys(): string[] {\n\t\treturn [];\n\t}\n}\n\nexport class FolderConfiguration extends Disposable {\n\n\tprotected readonly _onDidChange: Emitter<void> = this._register(new Emitter<void>());\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\n\tprivate folderConfiguration: CachedFolderConfiguration | FileServiceBasedConfiguration;\n\tprivate readonly scopes: ConfigurationScope[];\n\tprivate readonly configurationFolder: URI;\n\tprivate cachedFolderConfiguration: CachedFolderConfiguration;\n\n\tconstructor(\n\t\tuseCache: boolean,\n\t\treadonly workspaceFolder: IWorkspaceFolder,\n\t\tconfigFolderRelativePath: string,\n\t\tprivate readonly workbenchState: WorkbenchState,\n\t\tprivate workspaceTrusted: boolean,\n\t\tfileService: IFileService,\n\t\turiIdentityService: IUriIdentityService,\n\t\tlogService: ILogService,\n\t\tprivate readonly configurationCache: IConfigurationCache\n\t) {\n\t\tsuper();\n\n\t\tthis.scopes = WorkbenchState.WORKSPACE === this.workbenchState ? FOLDER_SCOPES : WORKSPACE_SCOPES;\n\t\tthis.configurationFolder = uriIdentityService.extUri.joinPath(workspaceFolder.uri, configFolderRelativePath);\n\t\tthis.cachedFolderConfiguration = new CachedFolderConfiguration(workspaceFolder.uri, configFolderRelativePath, { scopes: this.scopes, skipRestricted: this.isUntrusted() }, configurationCache, logService);\n\t\tif (useCache && this.configurationCache.needsCaching(workspaceFolder.uri)) {\n\t\t\tthis.folderConfiguration = this.cachedFolderConfiguration;\n\t\t\twhenProviderRegistered(workspaceFolder.uri, fileService)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.folderConfiguration = this._register(this.createFileServiceBasedConfiguration(fileService, uriIdentityService, logService));\n\t\t\t\t\tthis._register(this.folderConfiguration.onDidChange(e => this.onDidFolderConfigurationChange()));\n\t\t\t\t\tthis.onDidFolderConfigurationChange();\n\t\t\t\t});\n\t\t} else {\n\t\t\tthis.folderConfiguration = this._register(this.createFileServiceBasedConfiguration(fileService, uriIdentityService, logService));\n\t\t\tthis._register(this.folderConfiguration.onDidChange(e => this.onDidFolderConfigurationChange()));\n\t\t}\n\t}\n\n\tloadConfiguration(): Promise<ConfigurationModel> {\n\t\treturn this.folderConfiguration.loadConfiguration();\n\t}\n\n\tupdateWorkspaceTrust(trusted: boolean): ConfigurationModel {\n\t\tthis.workspaceTrusted = trusted;\n\t\treturn this.reparse();\n\t}\n\n\treparse(): ConfigurationModel {\n\t\tconst configurationModel = this.folderConfiguration.reparse({ scopes: this.scopes, skipRestricted: this.isUntrusted() });\n\t\tthis.updateCache();\n\t\treturn configurationModel;\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.folderConfiguration.getRestrictedSettings();\n\t}\n\n\tprivate isUntrusted(): boolean {\n\t\treturn !this.workspaceTrusted;\n\t}\n\n\tprivate onDidFolderConfigurationChange(): void {\n\t\tthis.updateCache();\n\t\tthis._onDidChange.fire();\n\t}\n\n\tprivate createFileServiceBasedConfiguration(fileService: IFileService, uriIdentityService: IUriIdentityService, logService: ILogService) {\n\t\tconst settingsResource = uriIdentityService.extUri.joinPath(this.configurationFolder, `${FOLDER_SETTINGS_NAME}.json`);\n\t\tconst standAloneConfigurationResources: [string, URI][] = [TASKS_CONFIGURATION_KEY, LAUNCH_CONFIGURATION_KEY, MCP_CONFIGURATION_KEY].map(name => ([name, uriIdentityService.extUri.joinPath(this.configurationFolder, `${name}.json`)]));\n\t\treturn new FileServiceBasedConfiguration(this.configurationFolder.toString(), settingsResource, standAloneConfigurationResources, { scopes: this.scopes, skipRestricted: this.isUntrusted() }, fileService, uriIdentityService, logService);\n\t}\n\n\tprivate async updateCache(): Promise<void> {\n\t\tif (this.configurationCache.needsCaching(this.configurationFolder) && this.folderConfiguration instanceof FileServiceBasedConfiguration) {\n\t\t\tconst [settingsContent, standAloneConfigurationContents] = await this.folderConfiguration.resolveContents();\n\t\t\tthis.cachedFolderConfiguration.updateConfiguration(settingsContent, standAloneConfigurationContents);\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../base/common/uri.js';\nimport { Event, Emitter } from '../../../../base/common/event.js';\nimport * as errors from '../../../../base/common/errors.js';\nimport { Disposable, IDisposable, dispose, toDisposable, MutableDisposable, combinedDisposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { FileChangeType, FileChangesEvent, IFileService, whenProviderRegistered, FileOperationError, FileOperationResult, FileOperation, FileOperationEvent } from '../../../../platform/files/common/files.js';\nimport { ConfigurationModel, ConfigurationModelParser, ConfigurationParseOptions, UserSettings } from '../../../../platform/configuration/common/configurationModels.js';\nimport { WorkspaceConfigurationModelParser, StandaloneConfigurationModelParser } from '../common/configurationModels.js';\nimport { TASKS_CONFIGURATION_KEY, FOLDER_SETTINGS_NAME, LAUNCH_CONFIGURATION_KEY, IConfigurationCache, ConfigurationKey, REMOTE_MACHINE_SCOPES, FOLDER_SCOPES, WORKSPACE_SCOPES, APPLY_ALL_PROFILES_SETTING, APPLICATION_SCOPES, MCP_CONFIGURATION_KEY } from '../common/configuration.js';\nimport { IStoredWorkspaceFolder } from '../../../../platform/workspaces/common/workspaces.js';\nimport { WorkbenchState, IWorkspaceFolder, IWorkspaceIdentifier } from '../../../../platform/workspace/common/workspace.js';\nimport { ConfigurationScope, Extensions, IConfigurationRegistry, OVERRIDE_PROPERTY_REGEX } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { equals } from '../../../../base/common/objects.js';\nimport { IRemoteAgentService } from '../../remote/common/remoteAgentService.js';\nimport { hash } from '../../../../base/common/hash.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IStringDictionary } from '../../../../base/common/collections.js';\nimport { joinPath } from '../../../../base/common/resources.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { IBrowserWorkbenchEnvironmentService } from '../../environment/browser/environmentService.js';\nimport { isEmptyObject, isObject } from '../../../../base/common/types.js';\nimport { DefaultConfiguration as BaseDefaultConfiguration } from '../../../../platform/configuration/common/configurations.js';\nimport { IJSONEditingService } from '../common/jsonEditing.js';\nimport { IUserDataProfilesService } from '../../../../platform/userDataProfile/common/userDataProfile.js';\n\nexport class DefaultConfiguration extends BaseDefaultConfiguration {\n\n\tstatic readonly DEFAULT_OVERRIDES_CACHE_EXISTS_KEY = 'DefaultOverridesCacheExists';\n\n\tprivate readonly configurationRegistry = Registry.as<IConfigurationRegistry>(Extensions.Configuration);\n\tprivate cachedConfigurationDefaultsOverrides: IStringDictionary<unknown> = {};\n\tprivate readonly cacheKey: ConfigurationKey = { type: 'defaults', key: 'configurationDefaultsOverrides' };\n\n\tconstructor(\n\t\tprivate readonly configurationCache: IConfigurationCache,\n\t\tenvironmentService: IBrowserWorkbenchEnvironmentService,\n\t\tlogService: ILogService,\n\t) {\n\t\tsuper(logService);\n\t\tif (environmentService.options?.configurationDefaults) {\n\t\t\tthis.configurationRegistry.registerDefaultConfigurations([{ overrides: environmentService.options.configurationDefaults as IStringDictionary<IStringDictionary<unknown>> }]);\n\t\t}\n\t}\n\n\tprotected override getConfigurationDefaultOverrides(): IStringDictionary<unknown> {\n\t\treturn this.cachedConfigurationDefaultsOverrides;\n\t}\n\n\toverride async initialize(): Promise<ConfigurationModel> {\n\t\tawait this.initializeCachedConfigurationDefaultsOverrides();\n\t\treturn super.initialize();\n\t}\n\n\toverride reload(): ConfigurationModel {\n\t\tthis.cachedConfigurationDefaultsOverrides = {};\n\t\tthis.updateCachedConfigurationDefaultsOverrides();\n\t\treturn super.reload();\n\t}\n\n\thasCachedConfigurationDefaultsOverrides(): boolean {\n\t\treturn !isEmptyObject(this.cachedConfigurationDefaultsOverrides);\n\t}\n\n\tprivate initiaizeCachedConfigurationDefaultsOverridesPromise: Promise<void> | undefined;\n\tprivate initializeCachedConfigurationDefaultsOverrides(): Promise<void> {\n\t\tif (!this.initiaizeCachedConfigurationDefaultsOverridesPromise) {\n\t\t\tthis.initiaizeCachedConfigurationDefaultsOverridesPromise = (async () => {\n\t\t\t\ttry {\n\t\t\t\t\t// Read only when the cache exists\n\t\t\t\t\tif (localStorage.getItem(DefaultConfiguration.DEFAULT_OVERRIDES_CACHE_EXISTS_KEY)) {\n\t\t\t\t\t\tconst content = await this.configurationCache.read(this.cacheKey);\n\t\t\t\t\t\tif (content) {\n\t\t\t\t\t\t\tthis.cachedConfigurationDefaultsOverrides = JSON.parse(content);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) { /* ignore */ }\n\t\t\t\tthis.cachedConfigurationDefaultsOverrides = isObject(this.cachedConfigurationDefaultsOverrides) ? this.cachedConfigurationDefaultsOverrides : {};\n\t\t\t})();\n\t\t}\n\t\treturn this.initiaizeCachedConfigurationDefaultsOverridesPromise;\n\t}\n\n\tprotected override onDidUpdateConfiguration(properties: string[], defaultsOverrides?: boolean): void {\n\t\tsuper.onDidUpdateConfiguration(properties, defaultsOverrides);\n\t\tif (defaultsOverrides) {\n\t\t\tthis.updateCachedConfigurationDefaultsOverrides();\n\t\t}\n\t}\n\n\tprivate async updateCachedConfigurationDefaultsOverrides(): Promise<void> {\n\t\tconst cachedConfigurationDefaultsOverrides: IStringDictionary<unknown> = {};\n\t\tconst configurationDefaultsOverrides = this.configurationRegistry.getConfigurationDefaultsOverrides();\n\t\tfor (const [key, value] of configurationDefaultsOverrides) {\n\t\t\tif (!OVERRIDE_PROPERTY_REGEX.test(key) && value.value !== undefined) {\n\t\t\t\tcachedConfigurationDefaultsOverrides[key] = value.value;\n\t\t\t}\n\t\t}\n\t\ttry {\n\t\t\tif (Object.keys(cachedConfigurationDefaultsOverrides).length) {\n\t\t\t\tlocalStorage.setItem(DefaultConfiguration.DEFAULT_OVERRIDES_CACHE_EXISTS_KEY, 'yes');\n\t\t\t\tawait this.configurationCache.write(this.cacheKey, JSON.stringify(cachedConfigurationDefaultsOverrides));\n\t\t\t} else {\n\t\t\t\tlocalStorage.removeItem(DefaultConfiguration.DEFAULT_OVERRIDES_CACHE_EXISTS_KEY);\n\t\t\t\tawait this.configurationCache.remove(this.cacheKey);\n\t\t\t}\n\t\t} catch (error) {/* Ignore error */ }\n\t}\n\n}\n\nexport class ApplicationConfiguration extends UserSettings {\n\n\tprivate readonly _onDidChangeConfiguration: Emitter<ConfigurationModel> = this._register(new Emitter<ConfigurationModel>());\n\treadonly onDidChangeConfiguration: Event<ConfigurationModel> = this._onDidChangeConfiguration.event;\n\n\tprivate readonly reloadConfigurationScheduler: RunOnceScheduler;\n\n\tconstructor(\n\t\tuserDataProfilesService: IUserDataProfilesService,\n\t\tfileService: IFileService,\n\t\turiIdentityService: IUriIdentityService,\n\t\tlogService: ILogService,\n\t) {\n\t\tsuper(userDataProfilesService.defaultProfile.settingsResource, { scopes: APPLICATION_SCOPES, skipUnregistered: true }, uriIdentityService.extUri, fileService, logService);\n\t\tthis._register(this.onDidChange(() => this.reloadConfigurationScheduler.schedule()));\n\t\tthis.reloadConfigurationScheduler = this._register(new RunOnceScheduler(() => this.loadConfiguration().then(configurationModel => this._onDidChangeConfiguration.fire(configurationModel)), 50));\n\t}\n\n\tasync initialize(): Promise<ConfigurationModel> {\n\t\treturn this.loadConfiguration();\n\t}\n\n\toverride async loadConfiguration(): Promise<ConfigurationModel> {\n\t\tconst model = await super.loadConfiguration();\n\t\tconst value = model.getValue<string[]>(APPLY_ALL_PROFILES_SETTING);\n\t\tconst allProfilesSettings = Array.isArray(value) ? value : [];\n\t\treturn this.parseOptions.include || allProfilesSettings.length\n\t\t\t? this.reparse({ ...this.parseOptions, include: allProfilesSettings })\n\t\t\t: model;\n\t}\n}\n\nexport class UserConfiguration extends Disposable {\n\n\tprivate readonly _onDidChangeConfiguration: Emitter<ConfigurationModel> = this._register(new Emitter<ConfigurationModel>());\n\treadonly onDidChangeConfiguration: Event<ConfigurationModel> = this._onDidChangeConfiguration.event;\n\n\tprivate readonly userConfiguration = this._register(new MutableDisposable<UserSettings | FileServiceBasedConfiguration>());\n\tprivate readonly userConfigurationChangeDisposable = this._register(new MutableDisposable<IDisposable>());\n\tprivate readonly reloadConfigurationScheduler: RunOnceScheduler;\n\n\tget hasTasksLoaded(): boolean { return this.userConfiguration.value instanceof FileServiceBasedConfiguration; }\n\n\tconstructor(\n\t\tprivate settingsResource: URI,\n\t\tprivate tasksResource: URI | undefined,\n\t\tprivate mcpResource: URI | undefined,\n\t\tprivate configurationParseOptions: ConfigurationParseOptions,\n\t\tprivate readonly fileService: IFileService,\n\t\tprivate readonly uriIdentityService: IUriIdentityService,\n\t\tprivate readonly logService: ILogService,\n\t) {\n\t\tsuper();\n\t\tthis.userConfiguration.value = new UserSettings(settingsResource, this.configurationParseOptions, uriIdentityService.extUri, this.fileService, logService);\n\t\tthis.userConfigurationChangeDisposable.value = this.userConfiguration.value.onDidChange(() => this.reloadConfigurationScheduler.schedule());\n\t\tthis.reloadConfigurationScheduler = this._register(new RunOnceScheduler(() => this.userConfiguration.value!.loadConfiguration().then(configurationModel => this._onDidChangeConfiguration.fire(configurationModel)), 50));\n\t}\n\n\tasync reset(settingsResource: URI, tasksResource: URI | undefined, mcpResource: URI | undefined, configurationParseOptions: ConfigurationParseOptions): Promise<ConfigurationModel> {\n\t\tthis.settingsResource = settingsResource;\n\t\tthis.tasksResource = tasksResource;\n\t\tthis.mcpResource = mcpResource;\n\t\tthis.configurationParseOptions = configurationParseOptions;\n\t\treturn this.doReset();\n\t}\n\n\tprivate async doReset(settingsConfiguration?: ConfigurationModel): Promise<ConfigurationModel> {\n\t\tconst folder = this.uriIdentityService.extUri.dirname(this.settingsResource);\n\t\tconst standAloneConfigurationResources: [string, URI][] = [];\n\t\tif (this.tasksResource) {\n\t\t\tstandAloneConfigurationResources.push([TASKS_CONFIGURATION_KEY, this.tasksResource]);\n\t\t}\n\t\tif (this.mcpResource) {\n\t\t\tstandAloneConfigurationResources.push([MCP_CONFIGURATION_KEY, this.mcpResource]);\n\t\t}\n\t\tconst fileServiceBasedConfiguration = new FileServiceBasedConfiguration(folder.toString(), this.settingsResource, standAloneConfigurationResources, this.configurationParseOptions, this.fileService, this.uriIdentityService, this.logService);\n\t\tconst configurationModel = await fileServiceBasedConfiguration.loadConfiguration(settingsConfiguration);\n\t\tthis.userConfiguration.value = fileServiceBasedConfiguration;\n\n\t\t// Check for value because userConfiguration might have been disposed.\n\t\tif (this.userConfigurationChangeDisposable.value) {\n\t\t\tthis.userConfigurationChangeDisposable.value = this.userConfiguration.value.onDidChange(() => this.reloadConfigurationScheduler.schedule());\n\t\t}\n\n\t\treturn configurationModel;\n\t}\n\n\tasync initialize(): Promise<ConfigurationModel> {\n\t\treturn this.userConfiguration.value!.loadConfiguration();\n\t}\n\n\tasync reload(settingsConfiguration?: ConfigurationModel): Promise<ConfigurationModel> {\n\t\tif (this.hasTasksLoaded) {\n\t\t\treturn this.userConfiguration.value!.loadConfiguration();\n\t\t}\n\t\treturn this.doReset(settingsConfiguration);\n\t}\n\n\treparse(parseOptions?: Partial<ConfigurationParseOptions>): ConfigurationModel {\n\t\tthis.configurationParseOptions = { ...this.configurationParseOptions, ...parseOptions };\n\t\treturn this.userConfiguration.value!.reparse(this.configurationParseOptions);\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.userConfiguration.value!.getRestrictedSettings();\n\t}\n}\n\nclass FileServiceBasedConfiguration extends Disposable {\n\n\tprivate readonly allResources: URI[];\n\tprivate _folderSettingsModelParser: ConfigurationModelParser;\n\tprivate _folderSettingsParseOptions: ConfigurationParseOptions;\n\tprivate _standAloneConfigurations: ConfigurationModel[];\n\tprivate _cache: ConfigurationModel;\n\n\tprivate readonly _onDidChange: Emitter<void> = this._register(new Emitter<void>());\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\n\tconstructor(\n\t\tname: string,\n\t\tprivate readonly settingsResource: URI,\n\t\tprivate readonly standAloneConfigurationResources: [string, URI][],\n\t\tconfigurationParseOptions: ConfigurationParseOptions,\n\t\tprivate readonly fileService: IFileService,\n\t\tprivate readonly uriIdentityService: IUriIdentityService,\n\t\tprivate readonly logService: ILogService,\n\t) {\n\t\tsuper();\n\t\tthis.allResources = [this.settingsResource, ...this.standAloneConfigurationResources.map(([, resource]) => resource)];\n\t\tthis._register(combinedDisposable(...this.allResources.map(resource => combinedDisposable(\n\t\t\tthis.fileService.watch(uriIdentityService.extUri.dirname(resource)),\n\t\t\t// Also listen to the resource incase the resource is a symlink - https://github.com/microsoft/vscode/issues/118134\n\t\t\tthis.fileService.watch(resource)\n\t\t))));\n\n\t\tthis._folderSettingsModelParser = new ConfigurationModelParser(name, logService);\n\t\tthis._folderSettingsParseOptions = configurationParseOptions;\n\t\tthis._standAloneConfigurations = [];\n\t\tthis._cache = ConfigurationModel.createEmptyModel(this.logService);\n\n\t\tthis._register(Event.debounce(\n\t\t\tEvent.any(\n\t\t\t\tEvent.filter(this.fileService.onDidFilesChange, e => this.handleFileChangesEvent(e)),\n\t\t\t\tEvent.filter(this.fileService.onDidRunOperation, e => this.handleFileOperationEvent(e))\n\t\t\t), () => undefined, 100)(() => this._onDidChange.fire()));\n\t}\n\n\tasync resolveContents(donotResolveSettings?: boolean): Promise<[string | undefined, [string, string | undefined][]]> {\n\n\t\tconst resolveContents = async (resources: URI[]): Promise<(string | undefined)[]> => {\n\t\t\treturn Promise.all(resources.map(async resource => {\n\t\t\t\ttry {\n\t\t\t\t\tconst content = await this.fileService.readFile(resource, { atomic: true });\n\t\t\t\t\treturn content.value.toString();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.logService.trace(`Error while resolving configuration file '${resource.toString()}': ${errors.getErrorMessage(error)}`);\n\t\t\t\t\tif ((<FileOperationError>error).fileOperationResult !== FileOperationResult.FILE_NOT_FOUND\n\t\t\t\t\t\t&& (<FileOperationError>error).fileOperationResult !== FileOperationResult.FILE_NOT_DIRECTORY) {\n\t\t\t\t\t\tthis.logService.error(error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn '{}';\n\t\t\t}));\n\t\t};\n\n\t\tconst [[settingsContent], standAloneConfigurationContents] = await Promise.all([\n\t\t\tdonotResolveSettings ? Promise.resolve([undefined]) : resolveContents([this.settingsResource]),\n\t\t\tresolveContents(this.standAloneConfigurationResources.map(([, resource]) => resource)),\n\t\t]);\n\n\t\treturn [settingsContent, standAloneConfigurationContents.map((content, index) => ([this.standAloneConfigurationResources[index][0], content]))];\n\t}\n\n\tasync loadConfiguration(settingsConfiguration?: ConfigurationModel): Promise<ConfigurationModel> {\n\n\t\tconst [settingsContent, standAloneConfigurationContents] = await this.resolveContents(!!settingsConfiguration);\n\n\t\t// reset\n\t\tthis._standAloneConfigurations = [];\n\t\tthis._folderSettingsModelParser.parse('', this._folderSettingsParseOptions);\n\n\t\t// parse\n\t\tif (settingsContent !== undefined) {\n\t\t\tthis._folderSettingsModelParser.parse(settingsContent, this._folderSettingsParseOptions);\n\t\t}\n\t\tfor (let index = 0; index < standAloneConfigurationContents.length; index++) {\n\t\t\tconst contents = standAloneConfigurationContents[index][1];\n\t\t\tif (contents !== undefined) {\n\t\t\t\tconst standAloneConfigurationModelParser = new StandaloneConfigurationModelParser(this.standAloneConfigurationResources[index][1].toString(), this.standAloneConfigurationResources[index][0], this.logService);\n\t\t\t\tstandAloneConfigurationModelParser.parse(contents);\n\t\t\t\tthis._standAloneConfigurations.push(standAloneConfigurationModelParser.configurationModel);\n\t\t\t}\n\t\t}\n\n\t\t// Consolidate (support *.json files in the workspace settings folder)\n\t\tthis.consolidate(settingsConfiguration);\n\n\t\treturn this._cache;\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this._folderSettingsModelParser.restrictedConfigurations;\n\t}\n\n\treparse(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tconst oldContents = this._folderSettingsModelParser.configurationModel.contents;\n\t\tthis._folderSettingsParseOptions = configurationParseOptions;\n\t\tthis._folderSettingsModelParser.reparse(this._folderSettingsParseOptions);\n\t\tif (!equals(oldContents, this._folderSettingsModelParser.configurationModel.contents)) {\n\t\t\tthis.consolidate();\n\t\t}\n\t\treturn this._cache;\n\t}\n\n\tprivate consolidate(settingsConfiguration?: ConfigurationModel): void {\n\t\tthis._cache = (settingsConfiguration ?? this._folderSettingsModelParser.configurationModel).merge(...this._standAloneConfigurations);\n\t}\n\n\tprivate handleFileChangesEvent(event: FileChangesEvent): boolean {\n\t\t// One of the resources has changed\n\t\tif (this.allResources.some(resource => event.contains(resource))) {\n\t\t\treturn true;\n\t\t}\n\t\t// One of the resource's parent got deleted\n\t\tif (this.allResources.some(resource => event.contains(this.uriIdentityService.extUri.dirname(resource), FileChangeType.DELETED))) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate handleFileOperationEvent(event: FileOperationEvent): boolean {\n\t\t// One of the resources has changed\n\t\tif ((event.isOperation(FileOperation.CREATE) || event.isOperation(FileOperation.COPY) || event.isOperation(FileOperation.DELETE) || event.isOperation(FileOperation.WRITE))\n\t\t\t&& this.allResources.some(resource => this.uriIdentityService.extUri.isEqual(event.resource, resource))) {\n\t\t\treturn true;\n\t\t}\n\t\t// One of the resource's parent got deleted\n\t\tif (event.isOperation(FileOperation.DELETE) && this.allResources.some(resource => this.uriIdentityService.extUri.isEqual(event.resource, this.uriIdentityService.extUri.dirname(resource)))) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n}\n\nexport class RemoteUserConfiguration extends Disposable {\n\n\tprivate readonly _cachedConfiguration: CachedRemoteUserConfiguration;\n\tprivate readonly _fileService: IFileService;\n\tprivate _userConfiguration: FileServiceBasedRemoteUserConfiguration | CachedRemoteUserConfiguration;\n\tprivate _userConfigurationInitializationPromise: Promise<ConfigurationModel> | null = null;\n\n\tprivate readonly _onDidChangeConfiguration: Emitter<ConfigurationModel> = this._register(new Emitter<ConfigurationModel>());\n\tpublic readonly onDidChangeConfiguration: Event<ConfigurationModel> = this._onDidChangeConfiguration.event;\n\n\tprivate readonly _onDidInitialize = this._register(new Emitter<ConfigurationModel>());\n\tpublic readonly onDidInitialize = this._onDidInitialize.event;\n\n\tconstructor(\n\t\tremoteAuthority: string,\n\t\tconfigurationCache: IConfigurationCache,\n\t\tfileService: IFileService,\n\t\turiIdentityService: IUriIdentityService,\n\t\tremoteAgentService: IRemoteAgentService,\n\t\tlogService: ILogService\n\t) {\n\t\tsuper();\n\t\tthis._fileService = fileService;\n\t\tthis._userConfiguration = this._cachedConfiguration = new CachedRemoteUserConfiguration(remoteAuthority, configurationCache, { scopes: REMOTE_MACHINE_SCOPES }, logService);\n\t\tremoteAgentService.getEnvironment().then(async environment => {\n\t\t\tif (environment) {\n\t\t\t\tconst userConfiguration = this._register(new FileServiceBasedRemoteUserConfiguration(environment.settingsPath, { scopes: REMOTE_MACHINE_SCOPES }, this._fileService, uriIdentityService, logService));\n\t\t\t\tthis._register(userConfiguration.onDidChangeConfiguration(configurationModel => this.onDidUserConfigurationChange(configurationModel)));\n\t\t\t\tthis._userConfigurationInitializationPromise = userConfiguration.initialize();\n\t\t\t\tconst configurationModel = await this._userConfigurationInitializationPromise;\n\t\t\t\tthis._userConfiguration.dispose();\n\t\t\t\tthis._userConfiguration = userConfiguration;\n\t\t\t\tthis.onDidUserConfigurationChange(configurationModel);\n\t\t\t\tthis._onDidInitialize.fire(configurationModel);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync initialize(): Promise<ConfigurationModel> {\n\t\tif (this._userConfiguration instanceof FileServiceBasedRemoteUserConfiguration) {\n\t\t\treturn this._userConfiguration.initialize();\n\t\t}\n\n\t\t// Initialize cached configuration\n\t\tlet configurationModel = await this._userConfiguration.initialize();\n\t\tif (this._userConfigurationInitializationPromise) {\n\t\t\t// Use user configuration\n\t\t\tconfigurationModel = await this._userConfigurationInitializationPromise;\n\t\t\tthis._userConfigurationInitializationPromise = null;\n\t\t}\n\n\t\treturn configurationModel;\n\t}\n\n\treload(): Promise<ConfigurationModel> {\n\t\treturn this._userConfiguration.reload();\n\t}\n\n\treparse(): ConfigurationModel {\n\t\treturn this._userConfiguration.reparse({ scopes: REMOTE_MACHINE_SCOPES });\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this._userConfiguration.getRestrictedSettings();\n\t}\n\n\tprivate onDidUserConfigurationChange(configurationModel: ConfigurationModel): void {\n\t\tthis.updateCache();\n\t\tthis._onDidChangeConfiguration.fire(configurationModel);\n\t}\n\n\tprivate async updateCache(): Promise<void> {\n\t\tif (this._userConfiguration instanceof FileServiceBasedRemoteUserConfiguration) {\n\t\t\tlet content: string | undefined;\n\t\t\ttry {\n\t\t\t\tcontent = await this._userConfiguration.resolveContent();\n\t\t\t} catch (error) {\n\t\t\t\tif ((<FileOperationError>error).fileOperationResult !== FileOperationResult.FILE_NOT_FOUND) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait this._cachedConfiguration.updateConfiguration(content);\n\t\t}\n\t}\n\n}\n\nclass FileServiceBasedRemoteUserConfiguration extends Disposable {\n\n\tprivate readonly parser: ConfigurationModelParser;\n\tprivate parseOptions: ConfigurationParseOptions;\n\tprivate readonly reloadConfigurationScheduler: RunOnceScheduler;\n\tprotected readonly _onDidChangeConfiguration: Emitter<ConfigurationModel> = this._register(new Emitter<ConfigurationModel>());\n\treadonly onDidChangeConfiguration: Event<ConfigurationModel> = this._onDidChangeConfiguration.event;\n\n\tprivate readonly fileWatcherDisposable = this._register(new MutableDisposable());\n\tprivate readonly directoryWatcherDisposable = this._register(new MutableDisposable());\n\n\tconstructor(\n\t\tprivate readonly configurationResource: URI,\n\t\tconfigurationParseOptions: ConfigurationParseOptions,\n\t\tprivate readonly fileService: IFileService,\n\t\tprivate readonly uriIdentityService: IUriIdentityService,\n\t\tprivate readonly logService: ILogService,\n\t) {\n\t\tsuper();\n\n\t\tthis.parser = new ConfigurationModelParser(this.configurationResource.toString(), logService);\n\t\tthis.parseOptions = configurationParseOptions;\n\t\tthis._register(fileService.onDidFilesChange(e => this.handleFileChangesEvent(e)));\n\t\tthis._register(fileService.onDidRunOperation(e => this.handleFileOperationEvent(e)));\n\t\tthis.reloadConfigurationScheduler = this._register(new RunOnceScheduler(() => this.reload().then(configurationModel => this._onDidChangeConfiguration.fire(configurationModel)), 50));\n\t\tthis._register(toDisposable(() => {\n\t\t\tthis.stopWatchingResource();\n\t\t\tthis.stopWatchingDirectory();\n\t\t}));\n\t}\n\n\tprivate watchResource(): void {\n\t\tthis.fileWatcherDisposable.value = this.fileService.watch(this.configurationResource);\n\t}\n\n\tprivate stopWatchingResource(): void {\n\t\tthis.fileWatcherDisposable.value = undefined;\n\t}\n\n\tprivate watchDirectory(): void {\n\t\tconst directory = this.uriIdentityService.extUri.dirname(this.configurationResource);\n\t\tthis.directoryWatcherDisposable.value = this.fileService.watch(directory);\n\t}\n\n\tprivate stopWatchingDirectory(): void {\n\t\tthis.directoryWatcherDisposable.value = undefined;\n\t}\n\n\tasync initialize(): Promise<ConfigurationModel> {\n\t\tconst exists = await this.fileService.exists(this.configurationResource);\n\t\tthis.onResourceExists(exists);\n\t\treturn this.reload();\n\t}\n\n\tasync resolveContent(): Promise<string> {\n\t\tconst content = await this.fileService.readFile(this.configurationResource, { atomic: true });\n\t\treturn content.value.toString();\n\t}\n\n\tasync reload(): Promise<ConfigurationModel> {\n\t\ttry {\n\t\t\tconst content = await this.resolveContent();\n\t\t\tthis.parser.parse(content, this.parseOptions);\n\t\t\treturn this.parser.configurationModel;\n\t\t} catch (e) {\n\t\t\treturn ConfigurationModel.createEmptyModel(this.logService);\n\t\t}\n\t}\n\n\treparse(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tthis.parseOptions = configurationParseOptions;\n\t\tthis.parser.reparse(this.parseOptions);\n\t\treturn this.parser.configurationModel;\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.parser.restrictedConfigurations;\n\t}\n\n\tprivate handleFileChangesEvent(event: FileChangesEvent): void {\n\n\t\t// Find changes that affect the resource\n\t\tlet affectedByChanges = false;\n\t\tif (event.contains(this.configurationResource, FileChangeType.ADDED)) {\n\t\t\taffectedByChanges = true;\n\t\t\tthis.onResourceExists(true);\n\t\t} else if (event.contains(this.configurationResource, FileChangeType.DELETED)) {\n\t\t\taffectedByChanges = true;\n\t\t\tthis.onResourceExists(false);\n\t\t} else if (event.contains(this.configurationResource, FileChangeType.UPDATED)) {\n\t\t\taffectedByChanges = true;\n\t\t}\n\n\t\tif (affectedByChanges) {\n\t\t\tthis.reloadConfigurationScheduler.schedule();\n\t\t}\n\t}\n\n\tprivate handleFileOperationEvent(event: FileOperationEvent): void {\n\t\tif ((event.isOperation(FileOperation.CREATE) || event.isOperation(FileOperation.COPY) || event.isOperation(FileOperation.DELETE) || event.isOperation(FileOperation.WRITE))\n\t\t\t&& this.uriIdentityService.extUri.isEqual(event.resource, this.configurationResource)) {\n\t\t\tthis.reloadConfigurationScheduler.schedule();\n\t\t}\n\t}\n\n\tprivate onResourceExists(exists: boolean): void {\n\t\tif (exists) {\n\t\t\tthis.stopWatchingDirectory();\n\t\t\tthis.watchResource();\n\t\t} else {\n\t\t\tthis.stopWatchingResource();\n\t\t\tthis.watchDirectory();\n\t\t}\n\t}\n}\n\nclass CachedRemoteUserConfiguration extends Disposable {\n\n\tprivate readonly _onDidChange: Emitter<ConfigurationModel> = this._register(new Emitter<ConfigurationModel>());\n\treadonly onDidChange: Event<ConfigurationModel> = this._onDidChange.event;\n\n\tprivate readonly key: ConfigurationKey;\n\tprivate readonly parser: ConfigurationModelParser;\n\tprivate parseOptions: ConfigurationParseOptions;\n\tprivate configurationModel: ConfigurationModel;\n\n\tconstructor(\n\t\tremoteAuthority: string,\n\t\tprivate readonly configurationCache: IConfigurationCache,\n\t\tconfigurationParseOptions: ConfigurationParseOptions,\n\t\tlogService: ILogService,\n\t) {\n\t\tsuper();\n\t\tthis.key = { type: 'user', key: remoteAuthority };\n\t\tthis.parser = new ConfigurationModelParser('CachedRemoteUserConfiguration', logService);\n\t\tthis.parseOptions = configurationParseOptions;\n\t\tthis.configurationModel = ConfigurationModel.createEmptyModel(logService);\n\t}\n\n\tgetConfigurationModel(): ConfigurationModel {\n\t\treturn this.configurationModel;\n\t}\n\n\tinitialize(): Promise<ConfigurationModel> {\n\t\treturn this.reload();\n\t}\n\n\treparse(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tthis.parseOptions = configurationParseOptions;\n\t\tthis.parser.reparse(this.parseOptions);\n\t\tthis.configurationModel = this.parser.configurationModel;\n\t\treturn this.configurationModel;\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.parser.restrictedConfigurations;\n\t}\n\n\tasync reload(): Promise<ConfigurationModel> {\n\t\ttry {\n\t\t\tconst content = await this.configurationCache.read(this.key);\n\t\t\tconst parsed: { content: string } = JSON.parse(content);\n\t\t\tif (parsed.content) {\n\t\t\t\tthis.parser.parse(parsed.content, this.parseOptions);\n\t\t\t\tthis.configurationModel = this.parser.configurationModel;\n\t\t\t}\n\t\t} catch (e) { /* Ignore error */ }\n\t\treturn this.configurationModel;\n\t}\n\n\tasync updateConfiguration(content: string | undefined): Promise<void> {\n\t\tif (content) {\n\t\t\treturn this.configurationCache.write(this.key, JSON.stringify({ content }));\n\t\t} else {\n\t\t\treturn this.configurationCache.remove(this.key);\n\t\t}\n\t}\n}\n\nexport class WorkspaceConfiguration extends Disposable {\n\n\tprivate readonly _cachedConfiguration: CachedWorkspaceConfiguration;\n\tprivate _workspaceConfiguration: CachedWorkspaceConfiguration | FileServiceBasedWorkspaceConfiguration;\n\tprivate readonly _workspaceConfigurationDisposables = this._register(new DisposableStore());\n\tprivate _workspaceIdentifier: IWorkspaceIdentifier | null = null;\n\tprivate _isWorkspaceTrusted: boolean = false;\n\n\tprivate readonly _onDidUpdateConfiguration = this._register(new Emitter<boolean>());\n\tpublic readonly onDidUpdateConfiguration = this._onDidUpdateConfiguration.event;\n\n\tprivate _initialized: boolean = false;\n\tget initialized(): boolean { return this._initialized; }\n\tconstructor(\n\t\tprivate readonly configurationCache: IConfigurationCache,\n\t\tprivate readonly fileService: IFileService,\n\t\tprivate readonly uriIdentityService: IUriIdentityService,\n\t\tprivate readonly logService: ILogService,\n\t) {\n\t\tsuper();\n\t\tthis.fileService = fileService;\n\t\tthis._workspaceConfiguration = this._cachedConfiguration = new CachedWorkspaceConfiguration(configurationCache, logService);\n\t}\n\n\tasync initialize(workspaceIdentifier: IWorkspaceIdentifier, workspaceTrusted: boolean): Promise<void> {\n\t\tthis._workspaceIdentifier = workspaceIdentifier;\n\t\tthis._isWorkspaceTrusted = workspaceTrusted;\n\t\tif (!this._initialized) {\n\t\t\tif (this.configurationCache.needsCaching(this._workspaceIdentifier.configPath)) {\n\t\t\t\tthis._workspaceConfiguration = this._cachedConfiguration;\n\t\t\t\tthis.waitAndInitialize(this._workspaceIdentifier);\n\t\t\t} else {\n\t\t\t\tthis.doInitialize(new FileServiceBasedWorkspaceConfiguration(this.fileService, this.uriIdentityService, this.logService));\n\t\t\t}\n\t\t}\n\t\tawait this.reload();\n\t}\n\n\tasync reload(): Promise<void> {\n\t\tif (this._workspaceIdentifier) {\n\t\t\tawait this._workspaceConfiguration.load(this._workspaceIdentifier, { scopes: WORKSPACE_SCOPES, skipRestricted: this.isUntrusted() });\n\t\t}\n\t}\n\n\tgetFolders(): IStoredWorkspaceFolder[] {\n\t\treturn this._workspaceConfiguration.getFolders();\n\t}\n\n\tsetFolders(folders: IStoredWorkspaceFolder[], jsonEditingService: IJSONEditingService): Promise<void> {\n\t\tif (this._workspaceIdentifier) {\n\t\t\treturn jsonEditingService.write(this._workspaceIdentifier.configPath, [{ path: ['folders'], value: folders }], true)\n\t\t\t\t.then(() => this.reload());\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\tisTransient(): boolean {\n\t\treturn this._workspaceConfiguration.isTransient();\n\t}\n\n\tgetConfiguration(): ConfigurationModel {\n\t\treturn this._workspaceConfiguration.getWorkspaceSettings();\n\t}\n\n\tupdateWorkspaceTrust(trusted: boolean): ConfigurationModel {\n\t\tthis._isWorkspaceTrusted = trusted;\n\t\treturn this.reparseWorkspaceSettings();\n\t}\n\n\treparseWorkspaceSettings(): ConfigurationModel {\n\t\tthis._workspaceConfiguration.reparseWorkspaceSettings({ scopes: WORKSPACE_SCOPES, skipRestricted: this.isUntrusted() });\n\t\treturn this.getConfiguration();\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this._workspaceConfiguration.getRestrictedSettings();\n\t}\n\n\tprivate async waitAndInitialize(workspaceIdentifier: IWorkspaceIdentifier): Promise<void> {\n\t\tawait whenProviderRegistered(workspaceIdentifier.configPath, this.fileService);\n\t\tif (!(this._workspaceConfiguration instanceof FileServiceBasedWorkspaceConfiguration)) {\n\t\t\tconst fileServiceBasedWorkspaceConfiguration = this._register(new FileServiceBasedWorkspaceConfiguration(this.fileService, this.uriIdentityService, this.logService));\n\t\t\tawait fileServiceBasedWorkspaceConfiguration.load(workspaceIdentifier, { scopes: WORKSPACE_SCOPES, skipRestricted: this.isUntrusted() });\n\t\t\tthis.doInitialize(fileServiceBasedWorkspaceConfiguration);\n\t\t\tthis.onDidWorkspaceConfigurationChange(false, true);\n\t\t}\n\t}\n\n\tprivate doInitialize(fileServiceBasedWorkspaceConfiguration: FileServiceBasedWorkspaceConfiguration): void {\n\t\tthis._workspaceConfigurationDisposables.clear();\n\t\tthis._workspaceConfiguration = this._workspaceConfigurationDisposables.add(fileServiceBasedWorkspaceConfiguration);\n\t\tthis._workspaceConfigurationDisposables.add(this._workspaceConfiguration.onDidChange(e => this.onDidWorkspaceConfigurationChange(true, false)));\n\t\tthis._initialized = true;\n\t}\n\n\tprivate isUntrusted(): boolean {\n\t\treturn !this._isWorkspaceTrusted;\n\t}\n\n\tprivate async onDidWorkspaceConfigurationChange(reload: boolean, fromCache: boolean): Promise<void> {\n\t\tif (reload) {\n\t\t\tawait this.reload();\n\t\t}\n\t\tthis.updateCache();\n\t\tthis._onDidUpdateConfiguration.fire(fromCache);\n\t}\n\n\tprivate async updateCache(): Promise<void> {\n\t\tif (this._workspaceIdentifier && this.configurationCache.needsCaching(this._workspaceIdentifier.configPath) && this._workspaceConfiguration instanceof FileServiceBasedWorkspaceConfiguration) {\n\t\t\tconst content = await this._workspaceConfiguration.resolveContent(this._workspaceIdentifier);\n\t\t\tawait this._cachedConfiguration.updateWorkspace(this._workspaceIdentifier, content);\n\t\t}\n\t}\n}\n\nclass FileServiceBasedWorkspaceConfiguration extends Disposable {\n\n\tworkspaceConfigurationModelParser: WorkspaceConfigurationModelParser;\n\tworkspaceSettings: ConfigurationModel;\n\tprivate _workspaceIdentifier: IWorkspaceIdentifier | null = null;\n\tprivate workspaceConfigWatcher: IDisposable;\n\tprivate readonly reloadConfigurationScheduler: RunOnceScheduler;\n\n\tprotected readonly _onDidChange: Emitter<void> = this._register(new Emitter<void>());\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\n\tconstructor(\n\t\tprivate readonly fileService: IFileService,\n\t\turiIdentityService: IUriIdentityService,\n\t\tprivate readonly logService: ILogService,\n\t) {\n\t\tsuper();\n\n\t\tthis.workspaceConfigurationModelParser = new WorkspaceConfigurationModelParser('', logService);\n\t\tthis.workspaceSettings = ConfigurationModel.createEmptyModel(logService);\n\n\t\tthis._register(Event.any(\n\t\t\tEvent.filter(this.fileService.onDidFilesChange, e => !!this._workspaceIdentifier && e.contains(this._workspaceIdentifier.configPath)),\n\t\t\tEvent.filter(this.fileService.onDidRunOperation, e => !!this._workspaceIdentifier && (e.isOperation(FileOperation.CREATE) || e.isOperation(FileOperation.COPY) || e.isOperation(FileOperation.DELETE) || e.isOperation(FileOperation.WRITE)) && uriIdentityService.extUri.isEqual(e.resource, this._workspaceIdentifier.configPath))\n\t\t)(() => this.reloadConfigurationScheduler.schedule()));\n\t\tthis.reloadConfigurationScheduler = this._register(new RunOnceScheduler(() => this._onDidChange.fire(), 50));\n\t\tthis.workspaceConfigWatcher = this._register(this.watchWorkspaceConfigurationFile());\n\t}\n\n\tget workspaceIdentifier(): IWorkspaceIdentifier | null {\n\t\treturn this._workspaceIdentifier;\n\t}\n\n\tasync resolveContent(workspaceIdentifier: IWorkspaceIdentifier): Promise<string> {\n\t\tconst content = await this.fileService.readFile(workspaceIdentifier.configPath, { atomic: true });\n\t\treturn content.value.toString();\n\t}\n\n\tasync load(workspaceIdentifier: IWorkspaceIdentifier, configurationParseOptions: ConfigurationParseOptions): Promise<void> {\n\t\tif (!this._workspaceIdentifier || this._workspaceIdentifier.id !== workspaceIdentifier.id) {\n\t\t\tthis._workspaceIdentifier = workspaceIdentifier;\n\t\t\tthis.workspaceConfigurationModelParser = new WorkspaceConfigurationModelParser(this._workspaceIdentifier.id, this.logService);\n\t\t\tdispose(this.workspaceConfigWatcher);\n\t\t\tthis.workspaceConfigWatcher = this._register(this.watchWorkspaceConfigurationFile());\n\t\t}\n\t\tlet contents = '';\n\t\ttry {\n\t\t\tcontents = await this.resolveContent(this._workspaceIdentifier);\n\t\t} catch (error) {\n\t\t\tconst exists = await this.fileService.exists(this._workspaceIdentifier.configPath);\n\t\t\tif (exists) {\n\t\t\t\tthis.logService.error(error);\n\t\t\t}\n\t\t}\n\t\tthis.workspaceConfigurationModelParser.parse(contents, configurationParseOptions);\n\t\tthis.consolidate();\n\t}\n\n\tgetConfigurationModel(): ConfigurationModel {\n\t\treturn this.workspaceConfigurationModelParser.configurationModel;\n\t}\n\n\tgetFolders(): IStoredWorkspaceFolder[] {\n\t\treturn this.workspaceConfigurationModelParser.folders;\n\t}\n\n\tisTransient(): boolean {\n\t\treturn this.workspaceConfigurationModelParser.transient;\n\t}\n\n\tgetWorkspaceSettings(): ConfigurationModel {\n\t\treturn this.workspaceSettings;\n\t}\n\n\treparseWorkspaceSettings(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tthis.workspaceConfigurationModelParser.reparseWorkspaceSettings(configurationParseOptions);\n\t\tthis.consolidate();\n\t\treturn this.getWorkspaceSettings();\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.workspaceConfigurationModelParser.getRestrictedWorkspaceSettings();\n\t}\n\n\tprivate consolidate(): void {\n\t\tthis.workspaceSettings = this.workspaceConfigurationModelParser.settingsModel.merge(this.workspaceConfigurationModelParser.launchModel, this.workspaceConfigurationModelParser.tasksModel);\n\t}\n\n\tprivate watchWorkspaceConfigurationFile(): IDisposable {\n\t\treturn this._workspaceIdentifier ? this.fileService.watch(this._workspaceIdentifier.configPath) : Disposable.None;\n\t}\n\n}\n\nclass CachedWorkspaceConfiguration {\n\n\treadonly onDidChange: Event<void> = Event.None;\n\n\tworkspaceConfigurationModelParser: WorkspaceConfigurationModelParser;\n\tworkspaceSettings: ConfigurationModel;\n\n\tconstructor(\n\t\tprivate readonly configurationCache: IConfigurationCache,\n\t\tprivate readonly logService: ILogService\n\t) {\n\t\tthis.workspaceConfigurationModelParser = new WorkspaceConfigurationModelParser('', logService);\n\t\tthis.workspaceSettings = ConfigurationModel.createEmptyModel(logService);\n\t}\n\n\tasync load(workspaceIdentifier: IWorkspaceIdentifier, configurationParseOptions: ConfigurationParseOptions): Promise<void> {\n\t\ttry {\n\t\t\tconst key = this.getKey(workspaceIdentifier);\n\t\t\tconst contents = await this.configurationCache.read(key);\n\t\t\tconst parsed: { content: string } = JSON.parse(contents);\n\t\t\tif (parsed.content) {\n\t\t\t\tthis.workspaceConfigurationModelParser = new WorkspaceConfigurationModelParser(key.key, this.logService);\n\t\t\t\tthis.workspaceConfigurationModelParser.parse(parsed.content, configurationParseOptions);\n\t\t\t\tthis.consolidate();\n\t\t\t}\n\t\t} catch (e) {\n\t\t}\n\t}\n\n\tget workspaceIdentifier(): IWorkspaceIdentifier | null {\n\t\treturn null;\n\t}\n\n\tgetConfigurationModel(): ConfigurationModel {\n\t\treturn this.workspaceConfigurationModelParser.configurationModel;\n\t}\n\n\tgetFolders(): IStoredWorkspaceFolder[] {\n\t\treturn this.workspaceConfigurationModelParser.folders;\n\t}\n\n\tisTransient(): boolean {\n\t\treturn this.workspaceConfigurationModelParser.transient;\n\t}\n\n\tgetWorkspaceSettings(): ConfigurationModel {\n\t\treturn this.workspaceSettings;\n\t}\n\n\treparseWorkspaceSettings(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tthis.workspaceConfigurationModelParser.reparseWorkspaceSettings(configurationParseOptions);\n\t\tthis.consolidate();\n\t\treturn this.getWorkspaceSettings();\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.workspaceConfigurationModelParser.getRestrictedWorkspaceSettings();\n\t}\n\n\tprivate consolidate(): void {\n\t\tthis.workspaceSettings = this.workspaceConfigurationModelParser.settingsModel.merge(this.workspaceConfigurationModelParser.launchModel, this.workspaceConfigurationModelParser.tasksModel);\n\t}\n\n\tasync updateWorkspace(workspaceIdentifier: IWorkspaceIdentifier, content: string | undefined): Promise<void> {\n\t\ttry {\n\t\t\tconst key = this.getKey(workspaceIdentifier);\n\t\t\tif (content) {\n\t\t\t\tawait this.configurationCache.write(key, JSON.stringify({ content }));\n\t\t\t} else {\n\t\t\t\tawait this.configurationCache.remove(key);\n\t\t\t}\n\t\t} catch (error) {\n\t\t}\n\t}\n\n\tprivate getKey(workspaceIdentifier: IWorkspaceIdentifier): ConfigurationKey {\n\t\treturn {\n\t\t\ttype: 'workspaces',\n\t\t\tkey: workspaceIdentifier.id\n\t\t};\n\t}\n}\n\nclass CachedFolderConfiguration {\n\n\treadonly onDidChange = Event.None;\n\n\tprivate _folderSettingsModelParser: ConfigurationModelParser;\n\tprivate _folderSettingsParseOptions: ConfigurationParseOptions;\n\tprivate _standAloneConfigurations: ConfigurationModel[];\n\tprivate configurationModel: ConfigurationModel;\n\tprivate readonly key: ConfigurationKey;\n\n\tconstructor(\n\t\tfolder: URI,\n\t\tconfigFolderRelativePath: string,\n\t\tconfigurationParseOptions: ConfigurationParseOptions,\n\t\tprivate readonly configurationCache: IConfigurationCache,\n\t\tprivate readonly logService: ILogService\n\t) {\n\t\tthis.key = { type: 'folder', key: hash(joinPath(folder, configFolderRelativePath).toString()).toString(16) };\n\t\tthis._folderSettingsModelParser = new ConfigurationModelParser('CachedFolderConfiguration', logService);\n\t\tthis._folderSettingsParseOptions = configurationParseOptions;\n\t\tthis._standAloneConfigurations = [];\n\t\tthis.configurationModel = ConfigurationModel.createEmptyModel(logService);\n\t}\n\n\tasync loadConfiguration(): Promise<ConfigurationModel> {\n\t\ttry {\n\t\t\tconst contents = await this.configurationCache.read(this.key);\n\t\t\tconst { content: configurationContents }: { content: IStringDictionary<string> } = JSON.parse(contents.toString());\n\t\t\tif (configurationContents) {\n\t\t\t\tfor (const key of Object.keys(configurationContents)) {\n\t\t\t\t\tif (key === FOLDER_SETTINGS_NAME) {\n\t\t\t\t\t\tthis._folderSettingsModelParser.parse(configurationContents[key], this._folderSettingsParseOptions);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst standAloneConfigurationModelParser = new StandaloneConfigurationModelParser(key, key, this.logService);\n\t\t\t\t\t\tstandAloneConfigurationModelParser.parse(configurationContents[key]);\n\t\t\t\t\t\tthis._standAloneConfigurations.push(standAloneConfigurationModelParser.configurationModel);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.consolidate();\n\t\t} catch (e) {\n\t\t}\n\t\treturn this.configurationModel;\n\t}\n\n\tasync updateConfiguration(settingsContent: string | undefined, standAloneConfigurationContents: [string, string | undefined][]): Promise<void> {\n\t\tconst content: IStringDictionary<unknown> = {};\n\t\tif (settingsContent) {\n\t\t\tcontent[FOLDER_SETTINGS_NAME] = settingsContent;\n\t\t}\n\t\tstandAloneConfigurationContents.forEach(([key, contents]) => {\n\t\t\tif (contents) {\n\t\t\t\tcontent[key] = contents;\n\t\t\t}\n\t\t});\n\t\tif (Object.keys(content).length) {\n\t\t\tawait this.configurationCache.write(this.key, JSON.stringify({ content }));\n\t\t} else {\n\t\t\tawait this.configurationCache.remove(this.key);\n\t\t}\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this._folderSettingsModelParser.restrictedConfigurations;\n\t}\n\n\treparse(configurationParseOptions: ConfigurationParseOptions): ConfigurationModel {\n\t\tthis._folderSettingsParseOptions = configurationParseOptions;\n\t\tthis._folderSettingsModelParser.reparse(this._folderSettingsParseOptions);\n\t\tthis.consolidate();\n\t\treturn this.configurationModel;\n\t}\n\n\tprivate consolidate(): void {\n\t\tthis.configurationModel = this._folderSettingsModelParser.configurationModel.merge(...this._standAloneConfigurations);\n\t}\n\n\tgetUnsupportedKeys(): string[] {\n\t\treturn [];\n\t}\n}\n\nexport class FolderConfiguration extends Disposable {\n\n\tprotected readonly _onDidChange: Emitter<void> = this._register(new Emitter<void>());\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\n\tprivate folderConfiguration: CachedFolderConfiguration | FileServiceBasedConfiguration;\n\tprivate readonly scopes: ConfigurationScope[];\n\tprivate readonly configurationFolder: URI;\n\tprivate cachedFolderConfiguration: CachedFolderConfiguration;\n\n\tconstructor(\n\t\tuseCache: boolean,\n\t\treadonly workspaceFolder: IWorkspaceFolder,\n\t\tconfigFolderRelativePath: string,\n\t\tprivate readonly workbenchState: WorkbenchState,\n\t\tprivate workspaceTrusted: boolean,\n\t\tfileService: IFileService,\n\t\turiIdentityService: IUriIdentityService,\n\t\tlogService: ILogService,\n\t\tprivate readonly configurationCache: IConfigurationCache\n\t) {\n\t\tsuper();\n\n\t\tthis.scopes = WorkbenchState.WORKSPACE === this.workbenchState ? FOLDER_SCOPES : WORKSPACE_SCOPES;\n\t\tthis.configurationFolder = uriIdentityService.extUri.joinPath(workspaceFolder.uri, configFolderRelativePath);\n\t\tthis.cachedFolderConfiguration = new CachedFolderConfiguration(workspaceFolder.uri, configFolderRelativePath, { scopes: this.scopes, skipRestricted: this.isUntrusted() }, configurationCache, logService);\n\t\tif (useCache && this.configurationCache.needsCaching(workspaceFolder.uri)) {\n\t\t\tthis.folderConfiguration = this.cachedFolderConfiguration;\n\t\t\twhenProviderRegistered(workspaceFolder.uri, fileService)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.folderConfiguration = this._register(this.createFileServiceBasedConfiguration(fileService, uriIdentityService, logService));\n\t\t\t\t\tthis._register(this.folderConfiguration.onDidChange(e => this.onDidFolderConfigurationChange()));\n\t\t\t\t\tthis.onDidFolderConfigurationChange();\n\t\t\t\t});\n\t\t} else {\n\t\t\tthis.folderConfiguration = this._register(this.createFileServiceBasedConfiguration(fileService, uriIdentityService, logService));\n\t\t\tthis._register(this.folderConfiguration.onDidChange(e => this.onDidFolderConfigurationChange()));\n\t\t}\n\t}\n\n\tloadConfiguration(): Promise<ConfigurationModel> {\n\t\treturn this.folderConfiguration.loadConfiguration();\n\t}\n\n\tupdateWorkspaceTrust(trusted: boolean): ConfigurationModel {\n\t\tthis.workspaceTrusted = trusted;\n\t\treturn this.reparse();\n\t}\n\n\treparse(): ConfigurationModel {\n\t\tconst configurationModel = this.folderConfiguration.reparse({ scopes: this.scopes, skipRestricted: this.isUntrusted() });\n\t\tthis.updateCache();\n\t\treturn configurationModel;\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.folderConfiguration.getRestrictedSettings();\n\t}\n\n\tprivate isUntrusted(): boolean {\n\t\treturn !this.workspaceTrusted;\n\t}\n\n\tprivate onDidFolderConfigurationChange(): void {\n\t\tthis.updateCache();\n\t\tthis._onDidChange.fire();\n\t}\n\n\tprivate createFileServiceBasedConfiguration(fileService: IFileService, uriIdentityService: IUriIdentityService, logService: ILogService) {\n\t\tconst settingsResource = uriIdentityService.extUri.joinPath(this.configurationFolder, `${FOLDER_SETTINGS_NAME}.json`);\n\t\tconst standAloneConfigurationResources: [string, URI][] = [TASKS_CONFIGURATION_KEY, LAUNCH_CONFIGURATION_KEY, MCP_CONFIGURATION_KEY].map(name => ([name, uriIdentityService.extUri.joinPath(this.configurationFolder, `${name}.json`)]));\n\t\treturn new FileServiceBasedConfiguration(this.configurationFolder.toString(), settingsResource, standAloneConfigurationResources, { scopes: this.scopes, skipRestricted: this.isUntrusted() }, fileService, uriIdentityService, logService);\n\t}\n\n\tprivate async updateCache(): Promise<void> {\n\t\tif (this.configurationCache.needsCaching(this.configurationFolder) && this.folderConfiguration instanceof FileServiceBasedConfiguration) {\n\t\t\tconst [settingsContent, standAloneConfigurationContents] = await this.folderConfiguration.resolveContents();\n\t\t\tthis.cachedFolderConfiguration.updateConfiguration(settingsContent, standAloneConfigurationContents);\n\t\t}\n\t}\n}\n"]}