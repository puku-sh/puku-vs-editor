{"version":3,"sources":["vs/workbench/services/configuration/browser/configurationService.ts"],"names":[],"mappings":"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","file":"configurationService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../base/common/uri.js';\nimport { Event, Emitter } from '../../../../base/common/event.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { equals } from '../../../../base/common/objects.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Queue, Barrier, Promises, Delayer, Throttler } from '../../../../base/common/async.js';\nimport { IJSONContributionRegistry, Extensions as JSONExtensions } from '../../../../platform/jsonschemas/common/jsonContributionRegistry.js';\nimport { IWorkspaceContextService, Workspace as BaseWorkspace, WorkbenchState, IWorkspaceFolder, IWorkspaceFoldersChangeEvent, WorkspaceFolder, toWorkspaceFolder, isWorkspaceFolder, IWorkspaceFoldersWillChangeEvent, IEmptyWorkspaceIdentifier, ISingleFolderWorkspaceIdentifier, isSingleFolderWorkspaceIdentifier, isWorkspaceIdentifier, IWorkspaceIdentifier, IAnyWorkspaceIdentifier } from '../../../../platform/workspace/common/workspace.js';\nimport { ConfigurationModel, ConfigurationChangeEvent, mergeChanges } from '../../../../platform/configuration/common/configurationModels.js';\nimport { IConfigurationChangeEvent, ConfigurationTarget, IConfigurationOverrides, isConfigurationOverrides, IConfigurationData, IConfigurationValue, IConfigurationChange, ConfigurationTargetToString, IConfigurationUpdateOverrides, isConfigurationUpdateOverrides, IConfigurationService, IConfigurationUpdateOptions } from '../../../../platform/configuration/common/configuration.js';\nimport { IPolicyConfiguration, NullPolicyConfiguration, PolicyConfiguration } from '../../../../platform/configuration/common/configurations.js';\nimport { Configuration } from '../common/configurationModels.js';\nimport { FOLDER_CONFIG_FOLDER_NAME, defaultSettingsSchemaId, userSettingsSchemaId, workspaceSettingsSchemaId, folderSettingsSchemaId, IConfigurationCache, machineSettingsSchemaId, LOCAL_MACHINE_SCOPES, IWorkbenchConfigurationService, RestrictedSettings, PROFILE_SCOPES, LOCAL_MACHINE_PROFILE_SCOPES, profileSettingsSchemaId, APPLY_ALL_PROFILES_SETTING, APPLICATION_SCOPES } from '../common/configuration.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { IConfigurationRegistry, Extensions, allSettings, windowSettings, resourceSettings, applicationSettings, machineSettings, machineOverridableSettings, ConfigurationScope, IConfigurationPropertySchema, keyFromOverrideIdentifiers, OVERRIDE_PROPERTY_PATTERN, resourceLanguageSettingsSchemaId, configurationDefaultsSchemaId, applicationMachineSettings } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { IStoredWorkspaceFolder, isStoredWorkspaceFolder, IWorkspaceFolderCreationData, getStoredWorkspaceFolder, toWorkspaceFolders } from '../../../../platform/workspaces/common/workspaces.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ConfigurationEditing, EditableConfigurationTarget } from '../common/configurationEditing.js';\nimport { WorkspaceConfiguration, FolderConfiguration, RemoteUserConfiguration, UserConfiguration, DefaultConfiguration, ApplicationConfiguration } from './configuration.js';\nimport { IJSONSchema, IJSONSchemaMap } from '../../../../base/common/jsonSchema.js';\nimport { mark } from '../../../../base/common/performance.js';\nimport { IRemoteAgentService } from '../../remote/common/remoteAgentService.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { IWorkbenchEnvironmentService } from '../../environment/common/environmentService.js';\nimport { IWorkbenchContribution, IWorkbenchContributionsRegistry, WorkbenchPhase, Extensions as WorkbenchExtensions, registerWorkbenchContribution2 } from '../../../common/contributions.js';\nimport { ILifecycleService, LifecyclePhase } from '../../lifecycle/common/lifecycle.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { toErrorMessage } from '../../../../base/common/errorMessage.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\nimport { delta, distinct, equals as arrayEquals } from '../../../../base/common/arrays.js';\nimport { IStringDictionary } from '../../../../base/common/collections.js';\nimport { IExtensionService } from '../../extensions/common/extensions.js';\nimport { IWorkbenchAssignmentService } from '../../assignment/common/assignmentService.js';\nimport { isUndefined } from '../../../../base/common/types.js';\nimport { localize } from '../../../../nls.js';\nimport { DidChangeUserDataProfileEvent, IUserDataProfileService } from '../../userDataProfile/common/userDataProfile.js';\nimport { IPolicyService, NullPolicyService } from '../../../../platform/policy/common/policy.js';\nimport { IUserDataProfile, IUserDataProfilesService } from '../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { IJSONEditingService } from '../common/jsonEditing.js';\nimport { IBrowserWorkbenchEnvironmentService } from '../../environment/browser/environmentService.js';\nimport { workbenchConfigurationNodeBase } from '../../../common/configuration.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { runWhenWindowIdle } from '../../../../base/browser/dom.js';\n\nfunction getLocalUserConfigurationScopes(userDataProfile: IUserDataProfile, hasRemote: boolean): ConfigurationScope[] | undefined {\n\tconst isDefaultProfile = userDataProfile.isDefault || userDataProfile.useDefaultFlags?.settings;\n\tif (isDefaultProfile) {\n\t\treturn hasRemote ? LOCAL_MACHINE_SCOPES : undefined;\n\t}\n\treturn hasRemote ? LOCAL_MACHINE_PROFILE_SCOPES : PROFILE_SCOPES;\n}\n\nclass Workspace extends BaseWorkspace {\n\tinitialized: boolean = false;\n}\n\nexport class WorkspaceService extends Disposable implements IWorkbenchConfigurationService, IWorkspaceContextService {\n\n\tpublic _serviceBrand: undefined;\n\n\tprivate workspace!: Workspace;\n\tprivate initRemoteUserConfigurationBarrier: Barrier;\n\tprivate completeWorkspaceBarrier: Barrier;\n\tprivate readonly configurationCache: IConfigurationCache;\n\tprivate _configuration: Configuration;\n\tprivate initialized: boolean = false;\n\tprivate readonly defaultConfiguration: DefaultConfiguration;\n\tprivate readonly policyConfiguration: IPolicyConfiguration;\n\tprivate applicationConfiguration: ApplicationConfiguration | null = null;\n\tprivate readonly applicationConfigurationDisposables: DisposableStore;\n\tprivate readonly localUserConfiguration: UserConfiguration;\n\tprivate readonly remoteUserConfiguration: RemoteUserConfiguration | null = null;\n\tprivate readonly workspaceConfiguration: WorkspaceConfiguration;\n\tprivate cachedFolderConfigs: ResourceMap<FolderConfiguration>;\n\tprivate readonly workspaceEditingQueue: Queue<void>;\n\n\tprivate readonly _onDidChangeConfiguration: Emitter<IConfigurationChangeEvent> = this._register(new Emitter<IConfigurationChangeEvent>());\n\tpublic readonly onDidChangeConfiguration: Event<IConfigurationChangeEvent> = this._onDidChangeConfiguration.event;\n\n\tprotected readonly _onWillChangeWorkspaceFolders: Emitter<IWorkspaceFoldersWillChangeEvent> = this._register(new Emitter<IWorkspaceFoldersWillChangeEvent>());\n\tpublic readonly onWillChangeWorkspaceFolders: Event<IWorkspaceFoldersWillChangeEvent> = this._onWillChangeWorkspaceFolders.event;\n\n\tprivate readonly _onDidChangeWorkspaceFolders: Emitter<IWorkspaceFoldersChangeEvent> = this._register(new Emitter<IWorkspaceFoldersChangeEvent>());\n\tpublic readonly onDidChangeWorkspaceFolders: Event<IWorkspaceFoldersChangeEvent> = this._onDidChangeWorkspaceFolders.event;\n\n\tprivate readonly _onDidChangeWorkspaceName: Emitter<void> = this._register(new Emitter<void>());\n\tpublic readonly onDidChangeWorkspaceName: Event<void> = this._onDidChangeWorkspaceName.event;\n\n\tprivate readonly _onDidChangeWorkbenchState: Emitter<WorkbenchState> = this._register(new Emitter<WorkbenchState>());\n\tpublic readonly onDidChangeWorkbenchState: Event<WorkbenchState> = this._onDidChangeWorkbenchState.event;\n\n\tprivate isWorkspaceTrusted: boolean = true;\n\n\tprivate _restrictedSettings: RestrictedSettings = { default: [] };\n\tget restrictedSettings() { return this._restrictedSettings; }\n\tprivate readonly _onDidChangeRestrictedSettings = this._register(new Emitter<RestrictedSettings>());\n\tpublic readonly onDidChangeRestrictedSettings = this._onDidChangeRestrictedSettings.event;\n\n\tprivate readonly configurationRegistry: IConfigurationRegistry;\n\n\tprivate instantiationService: IInstantiationService | undefined;\n\tprivate configurationEditing: Promise<ConfigurationEditing> | undefined;\n\n\tconstructor(\n\t\t{ remoteAuthority, configurationCache }: { remoteAuthority?: string; configurationCache: IConfigurationCache },\n\t\tenvironmentService: IBrowserWorkbenchEnvironmentService,\n\t\tprivate readonly userDataProfileService: IUserDataProfileService,\n\t\tprivate readonly userDataProfilesService: IUserDataProfilesService,\n\t\tprivate readonly fileService: IFileService,\n\t\tprivate readonly remoteAgentService: IRemoteAgentService,\n\t\tprivate readonly uriIdentityService: IUriIdentityService,\n\t\tprivate readonly logService: ILogService,\n\t\tpolicyService: IPolicyService\n\t) {\n\t\tsuper();\n\n\t\tthis.configurationRegistry = Registry.as<IConfigurationRegistry>(Extensions.Configuration);\n\n\t\tthis.initRemoteUserConfigurationBarrier = new Barrier();\n\t\tthis.completeWorkspaceBarrier = new Barrier();\n\t\tthis.defaultConfiguration = this._register(new DefaultConfiguration(configurationCache, environmentService, logService));\n\t\tthis.policyConfiguration = policyService instanceof NullPolicyService ? new NullPolicyConfiguration() : this._register(new PolicyConfiguration(this.defaultConfiguration, policyService, logService));\n\t\tthis.configurationCache = configurationCache;\n\t\tthis._configuration = new Configuration(this.defaultConfiguration.configurationModel, this.policyConfiguration.configurationModel, ConfigurationModel.createEmptyModel(logService), ConfigurationModel.createEmptyModel(logService), ConfigurationModel.createEmptyModel(logService), ConfigurationModel.createEmptyModel(logService), new ResourceMap(), ConfigurationModel.createEmptyModel(logService), new ResourceMap<ConfigurationModel>(), this.workspace, logService);\n\t\tthis.applicationConfigurationDisposables = this._register(new DisposableStore());\n\t\tthis.createApplicationConfiguration();\n\t\tthis.localUserConfiguration = this._register(new UserConfiguration(userDataProfileService.currentProfile.settingsResource, userDataProfileService.currentProfile.tasksResource, userDataProfileService.currentProfile.mcpResource, { scopes: getLocalUserConfigurationScopes(userDataProfileService.currentProfile, !!remoteAuthority) }, fileService, uriIdentityService, logService));\n\t\tthis.cachedFolderConfigs = new ResourceMap<FolderConfiguration>();\n\t\tthis._register(this.localUserConfiguration.onDidChangeConfiguration(userConfiguration => this.onLocalUserConfigurationChanged(userConfiguration)));\n\t\tif (remoteAuthority) {\n\t\t\tconst remoteUserConfiguration = this.remoteUserConfiguration = this._register(new RemoteUserConfiguration(remoteAuthority, configurationCache, fileService, uriIdentityService, remoteAgentService, logService));\n\t\t\tthis._register(remoteUserConfiguration.onDidInitialize(remoteUserConfigurationModel => {\n\t\t\t\tthis._register(remoteUserConfiguration.onDidChangeConfiguration(remoteUserConfigurationModel => this.onRemoteUserConfigurationChanged(remoteUserConfigurationModel)));\n\t\t\t\tthis.onRemoteUserConfigurationChanged(remoteUserConfigurationModel);\n\t\t\t\tthis.initRemoteUserConfigurationBarrier.open();\n\t\t\t}));\n\t\t} else {\n\t\t\tthis.initRemoteUserConfigurationBarrier.open();\n\t\t}\n\n\t\tthis.workspaceConfiguration = this._register(new WorkspaceConfiguration(configurationCache, fileService, uriIdentityService, logService));\n\t\tthis._register(this.workspaceConfiguration.onDidUpdateConfiguration(fromCache => {\n\t\t\tthis.onWorkspaceConfigurationChanged(fromCache).then(() => {\n\t\t\t\tthis.workspace.initialized = this.workspaceConfiguration.initialized;\n\t\t\t\tthis.checkAndMarkWorkspaceComplete(fromCache);\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(this.defaultConfiguration.onDidChangeConfiguration(({ properties, defaults }) => this.onDefaultConfigurationChanged(defaults, properties)));\n\t\tthis._register(this.policyConfiguration.onDidChangeConfiguration(configurationModel => this.onPolicyConfigurationChanged(configurationModel)));\n\t\tthis._register(userDataProfileService.onDidChangeCurrentProfile(e => this.onUserDataProfileChanged(e)));\n\n\t\tthis.workspaceEditingQueue = new Queue<void>();\n\t}\n\n\tprivate createApplicationConfiguration(): void {\n\t\tthis.applicationConfigurationDisposables.clear();\n\t\tif (this.userDataProfileService.currentProfile.isDefault || this.userDataProfileService.currentProfile.useDefaultFlags?.settings) {\n\t\t\tthis.applicationConfiguration = null;\n\t\t} else {\n\t\t\tthis.applicationConfiguration = this.applicationConfigurationDisposables.add(this._register(new ApplicationConfiguration(this.userDataProfilesService, this.fileService, this.uriIdentityService, this.logService)));\n\t\t\tthis.applicationConfigurationDisposables.add(this.applicationConfiguration.onDidChangeConfiguration(configurationModel => this.onApplicationConfigurationChanged(configurationModel)));\n\t\t}\n\t}\n\n\t// Workspace Context Service Impl\n\n\tpublic async getCompleteWorkspace(): Promise<Workspace> {\n\t\tawait this.completeWorkspaceBarrier.wait();\n\t\treturn this.getWorkspace();\n\t}\n\n\tpublic getWorkspace(): Workspace {\n\t\treturn this.workspace;\n\t}\n\n\tpublic getWorkbenchState(): WorkbenchState {\n\t\t// Workspace has configuration file\n\t\tif (this.workspace.configuration) {\n\t\t\treturn WorkbenchState.WORKSPACE;\n\t\t}\n\n\t\t// Folder has single root\n\t\tif (this.workspace.folders.length === 1) {\n\t\t\treturn WorkbenchState.FOLDER;\n\t\t}\n\n\t\t// Empty\n\t\treturn WorkbenchState.EMPTY;\n\t}\n\n\tpublic getWorkspaceFolder(resource: URI): IWorkspaceFolder | null {\n\t\treturn this.workspace.getFolder(resource);\n\t}\n\n\tpublic addFolders(foldersToAdd: IWorkspaceFolderCreationData[], index?: number): Promise<void> {\n\t\treturn this.updateFolders(foldersToAdd, [], index);\n\t}\n\n\tpublic removeFolders(foldersToRemove: URI[]): Promise<void> {\n\t\treturn this.updateFolders([], foldersToRemove);\n\t}\n\n\tpublic async updateFolders(foldersToAdd: IWorkspaceFolderCreationData[], foldersToRemove: URI[], index?: number): Promise<void> {\n\t\treturn this.workspaceEditingQueue.queue(() => this.doUpdateFolders(foldersToAdd, foldersToRemove, index));\n\t}\n\n\tpublic isInsideWorkspace(resource: URI): boolean {\n\t\treturn !!this.getWorkspaceFolder(resource);\n\t}\n\n\tpublic isCurrentWorkspace(workspaceIdOrFolder: IWorkspaceIdentifier | ISingleFolderWorkspaceIdentifier | URI): boolean {\n\t\tswitch (this.getWorkbenchState()) {\n\t\t\tcase WorkbenchState.FOLDER: {\n\t\t\t\tlet folderUri: URI | undefined = undefined;\n\t\t\t\tif (URI.isUri(workspaceIdOrFolder)) {\n\t\t\t\t\tfolderUri = workspaceIdOrFolder;\n\t\t\t\t} else if (isSingleFolderWorkspaceIdentifier(workspaceIdOrFolder)) {\n\t\t\t\t\tfolderUri = workspaceIdOrFolder.uri;\n\t\t\t\t}\n\n\t\t\t\treturn URI.isUri(folderUri) && this.uriIdentityService.extUri.isEqual(folderUri, this.workspace.folders[0].uri);\n\t\t\t}\n\t\t\tcase WorkbenchState.WORKSPACE:\n\t\t\t\treturn isWorkspaceIdentifier(workspaceIdOrFolder) && this.workspace.id === workspaceIdOrFolder.id;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate async doUpdateFolders(foldersToAdd: IWorkspaceFolderCreationData[], foldersToRemove: URI[], index?: number): Promise<void> {\n\t\tif (this.getWorkbenchState() !== WorkbenchState.WORKSPACE) {\n\t\t\treturn Promise.resolve(undefined); // we need a workspace to begin with\n\t\t}\n\n\t\tif (foldersToAdd.length + foldersToRemove.length === 0) {\n\t\t\treturn Promise.resolve(undefined); // nothing to do\n\t\t}\n\n\t\tlet foldersHaveChanged = false;\n\n\t\t// Remove first (if any)\n\t\tlet currentWorkspaceFolders = this.getWorkspace().folders;\n\t\tlet newStoredFolders: IStoredWorkspaceFolder[] = currentWorkspaceFolders.map(f => f.raw).filter((folder, index): folder is IStoredWorkspaceFolder => {\n\t\t\tif (!isStoredWorkspaceFolder(folder)) {\n\t\t\t\treturn true; // keep entries which are unrelated\n\t\t\t}\n\n\t\t\treturn !this.contains(foldersToRemove, currentWorkspaceFolders[index].uri); // keep entries which are unrelated\n\t\t});\n\n\t\tfoldersHaveChanged = currentWorkspaceFolders.length !== newStoredFolders.length;\n\n\t\t// Add afterwards (if any)\n\t\tif (foldersToAdd.length) {\n\n\t\t\t// Recompute current workspace folders if we have folders to add\n\t\t\tconst workspaceConfigPath = this.getWorkspace().configuration!;\n\t\t\tconst workspaceConfigFolder = this.uriIdentityService.extUri.dirname(workspaceConfigPath);\n\t\t\tcurrentWorkspaceFolders = toWorkspaceFolders(newStoredFolders, workspaceConfigPath, this.uriIdentityService.extUri);\n\t\t\tconst currentWorkspaceFolderUris = currentWorkspaceFolders.map(folder => folder.uri);\n\n\t\t\tconst storedFoldersToAdd: IStoredWorkspaceFolder[] = [];\n\n\t\t\tfor (const folderToAdd of foldersToAdd) {\n\t\t\t\tconst folderURI = folderToAdd.uri;\n\t\t\t\tif (this.contains(currentWorkspaceFolderUris, folderURI)) {\n\t\t\t\t\tcontinue; // already existing\n\t\t\t\t}\n\t\t\t\ttry {\n\t\t\t\t\tconst result = await this.fileService.stat(folderURI);\n\t\t\t\t\tif (!result.isDirectory) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) { /* Ignore */ }\n\t\t\t\tstoredFoldersToAdd.push(getStoredWorkspaceFolder(folderURI, false, folderToAdd.name, workspaceConfigFolder, this.uriIdentityService.extUri));\n\t\t\t}\n\n\t\t\t// Apply to array of newStoredFolders\n\t\t\tif (storedFoldersToAdd.length > 0) {\n\t\t\t\tfoldersHaveChanged = true;\n\n\t\t\t\tif (typeof index === 'number' && index >= 0 && index < newStoredFolders.length) {\n\t\t\t\t\tnewStoredFolders = newStoredFolders.slice(0);\n\t\t\t\t\tnewStoredFolders.splice(index, 0, ...storedFoldersToAdd);\n\t\t\t\t} else {\n\t\t\t\t\tnewStoredFolders = [...newStoredFolders, ...storedFoldersToAdd];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Set folders if we recorded a change\n\t\tif (foldersHaveChanged) {\n\t\t\treturn this.setFolders(newStoredFolders);\n\t\t}\n\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tprivate async setFolders(folders: IStoredWorkspaceFolder[]): Promise<void> {\n\t\tif (!this.instantiationService) {\n\t\t\tthrow new Error('Cannot update workspace folders because workspace service is not yet ready to accept writes.');\n\t\t}\n\n\t\tawait this.instantiationService.invokeFunction(accessor => this.workspaceConfiguration.setFolders(folders, accessor.get(IJSONEditingService)));\n\t\treturn this.onWorkspaceConfigurationChanged(false);\n\t}\n\n\tprivate contains(resources: URI[], toCheck: URI): boolean {\n\t\treturn resources.some(resource => this.uriIdentityService.extUri.isEqual(resource, toCheck));\n\t}\n\n\t// Workspace Configuration Service Impl\n\n\tgetConfigurationData(): IConfigurationData {\n\t\treturn this._configuration.toData();\n\t}\n\n\tgetValue<T>(): T;\n\tgetValue<T>(section: string): T;\n\tgetValue<T>(overrides: IConfigurationOverrides): T;\n\tgetValue<T>(section: string, overrides: IConfigurationOverrides): T;\n\tgetValue(arg1?: unknown, arg2?: unknown): unknown {\n\t\tconst section = typeof arg1 === 'string' ? arg1 : undefined;\n\t\tconst overrides = isConfigurationOverrides(arg1) ? arg1 : isConfigurationOverrides(arg2) ? arg2 : undefined;\n\t\treturn this._configuration.getValue(section, overrides);\n\t}\n\n\tupdateValue(key: string, value: unknown): Promise<void>;\n\tupdateValue(key: string, value: unknown, overrides: IConfigurationOverrides | IConfigurationUpdateOverrides): Promise<void>;\n\tupdateValue(key: string, value: unknown, target: ConfigurationTarget): Promise<void>;\n\tupdateValue(key: string, value: unknown, overrides: IConfigurationOverrides | IConfigurationUpdateOverrides, target: ConfigurationTarget, options?: IConfigurationUpdateOptions): Promise<void>;\n\tasync updateValue(key: string, value: unknown, arg3?: unknown, arg4?: unknown, options?: IConfigurationUpdateOptions): Promise<void> {\n\t\tconst overrides: IConfigurationUpdateOverrides | undefined = isConfigurationUpdateOverrides(arg3) ? arg3\n\t\t\t: isConfigurationOverrides(arg3) ? { resource: arg3.resource, overrideIdentifiers: arg3.overrideIdentifier ? [arg3.overrideIdentifier] : undefined } : undefined;\n\t\tconst target: ConfigurationTarget | undefined = (overrides ? arg4 : arg3) as ConfigurationTarget | undefined;\n\t\tconst targets: ConfigurationTarget[] = target ? [target] : [];\n\n\t\tif (overrides?.overrideIdentifiers) {\n\t\t\toverrides.overrideIdentifiers = distinct(overrides.overrideIdentifiers);\n\t\t\toverrides.overrideIdentifiers = overrides.overrideIdentifiers.length ? overrides.overrideIdentifiers : undefined;\n\t\t}\n\n\t\tif (!targets.length) {\n\t\t\tif (overrides?.overrideIdentifiers && overrides.overrideIdentifiers.length > 1) {\n\t\t\t\tthrow new Error('Configuration Target is required while updating the value for multiple override identifiers');\n\t\t\t}\n\t\t\tconst inspect = this.inspect(key, { resource: overrides?.resource, overrideIdentifier: overrides?.overrideIdentifiers ? overrides.overrideIdentifiers[0] : undefined });\n\t\t\ttargets.push(...this.deriveConfigurationTargets(key, value, inspect));\n\n\t\t\t// Remove the setting, if the value is same as default value and is updated only in user target\n\t\t\tif (equals(value, inspect.defaultValue) && targets.length === 1 && (targets[0] === ConfigurationTarget.USER || targets[0] === ConfigurationTarget.USER_LOCAL)) {\n\t\t\t\tvalue = undefined;\n\t\t\t}\n\t\t}\n\n\t\tawait Promises.settled(targets.map(target => this.writeConfigurationValue(key, value, target, overrides, options)));\n\t}\n\n\tasync reloadConfiguration(target?: ConfigurationTarget | IWorkspaceFolder): Promise<void> {\n\t\tif (target === undefined) {\n\t\t\tthis.reloadDefaultConfiguration();\n\t\t\tconst application = await this.reloadApplicationConfiguration(true);\n\t\t\tconst { local, remote } = await this.reloadUserConfiguration();\n\t\t\tawait this.reloadWorkspaceConfiguration();\n\t\t\tawait this.loadConfiguration(application, local, remote, true);\n\t\t\treturn;\n\t\t}\n\n\t\tif (isWorkspaceFolder(target)) {\n\t\t\tawait this.reloadWorkspaceFolderConfiguration(target);\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (target) {\n\t\t\tcase ConfigurationTarget.DEFAULT:\n\t\t\t\tthis.reloadDefaultConfiguration();\n\t\t\t\treturn;\n\n\t\t\tcase ConfigurationTarget.USER: {\n\t\t\t\tconst { local, remote } = await this.reloadUserConfiguration();\n\t\t\t\tawait this.loadConfiguration(this._configuration.applicationConfiguration, local, remote, true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcase ConfigurationTarget.USER_LOCAL:\n\t\t\t\tawait this.reloadLocalUserConfiguration();\n\t\t\t\treturn;\n\n\t\t\tcase ConfigurationTarget.USER_REMOTE:\n\t\t\t\tawait this.reloadRemoteUserConfiguration();\n\t\t\t\treturn;\n\n\t\t\tcase ConfigurationTarget.WORKSPACE:\n\t\t\tcase ConfigurationTarget.WORKSPACE_FOLDER:\n\t\t\t\tawait this.reloadWorkspaceConfiguration();\n\t\t\t\treturn;\n\t\t}\n\t}\n\n\thasCachedConfigurationDefaultsOverrides(): boolean {\n\t\treturn this.defaultConfiguration.hasCachedConfigurationDefaultsOverrides();\n\t}\n\n\tinspect<T>(key: string, overrides?: IConfigurationOverrides): IConfigurationValue<T> {\n\t\treturn this._configuration.inspect<T>(key, overrides);\n\t}\n\n\tkeys(): {\n\t\tdefault: string[];\n\t\tpolicy: string[];\n\t\tuser: string[];\n\t\tworkspace: string[];\n\t\tworkspaceFolder: string[];\n\t} {\n\t\treturn this._configuration.keys();\n\t}\n\n\tpublic async whenRemoteConfigurationLoaded(): Promise<void> {\n\t\tawait this.initRemoteUserConfigurationBarrier.wait();\n\t}\n\n\t/**\n\t * At present, all workspaces (empty, single-folder, multi-root) in local and remote\n\t * can be initialized without requiring extension host except following case:\n\t *\n\t * A multi root workspace with .code-workspace file that has to be resolved by an extension.\n\t * Because of readonly `rootPath` property in extension API we have to resolve multi root workspace\n\t * before extension host starts so that `rootPath` can be set to first folder.\n\t *\n\t * This restriction is lifted partially for web in `MainThreadWorkspace`.\n\t * In web, we start extension host with empty `rootPath` in this case.\n\t *\n\t * Related root path issue discussion is being tracked here - https://github.com/microsoft/vscode/issues/69335\n\t */\n\tasync initialize(arg: IAnyWorkspaceIdentifier): Promise<void> {\n\t\tmark('code/willInitWorkspaceService');\n\n\t\tconst trigger = this.initialized;\n\t\tthis.initialized = false;\n\t\tconst workspace = await this.createWorkspace(arg);\n\t\tawait this.updateWorkspaceAndInitializeConfiguration(workspace, trigger);\n\t\tthis.checkAndMarkWorkspaceComplete(false);\n\n\t\tmark('code/didInitWorkspaceService');\n\t}\n\n\tupdateWorkspaceTrust(trusted: boolean): void {\n\t\tif (this.isWorkspaceTrusted !== trusted) {\n\t\t\tthis.isWorkspaceTrusted = trusted;\n\t\t\tconst data = this._configuration.toData();\n\t\t\tconst folderConfigurationModels: (ConfigurationModel | undefined)[] = [];\n\t\t\tfor (const folder of this.workspace.folders) {\n\t\t\t\tconst folderConfiguration = this.cachedFolderConfigs.get(folder.uri);\n\t\t\t\tlet configurationModel: ConfigurationModel | undefined;\n\t\t\t\tif (folderConfiguration) {\n\t\t\t\t\tconfigurationModel = folderConfiguration.updateWorkspaceTrust(this.isWorkspaceTrusted);\n\t\t\t\t\tthis._configuration.updateFolderConfiguration(folder.uri, configurationModel);\n\t\t\t\t}\n\t\t\t\tfolderConfigurationModels.push(configurationModel);\n\t\t\t}\n\t\t\tif (this.getWorkbenchState() === WorkbenchState.FOLDER) {\n\t\t\t\tif (folderConfigurationModels[0]) {\n\t\t\t\t\tthis._configuration.updateWorkspaceConfiguration(folderConfigurationModels[0]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._configuration.updateWorkspaceConfiguration(this.workspaceConfiguration.updateWorkspaceTrust(this.isWorkspaceTrusted));\n\t\t\t}\n\t\t\tthis.updateRestrictedSettings();\n\n\t\t\tlet keys: string[] = [];\n\t\t\tif (this.restrictedSettings.userLocal) {\n\t\t\t\tkeys.push(...this.restrictedSettings.userLocal);\n\t\t\t}\n\t\t\tif (this.restrictedSettings.userRemote) {\n\t\t\t\tkeys.push(...this.restrictedSettings.userRemote);\n\t\t\t}\n\t\t\tif (this.restrictedSettings.workspace) {\n\t\t\t\tkeys.push(...this.restrictedSettings.workspace);\n\t\t\t}\n\t\t\tthis.restrictedSettings.workspaceFolder?.forEach((value) => keys.push(...value));\n\t\t\tkeys = distinct(keys);\n\t\t\tif (keys.length) {\n\t\t\t\tthis.triggerConfigurationChange({ keys, overrides: [] }, { data, workspace: this.workspace }, ConfigurationTarget.WORKSPACE);\n\t\t\t}\n\t\t}\n\t}\n\n\tacquireInstantiationService(instantiationService: IInstantiationService): void {\n\t\tthis.instantiationService = instantiationService;\n\t}\n\n\tisSettingAppliedForAllProfiles(key: string): boolean {\n\t\tconst scope = this.configurationRegistry.getConfigurationProperties()[key]?.scope;\n\t\tif (scope && APPLICATION_SCOPES.includes(scope)) {\n\t\t\treturn true;\n\t\t}\n\t\tconst allProfilesSettings = this.getValue<string[]>(APPLY_ALL_PROFILES_SETTING) ?? [];\n\t\treturn Array.isArray(allProfilesSettings) && allProfilesSettings.includes(key);\n\t}\n\n\tprivate async createWorkspace(arg: IAnyWorkspaceIdentifier): Promise<Workspace> {\n\t\tif (isWorkspaceIdentifier(arg)) {\n\t\t\treturn this.createMultiFolderWorkspace(arg);\n\t\t}\n\n\t\tif (isSingleFolderWorkspaceIdentifier(arg)) {\n\t\t\treturn this.createSingleFolderWorkspace(arg);\n\t\t}\n\n\t\treturn this.createEmptyWorkspace(arg);\n\t}\n\n\tprivate async createMultiFolderWorkspace(workspaceIdentifier: IWorkspaceIdentifier): Promise<Workspace> {\n\t\tawait this.workspaceConfiguration.initialize({ id: workspaceIdentifier.id, configPath: workspaceIdentifier.configPath }, this.isWorkspaceTrusted);\n\t\tconst workspaceConfigPath = workspaceIdentifier.configPath;\n\t\tconst workspaceFolders = toWorkspaceFolders(this.workspaceConfiguration.getFolders(), workspaceConfigPath, this.uriIdentityService.extUri);\n\t\tconst workspaceId = workspaceIdentifier.id;\n\t\tconst workspace = new Workspace(workspaceId, workspaceFolders, this.workspaceConfiguration.isTransient(), workspaceConfigPath, uri => this.uriIdentityService.extUri.ignorePathCasing(uri));\n\t\tworkspace.initialized = this.workspaceConfiguration.initialized;\n\t\treturn workspace;\n\t}\n\n\tprivate createSingleFolderWorkspace(singleFolderWorkspaceIdentifier: ISingleFolderWorkspaceIdentifier): Workspace {\n\t\tconst workspace = new Workspace(singleFolderWorkspaceIdentifier.id, [toWorkspaceFolder(singleFolderWorkspaceIdentifier.uri)], false, null, uri => this.uriIdentityService.extUri.ignorePathCasing(uri));\n\t\tworkspace.initialized = true;\n\t\treturn workspace;\n\t}\n\n\tprivate createEmptyWorkspace(emptyWorkspaceIdentifier: IEmptyWorkspaceIdentifier): Promise<Workspace> {\n\t\tconst workspace = new Workspace(emptyWorkspaceIdentifier.id, [], false, null, uri => this.uriIdentityService.extUri.ignorePathCasing(uri));\n\t\tworkspace.initialized = true;\n\t\treturn Promise.resolve(workspace);\n\t}\n\n\tprivate checkAndMarkWorkspaceComplete(fromCache: boolean): void {\n\t\tif (!this.completeWorkspaceBarrier.isOpen() && this.workspace.initialized) {\n\t\t\tthis.completeWorkspaceBarrier.open();\n\t\t\tthis.validateWorkspaceFoldersAndReload(fromCache);\n\t\t}\n\t}\n\n\tprivate async updateWorkspaceAndInitializeConfiguration(workspace: Workspace, trigger: boolean): Promise<void> {\n\t\tconst hasWorkspaceBefore = !!this.workspace;\n\t\tlet previousState: WorkbenchState | undefined;\n\t\tlet previousWorkspacePath: string | undefined;\n\t\tlet previousFolders: WorkspaceFolder[] = [];\n\n\t\tif (hasWorkspaceBefore) {\n\t\t\tpreviousState = this.getWorkbenchState();\n\t\t\tpreviousWorkspacePath = this.workspace.configuration ? this.workspace.configuration.fsPath : undefined;\n\t\t\tpreviousFolders = this.workspace.folders;\n\t\t\tthis.workspace.update(workspace);\n\t\t} else {\n\t\t\tthis.workspace = workspace;\n\t\t}\n\n\t\tawait this.initializeConfiguration(trigger);\n\n\t\t// Trigger changes after configuration initialization so that configuration is up to date.\n\t\tif (hasWorkspaceBefore) {\n\t\t\tconst newState = this.getWorkbenchState();\n\t\t\tif (previousState && newState !== previousState) {\n\t\t\t\tthis._onDidChangeWorkbenchState.fire(newState);\n\t\t\t}\n\n\t\t\tconst newWorkspacePath = this.workspace.configuration ? this.workspace.configuration.fsPath : undefined;\n\t\t\tif (previousWorkspacePath && newWorkspacePath !== previousWorkspacePath || newState !== previousState) {\n\t\t\t\tthis._onDidChangeWorkspaceName.fire();\n\t\t\t}\n\n\t\t\tconst folderChanges = this.compareFolders(previousFolders, this.workspace.folders);\n\t\t\tif (folderChanges && (folderChanges.added.length || folderChanges.removed.length || folderChanges.changed.length)) {\n\t\t\t\tawait this.handleWillChangeWorkspaceFolders(folderChanges, false);\n\t\t\t\tthis._onDidChangeWorkspaceFolders.fire(folderChanges);\n\t\t\t}\n\t\t}\n\n\t\tif (!this.localUserConfiguration.hasTasksLoaded) {\n\t\t\t// Reload local user configuration again to load user tasks\n\t\t\tthis._register(runWhenWindowIdle(mainWindow, () => this.reloadLocalUserConfiguration(false, this._configuration.localUserConfiguration)));\n\t\t}\n\t}\n\n\tprivate compareFolders(currentFolders: IWorkspaceFolder[], newFolders: IWorkspaceFolder[]): IWorkspaceFoldersChangeEvent {\n\t\tconst result: IWorkspaceFoldersChangeEvent = { added: [], removed: [], changed: [] };\n\t\tresult.added = newFolders.filter(newFolder => !currentFolders.some(currentFolder => newFolder.uri.toString() === currentFolder.uri.toString()));\n\t\tfor (let currentIndex = 0; currentIndex < currentFolders.length; currentIndex++) {\n\t\t\tconst currentFolder = currentFolders[currentIndex];\n\t\t\tlet newIndex = 0;\n\t\t\tfor (newIndex = 0; newIndex < newFolders.length && currentFolder.uri.toString() !== newFolders[newIndex].uri.toString(); newIndex++) { }\n\t\t\tif (newIndex < newFolders.length) {\n\t\t\t\tif (currentIndex !== newIndex || currentFolder.name !== newFolders[newIndex].name) {\n\t\t\t\t\tresult.changed.push(currentFolder);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresult.removed.push(currentFolder);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate async initializeConfiguration(trigger: boolean): Promise<void> {\n\t\tawait this.defaultConfiguration.initialize();\n\n\t\tconst initPolicyConfigurationPromise = this.policyConfiguration.initialize();\n\t\tconst initApplicationConfigurationPromise = this.applicationConfiguration ? this.applicationConfiguration.initialize() : Promise.resolve(ConfigurationModel.createEmptyModel(this.logService));\n\t\tconst initUserConfiguration = async () => {\n\t\t\tmark('code/willInitUserConfiguration');\n\t\t\tconst result = await Promise.all([this.localUserConfiguration.initialize(), this.remoteUserConfiguration ? this.remoteUserConfiguration.initialize() : Promise.resolve(ConfigurationModel.createEmptyModel(this.logService))]);\n\t\t\tif (this.applicationConfiguration) {\n\t\t\t\tconst applicationConfigurationModel = await initApplicationConfigurationPromise;\n\t\t\t\tresult[0] = this.localUserConfiguration.reparse({ exclude: applicationConfigurationModel.getValue(APPLY_ALL_PROFILES_SETTING) });\n\t\t\t}\n\t\t\tmark('code/didInitUserConfiguration');\n\t\t\treturn result;\n\t\t};\n\n\t\tconst [, application, [local, remote]] = await Promise.all([\n\t\t\tinitPolicyConfigurationPromise,\n\t\t\tinitApplicationConfigurationPromise,\n\t\t\tinitUserConfiguration()\n\t\t]);\n\n\t\tmark('code/willInitWorkspaceConfiguration');\n\t\tawait this.loadConfiguration(application, local, remote, trigger);\n\t\tmark('code/didInitWorkspaceConfiguration');\n\t}\n\n\tprivate reloadDefaultConfiguration(): void {\n\t\tthis.onDefaultConfigurationChanged(this.defaultConfiguration.reload());\n\t}\n\n\tprivate async reloadApplicationConfiguration(donotTrigger?: boolean): Promise<ConfigurationModel> {\n\t\tif (!this.applicationConfiguration) {\n\t\t\treturn ConfigurationModel.createEmptyModel(this.logService);\n\t\t}\n\t\tconst model = await this.applicationConfiguration.loadConfiguration();\n\t\tif (!donotTrigger) {\n\t\t\tthis.onApplicationConfigurationChanged(model);\n\t\t}\n\t\treturn model;\n\t}\n\n\tprivate async reloadUserConfiguration(): Promise<{ local: ConfigurationModel; remote: ConfigurationModel }> {\n\t\tconst [local, remote] = await Promise.all([this.reloadLocalUserConfiguration(true), this.reloadRemoteUserConfiguration(true)]);\n\t\treturn { local, remote };\n\t}\n\n\tasync reloadLocalUserConfiguration(donotTrigger?: boolean, settingsConfiguration?: ConfigurationModel): Promise<ConfigurationModel> {\n\t\tconst model = await this.localUserConfiguration.reload(settingsConfiguration);\n\t\tif (!donotTrigger) {\n\t\t\tthis.onLocalUserConfigurationChanged(model);\n\t\t}\n\t\treturn model;\n\t}\n\n\tprivate async reloadRemoteUserConfiguration(donotTrigger?: boolean): Promise<ConfigurationModel> {\n\t\tif (this.remoteUserConfiguration) {\n\t\t\tconst model = await this.remoteUserConfiguration.reload();\n\t\t\tif (!donotTrigger) {\n\t\t\t\tthis.onRemoteUserConfigurationChanged(model);\n\t\t\t}\n\t\t\treturn model;\n\t\t}\n\t\treturn ConfigurationModel.createEmptyModel(this.logService);\n\t}\n\n\tprivate async reloadWorkspaceConfiguration(): Promise<void> {\n\t\tconst workbenchState = this.getWorkbenchState();\n\t\tif (workbenchState === WorkbenchState.FOLDER) {\n\t\t\treturn this.onWorkspaceFolderConfigurationChanged(this.workspace.folders[0]);\n\t\t}\n\t\tif (workbenchState === WorkbenchState.WORKSPACE) {\n\t\t\treturn this.workspaceConfiguration.reload().then(() => this.onWorkspaceConfigurationChanged(false));\n\t\t}\n\t}\n\n\tprivate reloadWorkspaceFolderConfiguration(folder: IWorkspaceFolder): Promise<void> {\n\t\treturn this.onWorkspaceFolderConfigurationChanged(folder);\n\t}\n\n\tprivate async loadConfiguration(applicationConfigurationModel: ConfigurationModel, userConfigurationModel: ConfigurationModel, remoteUserConfigurationModel: ConfigurationModel, trigger: boolean): Promise<void> {\n\t\t// reset caches\n\t\tthis.cachedFolderConfigs = new ResourceMap<FolderConfiguration>();\n\n\t\tconst folders = this.workspace.folders;\n\t\tconst folderConfigurations = await this.loadFolderConfigurations(folders);\n\n\t\tconst workspaceConfiguration = this.getWorkspaceConfigurationModel(folderConfigurations);\n\t\tconst folderConfigurationModels = new ResourceMap<ConfigurationModel>();\n\t\tfolderConfigurations.forEach((folderConfiguration, index) => folderConfigurationModels.set(folders[index].uri, folderConfiguration));\n\n\t\tconst currentConfiguration = this._configuration;\n\t\tthis._configuration = new Configuration(this.defaultConfiguration.configurationModel, this.policyConfiguration.configurationModel, applicationConfigurationModel, userConfigurationModel, remoteUserConfigurationModel, workspaceConfiguration, folderConfigurationModels, ConfigurationModel.createEmptyModel(this.logService), new ResourceMap<ConfigurationModel>(), this.workspace, this.logService);\n\n\t\tthis.initialized = true;\n\n\t\tif (trigger) {\n\t\t\tconst change = this._configuration.compare(currentConfiguration);\n\t\t\tthis.triggerConfigurationChange(change, { data: currentConfiguration.toData(), workspace: this.workspace }, ConfigurationTarget.WORKSPACE);\n\t\t}\n\n\t\tthis.updateRestrictedSettings();\n\t}\n\n\tprivate getWorkspaceConfigurationModel(folderConfigurations: ConfigurationModel[]): ConfigurationModel {\n\t\tswitch (this.getWorkbenchState()) {\n\t\t\tcase WorkbenchState.FOLDER:\n\t\t\t\treturn folderConfigurations[0];\n\t\t\tcase WorkbenchState.WORKSPACE:\n\t\t\t\treturn this.workspaceConfiguration.getConfiguration();\n\t\t\tdefault:\n\t\t\t\treturn ConfigurationModel.createEmptyModel(this.logService);\n\t\t}\n\t}\n\n\tprivate onUserDataProfileChanged(e: DidChangeUserDataProfileEvent): void {\n\t\te.join((async () => {\n\t\t\tconst promises: Promise<ConfigurationModel>[] = [];\n\t\t\tpromises.push(this.localUserConfiguration.reset(e.profile.settingsResource, e.profile.tasksResource, e.profile.mcpResource, { scopes: getLocalUserConfigurationScopes(e.profile, !!this.remoteUserConfiguration) }));\n\t\t\tif (e.previous.isDefault !== e.profile.isDefault\n\t\t\t\t|| !!e.previous.useDefaultFlags?.settings !== !!e.profile.useDefaultFlags?.settings) {\n\t\t\t\tthis.createApplicationConfiguration();\n\t\t\t\tif (this.applicationConfiguration) {\n\t\t\t\t\tpromises.push(this.reloadApplicationConfiguration(true));\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet [localUser, application] = await Promise.all(promises);\n\t\t\tapplication = application ?? this._configuration.applicationConfiguration;\n\t\t\tif (this.applicationConfiguration) {\n\t\t\t\tlocalUser = this.localUserConfiguration.reparse({ exclude: application.getValue(APPLY_ALL_PROFILES_SETTING) });\n\t\t\t}\n\t\t\tawait this.loadConfiguration(application, localUser, this._configuration.remoteUserConfiguration, true);\n\t\t})());\n\t}\n\n\tprivate onDefaultConfigurationChanged(configurationModel: ConfigurationModel, properties?: string[]): void {\n\t\tif (this.workspace) {\n\t\t\tconst previousData = this._configuration.toData();\n\t\t\tconst change = this._configuration.compareAndUpdateDefaultConfiguration(configurationModel, properties);\n\t\t\tif (this.applicationConfiguration) {\n\t\t\t\tthis._configuration.updateApplicationConfiguration(this.applicationConfiguration.reparse());\n\t\t\t}\n\t\t\tif (this.remoteUserConfiguration) {\n\t\t\t\tthis._configuration.updateLocalUserConfiguration(this.localUserConfiguration.reparse());\n\t\t\t\tthis._configuration.updateRemoteUserConfiguration(this.remoteUserConfiguration.reparse());\n\t\t\t}\n\t\t\tif (this.getWorkbenchState() === WorkbenchState.FOLDER) {\n\t\t\t\tconst folderConfiguration = this.cachedFolderConfigs.get(this.workspace.folders[0].uri);\n\t\t\t\tif (folderConfiguration) {\n\t\t\t\t\tthis._configuration.updateWorkspaceConfiguration(folderConfiguration.reparse());\n\t\t\t\t\tthis._configuration.updateFolderConfiguration(this.workspace.folders[0].uri, folderConfiguration.reparse());\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._configuration.updateWorkspaceConfiguration(this.workspaceConfiguration.reparseWorkspaceSettings());\n\t\t\t\tfor (const folder of this.workspace.folders) {\n\t\t\t\t\tconst folderConfiguration = this.cachedFolderConfigs.get(folder.uri);\n\t\t\t\t\tif (folderConfiguration) {\n\t\t\t\t\t\tthis._configuration.updateFolderConfiguration(folder.uri, folderConfiguration.reparse());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.triggerConfigurationChange(change, { data: previousData, workspace: this.workspace }, ConfigurationTarget.DEFAULT);\n\t\t\tthis.updateRestrictedSettings();\n\t\t}\n\t}\n\n\tprivate onPolicyConfigurationChanged(policyConfiguration: ConfigurationModel): void {\n\t\tconst previous = { data: this._configuration.toData(), workspace: this.workspace };\n\t\tconst change = this._configuration.compareAndUpdatePolicyConfiguration(policyConfiguration);\n\t\tthis.triggerConfigurationChange(change, previous, ConfigurationTarget.DEFAULT);\n\t}\n\n\tprivate onApplicationConfigurationChanged(applicationConfiguration: ConfigurationModel): void {\n\t\tconst previous = { data: this._configuration.toData(), workspace: this.workspace };\n\t\tconst previousAllProfilesSettings = this._configuration.applicationConfiguration.getValue<string[]>(APPLY_ALL_PROFILES_SETTING) ?? [];\n\t\tconst change = this._configuration.compareAndUpdateApplicationConfiguration(applicationConfiguration);\n\t\tconst currentAllProfilesSettings = this.getValue<string[]>(APPLY_ALL_PROFILES_SETTING) ?? [];\n\t\tconst configurationProperties = this.configurationRegistry.getConfigurationProperties();\n\t\tconst changedKeys: string[] = [];\n\t\tfor (const changedKey of change.keys) {\n\t\t\tconst scope = configurationProperties[changedKey]?.scope;\n\t\t\tif (scope && APPLICATION_SCOPES.includes(scope)) {\n\t\t\t\tchangedKeys.push(changedKey);\n\t\t\t\tif (changedKey === APPLY_ALL_PROFILES_SETTING) {\n\t\t\t\t\tfor (const previousAllProfileSetting of previousAllProfilesSettings) {\n\t\t\t\t\t\tif (!currentAllProfilesSettings.includes(previousAllProfileSetting)) {\n\t\t\t\t\t\t\tchangedKeys.push(previousAllProfileSetting);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor (const currentAllProfileSetting of currentAllProfilesSettings) {\n\t\t\t\t\t\tif (!previousAllProfilesSettings.includes(currentAllProfileSetting)) {\n\t\t\t\t\t\t\tchangedKeys.push(currentAllProfileSetting);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (currentAllProfilesSettings.includes(changedKey)) {\n\t\t\t\tchangedKeys.push(changedKey);\n\t\t\t}\n\t\t}\n\t\tchange.keys = changedKeys;\n\t\tif (change.keys.includes(APPLY_ALL_PROFILES_SETTING)) {\n\t\t\tthis._configuration.updateLocalUserConfiguration(this.localUserConfiguration.reparse({ exclude: currentAllProfilesSettings }));\n\t\t}\n\t\tthis.triggerConfigurationChange(change, previous, ConfigurationTarget.USER);\n\t}\n\n\tprivate onLocalUserConfigurationChanged(userConfiguration: ConfigurationModel): void {\n\t\tconst previous = { data: this._configuration.toData(), workspace: this.workspace };\n\t\tconst change = this._configuration.compareAndUpdateLocalUserConfiguration(userConfiguration);\n\t\tthis.triggerConfigurationChange(change, previous, ConfigurationTarget.USER);\n\t}\n\n\tprivate onRemoteUserConfigurationChanged(userConfiguration: ConfigurationModel): void {\n\t\tconst previous = { data: this._configuration.toData(), workspace: this.workspace };\n\t\tconst change = this._configuration.compareAndUpdateRemoteUserConfiguration(userConfiguration);\n\t\tthis.triggerConfigurationChange(change, previous, ConfigurationTarget.USER);\n\t}\n\n\tprivate async onWorkspaceConfigurationChanged(fromCache: boolean): Promise<void> {\n\t\tif (this.workspace && this.workspace.configuration) {\n\t\t\tlet newFolders = toWorkspaceFolders(this.workspaceConfiguration.getFolders(), this.workspace.configuration, this.uriIdentityService.extUri);\n\n\t\t\t// Validate only if workspace is initialized\n\t\t\tif (this.workspace.initialized) {\n\t\t\t\tconst { added, removed, changed } = this.compareFolders(this.workspace.folders, newFolders);\n\n\t\t\t\t/* If changed validate new folders */\n\t\t\t\tif (added.length || removed.length || changed.length) {\n\t\t\t\t\tnewFolders = await this.toValidWorkspaceFolders(newFolders);\n\t\t\t\t}\n\t\t\t\t/* Otherwise use existing */\n\t\t\t\telse {\n\t\t\t\t\tnewFolders = this.workspace.folders;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait this.updateWorkspaceConfiguration(newFolders, this.workspaceConfiguration.getConfiguration(), fromCache);\n\t\t}\n\t}\n\n\tprivate updateRestrictedSettings(): void {\n\t\tconst changed: string[] = [];\n\n\t\tconst allProperties = this.configurationRegistry.getConfigurationProperties();\n\t\tconst defaultRestrictedSettings: string[] = Object.keys(allProperties).filter(key => allProperties[key].restricted).sort((a, b) => a.localeCompare(b));\n\t\tconst defaultDelta = delta(defaultRestrictedSettings, this._restrictedSettings.default, (a, b) => a.localeCompare(b));\n\t\tchanged.push(...defaultDelta.added, ...defaultDelta.removed);\n\n\t\tconst application = (this.applicationConfiguration?.getRestrictedSettings() || []).sort((a, b) => a.localeCompare(b));\n\t\tconst applicationDelta = delta(application, this._restrictedSettings.application || [], (a, b) => a.localeCompare(b));\n\t\tchanged.push(...applicationDelta.added, ...applicationDelta.removed);\n\n\t\tconst userLocal = this.localUserConfiguration.getRestrictedSettings().sort((a, b) => a.localeCompare(b));\n\t\tconst userLocalDelta = delta(userLocal, this._restrictedSettings.userLocal || [], (a, b) => a.localeCompare(b));\n\t\tchanged.push(...userLocalDelta.added, ...userLocalDelta.removed);\n\n\t\tconst userRemote = (this.remoteUserConfiguration?.getRestrictedSettings() || []).sort((a, b) => a.localeCompare(b));\n\t\tconst userRemoteDelta = delta(userRemote, this._restrictedSettings.userRemote || [], (a, b) => a.localeCompare(b));\n\t\tchanged.push(...userRemoteDelta.added, ...userRemoteDelta.removed);\n\n\t\tconst workspaceFolderMap = new ResourceMap<ReadonlyArray<string>>();\n\t\tfor (const workspaceFolder of this.workspace.folders) {\n\t\t\tconst cachedFolderConfig = this.cachedFolderConfigs.get(workspaceFolder.uri);\n\t\t\tconst folderRestrictedSettings = (cachedFolderConfig?.getRestrictedSettings() || []).sort((a, b) => a.localeCompare(b));\n\t\t\tif (folderRestrictedSettings.length) {\n\t\t\t\tworkspaceFolderMap.set(workspaceFolder.uri, folderRestrictedSettings);\n\t\t\t}\n\t\t\tconst previous = this._restrictedSettings.workspaceFolder?.get(workspaceFolder.uri) || [];\n\t\t\tconst workspaceFolderDelta = delta(folderRestrictedSettings, previous, (a, b) => a.localeCompare(b));\n\t\t\tchanged.push(...workspaceFolderDelta.added, ...workspaceFolderDelta.removed);\n\t\t}\n\n\t\tconst workspace = this.getWorkbenchState() === WorkbenchState.WORKSPACE ? this.workspaceConfiguration.getRestrictedSettings().sort((a, b) => a.localeCompare(b))\n\t\t\t: this.workspace.folders[0] ? (workspaceFolderMap.get(this.workspace.folders[0].uri) || []) : [];\n\t\tconst workspaceDelta = delta(workspace, this._restrictedSettings.workspace || [], (a, b) => a.localeCompare(b));\n\t\tchanged.push(...workspaceDelta.added, ...workspaceDelta.removed);\n\n\t\tif (changed.length) {\n\t\t\tthis._restrictedSettings = {\n\t\t\t\tdefault: defaultRestrictedSettings,\n\t\t\t\tapplication: application.length ? application : undefined,\n\t\t\t\tuserLocal: userLocal.length ? userLocal : undefined,\n\t\t\t\tuserRemote: userRemote.length ? userRemote : undefined,\n\t\t\t\tworkspace: workspace.length ? workspace : undefined,\n\t\t\t\tworkspaceFolder: workspaceFolderMap.size ? workspaceFolderMap : undefined,\n\t\t\t};\n\t\t\tthis._onDidChangeRestrictedSettings.fire(this.restrictedSettings);\n\t\t}\n\t}\n\n\tprivate async updateWorkspaceConfiguration(workspaceFolders: WorkspaceFolder[], configuration: ConfigurationModel, fromCache: boolean): Promise<void> {\n\t\tconst previous = { data: this._configuration.toData(), workspace: this.workspace };\n\t\tconst change = this._configuration.compareAndUpdateWorkspaceConfiguration(configuration);\n\t\tconst changes = this.compareFolders(this.workspace.folders, workspaceFolders);\n\t\tif (changes.added.length || changes.removed.length || changes.changed.length) {\n\t\t\tthis.workspace.folders = workspaceFolders;\n\t\t\tconst change = await this.onFoldersChanged();\n\t\t\tawait this.handleWillChangeWorkspaceFolders(changes, fromCache);\n\t\t\tthis.triggerConfigurationChange(change, previous, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\t\tthis._onDidChangeWorkspaceFolders.fire(changes);\n\t\t} else {\n\t\t\tthis.triggerConfigurationChange(change, previous, ConfigurationTarget.WORKSPACE);\n\t\t}\n\t\tthis.updateRestrictedSettings();\n\t}\n\n\tprivate async handleWillChangeWorkspaceFolders(changes: IWorkspaceFoldersChangeEvent, fromCache: boolean): Promise<void> {\n\t\tconst joiners: Promise<void>[] = [];\n\t\tthis._onWillChangeWorkspaceFolders.fire({\n\t\t\tjoin(updateWorkspaceTrustStatePromise) {\n\t\t\t\tjoiners.push(updateWorkspaceTrustStatePromise);\n\t\t\t},\n\t\t\tchanges,\n\t\t\tfromCache\n\t\t});\n\t\ttry { await Promises.settled(joiners); } catch (error) { /* Ignore */ }\n\t}\n\n\tprivate async onWorkspaceFolderConfigurationChanged(folder: IWorkspaceFolder): Promise<void> {\n\t\tconst [folderConfiguration] = await this.loadFolderConfigurations([folder]);\n\t\tconst previous = { data: this._configuration.toData(), workspace: this.workspace };\n\t\tconst folderConfigurationChange = this._configuration.compareAndUpdateFolderConfiguration(folder.uri, folderConfiguration);\n\t\tif (this.getWorkbenchState() === WorkbenchState.FOLDER) {\n\t\t\tconst workspaceConfigurationChange = this._configuration.compareAndUpdateWorkspaceConfiguration(folderConfiguration);\n\t\t\tthis.triggerConfigurationChange(mergeChanges(folderConfigurationChange, workspaceConfigurationChange), previous, ConfigurationTarget.WORKSPACE);\n\t\t} else {\n\t\t\tthis.triggerConfigurationChange(folderConfigurationChange, previous, ConfigurationTarget.WORKSPACE_FOLDER);\n\t\t}\n\t\tthis.updateRestrictedSettings();\n\t}\n\n\tprivate async onFoldersChanged(): Promise<IConfigurationChange> {\n\t\tconst changes: IConfigurationChange[] = [];\n\n\t\t// Remove the configurations of deleted folders\n\t\tfor (const key of this.cachedFolderConfigs.keys()) {\n\t\t\tif (!this.workspace.folders.filter(folder => folder.uri.toString() === key.toString())[0]) {\n\t\t\t\tconst folderConfiguration = this.cachedFolderConfigs.get(key);\n\t\t\t\tfolderConfiguration!.dispose();\n\t\t\t\tthis.cachedFolderConfigs.delete(key);\n\t\t\t\tchanges.push(this._configuration.compareAndDeleteFolderConfiguration(key));\n\t\t\t}\n\t\t}\n\n\t\tconst toInitialize = this.workspace.folders.filter(folder => !this.cachedFolderConfigs.has(folder.uri));\n\t\tif (toInitialize.length) {\n\t\t\tconst folderConfigurations = await this.loadFolderConfigurations(toInitialize);\n\t\t\tfolderConfigurations.forEach((folderConfiguration, index) => {\n\t\t\t\tchanges.push(this._configuration.compareAndUpdateFolderConfiguration(toInitialize[index].uri, folderConfiguration));\n\t\t\t});\n\t\t}\n\t\treturn mergeChanges(...changes);\n\t}\n\n\tprivate loadFolderConfigurations(folders: IWorkspaceFolder[]): Promise<ConfigurationModel[]> {\n\t\treturn Promise.all([...folders.map(folder => {\n\t\t\tlet folderConfiguration = this.cachedFolderConfigs.get(folder.uri);\n\t\t\tif (!folderConfiguration) {\n\t\t\t\tfolderConfiguration = new FolderConfiguration(!this.initialized, folder, FOLDER_CONFIG_FOLDER_NAME, this.getWorkbenchState(), this.isWorkspaceTrusted, this.fileService, this.uriIdentityService, this.logService, this.configurationCache);\n\t\t\t\tthis._register(folderConfiguration.onDidChange(() => this.onWorkspaceFolderConfigurationChanged(folder)));\n\t\t\t\tthis.cachedFolderConfigs.set(folder.uri, this._register(folderConfiguration));\n\t\t\t}\n\t\t\treturn folderConfiguration.loadConfiguration();\n\t\t})]);\n\t}\n\n\tprivate async validateWorkspaceFoldersAndReload(fromCache: boolean): Promise<void> {\n\t\tconst validWorkspaceFolders = await this.toValidWorkspaceFolders(this.workspace.folders);\n\t\tconst { removed } = this.compareFolders(this.workspace.folders, validWorkspaceFolders);\n\t\tif (removed.length) {\n\t\t\tawait this.updateWorkspaceConfiguration(validWorkspaceFolders, this.workspaceConfiguration.getConfiguration(), fromCache);\n\t\t}\n\t}\n\n\t// Filter out workspace folders which are files (not directories)\n\t// Workspace folders those cannot be resolved are not filtered because they are handled by the Explorer.\n\tprivate async toValidWorkspaceFolders(workspaceFolders: WorkspaceFolder[]): Promise<WorkspaceFolder[]> {\n\t\tconst validWorkspaceFolders: WorkspaceFolder[] = [];\n\t\tfor (const workspaceFolder of workspaceFolders) {\n\t\t\ttry {\n\t\t\t\tconst result = await this.fileService.stat(workspaceFolder.uri);\n\t\t\t\tif (!result.isDirectory) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tthis.logService.warn(`Ignoring the error while validating workspace folder ${workspaceFolder.uri.toString()} - ${toErrorMessage(e)}`);\n\t\t\t}\n\t\t\tvalidWorkspaceFolders.push(workspaceFolder);\n\t\t}\n\t\treturn validWorkspaceFolders;\n\t}\n\n\tprivate async writeConfigurationValue(key: string, value: unknown, target: ConfigurationTarget, overrides: IConfigurationUpdateOverrides | undefined, options?: IConfigurationUpdateOptions): Promise<void> {\n\t\tif (!this.instantiationService) {\n\t\t\tthrow new Error('Cannot write configuration because the configuration service is not yet ready to accept writes.');\n\t\t}\n\n\t\tif (target === ConfigurationTarget.DEFAULT) {\n\t\t\tthrow new Error('Invalid configuration target');\n\t\t}\n\n\t\tif (target === ConfigurationTarget.MEMORY) {\n\t\t\tconst previous = { data: this._configuration.toData(), workspace: this.workspace };\n\t\t\tthis._configuration.updateValue(key, value, overrides);\n\t\t\tthis.triggerConfigurationChange({ keys: overrides?.overrideIdentifiers?.length ? [keyFromOverrideIdentifiers(overrides.overrideIdentifiers), key] : [key], overrides: overrides?.overrideIdentifiers?.length ? overrides.overrideIdentifiers.map(overrideIdentifier => ([overrideIdentifier, [key]])) : [] }, previous, target);\n\t\t\treturn;\n\t\t}\n\n\t\tconst editableConfigurationTarget = this.toEditableConfigurationTarget(target, key);\n\t\tif (!editableConfigurationTarget) {\n\t\t\tthrow new Error('Invalid configuration target');\n\t\t}\n\n\t\tif (editableConfigurationTarget === EditableConfigurationTarget.USER_REMOTE && !this.remoteUserConfiguration) {\n\t\t\tthrow new Error('Invalid configuration target');\n\t\t}\n\n\t\tif (overrides?.overrideIdentifiers?.length && overrides.overrideIdentifiers.length > 1) {\n\t\t\tconst configurationModel = this.getConfigurationModelForEditableConfigurationTarget(editableConfigurationTarget, overrides.resource);\n\t\t\tif (configurationModel) {\n\t\t\t\tconst overrideIdentifiers = overrides.overrideIdentifiers.sort();\n\t\t\t\tconst existingOverrides = configurationModel.overrides.find(override => arrayEquals([...override.identifiers].sort(), overrideIdentifiers));\n\t\t\t\tif (existingOverrides) {\n\t\t\t\t\toverrides.overrideIdentifiers = existingOverrides.identifiers;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Use same instance of ConfigurationEditing to make sure all writes go through the same queue\n\t\tthis.configurationEditing = this.configurationEditing ?? this.createConfigurationEditingService(this.instantiationService);\n\t\tawait (await this.configurationEditing).writeConfiguration(editableConfigurationTarget, { key, value }, { scopes: overrides, ...options });\n\t\tswitch (editableConfigurationTarget) {\n\t\t\tcase EditableConfigurationTarget.USER_LOCAL:\n\t\t\t\tif (this.applicationConfiguration && this.isSettingAppliedForAllProfiles(key)) {\n\t\t\t\t\tawait this.reloadApplicationConfiguration();\n\t\t\t\t} else {\n\t\t\t\t\tawait this.reloadLocalUserConfiguration();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\tcase EditableConfigurationTarget.USER_REMOTE:\n\t\t\t\treturn this.reloadRemoteUserConfiguration().then(() => undefined);\n\t\t\tcase EditableConfigurationTarget.WORKSPACE:\n\t\t\t\treturn this.reloadWorkspaceConfiguration();\n\t\t\tcase EditableConfigurationTarget.WORKSPACE_FOLDER: {\n\t\t\t\tconst workspaceFolder = overrides && overrides.resource ? this.workspace.getFolder(overrides.resource) : null;\n\t\t\t\tif (workspaceFolder) {\n\t\t\t\t\treturn this.reloadWorkspaceFolderConfiguration(workspaceFolder);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async createConfigurationEditingService(instantiationService: IInstantiationService): Promise<ConfigurationEditing> {\n\t\tconst remoteSettingsResource = (await this.remoteAgentService.getEnvironment())?.settingsPath ?? null;\n\t\treturn instantiationService.createInstance(ConfigurationEditing, remoteSettingsResource);\n\t}\n\n\tprivate getConfigurationModelForEditableConfigurationTarget(target: EditableConfigurationTarget, resource?: URI | null): ConfigurationModel | undefined {\n\t\tswitch (target) {\n\t\t\tcase EditableConfigurationTarget.USER_LOCAL: return this._configuration.localUserConfiguration;\n\t\t\tcase EditableConfigurationTarget.USER_REMOTE: return this._configuration.remoteUserConfiguration;\n\t\t\tcase EditableConfigurationTarget.WORKSPACE: return this._configuration.workspaceConfiguration;\n\t\t\tcase EditableConfigurationTarget.WORKSPACE_FOLDER: return resource ? this._configuration.folderConfigurations.get(resource) : undefined;\n\t\t}\n\t}\n\n\tgetConfigurationModel(target: ConfigurationTarget, resource?: URI | null): ConfigurationModel | undefined {\n\t\tswitch (target) {\n\t\t\tcase ConfigurationTarget.USER_LOCAL: return this._configuration.localUserConfiguration;\n\t\t\tcase ConfigurationTarget.USER_REMOTE: return this._configuration.remoteUserConfiguration;\n\t\t\tcase ConfigurationTarget.WORKSPACE: return this._configuration.workspaceConfiguration;\n\t\t\tcase ConfigurationTarget.WORKSPACE_FOLDER: return resource ? this._configuration.folderConfigurations.get(resource) : undefined;\n\t\t\tdefault: return undefined;\n\t\t}\n\t}\n\n\tprivate deriveConfigurationTargets(key: string, value: unknown, inspect: IConfigurationValue<unknown>): ConfigurationTarget[] {\n\t\tif (equals(value, inspect.value)) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst definedTargets: ConfigurationTarget[] = [];\n\t\tif (inspect.workspaceFolderValue !== undefined) {\n\t\t\tdefinedTargets.push(ConfigurationTarget.WORKSPACE_FOLDER);\n\t\t}\n\t\tif (inspect.workspaceValue !== undefined) {\n\t\t\tdefinedTargets.push(ConfigurationTarget.WORKSPACE);\n\t\t}\n\t\tif (inspect.userRemoteValue !== undefined) {\n\t\t\tdefinedTargets.push(ConfigurationTarget.USER_REMOTE);\n\t\t}\n\t\tif (inspect.userLocalValue !== undefined) {\n\t\t\tdefinedTargets.push(ConfigurationTarget.USER_LOCAL);\n\t\t}\n\t\tif (inspect.applicationValue !== undefined) {\n\t\t\tdefinedTargets.push(ConfigurationTarget.APPLICATION);\n\t\t}\n\n\t\tif (value === undefined) {\n\t\t\t// Remove the setting in all defined targets\n\t\t\treturn definedTargets;\n\t\t}\n\n\t\treturn [definedTargets[0] || ConfigurationTarget.USER];\n\t}\n\n\tprivate triggerConfigurationChange(change: IConfigurationChange, previous: { data: IConfigurationData; workspace?: Workspace } | undefined, target: ConfigurationTarget): void {\n\t\tif (change.keys.length) {\n\t\t\tif (target !== ConfigurationTarget.DEFAULT) {\n\t\t\t\tthis.logService.debug(`Configuration keys changed in ${ConfigurationTargetToString(target)} target`, ...change.keys);\n\t\t\t}\n\t\t\tconst configurationChangeEvent = new ConfigurationChangeEvent(change, previous, this._configuration, this.workspace, this.logService);\n\t\t\tconfigurationChangeEvent.source = target;\n\t\t\tthis._onDidChangeConfiguration.fire(configurationChangeEvent);\n\t\t}\n\t}\n\n\tprivate toEditableConfigurationTarget(target: ConfigurationTarget, key: string): EditableConfigurationTarget | null {\n\t\tif (target === ConfigurationTarget.APPLICATION) {\n\t\t\treturn EditableConfigurationTarget.USER_LOCAL;\n\t\t}\n\t\tif (target === ConfigurationTarget.USER) {\n\t\t\tif (this.remoteUserConfiguration) {\n\t\t\t\tconst scope = this.configurationRegistry.getConfigurationProperties()[key]?.scope;\n\t\t\t\tif (scope === ConfigurationScope.MACHINE || scope === ConfigurationScope.MACHINE_OVERRIDABLE || scope === ConfigurationScope.APPLICATION_MACHINE) {\n\t\t\t\t\treturn EditableConfigurationTarget.USER_REMOTE;\n\t\t\t\t}\n\t\t\t\tif (this.inspect(key).userRemoteValue !== undefined) {\n\t\t\t\t\treturn EditableConfigurationTarget.USER_REMOTE;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn EditableConfigurationTarget.USER_LOCAL;\n\t\t}\n\t\tif (target === ConfigurationTarget.USER_LOCAL) {\n\t\t\treturn EditableConfigurationTarget.USER_LOCAL;\n\t\t}\n\t\tif (target === ConfigurationTarget.USER_REMOTE) {\n\t\t\treturn EditableConfigurationTarget.USER_REMOTE;\n\t\t}\n\t\tif (target === ConfigurationTarget.WORKSPACE) {\n\t\t\treturn EditableConfigurationTarget.WORKSPACE;\n\t\t}\n\t\tif (target === ConfigurationTarget.WORKSPACE_FOLDER) {\n\t\t\treturn EditableConfigurationTarget.WORKSPACE_FOLDER;\n\t\t}\n\t\treturn null;\n\t}\n}\n\nclass RegisterConfigurationSchemasContribution extends Disposable implements IWorkbenchContribution {\n\tconstructor(\n\t\t@IWorkspaceContextService private readonly workspaceContextService: IWorkspaceContextService,\n\t\t@IWorkbenchEnvironmentService private readonly environmentService: IWorkbenchEnvironmentService,\n\t\t@IWorkspaceTrustManagementService private readonly workspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t\t@IExtensionService extensionService: IExtensionService,\n\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t) {\n\t\tsuper();\n\n\t\textensionService.whenInstalledExtensionsRegistered().then(() => {\n\t\t\tthis.registerConfigurationSchemas();\n\n\t\t\tconst configurationRegistry = Registry.as<IConfigurationRegistry>(Extensions.Configuration);\n\t\t\tconst delayer = this._register(new Delayer<void>(50));\n\t\t\tthis._register(Event.any(configurationRegistry.onDidUpdateConfiguration, configurationRegistry.onDidSchemaChange, workspaceTrustManagementService.onDidChangeTrust)(() =>\n\t\t\t\tdelayer.trigger(() => this.registerConfigurationSchemas(), lifecycleService.phase === LifecyclePhase.Eventually ? undefined : 2500 /* delay longer in early phases */)));\n\t\t});\n\t}\n\n\tprivate registerConfigurationSchemas(): void {\n\t\tconst allSettingsSchema: IJSONSchema = {\n\t\t\tproperties: allSettings.properties,\n\t\t\tpatternProperties: allSettings.patternProperties,\n\t\t\tadditionalProperties: true,\n\t\t\tallowTrailingCommas: true,\n\t\t\tallowComments: true\n\t\t};\n\n\t\tconst userSettingsSchema: IJSONSchema = this.environmentService.remoteAuthority ?\n\t\t\t{\n\t\t\t\tproperties: Object.assign({},\n\t\t\t\t\tapplicationSettings.properties,\n\t\t\t\t\twindowSettings.properties,\n\t\t\t\t\tresourceSettings.properties\n\t\t\t\t),\n\t\t\t\tpatternProperties: allSettings.patternProperties,\n\t\t\t\tadditionalProperties: true,\n\t\t\t\tallowTrailingCommas: true,\n\t\t\t\tallowComments: true\n\t\t\t}\n\t\t\t: allSettingsSchema;\n\n\t\tconst profileSettingsSchema: IJSONSchema = {\n\t\t\tproperties: Object.assign({},\n\t\t\t\tmachineSettings.properties,\n\t\t\t\tmachineOverridableSettings.properties,\n\t\t\t\twindowSettings.properties,\n\t\t\t\tresourceSettings.properties\n\t\t\t),\n\t\t\tpatternProperties: allSettings.patternProperties,\n\t\t\tadditionalProperties: true,\n\t\t\tallowTrailingCommas: true,\n\t\t\tallowComments: true\n\t\t};\n\n\t\tconst machineSettingsSchema: IJSONSchema = {\n\t\t\tproperties: Object.assign({},\n\t\t\t\tapplicationMachineSettings.properties,\n\t\t\t\tmachineSettings.properties,\n\t\t\t\tmachineOverridableSettings.properties,\n\t\t\t\twindowSettings.properties,\n\t\t\t\tresourceSettings.properties\n\t\t\t),\n\t\t\tpatternProperties: allSettings.patternProperties,\n\t\t\tadditionalProperties: true,\n\t\t\tallowTrailingCommas: true,\n\t\t\tallowComments: true\n\t\t};\n\n\t\tconst workspaceSettingsSchema: IJSONSchema = {\n\t\t\tproperties: Object.assign({},\n\t\t\t\tthis.checkAndFilterPropertiesRequiringTrust(machineOverridableSettings.properties),\n\t\t\t\tthis.checkAndFilterPropertiesRequiringTrust(windowSettings.properties),\n\t\t\t\tthis.checkAndFilterPropertiesRequiringTrust(resourceSettings.properties)\n\t\t\t),\n\t\t\tpatternProperties: allSettings.patternProperties,\n\t\t\tadditionalProperties: true,\n\t\t\tallowTrailingCommas: true,\n\t\t\tallowComments: true\n\t\t};\n\n\t\tconst defaultSettingsSchema = {\n\t\t\tproperties: Object.keys(allSettings.properties).reduce<IJSONSchemaMap>((result, key) => {\n\t\t\t\tresult[key] = Object.assign({ deprecationMessage: undefined }, allSettings.properties[key]);\n\t\t\t\treturn result;\n\t\t\t}, {}),\n\t\t\tpatternProperties: Object.keys(allSettings.patternProperties).reduce<IJSONSchemaMap>((result, key) => {\n\t\t\t\tresult[key] = Object.assign({ deprecationMessage: undefined }, allSettings.patternProperties[key]);\n\t\t\t\treturn result;\n\t\t\t}, {}),\n\t\t\tadditionalProperties: true,\n\t\t\tallowTrailingCommas: true,\n\t\t\tallowComments: true\n\t\t};\n\n\t\tconst folderSettingsSchema: IJSONSchema = WorkbenchState.WORKSPACE === this.workspaceContextService.getWorkbenchState() ?\n\t\t\t{\n\t\t\t\tproperties: Object.assign({},\n\t\t\t\t\tthis.checkAndFilterPropertiesRequiringTrust(machineOverridableSettings.properties),\n\t\t\t\t\tthis.checkAndFilterPropertiesRequiringTrust(resourceSettings.properties)\n\t\t\t\t),\n\t\t\t\tpatternProperties: allSettings.patternProperties,\n\t\t\t\tadditionalProperties: true,\n\t\t\t\tallowTrailingCommas: true,\n\t\t\t\tallowComments: true\n\t\t\t} : workspaceSettingsSchema;\n\n\t\tconst configDefaultsSchema: IJSONSchema = {\n\t\t\ttype: 'object',\n\t\t\tdescription: localize('configurationDefaults.description', 'Contribute defaults for configurations'),\n\t\t\tproperties: Object.assign({},\n\t\t\t\tthis.filterDefaultOverridableProperties(machineOverridableSettings.properties),\n\t\t\t\tthis.filterDefaultOverridableProperties(windowSettings.properties),\n\t\t\t\tthis.filterDefaultOverridableProperties(resourceSettings.properties)\n\t\t\t),\n\t\t\tpatternProperties: {\n\t\t\t\t[OVERRIDE_PROPERTY_PATTERN]: {\n\t\t\t\t\ttype: 'object',\n\t\t\t\t\tdefault: {},\n\t\t\t\t\t$ref: resourceLanguageSettingsSchemaId,\n\t\t\t\t}\n\t\t\t},\n\t\t\tadditionalProperties: false\n\t\t};\n\t\tthis.registerSchemas({\n\t\t\tdefaultSettingsSchema,\n\t\t\tuserSettingsSchema,\n\t\t\tprofileSettingsSchema,\n\t\t\tmachineSettingsSchema,\n\t\t\tworkspaceSettingsSchema,\n\t\t\tfolderSettingsSchema,\n\t\t\tconfigDefaultsSchema,\n\t\t});\n\t}\n\n\tprivate registerSchemas(schemas: {\n\t\tdefaultSettingsSchema: IJSONSchema;\n\t\tuserSettingsSchema: IJSONSchema;\n\t\tprofileSettingsSchema: IJSONSchema;\n\t\tmachineSettingsSchema: IJSONSchema;\n\t\tworkspaceSettingsSchema: IJSONSchema;\n\t\tfolderSettingsSchema: IJSONSchema;\n\t\tconfigDefaultsSchema: IJSONSchema;\n\t}): void {\n\t\tconst jsonRegistry = Registry.as<IJSONContributionRegistry>(JSONExtensions.JSONContribution);\n\t\tjsonRegistry.registerSchema(defaultSettingsSchemaId, schemas.defaultSettingsSchema);\n\t\tjsonRegistry.registerSchema(userSettingsSchemaId, schemas.userSettingsSchema);\n\t\tjsonRegistry.registerSchema(profileSettingsSchemaId, schemas.profileSettingsSchema);\n\t\tjsonRegistry.registerSchema(machineSettingsSchemaId, schemas.machineSettingsSchema);\n\t\tjsonRegistry.registerSchema(workspaceSettingsSchemaId, schemas.workspaceSettingsSchema);\n\t\tjsonRegistry.registerSchema(folderSettingsSchemaId, schemas.folderSettingsSchema);\n\t\tjsonRegistry.registerSchema(configurationDefaultsSchemaId, schemas.configDefaultsSchema);\n\t}\n\n\tprivate checkAndFilterPropertiesRequiringTrust(properties: IStringDictionary<IConfigurationPropertySchema>): IStringDictionary<IConfigurationPropertySchema> {\n\t\tif (this.workspaceTrustManagementService.isWorkspaceTrusted()) {\n\t\t\treturn properties;\n\t\t}\n\n\t\tconst result: IStringDictionary<IConfigurationPropertySchema> = {};\n\t\tObject.entries(properties).forEach(([key, value]) => {\n\t\t\tif (!value.restricted) {\n\t\t\t\tresult[key] = value;\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\n\tprivate filterDefaultOverridableProperties(properties: IStringDictionary<IConfigurationPropertySchema>): IStringDictionary<IConfigurationPropertySchema> {\n\t\tconst result: IStringDictionary<IConfigurationPropertySchema> = {};\n\t\tObject.entries(properties).forEach(([key, value]) => {\n\t\t\tif (!value.disallowConfigurationDefault) {\n\t\t\t\tresult[key] = value;\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n}\n\nclass ConfigurationDefaultOverridesContribution extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.configurationDefaultOverridesContribution';\n\n\tprivate readonly processedExperimentalSettings = new Set<string>();\n\tprivate readonly autoExperimentalSettings = new Set<string>();\n\tprivate readonly configurationRegistry = Registry.as<IConfigurationRegistry>(Extensions.Configuration);\n\tprivate readonly throttler = this._register(new Throttler());\n\n\tconstructor(\n\t\t@IWorkbenchAssignmentService private readonly workbenchAssignmentService: IWorkbenchAssignmentService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IConfigurationService private readonly configurationService: WorkspaceService,\n\t\t@ILogService private readonly logService: ILogService\n\t) {\n\t\tsuper();\n\n\t\tthis.throttler.queue(() => this.updateDefaults());\n\t\tthis._register(workbenchAssignmentService.onDidRefetchAssignments(() => this.throttler.queue(() => this.processExperimentalSettings(this.autoExperimentalSettings, true))));\n\n\t\t// When configuration is updated make sure to apply experimental configuration overrides\n\t\tthis._register(this.configurationRegistry.onDidUpdateConfiguration(({ properties }) => this.processExperimentalSettings(properties, false)));\n\t}\n\n\tprivate async updateDefaults(): Promise<void> {\n\t\tthis.logService.trace('ConfigurationService#updateDefaults: begin');\n\t\ttry {\n\t\t\t// Check for experiments\n\t\t\tawait this.processExperimentalSettings(Object.keys(this.configurationRegistry.getConfigurationProperties()), false);\n\t\t} finally {\n\t\t\t// Invalidate defaults cache after extensions have registered\n\t\t\t// and after the experiments have been resolved to prevent\n\t\t\t// resetting the overrides too early.\n\t\t\tawait this.extensionService.whenInstalledExtensionsRegistered();\n\t\t\tthis.logService.trace('ConfigurationService#updateDefaults: resetting the defaults');\n\t\t\tthis.configurationService.reloadConfiguration(ConfigurationTarget.DEFAULT);\n\t\t}\n\t}\n\n\tprivate async processExperimentalSettings(properties: Iterable<string>, autoRefetch: boolean): Promise<void> {\n\t\tconst overrides: IStringDictionary<unknown> = {};\n\t\tconst allProperties = this.configurationRegistry.getConfigurationProperties();\n\t\tfor (const property of properties) {\n\t\t\tconst schema = allProperties[property];\n\t\t\tif (!schema?.experiment) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (!autoRefetch && this.processedExperimentalSettings.has(property)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tthis.processedExperimentalSettings.add(property);\n\t\t\tif (schema.experiment.mode === 'auto') {\n\t\t\t\tthis.autoExperimentalSettings.add(property);\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tconst value = await this.workbenchAssignmentService.getTreatment(schema.experiment.name ?? `config.${property}`);\n\t\t\t\tif (!isUndefined(value) && !equals(value, schema.default)) {\n\t\t\t\t\toverrides[property] = value;\n\t\t\t\t}\n\t\t\t} catch (error) {/*ignore */ }\n\t\t}\n\t\tif (Object.keys(overrides).length) {\n\t\t\tthis.configurationRegistry.registerDefaultConfigurations([{ overrides }]);\n\t\t}\n\t}\n}\n\nconst workbenchContributionsRegistry = Registry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench);\nworkbenchContributionsRegistry.registerWorkbenchContribution(RegisterConfigurationSchemasContribution, LifecyclePhase.Restored);\nregisterWorkbenchContribution2(ConfigurationDefaultOverridesContribution.ID, ConfigurationDefaultOverridesContribution, WorkbenchPhase.BlockRestore);\n\nconst configurationRegistry = Registry.as<IConfigurationRegistry>(Extensions.Configuration);\nconfigurationRegistry.registerConfiguration({\n\t...workbenchConfigurationNodeBase,\n\tproperties: {\n\t\t[APPLY_ALL_PROFILES_SETTING]: {\n\t\t\t'type': 'array',\n\t\t\tdescription: localize('setting description', \"Configure settings to be applied for all profiles.\"),\n\t\t\t'default': [],\n\t\t\t'scope': ConfigurationScope.APPLICATION,\n\t\t\tadditionalProperties: true,\n\t\t\tuniqueItems: true,\n\t\t}\n\t}\n});\n"]}