{"version":3,"sources":["vs/workbench/services/notification/common/notificationService.ts"],"names":[],"mappings":"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","file":"notificationService.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../../nls.js';\nimport { INotificationService, INotification, INotificationHandle, Severity, NotificationMessage, INotificationActions, IPromptChoice, IPromptOptions, IStatusMessageOptions, NoOpNotification, NeverShowAgainScope, NotificationsFilter, INeverShowAgainOptions, INotificationSource, INotificationSourceFilter, isNotificationSource, IStatusHandle } from '../../../../platform/notification/common/notification.js';\nimport { NotificationsModel, ChoiceAction, NotificationChangeType } from '../../../common/notifications.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IAction, Action } from '../../../../base/common/actions.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\n\nexport class NotificationService extends Disposable implements INotificationService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\treadonly model = this._register(new NotificationsModel());\n\n\tconstructor(\n\t\t@IStorageService private readonly storageService: IStorageService\n\t) {\n\t\tsuper();\n\n\t\tthis.mapSourceToFilter = (() => {\n\t\t\tconst map = new Map<string, INotificationSourceFilter>();\n\n\t\t\tfor (const sourceFilter of this.storageService.getObject<INotificationSourceFilter[]>(NotificationService.PER_SOURCE_FILTER_SETTINGS_KEY, StorageScope.APPLICATION, [])) {\n\t\t\t\tmap.set(sourceFilter.id, sourceFilter);\n\t\t\t}\n\n\t\t\treturn map;\n\t\t})();\n\n\t\tthis.globalFilterEnabled = this.storageService.getBoolean(NotificationService.GLOBAL_FILTER_SETTINGS_KEY, StorageScope.APPLICATION, false);\n\n\t\tthis.updateFilters();\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(this.model.onDidChangeNotification(e => {\n\t\t\tswitch (e.kind) {\n\t\t\t\tcase NotificationChangeType.ADD: {\n\t\t\t\t\tconst source = typeof e.item.sourceId === 'string' && typeof e.item.source === 'string' ? { id: e.item.sourceId, label: e.item.source } : e.item.source;\n\n\t\t\t\t\t// Make sure to track sources for notifications by registering\n\t\t\t\t\t// them with our do not disturb system which is backed by storage\n\n\t\t\t\t\tif (isNotificationSource(source)) {\n\t\t\t\t\t\tif (!this.mapSourceToFilter.has(source.id)) {\n\t\t\t\t\t\t\tthis.setFilter({ ...source, filter: NotificationsFilter.OFF });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.updateSourceFilter(source);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\t//#region Filters\n\n\tprivate static readonly GLOBAL_FILTER_SETTINGS_KEY = 'notifications.doNotDisturbMode';\n\tprivate static readonly PER_SOURCE_FILTER_SETTINGS_KEY = 'notifications.perSourceDoNotDisturbMode';\n\n\tprivate readonly _onDidChangeFilter = this._register(new Emitter<void>());\n\treadonly onDidChangeFilter = this._onDidChangeFilter.event;\n\n\tprivate globalFilterEnabled: boolean;\n\n\tprivate readonly mapSourceToFilter: Map<string /** source id */, INotificationSourceFilter>;\n\n\tsetFilter(filter: NotificationsFilter | INotificationSourceFilter): void {\n\t\tif (typeof filter === 'number') {\n\t\t\tif (this.globalFilterEnabled === (filter === NotificationsFilter.ERROR)) {\n\t\t\t\treturn; // no change\n\t\t\t}\n\n\t\t\t// Store into model and persist\n\t\t\tthis.globalFilterEnabled = filter === NotificationsFilter.ERROR;\n\t\t\tthis.storageService.store(NotificationService.GLOBAL_FILTER_SETTINGS_KEY, this.globalFilterEnabled, StorageScope.APPLICATION, StorageTarget.MACHINE);\n\n\t\t\t// Update model\n\t\t\tthis.updateFilters();\n\n\t\t\t// Events\n\t\t\tthis._onDidChangeFilter.fire();\n\t\t} else {\n\t\t\tconst existing = this.mapSourceToFilter.get(filter.id);\n\t\t\tif (existing?.filter === filter.filter && existing.label === filter.label) {\n\t\t\t\treturn; // no change\n\t\t\t}\n\n\t\t\t// Store into model and persist\n\t\t\tthis.mapSourceToFilter.set(filter.id, { id: filter.id, label: filter.label, filter: filter.filter });\n\t\t\tthis.saveSourceFilters();\n\n\t\t\t// Update model\n\t\t\tthis.updateFilters();\n\t\t}\n\t}\n\n\tgetFilter(source?: INotificationSource): NotificationsFilter {\n\t\tif (source) {\n\t\t\treturn this.mapSourceToFilter.get(source.id)?.filter ?? NotificationsFilter.OFF;\n\t\t}\n\n\t\treturn this.globalFilterEnabled ? NotificationsFilter.ERROR : NotificationsFilter.OFF;\n\t}\n\n\tprivate updateSourceFilter(source: INotificationSource): void {\n\t\tconst existing = this.mapSourceToFilter.get(source.id);\n\t\tif (!existing) {\n\t\t\treturn; // nothing to do\n\t\t}\n\n\t\t// Store into model and persist\n\t\tif (existing.label !== source.label) {\n\t\t\tthis.mapSourceToFilter.set(source.id, { id: source.id, label: source.label, filter: existing.filter });\n\t\t\tthis.saveSourceFilters();\n\t\t}\n\t}\n\n\tprivate saveSourceFilters(): void {\n\t\tthis.storageService.store(NotificationService.PER_SOURCE_FILTER_SETTINGS_KEY, JSON.stringify([...this.mapSourceToFilter.values()]), StorageScope.APPLICATION, StorageTarget.MACHINE);\n\t}\n\n\tgetFilters(): INotificationSourceFilter[] {\n\t\treturn [...this.mapSourceToFilter.values()];\n\t}\n\n\tprivate updateFilters(): void {\n\t\tthis.model.setFilter({\n\t\t\tglobal: this.globalFilterEnabled ? NotificationsFilter.ERROR : NotificationsFilter.OFF,\n\t\t\tsources: new Map([...this.mapSourceToFilter.values()].map(source => [source.id, source.filter]))\n\t\t});\n\t}\n\n\tremoveFilter(sourceId: string): void {\n\t\tif (this.mapSourceToFilter.delete(sourceId)) {\n\n\t\t\t// Persist\n\t\t\tthis.saveSourceFilters();\n\n\t\t\t// Update model\n\t\t\tthis.updateFilters();\n\t\t}\n\t}\n\n\t//#endregion\n\n\tinfo(message: NotificationMessage | NotificationMessage[]): void {\n\t\tif (Array.isArray(message)) {\n\t\t\tfor (const messageEntry of message) {\n\t\t\t\tthis.info(messageEntry);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.model.addNotification({ severity: Severity.Info, message });\n\t}\n\n\twarn(message: NotificationMessage | NotificationMessage[]): void {\n\t\tif (Array.isArray(message)) {\n\t\t\tfor (const messageEntry of message) {\n\t\t\t\tthis.warn(messageEntry);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.model.addNotification({ severity: Severity.Warning, message });\n\t}\n\n\terror(message: NotificationMessage | NotificationMessage[]): void {\n\t\tif (Array.isArray(message)) {\n\t\t\tfor (const messageEntry of message) {\n\t\t\t\tthis.error(messageEntry);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.model.addNotification({ severity: Severity.Error, message });\n\t}\n\n\tnotify(notification: INotification): INotificationHandle {\n\t\tconst toDispose = new DisposableStore();\n\n\t\t// Handle neverShowAgain option accordingly\n\n\t\tif (notification.neverShowAgain) {\n\t\t\tconst scope = this.toStorageScope(notification.neverShowAgain);\n\t\t\tconst id = notification.neverShowAgain.id;\n\n\t\t\t// If the user already picked to not show the notification\n\t\t\t// again, we return with a no-op notification here\n\t\t\tif (this.storageService.getBoolean(id, scope)) {\n\t\t\t\treturn new NoOpNotification();\n\t\t\t}\n\n\t\t\tconst neverShowAgainAction = toDispose.add(new Action(\n\t\t\t\t'workbench.notification.neverShowAgain',\n\t\t\t\tlocalize('neverShowAgain', \"Don't Show Again\"),\n\t\t\t\tundefined, true, async () => {\n\n\t\t\t\t\t// Close notification\n\t\t\t\t\thandle.close();\n\n\t\t\t\t\t// Remember choice\n\t\t\t\t\tthis.storageService.store(id, true, scope, StorageTarget.USER);\n\t\t\t\t}));\n\n\t\t\t// Insert as primary or secondary action\n\t\t\tconst actions = {\n\t\t\t\tprimary: notification.actions?.primary || [],\n\t\t\t\tsecondary: notification.actions?.secondary || []\n\t\t\t};\n\t\t\tif (!notification.neverShowAgain.isSecondary) {\n\t\t\t\tactions.primary = [neverShowAgainAction, ...actions.primary]; // action comes first\n\t\t\t} else {\n\t\t\t\tactions.secondary = [...actions.secondary, neverShowAgainAction]; // actions comes last\n\t\t\t}\n\n\t\t\tnotification.actions = actions;\n\t\t}\n\n\t\t// Show notification\n\t\tconst handle = this.model.addNotification(notification);\n\n\t\t// Cleanup when notification gets disposed\n\t\tEvent.once(handle.onDidClose)(() => toDispose.dispose());\n\n\t\treturn handle;\n\t}\n\n\tprivate toStorageScope(options: INeverShowAgainOptions): StorageScope {\n\t\tswitch (options.scope) {\n\t\t\tcase NeverShowAgainScope.APPLICATION:\n\t\t\t\treturn StorageScope.APPLICATION;\n\t\t\tcase NeverShowAgainScope.PROFILE:\n\t\t\t\treturn StorageScope.PROFILE;\n\t\t\tcase NeverShowAgainScope.WORKSPACE:\n\t\t\t\treturn StorageScope.WORKSPACE;\n\t\t\tdefault:\n\t\t\t\treturn StorageScope.APPLICATION;\n\t\t}\n\t}\n\n\tprompt(severity: Severity, message: string, choices: IPromptChoice[], options?: IPromptOptions): INotificationHandle {\n\n\t\t// Handle neverShowAgain option accordingly\n\t\tif (options?.neverShowAgain) {\n\t\t\tconst scope = this.toStorageScope(options.neverShowAgain);\n\t\t\tconst id = options.neverShowAgain.id;\n\n\t\t\t// If the user already picked to not show the notification\n\t\t\t// again, we return with a no-op notification here\n\t\t\tif (this.storageService.getBoolean(id, scope)) {\n\t\t\t\treturn new NoOpNotification();\n\t\t\t}\n\n\t\t\tconst neverShowAgainChoice = {\n\t\t\t\tlabel: localize('neverShowAgain', \"Don't Show Again\"),\n\t\t\t\trun: () => this.storageService.store(id, true, scope, StorageTarget.USER),\n\t\t\t\tisSecondary: options.neverShowAgain.isSecondary\n\t\t\t};\n\n\t\t\t// Insert as primary or secondary action\n\t\t\tif (!options.neverShowAgain.isSecondary) {\n\t\t\t\tchoices = [neverShowAgainChoice, ...choices]; // action comes first\n\t\t\t} else {\n\t\t\t\tchoices = [...choices, neverShowAgainChoice]; // actions comes last\n\t\t\t}\n\t\t}\n\n\t\tlet choiceClicked = false;\n\t\tconst toDispose = new DisposableStore();\n\n\n\t\t// Convert choices into primary/secondary actions\n\t\tconst primaryActions: IAction[] = [];\n\t\tconst secondaryActions: IAction[] = [];\n\t\tchoices.forEach((choice, index) => {\n\t\t\tconst action = new ChoiceAction(`workbench.dialog.choice.${index}`, choice);\n\t\t\tif (!choice.isSecondary) {\n\t\t\t\tprimaryActions.push(action);\n\t\t\t} else {\n\t\t\t\tsecondaryActions.push(action);\n\t\t\t}\n\n\t\t\t// React to action being clicked\n\t\t\ttoDispose.add(action.onDidRun(() => {\n\t\t\t\tchoiceClicked = true;\n\n\t\t\t\t// Close notification unless we are told to keep open\n\t\t\t\tif (!choice.keepOpen) {\n\t\t\t\t\thandle.close();\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\ttoDispose.add(action);\n\t\t});\n\n\t\t// Show notification with actions\n\t\tconst actions: INotificationActions = { primary: primaryActions, secondary: secondaryActions };\n\t\tconst handle = this.notify({ severity, message, actions, sticky: options?.sticky, priority: options?.priority });\n\n\t\tEvent.once(handle.onDidClose)(() => {\n\n\t\t\t// Cleanup when notification gets disposed\n\t\t\ttoDispose.dispose();\n\n\t\t\t// Indicate cancellation to the outside if no action was executed\n\t\t\tif (options && typeof options.onCancel === 'function' && !choiceClicked) {\n\t\t\t\toptions.onCancel();\n\t\t\t}\n\t\t});\n\n\t\treturn handle;\n\t}\n\n\tstatus(message: NotificationMessage, options?: IStatusMessageOptions): IStatusHandle {\n\t\treturn this.model.showStatusMessage(message, options);\n\t}\n}\n\nregisterSingleton(INotificationService, NotificationService, InstantiationType.Delayed);\n"]}