{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/test/electron-browser/workbenchTestServices.ts","vs/workbench/test/electron-browser/workbenchTestServices.ts"],"names":[],"mappings":"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","file":"workbenchTestServices.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { insert } from '../../../base/common/arrays.js';\nimport { VSBuffer, VSBufferReadable, VSBufferReadableStream } from '../../../base/common/buffer.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Event } from '../../../base/common/event.js';\nimport { DisposableStore, IDisposable } from '../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IModelService } from '../../../editor/common/services/model.js';\nimport { ModelService } from '../../../editor/common/services/modelService.js';\nimport { TestConfigurationService } from '../../../platform/configuration/test/common/testConfigurationService.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IFileDialogService, INativeOpenDialogOptions } from '../../../platform/dialogs/common/dialogs.js';\nimport { IEnvironmentService, INativeEnvironmentService } from '../../../platform/environment/common/environment.js';\nimport { IExtensionManagementService } from '../../../platform/extensionManagement/common/extensionManagement.js';\nimport { AbstractNativeExtensionTipsService } from '../../../platform/extensionManagement/common/extensionTipsService.js';\nimport { IExtensionRecommendationNotificationService } from '../../../platform/extensionRecommendations/common/extensionRecommendations.js';\nimport { IFileService, IFileSystemProvider, FileSystemProviderCapabilities, IFileReadStreamOptions, IFileWriteOptions, IFileOpenOptions, IFileDeleteOptions, IFileOverwriteOptions, IStat, FileType, IWatchOptions } from '../../../platform/files/common/files.js';\nimport { FileService } from '../../../platform/files/common/fileService.js';\nimport { InMemoryFileSystemProvider } from '../../../platform/files/common/inMemoryFilesystemProvider.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { ISharedProcessService } from '../../../platform/ipc/electron-browser/services.js';\nimport { NullLogService } from '../../../platform/log/common/log.js';\nimport { INativeHostOptions, INativeHostService, IOSProperties, IOSStatistics } from '../../../platform/native/common/native.js';\nimport { IProductService } from '../../../platform/product/common/productService.js';\nimport { AuthInfo, Credentials } from '../../../platform/request/common/request.js';\nimport { IStorageService } from '../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\nimport { IPartsSplash } from '../../../platform/theme/common/themeService.js';\nimport { UriIdentityService } from '../../../platform/uriIdentity/common/uriIdentityService.js';\nimport { FileUserDataProvider } from '../../../platform/userData/common/fileUserDataProvider.js';\nimport { UserDataProfilesService } from '../../../platform/userDataProfile/common/userDataProfile.js';\nimport { IColorScheme, IOpenedMainWindow, IOpenEmptyWindowOptions, IOpenWindowOptions, IPoint, IRectangle, IWindowOpenable } from '../../../platform/window/common/window.js';\nimport { IWorkspaceContextService } from '../../../platform/workspace/common/workspace.js';\nimport { IEditorService } from '../../services/editor/common/editorService.js';\nimport { IFilesConfigurationService } from '../../services/filesConfiguration/common/filesConfigurationService.js';\nimport { ILifecycleService } from '../../services/lifecycle/common/lifecycle.js';\nimport { IPathService } from '../../services/path/common/pathService.js';\nimport { ITextEditorService } from '../../services/textfile/common/textEditorService.js';\nimport { ITextFileService } from '../../services/textfile/common/textfiles.js';\nimport { NativeTextFileService } from '../../services/textfile/electron-browser/nativeTextFileService.js';\nimport { IWorkingCopyIdentifier } from '../../services/workingCopy/common/workingCopy.js';\nimport { IWorkingCopyBackupService } from '../../services/workingCopy/common/workingCopyBackup.js';\nimport { IWorkingCopyService } from '../../services/workingCopy/common/workingCopyService.js';\nimport { NativeWorkingCopyBackupService } from '../../services/workingCopy/electron-browser/workingCopyBackupService.js';\nimport { workbenchInstantiationService as browserWorkbenchInstantiationService, ITestInstantiationService, TestEncodingOracle, TestEnvironmentService, TestFileDialogService, TestFilesConfigurationService, TestLifecycleService, TestTextFileService } from '../browser/workbenchTestServices.js';\nimport { TestContextService, TestFileService } from '../common/workbenchTestServices.js';\nimport { ReadableStreamEvents } from '../../../base/common/stream.js';\n\nexport class TestSharedProcessService implements ISharedProcessService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tcreateRawConnection(): never { throw new Error('Not Implemented'); }\n\tgetChannel(channelName: string): any { return undefined; }\n\tregisterChannel(channelName: string, channel: any): void { }\n\tnotifyRestored(): void { }\n}\n\nexport class TestNativeHostService implements INativeHostService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\treadonly windowId = -1;\n\n\treadonly onDidOpenMainWindow: Event<number> = Event.None;\n\treadonly onDidMaximizeWindow: Event<number> = Event.None;\n\treadonly onDidUnmaximizeWindow: Event<number> = Event.None;\n\treadonly onDidFocusMainWindow: Event<number> = Event.None;\n\treadonly onDidBlurMainWindow: Event<number> = Event.None;\n\treadonly onDidFocusMainOrAuxiliaryWindow: Event<number> = Event.None;\n\treadonly onDidBlurMainOrAuxiliaryWindow: Event<number> = Event.None;\n\treadonly onDidResumeOS: Event<unknown> = Event.None;\n\tonDidChangeColorScheme = Event.None;\n\tonDidChangePassword = Event.None;\n\treadonly onDidTriggerWindowSystemContextMenu: Event<{ windowId: number; x: number; y: number }> = Event.None;\n\tonDidChangeWindowFullScreen = Event.None;\n\tonDidChangeWindowAlwaysOnTop = Event.None;\n\tonDidChangeDisplay = Event.None;\n\n\twindowCount = Promise.resolve(1);\n\tgetWindowCount(): Promise<number> { return this.windowCount; }\n\n\tasync getWindows(): Promise<IOpenedMainWindow[]> { return []; }\n\tasync getActiveWindowId(): Promise<number | undefined> { return undefined; }\n\tasync getActiveWindowPosition(): Promise<IRectangle | undefined> { return undefined; }\n\tasync getNativeWindowHandle(windowId: number): Promise<VSBuffer | undefined> { return undefined; }\n\n\topenWindow(options?: IOpenEmptyWindowOptions): Promise<void>;\n\topenWindow(toOpen: IWindowOpenable[], options?: IOpenWindowOptions): Promise<void>;\n\topenWindow(arg1?: IOpenEmptyWindowOptions | IWindowOpenable[], arg2?: IOpenWindowOptions): Promise<void> {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\n\tasync toggleFullScreen(): Promise<void> { }\n\tasync isMaximized(): Promise<boolean> { return true; }\n\tasync isFullScreen(): Promise<boolean> { return true; }\n\tasync maximizeWindow(): Promise<void> { }\n\tasync unmaximizeWindow(): Promise<void> { }\n\tasync minimizeWindow(): Promise<void> { }\n\tasync moveWindowTop(options?: INativeHostOptions): Promise<void> { }\n\tasync isWindowAlwaysOnTop(options?: INativeHostOptions): Promise<boolean> { return false; }\n\tasync toggleWindowAlwaysOnTop(options?: INativeHostOptions): Promise<void> { }\n\tasync setWindowAlwaysOnTop(alwaysOnTop: boolean, options?: INativeHostOptions): Promise<void> { }\n\tasync getCursorScreenPoint(): Promise<{ readonly point: IPoint; readonly display: IRectangle }> { throw new Error('Method not implemented.'); }\n\tasync positionWindow(position: IRectangle, options?: INativeHostOptions): Promise<void> { }\n\tasync updateWindowControls(options: { height?: number; backgroundColor?: string; foregroundColor?: string }): Promise<void> { }\n\tasync updateWindowAccentColor(color: string): Promise<void> { }\n\tasync setMinimumSize(width: number | undefined, height: number | undefined): Promise<void> { }\n\tasync saveWindowSplash(value: IPartsSplash): Promise<void> { }\n\tasync setBackgroundThrottling(throttling: boolean): Promise<void> { }\n\tasync focusWindow(options?: INativeHostOptions): Promise<void> { }\n\tasync showMessageBox(options: Electron.MessageBoxOptions): Promise<Electron.MessageBoxReturnValue> { throw new Error('Method not implemented.'); }\n\tasync showSaveDialog(options: Electron.SaveDialogOptions): Promise<Electron.SaveDialogReturnValue> { throw new Error('Method not implemented.'); }\n\tasync showOpenDialog(options: Electron.OpenDialogOptions): Promise<Electron.OpenDialogReturnValue> { throw new Error('Method not implemented.'); }\n\tasync pickFileFolderAndOpen(options: INativeOpenDialogOptions): Promise<void> { }\n\tasync pickFileAndOpen(options: INativeOpenDialogOptions): Promise<void> { }\n\tasync pickFolderAndOpen(options: INativeOpenDialogOptions): Promise<void> { }\n\tasync pickWorkspaceAndOpen(options: INativeOpenDialogOptions): Promise<void> { }\n\tasync showItemInFolder(path: string): Promise<void> { }\n\tasync setRepresentedFilename(path: string): Promise<void> { }\n\tasync isAdmin(): Promise<boolean> { return false; }\n\tasync writeElevated(source: URI, target: URI): Promise<void> { }\n\tasync isRunningUnderARM64Translation(): Promise<boolean> { return false; }\n\tasync getOSProperties(): Promise<IOSProperties> { return Object.create(null); }\n\tasync getOSStatistics(): Promise<IOSStatistics> { return Object.create(null); }\n\tasync getOSVirtualMachineHint(): Promise<number> { return 0; }\n\tasync getOSColorScheme(): Promise<IColorScheme> { return { dark: true, highContrast: false }; }\n\tasync hasWSLFeatureInstalled(): Promise<boolean> { return false; }\n\tasync getProcessId(): Promise<number> { throw new Error('Method not implemented.'); }\n\tasync killProcess(): Promise<void> { }\n\tasync setDocumentEdited(edited: boolean): Promise<void> { }\n\tasync openExternal(url: string, defaultApplication?: string): Promise<boolean> { return false; }\n\tasync updateTouchBar(): Promise<void> { }\n\tasync moveItemToTrash(): Promise<void> { }\n\tasync newWindowTab(): Promise<void> { }\n\tasync showPreviousWindowTab(): Promise<void> { }\n\tasync showNextWindowTab(): Promise<void> { }\n\tasync moveWindowTabToNewWindow(): Promise<void> { }\n\tasync mergeAllWindowTabs(): Promise<void> { }\n\tasync toggleWindowTabsBar(): Promise<void> { }\n\tasync installShellCommand(): Promise<void> { }\n\tasync uninstallShellCommand(): Promise<void> { }\n\tasync notifyReady(): Promise<void> { }\n\tasync relaunch(options?: { addArgs?: string[] | undefined; removeArgs?: string[] | undefined } | undefined): Promise<void> { }\n\tasync reload(): Promise<void> { }\n\tasync closeWindow(): Promise<void> { }\n\tasync quit(): Promise<void> { }\n\tasync exit(code: number): Promise<void> { }\n\tasync openDevTools(options?: Partial<Electron.OpenDevToolsOptions> & INativeHostOptions | undefined): Promise<void> { }\n\tasync toggleDevTools(): Promise<void> { }\n\tasync stopTracing(): Promise<void> { }\n\tasync openDevToolsWindow(url: string): Promise<void> { }\n\tasync openGPUInfoWindow(): Promise<void> { }\n\tasync resolveProxy(url: string): Promise<string | undefined> { return undefined; }\n\tasync lookupAuthorization(authInfo: AuthInfo): Promise<Credentials | undefined> { return undefined; }\n\tasync lookupKerberosAuthorization(url: string): Promise<string | undefined> { return undefined; }\n\tasync loadCertificates(): Promise<string[]> { return []; }\n\tasync isPortFree() { return Promise.resolve(true); }\n\tasync findFreePort(startPort: number, giveUpAfter: number, timeout: number, stride?: number): Promise<number> { return -1; }\n\tasync readClipboardText(type?: 'selection' | 'clipboard' | undefined): Promise<string> { return ''; }\n\tasync writeClipboardText(text: string, type?: 'selection' | 'clipboard' | undefined): Promise<void> { }\n\tasync readClipboardFindText(): Promise<string> { return ''; }\n\tasync writeClipboardFindText(text: string): Promise<void> { }\n\tasync writeClipboardBuffer(format: string, buffer: VSBuffer, type?: 'selection' | 'clipboard' | undefined): Promise<void> { }\n\tasync triggerPaste(options?: INativeHostOptions): Promise<void> { }\n\tasync readImage(): Promise<Uint8Array> { return Uint8Array.from([]); }\n\tasync readClipboardBuffer(format: string): Promise<VSBuffer> { return VSBuffer.wrap(Uint8Array.from([])); }\n\tasync hasClipboard(format: string, type?: 'selection' | 'clipboard' | undefined): Promise<boolean> { return false; }\n\tasync windowsGetStringRegKey(hive: 'HKEY_CURRENT_USER' | 'HKEY_LOCAL_MACHINE' | 'HKEY_CLASSES_ROOT' | 'HKEY_USERS' | 'HKEY_CURRENT_CONFIG', path: string, name: string): Promise<string | undefined> { return undefined; }\n\tasync profileRenderer(): Promise<any> { throw new Error(); }\n\tasync getScreenshot(rect?: IRectangle): Promise<VSBuffer | undefined> { return undefined; }\n}\n\nexport class TestExtensionTipsService extends AbstractNativeExtensionTipsService {\n\n\tconstructor(\n\t\t@INativeEnvironmentService environmentService: INativeEnvironmentService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IExtensionManagementService extensionManagementService: IExtensionManagementService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@INativeHostService nativeHostService: INativeHostService,\n\t\t@IExtensionRecommendationNotificationService extensionRecommendationNotificationService: IExtensionRecommendationNotificationService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IProductService productService: IProductService,\n\t) {\n\t\tsuper(environmentService.userHome, nativeHostService, telemetryService, extensionManagementService, storageService, extensionRecommendationNotificationService, fileService, productService);\n\t}\n}\n\nexport function workbenchInstantiationService(overrides?: {\n\tenvironmentService?: (instantiationService: IInstantiationService) => IEnvironmentService;\n\tfileService?: (instantiationService: IInstantiationService) => IFileService;\n\tconfigurationService?: (instantiationService: IInstantiationService) => TestConfigurationService;\n\ttextFileService?: (instantiationService: IInstantiationService) => ITextFileService;\n\tpathService?: (instantiationService: IInstantiationService) => IPathService;\n\teditorService?: (instantiationService: IInstantiationService) => IEditorService;\n\tcontextKeyService?: (instantiationService: IInstantiationService) => IContextKeyService;\n\ttextEditorService?: (instantiationService: IInstantiationService) => ITextEditorService;\n}, disposables = new DisposableStore()): ITestInstantiationService {\n\tconst instantiationService = browserWorkbenchInstantiationService({\n\t\tworkingCopyBackupService: () => disposables.add(new TestNativeWorkingCopyBackupService()),\n\t\t...overrides\n\t}, disposables);\n\n\tinstantiationService.stub(INativeHostService, new TestNativeHostService());\n\n\treturn instantiationService;\n}\n\nexport class TestServiceAccessor {\n\tconstructor(\n\t\t@ILifecycleService public lifecycleService: TestLifecycleService,\n\t\t@ITextFileService public textFileService: TestTextFileService,\n\t\t@IFilesConfigurationService public filesConfigurationService: TestFilesConfigurationService,\n\t\t@IWorkspaceContextService public contextService: TestContextService,\n\t\t@IModelService public modelService: ModelService,\n\t\t@IFileService public fileService: TestFileService,\n\t\t@INativeHostService public nativeHostService: TestNativeHostService,\n\t\t@IFileDialogService public fileDialogService: TestFileDialogService,\n\t\t@IWorkingCopyBackupService public workingCopyBackupService: TestNativeWorkingCopyBackupService,\n\t\t@IWorkingCopyService public workingCopyService: IWorkingCopyService,\n\t\t@IEditorService public editorService: IEditorService\n\t) {\n\t}\n}\n\nexport class TestNativeTextFileServiceWithEncodingOverrides extends NativeTextFileService {\n\n\tprivate _testEncoding: TestEncodingOracle | undefined;\n\toverride get encoding(): TestEncodingOracle {\n\t\tif (!this._testEncoding) {\n\t\t\tthis._testEncoding = this._register(this.instantiationService.createInstance(TestEncodingOracle));\n\t\t}\n\n\t\treturn this._testEncoding;\n\t}\n}\n\nexport class TestNativeWorkingCopyBackupService extends NativeWorkingCopyBackupService implements IDisposable {\n\n\tprivate backupResourceJoiners: Function[];\n\tprivate discardBackupJoiners: Function[];\n\tdiscardedBackups: IWorkingCopyIdentifier[];\n\tdiscardedAllBackups: boolean;\n\tprivate pendingBackupsArr: Promise<void>[];\n\n\tconstructor() {\n\t\tconst environmentService = TestEnvironmentService;\n\t\tconst logService = new NullLogService();\n\t\tconst fileService = new FileService(logService);\n\t\tconst lifecycleService = new TestLifecycleService();\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tsuper(environmentService as any, fileService, logService, lifecycleService);\n\n\t\tconst inMemoryFileSystemProvider = this._register(new InMemoryFileSystemProvider());\n\t\tthis._register(fileService.registerProvider(Schemas.inMemory, inMemoryFileSystemProvider));\n\t\tconst uriIdentityService = this._register(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = this._register(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService));\n\t\tthis._register(fileService.registerProvider(Schemas.vscodeUserData, this._register(new FileUserDataProvider(Schemas.file, inMemoryFileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, logService))));\n\n\t\tthis.backupResourceJoiners = [];\n\t\tthis.discardBackupJoiners = [];\n\t\tthis.discardedBackups = [];\n\t\tthis.pendingBackupsArr = [];\n\t\tthis.discardedAllBackups = false;\n\n\t\tthis._register(fileService);\n\t\tthis._register(lifecycleService);\n\t}\n\n\ttestGetFileService(): IFileService {\n\t\treturn this.fileService;\n\t}\n\n\tasync waitForAllBackups(): Promise<void> {\n\t\tawait Promise.all(this.pendingBackupsArr);\n\t}\n\n\tjoinBackupResource(): Promise<void> {\n\t\treturn new Promise(resolve => this.backupResourceJoiners.push(resolve));\n\t}\n\n\toverride async backup(identifier: IWorkingCopyIdentifier, content?: VSBufferReadableStream | VSBufferReadable, versionId?: number, meta?: any, token?: CancellationToken): Promise<void> {\n\t\tconst p = super.backup(identifier, content, versionId, meta, token);\n\t\tconst removeFromPendingBackups = insert(this.pendingBackupsArr, p.then(undefined, undefined));\n\n\t\ttry {\n\t\t\tawait p;\n\t\t} finally {\n\t\t\tremoveFromPendingBackups();\n\t\t}\n\n\t\twhile (this.backupResourceJoiners.length) {\n\t\t\tthis.backupResourceJoiners.pop()!();\n\t\t}\n\t}\n\n\tjoinDiscardBackup(): Promise<void> {\n\t\treturn new Promise(resolve => this.discardBackupJoiners.push(resolve));\n\t}\n\n\toverride async discardBackup(identifier: IWorkingCopyIdentifier): Promise<void> {\n\t\tawait super.discardBackup(identifier);\n\t\tthis.discardedBackups.push(identifier);\n\n\t\twhile (this.discardBackupJoiners.length) {\n\t\t\tthis.discardBackupJoiners.pop()!();\n\t\t}\n\t}\n\n\toverride async discardBackups(filter?: { except: IWorkingCopyIdentifier[] }): Promise<void> {\n\t\tthis.discardedAllBackups = true;\n\n\t\treturn super.discardBackups(filter);\n\t}\n\n\tasync getBackupContents(identifier: IWorkingCopyIdentifier): Promise<string> {\n\t\tconst backupResource = this.toBackupResource(identifier);\n\n\t\tconst fileContents = await this.fileService.readFile(backupResource);\n\n\t\treturn fileContents.value.toString();\n\t}\n}\n\nexport class TestIPCFileSystemProvider implements IFileSystemProvider {\n\n\treadonly capabilities = FileSystemProviderCapabilities.FileReadWrite | FileSystemProviderCapabilities.PathCaseSensitive;\n\n\treadonly onDidChangeCapabilities = Event.None;\n\treadonly onDidChangeFile = Event.None;\n\n\tasync stat(resource: URI): Promise<IStat> {\n\t\tconst { ipcRenderer } = require('electron');\n\t\tconst stats = await ipcRenderer.invoke('vscode:statFile', resource.fsPath);\n\t\treturn {\n\t\t\ttype: stats.isDirectory ? FileType.Directory : (stats.isFile ? FileType.File : FileType.Unknown),\n\t\t\tctime: stats.ctimeMs,\n\t\t\tmtime: stats.mtimeMs,\n\t\t\tsize: stats.size,\n\t\t\tpermissions: stats.isReadonly ? 1 /* FilePermission.Readonly */ : undefined\n\t\t};\n\t}\n\n\tasync readFile(resource: URI): Promise<Uint8Array> {\n\t\tconst { ipcRenderer } = require('electron');\n\t\tconst result = await ipcRenderer.invoke('vscode:readFile', resource.fsPath);\n\t\treturn VSBuffer.wrap(result).buffer;\n\t}\n\n\twatch(resource: URI, opts: IWatchOptions): IDisposable { return { dispose: () => { } }; }\n\tmkdir(resource: URI): Promise<void> { throw new Error('mkdir not implemented in test provider'); }\n\treaddir(resource: URI): Promise<[string, FileType][]> { throw new Error('readdir not implemented in test provider'); }\n\tdelete(resource: URI, opts: IFileDeleteOptions): Promise<void> { throw new Error('delete not implemented in test provider'); }\n\trename(from: URI, to: URI, opts: IFileOverwriteOptions): Promise<void> { throw new Error('rename not implemented in test provider'); }\n\twriteFile(resource: URI, content: Uint8Array, opts: IFileWriteOptions): Promise<void> { throw new Error('writeFile not implemented in test provider'); }\n\treadFileStream?(resource: URI, opts: IFileReadStreamOptions, token: CancellationToken): ReadableStreamEvents<Uint8Array> { throw new Error('readFileStream not implemented in test provider'); }\n\topen?(resource: URI, opts: IFileOpenOptions): Promise<number> { throw new Error('open not implemented in test provider'); }\n\tclose?(fd: number): Promise<void> { throw new Error('close not implemented in test provider'); }\n\tread?(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number> { throw new Error('read not implemented in test provider'); }\n\twrite?(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number> { throw new Error('write not implemented in test provider'); }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { insert } from '../../../base/common/arrays.js';\nimport { VSBuffer, VSBufferReadable, VSBufferReadableStream } from '../../../base/common/buffer.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Event } from '../../../base/common/event.js';\nimport { DisposableStore, IDisposable } from '../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IModelService } from '../../../editor/common/services/model.js';\nimport { ModelService } from '../../../editor/common/services/modelService.js';\nimport { TestConfigurationService } from '../../../platform/configuration/test/common/testConfigurationService.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IFileDialogService, INativeOpenDialogOptions } from '../../../platform/dialogs/common/dialogs.js';\nimport { IEnvironmentService, INativeEnvironmentService } from '../../../platform/environment/common/environment.js';\nimport { IExtensionManagementService } from '../../../platform/extensionManagement/common/extensionManagement.js';\nimport { AbstractNativeExtensionTipsService } from '../../../platform/extensionManagement/common/extensionTipsService.js';\nimport { IExtensionRecommendationNotificationService } from '../../../platform/extensionRecommendations/common/extensionRecommendations.js';\nimport { IFileService, IFileSystemProvider, FileSystemProviderCapabilities, IFileReadStreamOptions, IFileWriteOptions, IFileOpenOptions, IFileDeleteOptions, IFileOverwriteOptions, IStat, FileType, IWatchOptions } from '../../../platform/files/common/files.js';\nimport { FileService } from '../../../platform/files/common/fileService.js';\nimport { InMemoryFileSystemProvider } from '../../../platform/files/common/inMemoryFilesystemProvider.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { ISharedProcessService } from '../../../platform/ipc/electron-browser/services.js';\nimport { NullLogService } from '../../../platform/log/common/log.js';\nimport { INativeHostOptions, INativeHostService, IOSProperties, IOSStatistics } from '../../../platform/native/common/native.js';\nimport { IProductService } from '../../../platform/product/common/productService.js';\nimport { AuthInfo, Credentials } from '../../../platform/request/common/request.js';\nimport { IStorageService } from '../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\nimport { IPartsSplash } from '../../../platform/theme/common/themeService.js';\nimport { UriIdentityService } from '../../../platform/uriIdentity/common/uriIdentityService.js';\nimport { FileUserDataProvider } from '../../../platform/userData/common/fileUserDataProvider.js';\nimport { UserDataProfilesService } from '../../../platform/userDataProfile/common/userDataProfile.js';\nimport { IColorScheme, IOpenedMainWindow, IOpenEmptyWindowOptions, IOpenWindowOptions, IPoint, IRectangle, IWindowOpenable } from '../../../platform/window/common/window.js';\nimport { IWorkspaceContextService } from '../../../platform/workspace/common/workspace.js';\nimport { IEditorService } from '../../services/editor/common/editorService.js';\nimport { IFilesConfigurationService } from '../../services/filesConfiguration/common/filesConfigurationService.js';\nimport { ILifecycleService } from '../../services/lifecycle/common/lifecycle.js';\nimport { IPathService } from '../../services/path/common/pathService.js';\nimport { ITextEditorService } from '../../services/textfile/common/textEditorService.js';\nimport { ITextFileService } from '../../services/textfile/common/textfiles.js';\nimport { NativeTextFileService } from '../../services/textfile/electron-browser/nativeTextFileService.js';\nimport { IWorkingCopyIdentifier } from '../../services/workingCopy/common/workingCopy.js';\nimport { IWorkingCopyBackupService } from '../../services/workingCopy/common/workingCopyBackup.js';\nimport { IWorkingCopyService } from '../../services/workingCopy/common/workingCopyService.js';\nimport { NativeWorkingCopyBackupService } from '../../services/workingCopy/electron-browser/workingCopyBackupService.js';\nimport { workbenchInstantiationService as browserWorkbenchInstantiationService, ITestInstantiationService, TestEncodingOracle, TestEnvironmentService, TestFileDialogService, TestFilesConfigurationService, TestLifecycleService, TestTextFileService } from '../browser/workbenchTestServices.js';\nimport { TestContextService, TestFileService } from '../common/workbenchTestServices.js';\nimport { ReadableStreamEvents } from '../../../base/common/stream.js';\n\nexport class TestSharedProcessService implements ISharedProcessService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tcreateRawConnection(): never { throw new Error('Not Implemented'); }\n\tgetChannel(channelName: string): any { return undefined; }\n\tregisterChannel(channelName: string, channel: any): void { }\n\tnotifyRestored(): void { }\n}\n\nexport class TestNativeHostService implements INativeHostService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\treadonly windowId = -1;\n\n\treadonly onDidOpenMainWindow: Event<number> = Event.None;\n\treadonly onDidMaximizeWindow: Event<number> = Event.None;\n\treadonly onDidUnmaximizeWindow: Event<number> = Event.None;\n\treadonly onDidFocusMainWindow: Event<number> = Event.None;\n\treadonly onDidBlurMainWindow: Event<number> = Event.None;\n\treadonly onDidFocusMainOrAuxiliaryWindow: Event<number> = Event.None;\n\treadonly onDidBlurMainOrAuxiliaryWindow: Event<number> = Event.None;\n\treadonly onDidResumeOS: Event<unknown> = Event.None;\n\tonDidChangeColorScheme = Event.None;\n\tonDidChangePassword = Event.None;\n\treadonly onDidTriggerWindowSystemContextMenu: Event<{ windowId: number; x: number; y: number }> = Event.None;\n\tonDidChangeWindowFullScreen = Event.None;\n\tonDidChangeWindowAlwaysOnTop = Event.None;\n\tonDidChangeDisplay = Event.None;\n\n\twindowCount = Promise.resolve(1);\n\tgetWindowCount(): Promise<number> { return this.windowCount; }\n\n\tasync getWindows(): Promise<IOpenedMainWindow[]> { return []; }\n\tasync getActiveWindowId(): Promise<number | undefined> { return undefined; }\n\tasync getActiveWindowPosition(): Promise<IRectangle | undefined> { return undefined; }\n\tasync getNativeWindowHandle(windowId: number): Promise<VSBuffer | undefined> { return undefined; }\n\n\topenWindow(options?: IOpenEmptyWindowOptions): Promise<void>;\n\topenWindow(toOpen: IWindowOpenable[], options?: IOpenWindowOptions): Promise<void>;\n\topenWindow(arg1?: IOpenEmptyWindowOptions | IWindowOpenable[], arg2?: IOpenWindowOptions): Promise<void> {\n\t\tthrow new Error('Method not implemented.');\n\t}\n\n\tasync toggleFullScreen(): Promise<void> { }\n\tasync isMaximized(): Promise<boolean> { return true; }\n\tasync isFullScreen(): Promise<boolean> { return true; }\n\tasync maximizeWindow(): Promise<void> { }\n\tasync unmaximizeWindow(): Promise<void> { }\n\tasync minimizeWindow(): Promise<void> { }\n\tasync moveWindowTop(options?: INativeHostOptions): Promise<void> { }\n\tasync isWindowAlwaysOnTop(options?: INativeHostOptions): Promise<boolean> { return false; }\n\tasync toggleWindowAlwaysOnTop(options?: INativeHostOptions): Promise<void> { }\n\tasync setWindowAlwaysOnTop(alwaysOnTop: boolean, options?: INativeHostOptions): Promise<void> { }\n\tasync getCursorScreenPoint(): Promise<{ readonly point: IPoint; readonly display: IRectangle }> { throw new Error('Method not implemented.'); }\n\tasync positionWindow(position: IRectangle, options?: INativeHostOptions): Promise<void> { }\n\tasync updateWindowControls(options: { height?: number; backgroundColor?: string; foregroundColor?: string }): Promise<void> { }\n\tasync updateWindowAccentColor(color: string): Promise<void> { }\n\tasync setMinimumSize(width: number | undefined, height: number | undefined): Promise<void> { }\n\tasync saveWindowSplash(value: IPartsSplash): Promise<void> { }\n\tasync setBackgroundThrottling(throttling: boolean): Promise<void> { }\n\tasync focusWindow(options?: INativeHostOptions): Promise<void> { }\n\tasync showMessageBox(options: Electron.MessageBoxOptions): Promise<Electron.MessageBoxReturnValue> { throw new Error('Method not implemented.'); }\n\tasync showSaveDialog(options: Electron.SaveDialogOptions): Promise<Electron.SaveDialogReturnValue> { throw new Error('Method not implemented.'); }\n\tasync showOpenDialog(options: Electron.OpenDialogOptions): Promise<Electron.OpenDialogReturnValue> { throw new Error('Method not implemented.'); }\n\tasync pickFileFolderAndOpen(options: INativeOpenDialogOptions): Promise<void> { }\n\tasync pickFileAndOpen(options: INativeOpenDialogOptions): Promise<void> { }\n\tasync pickFolderAndOpen(options: INativeOpenDialogOptions): Promise<void> { }\n\tasync pickWorkspaceAndOpen(options: INativeOpenDialogOptions): Promise<void> { }\n\tasync showItemInFolder(path: string): Promise<void> { }\n\tasync setRepresentedFilename(path: string): Promise<void> { }\n\tasync isAdmin(): Promise<boolean> { return false; }\n\tasync writeElevated(source: URI, target: URI): Promise<void> { }\n\tasync isRunningUnderARM64Translation(): Promise<boolean> { return false; }\n\tasync getOSProperties(): Promise<IOSProperties> { return Object.create(null); }\n\tasync getOSStatistics(): Promise<IOSStatistics> { return Object.create(null); }\n\tasync getOSVirtualMachineHint(): Promise<number> { return 0; }\n\tasync getOSColorScheme(): Promise<IColorScheme> { return { dark: true, highContrast: false }; }\n\tasync hasWSLFeatureInstalled(): Promise<boolean> { return false; }\n\tasync getProcessId(): Promise<number> { throw new Error('Method not implemented.'); }\n\tasync killProcess(): Promise<void> { }\n\tasync setDocumentEdited(edited: boolean): Promise<void> { }\n\tasync openExternal(url: string, defaultApplication?: string): Promise<boolean> { return false; }\n\tasync updateTouchBar(): Promise<void> { }\n\tasync moveItemToTrash(): Promise<void> { }\n\tasync newWindowTab(): Promise<void> { }\n\tasync showPreviousWindowTab(): Promise<void> { }\n\tasync showNextWindowTab(): Promise<void> { }\n\tasync moveWindowTabToNewWindow(): Promise<void> { }\n\tasync mergeAllWindowTabs(): Promise<void> { }\n\tasync toggleWindowTabsBar(): Promise<void> { }\n\tasync installShellCommand(): Promise<void> { }\n\tasync uninstallShellCommand(): Promise<void> { }\n\tasync notifyReady(): Promise<void> { }\n\tasync relaunch(options?: { addArgs?: string[] | undefined; removeArgs?: string[] | undefined } | undefined): Promise<void> { }\n\tasync reload(): Promise<void> { }\n\tasync closeWindow(): Promise<void> { }\n\tasync quit(): Promise<void> { }\n\tasync exit(code: number): Promise<void> { }\n\tasync openDevTools(options?: Partial<Electron.OpenDevToolsOptions> & INativeHostOptions | undefined): Promise<void> { }\n\tasync toggleDevTools(): Promise<void> { }\n\tasync stopTracing(): Promise<void> { }\n\tasync openDevToolsWindow(url: string): Promise<void> { }\n\tasync openGPUInfoWindow(): Promise<void> { }\n\tasync resolveProxy(url: string): Promise<string | undefined> { return undefined; }\n\tasync lookupAuthorization(authInfo: AuthInfo): Promise<Credentials | undefined> { return undefined; }\n\tasync lookupKerberosAuthorization(url: string): Promise<string | undefined> { return undefined; }\n\tasync loadCertificates(): Promise<string[]> { return []; }\n\tasync isPortFree() { return Promise.resolve(true); }\n\tasync findFreePort(startPort: number, giveUpAfter: number, timeout: number, stride?: number): Promise<number> { return -1; }\n\tasync readClipboardText(type?: 'selection' | 'clipboard' | undefined): Promise<string> { return ''; }\n\tasync writeClipboardText(text: string, type?: 'selection' | 'clipboard' | undefined): Promise<void> { }\n\tasync readClipboardFindText(): Promise<string> { return ''; }\n\tasync writeClipboardFindText(text: string): Promise<void> { }\n\tasync writeClipboardBuffer(format: string, buffer: VSBuffer, type?: 'selection' | 'clipboard' | undefined): Promise<void> { }\n\tasync triggerPaste(options?: INativeHostOptions): Promise<void> { }\n\tasync readImage(): Promise<Uint8Array> { return Uint8Array.from([]); }\n\tasync readClipboardBuffer(format: string): Promise<VSBuffer> { return VSBuffer.wrap(Uint8Array.from([])); }\n\tasync hasClipboard(format: string, type?: 'selection' | 'clipboard' | undefined): Promise<boolean> { return false; }\n\tasync windowsGetStringRegKey(hive: 'HKEY_CURRENT_USER' | 'HKEY_LOCAL_MACHINE' | 'HKEY_CLASSES_ROOT' | 'HKEY_USERS' | 'HKEY_CURRENT_CONFIG', path: string, name: string): Promise<string | undefined> { return undefined; }\n\tasync profileRenderer(): Promise<any> { throw new Error(); }\n\tasync getScreenshot(rect?: IRectangle): Promise<VSBuffer | undefined> { return undefined; }\n}\n\nexport class TestExtensionTipsService extends AbstractNativeExtensionTipsService {\n\n\tconstructor(\n\t\t@INativeEnvironmentService environmentService: INativeEnvironmentService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IExtensionManagementService extensionManagementService: IExtensionManagementService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@INativeHostService nativeHostService: INativeHostService,\n\t\t@IExtensionRecommendationNotificationService extensionRecommendationNotificationService: IExtensionRecommendationNotificationService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IProductService productService: IProductService,\n\t) {\n\t\tsuper(environmentService.userHome, nativeHostService, telemetryService, extensionManagementService, storageService, extensionRecommendationNotificationService, fileService, productService);\n\t}\n}\n\nexport function workbenchInstantiationService(overrides?: {\n\tenvironmentService?: (instantiationService: IInstantiationService) => IEnvironmentService;\n\tfileService?: (instantiationService: IInstantiationService) => IFileService;\n\tconfigurationService?: (instantiationService: IInstantiationService) => TestConfigurationService;\n\ttextFileService?: (instantiationService: IInstantiationService) => ITextFileService;\n\tpathService?: (instantiationService: IInstantiationService) => IPathService;\n\teditorService?: (instantiationService: IInstantiationService) => IEditorService;\n\tcontextKeyService?: (instantiationService: IInstantiationService) => IContextKeyService;\n\ttextEditorService?: (instantiationService: IInstantiationService) => ITextEditorService;\n}, disposables = new DisposableStore()): ITestInstantiationService {\n\tconst instantiationService = browserWorkbenchInstantiationService({\n\t\tworkingCopyBackupService: () => disposables.add(new TestNativeWorkingCopyBackupService()),\n\t\t...overrides\n\t}, disposables);\n\n\tinstantiationService.stub(INativeHostService, new TestNativeHostService());\n\n\treturn instantiationService;\n}\n\nexport class TestServiceAccessor {\n\tconstructor(\n\t\t@ILifecycleService public lifecycleService: TestLifecycleService,\n\t\t@ITextFileService public textFileService: TestTextFileService,\n\t\t@IFilesConfigurationService public filesConfigurationService: TestFilesConfigurationService,\n\t\t@IWorkspaceContextService public contextService: TestContextService,\n\t\t@IModelService public modelService: ModelService,\n\t\t@IFileService public fileService: TestFileService,\n\t\t@INativeHostService public nativeHostService: TestNativeHostService,\n\t\t@IFileDialogService public fileDialogService: TestFileDialogService,\n\t\t@IWorkingCopyBackupService public workingCopyBackupService: TestNativeWorkingCopyBackupService,\n\t\t@IWorkingCopyService public workingCopyService: IWorkingCopyService,\n\t\t@IEditorService public editorService: IEditorService\n\t) {\n\t}\n}\n\nexport class TestNativeTextFileServiceWithEncodingOverrides extends NativeTextFileService {\n\n\tprivate _testEncoding: TestEncodingOracle | undefined;\n\toverride get encoding(): TestEncodingOracle {\n\t\tif (!this._testEncoding) {\n\t\t\tthis._testEncoding = this._register(this.instantiationService.createInstance(TestEncodingOracle));\n\t\t}\n\n\t\treturn this._testEncoding;\n\t}\n}\n\nexport class TestNativeWorkingCopyBackupService extends NativeWorkingCopyBackupService implements IDisposable {\n\n\tprivate backupResourceJoiners: Function[];\n\tprivate discardBackupJoiners: Function[];\n\tdiscardedBackups: IWorkingCopyIdentifier[];\n\tdiscardedAllBackups: boolean;\n\tprivate pendingBackupsArr: Promise<void>[];\n\n\tconstructor() {\n\t\tconst environmentService = TestEnvironmentService;\n\t\tconst logService = new NullLogService();\n\t\tconst fileService = new FileService(logService);\n\t\tconst lifecycleService = new TestLifecycleService();\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tsuper(environmentService as any, fileService, logService, lifecycleService);\n\n\t\tconst inMemoryFileSystemProvider = this._register(new InMemoryFileSystemProvider());\n\t\tthis._register(fileService.registerProvider(Schemas.inMemory, inMemoryFileSystemProvider));\n\t\tconst uriIdentityService = this._register(new UriIdentityService(fileService));\n\t\tconst userDataProfilesService = this._register(new UserDataProfilesService(environmentService, fileService, uriIdentityService, logService));\n\t\tthis._register(fileService.registerProvider(Schemas.vscodeUserData, this._register(new FileUserDataProvider(Schemas.file, inMemoryFileSystemProvider, Schemas.vscodeUserData, userDataProfilesService, uriIdentityService, logService))));\n\n\t\tthis.backupResourceJoiners = [];\n\t\tthis.discardBackupJoiners = [];\n\t\tthis.discardedBackups = [];\n\t\tthis.pendingBackupsArr = [];\n\t\tthis.discardedAllBackups = false;\n\n\t\tthis._register(fileService);\n\t\tthis._register(lifecycleService);\n\t}\n\n\ttestGetFileService(): IFileService {\n\t\treturn this.fileService;\n\t}\n\n\tasync waitForAllBackups(): Promise<void> {\n\t\tawait Promise.all(this.pendingBackupsArr);\n\t}\n\n\tjoinBackupResource(): Promise<void> {\n\t\treturn new Promise(resolve => this.backupResourceJoiners.push(resolve));\n\t}\n\n\toverride async backup(identifier: IWorkingCopyIdentifier, content?: VSBufferReadableStream | VSBufferReadable, versionId?: number, meta?: any, token?: CancellationToken): Promise<void> {\n\t\tconst p = super.backup(identifier, content, versionId, meta, token);\n\t\tconst removeFromPendingBackups = insert(this.pendingBackupsArr, p.then(undefined, undefined));\n\n\t\ttry {\n\t\t\tawait p;\n\t\t} finally {\n\t\t\tremoveFromPendingBackups();\n\t\t}\n\n\t\twhile (this.backupResourceJoiners.length) {\n\t\t\tthis.backupResourceJoiners.pop()!();\n\t\t}\n\t}\n\n\tjoinDiscardBackup(): Promise<void> {\n\t\treturn new Promise(resolve => this.discardBackupJoiners.push(resolve));\n\t}\n\n\toverride async discardBackup(identifier: IWorkingCopyIdentifier): Promise<void> {\n\t\tawait super.discardBackup(identifier);\n\t\tthis.discardedBackups.push(identifier);\n\n\t\twhile (this.discardBackupJoiners.length) {\n\t\t\tthis.discardBackupJoiners.pop()!();\n\t\t}\n\t}\n\n\toverride async discardBackups(filter?: { except: IWorkingCopyIdentifier[] }): Promise<void> {\n\t\tthis.discardedAllBackups = true;\n\n\t\treturn super.discardBackups(filter);\n\t}\n\n\tasync getBackupContents(identifier: IWorkingCopyIdentifier): Promise<string> {\n\t\tconst backupResource = this.toBackupResource(identifier);\n\n\t\tconst fileContents = await this.fileService.readFile(backupResource);\n\n\t\treturn fileContents.value.toString();\n\t}\n}\n\nexport class TestIPCFileSystemProvider implements IFileSystemProvider {\n\n\treadonly capabilities = FileSystemProviderCapabilities.FileReadWrite | FileSystemProviderCapabilities.PathCaseSensitive;\n\n\treadonly onDidChangeCapabilities = Event.None;\n\treadonly onDidChangeFile = Event.None;\n\n\tasync stat(resource: URI): Promise<IStat> {\n\t\tconst { ipcRenderer } = require('electron');\n\t\tconst stats = await ipcRenderer.invoke('vscode:statFile', resource.fsPath);\n\t\treturn {\n\t\t\ttype: stats.isDirectory ? FileType.Directory : (stats.isFile ? FileType.File : FileType.Unknown),\n\t\t\tctime: stats.ctimeMs,\n\t\t\tmtime: stats.mtimeMs,\n\t\t\tsize: stats.size,\n\t\t\tpermissions: stats.isReadonly ? 1 /* FilePermission.Readonly */ : undefined\n\t\t};\n\t}\n\n\tasync readFile(resource: URI): Promise<Uint8Array> {\n\t\tconst { ipcRenderer } = require('electron');\n\t\tconst result = await ipcRenderer.invoke('vscode:readFile', resource.fsPath);\n\t\treturn VSBuffer.wrap(result).buffer;\n\t}\n\n\twatch(resource: URI, opts: IWatchOptions): IDisposable { return { dispose: () => { } }; }\n\tmkdir(resource: URI): Promise<void> { throw new Error('mkdir not implemented in test provider'); }\n\treaddir(resource: URI): Promise<[string, FileType][]> { throw new Error('readdir not implemented in test provider'); }\n\tdelete(resource: URI, opts: IFileDeleteOptions): Promise<void> { throw new Error('delete not implemented in test provider'); }\n\trename(from: URI, to: URI, opts: IFileOverwriteOptions): Promise<void> { throw new Error('rename not implemented in test provider'); }\n\twriteFile(resource: URI, content: Uint8Array, opts: IFileWriteOptions): Promise<void> { throw new Error('writeFile not implemented in test provider'); }\n\treadFileStream?(resource: URI, opts: IFileReadStreamOptions, token: CancellationToken): ReadableStreamEvents<Uint8Array> { throw new Error('readFileStream not implemented in test provider'); }\n\topen?(resource: URI, opts: IFileOpenOptions): Promise<number> { throw new Error('open not implemented in test provider'); }\n\tclose?(fd: number): Promise<void> { throw new Error('close not implemented in test provider'); }\n\tread?(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number> { throw new Error('read not implemented in test provider'); }\n\twrite?(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number> { throw new Error('write not implemented in test provider'); }\n}\n"]}