{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/test/browser/window.test.ts","vs/workbench/test/browser/window.test.ts"],"names":[],"mappings":"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","file":"window.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { IRegisteredCodeWindow } from '../../../base/browser/dom.js';\nimport { CodeWindow, mainWindow } from '../../../base/browser/window.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { runWithFakedTimers } from '../../../base/test/common/timeTravelScheduler.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../base/test/common/utils.js';\nimport { BaseWindow } from '../../browser/window.js';\nimport { TestContextMenuService, TestEnvironmentService, TestHostService, TestLayoutService } from './workbenchTestServices.js';\n\nsuite('Window', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tclass TestWindow extends BaseWindow {\n\n\t\tconstructor(window: CodeWindow, dom: { getWindowsCount: () => number; getWindows: () => Iterable<IRegisteredCodeWindow> }) {\n\t\t\tsuper(window, dom, new TestHostService(), TestEnvironmentService, new TestContextMenuService(), new TestLayoutService());\n\t\t}\n\n\t\tprotected override enableWindowFocusOnElementFocus(): void { }\n\t}\n\n\ttest('multi window aware setTimeout()', async function () {\n\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst disposables = new DisposableStore();\n\n\t\t\tlet windows: IRegisteredCodeWindow[] = [];\n\t\t\tconst dom = {\n\t\t\t\tgetWindowsCount: () => windows.length,\n\t\t\t\tgetWindows: () => windows\n\t\t\t};\n\n\t\t\tconst setTimeoutCalls: number[] = [];\n\t\t\tconst clearTimeoutCalls: number[] = [];\n\n\t\t\tfunction createWindow(id: number, slow?: boolean) {\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\tconst res = {\n\t\t\t\t\tsetTimeout: function (callback: Function, delay: number, ...args: any[]): number {\n\t\t\t\t\t\tsetTimeoutCalls.push(id);\n\n\t\t\t\t\t\treturn mainWindow.setTimeout(() => callback(id), slow ? delay * 2 : delay, ...args);\n\t\t\t\t\t},\n\t\t\t\t\tclearTimeout: function (timeoutId: number): void {\n\t\t\t\t\t\tclearTimeoutCalls.push(id);\n\n\t\t\t\t\t\treturn mainWindow.clearTimeout(timeoutId);\n\t\t\t\t\t}\n\t\t\t\t} as any;\n\n\t\t\t\tdisposables.add(new TestWindow(res, dom));\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tconst window1 = createWindow(1);\n\t\t\twindows = [{ window: window1, disposables }];\n\n\t\t\t// Window Count: 1\n\n\t\t\tlet called = false;\n\t\t\tawait new Promise<void>((resolve, reject) => {\n\t\t\t\twindow1.setTimeout(() => {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(new Error('timeout called twice'));\n\t\t\t\t\t}\n\t\t\t\t}, 1);\n\t\t\t});\n\n\t\t\tassert.strictEqual(called, true);\n\t\t\tassert.deepStrictEqual(setTimeoutCalls, [1]);\n\t\t\tassert.deepStrictEqual(clearTimeoutCalls, []);\n\t\t\tcalled = false;\n\t\t\tsetTimeoutCalls.length = 0;\n\t\t\tclearTimeoutCalls.length = 0;\n\n\t\t\tawait new Promise<void>((resolve, reject) => {\n\t\t\t\twindow1.setTimeout(() => {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(new Error('timeout called twice'));\n\t\t\t\t\t}\n\t\t\t\t}, 0);\n\t\t\t});\n\n\t\t\tassert.strictEqual(called, true);\n\t\t\tassert.deepStrictEqual(setTimeoutCalls, [1]);\n\t\t\tassert.deepStrictEqual(clearTimeoutCalls, []);\n\t\t\tcalled = false;\n\t\t\tsetTimeoutCalls.length = 0;\n\t\t\tclearTimeoutCalls.length = 0;\n\n\t\t\t// Window Count: 3\n\n\t\t\tlet window2 = createWindow(2);\n\t\t\tconst window3 = createWindow(3);\n\t\t\twindows = [\n\t\t\t\t{ window: window2, disposables },\n\t\t\t\t{ window: window1, disposables },\n\t\t\t\t{ window: window3, disposables }\n\t\t\t];\n\n\t\t\tawait new Promise<void>((resolve, reject) => {\n\t\t\t\twindow1.setTimeout(() => {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(new Error('timeout called twice'));\n\t\t\t\t\t}\n\t\t\t\t}, 1);\n\t\t\t});\n\n\t\t\tassert.strictEqual(called, true);\n\t\t\tassert.deepStrictEqual(setTimeoutCalls, [2, 1, 3]);\n\t\t\tassert.deepStrictEqual(clearTimeoutCalls, [2, 1, 3]);\n\t\t\tcalled = false;\n\t\t\tsetTimeoutCalls.length = 0;\n\t\t\tclearTimeoutCalls.length = 0;\n\n\t\t\t// Window Count: 2 (1 fast, 1 slow)\n\n\t\t\twindow2 = createWindow(2, true);\n\t\t\twindows = [\n\t\t\t\t{ window: window2, disposables },\n\t\t\t\t{ window: window1, disposables },\n\t\t\t];\n\n\t\t\tawait new Promise<void>((resolve, reject) => {\n\t\t\t\twindow1.setTimeout((windowId: number) => {\n\t\t\t\t\tif (!called && windowId === 1) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else if (called) {\n\t\t\t\t\t\treject(new Error('timeout called twice'));\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(new Error('timeout called for wrong window'));\n\t\t\t\t\t}\n\t\t\t\t}, 1);\n\t\t\t});\n\n\t\t\tassert.strictEqual(called, true);\n\t\t\tassert.deepStrictEqual(setTimeoutCalls, [2, 1]);\n\t\t\tassert.deepStrictEqual(clearTimeoutCalls, [2, 1]);\n\t\t\tcalled = false;\n\t\t\tsetTimeoutCalls.length = 0;\n\t\t\tclearTimeoutCalls.length = 0;\n\n\t\t\tdisposables.dispose();\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { IRegisteredCodeWindow } from '../../../base/browser/dom.js';\nimport { CodeWindow, mainWindow } from '../../../base/browser/window.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { runWithFakedTimers } from '../../../base/test/common/timeTravelScheduler.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../base/test/common/utils.js';\nimport { BaseWindow } from '../../browser/window.js';\nimport { TestContextMenuService, TestEnvironmentService, TestHostService, TestLayoutService } from './workbenchTestServices.js';\n\nsuite('Window', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tclass TestWindow extends BaseWindow {\n\n\t\tconstructor(window: CodeWindow, dom: { getWindowsCount: () => number; getWindows: () => Iterable<IRegisteredCodeWindow> }) {\n\t\t\tsuper(window, dom, new TestHostService(), TestEnvironmentService, new TestContextMenuService(), new TestLayoutService());\n\t\t}\n\n\t\tprotected override enableWindowFocusOnElementFocus(): void { }\n\t}\n\n\ttest('multi window aware setTimeout()', async function () {\n\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst disposables = new DisposableStore();\n\n\t\t\tlet windows: IRegisteredCodeWindow[] = [];\n\t\t\tconst dom = {\n\t\t\t\tgetWindowsCount: () => windows.length,\n\t\t\t\tgetWindows: () => windows\n\t\t\t};\n\n\t\t\tconst setTimeoutCalls: number[] = [];\n\t\t\tconst clearTimeoutCalls: number[] = [];\n\n\t\t\tfunction createWindow(id: number, slow?: boolean) {\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\tconst res = {\n\t\t\t\t\tsetTimeout: function (callback: Function, delay: number, ...args: any[]): number {\n\t\t\t\t\t\tsetTimeoutCalls.push(id);\n\n\t\t\t\t\t\treturn mainWindow.setTimeout(() => callback(id), slow ? delay * 2 : delay, ...args);\n\t\t\t\t\t},\n\t\t\t\t\tclearTimeout: function (timeoutId: number): void {\n\t\t\t\t\t\tclearTimeoutCalls.push(id);\n\n\t\t\t\t\t\treturn mainWindow.clearTimeout(timeoutId);\n\t\t\t\t\t}\n\t\t\t\t} as any;\n\n\t\t\t\tdisposables.add(new TestWindow(res, dom));\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tconst window1 = createWindow(1);\n\t\t\twindows = [{ window: window1, disposables }];\n\n\t\t\t// Window Count: 1\n\n\t\t\tlet called = false;\n\t\t\tawait new Promise<void>((resolve, reject) => {\n\t\t\t\twindow1.setTimeout(() => {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(new Error('timeout called twice'));\n\t\t\t\t\t}\n\t\t\t\t}, 1);\n\t\t\t});\n\n\t\t\tassert.strictEqual(called, true);\n\t\t\tassert.deepStrictEqual(setTimeoutCalls, [1]);\n\t\t\tassert.deepStrictEqual(clearTimeoutCalls, []);\n\t\t\tcalled = false;\n\t\t\tsetTimeoutCalls.length = 0;\n\t\t\tclearTimeoutCalls.length = 0;\n\n\t\t\tawait new Promise<void>((resolve, reject) => {\n\t\t\t\twindow1.setTimeout(() => {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(new Error('timeout called twice'));\n\t\t\t\t\t}\n\t\t\t\t}, 0);\n\t\t\t});\n\n\t\t\tassert.strictEqual(called, true);\n\t\t\tassert.deepStrictEqual(setTimeoutCalls, [1]);\n\t\t\tassert.deepStrictEqual(clearTimeoutCalls, []);\n\t\t\tcalled = false;\n\t\t\tsetTimeoutCalls.length = 0;\n\t\t\tclearTimeoutCalls.length = 0;\n\n\t\t\t// Window Count: 3\n\n\t\t\tlet window2 = createWindow(2);\n\t\t\tconst window3 = createWindow(3);\n\t\t\twindows = [\n\t\t\t\t{ window: window2, disposables },\n\t\t\t\t{ window: window1, disposables },\n\t\t\t\t{ window: window3, disposables }\n\t\t\t];\n\n\t\t\tawait new Promise<void>((resolve, reject) => {\n\t\t\t\twindow1.setTimeout(() => {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(new Error('timeout called twice'));\n\t\t\t\t\t}\n\t\t\t\t}, 1);\n\t\t\t});\n\n\t\t\tassert.strictEqual(called, true);\n\t\t\tassert.deepStrictEqual(setTimeoutCalls, [2, 1, 3]);\n\t\t\tassert.deepStrictEqual(clearTimeoutCalls, [2, 1, 3]);\n\t\t\tcalled = false;\n\t\t\tsetTimeoutCalls.length = 0;\n\t\t\tclearTimeoutCalls.length = 0;\n\n\t\t\t// Window Count: 2 (1 fast, 1 slow)\n\n\t\t\twindow2 = createWindow(2, true);\n\t\t\twindows = [\n\t\t\t\t{ window: window2, disposables },\n\t\t\t\t{ window: window1, disposables },\n\t\t\t];\n\n\t\t\tawait new Promise<void>((resolve, reject) => {\n\t\t\t\twindow1.setTimeout((windowId: number) => {\n\t\t\t\t\tif (!called && windowId === 1) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t} else if (called) {\n\t\t\t\t\t\treject(new Error('timeout called twice'));\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(new Error('timeout called for wrong window'));\n\t\t\t\t\t}\n\t\t\t\t}, 1);\n\t\t\t});\n\n\t\t\tassert.strictEqual(called, true);\n\t\t\tassert.deepStrictEqual(setTimeoutCalls, [2, 1]);\n\t\t\tassert.deepStrictEqual(clearTimeoutCalls, [2, 1]);\n\t\t\tcalled = false;\n\t\t\tsetTimeoutCalls.length = 0;\n\t\t\tclearTimeoutCalls.length = 0;\n\n\t\t\tdisposables.dispose();\n\t\t});\n\t});\n});\n"]}