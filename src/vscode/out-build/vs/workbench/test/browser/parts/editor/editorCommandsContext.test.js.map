{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/workbench/test/browser/parts/editor/editorCommandsContext.test.ts","vs/workbench/test/browser/parts/editor/editorCommandsContext.test.ts"],"names":[],"mappings":"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","file":"editorCommandsContext.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { workbenchInstantiationService, TestServiceAccessor, registerTestEditor, registerTestFileEditor, registerTestResourceEditor, TestFileEditorInput, createEditorPart, registerTestSideBySideEditor, TestEditorInput } from '../../workbenchTestServices.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { SyncDescriptor } from '../../../../../platform/instantiation/common/descriptors.js';\nimport { GroupDirection, IEditorGroupsService } from '../../../../services/editor/common/editorGroupsService.js';\nimport { EditorService } from '../../../../services/editor/browser/editorService.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { EditorInput } from '../../../../common/editor/editorInput.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { resolveCommandsContext } from '../../../../browser/parts/editor/editorCommandsContext.js';\nimport { IEditorCommandsContext } from '../../../../common/editor.js';\nimport { IListService, WorkbenchListWidget } from '../../../../../platform/list/browser/listService.js';\n\nclass TestListService implements IListService {\n\tdeclare readonly _serviceBrand: undefined;\n\treadonly lastFocusedList: WorkbenchListWidget | undefined = undefined;\n}\n\nsuite('Resolving Editor Commands Context', () => {\n\n\tconst disposables = new DisposableStore();\n\n\tconst TEST_EDITOR_ID = 'MyTestEditorForEditors';\n\n\tlet instantiationService: IInstantiationService;\n\tlet accessor: TestServiceAccessor;\n\n\tconst testListService = new TestListService();\n\n\tsetup(() => {\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\taccessor = instantiationService.createInstance(TestServiceAccessor);\n\n\t\tdisposables.add(accessor.untitledTextEditorService);\n\t\tdisposables.add(registerTestFileEditor());\n\t\tdisposables.add(registerTestSideBySideEditor());\n\t\tdisposables.add(registerTestResourceEditor());\n\t\tdisposables.add(registerTestEditor(TEST_EDITOR_ID, [new SyncDescriptor(TestFileEditorInput)]));\n\t});\n\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\tlet index = 0;\n\tfunction input(id = String(index++)): EditorInput {\n\t\treturn disposables.add(new TestEditorInput(URI.parse(`file://${id}`), 'testInput'));\n\t}\n\n\tasync function createServices(): Promise<TestServiceAccessor> {\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\n\t\tconst part = await createEditorPart(instantiationService, disposables);\n\t\tinstantiationService.stub(IEditorGroupsService, part);\n\n\t\tconst editorService = disposables.add(instantiationService.createInstance(EditorService, undefined));\n\t\tinstantiationService.stub(IEditorService, editorService);\n\n\t\treturn instantiationService.createInstance(TestServiceAccessor);\n\t}\n\n\ttest('use editor group selection', async () => {\n\t\tconst accessor = await createServices();\n\t\tconst activeGroup = accessor.editorGroupService.activeGroup;\n\n\t\tconst input1 = input();\n\t\tconst input2 = input();\n\t\tconst input3 = input();\n\t\tactiveGroup.openEditor(input1, { pinned: true });\n\t\tactiveGroup.openEditor(input2, { pinned: true });\n\t\tactiveGroup.openEditor(input3, { pinned: true });\n\n\t\tactiveGroup.setSelection(input1, [input2]);\n\n\t\t// use editor commands context\n\t\tconst editorCommandContext: IEditorCommandsContext = { groupId: activeGroup.id, editorIndex: activeGroup.getIndexOfEditor(input1), preserveFocus: true };\n\t\tconst resolvedContext1 = resolveCommandsContext([editorCommandContext], accessor.editorService, accessor.editorGroupService, testListService);\n\n\t\tassert.strictEqual(resolvedContext1.groupedEditors.length, 1);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].group.id, activeGroup.id);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].editors.length, 2);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].editors[0], input1);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].editors[1], input2);\n\t\tassert.strictEqual(resolvedContext1.preserveFocus, true);\n\n\t\t// use URI\n\t\tconst resolvedContext2 = resolveCommandsContext([input2.resource], accessor.editorService, accessor.editorGroupService, testListService);\n\n\t\tassert.strictEqual(resolvedContext2.groupedEditors.length, 1);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].group.id, activeGroup.id);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].editors.length, 2);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].editors[0], input2);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].editors[1], input1);\n\t\tassert.strictEqual(resolvedContext2.preserveFocus, false);\n\n\t\t// use URI and commandContext\n\t\tconst editor1CommandContext: IEditorCommandsContext = { groupId: activeGroup.id, editorIndex: activeGroup.getIndexOfEditor(input1), preserveFocus: true };\n\t\tconst resolvedContext3 = resolveCommandsContext([editor1CommandContext], accessor.editorService, accessor.editorGroupService, testListService);\n\n\t\tassert.strictEqual(resolvedContext3.groupedEditors.length, 1);\n\t\tassert.strictEqual(resolvedContext3.groupedEditors[0].group.id, activeGroup.id);\n\t\tassert.strictEqual(resolvedContext3.groupedEditors[0].editors.length, 2);\n\t\tassert.strictEqual(resolvedContext3.groupedEditors[0].editors[0], input1);\n\t\tassert.strictEqual(resolvedContext3.groupedEditors[0].editors[1], input2);\n\t\tassert.strictEqual(resolvedContext3.preserveFocus, true);\n\t});\n\n\ttest('don\\'t use editor group selection', async () => {\n\t\tconst accessor = await createServices();\n\t\tconst activeGroup = accessor.editorGroupService.activeGroup;\n\n\t\tconst input1 = input();\n\t\tconst input2 = input();\n\t\tconst input3 = input();\n\t\tactiveGroup.openEditor(input1, { pinned: true });\n\t\tactiveGroup.openEditor(input2, { pinned: true });\n\t\tactiveGroup.openEditor(input3, { pinned: true });\n\n\t\tactiveGroup.setSelection(input1, [input2]);\n\n\t\t// use editor commands context\n\t\tconst editorCommandContext: IEditorCommandsContext = { groupId: activeGroup.id, editorIndex: activeGroup.getIndexOfEditor(input3), preserveFocus: true };\n\t\tconst resolvedContext1 = resolveCommandsContext([editorCommandContext], accessor.editorService, accessor.editorGroupService, testListService);\n\n\t\tassert.strictEqual(resolvedContext1.groupedEditors.length, 1);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].group.id, activeGroup.id);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].editors.length, 1);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].editors[0], input3);\n\t\tassert.strictEqual(resolvedContext1.preserveFocus, true);\n\n\t\t// use URI\n\t\tconst resolvedContext2 = resolveCommandsContext([input3.resource], accessor.editorService, accessor.editorGroupService, testListService);\n\n\t\tassert.strictEqual(resolvedContext2.groupedEditors.length, 1);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].group.id, activeGroup.id);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].editors.length, 1);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].editors[0], input3);\n\t\tassert.strictEqual(resolvedContext2.preserveFocus, false);\n\t});\n\n\ttest('inactive edior group command context', async () => {\n\t\tconst accessor = await createServices();\n\t\tconst editorGroupService = accessor.editorGroupService;\n\n\t\tconst group1 = editorGroupService.activeGroup;\n\t\tconst group2 = editorGroupService.addGroup(group1, GroupDirection.RIGHT);\n\n\t\tconst input11 = input();\n\t\tconst input12 = input();\n\t\tgroup1.openEditor(input11, { pinned: true });\n\t\tgroup1.openEditor(input12, { pinned: true });\n\n\t\tconst input21 = input();\n\t\tgroup2.openEditor(input21, { pinned: true });\n\n\t\teditorGroupService.activateGroup(group1);\n\t\tgroup1.setSelection(input11, [input12]);\n\n\t\t// use editor commands context of inactive group with editor index\n\t\tconst editorCommandContext1: IEditorCommandsContext = { groupId: group2.id, editorIndex: group2.getIndexOfEditor(input21), preserveFocus: true };\n\t\tconst resolvedContext1 = resolveCommandsContext([editorCommandContext1], accessor.editorService, accessor.editorGroupService, testListService);\n\n\t\tassert.strictEqual(resolvedContext1.groupedEditors.length, 1);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].group.id, group2.id);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].editors.length, 1);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].editors[0], input21);\n\t\tassert.strictEqual(resolvedContext1.preserveFocus, true);\n\n\t\t// use editor commands context of inactive group without editor index\n\t\tconst editorCommandContext2: IEditorCommandsContext = { groupId: group2.id, preserveFocus: true };\n\t\tconst resolvedContext2 = resolveCommandsContext([editorCommandContext2], accessor.editorService, accessor.editorGroupService, testListService);\n\n\t\tassert.strictEqual(resolvedContext2.groupedEditors.length, 1);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].group.id, group2.id);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].editors.length, 1);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].editors[0], input21);\n\t\tassert.strictEqual(resolvedContext2.preserveFocus, true);\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { workbenchInstantiationService, TestServiceAccessor, registerTestEditor, registerTestFileEditor, registerTestResourceEditor, TestFileEditorInput, createEditorPart, registerTestSideBySideEditor, TestEditorInput } from '../../workbenchTestServices.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { SyncDescriptor } from '../../../../../platform/instantiation/common/descriptors.js';\nimport { GroupDirection, IEditorGroupsService } from '../../../../services/editor/common/editorGroupsService.js';\nimport { EditorService } from '../../../../services/editor/browser/editorService.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { EditorInput } from '../../../../common/editor/editorInput.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { resolveCommandsContext } from '../../../../browser/parts/editor/editorCommandsContext.js';\nimport { IEditorCommandsContext } from '../../../../common/editor.js';\nimport { IListService, WorkbenchListWidget } from '../../../../../platform/list/browser/listService.js';\n\nclass TestListService implements IListService {\n\tdeclare readonly _serviceBrand: undefined;\n\treadonly lastFocusedList: WorkbenchListWidget | undefined = undefined;\n}\n\nsuite('Resolving Editor Commands Context', () => {\n\n\tconst disposables = new DisposableStore();\n\n\tconst TEST_EDITOR_ID = 'MyTestEditorForEditors';\n\n\tlet instantiationService: IInstantiationService;\n\tlet accessor: TestServiceAccessor;\n\n\tconst testListService = new TestListService();\n\n\tsetup(() => {\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\taccessor = instantiationService.createInstance(TestServiceAccessor);\n\n\t\tdisposables.add(accessor.untitledTextEditorService);\n\t\tdisposables.add(registerTestFileEditor());\n\t\tdisposables.add(registerTestSideBySideEditor());\n\t\tdisposables.add(registerTestResourceEditor());\n\t\tdisposables.add(registerTestEditor(TEST_EDITOR_ID, [new SyncDescriptor(TestFileEditorInput)]));\n\t});\n\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\tlet index = 0;\n\tfunction input(id = String(index++)): EditorInput {\n\t\treturn disposables.add(new TestEditorInput(URI.parse(`file://${id}`), 'testInput'));\n\t}\n\n\tasync function createServices(): Promise<TestServiceAccessor> {\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\n\t\tconst part = await createEditorPart(instantiationService, disposables);\n\t\tinstantiationService.stub(IEditorGroupsService, part);\n\n\t\tconst editorService = disposables.add(instantiationService.createInstance(EditorService, undefined));\n\t\tinstantiationService.stub(IEditorService, editorService);\n\n\t\treturn instantiationService.createInstance(TestServiceAccessor);\n\t}\n\n\ttest('use editor group selection', async () => {\n\t\tconst accessor = await createServices();\n\t\tconst activeGroup = accessor.editorGroupService.activeGroup;\n\n\t\tconst input1 = input();\n\t\tconst input2 = input();\n\t\tconst input3 = input();\n\t\tactiveGroup.openEditor(input1, { pinned: true });\n\t\tactiveGroup.openEditor(input2, { pinned: true });\n\t\tactiveGroup.openEditor(input3, { pinned: true });\n\n\t\tactiveGroup.setSelection(input1, [input2]);\n\n\t\t// use editor commands context\n\t\tconst editorCommandContext: IEditorCommandsContext = { groupId: activeGroup.id, editorIndex: activeGroup.getIndexOfEditor(input1), preserveFocus: true };\n\t\tconst resolvedContext1 = resolveCommandsContext([editorCommandContext], accessor.editorService, accessor.editorGroupService, testListService);\n\n\t\tassert.strictEqual(resolvedContext1.groupedEditors.length, 1);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].group.id, activeGroup.id);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].editors.length, 2);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].editors[0], input1);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].editors[1], input2);\n\t\tassert.strictEqual(resolvedContext1.preserveFocus, true);\n\n\t\t// use URI\n\t\tconst resolvedContext2 = resolveCommandsContext([input2.resource], accessor.editorService, accessor.editorGroupService, testListService);\n\n\t\tassert.strictEqual(resolvedContext2.groupedEditors.length, 1);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].group.id, activeGroup.id);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].editors.length, 2);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].editors[0], input2);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].editors[1], input1);\n\t\tassert.strictEqual(resolvedContext2.preserveFocus, false);\n\n\t\t// use URI and commandContext\n\t\tconst editor1CommandContext: IEditorCommandsContext = { groupId: activeGroup.id, editorIndex: activeGroup.getIndexOfEditor(input1), preserveFocus: true };\n\t\tconst resolvedContext3 = resolveCommandsContext([editor1CommandContext], accessor.editorService, accessor.editorGroupService, testListService);\n\n\t\tassert.strictEqual(resolvedContext3.groupedEditors.length, 1);\n\t\tassert.strictEqual(resolvedContext3.groupedEditors[0].group.id, activeGroup.id);\n\t\tassert.strictEqual(resolvedContext3.groupedEditors[0].editors.length, 2);\n\t\tassert.strictEqual(resolvedContext3.groupedEditors[0].editors[0], input1);\n\t\tassert.strictEqual(resolvedContext3.groupedEditors[0].editors[1], input2);\n\t\tassert.strictEqual(resolvedContext3.preserveFocus, true);\n\t});\n\n\ttest('don\\'t use editor group selection', async () => {\n\t\tconst accessor = await createServices();\n\t\tconst activeGroup = accessor.editorGroupService.activeGroup;\n\n\t\tconst input1 = input();\n\t\tconst input2 = input();\n\t\tconst input3 = input();\n\t\tactiveGroup.openEditor(input1, { pinned: true });\n\t\tactiveGroup.openEditor(input2, { pinned: true });\n\t\tactiveGroup.openEditor(input3, { pinned: true });\n\n\t\tactiveGroup.setSelection(input1, [input2]);\n\n\t\t// use editor commands context\n\t\tconst editorCommandContext: IEditorCommandsContext = { groupId: activeGroup.id, editorIndex: activeGroup.getIndexOfEditor(input3), preserveFocus: true };\n\t\tconst resolvedContext1 = resolveCommandsContext([editorCommandContext], accessor.editorService, accessor.editorGroupService, testListService);\n\n\t\tassert.strictEqual(resolvedContext1.groupedEditors.length, 1);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].group.id, activeGroup.id);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].editors.length, 1);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].editors[0], input3);\n\t\tassert.strictEqual(resolvedContext1.preserveFocus, true);\n\n\t\t// use URI\n\t\tconst resolvedContext2 = resolveCommandsContext([input3.resource], accessor.editorService, accessor.editorGroupService, testListService);\n\n\t\tassert.strictEqual(resolvedContext2.groupedEditors.length, 1);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].group.id, activeGroup.id);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].editors.length, 1);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].editors[0], input3);\n\t\tassert.strictEqual(resolvedContext2.preserveFocus, false);\n\t});\n\n\ttest('inactive edior group command context', async () => {\n\t\tconst accessor = await createServices();\n\t\tconst editorGroupService = accessor.editorGroupService;\n\n\t\tconst group1 = editorGroupService.activeGroup;\n\t\tconst group2 = editorGroupService.addGroup(group1, GroupDirection.RIGHT);\n\n\t\tconst input11 = input();\n\t\tconst input12 = input();\n\t\tgroup1.openEditor(input11, { pinned: true });\n\t\tgroup1.openEditor(input12, { pinned: true });\n\n\t\tconst input21 = input();\n\t\tgroup2.openEditor(input21, { pinned: true });\n\n\t\teditorGroupService.activateGroup(group1);\n\t\tgroup1.setSelection(input11, [input12]);\n\n\t\t// use editor commands context of inactive group with editor index\n\t\tconst editorCommandContext1: IEditorCommandsContext = { groupId: group2.id, editorIndex: group2.getIndexOfEditor(input21), preserveFocus: true };\n\t\tconst resolvedContext1 = resolveCommandsContext([editorCommandContext1], accessor.editorService, accessor.editorGroupService, testListService);\n\n\t\tassert.strictEqual(resolvedContext1.groupedEditors.length, 1);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].group.id, group2.id);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].editors.length, 1);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].editors[0], input21);\n\t\tassert.strictEqual(resolvedContext1.preserveFocus, true);\n\n\t\t// use editor commands context of inactive group without editor index\n\t\tconst editorCommandContext2: IEditorCommandsContext = { groupId: group2.id, preserveFocus: true };\n\t\tconst resolvedContext2 = resolveCommandsContext([editorCommandContext2], accessor.editorService, accessor.editorGroupService, testListService);\n\n\t\tassert.strictEqual(resolvedContext2.groupedEditors.length, 1);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].group.id, group2.id);\n\t\tassert.strictEqual(resolvedContext2.groupedEditors[0].editors.length, 1);\n\t\tassert.strictEqual(resolvedContext1.groupedEditors[0].editors[0], input21);\n\t\tassert.strictEqual(resolvedContext2.preserveFocus, true);\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"]}