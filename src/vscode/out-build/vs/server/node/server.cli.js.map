{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/server/node/server.cli.ts","vs/server/node/server.cli.ts"],"names":[],"mappings":"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","file":"server.cli.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport * as url from 'url';\nimport * as cp from 'child_process';\nimport * as http from 'http';\nimport { cwd } from '../../base/common/process.js';\nimport { dirname, extname, resolve, join } from '../../base/common/path.js';\nimport { parseArgs, buildHelpMessage, buildVersionMessage, OPTIONS, OptionDescriptions, ErrorReporter } from '../../platform/environment/node/argv.js';\nimport { NativeParsedArgs } from '../../platform/environment/common/argv.js';\nimport { createWaitMarkerFileSync } from '../../platform/environment/node/wait.js';\nimport { PipeCommand } from '../../workbench/api/node/extHostCLIServer.js';\nimport { hasStdinWithoutTty, getStdinFilePath, readFromStdin } from '../../platform/environment/node/stdin.js';\nimport { DeferredPromise } from '../../base/common/async.js';\nimport { FileAccess } from '../../base/common/network.js';\n\n/*\n * Implements a standalone CLI app that opens VS Code from a remote terminal.\n *  - In integrated terminals for remote windows this connects to the remote server though a pipe.\n *    The pipe is passed in env VSCODE_IPC_HOOK_CLI.\n *  - In external terminals for WSL this calls VS Code on the Windows side.\n *    The VS Code desktop executable path is passed in env VSCODE_CLIENT_COMMAND.\n */\n\n\ninterface ProductDescription {\n\tproductName: string;\n\tversion: string;\n\tcommit: string;\n\texecutableName: string;\n}\n\ninterface RemoteParsedArgs extends NativeParsedArgs { 'gitCredential'?: string; 'openExternal'?: boolean }\n\n\nconst isSupportedForCmd = (optionId: keyof RemoteParsedArgs) => {\n\tswitch (optionId) {\n\t\tcase 'user-data-dir':\n\t\tcase 'extensions-dir':\n\t\tcase 'export-default-configuration':\n\t\tcase 'install-source':\n\t\tcase 'enable-smoke-test-driver':\n\t\tcase 'extensions-download-dir':\n\t\tcase 'builtin-extensions-dir':\n\t\tcase 'telemetry':\n\t\t\treturn false;\n\t\tdefault:\n\t\t\treturn true;\n\t}\n};\n\nconst isSupportedForPipe = (optionId: keyof RemoteParsedArgs) => {\n\tswitch (optionId) {\n\t\tcase 'version':\n\t\tcase 'help':\n\t\tcase 'folder-uri':\n\t\tcase 'file-uri':\n\t\tcase 'add':\n\t\tcase 'diff':\n\t\tcase 'merge':\n\t\tcase 'wait':\n\t\tcase 'goto':\n\t\tcase 'reuse-window':\n\t\tcase 'new-window':\n\t\tcase 'status':\n\t\tcase 'install-extension':\n\t\tcase 'uninstall-extension':\n\t\tcase 'update-extensions':\n\t\tcase 'list-extensions':\n\t\tcase 'force':\n\t\tcase 'do-not-include-pack-dependencies':\n\t\tcase 'show-versions':\n\t\tcase 'category':\n\t\tcase 'verbose':\n\t\tcase 'remote':\n\t\tcase 'locate-shell-integration-path':\n\t\t\treturn true;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n};\n\nconst cliPipe = process.env['VSCODE_IPC_HOOK_CLI'] as string;\nconst cliCommand = process.env['VSCODE_CLIENT_COMMAND'] as string;\nconst cliCommandCwd = process.env['VSCODE_CLIENT_COMMAND_CWD'] as string;\nconst cliRemoteAuthority = process.env['VSCODE_CLI_AUTHORITY'] as string;\nconst cliStdInFilePath = process.env['VSCODE_STDIN_FILE_PATH'] as string;\n\nexport async function main(desc: ProductDescription, args: string[]): Promise<void> {\n\tif (!cliPipe && !cliCommand) {\n\t\tconsole.log('Command is only available in WSL or inside a Visual Studio Code terminal.');\n\t\treturn;\n\t}\n\n\t// take the local options and remove the ones that don't apply\n\tconst options: OptionDescriptions<Required<RemoteParsedArgs>> = { ...OPTIONS, gitCredential: { type: 'string' }, openExternal: { type: 'boolean' } };\n\tconst isSupported = cliCommand ? isSupportedForCmd : isSupportedForPipe;\n\tfor (const optionId in OPTIONS) {\n\t\tconst optId = <keyof RemoteParsedArgs>optionId;\n\t\tif (!isSupported(optId)) {\n\t\t\tdelete options[optId];\n\t\t}\n\t}\n\n\tif (cliPipe) {\n\t\toptions['openExternal'] = { type: 'boolean' };\n\t}\n\n\tconst errorReporter: ErrorReporter = {\n\t\tonMultipleValues: (id: string, usedValue: string) => {\n\t\t\tconsole.error(`Option '${id}' can only be defined once. Using value ${usedValue}.`);\n\t\t},\n\t\tonEmptyValue: (id) => {\n\t\t\tconsole.error(`Ignoring option '${id}': Value must not be empty.`);\n\t\t},\n\t\tonUnknownOption: (id: string) => {\n\t\t\tconsole.error(`Ignoring option '${id}': not supported for ${desc.executableName}.`);\n\t\t},\n\t\tonDeprecatedOption: (deprecatedOption: string, message: string) => {\n\t\t\tconsole.warn(`Option '${deprecatedOption}' is deprecated: ${message}`);\n\t\t}\n\t};\n\n\tconst parsedArgs = parseArgs(args, options, errorReporter);\n\tconst mapFileUri = cliRemoteAuthority ? mapFileToRemoteUri : (uri: string) => uri;\n\n\tconst verbose = !!parsedArgs['verbose'];\n\n\tif (parsedArgs.help) {\n\t\tconsole.log(buildHelpMessage(desc.productName, desc.executableName, desc.version, options));\n\t\treturn;\n\t}\n\tif (parsedArgs.version) {\n\t\tconsole.log(buildVersionMessage(desc.version, desc.commit));\n\t\treturn;\n\t}\n\tif (parsedArgs['locate-shell-integration-path']) {\n\t\tlet file: string;\n\t\tswitch (parsedArgs['locate-shell-integration-path']) {\n\t\t\t// Usage: `[[ \"$TERM_PROGRAM\" == \"vscode\" ]] && . \"$(code --locate-shell-integration-path bash)\"`\n\t\t\tcase 'bash': file = 'shellIntegration-bash.sh'; break;\n\t\t\t// Usage: `if ($env:TERM_PROGRAM -eq \"vscode\") { . \"$(code --locate-shell-integration-path pwsh)\" }`\n\t\t\tcase 'pwsh': file = 'shellIntegration.ps1'; break;\n\t\t\t// Usage: `[[ \"$TERM_PROGRAM\" == \"vscode\" ]] && . \"$(code --locate-shell-integration-path zsh)\"`\n\t\t\tcase 'zsh': file = 'shellIntegration-rc.zsh'; break;\n\t\t\t// Usage: `string match -q \"$TERM_PROGRAM\" \"vscode\"; and . (code --locate-shell-integration-path fish)`\n\t\t\tcase 'fish': file = 'shellIntegration.fish'; break;\n\t\t\tdefault: throw new Error('Error using --locate-shell-integration-path: Invalid shell type');\n\t\t}\n\t\tconsole.log(join(getAppRoot(), 'out', 'vs', 'workbench', 'contrib', 'terminal', 'common', 'scripts', file));\n\t\treturn;\n\t}\n\tif (cliPipe) {\n\t\tif (parsedArgs['openExternal']) {\n\t\t\tawait openInBrowser(parsedArgs['_'], verbose);\n\t\t\treturn;\n\t\t}\n\t}\n\n\tlet remote: string | null | undefined = parsedArgs.remote;\n\tif (remote === 'local' || remote === 'false' || remote === '') {\n\t\tremote = null; // null represent a local window\n\t}\n\n\tconst folderURIs = (parsedArgs['folder-uri'] || []).map(mapFileUri);\n\tparsedArgs['folder-uri'] = folderURIs;\n\n\tconst fileURIs = (parsedArgs['file-uri'] || []).map(mapFileUri);\n\tparsedArgs['file-uri'] = fileURIs;\n\n\tconst inputPaths = parsedArgs['_'];\n\tlet hasReadStdinArg = false;\n\tfor (const input of inputPaths) {\n\t\tif (input === '-') {\n\t\t\thasReadStdinArg = true;\n\t\t} else {\n\t\t\ttranslatePath(input, mapFileUri, folderURIs, fileURIs);\n\t\t}\n\t}\n\n\tparsedArgs['_'] = [];\n\n\tlet readFromStdinPromise: Promise<void> | undefined;\n\tlet stdinFilePath: string | undefined;\n\n\tif (hasReadStdinArg && hasStdinWithoutTty()) {\n\t\ttry {\n\t\t\tstdinFilePath = cliStdInFilePath;\n\t\t\tif (!stdinFilePath) {\n\t\t\t\tstdinFilePath = getStdinFilePath();\n\t\t\t\tconst readFromStdinDone = new DeferredPromise<void>();\n\t\t\t\tawait readFromStdin(stdinFilePath, verbose, () => readFromStdinDone.complete()); // throws error if file can not be written\n\t\t\t\tif (!parsedArgs.wait) {\n\t\t\t\t\t// if `--wait` is not provided, we keep this process alive\n\t\t\t\t\t// for at least as long as the stdin stream is open to\n\t\t\t\t\t// ensure that we read all the data.\n\t\t\t\t\treadFromStdinPromise = readFromStdinDone.p;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Make sure to open tmp file\n\t\t\ttranslatePath(stdinFilePath, mapFileUri, folderURIs, fileURIs);\n\n\t\t\t// Ignore adding this to history\n\t\t\tparsedArgs['skip-add-to-recently-opened'] = true;\n\n\t\t\tconsole.log(`Reading from stdin via: ${stdinFilePath}`);\n\t\t} catch (e) {\n\t\t\tconsole.log(`Failed to create file to read via stdin: ${e.toString()}`);\n\t\t}\n\t}\n\n\tif (parsedArgs.extensionDevelopmentPath) {\n\t\tparsedArgs.extensionDevelopmentPath = parsedArgs.extensionDevelopmentPath.map(p => mapFileUri(pathToURI(p).href));\n\t}\n\n\tif (parsedArgs.extensionTestsPath) {\n\t\tparsedArgs.extensionTestsPath = mapFileUri(pathToURI(parsedArgs['extensionTestsPath']).href);\n\t}\n\n\tconst crashReporterDirectory = parsedArgs['crash-reporter-directory'];\n\tif (crashReporterDirectory !== undefined && !crashReporterDirectory.match(/^([a-zA-Z]:[\\\\\\/])/)) {\n\t\tconsole.log(`The crash reporter directory '${crashReporterDirectory}' must be an absolute Windows path (e.g. c:/crashes)`);\n\t\treturn;\n\t}\n\n\tif (cliCommand) {\n\t\tif (parsedArgs['install-extension'] !== undefined || parsedArgs['uninstall-extension'] !== undefined || parsedArgs['list-extensions'] || parsedArgs['update-extensions']) {\n\t\t\tconst cmdLine: string[] = [];\n\t\t\tparsedArgs['install-extension']?.forEach(id => cmdLine.push('--install-extension', id));\n\t\t\tparsedArgs['uninstall-extension']?.forEach(id => cmdLine.push('--uninstall-extension', id));\n\t\t\t['list-extensions', 'force', 'show-versions', 'category'].forEach(opt => {\n\t\t\t\tconst value = parsedArgs[<keyof NativeParsedArgs>opt];\n\t\t\t\tif (value !== undefined) {\n\t\t\t\t\tcmdLine.push(`--${opt}=${value}`);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (parsedArgs['update-extensions']) {\n\t\t\t\tcmdLine.push('--update-extensions');\n\t\t\t}\n\n\t\t\tconst childProcess = cp.fork(FileAccess.asFileUri('server-main').fsPath, cmdLine, { stdio: 'inherit' });\n\t\t\tchildProcess.on('error', err => console.log(err));\n\t\t\treturn;\n\t\t}\n\n\t\tconst newCommandline: string[] = [];\n\t\tfor (const key in parsedArgs) {\n\t\t\tconst val = parsedArgs[key as keyof typeof parsedArgs];\n\t\t\tif (typeof val === 'boolean') {\n\t\t\t\tif (val) {\n\t\t\t\t\tnewCommandline.push('--' + key);\n\t\t\t\t}\n\t\t\t} else if (Array.isArray(val)) {\n\t\t\t\tfor (const entry of val) {\n\t\t\t\t\tnewCommandline.push(`--${key}=${entry.toString()}`);\n\t\t\t\t}\n\t\t\t} else if (val) {\n\t\t\t\tnewCommandline.push(`--${key}=${val.toString()}`);\n\t\t\t}\n\t\t}\n\t\tif (remote !== null) {\n\t\t\tnewCommandline.push(`--remote=${remote || cliRemoteAuthority}`);\n\t\t}\n\n\t\tconst ext = extname(cliCommand);\n\t\tif (ext === '.bat' || ext === '.cmd') {\n\t\t\tconst processCwd = cliCommandCwd || cwd();\n\t\t\tif (verbose) {\n\t\t\t\tconsole.log(`Invoking: cmd.exe /C ${cliCommand} ${newCommandline.join(' ')} in ${processCwd}`);\n\t\t\t}\n\t\t\tcp.spawn('cmd.exe', ['/C', cliCommand, ...newCommandline], {\n\t\t\t\tstdio: 'inherit',\n\t\t\t\tcwd: processCwd\n\t\t\t});\n\t\t} else {\n\t\t\tconst cliCwd = dirname(cliCommand);\n\t\t\tconst env = { ...process.env, ELECTRON_RUN_AS_NODE: '1' };\n\t\t\tnewCommandline.unshift('resources/app/out/cli.js');\n\t\t\tif (verbose) {\n\t\t\t\tconsole.log(`Invoking: cd \"${cliCwd}\" && ELECTRON_RUN_AS_NODE=1 \"${cliCommand}\" \"${newCommandline.join('\" \"')}\"`);\n\t\t\t}\n\t\t\tif (runningInWSL2()) {\n\t\t\t\tif (verbose) {\n\t\t\t\t\tconsole.log(`Using pipes for output.`);\n\t\t\t\t}\n\t\t\t\tconst childProcess = cp.spawn(cliCommand, newCommandline, { cwd: cliCwd, env, stdio: ['inherit', 'pipe', 'pipe'] });\n\t\t\t\tchildProcess.stdout.on('data', data => process.stdout.write(data));\n\t\t\t\tchildProcess.stderr.on('data', data => process.stderr.write(data));\n\t\t\t} else {\n\t\t\t\tcp.spawn(cliCommand, newCommandline, { cwd: cliCwd, env, stdio: 'inherit' });\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (parsedArgs.status) {\n\t\t\tawait sendToPipe({\n\t\t\t\ttype: 'status'\n\t\t\t}, verbose).then((res: string) => {\n\t\t\t\tconsole.log(res);\n\t\t\t}).catch(e => {\n\t\t\t\tconsole.error('Error when requesting status:', e);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tif (parsedArgs['install-extension'] !== undefined || parsedArgs['uninstall-extension'] !== undefined || parsedArgs['list-extensions'] || parsedArgs['update-extensions']) {\n\t\t\tawait sendToPipe({\n\t\t\t\ttype: 'extensionManagement',\n\t\t\t\tlist: parsedArgs['list-extensions'] ? { showVersions: parsedArgs['show-versions'], category: parsedArgs['category'] } : undefined,\n\t\t\t\tinstall: asExtensionIdOrVSIX(parsedArgs['install-extension']),\n\t\t\t\tuninstall: asExtensionIdOrVSIX(parsedArgs['uninstall-extension']),\n\t\t\t\tforce: parsedArgs['force']\n\t\t\t}, verbose).then((res: string) => {\n\t\t\t\tconsole.log(res);\n\t\t\t}).catch(e => {\n\t\t\t\tconsole.error('Error when invoking the extension management command:', e);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tlet waitMarkerFilePath: string | undefined = undefined;\n\t\tif (parsedArgs['wait']) {\n\t\t\tif (!fileURIs.length) {\n\t\t\t\tconsole.log('At least one file must be provided to wait for.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\twaitMarkerFilePath = createWaitMarkerFileSync(verbose);\n\t\t}\n\n\t\tawait sendToPipe({\n\t\t\ttype: 'open',\n\t\t\tfileURIs,\n\t\t\tfolderURIs,\n\t\t\tdiffMode: parsedArgs.diff,\n\t\t\tmergeMode: parsedArgs.merge,\n\t\t\taddMode: parsedArgs.add,\n\t\t\tremoveMode: parsedArgs.remove,\n\t\t\tgotoLineMode: parsedArgs.goto,\n\t\t\tforceReuseWindow: parsedArgs['reuse-window'],\n\t\t\tforceNewWindow: parsedArgs['new-window'],\n\t\t\twaitMarkerFilePath,\n\t\t\tremoteAuthority: remote\n\t\t}, verbose).catch(e => {\n\t\t\tconsole.error('Error when invoking the open command:', e);\n\t\t});\n\n\t\tif (waitMarkerFilePath) {\n\t\t\tawait waitForFileDeleted(waitMarkerFilePath);\n\t\t}\n\n\t\tif (readFromStdinPromise) {\n\t\t\tawait readFromStdinPromise;\n\n\t\t}\n\n\t\tif (waitMarkerFilePath && stdinFilePath) {\n\t\t\ttry {\n\t\t\t\tfs.unlinkSync(stdinFilePath);\n\t\t\t} catch (e) {\n\t\t\t\t//ignore\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nfunction runningInWSL2(): boolean {\n\tif (!!process.env['WSL_DISTRO_NAME']) {\n\t\ttry {\n\t\t\treturn cp.execSync('uname -r', { encoding: 'utf8' }).includes('-microsoft-');\n\t\t} catch (_e) {\n\t\t\t// Ignore\n\t\t}\n\t}\n\treturn false;\n}\n\nasync function waitForFileDeleted(path: string) {\n\twhile (fs.existsSync(path)) {\n\t\tawait new Promise(res => setTimeout(res, 1000));\n\t}\n}\n\nasync function openInBrowser(args: string[], verbose: boolean) {\n\tconst uris: string[] = [];\n\tfor (const location of args) {\n\t\ttry {\n\t\t\tif (/^[a-z-]+:\\/\\/.+/.test(location)) {\n\t\t\t\turis.push(url.parse(location).href);\n\t\t\t} else {\n\t\t\t\turis.push(pathToURI(location).href);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log(`Invalid url: ${location}`);\n\t\t}\n\t}\n\tif (uris.length) {\n\t\tawait sendToPipe({\n\t\t\ttype: 'openExternal',\n\t\t\turis\n\t\t}, verbose).catch(e => {\n\t\t\tconsole.error('Error when invoking the open external command:', e);\n\t\t});\n\t}\n}\n\nfunction sendToPipe(args: PipeCommand, verbose: boolean): Promise<string> {\n\tif (verbose) {\n\t\tconsole.log(JSON.stringify(args, null, '  '));\n\t}\n\treturn new Promise<string>((resolve, reject) => {\n\t\tconst message = JSON.stringify(args);\n\t\tif (!cliPipe) {\n\t\t\tconsole.log('Message ' + message);\n\t\t\tresolve('');\n\t\t\treturn;\n\t\t}\n\n\t\tconst opts: http.RequestOptions = {\n\t\t\tsocketPath: cliPipe,\n\t\t\tpath: '/',\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/json',\n\t\t\t\t'accept': 'application/json'\n\t\t\t}\n\t\t};\n\n\t\tconst req = http.request(opts, res => {\n\t\t\tif (res.headers['content-type'] !== 'application/json') {\n\t\t\t\treject('Error in response: Invalid content type: Expected \\'application/json\\', is: ' + res.headers['content-type']);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst chunks: string[] = [];\n\t\t\tres.setEncoding('utf8');\n\t\t\tres.on('data', chunk => {\n\t\t\t\tchunks.push(chunk);\n\t\t\t});\n\t\t\tres.on('error', (err) => fatal('Error in response.', err));\n\t\t\tres.on('end', () => {\n\t\t\t\tconst content = chunks.join('');\n\t\t\t\ttry {\n\t\t\t\t\tconst obj = JSON.parse(content);\n\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\tresolve(obj);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(obj);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\treject('Error in response: Unable to parse response as JSON: ' + content);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treq.on('error', (err) => fatal('Error in request.', err));\n\t\treq.write(message);\n\t\treq.end();\n\t});\n}\n\nfunction asExtensionIdOrVSIX(inputs: string[] | undefined) {\n\treturn inputs?.map(input => /\\.vsix$/i.test(input) ? pathToURI(input).href : input);\n}\n\nfunction fatal(message: string, err: unknown): void {\n\tconsole.error('Unable to connect to VS Code server: ' + message);\n\tconsole.error(err);\n\tprocess.exit(1);\n}\n\nconst preferredCwd = process.env.PWD || cwd(); // prefer process.env.PWD as it does not follow symlinks\n\nfunction pathToURI(input: string): url.URL {\n\tinput = input.trim();\n\tinput = resolve(preferredCwd, input);\n\n\treturn url.pathToFileURL(input);\n}\n\nfunction translatePath(input: string, mapFileUri: (input: string) => string, folderURIS: string[], fileURIS: string[]) {\n\tconst url = pathToURI(input);\n\tconst mappedUri = mapFileUri(url.href);\n\ttry {\n\t\tconst stat = fs.lstatSync(fs.realpathSync(input));\n\n\t\tif (stat.isFile()) {\n\t\t\tfileURIS.push(mappedUri);\n\t\t} else if (stat.isDirectory()) {\n\t\t\tfolderURIS.push(mappedUri);\n\t\t} else if (input === '/dev/null') {\n\t\t\t// handle /dev/null passed to us by external tools such as `git difftool`\n\t\t\tfileURIS.push(mappedUri);\n\t\t}\n\t} catch (e) {\n\t\tif (e.code === 'ENOENT') {\n\t\t\tfileURIS.push(mappedUri);\n\t\t} else {\n\t\t\tconsole.log(`Problem accessing file ${input}. Ignoring file`, e);\n\t\t}\n\t}\n}\n\nfunction mapFileToRemoteUri(uri: string): string {\n\treturn uri.replace(/^file:\\/\\//, 'vscode-remote://' + cliRemoteAuthority);\n}\n\nfunction getAppRoot() {\n\treturn dirname(FileAccess.asFileUri('').fsPath);\n}\n\nconst [, , productName, version, commit, executableName, ...remainingArgs] = process.argv;\nmain({ productName, version, commit, executableName }, remainingArgs).then(null, err => {\n\tconsole.error(err.message || err.stack || err);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport * as url from 'url';\nimport * as cp from 'child_process';\nimport * as http from 'http';\nimport { cwd } from '../../base/common/process.js';\nimport { dirname, extname, resolve, join } from '../../base/common/path.js';\nimport { parseArgs, buildHelpMessage, buildVersionMessage, OPTIONS, OptionDescriptions, ErrorReporter } from '../../platform/environment/node/argv.js';\nimport { NativeParsedArgs } from '../../platform/environment/common/argv.js';\nimport { createWaitMarkerFileSync } from '../../platform/environment/node/wait.js';\nimport { PipeCommand } from '../../workbench/api/node/extHostCLIServer.js';\nimport { hasStdinWithoutTty, getStdinFilePath, readFromStdin } from '../../platform/environment/node/stdin.js';\nimport { DeferredPromise } from '../../base/common/async.js';\nimport { FileAccess } from '../../base/common/network.js';\n\n/*\n * Implements a standalone CLI app that opens VS Code from a remote terminal.\n *  - In integrated terminals for remote windows this connects to the remote server though a pipe.\n *    The pipe is passed in env VSCODE_IPC_HOOK_CLI.\n *  - In external terminals for WSL this calls VS Code on the Windows side.\n *    The VS Code desktop executable path is passed in env VSCODE_CLIENT_COMMAND.\n */\n\n\ninterface ProductDescription {\n\tproductName: string;\n\tversion: string;\n\tcommit: string;\n\texecutableName: string;\n}\n\ninterface RemoteParsedArgs extends NativeParsedArgs { 'gitCredential'?: string; 'openExternal'?: boolean }\n\n\nconst isSupportedForCmd = (optionId: keyof RemoteParsedArgs) => {\n\tswitch (optionId) {\n\t\tcase 'user-data-dir':\n\t\tcase 'extensions-dir':\n\t\tcase 'export-default-configuration':\n\t\tcase 'install-source':\n\t\tcase 'enable-smoke-test-driver':\n\t\tcase 'extensions-download-dir':\n\t\tcase 'builtin-extensions-dir':\n\t\tcase 'telemetry':\n\t\t\treturn false;\n\t\tdefault:\n\t\t\treturn true;\n\t}\n};\n\nconst isSupportedForPipe = (optionId: keyof RemoteParsedArgs) => {\n\tswitch (optionId) {\n\t\tcase 'version':\n\t\tcase 'help':\n\t\tcase 'folder-uri':\n\t\tcase 'file-uri':\n\t\tcase 'add':\n\t\tcase 'diff':\n\t\tcase 'merge':\n\t\tcase 'wait':\n\t\tcase 'goto':\n\t\tcase 'reuse-window':\n\t\tcase 'new-window':\n\t\tcase 'status':\n\t\tcase 'install-extension':\n\t\tcase 'uninstall-extension':\n\t\tcase 'update-extensions':\n\t\tcase 'list-extensions':\n\t\tcase 'force':\n\t\tcase 'do-not-include-pack-dependencies':\n\t\tcase 'show-versions':\n\t\tcase 'category':\n\t\tcase 'verbose':\n\t\tcase 'remote':\n\t\tcase 'locate-shell-integration-path':\n\t\t\treturn true;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n};\n\nconst cliPipe = process.env['VSCODE_IPC_HOOK_CLI'] as string;\nconst cliCommand = process.env['VSCODE_CLIENT_COMMAND'] as string;\nconst cliCommandCwd = process.env['VSCODE_CLIENT_COMMAND_CWD'] as string;\nconst cliRemoteAuthority = process.env['VSCODE_CLI_AUTHORITY'] as string;\nconst cliStdInFilePath = process.env['VSCODE_STDIN_FILE_PATH'] as string;\n\nexport async function main(desc: ProductDescription, args: string[]): Promise<void> {\n\tif (!cliPipe && !cliCommand) {\n\t\tconsole.log('Command is only available in WSL or inside a Visual Studio Code terminal.');\n\t\treturn;\n\t}\n\n\t// take the local options and remove the ones that don't apply\n\tconst options: OptionDescriptions<Required<RemoteParsedArgs>> = { ...OPTIONS, gitCredential: { type: 'string' }, openExternal: { type: 'boolean' } };\n\tconst isSupported = cliCommand ? isSupportedForCmd : isSupportedForPipe;\n\tfor (const optionId in OPTIONS) {\n\t\tconst optId = <keyof RemoteParsedArgs>optionId;\n\t\tif (!isSupported(optId)) {\n\t\t\tdelete options[optId];\n\t\t}\n\t}\n\n\tif (cliPipe) {\n\t\toptions['openExternal'] = { type: 'boolean' };\n\t}\n\n\tconst errorReporter: ErrorReporter = {\n\t\tonMultipleValues: (id: string, usedValue: string) => {\n\t\t\tconsole.error(`Option '${id}' can only be defined once. Using value ${usedValue}.`);\n\t\t},\n\t\tonEmptyValue: (id) => {\n\t\t\tconsole.error(`Ignoring option '${id}': Value must not be empty.`);\n\t\t},\n\t\tonUnknownOption: (id: string) => {\n\t\t\tconsole.error(`Ignoring option '${id}': not supported for ${desc.executableName}.`);\n\t\t},\n\t\tonDeprecatedOption: (deprecatedOption: string, message: string) => {\n\t\t\tconsole.warn(`Option '${deprecatedOption}' is deprecated: ${message}`);\n\t\t}\n\t};\n\n\tconst parsedArgs = parseArgs(args, options, errorReporter);\n\tconst mapFileUri = cliRemoteAuthority ? mapFileToRemoteUri : (uri: string) => uri;\n\n\tconst verbose = !!parsedArgs['verbose'];\n\n\tif (parsedArgs.help) {\n\t\tconsole.log(buildHelpMessage(desc.productName, desc.executableName, desc.version, options));\n\t\treturn;\n\t}\n\tif (parsedArgs.version) {\n\t\tconsole.log(buildVersionMessage(desc.version, desc.commit));\n\t\treturn;\n\t}\n\tif (parsedArgs['locate-shell-integration-path']) {\n\t\tlet file: string;\n\t\tswitch (parsedArgs['locate-shell-integration-path']) {\n\t\t\t// Usage: `[[ \"$TERM_PROGRAM\" == \"vscode\" ]] && . \"$(code --locate-shell-integration-path bash)\"`\n\t\t\tcase 'bash': file = 'shellIntegration-bash.sh'; break;\n\t\t\t// Usage: `if ($env:TERM_PROGRAM -eq \"vscode\") { . \"$(code --locate-shell-integration-path pwsh)\" }`\n\t\t\tcase 'pwsh': file = 'shellIntegration.ps1'; break;\n\t\t\t// Usage: `[[ \"$TERM_PROGRAM\" == \"vscode\" ]] && . \"$(code --locate-shell-integration-path zsh)\"`\n\t\t\tcase 'zsh': file = 'shellIntegration-rc.zsh'; break;\n\t\t\t// Usage: `string match -q \"$TERM_PROGRAM\" \"vscode\"; and . (code --locate-shell-integration-path fish)`\n\t\t\tcase 'fish': file = 'shellIntegration.fish'; break;\n\t\t\tdefault: throw new Error('Error using --locate-shell-integration-path: Invalid shell type');\n\t\t}\n\t\tconsole.log(join(getAppRoot(), 'out', 'vs', 'workbench', 'contrib', 'terminal', 'common', 'scripts', file));\n\t\treturn;\n\t}\n\tif (cliPipe) {\n\t\tif (parsedArgs['openExternal']) {\n\t\t\tawait openInBrowser(parsedArgs['_'], verbose);\n\t\t\treturn;\n\t\t}\n\t}\n\n\tlet remote: string | null | undefined = parsedArgs.remote;\n\tif (remote === 'local' || remote === 'false' || remote === '') {\n\t\tremote = null; // null represent a local window\n\t}\n\n\tconst folderURIs = (parsedArgs['folder-uri'] || []).map(mapFileUri);\n\tparsedArgs['folder-uri'] = folderURIs;\n\n\tconst fileURIs = (parsedArgs['file-uri'] || []).map(mapFileUri);\n\tparsedArgs['file-uri'] = fileURIs;\n\n\tconst inputPaths = parsedArgs['_'];\n\tlet hasReadStdinArg = false;\n\tfor (const input of inputPaths) {\n\t\tif (input === '-') {\n\t\t\thasReadStdinArg = true;\n\t\t} else {\n\t\t\ttranslatePath(input, mapFileUri, folderURIs, fileURIs);\n\t\t}\n\t}\n\n\tparsedArgs['_'] = [];\n\n\tlet readFromStdinPromise: Promise<void> | undefined;\n\tlet stdinFilePath: string | undefined;\n\n\tif (hasReadStdinArg && hasStdinWithoutTty()) {\n\t\ttry {\n\t\t\tstdinFilePath = cliStdInFilePath;\n\t\t\tif (!stdinFilePath) {\n\t\t\t\tstdinFilePath = getStdinFilePath();\n\t\t\t\tconst readFromStdinDone = new DeferredPromise<void>();\n\t\t\t\tawait readFromStdin(stdinFilePath, verbose, () => readFromStdinDone.complete()); // throws error if file can not be written\n\t\t\t\tif (!parsedArgs.wait) {\n\t\t\t\t\t// if `--wait` is not provided, we keep this process alive\n\t\t\t\t\t// for at least as long as the stdin stream is open to\n\t\t\t\t\t// ensure that we read all the data.\n\t\t\t\t\treadFromStdinPromise = readFromStdinDone.p;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Make sure to open tmp file\n\t\t\ttranslatePath(stdinFilePath, mapFileUri, folderURIs, fileURIs);\n\n\t\t\t// Ignore adding this to history\n\t\t\tparsedArgs['skip-add-to-recently-opened'] = true;\n\n\t\t\tconsole.log(`Reading from stdin via: ${stdinFilePath}`);\n\t\t} catch (e) {\n\t\t\tconsole.log(`Failed to create file to read via stdin: ${e.toString()}`);\n\t\t}\n\t}\n\n\tif (parsedArgs.extensionDevelopmentPath) {\n\t\tparsedArgs.extensionDevelopmentPath = parsedArgs.extensionDevelopmentPath.map(p => mapFileUri(pathToURI(p).href));\n\t}\n\n\tif (parsedArgs.extensionTestsPath) {\n\t\tparsedArgs.extensionTestsPath = mapFileUri(pathToURI(parsedArgs['extensionTestsPath']).href);\n\t}\n\n\tconst crashReporterDirectory = parsedArgs['crash-reporter-directory'];\n\tif (crashReporterDirectory !== undefined && !crashReporterDirectory.match(/^([a-zA-Z]:[\\\\\\/])/)) {\n\t\tconsole.log(`The crash reporter directory '${crashReporterDirectory}' must be an absolute Windows path (e.g. c:/crashes)`);\n\t\treturn;\n\t}\n\n\tif (cliCommand) {\n\t\tif (parsedArgs['install-extension'] !== undefined || parsedArgs['uninstall-extension'] !== undefined || parsedArgs['list-extensions'] || parsedArgs['update-extensions']) {\n\t\t\tconst cmdLine: string[] = [];\n\t\t\tparsedArgs['install-extension']?.forEach(id => cmdLine.push('--install-extension', id));\n\t\t\tparsedArgs['uninstall-extension']?.forEach(id => cmdLine.push('--uninstall-extension', id));\n\t\t\t['list-extensions', 'force', 'show-versions', 'category'].forEach(opt => {\n\t\t\t\tconst value = parsedArgs[<keyof NativeParsedArgs>opt];\n\t\t\t\tif (value !== undefined) {\n\t\t\t\t\tcmdLine.push(`--${opt}=${value}`);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (parsedArgs['update-extensions']) {\n\t\t\t\tcmdLine.push('--update-extensions');\n\t\t\t}\n\n\t\t\tconst childProcess = cp.fork(FileAccess.asFileUri('server-main').fsPath, cmdLine, { stdio: 'inherit' });\n\t\t\tchildProcess.on('error', err => console.log(err));\n\t\t\treturn;\n\t\t}\n\n\t\tconst newCommandline: string[] = [];\n\t\tfor (const key in parsedArgs) {\n\t\t\tconst val = parsedArgs[key as keyof typeof parsedArgs];\n\t\t\tif (typeof val === 'boolean') {\n\t\t\t\tif (val) {\n\t\t\t\t\tnewCommandline.push('--' + key);\n\t\t\t\t}\n\t\t\t} else if (Array.isArray(val)) {\n\t\t\t\tfor (const entry of val) {\n\t\t\t\t\tnewCommandline.push(`--${key}=${entry.toString()}`);\n\t\t\t\t}\n\t\t\t} else if (val) {\n\t\t\t\tnewCommandline.push(`--${key}=${val.toString()}`);\n\t\t\t}\n\t\t}\n\t\tif (remote !== null) {\n\t\t\tnewCommandline.push(`--remote=${remote || cliRemoteAuthority}`);\n\t\t}\n\n\t\tconst ext = extname(cliCommand);\n\t\tif (ext === '.bat' || ext === '.cmd') {\n\t\t\tconst processCwd = cliCommandCwd || cwd();\n\t\t\tif (verbose) {\n\t\t\t\tconsole.log(`Invoking: cmd.exe /C ${cliCommand} ${newCommandline.join(' ')} in ${processCwd}`);\n\t\t\t}\n\t\t\tcp.spawn('cmd.exe', ['/C', cliCommand, ...newCommandline], {\n\t\t\t\tstdio: 'inherit',\n\t\t\t\tcwd: processCwd\n\t\t\t});\n\t\t} else {\n\t\t\tconst cliCwd = dirname(cliCommand);\n\t\t\tconst env = { ...process.env, ELECTRON_RUN_AS_NODE: '1' };\n\t\t\tnewCommandline.unshift('resources/app/out/cli.js');\n\t\t\tif (verbose) {\n\t\t\t\tconsole.log(`Invoking: cd \"${cliCwd}\" && ELECTRON_RUN_AS_NODE=1 \"${cliCommand}\" \"${newCommandline.join('\" \"')}\"`);\n\t\t\t}\n\t\t\tif (runningInWSL2()) {\n\t\t\t\tif (verbose) {\n\t\t\t\t\tconsole.log(`Using pipes for output.`);\n\t\t\t\t}\n\t\t\t\tconst childProcess = cp.spawn(cliCommand, newCommandline, { cwd: cliCwd, env, stdio: ['inherit', 'pipe', 'pipe'] });\n\t\t\t\tchildProcess.stdout.on('data', data => process.stdout.write(data));\n\t\t\t\tchildProcess.stderr.on('data', data => process.stderr.write(data));\n\t\t\t} else {\n\t\t\t\tcp.spawn(cliCommand, newCommandline, { cwd: cliCwd, env, stdio: 'inherit' });\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif (parsedArgs.status) {\n\t\t\tawait sendToPipe({\n\t\t\t\ttype: 'status'\n\t\t\t}, verbose).then((res: string) => {\n\t\t\t\tconsole.log(res);\n\t\t\t}).catch(e => {\n\t\t\t\tconsole.error('Error when requesting status:', e);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tif (parsedArgs['install-extension'] !== undefined || parsedArgs['uninstall-extension'] !== undefined || parsedArgs['list-extensions'] || parsedArgs['update-extensions']) {\n\t\t\tawait sendToPipe({\n\t\t\t\ttype: 'extensionManagement',\n\t\t\t\tlist: parsedArgs['list-extensions'] ? { showVersions: parsedArgs['show-versions'], category: parsedArgs['category'] } : undefined,\n\t\t\t\tinstall: asExtensionIdOrVSIX(parsedArgs['install-extension']),\n\t\t\t\tuninstall: asExtensionIdOrVSIX(parsedArgs['uninstall-extension']),\n\t\t\t\tforce: parsedArgs['force']\n\t\t\t}, verbose).then((res: string) => {\n\t\t\t\tconsole.log(res);\n\t\t\t}).catch(e => {\n\t\t\t\tconsole.error('Error when invoking the extension management command:', e);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tlet waitMarkerFilePath: string | undefined = undefined;\n\t\tif (parsedArgs['wait']) {\n\t\t\tif (!fileURIs.length) {\n\t\t\t\tconsole.log('At least one file must be provided to wait for.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\twaitMarkerFilePath = createWaitMarkerFileSync(verbose);\n\t\t}\n\n\t\tawait sendToPipe({\n\t\t\ttype: 'open',\n\t\t\tfileURIs,\n\t\t\tfolderURIs,\n\t\t\tdiffMode: parsedArgs.diff,\n\t\t\tmergeMode: parsedArgs.merge,\n\t\t\taddMode: parsedArgs.add,\n\t\t\tremoveMode: parsedArgs.remove,\n\t\t\tgotoLineMode: parsedArgs.goto,\n\t\t\tforceReuseWindow: parsedArgs['reuse-window'],\n\t\t\tforceNewWindow: parsedArgs['new-window'],\n\t\t\twaitMarkerFilePath,\n\t\t\tremoteAuthority: remote\n\t\t}, verbose).catch(e => {\n\t\t\tconsole.error('Error when invoking the open command:', e);\n\t\t});\n\n\t\tif (waitMarkerFilePath) {\n\t\t\tawait waitForFileDeleted(waitMarkerFilePath);\n\t\t}\n\n\t\tif (readFromStdinPromise) {\n\t\t\tawait readFromStdinPromise;\n\n\t\t}\n\n\t\tif (waitMarkerFilePath && stdinFilePath) {\n\t\t\ttry {\n\t\t\t\tfs.unlinkSync(stdinFilePath);\n\t\t\t} catch (e) {\n\t\t\t\t//ignore\n\t\t\t}\n\t\t}\n\t}\n\n}\n\nfunction runningInWSL2(): boolean {\n\tif (!!process.env['WSL_DISTRO_NAME']) {\n\t\ttry {\n\t\t\treturn cp.execSync('uname -r', { encoding: 'utf8' }).includes('-microsoft-');\n\t\t} catch (_e) {\n\t\t\t// Ignore\n\t\t}\n\t}\n\treturn false;\n}\n\nasync function waitForFileDeleted(path: string) {\n\twhile (fs.existsSync(path)) {\n\t\tawait new Promise(res => setTimeout(res, 1000));\n\t}\n}\n\nasync function openInBrowser(args: string[], verbose: boolean) {\n\tconst uris: string[] = [];\n\tfor (const location of args) {\n\t\ttry {\n\t\t\tif (/^[a-z-]+:\\/\\/.+/.test(location)) {\n\t\t\t\turis.push(url.parse(location).href);\n\t\t\t} else {\n\t\t\t\turis.push(pathToURI(location).href);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log(`Invalid url: ${location}`);\n\t\t}\n\t}\n\tif (uris.length) {\n\t\tawait sendToPipe({\n\t\t\ttype: 'openExternal',\n\t\t\turis\n\t\t}, verbose).catch(e => {\n\t\t\tconsole.error('Error when invoking the open external command:', e);\n\t\t});\n\t}\n}\n\nfunction sendToPipe(args: PipeCommand, verbose: boolean): Promise<string> {\n\tif (verbose) {\n\t\tconsole.log(JSON.stringify(args, null, '  '));\n\t}\n\treturn new Promise<string>((resolve, reject) => {\n\t\tconst message = JSON.stringify(args);\n\t\tif (!cliPipe) {\n\t\t\tconsole.log('Message ' + message);\n\t\t\tresolve('');\n\t\t\treturn;\n\t\t}\n\n\t\tconst opts: http.RequestOptions = {\n\t\t\tsocketPath: cliPipe,\n\t\t\tpath: '/',\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/json',\n\t\t\t\t'accept': 'application/json'\n\t\t\t}\n\t\t};\n\n\t\tconst req = http.request(opts, res => {\n\t\t\tif (res.headers['content-type'] !== 'application/json') {\n\t\t\t\treject('Error in response: Invalid content type: Expected \\'application/json\\', is: ' + res.headers['content-type']);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst chunks: string[] = [];\n\t\t\tres.setEncoding('utf8');\n\t\t\tres.on('data', chunk => {\n\t\t\t\tchunks.push(chunk);\n\t\t\t});\n\t\t\tres.on('error', (err) => fatal('Error in response.', err));\n\t\t\tres.on('end', () => {\n\t\t\t\tconst content = chunks.join('');\n\t\t\t\ttry {\n\t\t\t\t\tconst obj = JSON.parse(content);\n\t\t\t\t\tif (res.statusCode === 200) {\n\t\t\t\t\t\tresolve(obj);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(obj);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\treject('Error in response: Unable to parse response as JSON: ' + content);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treq.on('error', (err) => fatal('Error in request.', err));\n\t\treq.write(message);\n\t\treq.end();\n\t});\n}\n\nfunction asExtensionIdOrVSIX(inputs: string[] | undefined) {\n\treturn inputs?.map(input => /\\.vsix$/i.test(input) ? pathToURI(input).href : input);\n}\n\nfunction fatal(message: string, err: unknown): void {\n\tconsole.error('Unable to connect to VS Code server: ' + message);\n\tconsole.error(err);\n\tprocess.exit(1);\n}\n\nconst preferredCwd = process.env.PWD || cwd(); // prefer process.env.PWD as it does not follow symlinks\n\nfunction pathToURI(input: string): url.URL {\n\tinput = input.trim();\n\tinput = resolve(preferredCwd, input);\n\n\treturn url.pathToFileURL(input);\n}\n\nfunction translatePath(input: string, mapFileUri: (input: string) => string, folderURIS: string[], fileURIS: string[]) {\n\tconst url = pathToURI(input);\n\tconst mappedUri = mapFileUri(url.href);\n\ttry {\n\t\tconst stat = fs.lstatSync(fs.realpathSync(input));\n\n\t\tif (stat.isFile()) {\n\t\t\tfileURIS.push(mappedUri);\n\t\t} else if (stat.isDirectory()) {\n\t\t\tfolderURIS.push(mappedUri);\n\t\t} else if (input === '/dev/null') {\n\t\t\t// handle /dev/null passed to us by external tools such as `git difftool`\n\t\t\tfileURIS.push(mappedUri);\n\t\t}\n\t} catch (e) {\n\t\tif (e.code === 'ENOENT') {\n\t\t\tfileURIS.push(mappedUri);\n\t\t} else {\n\t\t\tconsole.log(`Problem accessing file ${input}. Ignoring file`, e);\n\t\t}\n\t}\n}\n\nfunction mapFileToRemoteUri(uri: string): string {\n\treturn uri.replace(/^file:\\/\\//, 'vscode-remote://' + cliRemoteAuthority);\n}\n\nfunction getAppRoot() {\n\treturn dirname(FileAccess.asFileUri('').fsPath);\n}\n\nconst [, , productName, version, commit, executableName, ...remainingArgs] = process.argv;\nmain({ productName, version, commit, executableName }, remainingArgs).then(null, err => {\n\tconsole.error(err.message || err.stack || err);\n});\n"]}