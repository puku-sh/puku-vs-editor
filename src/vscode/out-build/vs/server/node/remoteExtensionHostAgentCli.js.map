{"version":3,"sources":["vs/server/node/remoteExtensionHostAgentCli.ts"],"names":[],"mappings":"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","file":"remoteExtensionHostAgentCli.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ServiceCollection } from '../../platform/instantiation/common/serviceCollection.js';\nimport { ConsoleLogger, getLogLevel, ILoggerService, ILogService } from '../../platform/log/common/log.js';\nimport { SyncDescriptor } from '../../platform/instantiation/common/descriptors.js';\nimport { ConfigurationService } from '../../platform/configuration/common/configurationService.js';\nimport { IConfigurationService } from '../../platform/configuration/common/configuration.js';\nimport { IRequestService } from '../../platform/request/common/request.js';\nimport { RequestService } from '../../platform/request/node/requestService.js';\nimport { NullTelemetryService } from '../../platform/telemetry/common/telemetryUtils.js';\nimport { ITelemetryService } from '../../platform/telemetry/common/telemetry.js';\nimport { IAllowedExtensionsService, IExtensionGalleryService, InstallOptions } from '../../platform/extensionManagement/common/extensionManagement.js';\nimport { ExtensionGalleryServiceWithNoStorageService } from '../../platform/extensionManagement/common/extensionGalleryService.js';\nimport { ExtensionManagementService, INativeServerExtensionManagementService } from '../../platform/extensionManagement/node/extensionManagementService.js';\nimport { ExtensionSignatureVerificationService, IExtensionSignatureVerificationService } from '../../platform/extensionManagement/node/extensionSignatureVerificationService.js';\nimport { InstantiationService } from '../../platform/instantiation/common/instantiationService.js';\nimport { IInstantiationService } from '../../platform/instantiation/common/instantiation.js';\nimport product from '../../platform/product/common/product.js';\nimport { Disposable } from '../../base/common/lifecycle.js';\nimport { FileService } from '../../platform/files/common/fileService.js';\nimport { DiskFileSystemProvider } from '../../platform/files/node/diskFileSystemProvider.js';\nimport { Schemas } from '../../base/common/network.js';\nimport { IFileService } from '../../platform/files/common/files.js';\nimport { IProductService } from '../../platform/product/common/productService.js';\nimport { IServerEnvironmentService, ServerEnvironmentService, ServerParsedArgs } from './serverEnvironmentService.js';\nimport { ExtensionManagementCLI } from '../../platform/extensionManagement/common/extensionManagementCLI.js';\nimport { ILanguagePackService } from '../../platform/languagePacks/common/languagePacks.js';\nimport { NativeLanguagePackService } from '../../platform/languagePacks/node/languagePacks.js';\nimport { getErrorMessage } from '../../base/common/errors.js';\nimport { URI } from '../../base/common/uri.js';\nimport { isAbsolute, join } from '../../base/common/path.js';\nimport { cwd } from '../../base/common/process.js';\nimport { DownloadService } from '../../platform/download/common/downloadService.js';\nimport { IDownloadService } from '../../platform/download/common/download.js';\nimport { IUriIdentityService } from '../../platform/uriIdentity/common/uriIdentity.js';\nimport { UriIdentityService } from '../../platform/uriIdentity/common/uriIdentityService.js';\nimport { buildHelpMessage, buildVersionMessage, OptionDescriptions } from '../../platform/environment/node/argv.js';\nimport { isWindows } from '../../base/common/platform.js';\nimport { IExtensionsScannerService } from '../../platform/extensionManagement/common/extensionsScannerService.js';\nimport { ExtensionsScannerService } from './extensionsScannerService.js';\nimport { IUserDataProfilesService } from '../../platform/userDataProfile/common/userDataProfile.js';\nimport { IExtensionsProfileScannerService } from '../../platform/extensionManagement/common/extensionsProfileScannerService.js';\nimport { NullPolicyService } from '../../platform/policy/common/policy.js';\nimport { ServerUserDataProfilesService } from '../../platform/userDataProfile/node/userDataProfile.js';\nimport { ExtensionsProfileScannerService } from '../../platform/extensionManagement/node/extensionsProfileScannerService.js';\nimport { LogService } from '../../platform/log/common/logService.js';\nimport { LoggerService } from '../../platform/log/node/loggerService.js';\nimport { localize } from '../../nls.js';\nimport { addUNCHostToAllowlist, disableUNCAccessRestrictions } from '../../base/node/unc.js';\nimport { AllowedExtensionsService } from '../../platform/extensionManagement/common/allowedExtensionsService.js';\nimport { IExtensionGalleryManifestService } from '../../platform/extensionManagement/common/extensionGalleryManifest.js';\nimport { ExtensionGalleryManifestService } from '../../platform/extensionManagement/common/extensionGalleryManifestService.js';\n\nclass CliMain extends Disposable {\n\n\tconstructor(private readonly args: ServerParsedArgs, private readonly remoteDataFolder: string) {\n\t\tsuper();\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\t\tprocess.once('exit', () => this.dispose()); // Dispose on exit\n\t}\n\n\tasync run(): Promise<void> {\n\t\tconst instantiationService = await this.initServices();\n\t\tawait instantiationService.invokeFunction(async accessor => {\n\t\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\t\tconst logService = accessor.get(ILogService);\n\n\t\t\t// On Windows, configure the UNC allow list based on settings\n\t\t\tif (isWindows) {\n\t\t\t\tif (configurationService.getValue('security.restrictUNCAccess') === false) {\n\t\t\t\t\tdisableUNCAccessRestrictions();\n\t\t\t\t} else {\n\t\t\t\t\taddUNCHostToAllowlist(configurationService.getValue('security.allowedUNCHosts'));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tawait this.doRun(instantiationService.createInstance(ExtensionManagementCLI, new ConsoleLogger(logService.getLevel(), false)));\n\t\t\t} catch (error) {\n\t\t\t\tlogService.error(error);\n\t\t\t\tconsole.error(getErrorMessage(error));\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async initServices(): Promise<IInstantiationService> {\n\t\tconst services = new ServiceCollection();\n\n\t\tconst productService = { _serviceBrand: undefined, ...product };\n\t\tservices.set(IProductService, productService);\n\n\t\tconst environmentService = new ServerEnvironmentService(this.args, productService);\n\t\tservices.set(IServerEnvironmentService, environmentService);\n\n\t\tconst loggerService = new LoggerService(getLogLevel(environmentService), environmentService.logsHome);\n\t\tservices.set(ILoggerService, loggerService);\n\n\t\tconst logService = new LogService(this._register(loggerService.createLogger('remoteCLI', { name: localize('remotecli', \"Remote CLI\") })));\n\t\tservices.set(ILogService, logService);\n\t\tlogService.trace(`Remote configuration data at ${this.remoteDataFolder}`);\n\t\tlogService.trace('process arguments:', this.args);\n\n\t\t// Files\n\t\tconst fileService = this._register(new FileService(logService));\n\t\tservices.set(IFileService, fileService);\n\t\tfileService.registerProvider(Schemas.file, this._register(new DiskFileSystemProvider(logService)));\n\n\t\tconst uriIdentityService = new UriIdentityService(fileService);\n\t\tservices.set(IUriIdentityService, uriIdentityService);\n\n\t\t// User Data Profiles\n\t\tconst userDataProfilesService = this._register(new ServerUserDataProfilesService(uriIdentityService, environmentService, fileService, logService));\n\t\tservices.set(IUserDataProfilesService, userDataProfilesService);\n\n\t\t// Configuration\n\t\tconst configurationService = this._register(new ConfigurationService(userDataProfilesService.defaultProfile.settingsResource, fileService, new NullPolicyService(), logService));\n\t\tservices.set(IConfigurationService, configurationService);\n\n\t\t// Initialize\n\t\tawait Promise.all([\n\t\t\tconfigurationService.initialize(),\n\t\t\tuserDataProfilesService.init()\n\t\t]);\n\n\t\tservices.set(IRequestService, new SyncDescriptor(RequestService, ['remote']));\n\t\tservices.set(IDownloadService, new SyncDescriptor(DownloadService));\n\t\tservices.set(ITelemetryService, NullTelemetryService);\n\t\tservices.set(IExtensionGalleryManifestService, new SyncDescriptor(ExtensionGalleryManifestService));\n\t\tservices.set(IExtensionGalleryService, new SyncDescriptor(ExtensionGalleryServiceWithNoStorageService));\n\t\tservices.set(IExtensionsProfileScannerService, new SyncDescriptor(ExtensionsProfileScannerService));\n\t\tservices.set(IExtensionsScannerService, new SyncDescriptor(ExtensionsScannerService));\n\t\tservices.set(IExtensionSignatureVerificationService, new SyncDescriptor(ExtensionSignatureVerificationService));\n\t\tservices.set(IAllowedExtensionsService, new SyncDescriptor(AllowedExtensionsService));\n\t\tservices.set(INativeServerExtensionManagementService, new SyncDescriptor(ExtensionManagementService));\n\t\tservices.set(ILanguagePackService, new SyncDescriptor(NativeLanguagePackService));\n\n\t\treturn new InstantiationService(services);\n\t}\n\n\tprivate async doRun(extensionManagementCLI: ExtensionManagementCLI): Promise<void> {\n\n\t\t// List Extensions\n\t\tif (this.args['list-extensions']) {\n\t\t\treturn extensionManagementCLI.listExtensions(!!this.args['show-versions'], this.args['category']);\n\t\t}\n\n\t\t// Install Extension\n\t\telse if (this.args['install-extension'] || this.args['install-builtin-extension']) {\n\t\t\tconst installOptions: InstallOptions = { isMachineScoped: !!this.args['do-not-sync'], installPreReleaseVersion: !!this.args['pre-release'], donotIncludePackAndDependencies: !!this.args['do-not-include-pack-dependencies'] };\n\t\t\treturn extensionManagementCLI.installExtensions(this.asExtensionIdOrVSIX(this.args['install-extension'] || []), this.asExtensionIdOrVSIX(this.args['install-builtin-extension'] || []), installOptions, !!this.args['force']);\n\t\t}\n\n\t\t// Uninstall Extension\n\t\telse if (this.args['uninstall-extension']) {\n\t\t\treturn extensionManagementCLI.uninstallExtensions(this.asExtensionIdOrVSIX(this.args['uninstall-extension']), !!this.args['force']);\n\t\t}\n\n\t\t// Update the installed extensions\n\t\telse if (this.args['update-extensions']) {\n\t\t\treturn extensionManagementCLI.updateExtensions();\n\t\t}\n\n\t\t// Locate Extension\n\t\telse if (this.args['locate-extension']) {\n\t\t\treturn extensionManagementCLI.locateExtension(this.args['locate-extension']);\n\t\t}\n\t}\n\n\tprivate asExtensionIdOrVSIX(inputs: string[]): (string | URI)[] {\n\t\treturn inputs.map(input => /\\.vsix$/i.test(input) ? URI.file(isAbsolute(input) ? input : join(cwd(), input)) : input);\n\t}\n}\n\nfunction eventuallyExit(code: number): void {\n\tsetTimeout(() => process.exit(code), 0);\n}\n\nexport async function run(args: ServerParsedArgs, REMOTE_DATA_FOLDER: string, optionDescriptions: OptionDescriptions<ServerParsedArgs>): Promise<void> {\n\tif (args.help) {\n\t\tconst executable = product.serverApplicationName + (isWindows ? '.cmd' : '');\n\t\tconsole.log(buildHelpMessage(product.nameLong, executable, product.version, optionDescriptions, { noInputFiles: true, noPipe: true }));\n\t\treturn;\n\t}\n\n\t// Version Info\n\tif (args.version) {\n\t\tconsole.log(buildVersionMessage(product.version, product.commit));\n\t\treturn;\n\t}\n\n\tconst cliMain = new CliMain(args, REMOTE_DATA_FOLDER);\n\ttry {\n\t\tawait cliMain.run();\n\t\teventuallyExit(0);\n\t} catch (err) {\n\t\teventuallyExit(1);\n\t} finally {\n\t\tcliMain.dispose();\n\t}\n}\n"]}