{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/server/test/node/serverConnectionToken.test.ts","vs/server/test/node/serverConnectionToken.test.ts"],"names":[],"mappings":"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","file":"serverConnectionToken.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as fs from 'fs';\nimport * as os from 'os';\nimport { join } from '../../../base/common/path.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../base/test/common/utils.js';\nimport { getRandomTestPath } from '../../../base/test/node/testUtils.js';\nimport { parseServerConnectionToken, ServerConnectionToken, ServerConnectionTokenParseError, ServerConnectionTokenType } from '../../node/serverConnectionToken.js';\nimport { ServerParsedArgs } from '../../node/serverEnvironmentService.js';\n\nsuite('parseServerConnectionToken', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction isError(r: ServerConnectionToken | ServerConnectionTokenParseError): r is ServerConnectionTokenParseError {\n\t\treturn (r instanceof ServerConnectionTokenParseError);\n\t}\n\n\tfunction assertIsError(r: ServerConnectionToken | ServerConnectionTokenParseError): void {\n\t\tassert.strictEqual(isError(r), true);\n\t}\n\n\ttest('no arguments generates a token that is mandatory', async () => {\n\t\tconst result = await parseServerConnectionToken({} as ServerParsedArgs, async () => 'defaultTokenValue');\n\t\tassert.ok(!(result instanceof ServerConnectionTokenParseError));\n\t\tassert.ok(result.type === ServerConnectionTokenType.Mandatory);\n\t});\n\n\ttest('--without-connection-token', async () => {\n\t\tconst result = await parseServerConnectionToken({ 'without-connection-token': true } as ServerParsedArgs, async () => 'defaultTokenValue');\n\t\tassert.ok(!(result instanceof ServerConnectionTokenParseError));\n\t\tassert.ok(result.type === ServerConnectionTokenType.None);\n\t});\n\n\ttest('--without-connection-token --connection-token results in error', async () => {\n\t\tassertIsError(await parseServerConnectionToken({ 'without-connection-token': true, 'connection-token': '0' } as ServerParsedArgs, async () => 'defaultTokenValue'));\n\t});\n\n\ttest('--without-connection-token --connection-token-file results in error', async () => {\n\t\tassertIsError(await parseServerConnectionToken({ 'without-connection-token': true, 'connection-token-file': '0' } as ServerParsedArgs, async () => 'defaultTokenValue'));\n\t});\n\n\ttest('--connection-token-file --connection-token results in error', async () => {\n\t\tassertIsError(await parseServerConnectionToken({ 'connection-token-file': '0', 'connection-token': '0' } as ServerParsedArgs, async () => 'defaultTokenValue'));\n\t});\n\n\ttest('--connection-token-file', async function () {\n\t\tthis.timeout(10000);\n\t\tconst testDir = getRandomTestPath(os.tmpdir(), 'vsctests', 'server-connection-token');\n\t\tfs.mkdirSync(testDir, { recursive: true });\n\t\tconst filename = join(testDir, 'connection-token-file');\n\t\tconst connectionToken = `12345-123-abc`;\n\t\tfs.writeFileSync(filename, connectionToken);\n\t\tconst result = await parseServerConnectionToken({ 'connection-token-file': filename } as ServerParsedArgs, async () => 'defaultTokenValue');\n\t\tassert.ok(!(result instanceof ServerConnectionTokenParseError));\n\t\tassert.ok(result.type === ServerConnectionTokenType.Mandatory);\n\t\tassert.strictEqual(result.value, connectionToken);\n\t\tfs.rmSync(testDir, { recursive: true, force: true });\n\t});\n\n\ttest('--connection-token', async () => {\n\t\tconst connectionToken = `12345-123-abc`;\n\t\tconst result = await parseServerConnectionToken({ 'connection-token': connectionToken } as ServerParsedArgs, async () => 'defaultTokenValue');\n\t\tassert.ok(!(result instanceof ServerConnectionTokenParseError));\n\t\tassert.ok(result.type === ServerConnectionTokenType.Mandatory);\n\t\tassert.strictEqual(result.value, connectionToken);\n\t});\n\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as fs from 'fs';\nimport * as os from 'os';\nimport { join } from '../../../base/common/path.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../base/test/common/utils.js';\nimport { getRandomTestPath } from '../../../base/test/node/testUtils.js';\nimport { parseServerConnectionToken, ServerConnectionToken, ServerConnectionTokenParseError, ServerConnectionTokenType } from '../../node/serverConnectionToken.js';\nimport { ServerParsedArgs } from '../../node/serverEnvironmentService.js';\n\nsuite('parseServerConnectionToken', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction isError(r: ServerConnectionToken | ServerConnectionTokenParseError): r is ServerConnectionTokenParseError {\n\t\treturn (r instanceof ServerConnectionTokenParseError);\n\t}\n\n\tfunction assertIsError(r: ServerConnectionToken | ServerConnectionTokenParseError): void {\n\t\tassert.strictEqual(isError(r), true);\n\t}\n\n\ttest('no arguments generates a token that is mandatory', async () => {\n\t\tconst result = await parseServerConnectionToken({} as ServerParsedArgs, async () => 'defaultTokenValue');\n\t\tassert.ok(!(result instanceof ServerConnectionTokenParseError));\n\t\tassert.ok(result.type === ServerConnectionTokenType.Mandatory);\n\t});\n\n\ttest('--without-connection-token', async () => {\n\t\tconst result = await parseServerConnectionToken({ 'without-connection-token': true } as ServerParsedArgs, async () => 'defaultTokenValue');\n\t\tassert.ok(!(result instanceof ServerConnectionTokenParseError));\n\t\tassert.ok(result.type === ServerConnectionTokenType.None);\n\t});\n\n\ttest('--without-connection-token --connection-token results in error', async () => {\n\t\tassertIsError(await parseServerConnectionToken({ 'without-connection-token': true, 'connection-token': '0' } as ServerParsedArgs, async () => 'defaultTokenValue'));\n\t});\n\n\ttest('--without-connection-token --connection-token-file results in error', async () => {\n\t\tassertIsError(await parseServerConnectionToken({ 'without-connection-token': true, 'connection-token-file': '0' } as ServerParsedArgs, async () => 'defaultTokenValue'));\n\t});\n\n\ttest('--connection-token-file --connection-token results in error', async () => {\n\t\tassertIsError(await parseServerConnectionToken({ 'connection-token-file': '0', 'connection-token': '0' } as ServerParsedArgs, async () => 'defaultTokenValue'));\n\t});\n\n\ttest('--connection-token-file', async function () {\n\t\tthis.timeout(10000);\n\t\tconst testDir = getRandomTestPath(os.tmpdir(), 'vsctests', 'server-connection-token');\n\t\tfs.mkdirSync(testDir, { recursive: true });\n\t\tconst filename = join(testDir, 'connection-token-file');\n\t\tconst connectionToken = `12345-123-abc`;\n\t\tfs.writeFileSync(filename, connectionToken);\n\t\tconst result = await parseServerConnectionToken({ 'connection-token-file': filename } as ServerParsedArgs, async () => 'defaultTokenValue');\n\t\tassert.ok(!(result instanceof ServerConnectionTokenParseError));\n\t\tassert.ok(result.type === ServerConnectionTokenType.Mandatory);\n\t\tassert.strictEqual(result.value, connectionToken);\n\t\tfs.rmSync(testDir, { recursive: true, force: true });\n\t});\n\n\ttest('--connection-token', async () => {\n\t\tconst connectionToken = `12345-123-abc`;\n\t\tconst result = await parseServerConnectionToken({ 'connection-token': connectionToken } as ServerParsedArgs, async () => 'defaultTokenValue');\n\t\tassert.ok(!(result instanceof ServerConnectionTokenParseError));\n\t\tassert.ok(result.type === ServerConnectionTokenType.Mandatory);\n\t\tassert.strictEqual(result.value, connectionToken);\n\t});\n\n});\n"]}