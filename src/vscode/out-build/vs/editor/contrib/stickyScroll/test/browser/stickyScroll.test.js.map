{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/contrib/stickyScroll/test/browser/stickyScroll.test.ts","vs/editor/contrib/stickyScroll/test/browser/stickyScroll.test.ts"],"names":[],"mappings":"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","file":"stickyScroll.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { withAsyncTestCodeEditor } from '../../../../test/browser/testCodeEditor.js';\nimport { StickyScrollController } from '../../browser/stickyScrollController.js';\nimport { ServiceCollection } from '../../../../../platform/instantiation/common/serviceCollection.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nimport { createTextModel } from '../../../../test/common/testTextModel.js';\nimport { LanguageFeaturesService } from '../../../../common/services/languageFeaturesService.js';\nimport { DocumentSymbol, SymbolKind } from '../../../../common/languages.js';\nimport { StickyLineCandidate, StickyLineCandidateProvider } from '../../browser/stickyScrollProvider.js';\nimport { EditorOption } from '../../../../common/config/editorOptions.js';\nimport { ILogService, NullLogService } from '../../../../../platform/log/common/log.js';\nimport { IContextMenuService } from '../../../../../platform/contextview/browser/contextView.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeatureDebounceService, LanguageFeatureDebounceService } from '../../../../common/services/languageFeatureDebounce.js';\nimport { TestLanguageConfigurationService } from '../../../../test/common/modes/testLanguageConfigurationService.js';\nimport { SyncDescriptor } from '../../../../../platform/instantiation/common/descriptors.js';\nimport { runWithFakedTimers } from '../../../../../base/test/common/timeTravelScheduler.js';\nimport { IEnvironmentService } from '../../../../../platform/environment/common/environment.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\n\nsuite('Sticky Scroll Tests', () => {\n\n\tconst disposables = new DisposableStore();\n\n\tconst serviceCollection = new ServiceCollection(\n\t\t[ILanguageFeaturesService, new LanguageFeaturesService()],\n\t\t[ILogService, new NullLogService()],\n\t\t[IContextMenuService, new class extends mock<IContextMenuService>() { }],\n\t\t[ILanguageConfigurationService, new TestLanguageConfigurationService()],\n\t\t[IEnvironmentService, new class extends mock<IEnvironmentService>() {\n\t\t\toverride isBuilt: boolean = true;\n\t\t\toverride isExtensionDevelopment: boolean = false;\n\t\t}],\n\t\t[ILanguageFeatureDebounceService, new SyncDescriptor(LanguageFeatureDebounceService)],\n\t);\n\n\tconst text = [\n\t\t'function foo() {',\n\t\t'',\n\t\t'}',\n\t\t'/* comment related to TestClass',\n\t\t' end of the comment */',\n\t\t'@classDecorator',\n\t\t'class TestClass {',\n\t\t'// comment related to the function functionOfClass',\n\t\t'functionOfClass(){',\n\t\t'function function1(){',\n\t\t'}',\n\t\t'}}',\n\t\t'function bar() { function insideBar() {}',\n\t\t'}'\n\t].join('\\n');\n\n\tsetup(() => {\n\t\tdisposables.clear();\n\t});\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction documentSymbolProviderForTestModel() {\n\t\treturn {\n\t\t\tprovideDocumentSymbols() {\n\t\t\t\treturn [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'foo',\n\t\t\t\t\t\tdetail: 'foo',\n\t\t\t\t\t\tkind: SymbolKind.Function,\n\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\trange: { startLineNumber: 1, endLineNumber: 3, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\tselectionRange: { startLineNumber: 1, endLineNumber: 1, startColumn: 1, endColumn: 1 }\n\t\t\t\t\t} as DocumentSymbol,\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'TestClass',\n\t\t\t\t\t\tdetail: 'TestClass',\n\t\t\t\t\t\tkind: SymbolKind.Class,\n\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\trange: { startLineNumber: 4, endLineNumber: 12, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\tselectionRange: { startLineNumber: 7, endLineNumber: 7, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'functionOfClass',\n\t\t\t\t\t\t\t\tdetail: 'functionOfClass',\n\t\t\t\t\t\t\t\tkind: SymbolKind.Function,\n\t\t\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\t\t\trange: { startLineNumber: 8, endLineNumber: 12, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\tselectionRange: { startLineNumber: 9, endLineNumber: 9, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: 'function1',\n\t\t\t\t\t\t\t\t\t\tdetail: 'function1',\n\t\t\t\t\t\t\t\t\t\tkind: SymbolKind.Function,\n\t\t\t\t\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\t\t\t\t\trange: { startLineNumber: 10, endLineNumber: 11, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\t\t\tselectionRange: { startLineNumber: 10, endLineNumber: 10, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t} as DocumentSymbol\n\t\t\t\t\t\t]\n\t\t\t\t\t} as DocumentSymbol,\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'bar',\n\t\t\t\t\t\tdetail: 'bar',\n\t\t\t\t\t\tkind: SymbolKind.Function,\n\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\trange: { startLineNumber: 13, endLineNumber: 14, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\tselectionRange: { startLineNumber: 13, endLineNumber: 13, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'insideBar',\n\t\t\t\t\t\t\t\tdetail: 'insideBar',\n\t\t\t\t\t\t\t\tkind: SymbolKind.Function,\n\t\t\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\t\t\trange: { startLineNumber: 13, endLineNumber: 13, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\tselectionRange: { startLineNumber: 13, endLineNumber: 13, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t} as DocumentSymbol\n\t\t\t\t\t\t]\n\t\t\t\t\t} as DocumentSymbol\n\t\t\t\t];\n\t\t\t}\n\t\t};\n\t}\n\n\ttest('Testing the function getCandidateStickyLinesIntersecting', () => {\n\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst model = createTextModel(text);\n\t\t\tawait withAsyncTestCodeEditor(model, {\n\t\t\t\tstickyScroll: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tmaxLineCount: 5,\n\t\t\t\t\tdefaultModel: 'outlineModel'\n\t\t\t\t},\n\t\t\t\tenvConfig: {\n\t\t\t\t\touterHeight: 500\n\t\t\t\t},\n\t\t\t\tserviceCollection: serviceCollection\n\t\t\t}, async (editor, _viewModel, instantiationService) => {\n\t\t\t\tconst languageService = instantiationService.get(ILanguageFeaturesService);\n\t\t\t\tconst languageConfigurationService = instantiationService.get(ILanguageConfigurationService);\n\t\t\t\tdisposables.add(languageService.documentSymbolProvider.register('*', documentSymbolProviderForTestModel()));\n\t\t\t\tconst provider: StickyLineCandidateProvider = new StickyLineCandidateProvider(editor, languageService, languageConfigurationService);\n\t\t\t\tawait provider.update();\n\t\t\t\tassert.deepStrictEqual(provider.getCandidateStickyLinesIntersecting({ startLineNumber: 1, endLineNumber: 4 }), [new StickyLineCandidate(1, 2, 0, 19)]);\n\t\t\t\tassert.deepStrictEqual(provider.getCandidateStickyLinesIntersecting({ startLineNumber: 8, endLineNumber: 10 }), [new StickyLineCandidate(7, 11, 0, 19), new StickyLineCandidate(9, 11, 19, 19)]);\n\t\t\t\tassert.deepStrictEqual(provider.getCandidateStickyLinesIntersecting({ startLineNumber: 10, endLineNumber: 13 }), [new StickyLineCandidate(7, 11, 0, 19), new StickyLineCandidate(9, 11, 19, 19)]);\n\n\t\t\t\tprovider.dispose();\n\t\t\t\tmodel.dispose();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('issue #157180: Render the correct line corresponding to the scope definition', () => {\n\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst model = createTextModel(text);\n\t\t\tawait withAsyncTestCodeEditor(model, {\n\t\t\t\tstickyScroll: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tmaxLineCount: 5,\n\t\t\t\t\tdefaultModel: 'outlineModel'\n\t\t\t\t},\n\t\t\t\tenvConfig: {\n\t\t\t\t\touterHeight: 500\n\t\t\t\t},\n\t\t\t\tserviceCollection\n\t\t\t}, async (editor, _viewModel, instantiationService) => {\n\n\t\t\t\tconst stickyScrollController: StickyScrollController = editor.registerAndInstantiateContribution(StickyScrollController.ID, StickyScrollController);\n\t\t\t\tconst lineHeight: number = editor.getOption(EditorOption.lineHeight);\n\t\t\t\tconst languageService: ILanguageFeaturesService = instantiationService.get(ILanguageFeaturesService);\n\t\t\t\tdisposables.add(languageService.documentSymbolProvider.register('*', documentSymbolProviderForTestModel()));\n\t\t\t\tawait stickyScrollController.stickyScrollCandidateProvider.update();\n\t\t\t\tlet state;\n\n\t\t\t\teditor.setScrollTop(1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [1]);\n\n\t\t\t\teditor.setScrollTop(lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [1]);\n\n\t\t\t\teditor.setScrollTop(4 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, []);\n\n\t\t\t\teditor.setScrollTop(8 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [7, 9]);\n\n\t\t\t\teditor.setScrollTop(9 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [7, 9]);\n\n\t\t\t\teditor.setScrollTop(10 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [7]);\n\n\t\t\t\tstickyScrollController.dispose();\n\t\t\t\tstickyScrollController.stickyScrollCandidateProvider.dispose();\n\t\t\t\tmodel.dispose();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('issue #156268 : Do not reveal sticky lines when they are in a folded region ', () => {\n\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst model = createTextModel(text);\n\t\t\tawait withAsyncTestCodeEditor(model, {\n\t\t\t\tstickyScroll: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tmaxLineCount: 5,\n\t\t\t\t\tdefaultModel: 'outlineModel'\n\t\t\t\t},\n\t\t\t\tenvConfig: {\n\t\t\t\t\touterHeight: 500\n\t\t\t\t},\n\t\t\t\tserviceCollection\n\t\t\t}, async (editor, viewModel, instantiationService) => {\n\n\t\t\t\tconst stickyScrollController: StickyScrollController = editor.registerAndInstantiateContribution(StickyScrollController.ID, StickyScrollController);\n\t\t\t\tconst lineHeight = editor.getOption(EditorOption.lineHeight);\n\n\t\t\t\tconst languageService = instantiationService.get(ILanguageFeaturesService);\n\t\t\t\tdisposables.add(languageService.documentSymbolProvider.register('*', documentSymbolProviderForTestModel()));\n\t\t\t\tawait stickyScrollController.stickyScrollCandidateProvider.update();\n\t\t\t\teditor.setHiddenAreas([{ startLineNumber: 2, endLineNumber: 2, startColumn: 1, endColumn: 1 }, { startLineNumber: 10, endLineNumber: 11, startColumn: 1, endColumn: 1 }]);\n\t\t\t\tlet state;\n\n\t\t\t\teditor.setScrollTop(1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [1]);\n\n\t\t\t\teditor.setScrollTop(lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, []);\n\n\t\t\t\teditor.setScrollTop(6 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [7, 9]);\n\n\t\t\t\teditor.setScrollTop(7 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [7]);\n\n\t\t\t\teditor.setScrollTop(10 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, []);\n\n\t\t\t\tstickyScrollController.dispose();\n\t\t\t\tstickyScrollController.stickyScrollCandidateProvider.dispose();\n\t\t\t\tmodel.dispose();\n\t\t\t});\n\t\t});\n\t});\n\n\tconst textWithScopesWithSameStartingLines = [\n\t\t'class TestClass { foo() {',\n\t\t'function bar(){',\n\t\t'',\n\t\t'}}',\n\t\t'}',\n\t\t''\n\t].join('\\n');\n\n\tfunction documentSymbolProviderForSecondTestModel() {\n\t\treturn {\n\t\t\tprovideDocumentSymbols() {\n\t\t\t\treturn [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'TestClass',\n\t\t\t\t\t\tdetail: 'TestClass',\n\t\t\t\t\t\tkind: SymbolKind.Class,\n\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\trange: { startLineNumber: 1, endLineNumber: 5, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\tselectionRange: { startLineNumber: 1, endLineNumber: 1, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'foo',\n\t\t\t\t\t\t\t\tdetail: 'foo',\n\t\t\t\t\t\t\t\tkind: SymbolKind.Function,\n\t\t\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\t\t\trange: { startLineNumber: 1, endLineNumber: 4, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\tselectionRange: { startLineNumber: 1, endLineNumber: 1, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: 'bar',\n\t\t\t\t\t\t\t\t\t\tdetail: 'bar',\n\t\t\t\t\t\t\t\t\t\tkind: SymbolKind.Function,\n\t\t\t\t\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\t\t\t\t\trange: { startLineNumber: 2, endLineNumber: 4, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\t\t\tselectionRange: { startLineNumber: 2, endLineNumber: 2, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\t\t\tchildren: []\n\t\t\t\t\t\t\t\t\t} as DocumentSymbol\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t} as DocumentSymbol,\n\t\t\t\t\t\t]\n\t\t\t\t\t} as DocumentSymbol\n\t\t\t\t];\n\t\t\t}\n\t\t};\n\t}\n\n\ttest('issue #159271 : render the correct widget state when the child scope starts on the same line as the parent scope', () => {\n\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst model = createTextModel(textWithScopesWithSameStartingLines);\n\t\t\tawait withAsyncTestCodeEditor(model, {\n\t\t\t\tstickyScroll: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tmaxLineCount: 5,\n\t\t\t\t\tdefaultModel: 'outlineModel'\n\t\t\t\t},\n\t\t\t\tenvConfig: {\n\t\t\t\t\touterHeight: 500\n\t\t\t\t},\n\t\t\t\tserviceCollection\n\t\t\t}, async (editor, _viewModel, instantiationService) => {\n\n\t\t\t\tconst stickyScrollController: StickyScrollController = editor.registerAndInstantiateContribution(StickyScrollController.ID, StickyScrollController);\n\t\t\t\tawait stickyScrollController.stickyScrollCandidateProvider.update();\n\t\t\t\tconst lineHeight = editor.getOption(EditorOption.lineHeight);\n\n\t\t\t\tconst languageService = instantiationService.get(ILanguageFeaturesService);\n\t\t\t\tdisposables.add(languageService.documentSymbolProvider.register('*', documentSymbolProviderForSecondTestModel()));\n\t\t\t\tawait stickyScrollController.stickyScrollCandidateProvider.update();\n\t\t\t\tlet state;\n\n\t\t\t\teditor.setScrollTop(1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [1, 2]);\n\n\t\t\t\teditor.setScrollTop(lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [1, 2]);\n\n\t\t\t\teditor.setScrollTop(2 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [1]);\n\n\t\t\t\teditor.setScrollTop(3 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [1]);\n\n\t\t\t\teditor.setScrollTop(4 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, []);\n\n\t\t\t\tstickyScrollController.dispose();\n\t\t\t\tstickyScrollController.stickyScrollCandidateProvider.dispose();\n\t\t\t\tmodel.dispose();\n\t\t\t});\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { withAsyncTestCodeEditor } from '../../../../test/browser/testCodeEditor.js';\nimport { StickyScrollController } from '../../browser/stickyScrollController.js';\nimport { ServiceCollection } from '../../../../../platform/instantiation/common/serviceCollection.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nimport { createTextModel } from '../../../../test/common/testTextModel.js';\nimport { LanguageFeaturesService } from '../../../../common/services/languageFeaturesService.js';\nimport { DocumentSymbol, SymbolKind } from '../../../../common/languages.js';\nimport { StickyLineCandidate, StickyLineCandidateProvider } from '../../browser/stickyScrollProvider.js';\nimport { EditorOption } from '../../../../common/config/editorOptions.js';\nimport { ILogService, NullLogService } from '../../../../../platform/log/common/log.js';\nimport { IContextMenuService } from '../../../../../platform/contextview/browser/contextView.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeatureDebounceService, LanguageFeatureDebounceService } from '../../../../common/services/languageFeatureDebounce.js';\nimport { TestLanguageConfigurationService } from '../../../../test/common/modes/testLanguageConfigurationService.js';\nimport { SyncDescriptor } from '../../../../../platform/instantiation/common/descriptors.js';\nimport { runWithFakedTimers } from '../../../../../base/test/common/timeTravelScheduler.js';\nimport { IEnvironmentService } from '../../../../../platform/environment/common/environment.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\n\nsuite('Sticky Scroll Tests', () => {\n\n\tconst disposables = new DisposableStore();\n\n\tconst serviceCollection = new ServiceCollection(\n\t\t[ILanguageFeaturesService, new LanguageFeaturesService()],\n\t\t[ILogService, new NullLogService()],\n\t\t[IContextMenuService, new class extends mock<IContextMenuService>() { }],\n\t\t[ILanguageConfigurationService, new TestLanguageConfigurationService()],\n\t\t[IEnvironmentService, new class extends mock<IEnvironmentService>() {\n\t\t\toverride isBuilt: boolean = true;\n\t\t\toverride isExtensionDevelopment: boolean = false;\n\t\t}],\n\t\t[ILanguageFeatureDebounceService, new SyncDescriptor(LanguageFeatureDebounceService)],\n\t);\n\n\tconst text = [\n\t\t'function foo() {',\n\t\t'',\n\t\t'}',\n\t\t'/* comment related to TestClass',\n\t\t' end of the comment */',\n\t\t'@classDecorator',\n\t\t'class TestClass {',\n\t\t'// comment related to the function functionOfClass',\n\t\t'functionOfClass(){',\n\t\t'function function1(){',\n\t\t'}',\n\t\t'}}',\n\t\t'function bar() { function insideBar() {}',\n\t\t'}'\n\t].join('\\n');\n\n\tsetup(() => {\n\t\tdisposables.clear();\n\t});\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction documentSymbolProviderForTestModel() {\n\t\treturn {\n\t\t\tprovideDocumentSymbols() {\n\t\t\t\treturn [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'foo',\n\t\t\t\t\t\tdetail: 'foo',\n\t\t\t\t\t\tkind: SymbolKind.Function,\n\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\trange: { startLineNumber: 1, endLineNumber: 3, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\tselectionRange: { startLineNumber: 1, endLineNumber: 1, startColumn: 1, endColumn: 1 }\n\t\t\t\t\t} as DocumentSymbol,\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'TestClass',\n\t\t\t\t\t\tdetail: 'TestClass',\n\t\t\t\t\t\tkind: SymbolKind.Class,\n\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\trange: { startLineNumber: 4, endLineNumber: 12, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\tselectionRange: { startLineNumber: 7, endLineNumber: 7, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'functionOfClass',\n\t\t\t\t\t\t\t\tdetail: 'functionOfClass',\n\t\t\t\t\t\t\t\tkind: SymbolKind.Function,\n\t\t\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\t\t\trange: { startLineNumber: 8, endLineNumber: 12, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\tselectionRange: { startLineNumber: 9, endLineNumber: 9, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: 'function1',\n\t\t\t\t\t\t\t\t\t\tdetail: 'function1',\n\t\t\t\t\t\t\t\t\t\tkind: SymbolKind.Function,\n\t\t\t\t\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\t\t\t\t\trange: { startLineNumber: 10, endLineNumber: 11, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\t\t\tselectionRange: { startLineNumber: 10, endLineNumber: 10, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t} as DocumentSymbol\n\t\t\t\t\t\t]\n\t\t\t\t\t} as DocumentSymbol,\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'bar',\n\t\t\t\t\t\tdetail: 'bar',\n\t\t\t\t\t\tkind: SymbolKind.Function,\n\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\trange: { startLineNumber: 13, endLineNumber: 14, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\tselectionRange: { startLineNumber: 13, endLineNumber: 13, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'insideBar',\n\t\t\t\t\t\t\t\tdetail: 'insideBar',\n\t\t\t\t\t\t\t\tkind: SymbolKind.Function,\n\t\t\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\t\t\trange: { startLineNumber: 13, endLineNumber: 13, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\tselectionRange: { startLineNumber: 13, endLineNumber: 13, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t} as DocumentSymbol\n\t\t\t\t\t\t]\n\t\t\t\t\t} as DocumentSymbol\n\t\t\t\t];\n\t\t\t}\n\t\t};\n\t}\n\n\ttest('Testing the function getCandidateStickyLinesIntersecting', () => {\n\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst model = createTextModel(text);\n\t\t\tawait withAsyncTestCodeEditor(model, {\n\t\t\t\tstickyScroll: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tmaxLineCount: 5,\n\t\t\t\t\tdefaultModel: 'outlineModel'\n\t\t\t\t},\n\t\t\t\tenvConfig: {\n\t\t\t\t\touterHeight: 500\n\t\t\t\t},\n\t\t\t\tserviceCollection: serviceCollection\n\t\t\t}, async (editor, _viewModel, instantiationService) => {\n\t\t\t\tconst languageService = instantiationService.get(ILanguageFeaturesService);\n\t\t\t\tconst languageConfigurationService = instantiationService.get(ILanguageConfigurationService);\n\t\t\t\tdisposables.add(languageService.documentSymbolProvider.register('*', documentSymbolProviderForTestModel()));\n\t\t\t\tconst provider: StickyLineCandidateProvider = new StickyLineCandidateProvider(editor, languageService, languageConfigurationService);\n\t\t\t\tawait provider.update();\n\t\t\t\tassert.deepStrictEqual(provider.getCandidateStickyLinesIntersecting({ startLineNumber: 1, endLineNumber: 4 }), [new StickyLineCandidate(1, 2, 0, 19)]);\n\t\t\t\tassert.deepStrictEqual(provider.getCandidateStickyLinesIntersecting({ startLineNumber: 8, endLineNumber: 10 }), [new StickyLineCandidate(7, 11, 0, 19), new StickyLineCandidate(9, 11, 19, 19)]);\n\t\t\t\tassert.deepStrictEqual(provider.getCandidateStickyLinesIntersecting({ startLineNumber: 10, endLineNumber: 13 }), [new StickyLineCandidate(7, 11, 0, 19), new StickyLineCandidate(9, 11, 19, 19)]);\n\n\t\t\t\tprovider.dispose();\n\t\t\t\tmodel.dispose();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('issue #157180: Render the correct line corresponding to the scope definition', () => {\n\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst model = createTextModel(text);\n\t\t\tawait withAsyncTestCodeEditor(model, {\n\t\t\t\tstickyScroll: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tmaxLineCount: 5,\n\t\t\t\t\tdefaultModel: 'outlineModel'\n\t\t\t\t},\n\t\t\t\tenvConfig: {\n\t\t\t\t\touterHeight: 500\n\t\t\t\t},\n\t\t\t\tserviceCollection\n\t\t\t}, async (editor, _viewModel, instantiationService) => {\n\n\t\t\t\tconst stickyScrollController: StickyScrollController = editor.registerAndInstantiateContribution(StickyScrollController.ID, StickyScrollController);\n\t\t\t\tconst lineHeight: number = editor.getOption(EditorOption.lineHeight);\n\t\t\t\tconst languageService: ILanguageFeaturesService = instantiationService.get(ILanguageFeaturesService);\n\t\t\t\tdisposables.add(languageService.documentSymbolProvider.register('*', documentSymbolProviderForTestModel()));\n\t\t\t\tawait stickyScrollController.stickyScrollCandidateProvider.update();\n\t\t\t\tlet state;\n\n\t\t\t\teditor.setScrollTop(1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [1]);\n\n\t\t\t\teditor.setScrollTop(lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [1]);\n\n\t\t\t\teditor.setScrollTop(4 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, []);\n\n\t\t\t\teditor.setScrollTop(8 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [7, 9]);\n\n\t\t\t\teditor.setScrollTop(9 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [7, 9]);\n\n\t\t\t\teditor.setScrollTop(10 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [7]);\n\n\t\t\t\tstickyScrollController.dispose();\n\t\t\t\tstickyScrollController.stickyScrollCandidateProvider.dispose();\n\t\t\t\tmodel.dispose();\n\t\t\t});\n\t\t});\n\t});\n\n\ttest('issue #156268 : Do not reveal sticky lines when they are in a folded region ', () => {\n\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst model = createTextModel(text);\n\t\t\tawait withAsyncTestCodeEditor(model, {\n\t\t\t\tstickyScroll: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tmaxLineCount: 5,\n\t\t\t\t\tdefaultModel: 'outlineModel'\n\t\t\t\t},\n\t\t\t\tenvConfig: {\n\t\t\t\t\touterHeight: 500\n\t\t\t\t},\n\t\t\t\tserviceCollection\n\t\t\t}, async (editor, viewModel, instantiationService) => {\n\n\t\t\t\tconst stickyScrollController: StickyScrollController = editor.registerAndInstantiateContribution(StickyScrollController.ID, StickyScrollController);\n\t\t\t\tconst lineHeight = editor.getOption(EditorOption.lineHeight);\n\n\t\t\t\tconst languageService = instantiationService.get(ILanguageFeaturesService);\n\t\t\t\tdisposables.add(languageService.documentSymbolProvider.register('*', documentSymbolProviderForTestModel()));\n\t\t\t\tawait stickyScrollController.stickyScrollCandidateProvider.update();\n\t\t\t\teditor.setHiddenAreas([{ startLineNumber: 2, endLineNumber: 2, startColumn: 1, endColumn: 1 }, { startLineNumber: 10, endLineNumber: 11, startColumn: 1, endColumn: 1 }]);\n\t\t\t\tlet state;\n\n\t\t\t\teditor.setScrollTop(1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [1]);\n\n\t\t\t\teditor.setScrollTop(lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, []);\n\n\t\t\t\teditor.setScrollTop(6 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [7, 9]);\n\n\t\t\t\teditor.setScrollTop(7 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [7]);\n\n\t\t\t\teditor.setScrollTop(10 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, []);\n\n\t\t\t\tstickyScrollController.dispose();\n\t\t\t\tstickyScrollController.stickyScrollCandidateProvider.dispose();\n\t\t\t\tmodel.dispose();\n\t\t\t});\n\t\t});\n\t});\n\n\tconst textWithScopesWithSameStartingLines = [\n\t\t'class TestClass { foo() {',\n\t\t'function bar(){',\n\t\t'',\n\t\t'}}',\n\t\t'}',\n\t\t''\n\t].join('\\n');\n\n\tfunction documentSymbolProviderForSecondTestModel() {\n\t\treturn {\n\t\t\tprovideDocumentSymbols() {\n\t\t\t\treturn [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'TestClass',\n\t\t\t\t\t\tdetail: 'TestClass',\n\t\t\t\t\t\tkind: SymbolKind.Class,\n\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\trange: { startLineNumber: 1, endLineNumber: 5, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\tselectionRange: { startLineNumber: 1, endLineNumber: 1, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: 'foo',\n\t\t\t\t\t\t\t\tdetail: 'foo',\n\t\t\t\t\t\t\t\tkind: SymbolKind.Function,\n\t\t\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\t\t\trange: { startLineNumber: 1, endLineNumber: 4, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\tselectionRange: { startLineNumber: 1, endLineNumber: 1, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: 'bar',\n\t\t\t\t\t\t\t\t\t\tdetail: 'bar',\n\t\t\t\t\t\t\t\t\t\tkind: SymbolKind.Function,\n\t\t\t\t\t\t\t\t\t\ttags: [],\n\t\t\t\t\t\t\t\t\t\trange: { startLineNumber: 2, endLineNumber: 4, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\t\t\tselectionRange: { startLineNumber: 2, endLineNumber: 2, startColumn: 1, endColumn: 1 },\n\t\t\t\t\t\t\t\t\t\tchildren: []\n\t\t\t\t\t\t\t\t\t} as DocumentSymbol\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t} as DocumentSymbol,\n\t\t\t\t\t\t]\n\t\t\t\t\t} as DocumentSymbol\n\t\t\t\t];\n\t\t\t}\n\t\t};\n\t}\n\n\ttest('issue #159271 : render the correct widget state when the child scope starts on the same line as the parent scope', () => {\n\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\tconst model = createTextModel(textWithScopesWithSameStartingLines);\n\t\t\tawait withAsyncTestCodeEditor(model, {\n\t\t\t\tstickyScroll: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tmaxLineCount: 5,\n\t\t\t\t\tdefaultModel: 'outlineModel'\n\t\t\t\t},\n\t\t\t\tenvConfig: {\n\t\t\t\t\touterHeight: 500\n\t\t\t\t},\n\t\t\t\tserviceCollection\n\t\t\t}, async (editor, _viewModel, instantiationService) => {\n\n\t\t\t\tconst stickyScrollController: StickyScrollController = editor.registerAndInstantiateContribution(StickyScrollController.ID, StickyScrollController);\n\t\t\t\tawait stickyScrollController.stickyScrollCandidateProvider.update();\n\t\t\t\tconst lineHeight = editor.getOption(EditorOption.lineHeight);\n\n\t\t\t\tconst languageService = instantiationService.get(ILanguageFeaturesService);\n\t\t\t\tdisposables.add(languageService.documentSymbolProvider.register('*', documentSymbolProviderForSecondTestModel()));\n\t\t\t\tawait stickyScrollController.stickyScrollCandidateProvider.update();\n\t\t\t\tlet state;\n\n\t\t\t\teditor.setScrollTop(1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [1, 2]);\n\n\t\t\t\teditor.setScrollTop(lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [1, 2]);\n\n\t\t\t\teditor.setScrollTop(2 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [1]);\n\n\t\t\t\teditor.setScrollTop(3 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, [1]);\n\n\t\t\t\teditor.setScrollTop(4 * lineHeight + 1);\n\t\t\t\tstate = stickyScrollController.findScrollWidgetState();\n\t\t\t\tassert.deepStrictEqual(state.startLineNumbers, []);\n\n\t\t\t\tstickyScrollController.dispose();\n\t\t\t\tstickyScrollController.stickyScrollCandidateProvider.dispose();\n\t\t\t\tmodel.dispose();\n\t\t\t});\n\t\t});\n\t});\n});\n"]}