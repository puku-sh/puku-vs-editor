{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/contrib/inlineCompletions/browser/view/inlineEdits/inlineEditsViews/debugVisualization.ts","vs/editor/contrib/inlineCompletions/browser/view/inlineEdits/inlineEditsViews/debugVisualization.ts"],"names":[],"mappings":"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","file":"debugVisualization.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDisposable } from '../../../../../../../base/common/lifecycle.js';\nimport { IReader, derived } from '../../../../../../../base/common/observable.js';\nimport { Rect } from '../../../../../../common/core/2d/rect.js';\n\nexport interface IVisualizationEffect {\n\tvisualize(): IDisposable;\n}\n\nexport function setVisualization(data: object, visualization: IVisualizationEffect): void {\n\t// eslint-disable-next-line local/code-no-any-casts\n\t(data as any)['$$visualization'] = visualization;\n}\n\nexport function debugLogRects(rects: Record<string, Rect> | Rect[], elem: HTMLElement): object {\n\tif (Array.isArray(rects)) {\n\t\tconst record: Record<string, Rect> = {};\n\t\trects.forEach((rect, index) => {\n\t\t\trecord[index.toString()] = rect;\n\t\t});\n\t\trects = record;\n\t}\n\n\tsetVisualization(rects, new ManyRectVisualizer(rects, elem));\n\treturn rects;\n}\n\nexport function debugLogRect(rect: Rect, elem: HTMLElement, name: string): Rect {\n\tsetVisualization(rect, new HtmlRectVisualizer(rect, elem, name));\n\treturn rect;\n}\n\nexport function debugLogHorizontalOffsetRange(rect: Rect, elem: HTMLElement, name: string): Rect {\n\tsetVisualization(rect, new HtmlHorizontalOffsetRangeVisualizer(rect, elem, name, 0, 'above'));\n\treturn rect;\n}\n\nexport function debugLogHorizontalOffsetRanges(rects: Record<string, Rect> | Rect[], elem: HTMLElement): object {\n\tif (Array.isArray(rects)) {\n\t\tconst record: Record<string, Rect> = {};\n\t\trects.forEach((rect, index) => {\n\t\t\trecord[index.toString()] = rect;\n\t\t});\n\t\trects = record;\n\t}\n\n\tsetVisualization(rects, new ManyHorizontalOffsetRangeVisualizer(rects, elem));\n\treturn rects;\n}\n\nclass ManyRectVisualizer implements IVisualizationEffect {\n\tconstructor(\n\t\tprivate readonly _rects: Record<string, Rect>,\n\t\tprivate readonly _elem: HTMLElement\n\t) { }\n\n\tvisualize(): IDisposable {\n\t\tconst d: IDisposable[] = [];\n\t\tfor (const key in this._rects) {\n\t\t\tconst v = new HtmlRectVisualizer(this._rects[key], this._elem, key);\n\t\t\td.push(v.visualize());\n\t\t}\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\td.forEach(d => d.dispose());\n\t\t\t}\n\t\t};\n\t}\n}\n\nclass ManyHorizontalOffsetRangeVisualizer implements IVisualizationEffect {\n\tconstructor(\n\t\tprivate readonly _rects: Record<string, Rect>,\n\t\tprivate readonly _elem: HTMLElement\n\t) { }\n\n\tvisualize(): IDisposable {\n\t\tconst d: IDisposable[] = [];\n\t\tconst keys = Object.keys(this._rects);\n\t\tkeys.forEach((key, index) => {\n\t\t\t// Stagger labels: odd indices go above, even indices go below\n\t\t\tconst labelPosition = index % 2 === 0 ? 'above' : 'below';\n\t\t\tconst v = new HtmlHorizontalOffsetRangeVisualizer(this._rects[key], this._elem, key, index * 12, labelPosition);\n\t\t\td.push(v.visualize());\n\t\t});\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\td.forEach(d => d.dispose());\n\t\t\t}\n\t\t};\n\t}\n}\n\nclass HtmlHorizontalOffsetRangeVisualizer implements IVisualizationEffect {\n\tconstructor(\n\t\tprivate readonly _rect: Rect,\n\t\tprivate readonly _elem: HTMLElement,\n\t\tprivate readonly _name: string,\n\t\tprivate readonly _verticalOffset: number = 0,\n\t\tprivate readonly _labelPosition: 'above' | 'below' = 'above'\n\t) { }\n\n\tvisualize(): IDisposable {\n\t\tconst container = document.createElement('div');\n\t\tcontainer.style.position = 'fixed';\n\t\tcontainer.style.pointerEvents = 'none';\n\t\tcontainer.style.zIndex = '100000';\n\n\t\t// Create horizontal line\n\t\tconst horizontalLine = document.createElement('div');\n\t\thorizontalLine.style.position = 'absolute';\n\t\thorizontalLine.style.height = '2px';\n\t\thorizontalLine.style.backgroundColor = 'green';\n\t\thorizontalLine.style.top = '50%';\n\t\thorizontalLine.style.transform = 'translateY(-50%)';\n\n\t\t// Create start vertical bar\n\t\tconst startBar = document.createElement('div');\n\t\tstartBar.style.position = 'absolute';\n\t\tstartBar.style.width = '2px';\n\t\tstartBar.style.height = '8px';\n\t\tstartBar.style.backgroundColor = 'green';\n\t\tstartBar.style.left = '0';\n\t\tstartBar.style.top = '50%';\n\t\tstartBar.style.transform = 'translateY(-50%)';\n\n\t\t// Create end vertical bar\n\t\tconst endBar = document.createElement('div');\n\t\tendBar.style.position = 'absolute';\n\t\tendBar.style.width = '2px';\n\t\tendBar.style.height = '8px';\n\t\tendBar.style.backgroundColor = 'green';\n\t\tendBar.style.right = '0';\n\t\tendBar.style.top = '50%';\n\t\tendBar.style.transform = 'translateY(-50%)';\n\n\t\t// Create label\n\t\tconst label = document.createElement('div');\n\t\tlabel.textContent = this._name;\n\t\tlabel.style.position = 'absolute';\n\n\t\t// Position label above or below the line to avoid overlaps\n\t\tif (this._labelPosition === 'above') {\n\t\t\tlabel.style.bottom = '12px';\n\t\t} else {\n\t\t\tlabel.style.top = '12px';\n\t\t}\n\n\t\tlabel.style.left = '2px'; // Slight offset from start\n\t\tlabel.style.color = 'green';\n\t\tlabel.style.fontSize = '10px';\n\t\tlabel.style.backgroundColor = 'rgba(255, 255, 255, 0.95)';\n\t\tlabel.style.padding = '1px 3px';\n\t\tlabel.style.border = '1px solid green';\n\t\tlabel.style.borderRadius = '2px';\n\t\tlabel.style.whiteSpace = 'nowrap';\n\t\tlabel.style.boxShadow = '0 1px 2px rgba(0,0,0,0.15)';\n\t\tlabel.style.fontFamily = 'monospace';\n\n\t\tcontainer.appendChild(horizontalLine);\n\t\tcontainer.appendChild(startBar);\n\t\tcontainer.appendChild(endBar);\n\t\tcontainer.appendChild(label);\n\n\t\tconst updatePosition = () => {\n\t\t\tconst elemRect = this._elem.getBoundingClientRect();\n\t\t\tconst centerY = this._rect.top + (this._rect.height / 2) + this._verticalOffset;\n\t\t\tconst left = elemRect.left + this._rect.left;\n\t\t\tconst width = this._rect.width;\n\n\t\t\tcontainer.style.left = left + 'px';\n\t\t\tcontainer.style.top = (elemRect.top + centerY) + 'px';\n\t\t\tcontainer.style.width = width + 'px';\n\t\t\tcontainer.style.height = '8px';\n\n\t\t\thorizontalLine.style.width = width + 'px';\n\t\t};\n\n\t\t// This is for debugging only\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tdocument.body.appendChild(container);\n\t\tupdatePosition();\n\n\t\tconst observer = new ResizeObserver(updatePosition);\n\t\tobserver.observe(this._elem);\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tobserver.disconnect();\n\t\t\t\tcontainer.remove();\n\t\t\t}\n\t\t};\n\t}\n}\n\nclass HtmlRectVisualizer implements IVisualizationEffect {\n\tconstructor(\n\t\tprivate readonly _rect: Rect,\n\t\tprivate readonly _elem: HTMLElement,\n\t\tprivate readonly _name: string\n\t) { }\n\n\tvisualize(): IDisposable {\n\t\tconst div = document.createElement('div');\n\t\tdiv.style.position = 'fixed';\n\t\tdiv.style.border = '1px solid red';\n\t\tdiv.style.boxSizing = 'border-box';\n\t\tdiv.style.pointerEvents = 'none';\n\t\tdiv.style.zIndex = '100000';\n\n\t\tconst label = document.createElement('div');\n\t\tlabel.textContent = this._name;\n\t\tlabel.style.position = 'absolute';\n\t\tlabel.style.top = '-20px';\n\t\tlabel.style.left = '0';\n\t\tlabel.style.color = 'red';\n\t\tlabel.style.fontSize = '12px';\n\t\tlabel.style.backgroundColor = 'rgba(255, 255, 255, 0.7)';\n\t\tdiv.appendChild(label);\n\n\t\tconst updatePosition = () => {\n\t\t\tconst elemRect = this._elem.getBoundingClientRect();\n\t\t\tconsole.log(elemRect);\n\t\t\tdiv.style.left = (elemRect.left + this._rect.left) + 'px';\n\t\t\tdiv.style.top = (elemRect.top + this._rect.top) + 'px';\n\t\t\tdiv.style.width = this._rect.width + 'px';\n\t\t\tdiv.style.height = this._rect.height + 'px';\n\t\t};\n\n\t\t// This is for debugging only\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tdocument.body.appendChild(div);\n\t\tupdatePosition();\n\n\t\tconst observer = new ResizeObserver(updatePosition);\n\t\tobserver.observe(this._elem);\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tobserver.disconnect();\n\t\t\t\tdiv.remove();\n\t\t\t}\n\t\t};\n\t}\n}\n\nexport function debugView(value: unknown, reader: IReader): void {\n\tif (typeof value === 'object' && value && '$$visualization' in value) {\n\t\tconst vis = value['$$visualization'] as IVisualizationEffect;\n\t\tdebugReadDisposable(vis.visualize(), reader);\n\t}\n}\n\nfunction debugReadDisposable(d: IDisposable, reader: IReader): void {\n\tderived({ name: 'debugReadDisposable' }, (_reader) => {\n\t\t_reader.store.add(d);\n\t\treturn undefined;\n\t}).read(reader);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDisposable } from '../../../../../../../base/common/lifecycle.js';\nimport { IReader, derived } from '../../../../../../../base/common/observable.js';\nimport { Rect } from '../../../../../../common/core/2d/rect.js';\n\nexport interface IVisualizationEffect {\n\tvisualize(): IDisposable;\n}\n\nexport function setVisualization(data: object, visualization: IVisualizationEffect): void {\n\t// eslint-disable-next-line local/code-no-any-casts\n\t(data as any)['$$visualization'] = visualization;\n}\n\nexport function debugLogRects(rects: Record<string, Rect> | Rect[], elem: HTMLElement): object {\n\tif (Array.isArray(rects)) {\n\t\tconst record: Record<string, Rect> = {};\n\t\trects.forEach((rect, index) => {\n\t\t\trecord[index.toString()] = rect;\n\t\t});\n\t\trects = record;\n\t}\n\n\tsetVisualization(rects, new ManyRectVisualizer(rects, elem));\n\treturn rects;\n}\n\nexport function debugLogRect(rect: Rect, elem: HTMLElement, name: string): Rect {\n\tsetVisualization(rect, new HtmlRectVisualizer(rect, elem, name));\n\treturn rect;\n}\n\nexport function debugLogHorizontalOffsetRange(rect: Rect, elem: HTMLElement, name: string): Rect {\n\tsetVisualization(rect, new HtmlHorizontalOffsetRangeVisualizer(rect, elem, name, 0, 'above'));\n\treturn rect;\n}\n\nexport function debugLogHorizontalOffsetRanges(rects: Record<string, Rect> | Rect[], elem: HTMLElement): object {\n\tif (Array.isArray(rects)) {\n\t\tconst record: Record<string, Rect> = {};\n\t\trects.forEach((rect, index) => {\n\t\t\trecord[index.toString()] = rect;\n\t\t});\n\t\trects = record;\n\t}\n\n\tsetVisualization(rects, new ManyHorizontalOffsetRangeVisualizer(rects, elem));\n\treturn rects;\n}\n\nclass ManyRectVisualizer implements IVisualizationEffect {\n\tconstructor(\n\t\tprivate readonly _rects: Record<string, Rect>,\n\t\tprivate readonly _elem: HTMLElement\n\t) { }\n\n\tvisualize(): IDisposable {\n\t\tconst d: IDisposable[] = [];\n\t\tfor (const key in this._rects) {\n\t\t\tconst v = new HtmlRectVisualizer(this._rects[key], this._elem, key);\n\t\t\td.push(v.visualize());\n\t\t}\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\td.forEach(d => d.dispose());\n\t\t\t}\n\t\t};\n\t}\n}\n\nclass ManyHorizontalOffsetRangeVisualizer implements IVisualizationEffect {\n\tconstructor(\n\t\tprivate readonly _rects: Record<string, Rect>,\n\t\tprivate readonly _elem: HTMLElement\n\t) { }\n\n\tvisualize(): IDisposable {\n\t\tconst d: IDisposable[] = [];\n\t\tconst keys = Object.keys(this._rects);\n\t\tkeys.forEach((key, index) => {\n\t\t\t// Stagger labels: odd indices go above, even indices go below\n\t\t\tconst labelPosition = index % 2 === 0 ? 'above' : 'below';\n\t\t\tconst v = new HtmlHorizontalOffsetRangeVisualizer(this._rects[key], this._elem, key, index * 12, labelPosition);\n\t\t\td.push(v.visualize());\n\t\t});\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\td.forEach(d => d.dispose());\n\t\t\t}\n\t\t};\n\t}\n}\n\nclass HtmlHorizontalOffsetRangeVisualizer implements IVisualizationEffect {\n\tconstructor(\n\t\tprivate readonly _rect: Rect,\n\t\tprivate readonly _elem: HTMLElement,\n\t\tprivate readonly _name: string,\n\t\tprivate readonly _verticalOffset: number = 0,\n\t\tprivate readonly _labelPosition: 'above' | 'below' = 'above'\n\t) { }\n\n\tvisualize(): IDisposable {\n\t\tconst container = document.createElement('div');\n\t\tcontainer.style.position = 'fixed';\n\t\tcontainer.style.pointerEvents = 'none';\n\t\tcontainer.style.zIndex = '100000';\n\n\t\t// Create horizontal line\n\t\tconst horizontalLine = document.createElement('div');\n\t\thorizontalLine.style.position = 'absolute';\n\t\thorizontalLine.style.height = '2px';\n\t\thorizontalLine.style.backgroundColor = 'green';\n\t\thorizontalLine.style.top = '50%';\n\t\thorizontalLine.style.transform = 'translateY(-50%)';\n\n\t\t// Create start vertical bar\n\t\tconst startBar = document.createElement('div');\n\t\tstartBar.style.position = 'absolute';\n\t\tstartBar.style.width = '2px';\n\t\tstartBar.style.height = '8px';\n\t\tstartBar.style.backgroundColor = 'green';\n\t\tstartBar.style.left = '0';\n\t\tstartBar.style.top = '50%';\n\t\tstartBar.style.transform = 'translateY(-50%)';\n\n\t\t// Create end vertical bar\n\t\tconst endBar = document.createElement('div');\n\t\tendBar.style.position = 'absolute';\n\t\tendBar.style.width = '2px';\n\t\tendBar.style.height = '8px';\n\t\tendBar.style.backgroundColor = 'green';\n\t\tendBar.style.right = '0';\n\t\tendBar.style.top = '50%';\n\t\tendBar.style.transform = 'translateY(-50%)';\n\n\t\t// Create label\n\t\tconst label = document.createElement('div');\n\t\tlabel.textContent = this._name;\n\t\tlabel.style.position = 'absolute';\n\n\t\t// Position label above or below the line to avoid overlaps\n\t\tif (this._labelPosition === 'above') {\n\t\t\tlabel.style.bottom = '12px';\n\t\t} else {\n\t\t\tlabel.style.top = '12px';\n\t\t}\n\n\t\tlabel.style.left = '2px'; // Slight offset from start\n\t\tlabel.style.color = 'green';\n\t\tlabel.style.fontSize = '10px';\n\t\tlabel.style.backgroundColor = 'rgba(255, 255, 255, 0.95)';\n\t\tlabel.style.padding = '1px 3px';\n\t\tlabel.style.border = '1px solid green';\n\t\tlabel.style.borderRadius = '2px';\n\t\tlabel.style.whiteSpace = 'nowrap';\n\t\tlabel.style.boxShadow = '0 1px 2px rgba(0,0,0,0.15)';\n\t\tlabel.style.fontFamily = 'monospace';\n\n\t\tcontainer.appendChild(horizontalLine);\n\t\tcontainer.appendChild(startBar);\n\t\tcontainer.appendChild(endBar);\n\t\tcontainer.appendChild(label);\n\n\t\tconst updatePosition = () => {\n\t\t\tconst elemRect = this._elem.getBoundingClientRect();\n\t\t\tconst centerY = this._rect.top + (this._rect.height / 2) + this._verticalOffset;\n\t\t\tconst left = elemRect.left + this._rect.left;\n\t\t\tconst width = this._rect.width;\n\n\t\t\tcontainer.style.left = left + 'px';\n\t\t\tcontainer.style.top = (elemRect.top + centerY) + 'px';\n\t\t\tcontainer.style.width = width + 'px';\n\t\t\tcontainer.style.height = '8px';\n\n\t\t\thorizontalLine.style.width = width + 'px';\n\t\t};\n\n\t\t// This is for debugging only\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tdocument.body.appendChild(container);\n\t\tupdatePosition();\n\n\t\tconst observer = new ResizeObserver(updatePosition);\n\t\tobserver.observe(this._elem);\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tobserver.disconnect();\n\t\t\t\tcontainer.remove();\n\t\t\t}\n\t\t};\n\t}\n}\n\nclass HtmlRectVisualizer implements IVisualizationEffect {\n\tconstructor(\n\t\tprivate readonly _rect: Rect,\n\t\tprivate readonly _elem: HTMLElement,\n\t\tprivate readonly _name: string\n\t) { }\n\n\tvisualize(): IDisposable {\n\t\tconst div = document.createElement('div');\n\t\tdiv.style.position = 'fixed';\n\t\tdiv.style.border = '1px solid red';\n\t\tdiv.style.boxSizing = 'border-box';\n\t\tdiv.style.pointerEvents = 'none';\n\t\tdiv.style.zIndex = '100000';\n\n\t\tconst label = document.createElement('div');\n\t\tlabel.textContent = this._name;\n\t\tlabel.style.position = 'absolute';\n\t\tlabel.style.top = '-20px';\n\t\tlabel.style.left = '0';\n\t\tlabel.style.color = 'red';\n\t\tlabel.style.fontSize = '12px';\n\t\tlabel.style.backgroundColor = 'rgba(255, 255, 255, 0.7)';\n\t\tdiv.appendChild(label);\n\n\t\tconst updatePosition = () => {\n\t\t\tconst elemRect = this._elem.getBoundingClientRect();\n\t\t\tconsole.log(elemRect);\n\t\t\tdiv.style.left = (elemRect.left + this._rect.left) + 'px';\n\t\t\tdiv.style.top = (elemRect.top + this._rect.top) + 'px';\n\t\t\tdiv.style.width = this._rect.width + 'px';\n\t\t\tdiv.style.height = this._rect.height + 'px';\n\t\t};\n\n\t\t// This is for debugging only\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\tdocument.body.appendChild(div);\n\t\tupdatePosition();\n\n\t\tconst observer = new ResizeObserver(updatePosition);\n\t\tobserver.observe(this._elem);\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tobserver.disconnect();\n\t\t\t\tdiv.remove();\n\t\t\t}\n\t\t};\n\t}\n}\n\nexport function debugView(value: unknown, reader: IReader): void {\n\tif (typeof value === 'object' && value && '$$visualization' in value) {\n\t\tconst vis = value['$$visualization'] as IVisualizationEffect;\n\t\tdebugReadDisposable(vis.visualize(), reader);\n\t}\n}\n\nfunction debugReadDisposable(d: IDisposable, reader: IReader): void {\n\tderived({ name: 'debugReadDisposable' }, (_reader) => {\n\t\t_reader.store.add(d);\n\t\treturn undefined;\n\t}).read(reader);\n}\n"]}