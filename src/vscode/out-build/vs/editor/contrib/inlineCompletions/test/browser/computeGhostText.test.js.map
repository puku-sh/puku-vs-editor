{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/contrib/inlineCompletions/test/browser/computeGhostText.test.ts","vs/editor/contrib/inlineCompletions/test/browser/computeGhostText.test.ts"],"names":[],"mappings":"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","file":"computeGhostText.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { TextReplacement } from '../../../../common/core/edits/textEdit.js';\nimport { createTextModel } from '../../../../test/common/testTextModel.js';\nimport { computeGhostText } from '../../browser/model/computeGhostText.js';\n\nsuite('computeGhostText', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction getOutput(text: string, suggestion: string): unknown {\n\t\tconst rangeStartOffset = text.indexOf('[');\n\t\tconst rangeEndOffset = text.indexOf(']') - 1;\n\t\tconst cleanedText = text.replace('[', '').replace(']', '');\n\t\tconst tempModel = createTextModel(cleanedText);\n\t\tconst range = Range.fromPositions(tempModel.getPositionAt(rangeStartOffset), tempModel.getPositionAt(rangeEndOffset));\n\t\tconst options = ['prefix', 'subword'] as const;\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tconst result = {} as any;\n\t\tfor (const option of options) {\n\t\t\tresult[option] = computeGhostText(new TextReplacement(range, suggestion), tempModel, option)?.render(cleanedText, true);\n\t\t}\n\n\t\ttempModel.dispose();\n\n\t\tif (new Set(Object.values(result)).size === 1) {\n\t\t\treturn Object.values(result)[0];\n\t\t}\n\n\t\treturn result;\n\t}\n\n\ttest('Basic', () => {\n\t\tassert.deepStrictEqual(getOutput('[foo]baz', 'foobar'), 'foo[bar]baz');\n\t\tassert.deepStrictEqual(getOutput('[aaa]aaa', 'aaaaaa'), 'aaa[aaa]aaa');\n\t\tassert.deepStrictEqual(getOutput('[foo]baz', 'boobar'), undefined);\n\t\tassert.deepStrictEqual(getOutput('[foo]foo', 'foofoo'), 'foo[foo]foo');\n\t\tassert.deepStrictEqual(getOutput('foo[]', 'bar\\nhello'), 'foo[bar\\nhello]');\n\t});\n\n\ttest('Empty ghost text', () => {\n\t\tassert.deepStrictEqual(getOutput('[foo]', 'foo'), 'foo');\n\t});\n\n\ttest('Whitespace (indentation)', () => {\n\t\tassert.deepStrictEqual(getOutput('[ foo]', 'foobar'), ' foo[bar]');\n\t\tassert.deepStrictEqual(getOutput('[\\tfoo]', 'foobar'), '\\tfoo[bar]');\n\t\tassert.deepStrictEqual(getOutput('[\\t foo]', '\\tfoobar'), '\t foo[bar]');\n\t\tassert.deepStrictEqual(getOutput('[\\tfoo]', '\\t\\tfoobar'), { prefix: undefined, subword: '\\t[\\t]foo[bar]' });\n\t\tassert.deepStrictEqual(getOutput('[\\t]', '\\t\\tfoobar'), '\\t[\\tfoobar]');\n\t\tassert.deepStrictEqual(getOutput('\\t[]', '\\t'), '\\t[\\t]');\n\t\tassert.deepStrictEqual(getOutput('\\t[\\t]', ''), '\\t\\t');\n\n\t\tassert.deepStrictEqual(getOutput('[ ]', 'return 1'), ' [return 1]');\n\t});\n\n\ttest('Whitespace (outside of indentation)', () => {\n\t\tassert.deepStrictEqual(getOutput('bar[ foo]', 'foobar'), undefined);\n\t\tassert.deepStrictEqual(getOutput('bar[\\tfoo]', 'foobar'), undefined);\n\t});\n\n\ttest('Unsupported Case', () => {\n\t\tassert.deepStrictEqual(getOutput('fo[o\\n]', 'x\\nbar'), undefined);\n\t});\n\n\ttest('New Line', () => {\n\t\tassert.deepStrictEqual(getOutput('fo[o\\n]', 'o\\nbar'), 'foo\\n[bar]');\n\t});\n\n\ttest('Multi Part Diffing', () => {\n\t\tassert.deepStrictEqual(getOutput('foo[()]', '(x);'), { prefix: undefined, subword: 'foo([x])[;]' });\n\t\tassert.deepStrictEqual(getOutput('[\\tfoo]', '\\t\\tfoobar'), { prefix: undefined, subword: '\\t[\\t]foo[bar]' });\n\t\tassert.deepStrictEqual(getOutput('[(y ===)]', '(y === 1) { f(); }'), { prefix: undefined, subword: '(y ===[ 1])[ { f(); }]' });\n\t\tassert.deepStrictEqual(getOutput('[(y ==)]', '(y === 1) { f(); }'), { prefix: undefined, subword: '(y ==[= 1])[ { f(); }]' });\n\n\t\tassert.deepStrictEqual(getOutput('[(y ==)]', '(y === 1) { f(); }'), { prefix: undefined, subword: '(y ==[= 1])[ { f(); }]' });\n\t});\n\n\ttest('Multi Part Diffing 1', () => {\n\t\tassert.deepStrictEqual(getOutput('[if () ()]', 'if (1 == f()) ()'), { prefix: undefined, subword: 'if ([1 == f()]) ()' });\n\t});\n\n\ttest('Multi Part Diffing 2', () => {\n\t\tassert.deepStrictEqual(getOutput('[)]', '())'), ({ prefix: undefined, subword: '[(])[)]' }));\n\t\tassert.deepStrictEqual(getOutput('[))]', '(())'), ({ prefix: undefined, subword: '[((]))' }));\n\t});\n\n\ttest('Parenthesis Matching', () => {\n\t\tassert.deepStrictEqual(getOutput('[console.log()]', 'console.log({ label: \"(\" })'), {\n\t\t\tprefix: undefined,\n\t\t\tsubword: 'console.log([{ label: \"(\" }])'\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { TextReplacement } from '../../../../common/core/edits/textEdit.js';\nimport { createTextModel } from '../../../../test/common/testTextModel.js';\nimport { computeGhostText } from '../../browser/model/computeGhostText.js';\n\nsuite('computeGhostText', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction getOutput(text: string, suggestion: string): unknown {\n\t\tconst rangeStartOffset = text.indexOf('[');\n\t\tconst rangeEndOffset = text.indexOf(']') - 1;\n\t\tconst cleanedText = text.replace('[', '').replace(']', '');\n\t\tconst tempModel = createTextModel(cleanedText);\n\t\tconst range = Range.fromPositions(tempModel.getPositionAt(rangeStartOffset), tempModel.getPositionAt(rangeEndOffset));\n\t\tconst options = ['prefix', 'subword'] as const;\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tconst result = {} as any;\n\t\tfor (const option of options) {\n\t\t\tresult[option] = computeGhostText(new TextReplacement(range, suggestion), tempModel, option)?.render(cleanedText, true);\n\t\t}\n\n\t\ttempModel.dispose();\n\n\t\tif (new Set(Object.values(result)).size === 1) {\n\t\t\treturn Object.values(result)[0];\n\t\t}\n\n\t\treturn result;\n\t}\n\n\ttest('Basic', () => {\n\t\tassert.deepStrictEqual(getOutput('[foo]baz', 'foobar'), 'foo[bar]baz');\n\t\tassert.deepStrictEqual(getOutput('[aaa]aaa', 'aaaaaa'), 'aaa[aaa]aaa');\n\t\tassert.deepStrictEqual(getOutput('[foo]baz', 'boobar'), undefined);\n\t\tassert.deepStrictEqual(getOutput('[foo]foo', 'foofoo'), 'foo[foo]foo');\n\t\tassert.deepStrictEqual(getOutput('foo[]', 'bar\\nhello'), 'foo[bar\\nhello]');\n\t});\n\n\ttest('Empty ghost text', () => {\n\t\tassert.deepStrictEqual(getOutput('[foo]', 'foo'), 'foo');\n\t});\n\n\ttest('Whitespace (indentation)', () => {\n\t\tassert.deepStrictEqual(getOutput('[ foo]', 'foobar'), ' foo[bar]');\n\t\tassert.deepStrictEqual(getOutput('[\\tfoo]', 'foobar'), '\\tfoo[bar]');\n\t\tassert.deepStrictEqual(getOutput('[\\t foo]', '\\tfoobar'), '\t foo[bar]');\n\t\tassert.deepStrictEqual(getOutput('[\\tfoo]', '\\t\\tfoobar'), { prefix: undefined, subword: '\\t[\\t]foo[bar]' });\n\t\tassert.deepStrictEqual(getOutput('[\\t]', '\\t\\tfoobar'), '\\t[\\tfoobar]');\n\t\tassert.deepStrictEqual(getOutput('\\t[]', '\\t'), '\\t[\\t]');\n\t\tassert.deepStrictEqual(getOutput('\\t[\\t]', ''), '\\t\\t');\n\n\t\tassert.deepStrictEqual(getOutput('[ ]', 'return 1'), ' [return 1]');\n\t});\n\n\ttest('Whitespace (outside of indentation)', () => {\n\t\tassert.deepStrictEqual(getOutput('bar[ foo]', 'foobar'), undefined);\n\t\tassert.deepStrictEqual(getOutput('bar[\\tfoo]', 'foobar'), undefined);\n\t});\n\n\ttest('Unsupported Case', () => {\n\t\tassert.deepStrictEqual(getOutput('fo[o\\n]', 'x\\nbar'), undefined);\n\t});\n\n\ttest('New Line', () => {\n\t\tassert.deepStrictEqual(getOutput('fo[o\\n]', 'o\\nbar'), 'foo\\n[bar]');\n\t});\n\n\ttest('Multi Part Diffing', () => {\n\t\tassert.deepStrictEqual(getOutput('foo[()]', '(x);'), { prefix: undefined, subword: 'foo([x])[;]' });\n\t\tassert.deepStrictEqual(getOutput('[\\tfoo]', '\\t\\tfoobar'), { prefix: undefined, subword: '\\t[\\t]foo[bar]' });\n\t\tassert.deepStrictEqual(getOutput('[(y ===)]', '(y === 1) { f(); }'), { prefix: undefined, subword: '(y ===[ 1])[ { f(); }]' });\n\t\tassert.deepStrictEqual(getOutput('[(y ==)]', '(y === 1) { f(); }'), { prefix: undefined, subword: '(y ==[= 1])[ { f(); }]' });\n\n\t\tassert.deepStrictEqual(getOutput('[(y ==)]', '(y === 1) { f(); }'), { prefix: undefined, subword: '(y ==[= 1])[ { f(); }]' });\n\t});\n\n\ttest('Multi Part Diffing 1', () => {\n\t\tassert.deepStrictEqual(getOutput('[if () ()]', 'if (1 == f()) ()'), { prefix: undefined, subword: 'if ([1 == f()]) ()' });\n\t});\n\n\ttest('Multi Part Diffing 2', () => {\n\t\tassert.deepStrictEqual(getOutput('[)]', '())'), ({ prefix: undefined, subword: '[(])[)]' }));\n\t\tassert.deepStrictEqual(getOutput('[))]', '(())'), ({ prefix: undefined, subword: '[((]))' }));\n\t});\n\n\ttest('Parenthesis Matching', () => {\n\t\tassert.deepStrictEqual(getOutput('[console.log()]', 'console.log({ label: \"(\" })'), {\n\t\t\tprefix: undefined,\n\t\t\tsubword: 'console.log([{ label: \"(\" }])'\n\t\t});\n\t});\n});\n"]}