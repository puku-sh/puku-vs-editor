{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/contrib/snippet/test/browser/snippetController2.old.test.ts","vs/editor/contrib/snippet/test/browser/snippetController2.old.test.ts"],"names":[],"mappings":"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","file":"snippetController2.old.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ICodeEditor } from '../../../../browser/editorBrowser.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Selection } from '../../../../common/core/selection.js';\nimport { LanguageFeaturesService } from '../../../../common/services/languageFeaturesService.js';\nimport { SnippetController2 } from '../../browser/snippetController2.js';\nimport { ITestCodeEditor, withTestCodeEditor } from '../../../../test/browser/testCodeEditor.js';\nimport { TestLanguageConfigurationService } from '../../../../test/common/modes/testLanguageConfigurationService.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { ServiceCollection } from '../../../../../platform/instantiation/common/serviceCollection.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { NullLogService } from '../../../../../platform/log/common/log.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\n\nclass TestSnippetController extends SnippetController2 {\n\n\tprivate _testLanguageConfigurationService: TestLanguageConfigurationService;\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService\n\t) {\n\t\tconst testLanguageConfigurationService = new TestLanguageConfigurationService();\n\t\tsuper(editor, new NullLogService(), new LanguageFeaturesService(), _contextKeyService, testLanguageConfigurationService);\n\t\tthis._testLanguageConfigurationService = testLanguageConfigurationService;\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tthis._testLanguageConfigurationService.dispose();\n\t}\n\n\tisInSnippetMode(): boolean {\n\t\treturn SnippetController2.InSnippetMode.getValue(this._contextKeyService)!;\n\t}\n}\n\nsuite('SnippetController', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction snippetTest(cb: (editor: ITestCodeEditor, template: string, snippetController: TestSnippetController) => void, lines?: string[]): void {\n\n\t\tif (!lines) {\n\t\t\tlines = [\n\t\t\t\t'function test() {',\n\t\t\t\t'\\tvar x = 3;',\n\t\t\t\t'\\tvar arr = [];',\n\t\t\t\t'\\t',\n\t\t\t\t'}'\n\t\t\t];\n\t\t}\n\n\t\tconst serviceCollection = new ServiceCollection(\n\t\t\t[ILabelService, new class extends mock<ILabelService>() { }],\n\t\t\t[IWorkspaceContextService, new class extends mock<IWorkspaceContextService>() { }],\n\t\t);\n\n\t\twithTestCodeEditor(lines, { serviceCollection }, (editor) => {\n\t\t\teditor.getModel()!.updateOptions({\n\t\t\t\tinsertSpaces: false\n\t\t\t});\n\t\t\tconst snippetController = editor.registerAndInstantiateContribution(TestSnippetController.ID, TestSnippetController);\n\t\t\tconst template = [\n\t\t\t\t'for (var ${1:index}; $1 < ${2:array}.length; $1++) {',\n\t\t\t\t'\\tvar element = $2[$1];',\n\t\t\t\t'\\t$0',\n\t\t\t\t'}'\n\t\t\t].join('\\n');\n\n\t\t\tcb(editor, template, snippetController);\n\t\t\tsnippetController.dispose();\n\t\t});\n\t}\n\n\ttest('Simple accepted', () => {\n\t\tsnippetTest((editor, template, snippetController) => {\n\t\t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\n\t\t\tsnippetController.insert(template);\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(4), '\\tfor (var index; index < array.length; index++) {');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(5), '\\t\\tvar element = array[index];');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(6), '\\t\\t');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(7), '\\t}');\n\n\t\t\teditor.trigger('test', 'type', { text: 'i' });\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(4), '\\tfor (var i; i < array.length; i++) {');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(5), '\\t\\tvar element = array[i];');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(6), '\\t\\t');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(7), '\\t}');\n\n\t\t\tsnippetController.next();\n\t\t\teditor.trigger('test', 'type', { text: 'arr' });\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(4), '\\tfor (var i; i < arr.length; i++) {');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(5), '\\t\\tvar element = arr[i];');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(6), '\\t\\t');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(7), '\\t}');\n\n\t\t\tsnippetController.prev();\n\t\t\teditor.trigger('test', 'type', { text: 'j' });\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(4), '\\tfor (var j; j < arr.length; j++) {');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(5), '\\t\\tvar element = arr[j];');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(6), '\\t\\t');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(7), '\\t}');\n\n\t\t\tsnippetController.next();\n\t\t\tsnippetController.next();\n\t\t\tassert.deepStrictEqual(editor.getPosition(), new Position(6, 3));\n\t\t});\n\t});\n\n\ttest('Simple canceled', () => {\n\t\tsnippetTest((editor, template, snippetController) => {\n\t\t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\n\t\t\tsnippetController.insert(template);\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(4), '\\tfor (var index; index < array.length; index++) {');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(5), '\\t\\tvar element = array[index];');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(6), '\\t\\t');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(7), '\\t}');\n\n\t\t\tsnippetController.cancel();\n\t\t\tassert.deepStrictEqual(editor.getPosition(), new Position(4, 16));\n\t\t});\n\t});\n\n\t// test('Stops when deleting lines above', () => {\n\t// \tsnippetTest((editor, codeSnippet, snippetController) => {\n\t// \t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t// \t\tsnippetController.insert(codeSnippet, 0, 0);\n\n\t// \t\teditor.getModel()!.applyEdits([{\n\t// \t\t\tforceMoveMarkers: false,\n\t// \t\t\tidentifier: null,\n\t// \t\t\tisAutoWhitespaceEdit: false,\n\t// \t\t\trange: new Range(1, 1, 3, 1),\n\t// \t\t\ttext: null\n\t// \t\t}]);\n\n\t// \t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t// \t});\n\t// });\n\n\t// test('Stops when deleting lines below', () => {\n\t// \tsnippetTest((editor, codeSnippet, snippetController) => {\n\t// \t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t// \t\tsnippetController.run(codeSnippet, 0, 0);\n\n\t// \t\teditor.getModel()!.applyEdits([{\n\t// \t\t\tforceMoveMarkers: false,\n\t// \t\t\tidentifier: null,\n\t// \t\t\tisAutoWhitespaceEdit: false,\n\t// \t\t\trange: new Range(8, 1, 8, 100),\n\t// \t\t\ttext: null\n\t// \t\t}]);\n\n\t// \t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t// \t});\n\t// });\n\n\t// test('Stops when inserting lines above', () => {\n\t// \tsnippetTest((editor, codeSnippet, snippetController) => {\n\t// \t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t// \t\tsnippetController.run(codeSnippet, 0, 0);\n\n\t// \t\teditor.getModel()!.applyEdits([{\n\t// \t\t\tforceMoveMarkers: false,\n\t// \t\t\tidentifier: null,\n\t// \t\t\tisAutoWhitespaceEdit: false,\n\t// \t\t\trange: new Range(1, 100, 1, 100),\n\t// \t\t\ttext: '\\nHello'\n\t// \t\t}]);\n\n\t// \t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t// \t});\n\t// });\n\n\t// test('Stops when inserting lines below', () => {\n\t// \tsnippetTest((editor, codeSnippet, snippetController) => {\n\t// \t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t// \t\tsnippetController.run(codeSnippet, 0, 0);\n\n\t// \t\teditor.getModel()!.applyEdits([{\n\t// \t\t\tforceMoveMarkers: false,\n\t// \t\t\tidentifier: null,\n\t// \t\t\tisAutoWhitespaceEdit: false,\n\t// \t\t\trange: new Range(8, 100, 8, 100),\n\t// \t\t\ttext: '\\nHello'\n\t// \t\t}]);\n\n\t// \t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t// \t});\n\t// });\n\n\ttest('Stops when calling model.setValue()', () => {\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\teditor.getModel()!.setValue('goodbye');\n\n\t\t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t\t});\n\t});\n\n\ttest('Stops when undoing', () => {\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\teditor.getModel()!.undo();\n\n\t\t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t\t});\n\t});\n\n\ttest('Stops when moving cursor outside', () => {\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\teditor.setPosition({ lineNumber: 1, column: 1 });\n\n\t\t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t\t});\n\t});\n\n\ttest('Stops when disconnecting editor model', () => {\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\teditor.setModel(null);\n\n\t\t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t\t});\n\t});\n\n\ttest('Stops when disposing editor', () => {\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\tsnippetController.dispose();\n\n\t\t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t\t});\n\t});\n\n\ttest('Final tabstop with multiple selections', () => {\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 1, 1, 1),\n\t\t\t\tnew Selection(2, 1, 2, 1),\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'foo$0';\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 2);\n\t\t\tconst [first, second] = editor.getSelections()!;\n\t\t\tassert.ok(first.equalsRange({ startLineNumber: 1, startColumn: 4, endLineNumber: 1, endColumn: 4 }), first.toString());\n\t\t\tassert.ok(second.equalsRange({ startLineNumber: 2, startColumn: 4, endLineNumber: 2, endColumn: 4 }), second.toString());\n\t\t});\n\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 1, 1, 1),\n\t\t\t\tnew Selection(2, 1, 2, 1),\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'foo$0bar';\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 2);\n\t\t\tconst [first, second] = editor.getSelections()!;\n\t\t\tassert.ok(first.equalsRange({ startLineNumber: 1, startColumn: 4, endLineNumber: 1, endColumn: 4 }), first.toString());\n\t\t\tassert.ok(second.equalsRange({ startLineNumber: 2, startColumn: 4, endLineNumber: 2, endColumn: 4 }), second.toString());\n\t\t});\n\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 1, 1, 1),\n\t\t\t\tnew Selection(1, 5, 1, 5),\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'foo$0bar';\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 2);\n\t\t\tconst [first, second] = editor.getSelections()!;\n\t\t\tassert.ok(first.equalsRange({ startLineNumber: 1, startColumn: 4, endLineNumber: 1, endColumn: 4 }), first.toString());\n\t\t\tassert.ok(second.equalsRange({ startLineNumber: 1, startColumn: 14, endLineNumber: 1, endColumn: 14 }), second.toString());\n\t\t});\n\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 1, 1, 1),\n\t\t\t\tnew Selection(1, 5, 1, 5),\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'foo\\n$0\\nbar';\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 2);\n\t\t\tconst [first, second] = editor.getSelections()!;\n\t\t\tassert.ok(first.equalsRange({ startLineNumber: 2, startColumn: 1, endLineNumber: 2, endColumn: 1 }), first.toString());\n\t\t\tassert.ok(second.equalsRange({ startLineNumber: 4, startColumn: 1, endLineNumber: 4, endColumn: 1 }), second.toString());\n\t\t});\n\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 1, 1, 1),\n\t\t\t\tnew Selection(1, 5, 1, 5),\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'foo\\n$0\\nbar';\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 2);\n\t\t\tconst [first, second] = editor.getSelections()!;\n\t\t\tassert.ok(first.equalsRange({ startLineNumber: 2, startColumn: 1, endLineNumber: 2, endColumn: 1 }), first.toString());\n\t\t\tassert.ok(second.equalsRange({ startLineNumber: 4, startColumn: 1, endLineNumber: 4, endColumn: 1 }), second.toString());\n\t\t});\n\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(2, 7, 2, 7),\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'xo$0r';\n\t\t\tsnippetController.insert(codeSnippet, { overwriteBefore: 1 });\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 1);\n\t\t\tassert.ok(editor.getSelection()!.equalsRange({ startLineNumber: 2, startColumn: 8, endColumn: 8, endLineNumber: 2 }));\n\t\t});\n\t});\n\n\ttest('Final tabstop, #11742 simple', () => {\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelection(new Selection(1, 19, 1, 19));\n\n\t\t\tcodeSnippet = '{{% url_**$1** %}}';\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 1);\n\t\t\tassert.ok(editor.getSelection()!.equalsRange({ startLineNumber: 1, startColumn: 27, endLineNumber: 1, endColumn: 27 }));\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'example example {{% url_**** %}}');\n\n\t\t}, ['example example sc']);\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelection(new Selection(1, 3, 1, 3));\n\n\t\t\tcodeSnippet = [\n\t\t\t\t'afterEach((done) => {',\n\t\t\t\t'\\t${1}test',\n\t\t\t\t'});'\n\t\t\t].join('\\n');\n\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 1);\n\t\t\tassert.ok(editor.getSelection()!.equalsRange({ startLineNumber: 2, startColumn: 2, endLineNumber: 2, endColumn: 2 }), editor.getSelection()!.toString());\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'afterEach((done) => {\\n\\ttest\\n});');\n\n\t\t}, ['af']);\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelection(new Selection(1, 3, 1, 3));\n\n\t\t\tcodeSnippet = [\n\t\t\t\t'afterEach((done) => {',\n\t\t\t\t'${1}\\ttest',\n\t\t\t\t'});'\n\t\t\t].join('\\n');\n\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 1);\n\t\t\tassert.ok(editor.getSelection()!.equalsRange({ startLineNumber: 2, startColumn: 1, endLineNumber: 2, endColumn: 1 }), editor.getSelection()!.toString());\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'afterEach((done) => {\\n\\ttest\\n});');\n\n\t\t}, ['af']);\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelection(new Selection(1, 9, 1, 9));\n\n\t\t\tcodeSnippet = [\n\t\t\t\t'aft${1}er'\n\t\t\t].join('\\n');\n\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 8 });\n\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'after');\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 1);\n\t\t\tassert.ok(editor.getSelection()!.equalsRange({ startLineNumber: 1, startColumn: 4, endLineNumber: 1, endColumn: 4 }), editor.getSelection()!.toString());\n\n\t\t}, ['afterone']);\n\t});\n\n\ttest('Final tabstop, #11742 different indents', () => {\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(2, 4, 2, 4),\n\t\t\t\tnew Selection(1, 3, 1, 3)\n\t\t\t]);\n\n\t\t\tcodeSnippet = [\n\t\t\t\t'afterEach((done) => {',\n\t\t\t\t'\\t${0}test',\n\t\t\t\t'});'\n\t\t\t].join('\\n');\n\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 2);\n\t\t\tconst [first, second] = editor.getSelections()!;\n\n\t\t\tassert.ok(first.equalsRange({ startLineNumber: 5, startColumn: 3, endLineNumber: 5, endColumn: 3 }), first.toString());\n\t\t\tassert.ok(second.equalsRange({ startLineNumber: 2, startColumn: 2, endLineNumber: 2, endColumn: 2 }), second.toString());\n\n\t\t}, ['af', '\\taf']);\n\t});\n\n\ttest('Final tabstop, #11890 stay at the beginning', () => {\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 5, 1, 5)\n\t\t\t]);\n\n\t\t\tcodeSnippet = [\n\t\t\t\t'afterEach((done) => {',\n\t\t\t\t'${1}\\ttest',\n\t\t\t\t'});'\n\t\t\t].join('\\n');\n\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 1);\n\t\t\tconst [first] = editor.getSelections()!;\n\n\t\t\tassert.ok(first.equalsRange({ startLineNumber: 2, startColumn: 3, endLineNumber: 2, endColumn: 3 }), first.toString());\n\n\t\t}, ['  af']);\n\t});\n\n\ttest('Final tabstop, no tabstop', () => {\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 3, 1, 3)\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'afterEach';\n\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\n\t\t\tassert.ok(editor.getSelection()!.equalsRange({ startLineNumber: 1, startColumn: 10, endLineNumber: 1, endColumn: 10 }));\n\n\t\t}, ['af', '\\taf']);\n\t});\n\n\ttest('Multiple cursor and overwriteBefore/After, issue #11060', () => {\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 7, 1, 7),\n\t\t\t\tnew Selection(2, 4, 2, 4)\n\t\t\t]);\n\n\t\t\tcodeSnippet = '_foo';\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 1 });\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'this._foo\\nabc_foo');\n\n\t\t}, ['this._', 'abc']);\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 7, 1, 7),\n\t\t\t\tnew Selection(2, 4, 2, 4)\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'XX';\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 1 });\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'this.XX\\nabcXX');\n\n\t\t}, ['this._', 'abc']);\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 7, 1, 7),\n\t\t\t\tnew Selection(2, 4, 2, 4),\n\t\t\t\tnew Selection(3, 5, 3, 5)\n\t\t\t]);\n\n\t\t\tcodeSnippet = '_foo';\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 1 });\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'this._foo\\nabc_foo\\ndef_foo');\n\n\t\t}, ['this._', 'abc', 'def_']);\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 7, 1, 7), // primary at `this._`\n\t\t\t\tnew Selection(2, 4, 2, 4),\n\t\t\t\tnew Selection(3, 6, 3, 6)\n\t\t\t]);\n\n\t\t\tcodeSnippet = '._foo';\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'this._foo\\nabc._foo\\ndef._foo');\n\n\t\t}, ['this._', 'abc', 'def._']);\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(3, 6, 3, 6), // primary at `def._`\n\t\t\t\tnew Selection(1, 7, 1, 7),\n\t\t\t\tnew Selection(2, 4, 2, 4),\n\t\t\t]);\n\n\t\t\tcodeSnippet = '._foo';\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'this._foo\\nabc._foo\\ndef._foo');\n\n\t\t}, ['this._', 'abc', 'def._']);\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(2, 4, 2, 4), // primary at `abc`\n\t\t\t\tnew Selection(3, 6, 3, 6),\n\t\t\t\tnew Selection(1, 7, 1, 7),\n\t\t\t]);\n\n\t\t\tcodeSnippet = '._foo';\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'this._._foo\\na._foo\\ndef._._foo');\n\n\t\t}, ['this._', 'abc', 'def._']);\n\n\t});\n\n\ttest('Multiple cursor and overwriteBefore/After, #16277', () => {\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 5, 1, 5),\n\t\t\t\tnew Selection(2, 5, 2, 5),\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'document';\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 3 });\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), '{document}\\n{document && true}');\n\n\t\t}, ['{foo}', '{foo && true}']);\n\t});\n\n\ttest('Insert snippet twice, #19449', () => {\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 1, 1, 1)\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'for (var ${1:i}=0; ${1:i}<len; ${1:i}++) { $0 }';\n\t\t\tcontroller.insert(codeSnippet);\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'for (var i=0; i<len; i++) {  }for (var i=0; i<len; i++) {  }');\n\n\t\t}, ['for (var i=0; i<len; i++) {  }']);\n\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 1, 1, 1)\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'for (let ${1:i}=0; ${1:i}<len; ${1:i}++) { $0 }';\n\t\t\tcontroller.insert(codeSnippet);\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'for (let i=0; i<len; i++) {  }for (var i=0; i<len; i++) {  }');\n\n\t\t}, ['for (var i=0; i<len; i++) {  }']);\n\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ICodeEditor } from '../../../../browser/editorBrowser.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Selection } from '../../../../common/core/selection.js';\nimport { LanguageFeaturesService } from '../../../../common/services/languageFeaturesService.js';\nimport { SnippetController2 } from '../../browser/snippetController2.js';\nimport { ITestCodeEditor, withTestCodeEditor } from '../../../../test/browser/testCodeEditor.js';\nimport { TestLanguageConfigurationService } from '../../../../test/common/modes/testLanguageConfigurationService.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { ServiceCollection } from '../../../../../platform/instantiation/common/serviceCollection.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { NullLogService } from '../../../../../platform/log/common/log.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\n\nclass TestSnippetController extends SnippetController2 {\n\n\tprivate _testLanguageConfigurationService: TestLanguageConfigurationService;\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService\n\t) {\n\t\tconst testLanguageConfigurationService = new TestLanguageConfigurationService();\n\t\tsuper(editor, new NullLogService(), new LanguageFeaturesService(), _contextKeyService, testLanguageConfigurationService);\n\t\tthis._testLanguageConfigurationService = testLanguageConfigurationService;\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tthis._testLanguageConfigurationService.dispose();\n\t}\n\n\tisInSnippetMode(): boolean {\n\t\treturn SnippetController2.InSnippetMode.getValue(this._contextKeyService)!;\n\t}\n}\n\nsuite('SnippetController', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction snippetTest(cb: (editor: ITestCodeEditor, template: string, snippetController: TestSnippetController) => void, lines?: string[]): void {\n\n\t\tif (!lines) {\n\t\t\tlines = [\n\t\t\t\t'function test() {',\n\t\t\t\t'\\tvar x = 3;',\n\t\t\t\t'\\tvar arr = [];',\n\t\t\t\t'\\t',\n\t\t\t\t'}'\n\t\t\t];\n\t\t}\n\n\t\tconst serviceCollection = new ServiceCollection(\n\t\t\t[ILabelService, new class extends mock<ILabelService>() { }],\n\t\t\t[IWorkspaceContextService, new class extends mock<IWorkspaceContextService>() { }],\n\t\t);\n\n\t\twithTestCodeEditor(lines, { serviceCollection }, (editor) => {\n\t\t\teditor.getModel()!.updateOptions({\n\t\t\t\tinsertSpaces: false\n\t\t\t});\n\t\t\tconst snippetController = editor.registerAndInstantiateContribution(TestSnippetController.ID, TestSnippetController);\n\t\t\tconst template = [\n\t\t\t\t'for (var ${1:index}; $1 < ${2:array}.length; $1++) {',\n\t\t\t\t'\\tvar element = $2[$1];',\n\t\t\t\t'\\t$0',\n\t\t\t\t'}'\n\t\t\t].join('\\n');\n\n\t\t\tcb(editor, template, snippetController);\n\t\t\tsnippetController.dispose();\n\t\t});\n\t}\n\n\ttest('Simple accepted', () => {\n\t\tsnippetTest((editor, template, snippetController) => {\n\t\t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\n\t\t\tsnippetController.insert(template);\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(4), '\\tfor (var index; index < array.length; index++) {');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(5), '\\t\\tvar element = array[index];');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(6), '\\t\\t');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(7), '\\t}');\n\n\t\t\teditor.trigger('test', 'type', { text: 'i' });\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(4), '\\tfor (var i; i < array.length; i++) {');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(5), '\\t\\tvar element = array[i];');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(6), '\\t\\t');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(7), '\\t}');\n\n\t\t\tsnippetController.next();\n\t\t\teditor.trigger('test', 'type', { text: 'arr' });\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(4), '\\tfor (var i; i < arr.length; i++) {');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(5), '\\t\\tvar element = arr[i];');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(6), '\\t\\t');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(7), '\\t}');\n\n\t\t\tsnippetController.prev();\n\t\t\teditor.trigger('test', 'type', { text: 'j' });\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(4), '\\tfor (var j; j < arr.length; j++) {');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(5), '\\t\\tvar element = arr[j];');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(6), '\\t\\t');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(7), '\\t}');\n\n\t\t\tsnippetController.next();\n\t\t\tsnippetController.next();\n\t\t\tassert.deepStrictEqual(editor.getPosition(), new Position(6, 3));\n\t\t});\n\t});\n\n\ttest('Simple canceled', () => {\n\t\tsnippetTest((editor, template, snippetController) => {\n\t\t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\n\t\t\tsnippetController.insert(template);\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(4), '\\tfor (var index; index < array.length; index++) {');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(5), '\\t\\tvar element = array[index];');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(6), '\\t\\t');\n\t\t\tassert.strictEqual(editor.getModel()!.getLineContent(7), '\\t}');\n\n\t\t\tsnippetController.cancel();\n\t\t\tassert.deepStrictEqual(editor.getPosition(), new Position(4, 16));\n\t\t});\n\t});\n\n\t// test('Stops when deleting lines above', () => {\n\t// \tsnippetTest((editor, codeSnippet, snippetController) => {\n\t// \t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t// \t\tsnippetController.insert(codeSnippet, 0, 0);\n\n\t// \t\teditor.getModel()!.applyEdits([{\n\t// \t\t\tforceMoveMarkers: false,\n\t// \t\t\tidentifier: null,\n\t// \t\t\tisAutoWhitespaceEdit: false,\n\t// \t\t\trange: new Range(1, 1, 3, 1),\n\t// \t\t\ttext: null\n\t// \t\t}]);\n\n\t// \t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t// \t});\n\t// });\n\n\t// test('Stops when deleting lines below', () => {\n\t// \tsnippetTest((editor, codeSnippet, snippetController) => {\n\t// \t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t// \t\tsnippetController.run(codeSnippet, 0, 0);\n\n\t// \t\teditor.getModel()!.applyEdits([{\n\t// \t\t\tforceMoveMarkers: false,\n\t// \t\t\tidentifier: null,\n\t// \t\t\tisAutoWhitespaceEdit: false,\n\t// \t\t\trange: new Range(8, 1, 8, 100),\n\t// \t\t\ttext: null\n\t// \t\t}]);\n\n\t// \t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t// \t});\n\t// });\n\n\t// test('Stops when inserting lines above', () => {\n\t// \tsnippetTest((editor, codeSnippet, snippetController) => {\n\t// \t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t// \t\tsnippetController.run(codeSnippet, 0, 0);\n\n\t// \t\teditor.getModel()!.applyEdits([{\n\t// \t\t\tforceMoveMarkers: false,\n\t// \t\t\tidentifier: null,\n\t// \t\t\tisAutoWhitespaceEdit: false,\n\t// \t\t\trange: new Range(1, 100, 1, 100),\n\t// \t\t\ttext: '\\nHello'\n\t// \t\t}]);\n\n\t// \t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t// \t});\n\t// });\n\n\t// test('Stops when inserting lines below', () => {\n\t// \tsnippetTest((editor, codeSnippet, snippetController) => {\n\t// \t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t// \t\tsnippetController.run(codeSnippet, 0, 0);\n\n\t// \t\teditor.getModel()!.applyEdits([{\n\t// \t\t\tforceMoveMarkers: false,\n\t// \t\t\tidentifier: null,\n\t// \t\t\tisAutoWhitespaceEdit: false,\n\t// \t\t\trange: new Range(8, 100, 8, 100),\n\t// \t\t\ttext: '\\nHello'\n\t// \t\t}]);\n\n\t// \t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t// \t});\n\t// });\n\n\ttest('Stops when calling model.setValue()', () => {\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\teditor.getModel()!.setValue('goodbye');\n\n\t\t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t\t});\n\t});\n\n\ttest('Stops when undoing', () => {\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\teditor.getModel()!.undo();\n\n\t\t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t\t});\n\t});\n\n\ttest('Stops when moving cursor outside', () => {\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\teditor.setPosition({ lineNumber: 1, column: 1 });\n\n\t\t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t\t});\n\t});\n\n\ttest('Stops when disconnecting editor model', () => {\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\teditor.setModel(null);\n\n\t\t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t\t});\n\t});\n\n\ttest('Stops when disposing editor', () => {\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setPosition({ lineNumber: 4, column: 2 });\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\tsnippetController.dispose();\n\n\t\t\tassert.strictEqual(snippetController.isInSnippetMode(), false);\n\t\t});\n\t});\n\n\ttest('Final tabstop with multiple selections', () => {\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 1, 1, 1),\n\t\t\t\tnew Selection(2, 1, 2, 1),\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'foo$0';\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 2);\n\t\t\tconst [first, second] = editor.getSelections()!;\n\t\t\tassert.ok(first.equalsRange({ startLineNumber: 1, startColumn: 4, endLineNumber: 1, endColumn: 4 }), first.toString());\n\t\t\tassert.ok(second.equalsRange({ startLineNumber: 2, startColumn: 4, endLineNumber: 2, endColumn: 4 }), second.toString());\n\t\t});\n\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 1, 1, 1),\n\t\t\t\tnew Selection(2, 1, 2, 1),\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'foo$0bar';\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 2);\n\t\t\tconst [first, second] = editor.getSelections()!;\n\t\t\tassert.ok(first.equalsRange({ startLineNumber: 1, startColumn: 4, endLineNumber: 1, endColumn: 4 }), first.toString());\n\t\t\tassert.ok(second.equalsRange({ startLineNumber: 2, startColumn: 4, endLineNumber: 2, endColumn: 4 }), second.toString());\n\t\t});\n\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 1, 1, 1),\n\t\t\t\tnew Selection(1, 5, 1, 5),\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'foo$0bar';\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 2);\n\t\t\tconst [first, second] = editor.getSelections()!;\n\t\t\tassert.ok(first.equalsRange({ startLineNumber: 1, startColumn: 4, endLineNumber: 1, endColumn: 4 }), first.toString());\n\t\t\tassert.ok(second.equalsRange({ startLineNumber: 1, startColumn: 14, endLineNumber: 1, endColumn: 14 }), second.toString());\n\t\t});\n\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 1, 1, 1),\n\t\t\t\tnew Selection(1, 5, 1, 5),\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'foo\\n$0\\nbar';\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 2);\n\t\t\tconst [first, second] = editor.getSelections()!;\n\t\t\tassert.ok(first.equalsRange({ startLineNumber: 2, startColumn: 1, endLineNumber: 2, endColumn: 1 }), first.toString());\n\t\t\tassert.ok(second.equalsRange({ startLineNumber: 4, startColumn: 1, endLineNumber: 4, endColumn: 1 }), second.toString());\n\t\t});\n\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 1, 1, 1),\n\t\t\t\tnew Selection(1, 5, 1, 5),\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'foo\\n$0\\nbar';\n\t\t\tsnippetController.insert(codeSnippet);\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 2);\n\t\t\tconst [first, second] = editor.getSelections()!;\n\t\t\tassert.ok(first.equalsRange({ startLineNumber: 2, startColumn: 1, endLineNumber: 2, endColumn: 1 }), first.toString());\n\t\t\tassert.ok(second.equalsRange({ startLineNumber: 4, startColumn: 1, endLineNumber: 4, endColumn: 1 }), second.toString());\n\t\t});\n\n\t\tsnippetTest((editor, codeSnippet, snippetController) => {\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(2, 7, 2, 7),\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'xo$0r';\n\t\t\tsnippetController.insert(codeSnippet, { overwriteBefore: 1 });\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 1);\n\t\t\tassert.ok(editor.getSelection()!.equalsRange({ startLineNumber: 2, startColumn: 8, endColumn: 8, endLineNumber: 2 }));\n\t\t});\n\t});\n\n\ttest('Final tabstop, #11742 simple', () => {\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelection(new Selection(1, 19, 1, 19));\n\n\t\t\tcodeSnippet = '{{% url_**$1** %}}';\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 1);\n\t\t\tassert.ok(editor.getSelection()!.equalsRange({ startLineNumber: 1, startColumn: 27, endLineNumber: 1, endColumn: 27 }));\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'example example {{% url_**** %}}');\n\n\t\t}, ['example example sc']);\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelection(new Selection(1, 3, 1, 3));\n\n\t\t\tcodeSnippet = [\n\t\t\t\t'afterEach((done) => {',\n\t\t\t\t'\\t${1}test',\n\t\t\t\t'});'\n\t\t\t].join('\\n');\n\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 1);\n\t\t\tassert.ok(editor.getSelection()!.equalsRange({ startLineNumber: 2, startColumn: 2, endLineNumber: 2, endColumn: 2 }), editor.getSelection()!.toString());\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'afterEach((done) => {\\n\\ttest\\n});');\n\n\t\t}, ['af']);\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelection(new Selection(1, 3, 1, 3));\n\n\t\t\tcodeSnippet = [\n\t\t\t\t'afterEach((done) => {',\n\t\t\t\t'${1}\\ttest',\n\t\t\t\t'});'\n\t\t\t].join('\\n');\n\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 1);\n\t\t\tassert.ok(editor.getSelection()!.equalsRange({ startLineNumber: 2, startColumn: 1, endLineNumber: 2, endColumn: 1 }), editor.getSelection()!.toString());\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'afterEach((done) => {\\n\\ttest\\n});');\n\n\t\t}, ['af']);\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelection(new Selection(1, 9, 1, 9));\n\n\t\t\tcodeSnippet = [\n\t\t\t\t'aft${1}er'\n\t\t\t].join('\\n');\n\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 8 });\n\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'after');\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 1);\n\t\t\tassert.ok(editor.getSelection()!.equalsRange({ startLineNumber: 1, startColumn: 4, endLineNumber: 1, endColumn: 4 }), editor.getSelection()!.toString());\n\n\t\t}, ['afterone']);\n\t});\n\n\ttest('Final tabstop, #11742 different indents', () => {\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(2, 4, 2, 4),\n\t\t\t\tnew Selection(1, 3, 1, 3)\n\t\t\t]);\n\n\t\t\tcodeSnippet = [\n\t\t\t\t'afterEach((done) => {',\n\t\t\t\t'\\t${0}test',\n\t\t\t\t'});'\n\t\t\t].join('\\n');\n\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 2);\n\t\t\tconst [first, second] = editor.getSelections()!;\n\n\t\t\tassert.ok(first.equalsRange({ startLineNumber: 5, startColumn: 3, endLineNumber: 5, endColumn: 3 }), first.toString());\n\t\t\tassert.ok(second.equalsRange({ startLineNumber: 2, startColumn: 2, endLineNumber: 2, endColumn: 2 }), second.toString());\n\n\t\t}, ['af', '\\taf']);\n\t});\n\n\ttest('Final tabstop, #11890 stay at the beginning', () => {\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 5, 1, 5)\n\t\t\t]);\n\n\t\t\tcodeSnippet = [\n\t\t\t\t'afterEach((done) => {',\n\t\t\t\t'${1}\\ttest',\n\t\t\t\t'});'\n\t\t\t].join('\\n');\n\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\n\t\t\tassert.strictEqual(editor.getSelections()!.length, 1);\n\t\t\tconst [first] = editor.getSelections()!;\n\n\t\t\tassert.ok(first.equalsRange({ startLineNumber: 2, startColumn: 3, endLineNumber: 2, endColumn: 3 }), first.toString());\n\n\t\t}, ['  af']);\n\t});\n\n\ttest('Final tabstop, no tabstop', () => {\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 3, 1, 3)\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'afterEach';\n\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\n\t\t\tassert.ok(editor.getSelection()!.equalsRange({ startLineNumber: 1, startColumn: 10, endLineNumber: 1, endColumn: 10 }));\n\n\t\t}, ['af', '\\taf']);\n\t});\n\n\ttest('Multiple cursor and overwriteBefore/After, issue #11060', () => {\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 7, 1, 7),\n\t\t\t\tnew Selection(2, 4, 2, 4)\n\t\t\t]);\n\n\t\t\tcodeSnippet = '_foo';\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 1 });\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'this._foo\\nabc_foo');\n\n\t\t}, ['this._', 'abc']);\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 7, 1, 7),\n\t\t\t\tnew Selection(2, 4, 2, 4)\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'XX';\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 1 });\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'this.XX\\nabcXX');\n\n\t\t}, ['this._', 'abc']);\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 7, 1, 7),\n\t\t\t\tnew Selection(2, 4, 2, 4),\n\t\t\t\tnew Selection(3, 5, 3, 5)\n\t\t\t]);\n\n\t\t\tcodeSnippet = '_foo';\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 1 });\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'this._foo\\nabc_foo\\ndef_foo');\n\n\t\t}, ['this._', 'abc', 'def_']);\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 7, 1, 7), // primary at `this._`\n\t\t\t\tnew Selection(2, 4, 2, 4),\n\t\t\t\tnew Selection(3, 6, 3, 6)\n\t\t\t]);\n\n\t\t\tcodeSnippet = '._foo';\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'this._foo\\nabc._foo\\ndef._foo');\n\n\t\t}, ['this._', 'abc', 'def._']);\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(3, 6, 3, 6), // primary at `def._`\n\t\t\t\tnew Selection(1, 7, 1, 7),\n\t\t\t\tnew Selection(2, 4, 2, 4),\n\t\t\t]);\n\n\t\t\tcodeSnippet = '._foo';\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'this._foo\\nabc._foo\\ndef._foo');\n\n\t\t}, ['this._', 'abc', 'def._']);\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(2, 4, 2, 4), // primary at `abc`\n\t\t\t\tnew Selection(3, 6, 3, 6),\n\t\t\t\tnew Selection(1, 7, 1, 7),\n\t\t\t]);\n\n\t\t\tcodeSnippet = '._foo';\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 2 });\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'this._._foo\\na._foo\\ndef._._foo');\n\n\t\t}, ['this._', 'abc', 'def._']);\n\n\t});\n\n\ttest('Multiple cursor and overwriteBefore/After, #16277', () => {\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 5, 1, 5),\n\t\t\t\tnew Selection(2, 5, 2, 5),\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'document';\n\t\t\tcontroller.insert(codeSnippet, { overwriteBefore: 3 });\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), '{document}\\n{document && true}');\n\n\t\t}, ['{foo}', '{foo && true}']);\n\t});\n\n\ttest('Insert snippet twice, #19449', () => {\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 1, 1, 1)\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'for (var ${1:i}=0; ${1:i}<len; ${1:i}++) { $0 }';\n\t\t\tcontroller.insert(codeSnippet);\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'for (var i=0; i<len; i++) {  }for (var i=0; i<len; i++) {  }');\n\n\t\t}, ['for (var i=0; i<len; i++) {  }']);\n\n\n\t\tsnippetTest((editor, codeSnippet, controller) => {\n\n\t\t\teditor.setSelections([\n\t\t\t\tnew Selection(1, 1, 1, 1)\n\t\t\t]);\n\n\t\t\tcodeSnippet = 'for (let ${1:i}=0; ${1:i}<len; ${1:i}++) { $0 }';\n\t\t\tcontroller.insert(codeSnippet);\n\t\t\tassert.strictEqual(editor.getModel()!.getValue(), 'for (let i=0; i<len; i++) {  }for (var i=0; i<len; i++) {  }');\n\n\t\t}, ['for (var i=0; i<len; i++) {  }']);\n\n\t});\n});\n"]}