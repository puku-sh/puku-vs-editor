{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/contrib/snippet/test/browser/snippetVariables.test.ts","vs/editor/contrib/snippet/test/browser/snippetVariables.test.ts"],"names":[],"mappings":"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","file":"snippetVariables.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport * as sinon from 'sinon';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { sep } from '../../../../../base/common/path.js';\nimport { isWindows } from '../../../../../base/common/platform.js';\nimport { extUriBiasedIgnorePathCase } from '../../../../../base/common/resources.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { Selection } from '../../../../common/core/selection.js';\nimport { TextModel } from '../../../../common/model/textModel.js';\nimport { SnippetParser, Variable, VariableResolver } from '../../browser/snippetParser.js';\nimport { ClipboardBasedVariableResolver, CompositeSnippetVariableResolver, ModelBasedVariableResolver, SelectionBasedVariableResolver, TimeBasedVariableResolver, WorkspaceBasedVariableResolver } from '../../browser/snippetVariables.js';\nimport { createTextModel } from '../../../../test/common/testTextModel.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { IWorkspace, IWorkspaceContextService, toWorkspaceFolder } from '../../../../../platform/workspace/common/workspace.js';\nimport { Workspace } from '../../../../../platform/workspace/test/common/testWorkspace.js';\nimport { toWorkspaceFolders } from '../../../../../platform/workspaces/common/workspaces.js';\n\nsuite('Snippet Variables Resolver', function () {\n\n\n\tconst labelService = new class extends mock<ILabelService>() {\n\t\toverride getUriLabel(uri: URI) {\n\t\t\treturn uri.fsPath;\n\t\t}\n\t};\n\n\tlet model: TextModel;\n\tlet resolver: VariableResolver;\n\n\tsetup(function () {\n\t\tmodel = createTextModel([\n\t\t\t'this is line one',\n\t\t\t'this is line two',\n\t\t\t'    this is line three'\n\t\t].join('\\n'), undefined, undefined, URI.parse('file:///foo/files/text.txt'));\n\n\t\tresolver = new CompositeSnippetVariableResolver([\n\t\t\tnew ModelBasedVariableResolver(labelService, model),\n\t\t\tnew SelectionBasedVariableResolver(model, new Selection(1, 1, 1, 1), 0, undefined),\n\t\t]);\n\t});\n\n\tteardown(function () {\n\t\tmodel.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\n\tfunction assertVariableResolve(resolver: VariableResolver, varName: string, expected?: string) {\n\t\tconst snippet = new SnippetParser().parse(`$${varName}`);\n\t\tconst variable = <Variable>snippet.children[0];\n\t\tvariable.resolve(resolver);\n\t\tif (variable.children.length === 0) {\n\t\t\tassert.strictEqual(undefined, expected);\n\t\t} else {\n\t\t\tassert.strictEqual(variable.toString(), expected);\n\t\t}\n\t}\n\n\ttest('editor variables, basics', function () {\n\t\tassertVariableResolve(resolver, 'TM_FILENAME', 'text.txt');\n\t\tassertVariableResolve(resolver, 'something', undefined);\n\t});\n\n\ttest('editor variables, file/dir', function () {\n\n\t\tconst disposables = new DisposableStore();\n\n\t\tassertVariableResolve(resolver, 'TM_FILENAME', 'text.txt');\n\t\tif (!isWindows) {\n\t\t\tassertVariableResolve(resolver, 'TM_DIRECTORY', '/foo/files');\n\t\t\tassertVariableResolve(resolver, 'TM_DIRECTORY_BASE', 'files');\n\t\t\tassertVariableResolve(resolver, 'TM_FILEPATH', '/foo/files/text.txt');\n\t\t}\n\n\t\tresolver = new ModelBasedVariableResolver(\n\t\t\tlabelService,\n\t\t\tdisposables.add(createTextModel('', undefined, undefined, URI.parse('http://www.pb.o/abc/def/ghi')))\n\t\t);\n\t\tassertVariableResolve(resolver, 'TM_FILENAME', 'ghi');\n\t\tif (!isWindows) {\n\t\t\tassertVariableResolve(resolver, 'TM_DIRECTORY', '/abc/def');\n\t\t\tassertVariableResolve(resolver, 'TM_DIRECTORY_BASE', 'def');\n\t\t\tassertVariableResolve(resolver, 'TM_FILEPATH', '/abc/def/ghi');\n\t\t}\n\n\t\tresolver = new ModelBasedVariableResolver(\n\t\t\tlabelService,\n\t\t\tdisposables.add(createTextModel('', undefined, undefined, URI.parse('mem:fff.ts')))\n\t\t);\n\t\tassertVariableResolve(resolver, 'TM_DIRECTORY', '');\n\t\tassertVariableResolve(resolver, 'TM_DIRECTORY_BASE', '');\n\t\tassertVariableResolve(resolver, 'TM_FILEPATH', 'fff.ts');\n\n\t\tdisposables.dispose();\n\t});\n\n\ttest('Path delimiters in code snippet variables aren\\'t specific to remote OS #76840', function () {\n\n\t\tconst labelService = new class extends mock<ILabelService>() {\n\t\t\toverride getUriLabel(uri: URI) {\n\t\t\t\treturn uri.fsPath.replace(/\\/|\\\\/g, '|');\n\t\t\t}\n\t\t};\n\n\t\tconst model = createTextModel([].join('\\n'), undefined, undefined, URI.parse('foo:///foo/files/text.txt'));\n\n\t\tconst resolver = new CompositeSnippetVariableResolver([new ModelBasedVariableResolver(labelService, model)]);\n\n\t\tassertVariableResolve(resolver, 'TM_FILEPATH', '|foo|files|text.txt');\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('editor variables, selection', function () {\n\n\t\tresolver = new SelectionBasedVariableResolver(model, new Selection(1, 2, 2, 3), 0, undefined);\n\t\tassertVariableResolve(resolver, 'TM_SELECTED_TEXT', 'his is line one\\nth');\n\t\tassertVariableResolve(resolver, 'TM_CURRENT_LINE', 'this is line two');\n\t\tassertVariableResolve(resolver, 'TM_LINE_INDEX', '1');\n\t\tassertVariableResolve(resolver, 'TM_LINE_NUMBER', '2');\n\t\tassertVariableResolve(resolver, 'CURSOR_INDEX', '0');\n\t\tassertVariableResolve(resolver, 'CURSOR_NUMBER', '1');\n\n\t\tresolver = new SelectionBasedVariableResolver(model, new Selection(1, 2, 2, 3), 4, undefined);\n\t\tassertVariableResolve(resolver, 'CURSOR_INDEX', '4');\n\t\tassertVariableResolve(resolver, 'CURSOR_NUMBER', '5');\n\n\t\tresolver = new SelectionBasedVariableResolver(model, new Selection(2, 3, 1, 2), 0, undefined);\n\t\tassertVariableResolve(resolver, 'TM_SELECTED_TEXT', 'his is line one\\nth');\n\t\tassertVariableResolve(resolver, 'TM_CURRENT_LINE', 'this is line one');\n\t\tassertVariableResolve(resolver, 'TM_LINE_INDEX', '0');\n\t\tassertVariableResolve(resolver, 'TM_LINE_NUMBER', '1');\n\n\t\tresolver = new SelectionBasedVariableResolver(model, new Selection(1, 2, 1, 2), 0, undefined);\n\t\tassertVariableResolve(resolver, 'TM_SELECTED_TEXT', undefined);\n\n\t\tassertVariableResolve(resolver, 'TM_CURRENT_WORD', 'this');\n\n\t\tresolver = new SelectionBasedVariableResolver(model, new Selection(3, 1, 3, 1), 0, undefined);\n\t\tassertVariableResolve(resolver, 'TM_CURRENT_WORD', undefined);\n\n\t});\n\n\ttest('TextmateSnippet, resolve variable', function () {\n\t\tconst snippet = new SnippetParser().parse('\"$TM_CURRENT_WORD\"', true);\n\t\tassert.strictEqual(snippet.toString(), '\"\"');\n\t\tsnippet.resolveVariables(resolver);\n\t\tassert.strictEqual(snippet.toString(), '\"this\"');\n\n\t});\n\n\ttest('TextmateSnippet, resolve variable with default', function () {\n\t\tconst snippet = new SnippetParser().parse('\"${TM_CURRENT_WORD:foo}\"', true);\n\t\tassert.strictEqual(snippet.toString(), '\"foo\"');\n\t\tsnippet.resolveVariables(resolver);\n\t\tassert.strictEqual(snippet.toString(), '\"this\"');\n\t});\n\n\ttest('More useful environment variables for snippets, #32737', function () {\n\n\t\tconst disposables = new DisposableStore();\n\n\t\tassertVariableResolve(resolver, 'TM_FILENAME_BASE', 'text');\n\n\t\tresolver = new ModelBasedVariableResolver(\n\t\t\tlabelService,\n\t\t\tdisposables.add(createTextModel('', undefined, undefined, URI.parse('http://www.pb.o/abc/def/ghi')))\n\t\t);\n\t\tassertVariableResolve(resolver, 'TM_FILENAME_BASE', 'ghi');\n\n\t\tresolver = new ModelBasedVariableResolver(\n\t\t\tlabelService,\n\t\t\tdisposables.add(createTextModel('', undefined, undefined, URI.parse('mem:.git')))\n\t\t);\n\t\tassertVariableResolve(resolver, 'TM_FILENAME_BASE', '.git');\n\n\t\tresolver = new ModelBasedVariableResolver(\n\t\t\tlabelService,\n\t\t\tdisposables.add(createTextModel('', undefined, undefined, URI.parse('mem:foo.')))\n\t\t);\n\t\tassertVariableResolve(resolver, 'TM_FILENAME_BASE', 'foo');\n\n\t\tdisposables.dispose();\n\t});\n\n\n\tfunction assertVariableResolve2(input: string, expected: string, varValue?: string) {\n\t\tconst snippet = new SnippetParser().parse(input)\n\t\t\t.resolveVariables({ resolve(variable) { return varValue || variable.name; } });\n\n\t\tconst actual = snippet.toString();\n\t\tassert.strictEqual(actual, expected);\n\t}\n\n\ttest('Variable Snippet Transform', function () {\n\n\t\tconst snippet = new SnippetParser().parse('name=${TM_FILENAME/(.*)\\\\..+$/$1/}', true);\n\t\tsnippet.resolveVariables(resolver);\n\t\tassert.strictEqual(snippet.toString(), 'name=text');\n\n\t\tassertVariableResolve2('${ThisIsAVar/([A-Z]).*(Var)/$2/}', 'Var');\n\t\tassertVariableResolve2('${ThisIsAVar/([A-Z]).*(Var)/$2-${1:/downcase}/}', 'Var-t');\n\t\tassertVariableResolve2('${Foo/(.*)/${1:+Bar}/img}', 'Bar');\n\n\t\t//https://github.com/microsoft/vscode/issues/33162\n\t\tassertVariableResolve2('export default class ${TM_FILENAME/(\\\\w+)\\\\.js/$1/g}', 'export default class FooFile', 'FooFile.js');\n\n\t\tassertVariableResolve2('${foobarfoobar/(foo)/${1:+FAR}/g}', 'FARbarFARbar'); // global\n\t\tassertVariableResolve2('${foobarfoobar/(foo)/${1:+FAR}/}', 'FARbarfoobar'); // first match\n\t\tassertVariableResolve2('${foobarfoobar/(bazz)/${1:+FAR}/g}', 'foobarfoobar'); // no match, no else\n\t\t// assertVariableResolve2('${foobarfoobar/(bazz)/${1:+FAR}/g}', ''); // no match\n\n\t\tassertVariableResolve2('${foobarfoobar/(foo)/${2:+FAR}/g}', 'barbar'); // bad group reference\n\t});\n\n\ttest('Snippet transforms do not handle regex with alternatives or optional matches, #36089', function () {\n\n\t\tassertVariableResolve2(\n\t\t\t'${TM_FILENAME/^(.)|(?:-(.))|(\\\\.js)/${1:/upcase}${2:/upcase}/g}',\n\t\t\t'MyClass',\n\t\t\t'my-class.js'\n\t\t);\n\n\t\t// no hyphens\n\t\tassertVariableResolve2(\n\t\t\t'${TM_FILENAME/^(.)|(?:-(.))|(\\\\.js)/${1:/upcase}${2:/upcase}/g}',\n\t\t\t'Myclass',\n\t\t\t'myclass.js'\n\t\t);\n\n\t\t// none matching suffix\n\t\tassertVariableResolve2(\n\t\t\t'${TM_FILENAME/^(.)|(?:-(.))|(\\\\.js)/${1:/upcase}${2:/upcase}/g}',\n\t\t\t'Myclass.foo',\n\t\t\t'myclass.foo'\n\t\t);\n\n\t\t// more than one hyphen\n\t\tassertVariableResolve2(\n\t\t\t'${TM_FILENAME/^(.)|(?:-(.))|(\\\\.js)/${1:/upcase}${2:/upcase}/g}',\n\t\t\t'ThisIsAFile',\n\t\t\t'this-is-a-file.js'\n\t\t);\n\n\t\t// KEBAB CASE\n\t\tassertVariableResolve2(\n\t\t\t'${TM_FILENAME_BASE/([A-Z][a-z]+)([A-Z][a-z]+$)?/${1:/downcase}-${2:/downcase}/g}',\n\t\t\t'capital-case',\n\t\t\t'CapitalCase'\n\t\t);\n\n\t\tassertVariableResolve2(\n\t\t\t'${TM_FILENAME_BASE/([A-Z][a-z]+)([A-Z][a-z]+$)?/${1:/downcase}-${2:/downcase}/g}',\n\t\t\t'capital-case-more',\n\t\t\t'CapitalCaseMore'\n\t\t);\n\t});\n\n\ttest('Add variable to insert value from clipboard to a snippet #40153', function () {\n\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => undefined, 1, 0, true), 'CLIPBOARD', undefined);\n\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => null!, 1, 0, true), 'CLIPBOARD', undefined);\n\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => '', 1, 0, true), 'CLIPBOARD', undefined);\n\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => 'foo', 1, 0, true), 'CLIPBOARD', 'foo');\n\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => 'foo', 1, 0, true), 'foo', undefined);\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => 'foo', 1, 0, true), 'cLIPBOARD', undefined);\n\t});\n\n\ttest('Add variable to insert value from clipboard to a snippet #40153, 2', function () {\n\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => 'line1', 1, 2, true), 'CLIPBOARD', 'line1');\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => 'line1\\nline2\\nline3', 1, 2, true), 'CLIPBOARD', 'line1\\nline2\\nline3');\n\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => 'line1\\nline2', 1, 2, true), 'CLIPBOARD', 'line2');\n\t\tresolver = new ClipboardBasedVariableResolver(() => 'line1\\nline2', 0, 2, true);\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => 'line1\\nline2', 0, 2, true), 'CLIPBOARD', 'line1');\n\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => 'line1\\nline2', 0, 2, false), 'CLIPBOARD', 'line1\\nline2');\n\t});\n\n\n\tfunction assertVariableResolve3(resolver: VariableResolver, varName: string) {\n\t\tconst snippet = new SnippetParser().parse(`$${varName}`);\n\t\tconst variable = <Variable>snippet.children[0];\n\n\t\tassert.strictEqual(variable.resolve(resolver), true, `${varName} failed to resolve`);\n\t}\n\n\ttest('Add time variables for snippets #41631, #43140', function () {\n\n\t\tconst resolver = new TimeBasedVariableResolver;\n\n\t\tassertVariableResolve3(resolver, 'CURRENT_YEAR');\n\t\tassertVariableResolve3(resolver, 'CURRENT_YEAR_SHORT');\n\t\tassertVariableResolve3(resolver, 'CURRENT_MONTH');\n\t\tassertVariableResolve3(resolver, 'CURRENT_DATE');\n\t\tassertVariableResolve3(resolver, 'CURRENT_HOUR');\n\t\tassertVariableResolve3(resolver, 'CURRENT_MINUTE');\n\t\tassertVariableResolve3(resolver, 'CURRENT_SECOND');\n\t\tassertVariableResolve3(resolver, 'CURRENT_DAY_NAME');\n\t\tassertVariableResolve3(resolver, 'CURRENT_DAY_NAME_SHORT');\n\t\tassertVariableResolve3(resolver, 'CURRENT_MONTH_NAME');\n\t\tassertVariableResolve3(resolver, 'CURRENT_MONTH_NAME_SHORT');\n\t\tassertVariableResolve3(resolver, 'CURRENT_SECONDS_UNIX');\n\t\tassertVariableResolve3(resolver, 'CURRENT_TIMEZONE_OFFSET');\n\t});\n\n\ttest('Time-based snippet variables resolve to the same values even as time progresses', async function () {\n\t\tconst snippetText = `\n\t\t\t$CURRENT_YEAR\n\t\t\t$CURRENT_YEAR_SHORT\n\t\t\t$CURRENT_MONTH\n\t\t\t$CURRENT_DATE\n\t\t\t$CURRENT_HOUR\n\t\t\t$CURRENT_MINUTE\n\t\t\t$CURRENT_SECOND\n\t\t\t$CURRENT_DAY_NAME\n\t\t\t$CURRENT_DAY_NAME_SHORT\n\t\t\t$CURRENT_MONTH_NAME\n\t\t\t$CURRENT_MONTH_NAME_SHORT\n\t\t\t$CURRENT_SECONDS_UNIX\n\t\t\t$CURRENT_TIMEZONE_OFFSET\n\t\t`;\n\n\t\tconst clock = sinon.useFakeTimers();\n\t\ttry {\n\t\t\tconst resolver = new TimeBasedVariableResolver;\n\n\t\t\tconst firstResolve = new SnippetParser().parse(snippetText).resolveVariables(resolver);\n\t\t\tclock.tick((365 * 24 * 3600 * 1000) + (24 * 3600 * 1000) + (3661 * 1000));  // 1 year + 1 day + 1 hour + 1 minute + 1 second\n\t\t\tconst secondResolve = new SnippetParser().parse(snippetText).resolveVariables(resolver);\n\n\t\t\tassert.strictEqual(firstResolve.toString(), secondResolve.toString(), `Time-based snippet variables resolved differently`);\n\t\t} finally {\n\t\t\tclock.restore();\n\t\t}\n\t});\n\n\ttest('creating snippet - format-condition doesn\\'t work #53617', function () {\n\n\t\tconst snippet = new SnippetParser().parse('${TM_LINE_NUMBER/(10)/${1:?It is:It is not}/} line 10', true);\n\t\tsnippet.resolveVariables({ resolve() { return '10'; } });\n\t\tassert.strictEqual(snippet.toString(), 'It is line 10');\n\n\t\tsnippet.resolveVariables({ resolve() { return '11'; } });\n\t\tassert.strictEqual(snippet.toString(), 'It is not line 10');\n\t});\n\n\ttest('Add workspace name and folder variables for snippets #68261', function () {\n\n\t\tlet workspace: IWorkspace;\n\t\tconst workspaceService = new class implements IWorkspaceContextService {\n\t\t\tdeclare readonly _serviceBrand: undefined;\n\t\t\t_throw = () => { throw new Error(); };\n\t\t\tonDidChangeWorkbenchState = this._throw;\n\t\t\tonDidChangeWorkspaceName = this._throw;\n\t\t\tonWillChangeWorkspaceFolders = this._throw;\n\t\t\tonDidChangeWorkspaceFolders = this._throw;\n\t\t\tgetCompleteWorkspace = this._throw;\n\t\t\tgetWorkspace(): IWorkspace { return workspace; }\n\t\t\tgetWorkbenchState = this._throw;\n\t\t\tgetWorkspaceFolder = this._throw;\n\t\t\tisCurrentWorkspace = this._throw;\n\t\t\tisInsideWorkspace = this._throw;\n\t\t};\n\n\t\tconst resolver = new WorkspaceBasedVariableResolver(workspaceService);\n\n\t\t// empty workspace\n\t\tworkspace = new Workspace('');\n\t\tassertVariableResolve(resolver, 'WORKSPACE_NAME', undefined);\n\t\tassertVariableResolve(resolver, 'WORKSPACE_FOLDER', undefined);\n\n\t\t// single folder workspace without config\n\t\tworkspace = new Workspace('', [toWorkspaceFolder(URI.file('/folderName'))]);\n\t\tassertVariableResolve(resolver, 'WORKSPACE_NAME', 'folderName');\n\t\tif (!isWindows) {\n\t\t\tassertVariableResolve(resolver, 'WORKSPACE_FOLDER', '/folderName');\n\t\t}\n\n\t\t// workspace with config\n\t\tconst workspaceConfigPath = URI.file('testWorkspace.code-workspace');\n\t\tworkspace = new Workspace('', toWorkspaceFolders([{ path: 'folderName' }], workspaceConfigPath, extUriBiasedIgnorePathCase), workspaceConfigPath);\n\t\tassertVariableResolve(resolver, 'WORKSPACE_NAME', 'testWorkspace');\n\t\tif (!isWindows) {\n\t\t\tassertVariableResolve(resolver, 'WORKSPACE_FOLDER', '/');\n\t\t}\n\t});\n\n\ttest('Add RELATIVE_FILEPATH snippet variable #114208', function () {\n\n\t\tlet resolver: VariableResolver;\n\n\t\t// Mock a label service (only coded for file uris)\n\t\tconst workspaceLabelService = ((rootPath: string): ILabelService => {\n\t\t\tconst labelService = new class extends mock<ILabelService>() {\n\t\t\t\toverride getUriLabel(uri: URI, options: { relative?: boolean } = {}) {\n\t\t\t\t\tconst rootFsPath = URI.file(rootPath).fsPath + sep;\n\t\t\t\t\tconst fsPath = uri.fsPath;\n\t\t\t\t\tif (options.relative && rootPath && fsPath.startsWith(rootFsPath)) {\n\t\t\t\t\t\treturn fsPath.substring(rootFsPath.length);\n\t\t\t\t\t}\n\t\t\t\t\treturn fsPath;\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn labelService;\n\t\t});\n\n\t\tconst model = createTextModel('', undefined, undefined, URI.parse('file:///foo/files/text.txt'));\n\n\t\t// empty workspace\n\t\tresolver = new ModelBasedVariableResolver(\n\t\t\tworkspaceLabelService(''),\n\t\t\tmodel\n\t\t);\n\n\t\tif (!isWindows) {\n\t\t\tassertVariableResolve(resolver, 'RELATIVE_FILEPATH', '/foo/files/text.txt');\n\t\t} else {\n\t\t\tassertVariableResolve(resolver, 'RELATIVE_FILEPATH', '\\\\foo\\\\files\\\\text.txt');\n\t\t}\n\n\t\t// single folder workspace\n\t\tresolver = new ModelBasedVariableResolver(\n\t\t\tworkspaceLabelService('/foo'),\n\t\t\tmodel\n\t\t);\n\t\tif (!isWindows) {\n\t\t\tassertVariableResolve(resolver, 'RELATIVE_FILEPATH', 'files/text.txt');\n\t\t} else {\n\t\t\tassertVariableResolve(resolver, 'RELATIVE_FILEPATH', 'files\\\\text.txt');\n\t\t}\n\n\t\tmodel.dispose();\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport * as sinon from 'sinon';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { sep } from '../../../../../base/common/path.js';\nimport { isWindows } from '../../../../../base/common/platform.js';\nimport { extUriBiasedIgnorePathCase } from '../../../../../base/common/resources.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { Selection } from '../../../../common/core/selection.js';\nimport { TextModel } from '../../../../common/model/textModel.js';\nimport { SnippetParser, Variable, VariableResolver } from '../../browser/snippetParser.js';\nimport { ClipboardBasedVariableResolver, CompositeSnippetVariableResolver, ModelBasedVariableResolver, SelectionBasedVariableResolver, TimeBasedVariableResolver, WorkspaceBasedVariableResolver } from '../../browser/snippetVariables.js';\nimport { createTextModel } from '../../../../test/common/testTextModel.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { IWorkspace, IWorkspaceContextService, toWorkspaceFolder } from '../../../../../platform/workspace/common/workspace.js';\nimport { Workspace } from '../../../../../platform/workspace/test/common/testWorkspace.js';\nimport { toWorkspaceFolders } from '../../../../../platform/workspaces/common/workspaces.js';\n\nsuite('Snippet Variables Resolver', function () {\n\n\n\tconst labelService = new class extends mock<ILabelService>() {\n\t\toverride getUriLabel(uri: URI) {\n\t\t\treturn uri.fsPath;\n\t\t}\n\t};\n\n\tlet model: TextModel;\n\tlet resolver: VariableResolver;\n\n\tsetup(function () {\n\t\tmodel = createTextModel([\n\t\t\t'this is line one',\n\t\t\t'this is line two',\n\t\t\t'    this is line three'\n\t\t].join('\\n'), undefined, undefined, URI.parse('file:///foo/files/text.txt'));\n\n\t\tresolver = new CompositeSnippetVariableResolver([\n\t\t\tnew ModelBasedVariableResolver(labelService, model),\n\t\t\tnew SelectionBasedVariableResolver(model, new Selection(1, 1, 1, 1), 0, undefined),\n\t\t]);\n\t});\n\n\tteardown(function () {\n\t\tmodel.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\n\tfunction assertVariableResolve(resolver: VariableResolver, varName: string, expected?: string) {\n\t\tconst snippet = new SnippetParser().parse(`$${varName}`);\n\t\tconst variable = <Variable>snippet.children[0];\n\t\tvariable.resolve(resolver);\n\t\tif (variable.children.length === 0) {\n\t\t\tassert.strictEqual(undefined, expected);\n\t\t} else {\n\t\t\tassert.strictEqual(variable.toString(), expected);\n\t\t}\n\t}\n\n\ttest('editor variables, basics', function () {\n\t\tassertVariableResolve(resolver, 'TM_FILENAME', 'text.txt');\n\t\tassertVariableResolve(resolver, 'something', undefined);\n\t});\n\n\ttest('editor variables, file/dir', function () {\n\n\t\tconst disposables = new DisposableStore();\n\n\t\tassertVariableResolve(resolver, 'TM_FILENAME', 'text.txt');\n\t\tif (!isWindows) {\n\t\t\tassertVariableResolve(resolver, 'TM_DIRECTORY', '/foo/files');\n\t\t\tassertVariableResolve(resolver, 'TM_DIRECTORY_BASE', 'files');\n\t\t\tassertVariableResolve(resolver, 'TM_FILEPATH', '/foo/files/text.txt');\n\t\t}\n\n\t\tresolver = new ModelBasedVariableResolver(\n\t\t\tlabelService,\n\t\t\tdisposables.add(createTextModel('', undefined, undefined, URI.parse('http://www.pb.o/abc/def/ghi')))\n\t\t);\n\t\tassertVariableResolve(resolver, 'TM_FILENAME', 'ghi');\n\t\tif (!isWindows) {\n\t\t\tassertVariableResolve(resolver, 'TM_DIRECTORY', '/abc/def');\n\t\t\tassertVariableResolve(resolver, 'TM_DIRECTORY_BASE', 'def');\n\t\t\tassertVariableResolve(resolver, 'TM_FILEPATH', '/abc/def/ghi');\n\t\t}\n\n\t\tresolver = new ModelBasedVariableResolver(\n\t\t\tlabelService,\n\t\t\tdisposables.add(createTextModel('', undefined, undefined, URI.parse('mem:fff.ts')))\n\t\t);\n\t\tassertVariableResolve(resolver, 'TM_DIRECTORY', '');\n\t\tassertVariableResolve(resolver, 'TM_DIRECTORY_BASE', '');\n\t\tassertVariableResolve(resolver, 'TM_FILEPATH', 'fff.ts');\n\n\t\tdisposables.dispose();\n\t});\n\n\ttest('Path delimiters in code snippet variables aren\\'t specific to remote OS #76840', function () {\n\n\t\tconst labelService = new class extends mock<ILabelService>() {\n\t\t\toverride getUriLabel(uri: URI) {\n\t\t\t\treturn uri.fsPath.replace(/\\/|\\\\/g, '|');\n\t\t\t}\n\t\t};\n\n\t\tconst model = createTextModel([].join('\\n'), undefined, undefined, URI.parse('foo:///foo/files/text.txt'));\n\n\t\tconst resolver = new CompositeSnippetVariableResolver([new ModelBasedVariableResolver(labelService, model)]);\n\n\t\tassertVariableResolve(resolver, 'TM_FILEPATH', '|foo|files|text.txt');\n\n\t\tmodel.dispose();\n\t});\n\n\ttest('editor variables, selection', function () {\n\n\t\tresolver = new SelectionBasedVariableResolver(model, new Selection(1, 2, 2, 3), 0, undefined);\n\t\tassertVariableResolve(resolver, 'TM_SELECTED_TEXT', 'his is line one\\nth');\n\t\tassertVariableResolve(resolver, 'TM_CURRENT_LINE', 'this is line two');\n\t\tassertVariableResolve(resolver, 'TM_LINE_INDEX', '1');\n\t\tassertVariableResolve(resolver, 'TM_LINE_NUMBER', '2');\n\t\tassertVariableResolve(resolver, 'CURSOR_INDEX', '0');\n\t\tassertVariableResolve(resolver, 'CURSOR_NUMBER', '1');\n\n\t\tresolver = new SelectionBasedVariableResolver(model, new Selection(1, 2, 2, 3), 4, undefined);\n\t\tassertVariableResolve(resolver, 'CURSOR_INDEX', '4');\n\t\tassertVariableResolve(resolver, 'CURSOR_NUMBER', '5');\n\n\t\tresolver = new SelectionBasedVariableResolver(model, new Selection(2, 3, 1, 2), 0, undefined);\n\t\tassertVariableResolve(resolver, 'TM_SELECTED_TEXT', 'his is line one\\nth');\n\t\tassertVariableResolve(resolver, 'TM_CURRENT_LINE', 'this is line one');\n\t\tassertVariableResolve(resolver, 'TM_LINE_INDEX', '0');\n\t\tassertVariableResolve(resolver, 'TM_LINE_NUMBER', '1');\n\n\t\tresolver = new SelectionBasedVariableResolver(model, new Selection(1, 2, 1, 2), 0, undefined);\n\t\tassertVariableResolve(resolver, 'TM_SELECTED_TEXT', undefined);\n\n\t\tassertVariableResolve(resolver, 'TM_CURRENT_WORD', 'this');\n\n\t\tresolver = new SelectionBasedVariableResolver(model, new Selection(3, 1, 3, 1), 0, undefined);\n\t\tassertVariableResolve(resolver, 'TM_CURRENT_WORD', undefined);\n\n\t});\n\n\ttest('TextmateSnippet, resolve variable', function () {\n\t\tconst snippet = new SnippetParser().parse('\"$TM_CURRENT_WORD\"', true);\n\t\tassert.strictEqual(snippet.toString(), '\"\"');\n\t\tsnippet.resolveVariables(resolver);\n\t\tassert.strictEqual(snippet.toString(), '\"this\"');\n\n\t});\n\n\ttest('TextmateSnippet, resolve variable with default', function () {\n\t\tconst snippet = new SnippetParser().parse('\"${TM_CURRENT_WORD:foo}\"', true);\n\t\tassert.strictEqual(snippet.toString(), '\"foo\"');\n\t\tsnippet.resolveVariables(resolver);\n\t\tassert.strictEqual(snippet.toString(), '\"this\"');\n\t});\n\n\ttest('More useful environment variables for snippets, #32737', function () {\n\n\t\tconst disposables = new DisposableStore();\n\n\t\tassertVariableResolve(resolver, 'TM_FILENAME_BASE', 'text');\n\n\t\tresolver = new ModelBasedVariableResolver(\n\t\t\tlabelService,\n\t\t\tdisposables.add(createTextModel('', undefined, undefined, URI.parse('http://www.pb.o/abc/def/ghi')))\n\t\t);\n\t\tassertVariableResolve(resolver, 'TM_FILENAME_BASE', 'ghi');\n\n\t\tresolver = new ModelBasedVariableResolver(\n\t\t\tlabelService,\n\t\t\tdisposables.add(createTextModel('', undefined, undefined, URI.parse('mem:.git')))\n\t\t);\n\t\tassertVariableResolve(resolver, 'TM_FILENAME_BASE', '.git');\n\n\t\tresolver = new ModelBasedVariableResolver(\n\t\t\tlabelService,\n\t\t\tdisposables.add(createTextModel('', undefined, undefined, URI.parse('mem:foo.')))\n\t\t);\n\t\tassertVariableResolve(resolver, 'TM_FILENAME_BASE', 'foo');\n\n\t\tdisposables.dispose();\n\t});\n\n\n\tfunction assertVariableResolve2(input: string, expected: string, varValue?: string) {\n\t\tconst snippet = new SnippetParser().parse(input)\n\t\t\t.resolveVariables({ resolve(variable) { return varValue || variable.name; } });\n\n\t\tconst actual = snippet.toString();\n\t\tassert.strictEqual(actual, expected);\n\t}\n\n\ttest('Variable Snippet Transform', function () {\n\n\t\tconst snippet = new SnippetParser().parse('name=${TM_FILENAME/(.*)\\\\..+$/$1/}', true);\n\t\tsnippet.resolveVariables(resolver);\n\t\tassert.strictEqual(snippet.toString(), 'name=text');\n\n\t\tassertVariableResolve2('${ThisIsAVar/([A-Z]).*(Var)/$2/}', 'Var');\n\t\tassertVariableResolve2('${ThisIsAVar/([A-Z]).*(Var)/$2-${1:/downcase}/}', 'Var-t');\n\t\tassertVariableResolve2('${Foo/(.*)/${1:+Bar}/img}', 'Bar');\n\n\t\t//https://github.com/microsoft/vscode/issues/33162\n\t\tassertVariableResolve2('export default class ${TM_FILENAME/(\\\\w+)\\\\.js/$1/g}', 'export default class FooFile', 'FooFile.js');\n\n\t\tassertVariableResolve2('${foobarfoobar/(foo)/${1:+FAR}/g}', 'FARbarFARbar'); // global\n\t\tassertVariableResolve2('${foobarfoobar/(foo)/${1:+FAR}/}', 'FARbarfoobar'); // first match\n\t\tassertVariableResolve2('${foobarfoobar/(bazz)/${1:+FAR}/g}', 'foobarfoobar'); // no match, no else\n\t\t// assertVariableResolve2('${foobarfoobar/(bazz)/${1:+FAR}/g}', ''); // no match\n\n\t\tassertVariableResolve2('${foobarfoobar/(foo)/${2:+FAR}/g}', 'barbar'); // bad group reference\n\t});\n\n\ttest('Snippet transforms do not handle regex with alternatives or optional matches, #36089', function () {\n\n\t\tassertVariableResolve2(\n\t\t\t'${TM_FILENAME/^(.)|(?:-(.))|(\\\\.js)/${1:/upcase}${2:/upcase}/g}',\n\t\t\t'MyClass',\n\t\t\t'my-class.js'\n\t\t);\n\n\t\t// no hyphens\n\t\tassertVariableResolve2(\n\t\t\t'${TM_FILENAME/^(.)|(?:-(.))|(\\\\.js)/${1:/upcase}${2:/upcase}/g}',\n\t\t\t'Myclass',\n\t\t\t'myclass.js'\n\t\t);\n\n\t\t// none matching suffix\n\t\tassertVariableResolve2(\n\t\t\t'${TM_FILENAME/^(.)|(?:-(.))|(\\\\.js)/${1:/upcase}${2:/upcase}/g}',\n\t\t\t'Myclass.foo',\n\t\t\t'myclass.foo'\n\t\t);\n\n\t\t// more than one hyphen\n\t\tassertVariableResolve2(\n\t\t\t'${TM_FILENAME/^(.)|(?:-(.))|(\\\\.js)/${1:/upcase}${2:/upcase}/g}',\n\t\t\t'ThisIsAFile',\n\t\t\t'this-is-a-file.js'\n\t\t);\n\n\t\t// KEBAB CASE\n\t\tassertVariableResolve2(\n\t\t\t'${TM_FILENAME_BASE/([A-Z][a-z]+)([A-Z][a-z]+$)?/${1:/downcase}-${2:/downcase}/g}',\n\t\t\t'capital-case',\n\t\t\t'CapitalCase'\n\t\t);\n\n\t\tassertVariableResolve2(\n\t\t\t'${TM_FILENAME_BASE/([A-Z][a-z]+)([A-Z][a-z]+$)?/${1:/downcase}-${2:/downcase}/g}',\n\t\t\t'capital-case-more',\n\t\t\t'CapitalCaseMore'\n\t\t);\n\t});\n\n\ttest('Add variable to insert value from clipboard to a snippet #40153', function () {\n\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => undefined, 1, 0, true), 'CLIPBOARD', undefined);\n\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => null!, 1, 0, true), 'CLIPBOARD', undefined);\n\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => '', 1, 0, true), 'CLIPBOARD', undefined);\n\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => 'foo', 1, 0, true), 'CLIPBOARD', 'foo');\n\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => 'foo', 1, 0, true), 'foo', undefined);\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => 'foo', 1, 0, true), 'cLIPBOARD', undefined);\n\t});\n\n\ttest('Add variable to insert value from clipboard to a snippet #40153, 2', function () {\n\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => 'line1', 1, 2, true), 'CLIPBOARD', 'line1');\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => 'line1\\nline2\\nline3', 1, 2, true), 'CLIPBOARD', 'line1\\nline2\\nline3');\n\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => 'line1\\nline2', 1, 2, true), 'CLIPBOARD', 'line2');\n\t\tresolver = new ClipboardBasedVariableResolver(() => 'line1\\nline2', 0, 2, true);\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => 'line1\\nline2', 0, 2, true), 'CLIPBOARD', 'line1');\n\n\t\tassertVariableResolve(new ClipboardBasedVariableResolver(() => 'line1\\nline2', 0, 2, false), 'CLIPBOARD', 'line1\\nline2');\n\t});\n\n\n\tfunction assertVariableResolve3(resolver: VariableResolver, varName: string) {\n\t\tconst snippet = new SnippetParser().parse(`$${varName}`);\n\t\tconst variable = <Variable>snippet.children[0];\n\n\t\tassert.strictEqual(variable.resolve(resolver), true, `${varName} failed to resolve`);\n\t}\n\n\ttest('Add time variables for snippets #41631, #43140', function () {\n\n\t\tconst resolver = new TimeBasedVariableResolver;\n\n\t\tassertVariableResolve3(resolver, 'CURRENT_YEAR');\n\t\tassertVariableResolve3(resolver, 'CURRENT_YEAR_SHORT');\n\t\tassertVariableResolve3(resolver, 'CURRENT_MONTH');\n\t\tassertVariableResolve3(resolver, 'CURRENT_DATE');\n\t\tassertVariableResolve3(resolver, 'CURRENT_HOUR');\n\t\tassertVariableResolve3(resolver, 'CURRENT_MINUTE');\n\t\tassertVariableResolve3(resolver, 'CURRENT_SECOND');\n\t\tassertVariableResolve3(resolver, 'CURRENT_DAY_NAME');\n\t\tassertVariableResolve3(resolver, 'CURRENT_DAY_NAME_SHORT');\n\t\tassertVariableResolve3(resolver, 'CURRENT_MONTH_NAME');\n\t\tassertVariableResolve3(resolver, 'CURRENT_MONTH_NAME_SHORT');\n\t\tassertVariableResolve3(resolver, 'CURRENT_SECONDS_UNIX');\n\t\tassertVariableResolve3(resolver, 'CURRENT_TIMEZONE_OFFSET');\n\t});\n\n\ttest('Time-based snippet variables resolve to the same values even as time progresses', async function () {\n\t\tconst snippetText = `\n\t\t\t$CURRENT_YEAR\n\t\t\t$CURRENT_YEAR_SHORT\n\t\t\t$CURRENT_MONTH\n\t\t\t$CURRENT_DATE\n\t\t\t$CURRENT_HOUR\n\t\t\t$CURRENT_MINUTE\n\t\t\t$CURRENT_SECOND\n\t\t\t$CURRENT_DAY_NAME\n\t\t\t$CURRENT_DAY_NAME_SHORT\n\t\t\t$CURRENT_MONTH_NAME\n\t\t\t$CURRENT_MONTH_NAME_SHORT\n\t\t\t$CURRENT_SECONDS_UNIX\n\t\t\t$CURRENT_TIMEZONE_OFFSET\n\t\t`;\n\n\t\tconst clock = sinon.useFakeTimers();\n\t\ttry {\n\t\t\tconst resolver = new TimeBasedVariableResolver;\n\n\t\t\tconst firstResolve = new SnippetParser().parse(snippetText).resolveVariables(resolver);\n\t\t\tclock.tick((365 * 24 * 3600 * 1000) + (24 * 3600 * 1000) + (3661 * 1000));  // 1 year + 1 day + 1 hour + 1 minute + 1 second\n\t\t\tconst secondResolve = new SnippetParser().parse(snippetText).resolveVariables(resolver);\n\n\t\t\tassert.strictEqual(firstResolve.toString(), secondResolve.toString(), `Time-based snippet variables resolved differently`);\n\t\t} finally {\n\t\t\tclock.restore();\n\t\t}\n\t});\n\n\ttest('creating snippet - format-condition doesn\\'t work #53617', function () {\n\n\t\tconst snippet = new SnippetParser().parse('${TM_LINE_NUMBER/(10)/${1:?It is:It is not}/} line 10', true);\n\t\tsnippet.resolveVariables({ resolve() { return '10'; } });\n\t\tassert.strictEqual(snippet.toString(), 'It is line 10');\n\n\t\tsnippet.resolveVariables({ resolve() { return '11'; } });\n\t\tassert.strictEqual(snippet.toString(), 'It is not line 10');\n\t});\n\n\ttest('Add workspace name and folder variables for snippets #68261', function () {\n\n\t\tlet workspace: IWorkspace;\n\t\tconst workspaceService = new class implements IWorkspaceContextService {\n\t\t\tdeclare readonly _serviceBrand: undefined;\n\t\t\t_throw = () => { throw new Error(); };\n\t\t\tonDidChangeWorkbenchState = this._throw;\n\t\t\tonDidChangeWorkspaceName = this._throw;\n\t\t\tonWillChangeWorkspaceFolders = this._throw;\n\t\t\tonDidChangeWorkspaceFolders = this._throw;\n\t\t\tgetCompleteWorkspace = this._throw;\n\t\t\tgetWorkspace(): IWorkspace { return workspace; }\n\t\t\tgetWorkbenchState = this._throw;\n\t\t\tgetWorkspaceFolder = this._throw;\n\t\t\tisCurrentWorkspace = this._throw;\n\t\t\tisInsideWorkspace = this._throw;\n\t\t};\n\n\t\tconst resolver = new WorkspaceBasedVariableResolver(workspaceService);\n\n\t\t// empty workspace\n\t\tworkspace = new Workspace('');\n\t\tassertVariableResolve(resolver, 'WORKSPACE_NAME', undefined);\n\t\tassertVariableResolve(resolver, 'WORKSPACE_FOLDER', undefined);\n\n\t\t// single folder workspace without config\n\t\tworkspace = new Workspace('', [toWorkspaceFolder(URI.file('/folderName'))]);\n\t\tassertVariableResolve(resolver, 'WORKSPACE_NAME', 'folderName');\n\t\tif (!isWindows) {\n\t\t\tassertVariableResolve(resolver, 'WORKSPACE_FOLDER', '/folderName');\n\t\t}\n\n\t\t// workspace with config\n\t\tconst workspaceConfigPath = URI.file('testWorkspace.code-workspace');\n\t\tworkspace = new Workspace('', toWorkspaceFolders([{ path: 'folderName' }], workspaceConfigPath, extUriBiasedIgnorePathCase), workspaceConfigPath);\n\t\tassertVariableResolve(resolver, 'WORKSPACE_NAME', 'testWorkspace');\n\t\tif (!isWindows) {\n\t\t\tassertVariableResolve(resolver, 'WORKSPACE_FOLDER', '/');\n\t\t}\n\t});\n\n\ttest('Add RELATIVE_FILEPATH snippet variable #114208', function () {\n\n\t\tlet resolver: VariableResolver;\n\n\t\t// Mock a label service (only coded for file uris)\n\t\tconst workspaceLabelService = ((rootPath: string): ILabelService => {\n\t\t\tconst labelService = new class extends mock<ILabelService>() {\n\t\t\t\toverride getUriLabel(uri: URI, options: { relative?: boolean } = {}) {\n\t\t\t\t\tconst rootFsPath = URI.file(rootPath).fsPath + sep;\n\t\t\t\t\tconst fsPath = uri.fsPath;\n\t\t\t\t\tif (options.relative && rootPath && fsPath.startsWith(rootFsPath)) {\n\t\t\t\t\t\treturn fsPath.substring(rootFsPath.length);\n\t\t\t\t\t}\n\t\t\t\t\treturn fsPath;\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn labelService;\n\t\t});\n\n\t\tconst model = createTextModel('', undefined, undefined, URI.parse('file:///foo/files/text.txt'));\n\n\t\t// empty workspace\n\t\tresolver = new ModelBasedVariableResolver(\n\t\t\tworkspaceLabelService(''),\n\t\t\tmodel\n\t\t);\n\n\t\tif (!isWindows) {\n\t\t\tassertVariableResolve(resolver, 'RELATIVE_FILEPATH', '/foo/files/text.txt');\n\t\t} else {\n\t\t\tassertVariableResolve(resolver, 'RELATIVE_FILEPATH', '\\\\foo\\\\files\\\\text.txt');\n\t\t}\n\n\t\t// single folder workspace\n\t\tresolver = new ModelBasedVariableResolver(\n\t\t\tworkspaceLabelService('/foo'),\n\t\t\tmodel\n\t\t);\n\t\tif (!isWindows) {\n\t\t\tassertVariableResolve(resolver, 'RELATIVE_FILEPATH', 'files/text.txt');\n\t\t} else {\n\t\t\tassertVariableResolve(resolver, 'RELATIVE_FILEPATH', 'files\\\\text.txt');\n\t\t}\n\n\t\tmodel.dispose();\n\t});\n});\n"]}