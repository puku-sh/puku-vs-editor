{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/contrib/folding/test/browser/foldingModel.test.ts","vs/editor/contrib/folding/test/browser/foldingModel.test.ts"],"names":[],"mappings":"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","file":"foldingModel.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { escapeRegExpCharacters } from '../../../../../base/common/strings.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { EditOperation } from '../../../../common/core/editOperation.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { Selection } from '../../../../common/core/selection.js';\nimport { IModelDecorationsChangeAccessor, ITextModel, TrackedRangeStickiness } from '../../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../../common/model/textModel.js';\nimport { toSelectedLines } from '../../browser/folding.js';\nimport { FoldingModel, getNextFoldLine, getParentFoldLine, getPreviousFoldLine, setCollapseStateAtLevel, setCollapseStateForMatchingLines, setCollapseStateForRest, setCollapseStateLevelsDown, setCollapseStateLevelsUp, setCollapseStateUp } from '../../browser/foldingModel.js';\nimport { FoldingRegion } from '../../browser/foldingRanges.js';\nimport { computeRanges } from '../../browser/indentRangeProvider.js';\nimport { createTextModel } from '../../../../test/common/testTextModel.js';\n\n\ninterface ExpectedRegion {\n\tstartLineNumber: number;\n\tendLineNumber: number;\n\tisCollapsed: boolean;\n}\n\ninterface ExpectedDecoration {\n\tline: number;\n\ttype: 'hidden' | 'collapsed' | 'expanded';\n}\n\nexport class TestDecorationProvider {\n\n\tprivate static readonly collapsedDecoration = ModelDecorationOptions.register({\n\t\tdescription: 'test',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tlinesDecorationsClassName: 'folding'\n\t});\n\n\tprivate static readonly expandedDecoration = ModelDecorationOptions.register({\n\t\tdescription: 'test',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tlinesDecorationsClassName: 'folding'\n\t});\n\n\tprivate static readonly hiddenDecoration = ModelDecorationOptions.register({\n\t\tdescription: 'test',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tlinesDecorationsClassName: 'folding'\n\t});\n\n\tconstructor(private model: ITextModel) {\n\t}\n\n\tgetDecorationOption(isCollapsed: boolean, isHidden: boolean): ModelDecorationOptions {\n\t\tif (isHidden) {\n\t\t\treturn TestDecorationProvider.hiddenDecoration;\n\t\t}\n\t\tif (isCollapsed) {\n\t\t\treturn TestDecorationProvider.collapsedDecoration;\n\t\t}\n\t\treturn TestDecorationProvider.expandedDecoration;\n\t}\n\n\tchangeDecorations<T>(callback: (changeAccessor: IModelDecorationsChangeAccessor) => T): (T | null) {\n\t\treturn this.model.changeDecorations(callback);\n\t}\n\n\tremoveDecorations(decorationIds: string[]): void {\n\t\tthis.model.changeDecorations((changeAccessor) => {\n\t\t\tchangeAccessor.deltaDecorations(decorationIds, []);\n\t\t});\n\t}\n\n\tgetDecorations(): ExpectedDecoration[] {\n\t\tconst decorations = this.model.getAllDecorations();\n\t\tconst res: ExpectedDecoration[] = [];\n\t\tfor (const decoration of decorations) {\n\t\t\tif (decoration.options === TestDecorationProvider.hiddenDecoration) {\n\t\t\t\tres.push({ line: decoration.range.startLineNumber, type: 'hidden' });\n\t\t\t} else if (decoration.options === TestDecorationProvider.collapsedDecoration) {\n\t\t\t\tres.push({ line: decoration.range.startLineNumber, type: 'collapsed' });\n\t\t\t} else if (decoration.options === TestDecorationProvider.expandedDecoration) {\n\t\t\t\tres.push({ line: decoration.range.startLineNumber, type: 'expanded' });\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t}\n}\n\nsuite('Folding Model', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\tfunction r(startLineNumber: number, endLineNumber: number, isCollapsed: boolean = false): ExpectedRegion {\n\t\treturn { startLineNumber, endLineNumber, isCollapsed };\n\t}\n\n\tfunction d(line: number, type: 'hidden' | 'collapsed' | 'expanded'): ExpectedDecoration {\n\t\treturn { line, type };\n\t}\n\n\tfunction assertRegion(actual: FoldingRegion | null, expected: ExpectedRegion | null, message?: string) {\n\t\tassert.strictEqual(!!actual, !!expected, message);\n\t\tif (actual && expected) {\n\t\t\tassert.strictEqual(actual.startLineNumber, expected.startLineNumber, message);\n\t\t\tassert.strictEqual(actual.endLineNumber, expected.endLineNumber, message);\n\t\t\tassert.strictEqual(actual.isCollapsed, expected.isCollapsed, message);\n\t\t}\n\t}\n\n\tfunction assertFoldedRanges(foldingModel: FoldingModel, expectedRegions: ExpectedRegion[], message?: string) {\n\t\tconst actualRanges: ExpectedRegion[] = [];\n\t\tconst actual = foldingModel.regions;\n\t\tfor (let i = 0; i < actual.length; i++) {\n\t\t\tif (actual.isCollapsed(i)) {\n\t\t\t\tactualRanges.push(r(actual.getStartLineNumber(i), actual.getEndLineNumber(i)));\n\t\t\t}\n\t\t}\n\t\tassert.deepStrictEqual(actualRanges, expectedRegions, message);\n\t}\n\n\tfunction assertRanges(foldingModel: FoldingModel, expectedRegions: ExpectedRegion[], message?: string) {\n\t\tconst actualRanges: ExpectedRegion[] = [];\n\t\tconst actual = foldingModel.regions;\n\t\tfor (let i = 0; i < actual.length; i++) {\n\t\t\tactualRanges.push(r(actual.getStartLineNumber(i), actual.getEndLineNumber(i), actual.isCollapsed(i)));\n\t\t}\n\t\tassert.deepStrictEqual(actualRanges, expectedRegions, message);\n\t}\n\n\tfunction assertDecorations(foldingModel: FoldingModel, expectedDecoration: ExpectedDecoration[], message?: string) {\n\t\tconst decorationProvider = foldingModel.decorationProvider as TestDecorationProvider;\n\t\tassert.deepStrictEqual(decorationProvider.getDecorations(), expectedDecoration, message);\n\t}\n\n\tfunction assertRegions(actual: FoldingRegion[], expectedRegions: ExpectedRegion[], message?: string) {\n\t\tassert.deepStrictEqual(actual.map(r => ({ startLineNumber: r.startLineNumber, endLineNumber: r.endLineNumber, isCollapsed: r.isCollapsed })), expectedRegions, message);\n\t}\n\n\ttest('getRegionAtLine', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'/**',\n\t\t/* 2*/\t' * Comment',\n\t\t/* 3*/\t' */',\n\t\t/* 4*/\t'class A {',\n\t\t/* 5*/\t'  void foo() {',\n\t\t/* 6*/\t'    // comment {',\n\t\t/* 7*/\t'  }',\n\t\t/* 8*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, undefined);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 3, false);\n\t\t\tconst r2 = r(4, 7, false);\n\t\t\tconst r3 = r(5, 6, false);\n\n\t\t\tassertRanges(foldingModel, [r1, r2, r3]);\n\n\t\t\tassertRegion(foldingModel.getRegionAtLine(1), r1, '1');\n\t\t\tassertRegion(foldingModel.getRegionAtLine(2), r1, '2');\n\t\t\tassertRegion(foldingModel.getRegionAtLine(3), r1, '3');\n\t\t\tassertRegion(foldingModel.getRegionAtLine(4), r2, '4');\n\t\t\tassertRegion(foldingModel.getRegionAtLine(5), r3, '5');\n\t\t\tassertRegion(foldingModel.getRegionAtLine(6), r3, '5');\n\t\t\tassertRegion(foldingModel.getRegionAtLine(7), r2, '6');\n\t\t\tassertRegion(foldingModel.getRegionAtLine(8), null, '7');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\n\t});\n\n\ttest('collapse', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'/**',\n\t\t/* 2*/\t' * Comment',\n\t\t/* 3*/\t' */',\n\t\t/* 4*/\t'class A {',\n\t\t/* 5*/\t'  void foo() {',\n\t\t/* 6*/\t'    // comment {',\n\t\t/* 7*/\t'  }',\n\t\t/* 8*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, undefined);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 3, false);\n\t\t\tconst r2 = r(4, 7, false);\n\t\t\tconst r3 = r(5, 6, false);\n\n\t\t\tassertRanges(foldingModel, [r1, r2, r3]);\n\n\t\t\tfoldingModel.toggleCollapseState([foldingModel.getRegionAtLine(1)!]);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tassertRanges(foldingModel, [r(1, 3, true), r2, r3]);\n\n\t\t\tfoldingModel.toggleCollapseState([foldingModel.getRegionAtLine(5)!]);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tassertRanges(foldingModel, [r(1, 3, true), r2, r(5, 6, true)]);\n\n\t\t\tfoldingModel.toggleCollapseState([foldingModel.getRegionAtLine(7)!]);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tassertRanges(foldingModel, [r(1, 3, true), r(4, 7, true), r(5, 6, true)]);\n\n\t\t\ttextModel.dispose();\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\ttest('update', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'/**',\n\t\t/* 2*/\t' * Comment',\n\t\t/* 3*/\t' */',\n\t\t/* 4*/\t'class A {',\n\t\t/* 5*/\t'  void foo() {',\n\t\t/* 6*/\t'    // comment {',\n\t\t/* 7*/\t'  }',\n\t\t/* 8*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, undefined);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 3, false);\n\t\t\tconst r2 = r(4, 7, false);\n\t\t\tconst r3 = r(5, 6, false);\n\n\t\t\tassertRanges(foldingModel, [r1, r2, r3]);\n\t\t\tfoldingModel.toggleCollapseState([foldingModel.getRegionAtLine(2)!, foldingModel.getRegionAtLine(5)!]);\n\n\t\t\ttextModel.applyEdits([EditOperation.insert(new Position(4, 1), '//hello\\n')]);\n\n\t\t\tfoldingModel.update(computeRanges(textModel, false, undefined));\n\n\t\t\tassertRanges(foldingModel, [r(1, 3, true), r(5, 8, false), r(6, 7, true)]);\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\t});\n\n\ttest('delete', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'function foo() {',\n\t\t/* 2*/\t'  switch (x) {',\n\t\t/* 3*/\t'    case 1:',\n\t\t/* 4*/\t'      //hello1',\n\t\t/* 5*/\t'      break;',\n\t\t/* 6*/\t'    case 2:',\n\t\t/* 7*/\t'      //hello2',\n\t\t/* 8*/\t'      break;',\n\t\t/* 9*/\t'    case 3:',\n\t\t/* 10*/\t'      //hello3',\n\t\t/* 11*/\t'      break;',\n\t\t/* 12*/\t'  }',\n\t\t/* 13*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, undefined);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 12, false);\n\t\t\tconst r2 = r(2, 11, false);\n\t\t\tconst r3 = r(3, 5, false);\n\t\t\tconst r4 = r(6, 8, false);\n\t\t\tconst r5 = r(9, 11, false);\n\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5]);\n\t\t\tfoldingModel.toggleCollapseState([foldingModel.getRegionAtLine(6)!]);\n\n\t\t\ttextModel.applyEdits([EditOperation.delete(new Range(6, 11, 9, 0))]);\n\n\t\t\tfoldingModel.update(computeRanges(textModel, true, undefined), toSelectedLines([new Selection(7, 1, 7, 1)]));\n\n\t\t\tassertRanges(foldingModel, [r(1, 9, false), r(2, 8, false), r(3, 5, false), r(6, 8, false)]);\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\t});\n\n\ttest('getRegionsInside', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'/**',\n\t\t/* 2*/\t' * Comment',\n\t\t/* 3*/\t' */',\n\t\t/* 4*/\t'class A {',\n\t\t/* 5*/\t'  void foo() {',\n\t\t/* 6*/\t'    // comment {',\n\t\t/* 7*/\t'  }',\n\t\t/* 8*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, undefined);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 3, false);\n\t\t\tconst r2 = r(4, 7, false);\n\t\t\tconst r3 = r(5, 6, false);\n\n\t\t\tassertRanges(foldingModel, [r1, r2, r3]);\n\t\t\tconst region1 = foldingModel.getRegionAtLine(r1.startLineNumber);\n\t\t\tconst region2 = foldingModel.getRegionAtLine(r2.startLineNumber);\n\t\t\tconst region3 = foldingModel.getRegionAtLine(r3.startLineNumber);\n\n\t\t\tassertRegions(foldingModel.getRegionsInside(null), [r1, r2, r3], '1');\n\t\t\tassertRegions(foldingModel.getRegionsInside(region1), [], '2');\n\t\t\tassertRegions(foldingModel.getRegionsInside(region2), [r3], '3');\n\t\t\tassertRegions(foldingModel.getRegionsInside(region3), [], '4');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\ttest('getRegionsInsideWithLevel', () => {\n\t\tconst lines = [\n\t\t\t/* 1*/\t'//#region',\n\t\t\t/* 2*/\t'//#endregion',\n\t\t\t/* 3*/\t'class A {',\n\t\t\t/* 4*/\t'  void foo() {',\n\t\t\t/* 5*/\t'    if (true) {',\n\t\t\t/* 6*/\t'        return;',\n\t\t\t/* 7*/\t'    }',\n\t\t\t/* 8*/\t'    if (true) {',\n\t\t\t/* 9*/\t'      return;',\n\t\t\t/* 10*/\t'    }',\n\t\t\t/* 11*/\t'  }',\n\t\t\t/* 12*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\/\\/#region$/, end: /^\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 2, false);\n\t\t\tconst r2 = r(3, 11, false);\n\t\t\tconst r3 = r(4, 10, false);\n\t\t\tconst r4 = r(5, 6, false);\n\t\t\tconst r5 = r(8, 9, false);\n\n\t\t\tconst region1 = foldingModel.getRegionAtLine(r1.startLineNumber);\n\t\t\tconst region2 = foldingModel.getRegionAtLine(r2.startLineNumber);\n\t\t\tconst region3 = foldingModel.getRegionAtLine(r3.startLineNumber);\n\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5]);\n\n\t\t\tassertRegions(foldingModel.getRegionsInside(null, (r, level) => level === 1), [r1, r2], '1');\n\t\t\tassertRegions(foldingModel.getRegionsInside(null, (r, level) => level === 2), [r3], '2');\n\t\t\tassertRegions(foldingModel.getRegionsInside(null, (r, level) => level === 3), [r4, r5], '3');\n\n\t\t\tassertRegions(foldingModel.getRegionsInside(region2, (r, level) => level === 1), [r3], '4');\n\t\t\tassertRegions(foldingModel.getRegionsInside(region2, (r, level) => level === 2), [r4, r5], '5');\n\t\t\tassertRegions(foldingModel.getRegionsInside(region3, (r, level) => level === 1), [r4, r5], '6');\n\n\t\t\tassertRegions(foldingModel.getRegionsInside(region2, (r, level) => r.hidesLine(9)), [r3, r5], '7');\n\n\t\t\tassertRegions(foldingModel.getRegionsInside(region1, (r, level) => level === 1), [], '8');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\ttest('getRegionAtLine2', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'//#region',\n\t\t/* 2*/\t'class A {',\n\t\t/* 3*/\t'  void foo() {',\n\t\t/* 4*/\t'    if (true) {',\n\t\t/* 5*/\t'      //hello',\n\t\t/* 6*/\t'    }',\n\t\t/* 7*/\t'',\n\t\t/* 8*/\t'  }',\n\t\t/* 9*/\t'}',\n\t\t/* 10*/\t'//#endregion',\n\t\t/* 11*/\t''];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\/\\/#region$/, end: /^\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 10, false);\n\t\t\tconst r2 = r(2, 8, false);\n\t\t\tconst r3 = r(3, 7, false);\n\t\t\tconst r4 = r(4, 5, false);\n\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4]);\n\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(1), [r1], '1');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(2), [r1, r2].reverse(), '2');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(3), [r1, r2, r3].reverse(), '3');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(4), [r1, r2, r3, r4].reverse(), '4');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(5), [r1, r2, r3, r4].reverse(), '5');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(6), [r1, r2, r3].reverse(), '6');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(7), [r1, r2, r3].reverse(), '7');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(8), [r1, r2].reverse(), '8');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(9), [r1], '9');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(10), [r1], '10');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(11), [], '10');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\t});\n\n\ttest('setCollapseStateRecursivly', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'//#region',\n\t\t/* 2*/\t'//#endregion',\n\t\t/* 3*/\t'class A {',\n\t\t/* 4*/\t'  void foo() {',\n\t\t/* 5*/\t'    if (true) {',\n\t\t/* 6*/\t'        return;',\n\t\t/* 7*/\t'    }',\n\t\t/* 8*/\t'',\n\t\t/* 9*/\t'    if (true) {',\n\t\t/* 10*/\t'      return;',\n\t\t/* 11*/\t'    }',\n\t\t/* 12*/\t'  }',\n\t\t/* 13*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\/\\/#region$/, end: /^\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 2, false);\n\t\t\tconst r2 = r(3, 12, false);\n\t\t\tconst r3 = r(4, 11, false);\n\t\t\tconst r4 = r(5, 6, false);\n\t\t\tconst r5 = r(9, 10, false);\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5]);\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, true, Number.MAX_VALUE, [4]);\n\t\t\tassertFoldedRanges(foldingModel, [r3, r4, r5], '1');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, false, Number.MAX_VALUE, [8]);\n\t\t\tassertFoldedRanges(foldingModel, [], '2');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, true, Number.MAX_VALUE, [12]);\n\t\t\tassertFoldedRanges(foldingModel, [r2, r3, r4, r5], '1');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, false, Number.MAX_VALUE, [7]);\n\t\t\tassertFoldedRanges(foldingModel, [r2], '1');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, false);\n\t\t\tassertFoldedRanges(foldingModel, [], '1');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, true);\n\t\t\tassertFoldedRanges(foldingModel, [r1, r2, r3, r4, r5], '1');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\ttest('setCollapseStateAtLevel', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'//#region',\n\t\t/* 2*/\t'//#endregion',\n\t\t/* 3*/\t'class A {',\n\t\t/* 4*/\t'  void foo() {',\n\t\t/* 5*/\t'    if (true) {',\n\t\t/* 6*/\t'        return;',\n\t\t/* 7*/\t'    }',\n\t\t/* 8*/\t'',\n\t\t/* 9*/\t'    if (true) {',\n\t\t/* 10*/\t'      return;',\n\t\t/* 11*/\t'    }',\n\t\t/* 12*/\t'  }',\n\t\t/* 13*/\t'  //#region',\n\t\t/* 14*/\t'  const bar = 9;',\n\t\t/* 15*/\t'  //#endregion',\n\t\t/* 16*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\s*\\/\\/#region$/, end: /^\\s*\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 2, false);\n\t\t\tconst r2 = r(3, 15, false);\n\t\t\tconst r3 = r(4, 11, false);\n\t\t\tconst r4 = r(5, 6, false);\n\t\t\tconst r5 = r(9, 10, false);\n\t\t\tconst r6 = r(13, 15, false);\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5, r6]);\n\n\t\t\tsetCollapseStateAtLevel(foldingModel, 1, true, []);\n\t\t\tassertFoldedRanges(foldingModel, [r1, r2], '1');\n\n\t\t\tsetCollapseStateAtLevel(foldingModel, 1, false, [5]);\n\t\t\tassertFoldedRanges(foldingModel, [r2], '2');\n\n\t\t\tsetCollapseStateAtLevel(foldingModel, 1, false, [1]);\n\t\t\tassertFoldedRanges(foldingModel, [], '3');\n\n\t\t\tsetCollapseStateAtLevel(foldingModel, 2, true, []);\n\t\t\tassertFoldedRanges(foldingModel, [r3, r6], '4');\n\n\t\t\tsetCollapseStateAtLevel(foldingModel, 2, false, [5, 6]);\n\t\t\tassertFoldedRanges(foldingModel, [r3], '5');\n\n\t\t\tsetCollapseStateAtLevel(foldingModel, 3, true, [4, 9]);\n\t\t\tassertFoldedRanges(foldingModel, [r3, r4], '6');\n\n\t\t\tsetCollapseStateAtLevel(foldingModel, 3, false, [4, 9]);\n\t\t\tassertFoldedRanges(foldingModel, [r3], '7');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\t});\n\n\ttest('setCollapseStateLevelsDown', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'//#region',\n\t\t/* 2*/\t'//#endregion',\n\t\t/* 3*/\t'class A {',\n\t\t/* 4*/\t'  void foo() {',\n\t\t/* 5*/\t'    if (true) {',\n\t\t/* 6*/\t'        return;',\n\t\t/* 7*/\t'    }',\n\t\t/* 8*/\t'',\n\t\t/* 9*/\t'    if (true) {',\n\t\t/* 10*/\t'      return;',\n\t\t/* 11*/\t'    }',\n\t\t/* 12*/\t'  }',\n\t\t/* 13*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\/\\/#region$/, end: /^\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 2, false);\n\t\t\tconst r2 = r(3, 12, false);\n\t\t\tconst r3 = r(4, 11, false);\n\t\t\tconst r4 = r(5, 6, false);\n\t\t\tconst r5 = r(9, 10, false);\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5]);\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, true, 1, [4]);\n\t\t\tassertFoldedRanges(foldingModel, [r3], '1');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, true, 2, [4]);\n\t\t\tassertFoldedRanges(foldingModel, [r3, r4, r5], '2');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, false, 2, [3]);\n\t\t\tassertFoldedRanges(foldingModel, [r4, r5], '3');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, false, 2, [2]);\n\t\t\tassertFoldedRanges(foldingModel, [r4, r5], '4');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, true, 4, [2]);\n\t\t\tassertFoldedRanges(foldingModel, [r1, r4, r5], '5');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, false, 4, [2, 3]);\n\t\t\tassertFoldedRanges(foldingModel, [], '6');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\t});\n\n\ttest('setCollapseStateLevelsUp', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'//#region',\n\t\t/* 2*/\t'//#endregion',\n\t\t/* 3*/\t'class A {',\n\t\t/* 4*/\t'  void foo() {',\n\t\t/* 5*/\t'    if (true) {',\n\t\t/* 6*/\t'        return;',\n\t\t/* 7*/\t'    }',\n\t\t/* 8*/\t'',\n\t\t/* 9*/\t'    if (true) {',\n\t\t/* 10*/\t'      return;',\n\t\t/* 11*/\t'    }',\n\t\t/* 12*/\t'  }',\n\t\t/* 13*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\/\\/#region$/, end: /^\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 2, false);\n\t\t\tconst r2 = r(3, 12, false);\n\t\t\tconst r3 = r(4, 11, false);\n\t\t\tconst r4 = r(5, 6, false);\n\t\t\tconst r5 = r(9, 10, false);\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5]);\n\n\t\t\tsetCollapseStateLevelsUp(foldingModel, true, 1, [4]);\n\t\t\tassertFoldedRanges(foldingModel, [r3], '1');\n\n\t\t\tsetCollapseStateLevelsUp(foldingModel, true, 2, [4]);\n\t\t\tassertFoldedRanges(foldingModel, [r2, r3], '2');\n\n\t\t\tsetCollapseStateLevelsUp(foldingModel, false, 4, [1, 3, 4]);\n\t\t\tassertFoldedRanges(foldingModel, [], '3');\n\n\t\t\tsetCollapseStateLevelsUp(foldingModel, true, 2, [10]);\n\t\t\tassertFoldedRanges(foldingModel, [r3, r5], '4');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\ttest('setCollapseStateUp', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'//#region',\n\t\t/* 2*/\t'//#endregion',\n\t\t/* 3*/\t'class A {',\n\t\t/* 4*/\t'  void foo() {',\n\t\t/* 5*/\t'    if (true) {',\n\t\t/* 6*/\t'        return;',\n\t\t/* 7*/\t'    }',\n\t\t/* 8*/\t'',\n\t\t/* 9*/\t'    if (true) {',\n\t\t/* 10*/\t'      return;',\n\t\t/* 11*/\t'    }',\n\t\t/* 12*/\t'  }',\n\t\t/* 13*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\/\\/#region$/, end: /^\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 2, false);\n\t\t\tconst r2 = r(3, 12, false);\n\t\t\tconst r3 = r(4, 11, false);\n\t\t\tconst r4 = r(5, 6, false);\n\t\t\tconst r5 = r(9, 10, false);\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5]);\n\n\t\t\tsetCollapseStateUp(foldingModel, true, [5]);\n\t\t\tassertFoldedRanges(foldingModel, [r4], '1');\n\n\t\t\tsetCollapseStateUp(foldingModel, true, [5]);\n\t\t\tassertFoldedRanges(foldingModel, [r3, r4], '2');\n\n\t\t\tsetCollapseStateUp(foldingModel, true, [4]);\n\t\t\tassertFoldedRanges(foldingModel, [r2, r3, r4], '2');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\n\ttest('setCollapseStateForMatchingLines', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'/**',\n\t\t/* 2*/\t' * the class',\n\t\t/* 3*/\t' */',\n\t\t/* 4*/\t'class A {',\n\t\t/* 5*/\t'  /**',\n\t\t/* 6*/\t'   * the foo',\n\t\t/* 7*/\t'   */',\n\t\t/* 8*/\t'  void foo() {',\n\t\t/* 9*/\t'    /*',\n\t\t/* 10*/\t'     * the comment',\n\t\t/* 11*/\t'     */',\n\t\t/* 12*/\t'  }',\n\t\t/* 13*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\/\\/#region$/, end: /^\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 3, false);\n\t\t\tconst r2 = r(4, 12, false);\n\t\t\tconst r3 = r(5, 7, false);\n\t\t\tconst r4 = r(8, 11, false);\n\t\t\tconst r5 = r(9, 11, false);\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5]);\n\n\t\t\tconst regExp = new RegExp('^\\\\s*' + escapeRegExpCharacters('/*'));\n\t\t\tsetCollapseStateForMatchingLines(foldingModel, regExp, true);\n\t\t\tassertFoldedRanges(foldingModel, [r1, r3, r5], '1');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\n\ttest('setCollapseStateForRest', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'//#region',\n\t\t/* 2*/\t'//#endregion',\n\t\t/* 3*/\t'class A {',\n\t\t/* 4*/\t'  void foo() {',\n\t\t/* 5*/\t'    if (true) {',\n\t\t/* 6*/\t'        return;',\n\t\t/* 7*/\t'    }',\n\t\t/* 8*/\t'',\n\t\t/* 9*/\t'    if (true) {',\n\t\t/* 10*/\t'      return;',\n\t\t/* 11*/\t'    }',\n\t\t/* 12*/\t'  }',\n\t\t/* 13*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\/\\/#region$/, end: /^\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 2, false);\n\t\t\tconst r2 = r(3, 12, false);\n\t\t\tconst r3 = r(4, 11, false);\n\t\t\tconst r4 = r(5, 6, false);\n\t\t\tconst r5 = r(9, 10, false);\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5]);\n\n\t\t\tsetCollapseStateForRest(foldingModel, true, [5]);\n\t\t\tassertFoldedRanges(foldingModel, [r1, r5], '1');\n\n\t\t\tsetCollapseStateForRest(foldingModel, false, [5]);\n\t\t\tassertFoldedRanges(foldingModel, [], '2');\n\n\t\t\tsetCollapseStateForRest(foldingModel, true, [1]);\n\t\t\tassertFoldedRanges(foldingModel, [r2, r3, r4, r5], '3');\n\n\t\t\tsetCollapseStateForRest(foldingModel, true, [3]);\n\t\t\tassertFoldedRanges(foldingModel, [r1, r2, r3, r4, r5], '3');\n\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\n\ttest('folding decoration', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'class A {',\n\t\t/* 2*/\t'  void foo() {',\n\t\t/* 3*/\t'    if (true) {',\n\t\t/* 4*/\t'      hoo();',\n\t\t/* 5*/\t'    }',\n\t\t/* 6*/\t'  }',\n\t\t/* 7*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, undefined);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 6, false);\n\t\t\tconst r2 = r(2, 5, false);\n\t\t\tconst r3 = r(3, 4, false);\n\n\t\t\tassertRanges(foldingModel, [r1, r2, r3]);\n\t\t\tassertDecorations(foldingModel, [d(1, 'expanded'), d(2, 'expanded'), d(3, 'expanded')]);\n\n\t\t\tfoldingModel.toggleCollapseState([foldingModel.getRegionAtLine(2)!]);\n\n\t\t\tassertRanges(foldingModel, [r1, r(2, 5, true), r3]);\n\t\t\tassertDecorations(foldingModel, [d(1, 'expanded'), d(2, 'collapsed'), d(3, 'hidden')]);\n\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tassertRanges(foldingModel, [r1, r(2, 5, true), r3]);\n\t\t\tassertDecorations(foldingModel, [d(1, 'expanded'), d(2, 'collapsed'), d(3, 'hidden')]);\n\n\t\t\tfoldingModel.toggleCollapseState([foldingModel.getRegionAtLine(1)!]);\n\n\t\t\tassertRanges(foldingModel, [r(1, 6, true), r(2, 5, true), r3]);\n\t\t\tassertDecorations(foldingModel, [d(1, 'collapsed'), d(2, 'hidden'), d(3, 'hidden')]);\n\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tassertRanges(foldingModel, [r(1, 6, true), r(2, 5, true), r3]);\n\t\t\tassertDecorations(foldingModel, [d(1, 'collapsed'), d(2, 'hidden'), d(3, 'hidden')]);\n\n\t\t\tfoldingModel.toggleCollapseState([foldingModel.getRegionAtLine(1)!, foldingModel.getRegionAtLine(3)!]);\n\n\t\t\tassertRanges(foldingModel, [r1, r(2, 5, true), r(3, 4, true)]);\n\t\t\tassertDecorations(foldingModel, [d(1, 'expanded'), d(2, 'collapsed'), d(3, 'hidden')]);\n\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tassertRanges(foldingModel, [r1, r(2, 5, true), r(3, 4, true)]);\n\t\t\tassertDecorations(foldingModel, [d(1, 'expanded'), d(2, 'collapsed'), d(3, 'hidden')]);\n\n\t\t\ttextModel.dispose();\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\ttest('fold jumping', () => {\n\t\tconst lines = [\n\t\t\t/* 1*/\t'class A {',\n\t\t\t/* 2*/\t'  void foo() {',\n\t\t\t/* 3*/\t'    if (1) {',\n\t\t\t/* 4*/\t'      a();',\n\t\t\t/* 5*/\t'    } else if (2) {',\n\t\t\t/* 6*/\t'      if (true) {',\n\t\t\t/* 7*/\t'        b();',\n\t\t\t/* 8*/\t'      }',\n\t\t\t/* 9*/\t'    } else {',\n\t\t\t/* 10*/\t'      c();',\n\t\t\t/* 11*/\t'    }',\n\t\t\t/* 12*/\t'  }',\n\t\t\t/* 13*/\t'}'\n\t\t];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, undefined);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 12, false);\n\t\t\tconst r2 = r(2, 11, false);\n\t\t\tconst r3 = r(3, 4, false);\n\t\t\tconst r4 = r(5, 8, false);\n\t\t\tconst r5 = r(6, 7, false);\n\t\t\tconst r6 = r(9, 10, false);\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5, r6]);\n\n\t\t\t// Test jump to parent.\n\t\t\tassert.strictEqual(getParentFoldLine(7, foldingModel), 6);\n\t\t\tassert.strictEqual(getParentFoldLine(6, foldingModel), 5);\n\t\t\tassert.strictEqual(getParentFoldLine(5, foldingModel), 2);\n\t\t\tassert.strictEqual(getParentFoldLine(2, foldingModel), 1);\n\t\t\tassert.strictEqual(getParentFoldLine(1, foldingModel), null);\n\n\t\t\t// Test jump to previous.\n\t\t\tassert.strictEqual(getPreviousFoldLine(10, foldingModel), 9);\n\t\t\tassert.strictEqual(getPreviousFoldLine(9, foldingModel), 5);\n\t\t\tassert.strictEqual(getPreviousFoldLine(5, foldingModel), 3);\n\t\t\tassert.strictEqual(getPreviousFoldLine(3, foldingModel), null);\n\t\t\t// Test when not on a folding region start line.\n\t\t\tassert.strictEqual(getPreviousFoldLine(4, foldingModel), 3);\n\t\t\tassert.strictEqual(getPreviousFoldLine(7, foldingModel), 6);\n\t\t\tassert.strictEqual(getPreviousFoldLine(8, foldingModel), 6);\n\n\t\t\t// Test jump to next.\n\t\t\tassert.strictEqual(getNextFoldLine(3, foldingModel), 5);\n\t\t\tassert.strictEqual(getNextFoldLine(5, foldingModel), 9);\n\t\t\tassert.strictEqual(getNextFoldLine(9, foldingModel), null);\n\t\t\t// Test when not on a folding region start line.\n\t\t\tassert.strictEqual(getNextFoldLine(4, foldingModel), 5);\n\t\t\tassert.strictEqual(getNextFoldLine(7, foldingModel), 9);\n\t\t\tassert.strictEqual(getNextFoldLine(8, foldingModel), 9);\n\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\ttest('fold jumping issue #129503', () => {\n\t\tconst lines = [\n\t\t\t/* 1*/\t'',\n\t\t\t/* 2*/\t'if True:',\n\t\t\t/* 3*/\t'  print(1)',\n\t\t\t/* 4*/\t'if True:',\n\t\t\t/* 5*/\t'  print(1)',\n\t\t\t/* 6*/\t''\n\t\t];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, undefined);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(2, 3, false);\n\t\t\tconst r2 = r(4, 6, false);\n\t\t\tassertRanges(foldingModel, [r1, r2]);\n\n\t\t\t// Test jump to next.\n\t\t\tassert.strictEqual(getNextFoldLine(1, foldingModel), 2);\n\t\t\tassert.strictEqual(getNextFoldLine(2, foldingModel), 4);\n\t\t\tassert.strictEqual(getNextFoldLine(3, foldingModel), 4);\n\t\t\tassert.strictEqual(getNextFoldLine(4, foldingModel), null);\n\t\t\tassert.strictEqual(getNextFoldLine(5, foldingModel), null);\n\t\t\tassert.strictEqual(getNextFoldLine(6, foldingModel), null);\n\n\t\t\t// Test jump to previous.\n\t\t\tassert.strictEqual(getPreviousFoldLine(1, foldingModel), null);\n\t\t\tassert.strictEqual(getPreviousFoldLine(2, foldingModel), null);\n\t\t\tassert.strictEqual(getPreviousFoldLine(3, foldingModel), 2);\n\t\t\tassert.strictEqual(getPreviousFoldLine(4, foldingModel), 2);\n\t\t\tassert.strictEqual(getPreviousFoldLine(5, foldingModel), 4);\n\t\t\tassert.strictEqual(getPreviousFoldLine(6, foldingModel), 4);\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { escapeRegExpCharacters } from '../../../../../base/common/strings.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { EditOperation } from '../../../../common/core/editOperation.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { Selection } from '../../../../common/core/selection.js';\nimport { IModelDecorationsChangeAccessor, ITextModel, TrackedRangeStickiness } from '../../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../../common/model/textModel.js';\nimport { toSelectedLines } from '../../browser/folding.js';\nimport { FoldingModel, getNextFoldLine, getParentFoldLine, getPreviousFoldLine, setCollapseStateAtLevel, setCollapseStateForMatchingLines, setCollapseStateForRest, setCollapseStateLevelsDown, setCollapseStateLevelsUp, setCollapseStateUp } from '../../browser/foldingModel.js';\nimport { FoldingRegion } from '../../browser/foldingRanges.js';\nimport { computeRanges } from '../../browser/indentRangeProvider.js';\nimport { createTextModel } from '../../../../test/common/testTextModel.js';\n\n\ninterface ExpectedRegion {\n\tstartLineNumber: number;\n\tendLineNumber: number;\n\tisCollapsed: boolean;\n}\n\ninterface ExpectedDecoration {\n\tline: number;\n\ttype: 'hidden' | 'collapsed' | 'expanded';\n}\n\nexport class TestDecorationProvider {\n\n\tprivate static readonly collapsedDecoration = ModelDecorationOptions.register({\n\t\tdescription: 'test',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tlinesDecorationsClassName: 'folding'\n\t});\n\n\tprivate static readonly expandedDecoration = ModelDecorationOptions.register({\n\t\tdescription: 'test',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tlinesDecorationsClassName: 'folding'\n\t});\n\n\tprivate static readonly hiddenDecoration = ModelDecorationOptions.register({\n\t\tdescription: 'test',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tlinesDecorationsClassName: 'folding'\n\t});\n\n\tconstructor(private model: ITextModel) {\n\t}\n\n\tgetDecorationOption(isCollapsed: boolean, isHidden: boolean): ModelDecorationOptions {\n\t\tif (isHidden) {\n\t\t\treturn TestDecorationProvider.hiddenDecoration;\n\t\t}\n\t\tif (isCollapsed) {\n\t\t\treturn TestDecorationProvider.collapsedDecoration;\n\t\t}\n\t\treturn TestDecorationProvider.expandedDecoration;\n\t}\n\n\tchangeDecorations<T>(callback: (changeAccessor: IModelDecorationsChangeAccessor) => T): (T | null) {\n\t\treturn this.model.changeDecorations(callback);\n\t}\n\n\tremoveDecorations(decorationIds: string[]): void {\n\t\tthis.model.changeDecorations((changeAccessor) => {\n\t\t\tchangeAccessor.deltaDecorations(decorationIds, []);\n\t\t});\n\t}\n\n\tgetDecorations(): ExpectedDecoration[] {\n\t\tconst decorations = this.model.getAllDecorations();\n\t\tconst res: ExpectedDecoration[] = [];\n\t\tfor (const decoration of decorations) {\n\t\t\tif (decoration.options === TestDecorationProvider.hiddenDecoration) {\n\t\t\t\tres.push({ line: decoration.range.startLineNumber, type: 'hidden' });\n\t\t\t} else if (decoration.options === TestDecorationProvider.collapsedDecoration) {\n\t\t\t\tres.push({ line: decoration.range.startLineNumber, type: 'collapsed' });\n\t\t\t} else if (decoration.options === TestDecorationProvider.expandedDecoration) {\n\t\t\t\tres.push({ line: decoration.range.startLineNumber, type: 'expanded' });\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t}\n}\n\nsuite('Folding Model', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\tfunction r(startLineNumber: number, endLineNumber: number, isCollapsed: boolean = false): ExpectedRegion {\n\t\treturn { startLineNumber, endLineNumber, isCollapsed };\n\t}\n\n\tfunction d(line: number, type: 'hidden' | 'collapsed' | 'expanded'): ExpectedDecoration {\n\t\treturn { line, type };\n\t}\n\n\tfunction assertRegion(actual: FoldingRegion | null, expected: ExpectedRegion | null, message?: string) {\n\t\tassert.strictEqual(!!actual, !!expected, message);\n\t\tif (actual && expected) {\n\t\t\tassert.strictEqual(actual.startLineNumber, expected.startLineNumber, message);\n\t\t\tassert.strictEqual(actual.endLineNumber, expected.endLineNumber, message);\n\t\t\tassert.strictEqual(actual.isCollapsed, expected.isCollapsed, message);\n\t\t}\n\t}\n\n\tfunction assertFoldedRanges(foldingModel: FoldingModel, expectedRegions: ExpectedRegion[], message?: string) {\n\t\tconst actualRanges: ExpectedRegion[] = [];\n\t\tconst actual = foldingModel.regions;\n\t\tfor (let i = 0; i < actual.length; i++) {\n\t\t\tif (actual.isCollapsed(i)) {\n\t\t\t\tactualRanges.push(r(actual.getStartLineNumber(i), actual.getEndLineNumber(i)));\n\t\t\t}\n\t\t}\n\t\tassert.deepStrictEqual(actualRanges, expectedRegions, message);\n\t}\n\n\tfunction assertRanges(foldingModel: FoldingModel, expectedRegions: ExpectedRegion[], message?: string) {\n\t\tconst actualRanges: ExpectedRegion[] = [];\n\t\tconst actual = foldingModel.regions;\n\t\tfor (let i = 0; i < actual.length; i++) {\n\t\t\tactualRanges.push(r(actual.getStartLineNumber(i), actual.getEndLineNumber(i), actual.isCollapsed(i)));\n\t\t}\n\t\tassert.deepStrictEqual(actualRanges, expectedRegions, message);\n\t}\n\n\tfunction assertDecorations(foldingModel: FoldingModel, expectedDecoration: ExpectedDecoration[], message?: string) {\n\t\tconst decorationProvider = foldingModel.decorationProvider as TestDecorationProvider;\n\t\tassert.deepStrictEqual(decorationProvider.getDecorations(), expectedDecoration, message);\n\t}\n\n\tfunction assertRegions(actual: FoldingRegion[], expectedRegions: ExpectedRegion[], message?: string) {\n\t\tassert.deepStrictEqual(actual.map(r => ({ startLineNumber: r.startLineNumber, endLineNumber: r.endLineNumber, isCollapsed: r.isCollapsed })), expectedRegions, message);\n\t}\n\n\ttest('getRegionAtLine', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'/**',\n\t\t/* 2*/\t' * Comment',\n\t\t/* 3*/\t' */',\n\t\t/* 4*/\t'class A {',\n\t\t/* 5*/\t'  void foo() {',\n\t\t/* 6*/\t'    // comment {',\n\t\t/* 7*/\t'  }',\n\t\t/* 8*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, undefined);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 3, false);\n\t\t\tconst r2 = r(4, 7, false);\n\t\t\tconst r3 = r(5, 6, false);\n\n\t\t\tassertRanges(foldingModel, [r1, r2, r3]);\n\n\t\t\tassertRegion(foldingModel.getRegionAtLine(1), r1, '1');\n\t\t\tassertRegion(foldingModel.getRegionAtLine(2), r1, '2');\n\t\t\tassertRegion(foldingModel.getRegionAtLine(3), r1, '3');\n\t\t\tassertRegion(foldingModel.getRegionAtLine(4), r2, '4');\n\t\t\tassertRegion(foldingModel.getRegionAtLine(5), r3, '5');\n\t\t\tassertRegion(foldingModel.getRegionAtLine(6), r3, '5');\n\t\t\tassertRegion(foldingModel.getRegionAtLine(7), r2, '6');\n\t\t\tassertRegion(foldingModel.getRegionAtLine(8), null, '7');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\n\t});\n\n\ttest('collapse', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'/**',\n\t\t/* 2*/\t' * Comment',\n\t\t/* 3*/\t' */',\n\t\t/* 4*/\t'class A {',\n\t\t/* 5*/\t'  void foo() {',\n\t\t/* 6*/\t'    // comment {',\n\t\t/* 7*/\t'  }',\n\t\t/* 8*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, undefined);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 3, false);\n\t\t\tconst r2 = r(4, 7, false);\n\t\t\tconst r3 = r(5, 6, false);\n\n\t\t\tassertRanges(foldingModel, [r1, r2, r3]);\n\n\t\t\tfoldingModel.toggleCollapseState([foldingModel.getRegionAtLine(1)!]);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tassertRanges(foldingModel, [r(1, 3, true), r2, r3]);\n\n\t\t\tfoldingModel.toggleCollapseState([foldingModel.getRegionAtLine(5)!]);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tassertRanges(foldingModel, [r(1, 3, true), r2, r(5, 6, true)]);\n\n\t\t\tfoldingModel.toggleCollapseState([foldingModel.getRegionAtLine(7)!]);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tassertRanges(foldingModel, [r(1, 3, true), r(4, 7, true), r(5, 6, true)]);\n\n\t\t\ttextModel.dispose();\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\ttest('update', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'/**',\n\t\t/* 2*/\t' * Comment',\n\t\t/* 3*/\t' */',\n\t\t/* 4*/\t'class A {',\n\t\t/* 5*/\t'  void foo() {',\n\t\t/* 6*/\t'    // comment {',\n\t\t/* 7*/\t'  }',\n\t\t/* 8*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, undefined);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 3, false);\n\t\t\tconst r2 = r(4, 7, false);\n\t\t\tconst r3 = r(5, 6, false);\n\n\t\t\tassertRanges(foldingModel, [r1, r2, r3]);\n\t\t\tfoldingModel.toggleCollapseState([foldingModel.getRegionAtLine(2)!, foldingModel.getRegionAtLine(5)!]);\n\n\t\t\ttextModel.applyEdits([EditOperation.insert(new Position(4, 1), '//hello\\n')]);\n\n\t\t\tfoldingModel.update(computeRanges(textModel, false, undefined));\n\n\t\t\tassertRanges(foldingModel, [r(1, 3, true), r(5, 8, false), r(6, 7, true)]);\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\t});\n\n\ttest('delete', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'function foo() {',\n\t\t/* 2*/\t'  switch (x) {',\n\t\t/* 3*/\t'    case 1:',\n\t\t/* 4*/\t'      //hello1',\n\t\t/* 5*/\t'      break;',\n\t\t/* 6*/\t'    case 2:',\n\t\t/* 7*/\t'      //hello2',\n\t\t/* 8*/\t'      break;',\n\t\t/* 9*/\t'    case 3:',\n\t\t/* 10*/\t'      //hello3',\n\t\t/* 11*/\t'      break;',\n\t\t/* 12*/\t'  }',\n\t\t/* 13*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, undefined);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 12, false);\n\t\t\tconst r2 = r(2, 11, false);\n\t\t\tconst r3 = r(3, 5, false);\n\t\t\tconst r4 = r(6, 8, false);\n\t\t\tconst r5 = r(9, 11, false);\n\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5]);\n\t\t\tfoldingModel.toggleCollapseState([foldingModel.getRegionAtLine(6)!]);\n\n\t\t\ttextModel.applyEdits([EditOperation.delete(new Range(6, 11, 9, 0))]);\n\n\t\t\tfoldingModel.update(computeRanges(textModel, true, undefined), toSelectedLines([new Selection(7, 1, 7, 1)]));\n\n\t\t\tassertRanges(foldingModel, [r(1, 9, false), r(2, 8, false), r(3, 5, false), r(6, 8, false)]);\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\t});\n\n\ttest('getRegionsInside', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'/**',\n\t\t/* 2*/\t' * Comment',\n\t\t/* 3*/\t' */',\n\t\t/* 4*/\t'class A {',\n\t\t/* 5*/\t'  void foo() {',\n\t\t/* 6*/\t'    // comment {',\n\t\t/* 7*/\t'  }',\n\t\t/* 8*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, undefined);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 3, false);\n\t\t\tconst r2 = r(4, 7, false);\n\t\t\tconst r3 = r(5, 6, false);\n\n\t\t\tassertRanges(foldingModel, [r1, r2, r3]);\n\t\t\tconst region1 = foldingModel.getRegionAtLine(r1.startLineNumber);\n\t\t\tconst region2 = foldingModel.getRegionAtLine(r2.startLineNumber);\n\t\t\tconst region3 = foldingModel.getRegionAtLine(r3.startLineNumber);\n\n\t\t\tassertRegions(foldingModel.getRegionsInside(null), [r1, r2, r3], '1');\n\t\t\tassertRegions(foldingModel.getRegionsInside(region1), [], '2');\n\t\t\tassertRegions(foldingModel.getRegionsInside(region2), [r3], '3');\n\t\t\tassertRegions(foldingModel.getRegionsInside(region3), [], '4');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\ttest('getRegionsInsideWithLevel', () => {\n\t\tconst lines = [\n\t\t\t/* 1*/\t'//#region',\n\t\t\t/* 2*/\t'//#endregion',\n\t\t\t/* 3*/\t'class A {',\n\t\t\t/* 4*/\t'  void foo() {',\n\t\t\t/* 5*/\t'    if (true) {',\n\t\t\t/* 6*/\t'        return;',\n\t\t\t/* 7*/\t'    }',\n\t\t\t/* 8*/\t'    if (true) {',\n\t\t\t/* 9*/\t'      return;',\n\t\t\t/* 10*/\t'    }',\n\t\t\t/* 11*/\t'  }',\n\t\t\t/* 12*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\/\\/#region$/, end: /^\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 2, false);\n\t\t\tconst r2 = r(3, 11, false);\n\t\t\tconst r3 = r(4, 10, false);\n\t\t\tconst r4 = r(5, 6, false);\n\t\t\tconst r5 = r(8, 9, false);\n\n\t\t\tconst region1 = foldingModel.getRegionAtLine(r1.startLineNumber);\n\t\t\tconst region2 = foldingModel.getRegionAtLine(r2.startLineNumber);\n\t\t\tconst region3 = foldingModel.getRegionAtLine(r3.startLineNumber);\n\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5]);\n\n\t\t\tassertRegions(foldingModel.getRegionsInside(null, (r, level) => level === 1), [r1, r2], '1');\n\t\t\tassertRegions(foldingModel.getRegionsInside(null, (r, level) => level === 2), [r3], '2');\n\t\t\tassertRegions(foldingModel.getRegionsInside(null, (r, level) => level === 3), [r4, r5], '3');\n\n\t\t\tassertRegions(foldingModel.getRegionsInside(region2, (r, level) => level === 1), [r3], '4');\n\t\t\tassertRegions(foldingModel.getRegionsInside(region2, (r, level) => level === 2), [r4, r5], '5');\n\t\t\tassertRegions(foldingModel.getRegionsInside(region3, (r, level) => level === 1), [r4, r5], '6');\n\n\t\t\tassertRegions(foldingModel.getRegionsInside(region2, (r, level) => r.hidesLine(9)), [r3, r5], '7');\n\n\t\t\tassertRegions(foldingModel.getRegionsInside(region1, (r, level) => level === 1), [], '8');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\ttest('getRegionAtLine2', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'//#region',\n\t\t/* 2*/\t'class A {',\n\t\t/* 3*/\t'  void foo() {',\n\t\t/* 4*/\t'    if (true) {',\n\t\t/* 5*/\t'      //hello',\n\t\t/* 6*/\t'    }',\n\t\t/* 7*/\t'',\n\t\t/* 8*/\t'  }',\n\t\t/* 9*/\t'}',\n\t\t/* 10*/\t'//#endregion',\n\t\t/* 11*/\t''];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\/\\/#region$/, end: /^\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 10, false);\n\t\t\tconst r2 = r(2, 8, false);\n\t\t\tconst r3 = r(3, 7, false);\n\t\t\tconst r4 = r(4, 5, false);\n\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4]);\n\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(1), [r1], '1');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(2), [r1, r2].reverse(), '2');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(3), [r1, r2, r3].reverse(), '3');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(4), [r1, r2, r3, r4].reverse(), '4');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(5), [r1, r2, r3, r4].reverse(), '5');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(6), [r1, r2, r3].reverse(), '6');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(7), [r1, r2, r3].reverse(), '7');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(8), [r1, r2].reverse(), '8');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(9), [r1], '9');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(10), [r1], '10');\n\t\t\tassertRegions(foldingModel.getAllRegionsAtLine(11), [], '10');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\t});\n\n\ttest('setCollapseStateRecursivly', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'//#region',\n\t\t/* 2*/\t'//#endregion',\n\t\t/* 3*/\t'class A {',\n\t\t/* 4*/\t'  void foo() {',\n\t\t/* 5*/\t'    if (true) {',\n\t\t/* 6*/\t'        return;',\n\t\t/* 7*/\t'    }',\n\t\t/* 8*/\t'',\n\t\t/* 9*/\t'    if (true) {',\n\t\t/* 10*/\t'      return;',\n\t\t/* 11*/\t'    }',\n\t\t/* 12*/\t'  }',\n\t\t/* 13*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\/\\/#region$/, end: /^\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 2, false);\n\t\t\tconst r2 = r(3, 12, false);\n\t\t\tconst r3 = r(4, 11, false);\n\t\t\tconst r4 = r(5, 6, false);\n\t\t\tconst r5 = r(9, 10, false);\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5]);\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, true, Number.MAX_VALUE, [4]);\n\t\t\tassertFoldedRanges(foldingModel, [r3, r4, r5], '1');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, false, Number.MAX_VALUE, [8]);\n\t\t\tassertFoldedRanges(foldingModel, [], '2');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, true, Number.MAX_VALUE, [12]);\n\t\t\tassertFoldedRanges(foldingModel, [r2, r3, r4, r5], '1');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, false, Number.MAX_VALUE, [7]);\n\t\t\tassertFoldedRanges(foldingModel, [r2], '1');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, false);\n\t\t\tassertFoldedRanges(foldingModel, [], '1');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, true);\n\t\t\tassertFoldedRanges(foldingModel, [r1, r2, r3, r4, r5], '1');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\ttest('setCollapseStateAtLevel', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'//#region',\n\t\t/* 2*/\t'//#endregion',\n\t\t/* 3*/\t'class A {',\n\t\t/* 4*/\t'  void foo() {',\n\t\t/* 5*/\t'    if (true) {',\n\t\t/* 6*/\t'        return;',\n\t\t/* 7*/\t'    }',\n\t\t/* 8*/\t'',\n\t\t/* 9*/\t'    if (true) {',\n\t\t/* 10*/\t'      return;',\n\t\t/* 11*/\t'    }',\n\t\t/* 12*/\t'  }',\n\t\t/* 13*/\t'  //#region',\n\t\t/* 14*/\t'  const bar = 9;',\n\t\t/* 15*/\t'  //#endregion',\n\t\t/* 16*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\s*\\/\\/#region$/, end: /^\\s*\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 2, false);\n\t\t\tconst r2 = r(3, 15, false);\n\t\t\tconst r3 = r(4, 11, false);\n\t\t\tconst r4 = r(5, 6, false);\n\t\t\tconst r5 = r(9, 10, false);\n\t\t\tconst r6 = r(13, 15, false);\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5, r6]);\n\n\t\t\tsetCollapseStateAtLevel(foldingModel, 1, true, []);\n\t\t\tassertFoldedRanges(foldingModel, [r1, r2], '1');\n\n\t\t\tsetCollapseStateAtLevel(foldingModel, 1, false, [5]);\n\t\t\tassertFoldedRanges(foldingModel, [r2], '2');\n\n\t\t\tsetCollapseStateAtLevel(foldingModel, 1, false, [1]);\n\t\t\tassertFoldedRanges(foldingModel, [], '3');\n\n\t\t\tsetCollapseStateAtLevel(foldingModel, 2, true, []);\n\t\t\tassertFoldedRanges(foldingModel, [r3, r6], '4');\n\n\t\t\tsetCollapseStateAtLevel(foldingModel, 2, false, [5, 6]);\n\t\t\tassertFoldedRanges(foldingModel, [r3], '5');\n\n\t\t\tsetCollapseStateAtLevel(foldingModel, 3, true, [4, 9]);\n\t\t\tassertFoldedRanges(foldingModel, [r3, r4], '6');\n\n\t\t\tsetCollapseStateAtLevel(foldingModel, 3, false, [4, 9]);\n\t\t\tassertFoldedRanges(foldingModel, [r3], '7');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\t});\n\n\ttest('setCollapseStateLevelsDown', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'//#region',\n\t\t/* 2*/\t'//#endregion',\n\t\t/* 3*/\t'class A {',\n\t\t/* 4*/\t'  void foo() {',\n\t\t/* 5*/\t'    if (true) {',\n\t\t/* 6*/\t'        return;',\n\t\t/* 7*/\t'    }',\n\t\t/* 8*/\t'',\n\t\t/* 9*/\t'    if (true) {',\n\t\t/* 10*/\t'      return;',\n\t\t/* 11*/\t'    }',\n\t\t/* 12*/\t'  }',\n\t\t/* 13*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\/\\/#region$/, end: /^\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 2, false);\n\t\t\tconst r2 = r(3, 12, false);\n\t\t\tconst r3 = r(4, 11, false);\n\t\t\tconst r4 = r(5, 6, false);\n\t\t\tconst r5 = r(9, 10, false);\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5]);\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, true, 1, [4]);\n\t\t\tassertFoldedRanges(foldingModel, [r3], '1');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, true, 2, [4]);\n\t\t\tassertFoldedRanges(foldingModel, [r3, r4, r5], '2');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, false, 2, [3]);\n\t\t\tassertFoldedRanges(foldingModel, [r4, r5], '3');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, false, 2, [2]);\n\t\t\tassertFoldedRanges(foldingModel, [r4, r5], '4');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, true, 4, [2]);\n\t\t\tassertFoldedRanges(foldingModel, [r1, r4, r5], '5');\n\n\t\t\tsetCollapseStateLevelsDown(foldingModel, false, 4, [2, 3]);\n\t\t\tassertFoldedRanges(foldingModel, [], '6');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\t});\n\n\ttest('setCollapseStateLevelsUp', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'//#region',\n\t\t/* 2*/\t'//#endregion',\n\t\t/* 3*/\t'class A {',\n\t\t/* 4*/\t'  void foo() {',\n\t\t/* 5*/\t'    if (true) {',\n\t\t/* 6*/\t'        return;',\n\t\t/* 7*/\t'    }',\n\t\t/* 8*/\t'',\n\t\t/* 9*/\t'    if (true) {',\n\t\t/* 10*/\t'      return;',\n\t\t/* 11*/\t'    }',\n\t\t/* 12*/\t'  }',\n\t\t/* 13*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\/\\/#region$/, end: /^\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 2, false);\n\t\t\tconst r2 = r(3, 12, false);\n\t\t\tconst r3 = r(4, 11, false);\n\t\t\tconst r4 = r(5, 6, false);\n\t\t\tconst r5 = r(9, 10, false);\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5]);\n\n\t\t\tsetCollapseStateLevelsUp(foldingModel, true, 1, [4]);\n\t\t\tassertFoldedRanges(foldingModel, [r3], '1');\n\n\t\t\tsetCollapseStateLevelsUp(foldingModel, true, 2, [4]);\n\t\t\tassertFoldedRanges(foldingModel, [r2, r3], '2');\n\n\t\t\tsetCollapseStateLevelsUp(foldingModel, false, 4, [1, 3, 4]);\n\t\t\tassertFoldedRanges(foldingModel, [], '3');\n\n\t\t\tsetCollapseStateLevelsUp(foldingModel, true, 2, [10]);\n\t\t\tassertFoldedRanges(foldingModel, [r3, r5], '4');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\ttest('setCollapseStateUp', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'//#region',\n\t\t/* 2*/\t'//#endregion',\n\t\t/* 3*/\t'class A {',\n\t\t/* 4*/\t'  void foo() {',\n\t\t/* 5*/\t'    if (true) {',\n\t\t/* 6*/\t'        return;',\n\t\t/* 7*/\t'    }',\n\t\t/* 8*/\t'',\n\t\t/* 9*/\t'    if (true) {',\n\t\t/* 10*/\t'      return;',\n\t\t/* 11*/\t'    }',\n\t\t/* 12*/\t'  }',\n\t\t/* 13*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\/\\/#region$/, end: /^\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 2, false);\n\t\t\tconst r2 = r(3, 12, false);\n\t\t\tconst r3 = r(4, 11, false);\n\t\t\tconst r4 = r(5, 6, false);\n\t\t\tconst r5 = r(9, 10, false);\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5]);\n\n\t\t\tsetCollapseStateUp(foldingModel, true, [5]);\n\t\t\tassertFoldedRanges(foldingModel, [r4], '1');\n\n\t\t\tsetCollapseStateUp(foldingModel, true, [5]);\n\t\t\tassertFoldedRanges(foldingModel, [r3, r4], '2');\n\n\t\t\tsetCollapseStateUp(foldingModel, true, [4]);\n\t\t\tassertFoldedRanges(foldingModel, [r2, r3, r4], '2');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\n\ttest('setCollapseStateForMatchingLines', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'/**',\n\t\t/* 2*/\t' * the class',\n\t\t/* 3*/\t' */',\n\t\t/* 4*/\t'class A {',\n\t\t/* 5*/\t'  /**',\n\t\t/* 6*/\t'   * the foo',\n\t\t/* 7*/\t'   */',\n\t\t/* 8*/\t'  void foo() {',\n\t\t/* 9*/\t'    /*',\n\t\t/* 10*/\t'     * the comment',\n\t\t/* 11*/\t'     */',\n\t\t/* 12*/\t'  }',\n\t\t/* 13*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\/\\/#region$/, end: /^\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 3, false);\n\t\t\tconst r2 = r(4, 12, false);\n\t\t\tconst r3 = r(5, 7, false);\n\t\t\tconst r4 = r(8, 11, false);\n\t\t\tconst r5 = r(9, 11, false);\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5]);\n\n\t\t\tconst regExp = new RegExp('^\\\\s*' + escapeRegExpCharacters('/*'));\n\t\t\tsetCollapseStateForMatchingLines(foldingModel, regExp, true);\n\t\t\tassertFoldedRanges(foldingModel, [r1, r3, r5], '1');\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\n\ttest('setCollapseStateForRest', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'//#region',\n\t\t/* 2*/\t'//#endregion',\n\t\t/* 3*/\t'class A {',\n\t\t/* 4*/\t'  void foo() {',\n\t\t/* 5*/\t'    if (true) {',\n\t\t/* 6*/\t'        return;',\n\t\t/* 7*/\t'    }',\n\t\t/* 8*/\t'',\n\t\t/* 9*/\t'    if (true) {',\n\t\t/* 10*/\t'      return;',\n\t\t/* 11*/\t'    }',\n\t\t/* 12*/\t'  }',\n\t\t/* 13*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, { start: /^\\/\\/#region$/, end: /^\\/\\/#endregion$/ });\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 2, false);\n\t\t\tconst r2 = r(3, 12, false);\n\t\t\tconst r3 = r(4, 11, false);\n\t\t\tconst r4 = r(5, 6, false);\n\t\t\tconst r5 = r(9, 10, false);\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5]);\n\n\t\t\tsetCollapseStateForRest(foldingModel, true, [5]);\n\t\t\tassertFoldedRanges(foldingModel, [r1, r5], '1');\n\n\t\t\tsetCollapseStateForRest(foldingModel, false, [5]);\n\t\t\tassertFoldedRanges(foldingModel, [], '2');\n\n\t\t\tsetCollapseStateForRest(foldingModel, true, [1]);\n\t\t\tassertFoldedRanges(foldingModel, [r2, r3, r4, r5], '3');\n\n\t\t\tsetCollapseStateForRest(foldingModel, true, [3]);\n\t\t\tassertFoldedRanges(foldingModel, [r1, r2, r3, r4, r5], '3');\n\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\n\ttest('folding decoration', () => {\n\t\tconst lines = [\n\t\t/* 1*/\t'class A {',\n\t\t/* 2*/\t'  void foo() {',\n\t\t/* 3*/\t'    if (true) {',\n\t\t/* 4*/\t'      hoo();',\n\t\t/* 5*/\t'    }',\n\t\t/* 6*/\t'  }',\n\t\t/* 7*/\t'}'];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, undefined);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 6, false);\n\t\t\tconst r2 = r(2, 5, false);\n\t\t\tconst r3 = r(3, 4, false);\n\n\t\t\tassertRanges(foldingModel, [r1, r2, r3]);\n\t\t\tassertDecorations(foldingModel, [d(1, 'expanded'), d(2, 'expanded'), d(3, 'expanded')]);\n\n\t\t\tfoldingModel.toggleCollapseState([foldingModel.getRegionAtLine(2)!]);\n\n\t\t\tassertRanges(foldingModel, [r1, r(2, 5, true), r3]);\n\t\t\tassertDecorations(foldingModel, [d(1, 'expanded'), d(2, 'collapsed'), d(3, 'hidden')]);\n\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tassertRanges(foldingModel, [r1, r(2, 5, true), r3]);\n\t\t\tassertDecorations(foldingModel, [d(1, 'expanded'), d(2, 'collapsed'), d(3, 'hidden')]);\n\n\t\t\tfoldingModel.toggleCollapseState([foldingModel.getRegionAtLine(1)!]);\n\n\t\t\tassertRanges(foldingModel, [r(1, 6, true), r(2, 5, true), r3]);\n\t\t\tassertDecorations(foldingModel, [d(1, 'collapsed'), d(2, 'hidden'), d(3, 'hidden')]);\n\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tassertRanges(foldingModel, [r(1, 6, true), r(2, 5, true), r3]);\n\t\t\tassertDecorations(foldingModel, [d(1, 'collapsed'), d(2, 'hidden'), d(3, 'hidden')]);\n\n\t\t\tfoldingModel.toggleCollapseState([foldingModel.getRegionAtLine(1)!, foldingModel.getRegionAtLine(3)!]);\n\n\t\t\tassertRanges(foldingModel, [r1, r(2, 5, true), r(3, 4, true)]);\n\t\t\tassertDecorations(foldingModel, [d(1, 'expanded'), d(2, 'collapsed'), d(3, 'hidden')]);\n\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tassertRanges(foldingModel, [r1, r(2, 5, true), r(3, 4, true)]);\n\t\t\tassertDecorations(foldingModel, [d(1, 'expanded'), d(2, 'collapsed'), d(3, 'hidden')]);\n\n\t\t\ttextModel.dispose();\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\ttest('fold jumping', () => {\n\t\tconst lines = [\n\t\t\t/* 1*/\t'class A {',\n\t\t\t/* 2*/\t'  void foo() {',\n\t\t\t/* 3*/\t'    if (1) {',\n\t\t\t/* 4*/\t'      a();',\n\t\t\t/* 5*/\t'    } else if (2) {',\n\t\t\t/* 6*/\t'      if (true) {',\n\t\t\t/* 7*/\t'        b();',\n\t\t\t/* 8*/\t'      }',\n\t\t\t/* 9*/\t'    } else {',\n\t\t\t/* 10*/\t'      c();',\n\t\t\t/* 11*/\t'    }',\n\t\t\t/* 12*/\t'  }',\n\t\t\t/* 13*/\t'}'\n\t\t];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, undefined);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(1, 12, false);\n\t\t\tconst r2 = r(2, 11, false);\n\t\t\tconst r3 = r(3, 4, false);\n\t\t\tconst r4 = r(5, 8, false);\n\t\t\tconst r5 = r(6, 7, false);\n\t\t\tconst r6 = r(9, 10, false);\n\t\t\tassertRanges(foldingModel, [r1, r2, r3, r4, r5, r6]);\n\n\t\t\t// Test jump to parent.\n\t\t\tassert.strictEqual(getParentFoldLine(7, foldingModel), 6);\n\t\t\tassert.strictEqual(getParentFoldLine(6, foldingModel), 5);\n\t\t\tassert.strictEqual(getParentFoldLine(5, foldingModel), 2);\n\t\t\tassert.strictEqual(getParentFoldLine(2, foldingModel), 1);\n\t\t\tassert.strictEqual(getParentFoldLine(1, foldingModel), null);\n\n\t\t\t// Test jump to previous.\n\t\t\tassert.strictEqual(getPreviousFoldLine(10, foldingModel), 9);\n\t\t\tassert.strictEqual(getPreviousFoldLine(9, foldingModel), 5);\n\t\t\tassert.strictEqual(getPreviousFoldLine(5, foldingModel), 3);\n\t\t\tassert.strictEqual(getPreviousFoldLine(3, foldingModel), null);\n\t\t\t// Test when not on a folding region start line.\n\t\t\tassert.strictEqual(getPreviousFoldLine(4, foldingModel), 3);\n\t\t\tassert.strictEqual(getPreviousFoldLine(7, foldingModel), 6);\n\t\t\tassert.strictEqual(getPreviousFoldLine(8, foldingModel), 6);\n\n\t\t\t// Test jump to next.\n\t\t\tassert.strictEqual(getNextFoldLine(3, foldingModel), 5);\n\t\t\tassert.strictEqual(getNextFoldLine(5, foldingModel), 9);\n\t\t\tassert.strictEqual(getNextFoldLine(9, foldingModel), null);\n\t\t\t// Test when not on a folding region start line.\n\t\t\tassert.strictEqual(getNextFoldLine(4, foldingModel), 5);\n\t\t\tassert.strictEqual(getNextFoldLine(7, foldingModel), 9);\n\t\t\tassert.strictEqual(getNextFoldLine(8, foldingModel), 9);\n\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\n\t});\n\n\ttest('fold jumping issue #129503', () => {\n\t\tconst lines = [\n\t\t\t/* 1*/\t'',\n\t\t\t/* 2*/\t'if True:',\n\t\t\t/* 3*/\t'  print(1)',\n\t\t\t/* 4*/\t'if True:',\n\t\t\t/* 5*/\t'  print(1)',\n\t\t\t/* 6*/\t''\n\t\t];\n\n\t\tconst textModel = createTextModel(lines.join('\\n'));\n\t\ttry {\n\t\t\tconst foldingModel = new FoldingModel(textModel, new TestDecorationProvider(textModel));\n\n\t\t\tconst ranges = computeRanges(textModel, false, undefined);\n\t\t\tfoldingModel.update(ranges);\n\n\t\t\tconst r1 = r(2, 3, false);\n\t\t\tconst r2 = r(4, 6, false);\n\t\t\tassertRanges(foldingModel, [r1, r2]);\n\n\t\t\t// Test jump to next.\n\t\t\tassert.strictEqual(getNextFoldLine(1, foldingModel), 2);\n\t\t\tassert.strictEqual(getNextFoldLine(2, foldingModel), 4);\n\t\t\tassert.strictEqual(getNextFoldLine(3, foldingModel), 4);\n\t\t\tassert.strictEqual(getNextFoldLine(4, foldingModel), null);\n\t\t\tassert.strictEqual(getNextFoldLine(5, foldingModel), null);\n\t\t\tassert.strictEqual(getNextFoldLine(6, foldingModel), null);\n\n\t\t\t// Test jump to previous.\n\t\t\tassert.strictEqual(getPreviousFoldLine(1, foldingModel), null);\n\t\t\tassert.strictEqual(getPreviousFoldLine(2, foldingModel), null);\n\t\t\tassert.strictEqual(getPreviousFoldLine(3, foldingModel), 2);\n\t\t\tassert.strictEqual(getPreviousFoldLine(4, foldingModel), 2);\n\t\t\tassert.strictEqual(getPreviousFoldLine(5, foldingModel), 4);\n\t\t\tassert.strictEqual(getPreviousFoldLine(6, foldingModel), 4);\n\t\t} finally {\n\t\t\ttextModel.dispose();\n\t\t}\n\t});\n});\n"]}