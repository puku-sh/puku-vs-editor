{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/contrib/folding/test/browser/syntaxFold.test.ts","vs/editor/contrib/folding/test/browser/syntaxFold.test.ts"],"names":[],"mappings":"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","file":"syntaxFold.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { ITextModel } from '../../../../common/model.js';\nimport { FoldingContext, FoldingRange, FoldingRangeProvider, ProviderResult } from '../../../../common/languages.js';\nimport { SyntaxRangeProvider } from '../../browser/syntaxRangeProvider.js';\nimport { createTextModel } from '../../../../test/common/testTextModel.js';\nimport { FoldingLimitReporter } from '../../browser/folding.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\ninterface IndentRange {\n\tstart: number;\n\tend: number;\n}\n\nclass TestFoldingRangeProvider implements FoldingRangeProvider {\n\tconstructor(private model: ITextModel, private ranges: IndentRange[]) {\n\t}\n\n\tprovideFoldingRanges(model: ITextModel, context: FoldingContext, token: CancellationToken): ProviderResult<FoldingRange[]> {\n\t\tif (model === this.model) {\n\t\t\treturn this.ranges;\n\t\t}\n\t\treturn null;\n\t}\n}\n\nsuite('Syntax folding', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction r(start: number, end: number): IndentRange {\n\t\treturn { start, end };\n\t}\n\n\ttest('Limit by nesting level', async () => {\n\t\tconst lines = [\n\t\t\t/* 1*/\t'{',\n\t\t\t/* 2*/\t'  A',\n\t\t\t/* 3*/\t'  {',\n\t\t\t/* 4*/\t'    {',\n\t\t\t/* 5*/\t'      B',\n\t\t\t/* 6*/\t'    }',\n\t\t\t/* 7*/\t'    {',\n\t\t\t/* 8*/\t'      A',\n\t\t\t/* 9*/\t'      {',\n\t\t\t/* 10*/\t'         A',\n\t\t\t/* 11*/\t'      }',\n\t\t\t/* 12*/\t'      {',\n\t\t\t/* 13*/\t'        {',\n\t\t\t/* 14*/\t'          {',\n\t\t\t/* 15*/\t'             A',\n\t\t\t/* 16*/\t'          }',\n\t\t\t/* 17*/\t'        }',\n\t\t\t/* 18*/\t'      }',\n\t\t\t/* 19*/\t'    }',\n\t\t\t/* 20*/\t'  }',\n\t\t\t/* 21*/\t'}',\n\t\t\t/* 22*/\t'{',\n\t\t\t/* 23*/\t'  A',\n\t\t\t/* 24*/\t'}',\n\t\t];\n\n\t\tconst r1 = r(1, 20);  //0\n\t\tconst r2 = r(3, 19);  //1\n\t\tconst r3 = r(4, 5);   //2\n\t\tconst r4 = r(7, 18);  //2\n\t\tconst r5 = r(9, 10);  //3\n\t\tconst r6 = r(12, 17); //4\n\t\tconst r7 = r(13, 16); //5\n\t\tconst r8 = r(14, 15); //6\n\t\tconst r9 = r(22, 23); //0\n\n\t\tconst model = createTextModel(lines.join('\\n'));\n\t\tconst ranges = [r1, r2, r3, r4, r5, r6, r7, r8, r9];\n\t\tconst providers = [new TestFoldingRangeProvider(model, ranges)];\n\n\t\tasync function assertLimit(maxEntries: number, expectedRanges: IndentRange[], message: string) {\n\t\t\tlet reported: number | false = false;\n\t\t\tconst foldingRangesLimit: FoldingLimitReporter = { limit: maxEntries, update: (computed, limited) => reported = limited };\n\t\t\tconst syntaxRangeProvider = new SyntaxRangeProvider(model, providers, () => { }, foldingRangesLimit, undefined);\n\t\t\ttry {\n\t\t\t\tconst indentRanges = await syntaxRangeProvider.compute(CancellationToken.None);\n\t\t\t\tconst actual: IndentRange[] = [];\n\t\t\t\tif (indentRanges) {\n\t\t\t\t\tfor (let i = 0; i < indentRanges.length; i++) {\n\t\t\t\t\t\tactual.push({ start: indentRanges.getStartLineNumber(i), end: indentRanges.getEndLineNumber(i) });\n\t\t\t\t\t}\n\t\t\t\t\tassert.equal(reported, 9 <= maxEntries ? false : maxEntries, 'limited');\n\t\t\t\t}\n\t\t\t\tassert.deepStrictEqual(actual, expectedRanges, message);\n\t\t\t} finally {\n\t\t\t\tsyntaxRangeProvider.dispose();\n\t\t\t}\n\n\t\t}\n\n\t\tawait assertLimit(1000, [r1, r2, r3, r4, r5, r6, r7, r8, r9], '1000');\n\t\tawait assertLimit(9, [r1, r2, r3, r4, r5, r6, r7, r8, r9], '9');\n\t\tawait assertLimit(8, [r1, r2, r3, r4, r5, r6, r7, r9], '8');\n\t\tawait assertLimit(7, [r1, r2, r3, r4, r5, r6, r9], '7');\n\t\tawait assertLimit(6, [r1, r2, r3, r4, r5, r9], '6');\n\t\tawait assertLimit(5, [r1, r2, r3, r4, r9], '5');\n\t\tawait assertLimit(4, [r1, r2, r3, r9], '4');\n\t\tawait assertLimit(3, [r1, r2, r9], '3');\n\t\tawait assertLimit(2, [r1, r9], '2');\n\t\tawait assertLimit(1, [r1], '1');\n\t\tawait assertLimit(0, [], '0');\n\n\t\tmodel.dispose();\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { ITextModel } from '../../../../common/model.js';\nimport { FoldingContext, FoldingRange, FoldingRangeProvider, ProviderResult } from '../../../../common/languages.js';\nimport { SyntaxRangeProvider } from '../../browser/syntaxRangeProvider.js';\nimport { createTextModel } from '../../../../test/common/testTextModel.js';\nimport { FoldingLimitReporter } from '../../browser/folding.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\ninterface IndentRange {\n\tstart: number;\n\tend: number;\n}\n\nclass TestFoldingRangeProvider implements FoldingRangeProvider {\n\tconstructor(private model: ITextModel, private ranges: IndentRange[]) {\n\t}\n\n\tprovideFoldingRanges(model: ITextModel, context: FoldingContext, token: CancellationToken): ProviderResult<FoldingRange[]> {\n\t\tif (model === this.model) {\n\t\t\treturn this.ranges;\n\t\t}\n\t\treturn null;\n\t}\n}\n\nsuite('Syntax folding', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction r(start: number, end: number): IndentRange {\n\t\treturn { start, end };\n\t}\n\n\ttest('Limit by nesting level', async () => {\n\t\tconst lines = [\n\t\t\t/* 1*/\t'{',\n\t\t\t/* 2*/\t'  A',\n\t\t\t/* 3*/\t'  {',\n\t\t\t/* 4*/\t'    {',\n\t\t\t/* 5*/\t'      B',\n\t\t\t/* 6*/\t'    }',\n\t\t\t/* 7*/\t'    {',\n\t\t\t/* 8*/\t'      A',\n\t\t\t/* 9*/\t'      {',\n\t\t\t/* 10*/\t'         A',\n\t\t\t/* 11*/\t'      }',\n\t\t\t/* 12*/\t'      {',\n\t\t\t/* 13*/\t'        {',\n\t\t\t/* 14*/\t'          {',\n\t\t\t/* 15*/\t'             A',\n\t\t\t/* 16*/\t'          }',\n\t\t\t/* 17*/\t'        }',\n\t\t\t/* 18*/\t'      }',\n\t\t\t/* 19*/\t'    }',\n\t\t\t/* 20*/\t'  }',\n\t\t\t/* 21*/\t'}',\n\t\t\t/* 22*/\t'{',\n\t\t\t/* 23*/\t'  A',\n\t\t\t/* 24*/\t'}',\n\t\t];\n\n\t\tconst r1 = r(1, 20);  //0\n\t\tconst r2 = r(3, 19);  //1\n\t\tconst r3 = r(4, 5);   //2\n\t\tconst r4 = r(7, 18);  //2\n\t\tconst r5 = r(9, 10);  //3\n\t\tconst r6 = r(12, 17); //4\n\t\tconst r7 = r(13, 16); //5\n\t\tconst r8 = r(14, 15); //6\n\t\tconst r9 = r(22, 23); //0\n\n\t\tconst model = createTextModel(lines.join('\\n'));\n\t\tconst ranges = [r1, r2, r3, r4, r5, r6, r7, r8, r9];\n\t\tconst providers = [new TestFoldingRangeProvider(model, ranges)];\n\n\t\tasync function assertLimit(maxEntries: number, expectedRanges: IndentRange[], message: string) {\n\t\t\tlet reported: number | false = false;\n\t\t\tconst foldingRangesLimit: FoldingLimitReporter = { limit: maxEntries, update: (computed, limited) => reported = limited };\n\t\t\tconst syntaxRangeProvider = new SyntaxRangeProvider(model, providers, () => { }, foldingRangesLimit, undefined);\n\t\t\ttry {\n\t\t\t\tconst indentRanges = await syntaxRangeProvider.compute(CancellationToken.None);\n\t\t\t\tconst actual: IndentRange[] = [];\n\t\t\t\tif (indentRanges) {\n\t\t\t\t\tfor (let i = 0; i < indentRanges.length; i++) {\n\t\t\t\t\t\tactual.push({ start: indentRanges.getStartLineNumber(i), end: indentRanges.getEndLineNumber(i) });\n\t\t\t\t\t}\n\t\t\t\t\tassert.equal(reported, 9 <= maxEntries ? false : maxEntries, 'limited');\n\t\t\t\t}\n\t\t\t\tassert.deepStrictEqual(actual, expectedRanges, message);\n\t\t\t} finally {\n\t\t\t\tsyntaxRangeProvider.dispose();\n\t\t\t}\n\n\t\t}\n\n\t\tawait assertLimit(1000, [r1, r2, r3, r4, r5, r6, r7, r8, r9], '1000');\n\t\tawait assertLimit(9, [r1, r2, r3, r4, r5, r6, r7, r8, r9], '9');\n\t\tawait assertLimit(8, [r1, r2, r3, r4, r5, r6, r7, r9], '8');\n\t\tawait assertLimit(7, [r1, r2, r3, r4, r5, r6, r9], '7');\n\t\tawait assertLimit(6, [r1, r2, r3, r4, r5, r9], '6');\n\t\tawait assertLimit(5, [r1, r2, r3, r4, r9], '5');\n\t\tawait assertLimit(4, [r1, r2, r3, r9], '4');\n\t\tawait assertLimit(3, [r1, r2, r9], '3');\n\t\tawait assertLimit(2, [r1, r9], '2');\n\t\tawait assertLimit(1, [r1], '1');\n\t\tawait assertLimit(0, [], '0');\n\n\t\tmodel.dispose();\n\t});\n});\n"]}