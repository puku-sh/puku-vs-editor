{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/contrib/linkedEditing/test/browser/linkedEditing.test.ts","vs/editor/contrib/linkedEditing/test/browser/linkedEditing.test.ts"],"names":[],"mappings":"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","file":"linkedEditing.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { runWithFakedTimers } from '../../../../../base/test/common/timeTravelScheduler.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { CoreEditingCommands } from '../../../../browser/coreCommands.js';\nimport { IPosition, Position } from '../../../../common/core/position.js';\nimport { IRange, Range } from '../../../../common/core/range.js';\nimport { USUAL_WORD_SEPARATORS } from '../../../../common/core/wordHelper.js';\nimport { Handler } from '../../../../common/editorCommon.js';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\nimport { ITextModel } from '../../../../common/model.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nimport { DeleteAllLeftAction } from '../../../linesOperations/browser/linesOperations.js';\nimport { LinkedEditingContribution } from '../../browser/linkedEditing.js';\nimport { DeleteWordLeft } from '../../../wordOperations/browser/wordOperations.js';\nimport { ITestCodeEditor, createCodeEditorServices, instantiateTestCodeEditor } from '../../../../test/browser/testCodeEditor.js';\nimport { instantiateTextModel } from '../../../../test/common/testTextModel.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\n\nconst mockFile = URI.parse('test:somefile.ttt');\nconst mockFileSelector = { scheme: 'test' };\nconst timeout = 30;\n\ninterface TestEditor {\n\tsetPosition(pos: Position): Promise<any>;\n\tsetSelection(sel: IRange): Promise<any>;\n\ttrigger(source: string | null | undefined, handlerId: string, payload: any): Promise<any>;\n\tundo(): void;\n\tredo(): void;\n}\n\nconst languageId = 'linkedEditingTestLangage';\n\nsuite('linked editing', () => {\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\tlet languageFeaturesService: ILanguageFeaturesService;\n\tlet languageConfigurationService: ILanguageConfigurationService;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tinstantiationService = createCodeEditorServices(disposables);\n\t\tlanguageFeaturesService = instantiationService.get(ILanguageFeaturesService);\n\t\tlanguageConfigurationService = instantiationService.get(ILanguageConfigurationService);\n\n\t\tdisposables.add(languageConfigurationService.register(languageId, {\n\t\t\twordPattern: /[a-zA-Z]+/\n\t\t}));\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction createMockEditor(text: string | string[]): ITestCodeEditor {\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, typeof text === 'string' ? text : text.join('\\n'), languageId, undefined, mockFile));\n\t\tconst editor = disposables.add(instantiateTestCodeEditor(instantiationService, model));\n\t\treturn editor;\n\t}\n\n\tfunction testCase(\n\t\tname: string,\n\t\tinitialState: { text: string | string[]; responseWordPattern?: RegExp },\n\t\toperations: (editor: TestEditor) => Promise<void>,\n\t\texpectedEndText: string | string[]\n\t) {\n\t\ttest(name, async () => {\n\t\t\tawait runWithFakedTimers({}, async () => {\n\n\t\t\t\tdisposables.add(languageFeaturesService.linkedEditingRangeProvider.register(mockFileSelector, {\n\t\t\t\t\tprovideLinkedEditingRanges(model: ITextModel, pos: IPosition) {\n\t\t\t\t\t\tconst wordAtPos = model.getWordAtPosition(pos);\n\t\t\t\t\t\tif (wordAtPos) {\n\t\t\t\t\t\t\tconst matches = model.findMatches(wordAtPos.word, false, false, true, USUAL_WORD_SEPARATORS, false);\n\t\t\t\t\t\t\treturn { ranges: matches.map(m => m.range), wordPattern: initialState.responseWordPattern };\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn { ranges: [], wordPattern: initialState.responseWordPattern };\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\tconst editor = createMockEditor(initialState.text);\n\t\t\t\teditor.updateOptions({ linkedEditing: true });\n\t\t\t\tconst linkedEditingContribution = disposables.add(editor.registerAndInstantiateContribution(\n\t\t\t\t\tLinkedEditingContribution.ID,\n\t\t\t\t\tLinkedEditingContribution,\n\t\t\t\t));\n\t\t\t\tlinkedEditingContribution.setDebounceDuration(0);\n\n\t\t\t\tconst testEditor: TestEditor = {\n\t\t\t\t\tsetPosition(pos: Position) {\n\t\t\t\t\t\teditor.setPosition(pos);\n\t\t\t\t\t\treturn linkedEditingContribution.currentUpdateTriggerPromise;\n\t\t\t\t\t},\n\t\t\t\t\tsetSelection(sel: IRange) {\n\t\t\t\t\t\teditor.setSelection(sel);\n\t\t\t\t\t\treturn linkedEditingContribution.currentUpdateTriggerPromise;\n\t\t\t\t\t},\n\t\t\t\t\ttrigger(source: string | null | undefined, handlerId: string, payload: any) {\n\t\t\t\t\t\tif (handlerId === Handler.Type || handlerId === Handler.Paste) {\n\t\t\t\t\t\t\teditor.trigger(source, handlerId, payload);\n\t\t\t\t\t\t} else if (handlerId === 'deleteLeft') {\n\t\t\t\t\t\t\teditor.runCommand(CoreEditingCommands.DeleteLeft, payload);\n\t\t\t\t\t\t} else if (handlerId === 'deleteWordLeft') {\n\t\t\t\t\t\t\tinstantiationService.invokeFunction((accessor) => (new DeleteWordLeft()).runEditorCommand(accessor, editor, payload));\n\t\t\t\t\t\t} else if (handlerId === 'deleteAllLeft') {\n\t\t\t\t\t\t\tinstantiationService.invokeFunction((accessor) => (new DeleteAllLeftAction()).runEditorCommand(accessor, editor, payload));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthrow new Error(`Unknown handler ${handlerId}!`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn linkedEditingContribution.currentSyncTriggerPromise;\n\t\t\t\t\t},\n\t\t\t\t\tundo() {\n\t\t\t\t\t\teditor.runCommand(CoreEditingCommands.Undo, null);\n\t\t\t\t\t},\n\t\t\t\t\tredo() {\n\t\t\t\t\t\teditor.runCommand(CoreEditingCommands.Redo, null);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tawait operations(testEditor);\n\n\t\t\t\treturn new Promise<void>((resolve) => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (typeof expectedEndText === 'string') {\n\t\t\t\t\t\t\tassert.strictEqual(editor.getModel()!.getValue(), expectedEndText);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tassert.strictEqual(editor.getModel()!.getValue(), expectedEndText.join('\\n'));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}, timeout);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tconst state = {\n\t\ttext: '<ooo></ooo>'\n\t};\n\n\t/**\n\t * Simple insertion\n\t */\n\ttestCase('Simple insert - initial', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<iooo></iooo>');\n\n\ttestCase('Simple insert - middle', state, async (editor) => {\n\t\tconst pos = new Position(1, 3);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<oioo></oioo>');\n\n\ttestCase('Simple insert - end', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<oooi></oooi>');\n\n\t/**\n\t * Simple insertion - end\n\t */\n\ttestCase('Simple insert end - initial', state, async (editor) => {\n\t\tconst pos = new Position(1, 8);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<iooo></iooo>');\n\n\ttestCase('Simple insert end - middle', state, async (editor) => {\n\t\tconst pos = new Position(1, 9);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<oioo></oioo>');\n\n\ttestCase('Simple insert end - end', state, async (editor) => {\n\t\tconst pos = new Position(1, 11);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<oooi></oooi>');\n\n\t/**\n\t * Boundary insertion\n\t */\n\ttestCase('Simple insert - out of boundary', state, async (editor) => {\n\t\tconst pos = new Position(1, 1);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, 'i<ooo></ooo>');\n\n\ttestCase('Simple insert - out of boundary 2', state, async (editor) => {\n\t\tconst pos = new Position(1, 6);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<ooo>i</ooo>');\n\n\ttestCase('Simple insert - out of boundary 3', state, async (editor) => {\n\t\tconst pos = new Position(1, 7);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<ooo><i/ooo>');\n\n\ttestCase('Simple insert - out of boundary 4', state, async (editor) => {\n\t\tconst pos = new Position(1, 12);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<ooo></ooo>i');\n\n\t/**\n\t * Insert + Move\n\t */\n\ttestCase('Continuous insert', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<iiooo></iiooo>');\n\n\ttestCase('Insert - move - insert', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t\tawait editor.setPosition(new Position(1, 4));\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<ioioo></ioioo>');\n\n\ttestCase('Insert - move - insert outside region', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t\tawait editor.setPosition(new Position(1, 7));\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<iooo>i</iooo>');\n\n\t/**\n\t * Selection insert\n\t */\n\ttestCase('Selection insert - simple', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.setSelection(new Range(1, 2, 1, 3));\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<ioo></ioo>');\n\n\ttestCase('Selection insert - whole', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.setSelection(new Range(1, 2, 1, 5));\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<i></i>');\n\n\ttestCase('Selection insert - across boundary', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.setSelection(new Range(1, 1, 1, 3));\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, 'ioo></oo>');\n\n\t/**\n\t * @todo\n\t * Undefined behavior\n\t */\n\t// testCase('Selection insert - across two boundary', state, async (editor) => {\n\t// \tconst pos = new Position(1, 2);\n\t// \tawait editor.setPosition(pos);\n\t// \tawait linkedEditingContribution.updateLinkedUI(pos);\n\t// \tawait editor.setSelection(new Range(1, 4, 1, 9));\n\t// \tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t// }, '<ooioo>');\n\n\t/**\n\t * Break out behavior\n\t */\n\ttestCase('Breakout - type space', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: ' ' });\n\t}, '<ooo ></ooo>');\n\n\ttestCase('Breakout - type space then undo', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: ' ' });\n\t\teditor.undo();\n\t}, '<ooo></ooo>');\n\n\ttestCase('Breakout - type space in middle', state, async (editor) => {\n\t\tconst pos = new Position(1, 4);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: ' ' });\n\t}, '<oo o></ooo>');\n\n\ttestCase('Breakout - paste content starting with space', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Paste, { text: ' i=\"i\"' });\n\t}, '<ooo i=\"i\"></ooo>');\n\n\ttestCase('Breakout - paste content starting with space then undo', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Paste, { text: ' i=\"i\"' });\n\t\teditor.undo();\n\t}, '<ooo></ooo>');\n\n\ttestCase('Breakout - paste content starting with space in middle', state, async (editor) => {\n\t\tconst pos = new Position(1, 4);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Paste, { text: ' i' });\n\t}, '<oo io></ooo>');\n\n\t/**\n\t * Break out with custom provider wordPattern\n\t */\n\n\tconst state3 = {\n\t\t...state,\n\t\tresponseWordPattern: /[a-yA-Y]+/\n\t};\n\n\ttestCase('Breakout with stop pattern - insert', state3, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<iooo></iooo>');\n\n\ttestCase('Breakout with stop pattern - insert stop char', state3, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'z' });\n\t}, '<zooo></ooo>');\n\n\ttestCase('Breakout with stop pattern - paste char', state3, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Paste, { text: 'z' });\n\t}, '<zooo></ooo>');\n\n\ttestCase('Breakout with stop pattern - paste string', state3, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Paste, { text: 'zo' });\n\t}, '<zoooo></ooo>');\n\n\ttestCase('Breakout with stop pattern - insert at end', state3, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'z' });\n\t}, '<oooz></ooo>');\n\n\tconst state4 = {\n\t\t...state,\n\t\tresponseWordPattern: /[a-eA-E]+/\n\t};\n\n\ttestCase('Breakout with stop pattern - insert stop char, respos', state4, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<iooo></ooo>');\n\n\t/**\n\t * Delete\n\t */\n\ttestCase('Delete - left char', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', 'deleteLeft', {});\n\t}, '<oo></oo>');\n\n\ttestCase('Delete - left char then undo', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', 'deleteLeft', {});\n\t\teditor.undo();\n\t}, '<ooo></ooo>');\n\n\ttestCase('Delete - left word', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', 'deleteWordLeft', {});\n\t}, '<></>');\n\n\ttestCase('Delete - left word then undo', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', 'deleteWordLeft', {});\n\t\teditor.undo();\n\t\teditor.undo();\n\t}, '<ooo></ooo>');\n\n\t/**\n\t * Todo: Fix test\n\t */\n\t// testCase('Delete - left all', state, async (editor) => {\n\t// \tconst pos = new Position(1, 3);\n\t// \tawait editor.setPosition(pos);\n\t// \tawait linkedEditingContribution.updateLinkedUI(pos);\n\t// \tawait editor.trigger('keyboard', 'deleteAllLeft', {});\n\t// }, '></>');\n\n\t/**\n\t * Todo: Fix test\n\t */\n\t// testCase('Delete - left all then undo', state, async (editor) => {\n\t// \tconst pos = new Position(1, 5);\n\t// \tawait editor.setPosition(pos);\n\t// \tawait linkedEditingContribution.updateLinkedUI(pos);\n\t// \tawait editor.trigger('keyboard', 'deleteAllLeft', {});\n\t// \teditor.undo();\n\t// }, '></ooo>');\n\n\ttestCase('Delete - left all then undo twice', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', 'deleteAllLeft', {});\n\t\teditor.undo();\n\t\teditor.undo();\n\t}, '<ooo></ooo>');\n\n\ttestCase('Delete - selection', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.setSelection(new Range(1, 2, 1, 3));\n\t\tawait editor.trigger('keyboard', 'deleteLeft', {});\n\t}, '<oo></oo>');\n\n\ttestCase('Delete - selection across boundary', state, async (editor) => {\n\t\tconst pos = new Position(1, 3);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.setSelection(new Range(1, 1, 1, 3));\n\t\tawait editor.trigger('keyboard', 'deleteLeft', {});\n\t}, 'oo></oo>');\n\n\t/**\n\t * Undo / redo\n\t */\n\ttestCase('Undo/redo - simple undo', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t\teditor.undo();\n\t\teditor.undo();\n\t}, '<ooo></ooo>');\n\n\ttestCase('Undo/redo - simple undo/redo', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t\teditor.undo();\n\t\teditor.redo();\n\t}, '<iooo></iooo>');\n\n\t/**\n\t * Multi line\n\t */\n\tconst state2 = {\n\t\ttext: [\n\t\t\t'<ooo>',\n\t\t\t'</ooo>'\n\t\t]\n\t};\n\n\ttestCase('Multiline insert', state2, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, [\n\t\t'<iooo>',\n\t\t'</iooo>'\n\t]);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { runWithFakedTimers } from '../../../../../base/test/common/timeTravelScheduler.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { CoreEditingCommands } from '../../../../browser/coreCommands.js';\nimport { IPosition, Position } from '../../../../common/core/position.js';\nimport { IRange, Range } from '../../../../common/core/range.js';\nimport { USUAL_WORD_SEPARATORS } from '../../../../common/core/wordHelper.js';\nimport { Handler } from '../../../../common/editorCommon.js';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\nimport { ITextModel } from '../../../../common/model.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nimport { DeleteAllLeftAction } from '../../../linesOperations/browser/linesOperations.js';\nimport { LinkedEditingContribution } from '../../browser/linkedEditing.js';\nimport { DeleteWordLeft } from '../../../wordOperations/browser/wordOperations.js';\nimport { ITestCodeEditor, createCodeEditorServices, instantiateTestCodeEditor } from '../../../../test/browser/testCodeEditor.js';\nimport { instantiateTextModel } from '../../../../test/common/testTextModel.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\n\nconst mockFile = URI.parse('test:somefile.ttt');\nconst mockFileSelector = { scheme: 'test' };\nconst timeout = 30;\n\ninterface TestEditor {\n\tsetPosition(pos: Position): Promise<any>;\n\tsetSelection(sel: IRange): Promise<any>;\n\ttrigger(source: string | null | undefined, handlerId: string, payload: any): Promise<any>;\n\tundo(): void;\n\tredo(): void;\n}\n\nconst languageId = 'linkedEditingTestLangage';\n\nsuite('linked editing', () => {\n\tlet disposables: DisposableStore;\n\tlet instantiationService: TestInstantiationService;\n\tlet languageFeaturesService: ILanguageFeaturesService;\n\tlet languageConfigurationService: ILanguageConfigurationService;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tinstantiationService = createCodeEditorServices(disposables);\n\t\tlanguageFeaturesService = instantiationService.get(ILanguageFeaturesService);\n\t\tlanguageConfigurationService = instantiationService.get(ILanguageConfigurationService);\n\n\t\tdisposables.add(languageConfigurationService.register(languageId, {\n\t\t\twordPattern: /[a-zA-Z]+/\n\t\t}));\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction createMockEditor(text: string | string[]): ITestCodeEditor {\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, typeof text === 'string' ? text : text.join('\\n'), languageId, undefined, mockFile));\n\t\tconst editor = disposables.add(instantiateTestCodeEditor(instantiationService, model));\n\t\treturn editor;\n\t}\n\n\tfunction testCase(\n\t\tname: string,\n\t\tinitialState: { text: string | string[]; responseWordPattern?: RegExp },\n\t\toperations: (editor: TestEditor) => Promise<void>,\n\t\texpectedEndText: string | string[]\n\t) {\n\t\ttest(name, async () => {\n\t\t\tawait runWithFakedTimers({}, async () => {\n\n\t\t\t\tdisposables.add(languageFeaturesService.linkedEditingRangeProvider.register(mockFileSelector, {\n\t\t\t\t\tprovideLinkedEditingRanges(model: ITextModel, pos: IPosition) {\n\t\t\t\t\t\tconst wordAtPos = model.getWordAtPosition(pos);\n\t\t\t\t\t\tif (wordAtPos) {\n\t\t\t\t\t\t\tconst matches = model.findMatches(wordAtPos.word, false, false, true, USUAL_WORD_SEPARATORS, false);\n\t\t\t\t\t\t\treturn { ranges: matches.map(m => m.range), wordPattern: initialState.responseWordPattern };\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn { ranges: [], wordPattern: initialState.responseWordPattern };\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\tconst editor = createMockEditor(initialState.text);\n\t\t\t\teditor.updateOptions({ linkedEditing: true });\n\t\t\t\tconst linkedEditingContribution = disposables.add(editor.registerAndInstantiateContribution(\n\t\t\t\t\tLinkedEditingContribution.ID,\n\t\t\t\t\tLinkedEditingContribution,\n\t\t\t\t));\n\t\t\t\tlinkedEditingContribution.setDebounceDuration(0);\n\n\t\t\t\tconst testEditor: TestEditor = {\n\t\t\t\t\tsetPosition(pos: Position) {\n\t\t\t\t\t\teditor.setPosition(pos);\n\t\t\t\t\t\treturn linkedEditingContribution.currentUpdateTriggerPromise;\n\t\t\t\t\t},\n\t\t\t\t\tsetSelection(sel: IRange) {\n\t\t\t\t\t\teditor.setSelection(sel);\n\t\t\t\t\t\treturn linkedEditingContribution.currentUpdateTriggerPromise;\n\t\t\t\t\t},\n\t\t\t\t\ttrigger(source: string | null | undefined, handlerId: string, payload: any) {\n\t\t\t\t\t\tif (handlerId === Handler.Type || handlerId === Handler.Paste) {\n\t\t\t\t\t\t\teditor.trigger(source, handlerId, payload);\n\t\t\t\t\t\t} else if (handlerId === 'deleteLeft') {\n\t\t\t\t\t\t\teditor.runCommand(CoreEditingCommands.DeleteLeft, payload);\n\t\t\t\t\t\t} else if (handlerId === 'deleteWordLeft') {\n\t\t\t\t\t\t\tinstantiationService.invokeFunction((accessor) => (new DeleteWordLeft()).runEditorCommand(accessor, editor, payload));\n\t\t\t\t\t\t} else if (handlerId === 'deleteAllLeft') {\n\t\t\t\t\t\t\tinstantiationService.invokeFunction((accessor) => (new DeleteAllLeftAction()).runEditorCommand(accessor, editor, payload));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthrow new Error(`Unknown handler ${handlerId}!`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn linkedEditingContribution.currentSyncTriggerPromise;\n\t\t\t\t\t},\n\t\t\t\t\tundo() {\n\t\t\t\t\t\teditor.runCommand(CoreEditingCommands.Undo, null);\n\t\t\t\t\t},\n\t\t\t\t\tredo() {\n\t\t\t\t\t\teditor.runCommand(CoreEditingCommands.Redo, null);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tawait operations(testEditor);\n\n\t\t\t\treturn new Promise<void>((resolve) => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (typeof expectedEndText === 'string') {\n\t\t\t\t\t\t\tassert.strictEqual(editor.getModel()!.getValue(), expectedEndText);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tassert.strictEqual(editor.getModel()!.getValue(), expectedEndText.join('\\n'));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}, timeout);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tconst state = {\n\t\ttext: '<ooo></ooo>'\n\t};\n\n\t/**\n\t * Simple insertion\n\t */\n\ttestCase('Simple insert - initial', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<iooo></iooo>');\n\n\ttestCase('Simple insert - middle', state, async (editor) => {\n\t\tconst pos = new Position(1, 3);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<oioo></oioo>');\n\n\ttestCase('Simple insert - end', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<oooi></oooi>');\n\n\t/**\n\t * Simple insertion - end\n\t */\n\ttestCase('Simple insert end - initial', state, async (editor) => {\n\t\tconst pos = new Position(1, 8);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<iooo></iooo>');\n\n\ttestCase('Simple insert end - middle', state, async (editor) => {\n\t\tconst pos = new Position(1, 9);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<oioo></oioo>');\n\n\ttestCase('Simple insert end - end', state, async (editor) => {\n\t\tconst pos = new Position(1, 11);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<oooi></oooi>');\n\n\t/**\n\t * Boundary insertion\n\t */\n\ttestCase('Simple insert - out of boundary', state, async (editor) => {\n\t\tconst pos = new Position(1, 1);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, 'i<ooo></ooo>');\n\n\ttestCase('Simple insert - out of boundary 2', state, async (editor) => {\n\t\tconst pos = new Position(1, 6);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<ooo>i</ooo>');\n\n\ttestCase('Simple insert - out of boundary 3', state, async (editor) => {\n\t\tconst pos = new Position(1, 7);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<ooo><i/ooo>');\n\n\ttestCase('Simple insert - out of boundary 4', state, async (editor) => {\n\t\tconst pos = new Position(1, 12);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<ooo></ooo>i');\n\n\t/**\n\t * Insert + Move\n\t */\n\ttestCase('Continuous insert', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<iiooo></iiooo>');\n\n\ttestCase('Insert - move - insert', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t\tawait editor.setPosition(new Position(1, 4));\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<ioioo></ioioo>');\n\n\ttestCase('Insert - move - insert outside region', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t\tawait editor.setPosition(new Position(1, 7));\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<iooo>i</iooo>');\n\n\t/**\n\t * Selection insert\n\t */\n\ttestCase('Selection insert - simple', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.setSelection(new Range(1, 2, 1, 3));\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<ioo></ioo>');\n\n\ttestCase('Selection insert - whole', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.setSelection(new Range(1, 2, 1, 5));\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<i></i>');\n\n\ttestCase('Selection insert - across boundary', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.setSelection(new Range(1, 1, 1, 3));\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, 'ioo></oo>');\n\n\t/**\n\t * @todo\n\t * Undefined behavior\n\t */\n\t// testCase('Selection insert - across two boundary', state, async (editor) => {\n\t// \tconst pos = new Position(1, 2);\n\t// \tawait editor.setPosition(pos);\n\t// \tawait linkedEditingContribution.updateLinkedUI(pos);\n\t// \tawait editor.setSelection(new Range(1, 4, 1, 9));\n\t// \tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t// }, '<ooioo>');\n\n\t/**\n\t * Break out behavior\n\t */\n\ttestCase('Breakout - type space', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: ' ' });\n\t}, '<ooo ></ooo>');\n\n\ttestCase('Breakout - type space then undo', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: ' ' });\n\t\teditor.undo();\n\t}, '<ooo></ooo>');\n\n\ttestCase('Breakout - type space in middle', state, async (editor) => {\n\t\tconst pos = new Position(1, 4);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: ' ' });\n\t}, '<oo o></ooo>');\n\n\ttestCase('Breakout - paste content starting with space', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Paste, { text: ' i=\"i\"' });\n\t}, '<ooo i=\"i\"></ooo>');\n\n\ttestCase('Breakout - paste content starting with space then undo', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Paste, { text: ' i=\"i\"' });\n\t\teditor.undo();\n\t}, '<ooo></ooo>');\n\n\ttestCase('Breakout - paste content starting with space in middle', state, async (editor) => {\n\t\tconst pos = new Position(1, 4);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Paste, { text: ' i' });\n\t}, '<oo io></ooo>');\n\n\t/**\n\t * Break out with custom provider wordPattern\n\t */\n\n\tconst state3 = {\n\t\t...state,\n\t\tresponseWordPattern: /[a-yA-Y]+/\n\t};\n\n\ttestCase('Breakout with stop pattern - insert', state3, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<iooo></iooo>');\n\n\ttestCase('Breakout with stop pattern - insert stop char', state3, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'z' });\n\t}, '<zooo></ooo>');\n\n\ttestCase('Breakout with stop pattern - paste char', state3, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Paste, { text: 'z' });\n\t}, '<zooo></ooo>');\n\n\ttestCase('Breakout with stop pattern - paste string', state3, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Paste, { text: 'zo' });\n\t}, '<zoooo></ooo>');\n\n\ttestCase('Breakout with stop pattern - insert at end', state3, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'z' });\n\t}, '<oooz></ooo>');\n\n\tconst state4 = {\n\t\t...state,\n\t\tresponseWordPattern: /[a-eA-E]+/\n\t};\n\n\ttestCase('Breakout with stop pattern - insert stop char, respos', state4, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, '<iooo></ooo>');\n\n\t/**\n\t * Delete\n\t */\n\ttestCase('Delete - left char', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', 'deleteLeft', {});\n\t}, '<oo></oo>');\n\n\ttestCase('Delete - left char then undo', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', 'deleteLeft', {});\n\t\teditor.undo();\n\t}, '<ooo></ooo>');\n\n\ttestCase('Delete - left word', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', 'deleteWordLeft', {});\n\t}, '<></>');\n\n\ttestCase('Delete - left word then undo', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', 'deleteWordLeft', {});\n\t\teditor.undo();\n\t\teditor.undo();\n\t}, '<ooo></ooo>');\n\n\t/**\n\t * Todo: Fix test\n\t */\n\t// testCase('Delete - left all', state, async (editor) => {\n\t// \tconst pos = new Position(1, 3);\n\t// \tawait editor.setPosition(pos);\n\t// \tawait linkedEditingContribution.updateLinkedUI(pos);\n\t// \tawait editor.trigger('keyboard', 'deleteAllLeft', {});\n\t// }, '></>');\n\n\t/**\n\t * Todo: Fix test\n\t */\n\t// testCase('Delete - left all then undo', state, async (editor) => {\n\t// \tconst pos = new Position(1, 5);\n\t// \tawait editor.setPosition(pos);\n\t// \tawait linkedEditingContribution.updateLinkedUI(pos);\n\t// \tawait editor.trigger('keyboard', 'deleteAllLeft', {});\n\t// \teditor.undo();\n\t// }, '></ooo>');\n\n\ttestCase('Delete - left all then undo twice', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', 'deleteAllLeft', {});\n\t\teditor.undo();\n\t\teditor.undo();\n\t}, '<ooo></ooo>');\n\n\ttestCase('Delete - selection', state, async (editor) => {\n\t\tconst pos = new Position(1, 5);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.setSelection(new Range(1, 2, 1, 3));\n\t\tawait editor.trigger('keyboard', 'deleteLeft', {});\n\t}, '<oo></oo>');\n\n\ttestCase('Delete - selection across boundary', state, async (editor) => {\n\t\tconst pos = new Position(1, 3);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.setSelection(new Range(1, 1, 1, 3));\n\t\tawait editor.trigger('keyboard', 'deleteLeft', {});\n\t}, 'oo></oo>');\n\n\t/**\n\t * Undo / redo\n\t */\n\ttestCase('Undo/redo - simple undo', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t\teditor.undo();\n\t\teditor.undo();\n\t}, '<ooo></ooo>');\n\n\ttestCase('Undo/redo - simple undo/redo', state, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t\teditor.undo();\n\t\teditor.redo();\n\t}, '<iooo></iooo>');\n\n\t/**\n\t * Multi line\n\t */\n\tconst state2 = {\n\t\ttext: [\n\t\t\t'<ooo>',\n\t\t\t'</ooo>'\n\t\t]\n\t};\n\n\ttestCase('Multiline insert', state2, async (editor) => {\n\t\tconst pos = new Position(1, 2);\n\t\tawait editor.setPosition(pos);\n\t\tawait editor.trigger('keyboard', Handler.Type, { text: 'i' });\n\t}, [\n\t\t'<iooo>',\n\t\t'</iooo>'\n\t]);\n});\n"]}