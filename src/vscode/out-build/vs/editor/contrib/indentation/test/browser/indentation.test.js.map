{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/contrib/indentation/test/browser/indentation.test.ts","vs/editor/contrib/indentation/test/browser/indentation.test.ts"],"names":[],"mappings":"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","file":"indentation.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { DisposableStore, IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\nimport { createTextModel } from '../../../../test/common/testTextModel.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { Selection } from '../../../../common/core/selection.js';\nimport { MetadataConsts, StandardTokenType } from '../../../../common/encodedTokenAttributes.js';\nimport { EncodedTokenizationResult, IState, ITokenizationSupport, TokenizationRegistry } from '../../../../common/languages.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { NullState } from '../../../../common/languages/nullTokenize.js';\nimport { AutoIndentOnPaste, IndentationToSpacesCommand, IndentationToTabsCommand } from '../../browser/indentation.js';\nimport { withTestCodeEditor } from '../../../../test/browser/testCodeEditor.js';\nimport { testCommand } from '../../../../test/browser/testCommand.js';\nimport { goIndentationRules, htmlIndentationRules, javascriptIndentationRules, latexIndentationRules, luaIndentationRules, phpIndentationRules, rubyIndentationRules } from '../../../../test/common/modes/supports/indentationRules.js';\nimport { cppOnEnterRules, htmlOnEnterRules, javascriptOnEnterRules, phpOnEnterRules } from '../../../../test/common/modes/supports/onEnterRules.js';\nimport { TypeOperations } from '../../../../common/cursor/cursorTypeOperations.js';\nimport { cppBracketRules, goBracketRules, htmlBracketRules, latexBracketRules, luaBracketRules, phpBracketRules, rubyBracketRules, typescriptBracketRules, vbBracketRules } from '../../../../test/common/modes/supports/bracketRules.js';\nimport { javascriptAutoClosingPairsRules, latexAutoClosingPairsRules } from '../../../../test/common/modes/supports/autoClosingPairsRules.js';\nimport { LanguageService } from '../../../../common/services/languageService.js';\nimport { ServiceCollection } from '../../../../../platform/instantiation/common/serviceCollection.js';\nimport { TestLanguageConfigurationService } from '../../../../test/common/modes/testLanguageConfigurationService.js';\n\nexport enum Language {\n\tTypeScript = 'ts-test',\n\tRuby = 'ruby-test',\n\tPHP = 'php-test',\n\tGo = 'go-test',\n\tCPP = 'cpp-test',\n\tHTML = 'html-test',\n\tVB = 'vb-test',\n\tLatex = 'latex-test',\n\tLua = 'lua-test'\n}\n\nfunction testIndentationToSpacesCommand(lines: string[], selection: Selection, tabSize: number, expectedLines: string[], expectedSelection: Selection): void {\n\ttestCommand(lines, null, selection, (accessor, sel) => new IndentationToSpacesCommand(sel, tabSize), expectedLines, expectedSelection);\n}\n\nfunction testIndentationToTabsCommand(lines: string[], selection: Selection, tabSize: number, expectedLines: string[], expectedSelection: Selection): void {\n\ttestCommand(lines, null, selection, (accessor, sel) => new IndentationToTabsCommand(sel, tabSize), expectedLines, expectedSelection);\n}\n\nexport function registerLanguage(languageService: ILanguageService, language: Language): IDisposable {\n\treturn languageService.registerLanguage({ id: language });\n}\n\nexport function registerLanguageConfiguration(languageConfigurationService: ILanguageConfigurationService, language: Language): IDisposable {\n\tswitch (language) {\n\t\tcase Language.TypeScript:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: typescriptBracketRules,\n\t\t\t\tcomments: {\n\t\t\t\t\tlineComment: '//',\n\t\t\t\t\tblockComment: ['/*', '*/']\n\t\t\t\t},\n\t\t\t\tautoClosingPairs: javascriptAutoClosingPairsRules,\n\t\t\t\tindentationRules: javascriptIndentationRules,\n\t\t\t\tonEnterRules: javascriptOnEnterRules\n\t\t\t});\n\t\tcase Language.Ruby:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: rubyBracketRules,\n\t\t\t\tindentationRules: rubyIndentationRules,\n\t\t\t});\n\t\tcase Language.PHP:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: phpBracketRules,\n\t\t\t\tindentationRules: phpIndentationRules,\n\t\t\t\tonEnterRules: phpOnEnterRules\n\t\t\t});\n\t\tcase Language.Go:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: goBracketRules,\n\t\t\t\tindentationRules: goIndentationRules\n\t\t\t});\n\t\tcase Language.CPP:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: cppBracketRules,\n\t\t\t\tonEnterRules: cppOnEnterRules\n\t\t\t});\n\t\tcase Language.HTML:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: htmlBracketRules,\n\t\t\t\tindentationRules: htmlIndentationRules,\n\t\t\t\tonEnterRules: htmlOnEnterRules\n\t\t\t});\n\t\tcase Language.VB:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: vbBracketRules,\n\t\t\t});\n\t\tcase Language.Latex:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: latexBracketRules,\n\t\t\t\tautoClosingPairs: latexAutoClosingPairsRules,\n\t\t\t\tindentationRules: latexIndentationRules\n\t\t\t});\n\t\tcase Language.Lua:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: luaBracketRules,\n\t\t\t\tindentationRules: luaIndentationRules\n\t\t\t});\n\t}\n}\n\nexport interface StandardTokenTypeData {\n\tstartIndex: number;\n\tstandardTokenType: StandardTokenType;\n}\n\nexport function registerTokenizationSupport(instantiationService: TestInstantiationService, tokens: StandardTokenTypeData[][], languageId: Language): IDisposable {\n\tlet lineIndex = 0;\n\tconst languageService = instantiationService.get(ILanguageService);\n\tconst tokenizationSupport: ITokenizationSupport = {\n\t\tgetInitialState: () => NullState,\n\t\ttokenize: undefined!,\n\t\ttokenizeEncoded: (line: string, hasEOL: boolean, state: IState): EncodedTokenizationResult => {\n\t\t\tconst tokensOnLine = tokens[lineIndex++];\n\t\t\tconst encodedLanguageId = languageService.languageIdCodec.encodeLanguageId(languageId);\n\t\t\tconst result = new Uint32Array(2 * tokensOnLine.length);\n\t\t\tfor (let i = 0; i < tokensOnLine.length; i++) {\n\t\t\t\tresult[2 * i] = tokensOnLine[i].startIndex;\n\t\t\t\tresult[2 * i + 1] =\n\t\t\t\t\t(\n\t\t\t\t\t\t(encodedLanguageId << MetadataConsts.LANGUAGEID_OFFSET)\n\t\t\t\t\t\t| (tokensOnLine[i].standardTokenType << MetadataConsts.TOKEN_TYPE_OFFSET)\n\t\t\t\t\t);\n\t\t\t}\n\t\t\treturn new EncodedTokenizationResult(result, state);\n\t\t}\n\t};\n\treturn TokenizationRegistry.register(languageId, tokenizationSupport);\n}\n\nsuite('Change Indentation to Spaces - TypeScript/Javascript', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('single tabs only at start of line', function () {\n\t\ttestIndentationToSpacesCommand(\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'\\tfourth line',\n\t\t\t\t'\\tfifth'\n\t\t\t],\n\t\t\tnew Selection(2, 3, 2, 3),\n\t\t\t4,\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'    fourth line',\n\t\t\t\t'    fifth'\n\t\t\t],\n\t\t\tnew Selection(2, 3, 2, 3)\n\t\t);\n\t});\n\n\ttest('multiple tabs at start of line', function () {\n\t\ttestIndentationToSpacesCommand(\n\t\t\t[\n\t\t\t\t'\\t\\tfirst',\n\t\t\t\t'\\tsecond line',\n\t\t\t\t'\\t\\t\\t third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 5, 1, 5),\n\t\t\t3,\n\t\t\t[\n\t\t\t\t'      first',\n\t\t\t\t'   second line',\n\t\t\t\t'          third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 9, 1, 9)\n\t\t);\n\t});\n\n\ttest('multiple tabs', function () {\n\t\ttestIndentationToSpacesCommand(\n\t\t\t[\n\t\t\t\t'\\t\\tfirst\\t',\n\t\t\t\t'\\tsecond  \\t line \\t',\n\t\t\t\t'\\t\\t\\t third line',\n\t\t\t\t' \\tfourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 5, 1, 5),\n\t\t\t2,\n\t\t\t[\n\t\t\t\t'    first\\t',\n\t\t\t\t'  second  \\t line \\t',\n\t\t\t\t'       third line',\n\t\t\t\t'   fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 7, 1, 7)\n\t\t);\n\t});\n\n\ttest('empty lines', function () {\n\t\ttestIndentationToSpacesCommand(\n\t\t\t[\n\t\t\t\t'\\t\\t\\t',\n\t\t\t\t'\\t',\n\t\t\t\t'\\t\\t'\n\t\t\t],\n\t\t\tnew Selection(1, 4, 1, 4),\n\t\t\t2,\n\t\t\t[\n\t\t\t\t'      ',\n\t\t\t\t'  ',\n\t\t\t\t'    '\n\t\t\t],\n\t\t\tnew Selection(1, 4, 1, 4)\n\t\t);\n\t});\n});\n\nsuite('Change Indentation to Tabs -  TypeScript/Javascript', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('spaces only at start of line', function () {\n\t\ttestIndentationToTabsCommand(\n\t\t\t[\n\t\t\t\t'    first',\n\t\t\t\t'second line',\n\t\t\t\t'    third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(2, 3, 2, 3),\n\t\t\t4,\n\t\t\t[\n\t\t\t\t'\\tfirst',\n\t\t\t\t'second line',\n\t\t\t\t'\\tthird line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(2, 3, 2, 3)\n\t\t);\n\t});\n\n\ttest('multiple spaces at start of line', function () {\n\t\ttestIndentationToTabsCommand(\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'   second line',\n\t\t\t\t'          third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'     fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 5, 1, 5),\n\t\t\t3,\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'\\tsecond line',\n\t\t\t\t'\\t\\t\\t third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'\\t  fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 5, 1, 5)\n\t\t);\n\t});\n\n\ttest('multiple spaces', function () {\n\t\ttestIndentationToTabsCommand(\n\t\t\t[\n\t\t\t\t'      first   ',\n\t\t\t\t'  second     line \\t',\n\t\t\t\t'       third line',\n\t\t\t\t'   fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 8, 1, 8),\n\t\t\t2,\n\t\t\t[\n\t\t\t\t'\\t\\t\\tfirst   ',\n\t\t\t\t'\\tsecond     line \\t',\n\t\t\t\t'\\t\\t\\t third line',\n\t\t\t\t'\\t fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 5, 1, 5)\n\t\t);\n\t});\n\n\ttest('issue #45996', function () {\n\t\ttestIndentationToSpacesCommand(\n\t\t\t[\n\t\t\t\t'\\tabc',\n\t\t\t],\n\t\t\tnew Selection(1, 3, 1, 3),\n\t\t\t4,\n\t\t\t[\n\t\t\t\t'    abc',\n\t\t\t],\n\t\t\tnew Selection(1, 6, 1, 6)\n\t\t);\n\t});\n});\n\nsuite('Indent With Tab - TypeScript/JavaScript', () => {\n\n\tconst languageId = Language.TypeScript;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('temp issue because there should be at least one passing test in a suite', () => {\n\t\tassert.ok(true);\n\t});\n\n\ttest.skip('issue #63388: perserve correct indentation on tab 1', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/63388\n\n\t\tconst model = createTextModel([\n\t\t\t'/*',\n\t\t\t' * Comment',\n\t\t\t' * /',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\teditor.setSelection(new Selection(1, 1, 3, 5));\n\t\t\teditor.executeCommands('editor.action.indentLines', TypeOperations.indent(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'    /*',\n\t\t\t\t'     * Comment',\n\t\t\t\t'     * /',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #63388: perserve correct indentation on tab 2', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/63388\n\n\t\tconst model = createTextModel([\n\t\t\t'switch (something) {',\n\t\t\t'  case 1:',\n\t\t\t'    whatever();',\n\t\t\t'    break;',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\teditor.setSelection(new Selection(1, 1, 5, 2));\n\t\t\teditor.executeCommands('editor.action.indentLines', TypeOperations.indent(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'    switch (something) {',\n\t\t\t\t'        case 1:',\n\t\t\t\t'            whatever();',\n\t\t\t\t'            break;',\n\t\t\t\t'    }',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\nsuite('Auto Indent On Paste - TypeScript/JavaScript', () => {\n\n\tconst languageId = Language.TypeScript;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('issue #119225: Do not add extra leading space when pasting JSDoc', () => {\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\tconst pasteText = [\n\t\t\t\t'/**',\n\t\t\t\t' * JSDoc',\n\t\t\t\t' */',\n\t\t\t\t'function a() {}'\n\t\t\t].join('\\n');\n\t\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 3, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 2, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 8, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 1, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 3, standardTokenType: StandardTokenType.Other },\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 8, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 9, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 10, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 11, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 12, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 13, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 14, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 15, standardTokenType: StandardTokenType.Other },\n\t\t\t\t]\n\t\t\t];\n\t\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tviewModel.paste(pasteText, true, undefined, 'keyboard');\n\t\t\tautoIndentOnPasteController.trigger(new Range(1, 1, 4, 16));\n\t\t\tassert.strictEqual(model.getValue(), pasteText);\n\t\t});\n\t});\n\n\ttest('issue #167299: Blank line removes indent', () => {\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\n\t\t\t// no need for tokenization because there are no comments\n\t\t\tconst pasteText = [\n\t\t\t\t'',\n\t\t\t\t'export type IncludeReference =',\n\t\t\t\t'\t| BaseReference',\n\t\t\t\t'\t| SelfReference',\n\t\t\t\t'\t| RelativeReference;',\n\t\t\t\t'',\n\t\t\t\t'export const enum IncludeReferenceKind {',\n\t\t\t\t'\tBase,',\n\t\t\t\t'\tSelf,',\n\t\t\t\t'\tRelativeReference,',\n\t\t\t\t'}'\n\t\t\t].join('\\n');\n\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tviewModel.paste(pasteText, true, undefined, 'keyboard');\n\t\t\tautoIndentOnPasteController.trigger(new Range(1, 1, 11, 2));\n\t\t\tassert.strictEqual(model.getValue(), pasteText);\n\t\t});\n\t});\n\n\ttest('issue #29803: do not indent when pasting text with only one line', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/29803\n\n\t\tconst model = createTextModel([\n\t\t\t'const linkHandler = new Class(a, b, c,',\n\t\t\t'    d)'\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\teditor.setSelection(new Selection(2, 6, 2, 6));\n\t\t\tconst text = ', null';\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tautoIndentOnPasteController.trigger(new Range(2, 6, 2, 11));\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const linkHandler = new Class(a, b, c,',\n\t\t\t\t'    d, null)'\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #29753: incorrect indentation after comment', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/29753\n\n\t\tconst model = createTextModel([\n\t\t\t'class A {',\n\t\t\t'    /**',\n\t\t\t'     * used only for debug purposes.',\n\t\t\t'     */',\n\t\t\t'    private _codeInfo: KeyMapping[];',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\teditor.setSelection(new Selection(5, 24, 5, 34));\n\t\t\tconst text = 'IMacLinuxKeyMapping';\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tautoIndentOnPasteController.trigger(new Range(5, 24, 5, 43));\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'class A {',\n\t\t\t\t'    /**',\n\t\t\t\t'     * used only for debug purposes.',\n\t\t\t\t'     */',\n\t\t\t\t'    private _codeInfo: IMacLinuxKeyMapping[];',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #29753: incorrect indentation of header comment', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/29753\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\tconst text = [\n\t\t\t\t'/*----------------',\n\t\t\t\t' *  Copyright (c) ',\n\t\t\t\t' *  Licensed under ...',\n\t\t\t\t' *-----------------*/',\n\t\t\t].join('\\n');\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tautoIndentOnPasteController.trigger(new Range(1, 1, 4, 22));\n\t\t\tassert.strictEqual(model.getValue(), text);\n\t\t});\n\t});\n\n\ttest('issue #209859: do not do change indentation when pasted inside of a string', () => {\n\n\t\t// issue: https://github.com/microsoft/vscode/issues/209859\n\t\t// issue: https://github.com/microsoft/vscode/issues/209418\n\n\t\tconst initialText = [\n\t\t\t'const foo = \"some text',\n\t\t\t'         which is strangely',\n\t\t\t'    indented\"'\n\t\t].join('\\n');\n\t\tconst model = createTextModel(initialText, languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 12, standardTokenType: StandardTokenType.String },\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.String },\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.String },\n\t\t\t\t]\n\t\t\t];\n\t\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\n\t\t\teditor.setSelection(new Selection(2, 10, 2, 15));\n\t\t\tviewModel.paste('which', true, undefined, 'keyboard');\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tautoIndentOnPasteController.trigger(new Range(2, 1, 2, 28));\n\t\t\tassert.strictEqual(model.getValue(), initialText);\n\t\t});\n\t});\n\n\t// Failing tests found in issues...\n\n\ttest.skip('issue #181065: Incorrect paste of object within comment', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/181065\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\tconst text = [\n\t\t\t\t'/**',\n\t\t\t\t' * @typedef {',\n\t\t\t\t' * }',\n\t\t\t\t' */'\n\t\t\t].join('\\n');\n\t\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 3, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 2, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 3, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 11, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 12, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 13, standardTokenType: StandardTokenType.Other },\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 2, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 3, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 4, standardTokenType: StandardTokenType.Other },\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 1, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 3, standardTokenType: StandardTokenType.Other },\n\t\t\t\t]\n\t\t\t];\n\t\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\tautoIndentOnPasteController.trigger(new Range(1, 1, 4, 4));\n\t\t\tassert.strictEqual(model.getValue(), text);\n\t\t});\n\t});\n\n\ttest.skip('issue #86301: preserve cursor at inserted indentation level', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/86301\n\n\t\tconst model = createTextModel([\n\t\t\t'() => {',\n\t\t\t'',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\teditor.setSelection(new Selection(2, 1, 2, 1));\n\t\t\tconst text = [\n\t\t\t\t'() => {',\n\t\t\t\t'',\n\t\t\t\t'}',\n\t\t\t\t''\n\t\t\t].join('\\n');\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\tautoIndentOnPasteController.trigger(new Range(2, 1, 5, 1));\n\n\t\t\t// notes:\n\t\t\t// why is line 3 not indented to the same level as line 2?\n\t\t\t// looks like the indentation is inserted correctly at line 5, but the cursor does not appear at the maximum indentation level?\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'() => {',\n\t\t\t\t'    () => {',\n\t\t\t\t'    ', // <- should also be indented\n\t\t\t\t'    }',\n\t\t\t\t'    ', // <- cursor should be at the end of the indentation\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\n\t\t\tconst selection = viewModel.getSelection();\n\t\t\tassert.deepStrictEqual(selection, new Selection(5, 5, 5, 5));\n\t\t});\n\t});\n\n\ttest.skip('issue #85781: indent line with extra white space', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/85781\n\t\t// note: still to determine whether this is a bug or not\n\n\t\tconst model = createTextModel([\n\t\t\t'() => {',\n\t\t\t'    console.log(\"a\");',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\teditor.setSelection(new Selection(2, 5, 2, 5));\n\t\t\tconst text = [\n\t\t\t\t'() => {',\n\t\t\t\t'    console.log(\"b\")',\n\t\t\t\t'}',\n\t\t\t\t' '\n\t\t\t].join('\\n');\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\t// todo@aiday-mar, make sure range is correct, and make test work as in real life\n\t\t\tautoIndentOnPasteController.trigger(new Range(2, 5, 5, 6));\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'() => {',\n\t\t\t\t'    () => {',\n\t\t\t\t'        console.log(\"b\")',\n\t\t\t\t'    }',\n\t\t\t\t'    console.log(\"a\");',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #29589: incorrect indentation of closing brace on paste', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/29589\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\teditor.setSelection(new Selection(2, 5, 2, 5));\n\t\t\tconst text = [\n\t\t\t\t'function makeSub(a,b) {',\n\t\t\t\t'subsent = sent.substring(a,b);',\n\t\t\t\t'return subsent;',\n\t\t\t\t'}',\n\t\t\t].join('\\n');\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\t// todo@aiday-mar, make sure range is correct, and make test work as in real life\n\t\t\tautoIndentOnPasteController.trigger(new Range(1, 1, 4, 2));\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'function makeSub(a,b) {',\n\t\t\t\t'subsent = sent.substring(a,b);',\n\t\t\t\t'return subsent;',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #201420: incorrect indentation when first line is comment', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/201420\n\n\t\tconst model = createTextModel([\n\t\t\t'function bar() {',\n\t\t\t'',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 8, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 9, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 12, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 13, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 14, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 15, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 16, standardTokenType: StandardTokenType.Other }\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 2, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 3, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 10, standardTokenType: StandardTokenType.Comment }\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 5, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 6, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 9, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 10, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 11, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 12, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 14, standardTokenType: StandardTokenType.Other }],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 1, standardTokenType: StandardTokenType.Other }]\n\t\t\t];\n\t\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\n\t\t\teditor.setSelection(new Selection(2, 1, 2, 1));\n\t\t\tconst text = [\n\t\t\t\t'// comment',\n\t\t\t\t'const foo = 42',\n\t\t\t].join('\\n');\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\tautoIndentOnPasteController.trigger(new Range(2, 1, 3, 15));\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'function bar() {',\n\t\t\t\t'    // comment',\n\t\t\t\t'    const foo = 42',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\nsuite('Auto Indent On Type - TypeScript/JavaScript', () => {\n\n\tconst languageId = Language.TypeScript;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\t// Failing tests from issues...\n\n\ttest('issue #208215: indent after arrow function', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/208215\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\tviewModel.type('const add1 = (n) =>');\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const add1 = (n) =>',\n\t\t\t\t'    ',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #208215: indent after arrow function 2', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/208215\n\n\t\tconst model = createTextModel([\n\t\t\t'const array = [1, 2, 3, 4, 5];',\n\t\t\t'array.map(',\n\t\t\t'    v =>',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(3, 9, 3, 9));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const array = [1, 2, 3, 4, 5];',\n\t\t\t\t'array.map(',\n\t\t\t\t'    v =>',\n\t\t\t\t'        '\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #116843: indent after arrow function', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/116843\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\tviewModel.type([\n\t\t\t\t'const add1 = (n) =>',\n\t\t\t\t'    n + 1;',\n\t\t\t].join('\\n'));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const add1 = (n) =>',\n\t\t\t\t'    n + 1;',\n\t\t\t\t'',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #29755: do not add indentation on enter if indentation is already valid', () => {\n\n\t\t//https://github.com/microsoft/vscode/issues/29755\n\n\t\tconst model = createTextModel([\n\t\t\t'function f() {',\n\t\t\t'    const one = 1;',\n\t\t\t'    const two = 2;',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(3, 1, 3, 1));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'function f() {',\n\t\t\t\t'    const one = 1;',\n\t\t\t\t'',\n\t\t\t\t'    const two = 2;',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #36090', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/36090\n\n\t\tconst model = createTextModel([\n\t\t\t'class ItemCtrl {',\n\t\t\t'    getPropertiesByItemId(id) {',\n\t\t\t'        return this.fetchItem(id)',\n\t\t\t'            .then(item => {',\n\t\t\t'                return this.getPropertiesOfItem(item);',\n\t\t\t'            });',\n\t\t\t'    }',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'advanced', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(7, 6, 7, 6));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(),\n\t\t\t\t[\n\t\t\t\t\t'class ItemCtrl {',\n\t\t\t\t\t'    getPropertiesByItemId(id) {',\n\t\t\t\t\t'        return this.fetchItem(id)',\n\t\t\t\t\t'            .then(item => {',\n\t\t\t\t\t'                return this.getPropertiesOfItem(item);',\n\t\t\t\t\t'            });',\n\t\t\t\t\t'    }',\n\t\t\t\t\t'    ',\n\t\t\t\t\t'}',\n\t\t\t\t].join('\\n')\n\t\t\t);\n\t\t\tassert.deepStrictEqual(editor.getSelection(), new Selection(8, 5, 8, 5));\n\t\t});\n\t});\n\n\ttest('issue #115304: indent block comment onEnter', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/115304\n\n\t\tconst model = createTextModel([\n\t\t\t'/** */',\n\t\t\t'function f() {}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'advanced', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(1, 4, 1, 4));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(),\n\t\t\t\t[\n\t\t\t\t\t'/**',\n\t\t\t\t\t' * ',\n\t\t\t\t\t' */',\n\t\t\t\t\t'function f() {}',\n\t\t\t\t].join('\\n')\n\t\t\t);\n\t\t\tassert.deepStrictEqual(editor.getSelection(), new Selection(2, 4, 2, 4));\n\t\t});\n\t});\n\n\ttest('issue #43244: indent when lambda arrow function is detected, outdent when end is reached', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/43244\n\n\t\tconst model = createTextModel([\n\t\t\t'const array = [1, 2, 3, 4, 5];',\n\t\t\t'array.map(_)'\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 12, 2, 12));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const array = [1, 2, 3, 4, 5];',\n\t\t\t\t'array.map(_',\n\t\t\t\t'    ',\n\t\t\t\t')'\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #43244: incorrect indentation after if/for/while without braces', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/43244\n\n\t\tconst model = createTextModel([\n\t\t\t'function f() {',\n\t\t\t'    if (condition)',\n\t\t\t'}'\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 19, 2, 19));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'function f() {',\n\t\t\t\t'    if (condition)',\n\t\t\t\t'        ',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\n\t\t\tviewModel.type('return;');\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'function f() {',\n\t\t\t\t'    if (condition)',\n\t\t\t\t'        return;',\n\t\t\t\t'    ',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #208232: incorrect indentation inside of comments', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/208232\n\n\t\tconst model = createTextModel([\n\t\t\t'/**',\n\t\t\t'indentation done for {',\n\t\t\t'*/'\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t\t[{ startIndex: 0, standardTokenType: StandardTokenType.Comment }],\n\t\t\t\t[{ startIndex: 0, standardTokenType: StandardTokenType.Comment }],\n\t\t\t\t[{ startIndex: 0, standardTokenType: StandardTokenType.Comment }]\n\t\t\t];\n\t\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\t\t\teditor.setSelection(new Selection(2, 23, 2, 23));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'/**',\n\t\t\t\t'indentation done for {',\n\t\t\t\t'',\n\t\t\t\t'*/'\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #209802: allman style braces in JavaScript', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/209802\n\n\t\tconst model = createTextModel([\n\t\t\t'if (/*condition*/)',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(1, 19, 1, 19));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'if (/*condition*/)',\n\t\t\t\t'    '\n\t\t\t].join('\\n'));\n\t\t\tviewModel.type('{', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'if (/*condition*/)',\n\t\t\t\t'{}'\n\t\t\t].join('\\n'));\n\t\t\teditor.setSelection(new Selection(2, 2, 2, 2));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'if (/*condition*/)',\n\t\t\t\t'{',\n\t\t\t\t'    ',\n\t\t\t\t'}'\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\t// Failing tests...\n\n\ttest.skip('issue #43244: indent after equal sign is detected', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/43244\n\t\t// issue: Should indent after an equal sign is detected followed by whitespace characters.\n\t\t// This should be outdented when a semi-colon is detected indicating the end of the assignment.\n\n\t\t// TODO: requires exploring indent/outdent pairs instead\n\n\t\tconst model = createTextModel([\n\t\t\t'const array ='\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(1, 14, 1, 14));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const array =',\n\t\t\t\t'    '\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #43244: indent after dot detected after object/array signifying a method call', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/43244\n\t\t// issue: When a dot is written, we should detect that this is a method call and indent accordingly\n\n\t\t// TODO: requires exploring indent/outdent pairs instead\n\n\t\tconst model = createTextModel([\n\t\t\t'const array = [1, 2, 3];',\n\t\t\t'array.'\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 7, 2, 7));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const array = [1, 2, 3];',\n\t\t\t\t'array.',\n\t\t\t\t'    '\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #43244: indent after dot detected on a subsequent line after object/array signifying a method call', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/43244\n\t\t// issue: When a dot is written, we should detect that this is a method call and indent accordingly\n\n\t\t// TODO: requires exploring indent/outdent pairs instead\n\n\t\tconst model = createTextModel([\n\t\t\t'const array = [1, 2, 3]',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 7, 2, 7));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tviewModel.type('.');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const array = [1, 2, 3]',\n\t\t\t\t'    .'\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #43244: keep indentation when methods called on object/array', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/43244\n\t\t// Currently passes, but should pass with all the tests above too\n\n\t\t// TODO: requires exploring indent/outdent pairs instead\n\n\t\tconst model = createTextModel([\n\t\t\t'const array = [1, 2, 3]',\n\t\t\t'    .filter(() => true)'\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 24, 2, 24));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const array = [1, 2, 3]',\n\t\t\t\t'    .filter(() => true)',\n\t\t\t\t'    '\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #43244: keep indentation when chained methods called on object/array', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/43244\n\t\t// When the call chain is not finished yet, and we type a dot, we do not want to change the indentation\n\n\t\t// TODO: requires exploring indent/outdent pairs instead\n\n\t\tconst model = createTextModel([\n\t\t\t'const array = [1, 2, 3]',\n\t\t\t'    .filter(() => true)',\n\t\t\t'    '\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(3, 5, 3, 5));\n\t\t\tviewModel.type('.');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const array = [1, 2, 3]',\n\t\t\t\t'    .filter(() => true)',\n\t\t\t\t'    .' // here we don't want to increase the indentation because we have chained methods\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #43244: outdent when a semi-color is detected indicating the end of the assignment', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/43244\n\n\t\t// TODO: requires exploring indent/outdent pairs instead\n\n\t\tconst model = createTextModel([\n\t\t\t'const array = [1, 2, 3]',\n\t\t\t'    .filter(() => true);'\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 25, 2, 25));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const array = [1, 2, 3]',\n\t\t\t\t'    .filter(() => true);',\n\t\t\t\t''\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\n\ttest.skip('issue #40115: keep indentation when added', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/40115\n\n\t\tconst model = createTextModel('function foo() {}', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(1, 17, 1, 17));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'function foo() {',\n\t\t\t\t'    ',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t\teditor.setSelection(new Selection(2, 5, 2, 5));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'function foo() {',\n\t\t\t\t'    ',\n\t\t\t\t'    ',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #193875: incorrect indentation on enter', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/193875\n\n\t\tconst model = createTextModel([\n\t\t\t'{',\n\t\t\t'    for(;;)',\n\t\t\t'    for(;;) {}',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(3, 14, 3, 14));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'{',\n\t\t\t\t'    for(;;)',\n\t\t\t\t'    for(;;) {',\n\t\t\t\t'        ',\n\t\t\t\t'    }',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #67678: indent on typing curly brace', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/67678\n\n\t\tconst model = createTextModel([\n\t\t\t'if (true) {',\n\t\t\t'console.log(\"a\")',\n\t\t\t'console.log(\"b\")',\n\t\t\t'',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(4, 1, 4, 1));\n\t\t\tviewModel.type('}', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'if (true) {',\n\t\t\t\t'    console.log(\"a\")',\n\t\t\t\t'    console.log(\"b\")',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #46401: outdent when encountering bracket on line - allman style indentation', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/46401\n\n\t\tconst model = createTextModel([\n\t\t\t'if (true)',\n\t\t\t'    ',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 5, 2, 5));\n\t\t\tviewModel.type('{}', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'if (true)',\n\t\t\t\t'{}',\n\t\t\t].join('\\n'));\n\t\t\teditor.setSelection(new Selection(2, 2, 2, 2));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'if (true)',\n\t\t\t\t'{',\n\t\t\t\t'    ',\n\t\t\t\t'}'\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #125261: typing closing brace does not keep the current indentation', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/125261\n\n\t\tconst model = createTextModel([\n\t\t\t'foo {',\n\t\t\t'    ',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'keep', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 5, 2, 5));\n\t\t\tviewModel.type('}', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'foo {',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\nsuite('Auto Indent On Type - Ruby', () => {\n\n\tconst languageId = Language.Ruby;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('issue #198350: in or when incorrectly match non keywords for Ruby', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/198350\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\tviewModel.type('def foo\\n        i');\n\t\t\tviewModel.type('n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), 'def foo\\n        in');\n\t\t\tviewModel.type(' ', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), 'def foo\\nin ');\n\n\t\t\tviewModel.model.setValue('');\n\t\t\tviewModel.type('  # in');\n\t\t\tassert.strictEqual(model.getValue(), '  # in');\n\t\t\tviewModel.type(' ', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), '  # in ');\n\t\t});\n\t});\n\n\t// Failing tests...\n\n\ttest.skip('issue #199846: in or when incorrectly match non keywords for Ruby', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/199846\n\t\t// explanation: happening because the # is detected probably as a comment\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\tviewModel.type(`method('#foo') do`);\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t`method('#foo') do`,\n\t\t\t\t'    '\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\nsuite('Auto Indent On Type - PHP', () => {\n\n\tconst languageId = Language.PHP;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('issue #199050: should not indent after { detected in a string', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/199050\n\n\t\tconst model = createTextModel(`preg_replace('{');`, languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 13, standardTokenType: StandardTokenType.String },\n\t\t\t\t\t{ startIndex: 16, standardTokenType: StandardTokenType.Other },\n\t\t\t\t]\n\t\t\t];\n\t\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\t\t\teditor.setSelection(new Selection(1, 54, 1, 54));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t`preg_replace('{');`,\n\t\t\t\t''\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\nsuite('Auto Indent On Paste - Go', () => {\n\n\tconst languageId = Language.Go;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('temp issue because there should be at least one passing test in a suite', () => {\n\t\tassert.ok(true);\n\t});\n\n\ttest.skip('issue #199050: should not indent after { detected in a string', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/199050\n\n\t\tconst model = createTextModel([\n\t\t\t'var s = `',\n\t\t\t'quick  brown',\n\t\t\t'fox',\n\t\t\t'`',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(3, 1, 3, 1));\n\t\t\tconst text = '  ';\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\tautoIndentOnPasteController.trigger(new Range(3, 1, 3, 3));\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'var s = `',\n\t\t\t\t'quick  brown',\n\t\t\t\t'  fox',\n\t\t\t\t'`',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\nsuite('Auto Indent On Type - CPP', () => {\n\n\tconst languageId = Language.CPP;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('temp issue because there should be at least one passing test in a suite', () => {\n\t\tassert.ok(true);\n\t});\n\n\ttest.skip('issue #178334: incorrect outdent of } when signature spans multiple lines', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/178334\n\n\t\tconst model = createTextModel([\n\t\t\t'int WINAPI WinMain(bool instance,',\n\t\t\t'    int nshowcmd) {}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 20, 2, 20));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'int WINAPI WinMain(bool instance,',\n\t\t\t\t'    int nshowcmd) {',\n\t\t\t\t'    ',\n\t\t\t\t'}'\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #118929: incorrect indent when // follows curly brace', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/118929\n\n\t\tconst model = createTextModel([\n\t\t\t'if (true) { // jaja',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(1, 20, 1, 20));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'if (true) { // jaja',\n\t\t\t\t'    ',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #111265: auto indentation set to \"none\" still changes the indentation', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/111265\n\n\t\tconst model = createTextModel([\n\t\t\t'int func() {',\n\t\t\t'\t\t',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'none', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 3, 2, 3));\n\t\t\tviewModel.type('}', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'int func() {',\n\t\t\t\t'\t\t}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n});\n\nsuite('Auto Indent On Type - HTML', () => {\n\n\tconst languageId = Language.HTML;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('temp issue because there should be at least one passing test in a suite', () => {\n\t\tassert.ok(true);\n\t});\n\n\ttest.skip('issue #61510: incorrect indentation after // in html file', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/178334\n\n\t\tconst model = createTextModel([\n\t\t\t'<pre>',\n\t\t\t'  foo //I press <Enter> at the end of this line',\n\t\t\t'</pre>',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 48, 2, 48));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'<pre>',\n\t\t\t\t'  foo //I press <Enter> at the end of this line',\n\t\t\t\t'  ',\n\t\t\t\t'</pre>',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\nsuite('Auto Indent On Type - Visual Basic', () => {\n\n\tconst languageId = Language.VB;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('temp issue because there should be at least one passing test in a suite', () => {\n\t\tassert.ok(true);\n\t});\n\n\ttest.skip('issue #118932: no indentation in visual basic files', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/118932\n\n\t\tconst model = createTextModel([\n\t\t\t'if True then',\n\t\t\t'    Some code',\n\t\t\t'    end i',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\teditor.setSelection(new Selection(3, 10, 3, 10));\n\t\t\tviewModel.type('f', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'if True then',\n\t\t\t\t'    Some code',\n\t\t\t\t'end if',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\n\nsuite('Auto Indent On Type - Latex', () => {\n\n\tconst languageId = Language.Latex;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('temp issue because there should be at least one passing test in a suite', () => {\n\t\tassert.ok(true);\n\t});\n\n\ttest.skip('issue #178075: no auto closing pair when indentation done', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/178075\n\n\t\tconst model = createTextModel([\n\t\t\t'\\\\begin{theorem}',\n\t\t\t'    \\\\end',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 9, 2, 9));\n\t\t\tviewModel.type('{', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'\\\\begin{theorem}',\n\t\t\t\t'\\\\end{}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\nsuite('Auto Indent On Type - Lua', () => {\n\n\tconst languageId = Language.Lua;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('temp issue because there should be at least one passing test in a suite', () => {\n\t\tassert.ok(true);\n\t});\n\n\ttest.skip('issue #178075: no auto closing pair when indentation done', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/178075\n\n\t\tconst model = createTextModel([\n\t\t\t'print(\"asdf function asdf\")',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(1, 28, 1, 28));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'print(\"asdf function asdf\")',\n\t\t\t\t''\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { DisposableStore, IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\nimport { createTextModel } from '../../../../test/common/testTextModel.js';\nimport { TestInstantiationService } from '../../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { Selection } from '../../../../common/core/selection.js';\nimport { MetadataConsts, StandardTokenType } from '../../../../common/encodedTokenAttributes.js';\nimport { EncodedTokenizationResult, IState, ITokenizationSupport, TokenizationRegistry } from '../../../../common/languages.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { NullState } from '../../../../common/languages/nullTokenize.js';\nimport { AutoIndentOnPaste, IndentationToSpacesCommand, IndentationToTabsCommand } from '../../browser/indentation.js';\nimport { withTestCodeEditor } from '../../../../test/browser/testCodeEditor.js';\nimport { testCommand } from '../../../../test/browser/testCommand.js';\nimport { goIndentationRules, htmlIndentationRules, javascriptIndentationRules, latexIndentationRules, luaIndentationRules, phpIndentationRules, rubyIndentationRules } from '../../../../test/common/modes/supports/indentationRules.js';\nimport { cppOnEnterRules, htmlOnEnterRules, javascriptOnEnterRules, phpOnEnterRules } from '../../../../test/common/modes/supports/onEnterRules.js';\nimport { TypeOperations } from '../../../../common/cursor/cursorTypeOperations.js';\nimport { cppBracketRules, goBracketRules, htmlBracketRules, latexBracketRules, luaBracketRules, phpBracketRules, rubyBracketRules, typescriptBracketRules, vbBracketRules } from '../../../../test/common/modes/supports/bracketRules.js';\nimport { javascriptAutoClosingPairsRules, latexAutoClosingPairsRules } from '../../../../test/common/modes/supports/autoClosingPairsRules.js';\nimport { LanguageService } from '../../../../common/services/languageService.js';\nimport { ServiceCollection } from '../../../../../platform/instantiation/common/serviceCollection.js';\nimport { TestLanguageConfigurationService } from '../../../../test/common/modes/testLanguageConfigurationService.js';\n\nexport enum Language {\n\tTypeScript = 'ts-test',\n\tRuby = 'ruby-test',\n\tPHP = 'php-test',\n\tGo = 'go-test',\n\tCPP = 'cpp-test',\n\tHTML = 'html-test',\n\tVB = 'vb-test',\n\tLatex = 'latex-test',\n\tLua = 'lua-test'\n}\n\nfunction testIndentationToSpacesCommand(lines: string[], selection: Selection, tabSize: number, expectedLines: string[], expectedSelection: Selection): void {\n\ttestCommand(lines, null, selection, (accessor, sel) => new IndentationToSpacesCommand(sel, tabSize), expectedLines, expectedSelection);\n}\n\nfunction testIndentationToTabsCommand(lines: string[], selection: Selection, tabSize: number, expectedLines: string[], expectedSelection: Selection): void {\n\ttestCommand(lines, null, selection, (accessor, sel) => new IndentationToTabsCommand(sel, tabSize), expectedLines, expectedSelection);\n}\n\nexport function registerLanguage(languageService: ILanguageService, language: Language): IDisposable {\n\treturn languageService.registerLanguage({ id: language });\n}\n\nexport function registerLanguageConfiguration(languageConfigurationService: ILanguageConfigurationService, language: Language): IDisposable {\n\tswitch (language) {\n\t\tcase Language.TypeScript:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: typescriptBracketRules,\n\t\t\t\tcomments: {\n\t\t\t\t\tlineComment: '//',\n\t\t\t\t\tblockComment: ['/*', '*/']\n\t\t\t\t},\n\t\t\t\tautoClosingPairs: javascriptAutoClosingPairsRules,\n\t\t\t\tindentationRules: javascriptIndentationRules,\n\t\t\t\tonEnterRules: javascriptOnEnterRules\n\t\t\t});\n\t\tcase Language.Ruby:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: rubyBracketRules,\n\t\t\t\tindentationRules: rubyIndentationRules,\n\t\t\t});\n\t\tcase Language.PHP:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: phpBracketRules,\n\t\t\t\tindentationRules: phpIndentationRules,\n\t\t\t\tonEnterRules: phpOnEnterRules\n\t\t\t});\n\t\tcase Language.Go:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: goBracketRules,\n\t\t\t\tindentationRules: goIndentationRules\n\t\t\t});\n\t\tcase Language.CPP:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: cppBracketRules,\n\t\t\t\tonEnterRules: cppOnEnterRules\n\t\t\t});\n\t\tcase Language.HTML:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: htmlBracketRules,\n\t\t\t\tindentationRules: htmlIndentationRules,\n\t\t\t\tonEnterRules: htmlOnEnterRules\n\t\t\t});\n\t\tcase Language.VB:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: vbBracketRules,\n\t\t\t});\n\t\tcase Language.Latex:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: latexBracketRules,\n\t\t\t\tautoClosingPairs: latexAutoClosingPairsRules,\n\t\t\t\tindentationRules: latexIndentationRules\n\t\t\t});\n\t\tcase Language.Lua:\n\t\t\treturn languageConfigurationService.register(language, {\n\t\t\t\tbrackets: luaBracketRules,\n\t\t\t\tindentationRules: luaIndentationRules\n\t\t\t});\n\t}\n}\n\nexport interface StandardTokenTypeData {\n\tstartIndex: number;\n\tstandardTokenType: StandardTokenType;\n}\n\nexport function registerTokenizationSupport(instantiationService: TestInstantiationService, tokens: StandardTokenTypeData[][], languageId: Language): IDisposable {\n\tlet lineIndex = 0;\n\tconst languageService = instantiationService.get(ILanguageService);\n\tconst tokenizationSupport: ITokenizationSupport = {\n\t\tgetInitialState: () => NullState,\n\t\ttokenize: undefined!,\n\t\ttokenizeEncoded: (line: string, hasEOL: boolean, state: IState): EncodedTokenizationResult => {\n\t\t\tconst tokensOnLine = tokens[lineIndex++];\n\t\t\tconst encodedLanguageId = languageService.languageIdCodec.encodeLanguageId(languageId);\n\t\t\tconst result = new Uint32Array(2 * tokensOnLine.length);\n\t\t\tfor (let i = 0; i < tokensOnLine.length; i++) {\n\t\t\t\tresult[2 * i] = tokensOnLine[i].startIndex;\n\t\t\t\tresult[2 * i + 1] =\n\t\t\t\t\t(\n\t\t\t\t\t\t(encodedLanguageId << MetadataConsts.LANGUAGEID_OFFSET)\n\t\t\t\t\t\t| (tokensOnLine[i].standardTokenType << MetadataConsts.TOKEN_TYPE_OFFSET)\n\t\t\t\t\t);\n\t\t\t}\n\t\t\treturn new EncodedTokenizationResult(result, state);\n\t\t}\n\t};\n\treturn TokenizationRegistry.register(languageId, tokenizationSupport);\n}\n\nsuite('Change Indentation to Spaces - TypeScript/Javascript', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('single tabs only at start of line', function () {\n\t\ttestIndentationToSpacesCommand(\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'\\tfourth line',\n\t\t\t\t'\\tfifth'\n\t\t\t],\n\t\t\tnew Selection(2, 3, 2, 3),\n\t\t\t4,\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'second line',\n\t\t\t\t'third line',\n\t\t\t\t'    fourth line',\n\t\t\t\t'    fifth'\n\t\t\t],\n\t\t\tnew Selection(2, 3, 2, 3)\n\t\t);\n\t});\n\n\ttest('multiple tabs at start of line', function () {\n\t\ttestIndentationToSpacesCommand(\n\t\t\t[\n\t\t\t\t'\\t\\tfirst',\n\t\t\t\t'\\tsecond line',\n\t\t\t\t'\\t\\t\\t third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 5, 1, 5),\n\t\t\t3,\n\t\t\t[\n\t\t\t\t'      first',\n\t\t\t\t'   second line',\n\t\t\t\t'          third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 9, 1, 9)\n\t\t);\n\t});\n\n\ttest('multiple tabs', function () {\n\t\ttestIndentationToSpacesCommand(\n\t\t\t[\n\t\t\t\t'\\t\\tfirst\\t',\n\t\t\t\t'\\tsecond  \\t line \\t',\n\t\t\t\t'\\t\\t\\t third line',\n\t\t\t\t' \\tfourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 5, 1, 5),\n\t\t\t2,\n\t\t\t[\n\t\t\t\t'    first\\t',\n\t\t\t\t'  second  \\t line \\t',\n\t\t\t\t'       third line',\n\t\t\t\t'   fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 7, 1, 7)\n\t\t);\n\t});\n\n\ttest('empty lines', function () {\n\t\ttestIndentationToSpacesCommand(\n\t\t\t[\n\t\t\t\t'\\t\\t\\t',\n\t\t\t\t'\\t',\n\t\t\t\t'\\t\\t'\n\t\t\t],\n\t\t\tnew Selection(1, 4, 1, 4),\n\t\t\t2,\n\t\t\t[\n\t\t\t\t'      ',\n\t\t\t\t'  ',\n\t\t\t\t'    '\n\t\t\t],\n\t\t\tnew Selection(1, 4, 1, 4)\n\t\t);\n\t});\n});\n\nsuite('Change Indentation to Tabs -  TypeScript/Javascript', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('spaces only at start of line', function () {\n\t\ttestIndentationToTabsCommand(\n\t\t\t[\n\t\t\t\t'    first',\n\t\t\t\t'second line',\n\t\t\t\t'    third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(2, 3, 2, 3),\n\t\t\t4,\n\t\t\t[\n\t\t\t\t'\\tfirst',\n\t\t\t\t'second line',\n\t\t\t\t'\\tthird line',\n\t\t\t\t'fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(2, 3, 2, 3)\n\t\t);\n\t});\n\n\ttest('multiple spaces at start of line', function () {\n\t\ttestIndentationToTabsCommand(\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'   second line',\n\t\t\t\t'          third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'     fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 5, 1, 5),\n\t\t\t3,\n\t\t\t[\n\t\t\t\t'first',\n\t\t\t\t'\\tsecond line',\n\t\t\t\t'\\t\\t\\t third line',\n\t\t\t\t'fourth line',\n\t\t\t\t'\\t  fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 5, 1, 5)\n\t\t);\n\t});\n\n\ttest('multiple spaces', function () {\n\t\ttestIndentationToTabsCommand(\n\t\t\t[\n\t\t\t\t'      first   ',\n\t\t\t\t'  second     line \\t',\n\t\t\t\t'       third line',\n\t\t\t\t'   fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 8, 1, 8),\n\t\t\t2,\n\t\t\t[\n\t\t\t\t'\\t\\t\\tfirst   ',\n\t\t\t\t'\\tsecond     line \\t',\n\t\t\t\t'\\t\\t\\t third line',\n\t\t\t\t'\\t fourth line',\n\t\t\t\t'fifth'\n\t\t\t],\n\t\t\tnew Selection(1, 5, 1, 5)\n\t\t);\n\t});\n\n\ttest('issue #45996', function () {\n\t\ttestIndentationToSpacesCommand(\n\t\t\t[\n\t\t\t\t'\\tabc',\n\t\t\t],\n\t\t\tnew Selection(1, 3, 1, 3),\n\t\t\t4,\n\t\t\t[\n\t\t\t\t'    abc',\n\t\t\t],\n\t\t\tnew Selection(1, 6, 1, 6)\n\t\t);\n\t});\n});\n\nsuite('Indent With Tab - TypeScript/JavaScript', () => {\n\n\tconst languageId = Language.TypeScript;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('temp issue because there should be at least one passing test in a suite', () => {\n\t\tassert.ok(true);\n\t});\n\n\ttest.skip('issue #63388: perserve correct indentation on tab 1', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/63388\n\n\t\tconst model = createTextModel([\n\t\t\t'/*',\n\t\t\t' * Comment',\n\t\t\t' * /',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\teditor.setSelection(new Selection(1, 1, 3, 5));\n\t\t\teditor.executeCommands('editor.action.indentLines', TypeOperations.indent(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'    /*',\n\t\t\t\t'     * Comment',\n\t\t\t\t'     * /',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #63388: perserve correct indentation on tab 2', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/63388\n\n\t\tconst model = createTextModel([\n\t\t\t'switch (something) {',\n\t\t\t'  case 1:',\n\t\t\t'    whatever();',\n\t\t\t'    break;',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\teditor.setSelection(new Selection(1, 1, 5, 2));\n\t\t\teditor.executeCommands('editor.action.indentLines', TypeOperations.indent(viewModel.cursorConfig, editor.getModel(), editor.getSelections()));\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'    switch (something) {',\n\t\t\t\t'        case 1:',\n\t\t\t\t'            whatever();',\n\t\t\t\t'            break;',\n\t\t\t\t'    }',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\nsuite('Auto Indent On Paste - TypeScript/JavaScript', () => {\n\n\tconst languageId = Language.TypeScript;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('issue #119225: Do not add extra leading space when pasting JSDoc', () => {\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\tconst pasteText = [\n\t\t\t\t'/**',\n\t\t\t\t' * JSDoc',\n\t\t\t\t' */',\n\t\t\t\t'function a() {}'\n\t\t\t].join('\\n');\n\t\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 3, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 2, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 8, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 1, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 3, standardTokenType: StandardTokenType.Other },\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 8, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 9, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 10, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 11, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 12, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 13, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 14, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 15, standardTokenType: StandardTokenType.Other },\n\t\t\t\t]\n\t\t\t];\n\t\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tviewModel.paste(pasteText, true, undefined, 'keyboard');\n\t\t\tautoIndentOnPasteController.trigger(new Range(1, 1, 4, 16));\n\t\t\tassert.strictEqual(model.getValue(), pasteText);\n\t\t});\n\t});\n\n\ttest('issue #167299: Blank line removes indent', () => {\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\n\t\t\t// no need for tokenization because there are no comments\n\t\t\tconst pasteText = [\n\t\t\t\t'',\n\t\t\t\t'export type IncludeReference =',\n\t\t\t\t'\t| BaseReference',\n\t\t\t\t'\t| SelfReference',\n\t\t\t\t'\t| RelativeReference;',\n\t\t\t\t'',\n\t\t\t\t'export const enum IncludeReferenceKind {',\n\t\t\t\t'\tBase,',\n\t\t\t\t'\tSelf,',\n\t\t\t\t'\tRelativeReference,',\n\t\t\t\t'}'\n\t\t\t].join('\\n');\n\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tviewModel.paste(pasteText, true, undefined, 'keyboard');\n\t\t\tautoIndentOnPasteController.trigger(new Range(1, 1, 11, 2));\n\t\t\tassert.strictEqual(model.getValue(), pasteText);\n\t\t});\n\t});\n\n\ttest('issue #29803: do not indent when pasting text with only one line', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/29803\n\n\t\tconst model = createTextModel([\n\t\t\t'const linkHandler = new Class(a, b, c,',\n\t\t\t'    d)'\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\teditor.setSelection(new Selection(2, 6, 2, 6));\n\t\t\tconst text = ', null';\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tautoIndentOnPasteController.trigger(new Range(2, 6, 2, 11));\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const linkHandler = new Class(a, b, c,',\n\t\t\t\t'    d, null)'\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #29753: incorrect indentation after comment', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/29753\n\n\t\tconst model = createTextModel([\n\t\t\t'class A {',\n\t\t\t'    /**',\n\t\t\t'     * used only for debug purposes.',\n\t\t\t'     */',\n\t\t\t'    private _codeInfo: KeyMapping[];',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\teditor.setSelection(new Selection(5, 24, 5, 34));\n\t\t\tconst text = 'IMacLinuxKeyMapping';\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tautoIndentOnPasteController.trigger(new Range(5, 24, 5, 43));\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'class A {',\n\t\t\t\t'    /**',\n\t\t\t\t'     * used only for debug purposes.',\n\t\t\t\t'     */',\n\t\t\t\t'    private _codeInfo: IMacLinuxKeyMapping[];',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #29753: incorrect indentation of header comment', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/29753\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\tconst text = [\n\t\t\t\t'/*----------------',\n\t\t\t\t' *  Copyright (c) ',\n\t\t\t\t' *  Licensed under ...',\n\t\t\t\t' *-----------------*/',\n\t\t\t].join('\\n');\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tautoIndentOnPasteController.trigger(new Range(1, 1, 4, 22));\n\t\t\tassert.strictEqual(model.getValue(), text);\n\t\t});\n\t});\n\n\ttest('issue #209859: do not do change indentation when pasted inside of a string', () => {\n\n\t\t// issue: https://github.com/microsoft/vscode/issues/209859\n\t\t// issue: https://github.com/microsoft/vscode/issues/209418\n\n\t\tconst initialText = [\n\t\t\t'const foo = \"some text',\n\t\t\t'         which is strangely',\n\t\t\t'    indented\"'\n\t\t].join('\\n');\n\t\tconst model = createTextModel(initialText, languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 12, standardTokenType: StandardTokenType.String },\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.String },\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.String },\n\t\t\t\t]\n\t\t\t];\n\t\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\n\t\t\teditor.setSelection(new Selection(2, 10, 2, 15));\n\t\t\tviewModel.paste('which', true, undefined, 'keyboard');\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tautoIndentOnPasteController.trigger(new Range(2, 1, 2, 28));\n\t\t\tassert.strictEqual(model.getValue(), initialText);\n\t\t});\n\t});\n\n\t// Failing tests found in issues...\n\n\ttest.skip('issue #181065: Incorrect paste of object within comment', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/181065\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\tconst text = [\n\t\t\t\t'/**',\n\t\t\t\t' * @typedef {',\n\t\t\t\t' * }',\n\t\t\t\t' */'\n\t\t\t].join('\\n');\n\t\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 3, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 2, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 3, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 11, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 12, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 13, standardTokenType: StandardTokenType.Other },\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 2, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 3, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 4, standardTokenType: StandardTokenType.Other },\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 1, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 3, standardTokenType: StandardTokenType.Other },\n\t\t\t\t]\n\t\t\t];\n\t\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\tautoIndentOnPasteController.trigger(new Range(1, 1, 4, 4));\n\t\t\tassert.strictEqual(model.getValue(), text);\n\t\t});\n\t});\n\n\ttest.skip('issue #86301: preserve cursor at inserted indentation level', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/86301\n\n\t\tconst model = createTextModel([\n\t\t\t'() => {',\n\t\t\t'',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\teditor.setSelection(new Selection(2, 1, 2, 1));\n\t\t\tconst text = [\n\t\t\t\t'() => {',\n\t\t\t\t'',\n\t\t\t\t'}',\n\t\t\t\t''\n\t\t\t].join('\\n');\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\tautoIndentOnPasteController.trigger(new Range(2, 1, 5, 1));\n\n\t\t\t// notes:\n\t\t\t// why is line 3 not indented to the same level as line 2?\n\t\t\t// looks like the indentation is inserted correctly at line 5, but the cursor does not appear at the maximum indentation level?\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'() => {',\n\t\t\t\t'    () => {',\n\t\t\t\t'    ', // <- should also be indented\n\t\t\t\t'    }',\n\t\t\t\t'    ', // <- cursor should be at the end of the indentation\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\n\t\t\tconst selection = viewModel.getSelection();\n\t\t\tassert.deepStrictEqual(selection, new Selection(5, 5, 5, 5));\n\t\t});\n\t});\n\n\ttest.skip('issue #85781: indent line with extra white space', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/85781\n\t\t// note: still to determine whether this is a bug or not\n\n\t\tconst model = createTextModel([\n\t\t\t'() => {',\n\t\t\t'    console.log(\"a\");',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\teditor.setSelection(new Selection(2, 5, 2, 5));\n\t\t\tconst text = [\n\t\t\t\t'() => {',\n\t\t\t\t'    console.log(\"b\")',\n\t\t\t\t'}',\n\t\t\t\t' '\n\t\t\t].join('\\n');\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\t// todo@aiday-mar, make sure range is correct, and make test work as in real life\n\t\t\tautoIndentOnPasteController.trigger(new Range(2, 5, 5, 6));\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'() => {',\n\t\t\t\t'    () => {',\n\t\t\t\t'        console.log(\"b\")',\n\t\t\t\t'    }',\n\t\t\t\t'    console.log(\"a\");',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #29589: incorrect indentation of closing brace on paste', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/29589\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\teditor.setSelection(new Selection(2, 5, 2, 5));\n\t\t\tconst text = [\n\t\t\t\t'function makeSub(a,b) {',\n\t\t\t\t'subsent = sent.substring(a,b);',\n\t\t\t\t'return subsent;',\n\t\t\t\t'}',\n\t\t\t].join('\\n');\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\t// todo@aiday-mar, make sure range is correct, and make test work as in real life\n\t\t\tautoIndentOnPasteController.trigger(new Range(1, 1, 4, 2));\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'function makeSub(a,b) {',\n\t\t\t\t'subsent = sent.substring(a,b);',\n\t\t\t\t'return subsent;',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #201420: incorrect indentation when first line is comment', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/201420\n\n\t\tconst model = createTextModel([\n\t\t\t'function bar() {',\n\t\t\t'',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 8, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 9, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 12, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 13, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 14, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 15, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 16, standardTokenType: StandardTokenType.Other }\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 2, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 3, standardTokenType: StandardTokenType.Comment },\n\t\t\t\t\t{ startIndex: 10, standardTokenType: StandardTokenType.Comment }\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 5, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 6, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 9, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 10, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 11, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 12, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 14, standardTokenType: StandardTokenType.Other }],\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 1, standardTokenType: StandardTokenType.Other }]\n\t\t\t];\n\t\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\n\t\t\teditor.setSelection(new Selection(2, 1, 2, 1));\n\t\t\tconst text = [\n\t\t\t\t'// comment',\n\t\t\t\t'const foo = 42',\n\t\t\t].join('\\n');\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\tautoIndentOnPasteController.trigger(new Range(2, 1, 3, 15));\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'function bar() {',\n\t\t\t\t'    // comment',\n\t\t\t\t'    const foo = 42',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\nsuite('Auto Indent On Type - TypeScript/JavaScript', () => {\n\n\tconst languageId = Language.TypeScript;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\t// Failing tests from issues...\n\n\ttest('issue #208215: indent after arrow function', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/208215\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\tviewModel.type('const add1 = (n) =>');\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const add1 = (n) =>',\n\t\t\t\t'    ',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #208215: indent after arrow function 2', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/208215\n\n\t\tconst model = createTextModel([\n\t\t\t'const array = [1, 2, 3, 4, 5];',\n\t\t\t'array.map(',\n\t\t\t'    v =>',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(3, 9, 3, 9));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const array = [1, 2, 3, 4, 5];',\n\t\t\t\t'array.map(',\n\t\t\t\t'    v =>',\n\t\t\t\t'        '\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #116843: indent after arrow function', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/116843\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\tviewModel.type([\n\t\t\t\t'const add1 = (n) =>',\n\t\t\t\t'    n + 1;',\n\t\t\t].join('\\n'));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const add1 = (n) =>',\n\t\t\t\t'    n + 1;',\n\t\t\t\t'',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #29755: do not add indentation on enter if indentation is already valid', () => {\n\n\t\t//https://github.com/microsoft/vscode/issues/29755\n\n\t\tconst model = createTextModel([\n\t\t\t'function f() {',\n\t\t\t'    const one = 1;',\n\t\t\t'    const two = 2;',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(3, 1, 3, 1));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'function f() {',\n\t\t\t\t'    const one = 1;',\n\t\t\t\t'',\n\t\t\t\t'    const two = 2;',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #36090', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/36090\n\n\t\tconst model = createTextModel([\n\t\t\t'class ItemCtrl {',\n\t\t\t'    getPropertiesByItemId(id) {',\n\t\t\t'        return this.fetchItem(id)',\n\t\t\t'            .then(item => {',\n\t\t\t'                return this.getPropertiesOfItem(item);',\n\t\t\t'            });',\n\t\t\t'    }',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'advanced', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(7, 6, 7, 6));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(),\n\t\t\t\t[\n\t\t\t\t\t'class ItemCtrl {',\n\t\t\t\t\t'    getPropertiesByItemId(id) {',\n\t\t\t\t\t'        return this.fetchItem(id)',\n\t\t\t\t\t'            .then(item => {',\n\t\t\t\t\t'                return this.getPropertiesOfItem(item);',\n\t\t\t\t\t'            });',\n\t\t\t\t\t'    }',\n\t\t\t\t\t'    ',\n\t\t\t\t\t'}',\n\t\t\t\t].join('\\n')\n\t\t\t);\n\t\t\tassert.deepStrictEqual(editor.getSelection(), new Selection(8, 5, 8, 5));\n\t\t});\n\t});\n\n\ttest('issue #115304: indent block comment onEnter', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/115304\n\n\t\tconst model = createTextModel([\n\t\t\t'/** */',\n\t\t\t'function f() {}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'advanced', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(1, 4, 1, 4));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(),\n\t\t\t\t[\n\t\t\t\t\t'/**',\n\t\t\t\t\t' * ',\n\t\t\t\t\t' */',\n\t\t\t\t\t'function f() {}',\n\t\t\t\t].join('\\n')\n\t\t\t);\n\t\t\tassert.deepStrictEqual(editor.getSelection(), new Selection(2, 4, 2, 4));\n\t\t});\n\t});\n\n\ttest('issue #43244: indent when lambda arrow function is detected, outdent when end is reached', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/43244\n\n\t\tconst model = createTextModel([\n\t\t\t'const array = [1, 2, 3, 4, 5];',\n\t\t\t'array.map(_)'\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 12, 2, 12));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const array = [1, 2, 3, 4, 5];',\n\t\t\t\t'array.map(_',\n\t\t\t\t'    ',\n\t\t\t\t')'\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #43244: incorrect indentation after if/for/while without braces', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/43244\n\n\t\tconst model = createTextModel([\n\t\t\t'function f() {',\n\t\t\t'    if (condition)',\n\t\t\t'}'\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 19, 2, 19));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'function f() {',\n\t\t\t\t'    if (condition)',\n\t\t\t\t'        ',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\n\t\t\tviewModel.type('return;');\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'function f() {',\n\t\t\t\t'    if (condition)',\n\t\t\t\t'        return;',\n\t\t\t\t'    ',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #208232: incorrect indentation inside of comments', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/208232\n\n\t\tconst model = createTextModel([\n\t\t\t'/**',\n\t\t\t'indentation done for {',\n\t\t\t'*/'\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t\t[{ startIndex: 0, standardTokenType: StandardTokenType.Comment }],\n\t\t\t\t[{ startIndex: 0, standardTokenType: StandardTokenType.Comment }],\n\t\t\t\t[{ startIndex: 0, standardTokenType: StandardTokenType.Comment }]\n\t\t\t];\n\t\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\t\t\teditor.setSelection(new Selection(2, 23, 2, 23));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'/**',\n\t\t\t\t'indentation done for {',\n\t\t\t\t'',\n\t\t\t\t'*/'\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest('issue #209802: allman style braces in JavaScript', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/209802\n\n\t\tconst model = createTextModel([\n\t\t\t'if (/*condition*/)',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(1, 19, 1, 19));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'if (/*condition*/)',\n\t\t\t\t'    '\n\t\t\t].join('\\n'));\n\t\t\tviewModel.type('{', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'if (/*condition*/)',\n\t\t\t\t'{}'\n\t\t\t].join('\\n'));\n\t\t\teditor.setSelection(new Selection(2, 2, 2, 2));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'if (/*condition*/)',\n\t\t\t\t'{',\n\t\t\t\t'    ',\n\t\t\t\t'}'\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\t// Failing tests...\n\n\ttest.skip('issue #43244: indent after equal sign is detected', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/43244\n\t\t// issue: Should indent after an equal sign is detected followed by whitespace characters.\n\t\t// This should be outdented when a semi-colon is detected indicating the end of the assignment.\n\n\t\t// TODO: requires exploring indent/outdent pairs instead\n\n\t\tconst model = createTextModel([\n\t\t\t'const array ='\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(1, 14, 1, 14));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const array =',\n\t\t\t\t'    '\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #43244: indent after dot detected after object/array signifying a method call', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/43244\n\t\t// issue: When a dot is written, we should detect that this is a method call and indent accordingly\n\n\t\t// TODO: requires exploring indent/outdent pairs instead\n\n\t\tconst model = createTextModel([\n\t\t\t'const array = [1, 2, 3];',\n\t\t\t'array.'\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 7, 2, 7));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const array = [1, 2, 3];',\n\t\t\t\t'array.',\n\t\t\t\t'    '\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #43244: indent after dot detected on a subsequent line after object/array signifying a method call', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/43244\n\t\t// issue: When a dot is written, we should detect that this is a method call and indent accordingly\n\n\t\t// TODO: requires exploring indent/outdent pairs instead\n\n\t\tconst model = createTextModel([\n\t\t\t'const array = [1, 2, 3]',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 7, 2, 7));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tviewModel.type('.');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const array = [1, 2, 3]',\n\t\t\t\t'    .'\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #43244: keep indentation when methods called on object/array', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/43244\n\t\t// Currently passes, but should pass with all the tests above too\n\n\t\t// TODO: requires exploring indent/outdent pairs instead\n\n\t\tconst model = createTextModel([\n\t\t\t'const array = [1, 2, 3]',\n\t\t\t'    .filter(() => true)'\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 24, 2, 24));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const array = [1, 2, 3]',\n\t\t\t\t'    .filter(() => true)',\n\t\t\t\t'    '\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #43244: keep indentation when chained methods called on object/array', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/43244\n\t\t// When the call chain is not finished yet, and we type a dot, we do not want to change the indentation\n\n\t\t// TODO: requires exploring indent/outdent pairs instead\n\n\t\tconst model = createTextModel([\n\t\t\t'const array = [1, 2, 3]',\n\t\t\t'    .filter(() => true)',\n\t\t\t'    '\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(3, 5, 3, 5));\n\t\t\tviewModel.type('.');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const array = [1, 2, 3]',\n\t\t\t\t'    .filter(() => true)',\n\t\t\t\t'    .' // here we don't want to increase the indentation because we have chained methods\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #43244: outdent when a semi-color is detected indicating the end of the assignment', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/43244\n\n\t\t// TODO: requires exploring indent/outdent pairs instead\n\n\t\tconst model = createTextModel([\n\t\t\t'const array = [1, 2, 3]',\n\t\t\t'    .filter(() => true);'\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 25, 2, 25));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'const array = [1, 2, 3]',\n\t\t\t\t'    .filter(() => true);',\n\t\t\t\t''\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\n\ttest.skip('issue #40115: keep indentation when added', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/40115\n\n\t\tconst model = createTextModel('function foo() {}', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(1, 17, 1, 17));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'function foo() {',\n\t\t\t\t'    ',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t\teditor.setSelection(new Selection(2, 5, 2, 5));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'function foo() {',\n\t\t\t\t'    ',\n\t\t\t\t'    ',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #193875: incorrect indentation on enter', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/193875\n\n\t\tconst model = createTextModel([\n\t\t\t'{',\n\t\t\t'    for(;;)',\n\t\t\t'    for(;;) {}',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(3, 14, 3, 14));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'{',\n\t\t\t\t'    for(;;)',\n\t\t\t\t'    for(;;) {',\n\t\t\t\t'        ',\n\t\t\t\t'    }',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #67678: indent on typing curly brace', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/67678\n\n\t\tconst model = createTextModel([\n\t\t\t'if (true) {',\n\t\t\t'console.log(\"a\")',\n\t\t\t'console.log(\"b\")',\n\t\t\t'',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(4, 1, 4, 1));\n\t\t\tviewModel.type('}', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'if (true) {',\n\t\t\t\t'    console.log(\"a\")',\n\t\t\t\t'    console.log(\"b\")',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #46401: outdent when encountering bracket on line - allman style indentation', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/46401\n\n\t\tconst model = createTextModel([\n\t\t\t'if (true)',\n\t\t\t'    ',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 5, 2, 5));\n\t\t\tviewModel.type('{}', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'if (true)',\n\t\t\t\t'{}',\n\t\t\t].join('\\n'));\n\t\t\teditor.setSelection(new Selection(2, 2, 2, 2));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'if (true)',\n\t\t\t\t'{',\n\t\t\t\t'    ',\n\t\t\t\t'}'\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #125261: typing closing brace does not keep the current indentation', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/125261\n\n\t\tconst model = createTextModel([\n\t\t\t'foo {',\n\t\t\t'    ',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'keep', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 5, 2, 5));\n\t\t\tviewModel.type('}', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'foo {',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\nsuite('Auto Indent On Type - Ruby', () => {\n\n\tconst languageId = Language.Ruby;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('issue #198350: in or when incorrectly match non keywords for Ruby', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/198350\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\tviewModel.type('def foo\\n        i');\n\t\t\tviewModel.type('n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), 'def foo\\n        in');\n\t\t\tviewModel.type(' ', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), 'def foo\\nin ');\n\n\t\t\tviewModel.model.setValue('');\n\t\t\tviewModel.type('  # in');\n\t\t\tassert.strictEqual(model.getValue(), '  # in');\n\t\t\tviewModel.type(' ', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), '  # in ');\n\t\t});\n\t});\n\n\t// Failing tests...\n\n\ttest.skip('issue #199846: in or when incorrectly match non keywords for Ruby', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/199846\n\t\t// explanation: happening because the # is detected probably as a comment\n\n\t\tconst model = createTextModel('', languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\tviewModel.type(`method('#foo') do`);\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t`method('#foo') do`,\n\t\t\t\t'    '\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\nsuite('Auto Indent On Type - PHP', () => {\n\n\tconst languageId = Language.PHP;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('issue #199050: should not indent after { detected in a string', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/199050\n\n\t\tconst model = createTextModel(`preg_replace('{');`, languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\tconst tokens: StandardTokenTypeData[][] = [\n\t\t\t\t[\n\t\t\t\t\t{ startIndex: 0, standardTokenType: StandardTokenType.Other },\n\t\t\t\t\t{ startIndex: 13, standardTokenType: StandardTokenType.String },\n\t\t\t\t\t{ startIndex: 16, standardTokenType: StandardTokenType.Other },\n\t\t\t\t]\n\t\t\t];\n\t\t\tdisposables.add(registerTokenizationSupport(instantiationService, tokens, languageId));\n\t\t\teditor.setSelection(new Selection(1, 54, 1, 54));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t`preg_replace('{');`,\n\t\t\t\t''\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\nsuite('Auto Indent On Paste - Go', () => {\n\n\tconst languageId = Language.Go;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('temp issue because there should be at least one passing test in a suite', () => {\n\t\tassert.ok(true);\n\t});\n\n\ttest.skip('issue #199050: should not indent after { detected in a string', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/199050\n\n\t\tconst model = createTextModel([\n\t\t\t'var s = `',\n\t\t\t'quick  brown',\n\t\t\t'fox',\n\t\t\t'`',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(3, 1, 3, 1));\n\t\t\tconst text = '  ';\n\t\t\tconst autoIndentOnPasteController = editor.registerAndInstantiateContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste);\n\t\t\tviewModel.paste(text, true, undefined, 'keyboard');\n\t\t\tautoIndentOnPasteController.trigger(new Range(3, 1, 3, 3));\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'var s = `',\n\t\t\t\t'quick  brown',\n\t\t\t\t'  fox',\n\t\t\t\t'`',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\nsuite('Auto Indent On Type - CPP', () => {\n\n\tconst languageId = Language.CPP;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('temp issue because there should be at least one passing test in a suite', () => {\n\t\tassert.ok(true);\n\t});\n\n\ttest.skip('issue #178334: incorrect outdent of } when signature spans multiple lines', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/178334\n\n\t\tconst model = createTextModel([\n\t\t\t'int WINAPI WinMain(bool instance,',\n\t\t\t'    int nshowcmd) {}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 20, 2, 20));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'int WINAPI WinMain(bool instance,',\n\t\t\t\t'    int nshowcmd) {',\n\t\t\t\t'    ',\n\t\t\t\t'}'\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #118929: incorrect indent when // follows curly brace', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/118929\n\n\t\tconst model = createTextModel([\n\t\t\t'if (true) { // jaja',\n\t\t\t'}',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(1, 20, 1, 20));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'if (true) { // jaja',\n\t\t\t\t'    ',\n\t\t\t\t'}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n\ttest.skip('issue #111265: auto indentation set to \"none\" still changes the indentation', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/111265\n\n\t\tconst model = createTextModel([\n\t\t\t'int func() {',\n\t\t\t'\t\t',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'none', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 3, 2, 3));\n\t\t\tviewModel.type('}', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'int func() {',\n\t\t\t\t'\t\t}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n\n});\n\nsuite('Auto Indent On Type - HTML', () => {\n\n\tconst languageId = Language.HTML;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('temp issue because there should be at least one passing test in a suite', () => {\n\t\tassert.ok(true);\n\t});\n\n\ttest.skip('issue #61510: incorrect indentation after // in html file', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/178334\n\n\t\tconst model = createTextModel([\n\t\t\t'<pre>',\n\t\t\t'  foo //I press <Enter> at the end of this line',\n\t\t\t'</pre>',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 48, 2, 48));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'<pre>',\n\t\t\t\t'  foo //I press <Enter> at the end of this line',\n\t\t\t\t'  ',\n\t\t\t\t'</pre>',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\nsuite('Auto Indent On Type - Visual Basic', () => {\n\n\tconst languageId = Language.VB;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('temp issue because there should be at least one passing test in a suite', () => {\n\t\tassert.ok(true);\n\t});\n\n\ttest.skip('issue #118932: no indentation in visual basic files', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/118932\n\n\t\tconst model = createTextModel([\n\t\t\t'if True then',\n\t\t\t'    Some code',\n\t\t\t'    end i',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel, instantiationService) => {\n\t\t\teditor.setSelection(new Selection(3, 10, 3, 10));\n\t\t\tviewModel.type('f', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'if True then',\n\t\t\t\t'    Some code',\n\t\t\t\t'end if',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\n\nsuite('Auto Indent On Type - Latex', () => {\n\n\tconst languageId = Language.Latex;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('temp issue because there should be at least one passing test in a suite', () => {\n\t\tassert.ok(true);\n\t});\n\n\ttest.skip('issue #178075: no auto closing pair when indentation done', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/178075\n\n\t\tconst model = createTextModel([\n\t\t\t'\\\\begin{theorem}',\n\t\t\t'    \\\\end',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(2, 9, 2, 9));\n\t\t\tviewModel.type('{', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'\\\\begin{theorem}',\n\t\t\t\t'\\\\end{}',\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n\nsuite('Auto Indent On Type - Lua', () => {\n\n\tconst languageId = Language.Lua;\n\tlet disposables: DisposableStore;\n\tlet serviceCollection: ServiceCollection;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\t\tconst languageService = new LanguageService();\n\t\tconst languageConfigurationService = new TestLanguageConfigurationService();\n\t\tdisposables.add(languageService);\n\t\tdisposables.add(languageConfigurationService);\n\t\tdisposables.add(registerLanguage(languageService, languageId));\n\t\tdisposables.add(registerLanguageConfiguration(languageConfigurationService, languageId));\n\t\tserviceCollection = new ServiceCollection(\n\t\t\t[ILanguageService, languageService],\n\t\t\t[ILanguageConfigurationService, languageConfigurationService]\n\t\t);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('temp issue because there should be at least one passing test in a suite', () => {\n\t\tassert.ok(true);\n\t});\n\n\ttest.skip('issue #178075: no auto closing pair when indentation done', () => {\n\n\t\t// https://github.com/microsoft/vscode/issues/178075\n\n\t\tconst model = createTextModel([\n\t\t\t'print(\"asdf function asdf\")',\n\t\t].join('\\n'), languageId, {});\n\t\tdisposables.add(model);\n\n\t\twithTestCodeEditor(model, { autoIndent: 'full', serviceCollection }, (editor, viewModel) => {\n\t\t\teditor.setSelection(new Selection(1, 28, 1, 28));\n\t\t\tviewModel.type('\\n', 'keyboard');\n\t\t\tassert.strictEqual(model.getValue(), [\n\t\t\t\t'print(\"asdf function asdf\")',\n\t\t\t\t''\n\t\t\t].join('\\n'));\n\t\t});\n\t});\n});\n"]}