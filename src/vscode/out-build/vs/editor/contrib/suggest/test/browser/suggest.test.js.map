{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/contrib/suggest/test/browser/suggest.test.ts","vs/editor/contrib/suggest/test/browser/suggest.test.ts"],"names":[],"mappings":"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","file":"suggest.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { TextModel } from '../../../../common/model/textModel.js';\nimport { CompletionItemKind, CompletionItemProvider } from '../../../../common/languages.js';\nimport { CompletionOptions, provideSuggestionItems, SnippetSortOrder } from '../../browser/suggest.js';\nimport { createTextModel } from '../../../../test/common/testTextModel.js';\nimport { LanguageFeatureRegistry } from '../../../../common/languageFeatureRegistry.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\n\nsuite('Suggest', function () {\n\tlet model: TextModel;\n\tlet registration: IDisposable;\n\tlet registry: LanguageFeatureRegistry<CompletionItemProvider>;\n\n\tsetup(function () {\n\t\tregistry = new LanguageFeatureRegistry();\n\t\tmodel = createTextModel('FOO\\nbar\\BAR\\nfoo', undefined, undefined, URI.parse('foo:bar/path'));\n\t\tregistration = registry.register({ pattern: 'bar/path', scheme: 'foo' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(_doc, pos) {\n\t\t\t\treturn {\n\t\t\t\t\tincomplete: false,\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tlabel: 'aaa',\n\t\t\t\t\t\tkind: CompletionItemKind.Snippet,\n\t\t\t\t\t\tinsertText: 'aaa',\n\t\t\t\t\t\trange: Range.fromPositions(pos)\n\t\t\t\t\t}, {\n\t\t\t\t\t\tlabel: 'zzz',\n\t\t\t\t\t\tkind: CompletionItemKind.Snippet,\n\t\t\t\t\t\tinsertText: 'zzz',\n\t\t\t\t\t\trange: Range.fromPositions(pos)\n\t\t\t\t\t}, {\n\t\t\t\t\t\tlabel: 'fff',\n\t\t\t\t\t\tkind: CompletionItemKind.Property,\n\t\t\t\t\t\tinsertText: 'fff',\n\t\t\t\t\t\trange: Range.fromPositions(pos)\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t});\n\n\tteardown(() => {\n\t\tregistration.dispose();\n\t\tmodel.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('sort - snippet inline', async function () {\n\t\tconst { items, disposable } = await provideSuggestionItems(registry, model, new Position(1, 1), new CompletionOptions(SnippetSortOrder.Inline));\n\t\tassert.strictEqual(items.length, 3);\n\t\tassert.strictEqual(items[0].completion.label, 'aaa');\n\t\tassert.strictEqual(items[1].completion.label, 'fff');\n\t\tassert.strictEqual(items[2].completion.label, 'zzz');\n\t\tdisposable.dispose();\n\t});\n\n\ttest('sort - snippet top', async function () {\n\t\tconst { items, disposable } = await provideSuggestionItems(registry, model, new Position(1, 1), new CompletionOptions(SnippetSortOrder.Top));\n\t\tassert.strictEqual(items.length, 3);\n\t\tassert.strictEqual(items[0].completion.label, 'aaa');\n\t\tassert.strictEqual(items[1].completion.label, 'zzz');\n\t\tassert.strictEqual(items[2].completion.label, 'fff');\n\t\tdisposable.dispose();\n\t});\n\n\ttest('sort - snippet bottom', async function () {\n\t\tconst { items, disposable } = await provideSuggestionItems(registry, model, new Position(1, 1), new CompletionOptions(SnippetSortOrder.Bottom));\n\t\tassert.strictEqual(items.length, 3);\n\t\tassert.strictEqual(items[0].completion.label, 'fff');\n\t\tassert.strictEqual(items[1].completion.label, 'aaa');\n\t\tassert.strictEqual(items[2].completion.label, 'zzz');\n\t\tdisposable.dispose();\n\t});\n\n\ttest('sort - snippet none', async function () {\n\t\tconst { items, disposable } = await provideSuggestionItems(registry, model, new Position(1, 1), new CompletionOptions(undefined, new Set<CompletionItemKind>().add(CompletionItemKind.Snippet)));\n\t\tassert.strictEqual(items.length, 1);\n\t\tassert.strictEqual(items[0].completion.label, 'fff');\n\t\tdisposable.dispose();\n\t});\n\n\ttest('only from', function (callback) {\n\n\t\tconst foo: any = {\n\t\t\ttriggerCharacters: [],\n\t\t\tprovideCompletionItems() {\n\t\t\t\treturn {\n\t\t\t\t\tcurrentWord: '',\n\t\t\t\t\tincomplete: false,\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tlabel: 'jjj',\n\t\t\t\t\t\ttype: 'property',\n\t\t\t\t\t\tinsertText: 'jjj'\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tconst registration = registry.register({ pattern: 'bar/path', scheme: 'foo' }, foo);\n\n\t\tprovideSuggestionItems(registry, model, new Position(1, 1), new CompletionOptions(undefined, undefined, new Set<CompletionItemProvider>().add(foo))).then(({ items, disposable }) => {\n\t\t\tregistration.dispose();\n\n\t\t\tassert.strictEqual(items.length, 1);\n\t\t\tassert.ok(items[0].provider === foo);\n\t\t\tdisposable.dispose();\n\t\t\tcallback();\n\t\t});\n\t});\n\n\ttest('Ctrl+space completions stopped working with the latest Insiders, #97650', async function () {\n\n\n\t\tconst foo = new class implements CompletionItemProvider {\n\n\t\t\t_debugDisplayName = 'test';\n\t\t\ttriggerCharacters = [];\n\n\t\t\tprovideCompletionItems() {\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tlabel: 'one',\n\t\t\t\t\t\tkind: CompletionItemKind.Class,\n\t\t\t\t\t\tinsertText: 'one',\n\t\t\t\t\t\trange: {\n\t\t\t\t\t\t\tinsert: new Range(0, 0, 0, 0),\n\t\t\t\t\t\t\treplace: new Range(0, 0, 0, 10)\n\t\t\t\t\t\t}\n\t\t\t\t\t}, {\n\t\t\t\t\t\tlabel: 'two',\n\t\t\t\t\t\tkind: CompletionItemKind.Class,\n\t\t\t\t\t\tinsertText: 'two',\n\t\t\t\t\t\trange: {\n\t\t\t\t\t\t\tinsert: new Range(0, 0, 0, 0),\n\t\t\t\t\t\t\treplace: new Range(0, 1, 0, 10)\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t\tconst registration = registry.register({ pattern: 'bar/path', scheme: 'foo' }, foo);\n\t\tconst { items, disposable } = await provideSuggestionItems(registry, model, new Position(0, 0), new CompletionOptions(undefined, undefined, new Set<CompletionItemProvider>().add(foo)));\n\t\tregistration.dispose();\n\n\t\tassert.strictEqual(items.length, 2);\n\t\tconst [a, b] = items;\n\n\t\tassert.strictEqual(a.completion.label, 'one');\n\t\tassert.strictEqual(a.isInvalid, false);\n\t\tassert.strictEqual(b.completion.label, 'two');\n\t\tassert.strictEqual(b.isInvalid, true);\n\t\tdisposable.dispose();\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { TextModel } from '../../../../common/model/textModel.js';\nimport { CompletionItemKind, CompletionItemProvider } from '../../../../common/languages.js';\nimport { CompletionOptions, provideSuggestionItems, SnippetSortOrder } from '../../browser/suggest.js';\nimport { createTextModel } from '../../../../test/common/testTextModel.js';\nimport { LanguageFeatureRegistry } from '../../../../common/languageFeatureRegistry.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\n\nsuite('Suggest', function () {\n\tlet model: TextModel;\n\tlet registration: IDisposable;\n\tlet registry: LanguageFeatureRegistry<CompletionItemProvider>;\n\n\tsetup(function () {\n\t\tregistry = new LanguageFeatureRegistry();\n\t\tmodel = createTextModel('FOO\\nbar\\BAR\\nfoo', undefined, undefined, URI.parse('foo:bar/path'));\n\t\tregistration = registry.register({ pattern: 'bar/path', scheme: 'foo' }, {\n\t\t\t_debugDisplayName: 'test',\n\t\t\tprovideCompletionItems(_doc, pos) {\n\t\t\t\treturn {\n\t\t\t\t\tincomplete: false,\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tlabel: 'aaa',\n\t\t\t\t\t\tkind: CompletionItemKind.Snippet,\n\t\t\t\t\t\tinsertText: 'aaa',\n\t\t\t\t\t\trange: Range.fromPositions(pos)\n\t\t\t\t\t}, {\n\t\t\t\t\t\tlabel: 'zzz',\n\t\t\t\t\t\tkind: CompletionItemKind.Snippet,\n\t\t\t\t\t\tinsertText: 'zzz',\n\t\t\t\t\t\trange: Range.fromPositions(pos)\n\t\t\t\t\t}, {\n\t\t\t\t\t\tlabel: 'fff',\n\t\t\t\t\t\tkind: CompletionItemKind.Property,\n\t\t\t\t\t\tinsertText: 'fff',\n\t\t\t\t\t\trange: Range.fromPositions(pos)\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t});\n\n\tteardown(() => {\n\t\tregistration.dispose();\n\t\tmodel.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('sort - snippet inline', async function () {\n\t\tconst { items, disposable } = await provideSuggestionItems(registry, model, new Position(1, 1), new CompletionOptions(SnippetSortOrder.Inline));\n\t\tassert.strictEqual(items.length, 3);\n\t\tassert.strictEqual(items[0].completion.label, 'aaa');\n\t\tassert.strictEqual(items[1].completion.label, 'fff');\n\t\tassert.strictEqual(items[2].completion.label, 'zzz');\n\t\tdisposable.dispose();\n\t});\n\n\ttest('sort - snippet top', async function () {\n\t\tconst { items, disposable } = await provideSuggestionItems(registry, model, new Position(1, 1), new CompletionOptions(SnippetSortOrder.Top));\n\t\tassert.strictEqual(items.length, 3);\n\t\tassert.strictEqual(items[0].completion.label, 'aaa');\n\t\tassert.strictEqual(items[1].completion.label, 'zzz');\n\t\tassert.strictEqual(items[2].completion.label, 'fff');\n\t\tdisposable.dispose();\n\t});\n\n\ttest('sort - snippet bottom', async function () {\n\t\tconst { items, disposable } = await provideSuggestionItems(registry, model, new Position(1, 1), new CompletionOptions(SnippetSortOrder.Bottom));\n\t\tassert.strictEqual(items.length, 3);\n\t\tassert.strictEqual(items[0].completion.label, 'fff');\n\t\tassert.strictEqual(items[1].completion.label, 'aaa');\n\t\tassert.strictEqual(items[2].completion.label, 'zzz');\n\t\tdisposable.dispose();\n\t});\n\n\ttest('sort - snippet none', async function () {\n\t\tconst { items, disposable } = await provideSuggestionItems(registry, model, new Position(1, 1), new CompletionOptions(undefined, new Set<CompletionItemKind>().add(CompletionItemKind.Snippet)));\n\t\tassert.strictEqual(items.length, 1);\n\t\tassert.strictEqual(items[0].completion.label, 'fff');\n\t\tdisposable.dispose();\n\t});\n\n\ttest('only from', function (callback) {\n\n\t\tconst foo: any = {\n\t\t\ttriggerCharacters: [],\n\t\t\tprovideCompletionItems() {\n\t\t\t\treturn {\n\t\t\t\t\tcurrentWord: '',\n\t\t\t\t\tincomplete: false,\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tlabel: 'jjj',\n\t\t\t\t\t\ttype: 'property',\n\t\t\t\t\t\tinsertText: 'jjj'\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t\tconst registration = registry.register({ pattern: 'bar/path', scheme: 'foo' }, foo);\n\n\t\tprovideSuggestionItems(registry, model, new Position(1, 1), new CompletionOptions(undefined, undefined, new Set<CompletionItemProvider>().add(foo))).then(({ items, disposable }) => {\n\t\t\tregistration.dispose();\n\n\t\t\tassert.strictEqual(items.length, 1);\n\t\t\tassert.ok(items[0].provider === foo);\n\t\t\tdisposable.dispose();\n\t\t\tcallback();\n\t\t});\n\t});\n\n\ttest('Ctrl+space completions stopped working with the latest Insiders, #97650', async function () {\n\n\n\t\tconst foo = new class implements CompletionItemProvider {\n\n\t\t\t_debugDisplayName = 'test';\n\t\t\ttriggerCharacters = [];\n\n\t\t\tprovideCompletionItems() {\n\t\t\t\treturn {\n\t\t\t\t\tsuggestions: [{\n\t\t\t\t\t\tlabel: 'one',\n\t\t\t\t\t\tkind: CompletionItemKind.Class,\n\t\t\t\t\t\tinsertText: 'one',\n\t\t\t\t\t\trange: {\n\t\t\t\t\t\t\tinsert: new Range(0, 0, 0, 0),\n\t\t\t\t\t\t\treplace: new Range(0, 0, 0, 10)\n\t\t\t\t\t\t}\n\t\t\t\t\t}, {\n\t\t\t\t\t\tlabel: 'two',\n\t\t\t\t\t\tkind: CompletionItemKind.Class,\n\t\t\t\t\t\tinsertText: 'two',\n\t\t\t\t\t\trange: {\n\t\t\t\t\t\t\tinsert: new Range(0, 0, 0, 0),\n\t\t\t\t\t\t\treplace: new Range(0, 1, 0, 10)\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t\tconst registration = registry.register({ pattern: 'bar/path', scheme: 'foo' }, foo);\n\t\tconst { items, disposable } = await provideSuggestionItems(registry, model, new Position(0, 0), new CompletionOptions(undefined, undefined, new Set<CompletionItemProvider>().add(foo)));\n\t\tregistration.dispose();\n\n\t\tassert.strictEqual(items.length, 2);\n\t\tconst [a, b] = items;\n\n\t\tassert.strictEqual(a.completion.label, 'one');\n\t\tassert.strictEqual(a.isInvalid, false);\n\t\tassert.strictEqual(b.completion.label, 'two');\n\t\tassert.strictEqual(b.isInvalid, true);\n\t\tdisposable.dispose();\n\t});\n});\n"]}