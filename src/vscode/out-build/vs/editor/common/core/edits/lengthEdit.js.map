{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/common/core/edits/lengthEdit.ts","vs/editor/common/core/edits/lengthEdit.ts"],"names":[],"mappings":"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","file":"lengthEdit.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { OffsetRange } from '../ranges/offsetRange.js';\nimport { AnyEdit, BaseEdit, BaseReplacement } from './edit.js';\n\n/**\n * Like a normal edit, but only captures the length information.\n*/\nexport class LengthEdit extends BaseEdit<LengthReplacement, LengthEdit> {\n\tpublic static readonly empty = new LengthEdit([]);\n\n\tpublic static fromEdit(edit: AnyEdit): LengthEdit {\n\t\treturn new LengthEdit(edit.replacements.map(r => new LengthReplacement(r.replaceRange, r.getNewLength())));\n\t}\n\n\tpublic static create(replacements: readonly LengthReplacement[]): LengthEdit {\n\t\treturn new LengthEdit(replacements);\n\t}\n\n\tpublic static single(replacement: LengthReplacement): LengthEdit {\n\t\treturn new LengthEdit([replacement]);\n\t}\n\n\tpublic static replace(range: OffsetRange, newLength: number): LengthEdit {\n\t\treturn new LengthEdit([new LengthReplacement(range, newLength)]);\n\t}\n\n\tpublic static insert(offset: number, newLength: number): LengthEdit {\n\t\treturn new LengthEdit([new LengthReplacement(OffsetRange.emptyAt(offset), newLength)]);\n\t}\n\n\tpublic static delete(range: OffsetRange): LengthEdit {\n\t\treturn new LengthEdit([new LengthReplacement(range, 0)]);\n\t}\n\n\tpublic static compose(edits: readonly LengthEdit[]): LengthEdit {\n\t\tlet e = LengthEdit.empty;\n\t\tfor (const edit of edits) {\n\t\t\te = e.compose(edit);\n\t\t}\n\t\treturn e;\n\t}\n\n\t/**\n\t * Creates an edit that reverts this edit.\n\t */\n\tpublic inverse(): LengthEdit {\n\t\tconst edits: LengthReplacement[] = [];\n\t\tlet offset = 0;\n\t\tfor (const e of this.replacements) {\n\t\t\tedits.push(new LengthReplacement(\n\t\t\t\tOffsetRange.ofStartAndLength(e.replaceRange.start + offset, e.newLength),\n\t\t\t\te.replaceRange.length,\n\t\t\t));\n\t\t\toffset += e.newLength - e.replaceRange.length;\n\t\t}\n\t\treturn new LengthEdit(edits);\n\t}\n\n\tprotected override _createNew(replacements: readonly LengthReplacement[]): LengthEdit {\n\t\treturn new LengthEdit(replacements);\n\t}\n\n\tpublic applyArray<T>(arr: readonly T[], fillItem: T): T[] {\n\t\tconst newArr = new Array(this.getNewDataLength(arr.length));\n\n\t\tlet srcPos = 0;\n\t\tlet dstPos = 0;\n\n\t\tfor (const replacement of this.replacements) {\n\t\t\t// Copy items before the current replacement\n\t\t\tfor (let i = srcPos; i < replacement.replaceRange.start; i++) {\n\t\t\t\tnewArr[dstPos++] = arr[i];\n\t\t\t}\n\n\t\t\t// Skip the replaced items in the source array\n\t\t\tsrcPos = replacement.replaceRange.endExclusive;\n\n\t\t\t// Fill with the provided fillItem for insertions\n\t\t\tfor (let i = 0; i < replacement.newLength; i++) {\n\t\t\t\tnewArr[dstPos++] = fillItem;\n\t\t\t}\n\t\t}\n\n\t\t// Copy any remaining items from the original array\n\t\twhile (srcPos < arr.length) {\n\t\t\tnewArr[dstPos++] = arr[srcPos++];\n\t\t}\n\n\t\treturn newArr;\n\t}\n}\n\nexport class LengthReplacement extends BaseReplacement<LengthReplacement> {\n\tpublic static create(\n\t\tstartOffset: number,\n\t\tendOffsetExclusive: number,\n\t\tnewLength: number,\n\t): LengthReplacement {\n\t\treturn new LengthReplacement(new OffsetRange(startOffset, endOffsetExclusive), newLength);\n\t}\n\n\tconstructor(\n\t\trange: OffsetRange,\n\t\tpublic readonly newLength: number,\n\t) {\n\t\tsuper(range);\n\t}\n\n\toverride equals(other: LengthReplacement): boolean {\n\t\treturn this.replaceRange.equals(other.replaceRange) && this.newLength === other.newLength;\n\t}\n\n\tgetNewLength(): number { return this.newLength; }\n\n\ttryJoinTouching(other: LengthReplacement): LengthReplacement | undefined {\n\t\treturn new LengthReplacement(this.replaceRange.joinRightTouching(other.replaceRange), this.newLength + other.newLength);\n\t}\n\n\tslice(range: OffsetRange, rangeInReplacement: OffsetRange): LengthReplacement {\n\t\treturn new LengthReplacement(range, rangeInReplacement.length);\n\t}\n\n\toverride toString() {\n\t\treturn `[${this.replaceRange.start}, +${this.replaceRange.length}) -> +${this.newLength}}`;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { OffsetRange } from '../ranges/offsetRange.js';\nimport { AnyEdit, BaseEdit, BaseReplacement } from './edit.js';\n\n/**\n * Like a normal edit, but only captures the length information.\n*/\nexport class LengthEdit extends BaseEdit<LengthReplacement, LengthEdit> {\n\tpublic static readonly empty = new LengthEdit([]);\n\n\tpublic static fromEdit(edit: AnyEdit): LengthEdit {\n\t\treturn new LengthEdit(edit.replacements.map(r => new LengthReplacement(r.replaceRange, r.getNewLength())));\n\t}\n\n\tpublic static create(replacements: readonly LengthReplacement[]): LengthEdit {\n\t\treturn new LengthEdit(replacements);\n\t}\n\n\tpublic static single(replacement: LengthReplacement): LengthEdit {\n\t\treturn new LengthEdit([replacement]);\n\t}\n\n\tpublic static replace(range: OffsetRange, newLength: number): LengthEdit {\n\t\treturn new LengthEdit([new LengthReplacement(range, newLength)]);\n\t}\n\n\tpublic static insert(offset: number, newLength: number): LengthEdit {\n\t\treturn new LengthEdit([new LengthReplacement(OffsetRange.emptyAt(offset), newLength)]);\n\t}\n\n\tpublic static delete(range: OffsetRange): LengthEdit {\n\t\treturn new LengthEdit([new LengthReplacement(range, 0)]);\n\t}\n\n\tpublic static compose(edits: readonly LengthEdit[]): LengthEdit {\n\t\tlet e = LengthEdit.empty;\n\t\tfor (const edit of edits) {\n\t\t\te = e.compose(edit);\n\t\t}\n\t\treturn e;\n\t}\n\n\t/**\n\t * Creates an edit that reverts this edit.\n\t */\n\tpublic inverse(): LengthEdit {\n\t\tconst edits: LengthReplacement[] = [];\n\t\tlet offset = 0;\n\t\tfor (const e of this.replacements) {\n\t\t\tedits.push(new LengthReplacement(\n\t\t\t\tOffsetRange.ofStartAndLength(e.replaceRange.start + offset, e.newLength),\n\t\t\t\te.replaceRange.length,\n\t\t\t));\n\t\t\toffset += e.newLength - e.replaceRange.length;\n\t\t}\n\t\treturn new LengthEdit(edits);\n\t}\n\n\tprotected override _createNew(replacements: readonly LengthReplacement[]): LengthEdit {\n\t\treturn new LengthEdit(replacements);\n\t}\n\n\tpublic applyArray<T>(arr: readonly T[], fillItem: T): T[] {\n\t\tconst newArr = new Array(this.getNewDataLength(arr.length));\n\n\t\tlet srcPos = 0;\n\t\tlet dstPos = 0;\n\n\t\tfor (const replacement of this.replacements) {\n\t\t\t// Copy items before the current replacement\n\t\t\tfor (let i = srcPos; i < replacement.replaceRange.start; i++) {\n\t\t\t\tnewArr[dstPos++] = arr[i];\n\t\t\t}\n\n\t\t\t// Skip the replaced items in the source array\n\t\t\tsrcPos = replacement.replaceRange.endExclusive;\n\n\t\t\t// Fill with the provided fillItem for insertions\n\t\t\tfor (let i = 0; i < replacement.newLength; i++) {\n\t\t\t\tnewArr[dstPos++] = fillItem;\n\t\t\t}\n\t\t}\n\n\t\t// Copy any remaining items from the original array\n\t\twhile (srcPos < arr.length) {\n\t\t\tnewArr[dstPos++] = arr[srcPos++];\n\t\t}\n\n\t\treturn newArr;\n\t}\n}\n\nexport class LengthReplacement extends BaseReplacement<LengthReplacement> {\n\tpublic static create(\n\t\tstartOffset: number,\n\t\tendOffsetExclusive: number,\n\t\tnewLength: number,\n\t): LengthReplacement {\n\t\treturn new LengthReplacement(new OffsetRange(startOffset, endOffsetExclusive), newLength);\n\t}\n\n\tconstructor(\n\t\trange: OffsetRange,\n\t\tpublic readonly newLength: number,\n\t) {\n\t\tsuper(range);\n\t}\n\n\toverride equals(other: LengthReplacement): boolean {\n\t\treturn this.replaceRange.equals(other.replaceRange) && this.newLength === other.newLength;\n\t}\n\n\tgetNewLength(): number { return this.newLength; }\n\n\ttryJoinTouching(other: LengthReplacement): LengthReplacement | undefined {\n\t\treturn new LengthReplacement(this.replaceRange.joinRightTouching(other.replaceRange), this.newLength + other.newLength);\n\t}\n\n\tslice(range: OffsetRange, rangeInReplacement: OffsetRange): LengthReplacement {\n\t\treturn new LengthReplacement(range, rangeInReplacement.length);\n\t}\n\n\toverride toString() {\n\t\treturn `[${this.replaceRange.start}, +${this.replaceRange.length}) -> +${this.newLength}}`;\n\t}\n}\n"]}