{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/common/core/ranges/rangeMapping.ts","vs/editor/common/core/ranges/rangeMapping.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,EAAE,kBAAkB,EAAE,MAAM,uCAAuC,CAAC;AAE3E,OAAO,EAAE,KAAK,EAAE,MAAM,aAAa,CAAC;AACpC,OAAO,EAAE,UAAU,EAAE,MAAM,uBAAuB,CAAC;AAEnD;;GAEG;AACH,MAAM,OAAO,YAAY;IACxB,YAA4B,QAAuC;QAAvC,aAAQ,GAAR,QAAQ,CAA+B;IACnE,CAAC;IAED,WAAW,CAAC,QAAkB;QAC7B,MAAM,OAAO,GAAG,kBAAkB,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,gBAAgB,EAAE,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,CAAC;QAChH,IAAI,CAAC,OAAO,EAAE,CAAC;YACd,OAAO,eAAe,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAC3C,CAAC;QACD,IAAI,OAAO,CAAC,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,EAAE,CAAC;YACjD,OAAO,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAChD,CAAC;QACD,MAAM,CAAC,GAAG,UAAU,CAAC,gBAAgB,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,EAAE,EAAE,QAAQ,CAAC,CAAC;QACnF,OAAO,eAAe,CAAC,QAAQ,CAAC,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;IACrF,CAAC;IAED,QAAQ,CAAC,KAAY;QACpB,MAAM,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,gBAAgB,EAAE,CAAC,CAAC;QACzD,MAAM,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC,CAAC;QACrD,OAAO,KAAK,CAAC,aAAa,CACzB,KAAK,CAAC,KAAK,EAAE,gBAAgB,EAAE,IAAI,KAAK,CAAC,QAAS,EAClD,GAAG,CAAC,KAAK,EAAE,cAAc,EAAE,IAAI,GAAG,CAAC,QAAS,CAC5C,CAAC;IACH,CAAC;IAED,OAAO;QACN,OAAO,IAAI,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;IAC1E,CAAC;CACD;AAED,MAAM,OAAO,kBAAkB;IAC9B,YACiB,QAAe,EACf,QAAe;QADf,aAAQ,GAAR,QAAQ,CAAO;QACf,aAAQ,GAAR,QAAQ,CAAO;IAEhC,CAAC;IAED,OAAO;QACN,OAAO,IAAI,kBAAkB,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC7D,CAAC;IAED,QAAQ;QACP,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,OAAO,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC;IACrE,CAAC;CACD;AAED,MAAM,OAAO,eAAe;IACpB,MAAM,CAAC,QAAQ,CAAC,QAAkB;QACxC,OAAO,IAAI,eAAe,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;IACjD,CAAC;IAEM,MAAM,CAAC,KAAK,CAAC,KAAY;QAC/B,OAAO,IAAI,eAAe,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;IAC9C,CAAC;IAED,YACiB,QAA8B,EAC9B,KAAwB;QADxB,aAAQ,GAAR,QAAQ,CAAsB;QAC9B,UAAK,GAAL,KAAK,CAAmB;IACrC,CAAC;CACL","file":"rangeMapping.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { findLastMonotonous } from '../../../../base/common/arraysFind.js';\nimport { Position } from '../position.js';\nimport { Range } from '../range.js';\nimport { TextLength } from '../text/textLength.js';\n\n/**\n * Represents a list of mappings of ranges from one document to another.\n */\nexport class RangeMapping {\n\tconstructor(public readonly mappings: readonly SingleRangeMapping[]) {\n\t}\n\n\tmapPosition(position: Position): PositionOrRange {\n\t\tconst mapping = findLastMonotonous(this.mappings, m => m.original.getStartPosition().isBeforeOrEqual(position));\n\t\tif (!mapping) {\n\t\t\treturn PositionOrRange.position(position);\n\t\t}\n\t\tif (mapping.original.containsPosition(position)) {\n\t\t\treturn PositionOrRange.range(mapping.modified);\n\t\t}\n\t\tconst l = TextLength.betweenPositions(mapping.original.getEndPosition(), position);\n\t\treturn PositionOrRange.position(l.addToPosition(mapping.modified.getEndPosition()));\n\t}\n\n\tmapRange(range: Range): Range {\n\t\tconst start = this.mapPosition(range.getStartPosition());\n\t\tconst end = this.mapPosition(range.getEndPosition());\n\t\treturn Range.fromPositions(\n\t\t\tstart.range?.getStartPosition() ?? start.position!,\n\t\t\tend.range?.getEndPosition() ?? end.position!,\n\t\t);\n\t}\n\n\treverse(): RangeMapping {\n\t\treturn new RangeMapping(this.mappings.map(mapping => mapping.reverse()));\n\t}\n}\n\nexport class SingleRangeMapping {\n\tconstructor(\n\t\tpublic readonly original: Range,\n\t\tpublic readonly modified: Range,\n\t) {\n\t}\n\n\treverse(): SingleRangeMapping {\n\t\treturn new SingleRangeMapping(this.modified, this.original);\n\t}\n\n\ttoString() {\n\t\treturn `${this.original.toString()} -> ${this.modified.toString()}`;\n\t}\n}\n\nexport class PositionOrRange {\n\tpublic static position(position: Position): PositionOrRange {\n\t\treturn new PositionOrRange(position, undefined);\n\t}\n\n\tpublic static range(range: Range): PositionOrRange {\n\t\treturn new PositionOrRange(undefined, range);\n\t}\n\n\tprivate constructor(\n\t\tpublic readonly position: Position | undefined,\n\t\tpublic readonly range: Range | undefined,\n\t) { }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { findLastMonotonous } from '../../../../base/common/arraysFind.js';\nimport { Position } from '../position.js';\nimport { Range } from '../range.js';\nimport { TextLength } from '../text/textLength.js';\n\n/**\n * Represents a list of mappings of ranges from one document to another.\n */\nexport class RangeMapping {\n\tconstructor(public readonly mappings: readonly SingleRangeMapping[]) {\n\t}\n\n\tmapPosition(position: Position): PositionOrRange {\n\t\tconst mapping = findLastMonotonous(this.mappings, m => m.original.getStartPosition().isBeforeOrEqual(position));\n\t\tif (!mapping) {\n\t\t\treturn PositionOrRange.position(position);\n\t\t}\n\t\tif (mapping.original.containsPosition(position)) {\n\t\t\treturn PositionOrRange.range(mapping.modified);\n\t\t}\n\t\tconst l = TextLength.betweenPositions(mapping.original.getEndPosition(), position);\n\t\treturn PositionOrRange.position(l.addToPosition(mapping.modified.getEndPosition()));\n\t}\n\n\tmapRange(range: Range): Range {\n\t\tconst start = this.mapPosition(range.getStartPosition());\n\t\tconst end = this.mapPosition(range.getEndPosition());\n\t\treturn Range.fromPositions(\n\t\t\tstart.range?.getStartPosition() ?? start.position!,\n\t\t\tend.range?.getEndPosition() ?? end.position!,\n\t\t);\n\t}\n\n\treverse(): RangeMapping {\n\t\treturn new RangeMapping(this.mappings.map(mapping => mapping.reverse()));\n\t}\n}\n\nexport class SingleRangeMapping {\n\tconstructor(\n\t\tpublic readonly original: Range,\n\t\tpublic readonly modified: Range,\n\t) {\n\t}\n\n\treverse(): SingleRangeMapping {\n\t\treturn new SingleRangeMapping(this.modified, this.original);\n\t}\n\n\ttoString() {\n\t\treturn `${this.original.toString()} -> ${this.modified.toString()}`;\n\t}\n}\n\nexport class PositionOrRange {\n\tpublic static position(position: Position): PositionOrRange {\n\t\treturn new PositionOrRange(position, undefined);\n\t}\n\n\tpublic static range(range: Range): PositionOrRange {\n\t\treturn new PositionOrRange(undefined, range);\n\t}\n\n\tprivate constructor(\n\t\tpublic readonly position: Position | undefined,\n\t\tpublic readonly range: Range | undefined,\n\t) { }\n}\n"]}