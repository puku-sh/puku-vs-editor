{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/standalone/test/browser/monarch.test.ts","vs/editor/standalone/test/browser/monarch.test.ts"],"names":[],"mappings":"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","file":"monarch.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { Token, TokenizationRegistry } from '../../../common/languages.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { LanguageService } from '../../../common/services/languageService.js';\nimport { StandaloneConfigurationService } from '../../browser/standaloneServices.js';\nimport { compile } from '../../common/monarch/monarchCompile.js';\nimport { MonarchTokenizer } from '../../common/monarch/monarchLexer.js';\nimport { IMonarchLanguage } from '../../common/monarch/monarchTypes.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { NullLogService } from '../../../../platform/log/common/log.js';\n\nsuite('Monarch', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction createMonarchTokenizer(languageService: ILanguageService, languageId: string, language: IMonarchLanguage, configurationService: IConfigurationService): MonarchTokenizer {\n\t\treturn new MonarchTokenizer(languageService, null!, languageId, compile(languageId, language), configurationService);\n\t}\n\n\tfunction getTokens(tokenizer: MonarchTokenizer, lines: string[]): Token[][] {\n\t\tconst actualTokens: Token[][] = [];\n\t\tlet state = tokenizer.getInitialState();\n\t\tfor (const line of lines) {\n\t\t\tconst result = tokenizer.tokenize(line, true, state);\n\t\t\tactualTokens.push(result.tokens);\n\t\t\tstate = result.endState;\n\t\t}\n\t\treturn actualTokens;\n\t}\n\n\ttest('Ensure @rematch and nextEmbedded can be used together in Monarch grammar', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst languageService = disposables.add(new LanguageService());\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tdisposables.add(languageService.registerLanguage({ id: 'sql' }));\n\t\tdisposables.add(TokenizationRegistry.register('sql', disposables.add(createMonarchTokenizer(languageService, 'sql', {\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t[/./, 'token']\n\t\t\t\t]\n\t\t\t}\n\t\t}, configurationService))));\n\t\tconst SQL_QUERY_START = '(SELECT|INSERT|UPDATE|DELETE|CREATE|REPLACE|ALTER|WITH)';\n\t\tconst tokenizer = disposables.add(createMonarchTokenizer(languageService, 'test1', {\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t[`(\\\"\\\"\\\")${SQL_QUERY_START}`, [{ 'token': 'string.quote', }, { token: '@rematch', next: '@endStringWithSQL', nextEmbedded: 'sql', },]],\n\t\t\t\t\t[/(\"\"\")$/, [{ token: 'string.quote', next: '@maybeStringIsSQL', },]],\n\t\t\t\t],\n\t\t\t\tmaybeStringIsSQL: [\n\t\t\t\t\t[/(.*)/, {\n\t\t\t\t\t\tcases: {\n\t\t\t\t\t\t\t[`${SQL_QUERY_START}\\\\b.*`]: { token: '@rematch', next: '@endStringWithSQL', nextEmbedded: 'sql', },\n\t\t\t\t\t\t\t'@default': { token: '@rematch', switchTo: '@endDblDocString', },\n\t\t\t\t\t\t}\n\t\t\t\t\t}],\n\t\t\t\t],\n\t\t\t\tendDblDocString: [\n\t\t\t\t\t['[^\\']+', 'string'],\n\t\t\t\t\t['\\\\\\\\\\'', 'string'],\n\t\t\t\t\t['\\'\\'\\'', 'string', '@popall'],\n\t\t\t\t\t['\\'', 'string']\n\t\t\t\t],\n\t\t\t\tendStringWithSQL: [[/\"\"\"/, { token: 'string.quote', next: '@popall', nextEmbedded: '@pop', },]],\n\t\t\t}\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t`mysql_query(\"\"\"SELECT * FROM table_name WHERE ds = '<DATEID>'\"\"\")`,\n\t\t\t`mysql_query(\"\"\"`,\n\t\t\t`SELECT *`,\n\t\t\t`FROM table_name`,\n\t\t\t`WHERE ds = '<DATEID>'`,\n\t\t\t`\"\"\")`,\n\t\t];\n\n\t\tconst actualTokens = getTokens(tokenizer, lines);\n\n\t\tassert.deepStrictEqual(actualTokens, [\n\t\t\t[\n\t\t\t\tnew Token(0, 'source.test1', 'test1'),\n\t\t\t\tnew Token(12, 'string.quote.test1', 'test1'),\n\t\t\t\tnew Token(15, 'token.sql', 'sql'),\n\t\t\t\tnew Token(61, 'string.quote.test1', 'test1'),\n\t\t\t\tnew Token(64, 'source.test1', 'test1')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'source.test1', 'test1'),\n\t\t\t\tnew Token(12, 'string.quote.test1', 'test1')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'token.sql', 'sql')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'token.sql', 'sql')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'token.sql', 'sql')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'string.quote.test1', 'test1'),\n\t\t\t\tnew Token(3, 'source.test1', 'test1')\n\t\t\t]\n\t\t]);\n\t\tdisposables.dispose();\n\t});\n\n\ttest('Test nextEmbedded: \"@pop\" in cases statement', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst languageService = disposables.add(new LanguageService());\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tdisposables.add(languageService.registerLanguage({ id: 'sql' }));\n\t\tdisposables.add(TokenizationRegistry.register('sql', disposables.add(createMonarchTokenizer(languageService, 'sql', {\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t[/./, 'token']\n\t\t\t\t]\n\t\t\t}\n\t\t}, configurationService))));\n\t\tconst SQL_QUERY_START = '(SELECT|INSERT|UPDATE|DELETE|CREATE|REPLACE|ALTER|WITH)';\n\t\tconst tokenizer = disposables.add(createMonarchTokenizer(languageService, 'test1', {\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t[`(\\\"\\\"\\\")${SQL_QUERY_START}`, [{ 'token': 'string.quote', }, { token: '@rematch', next: '@endStringWithSQL', nextEmbedded: 'sql', },]],\n\t\t\t\t\t[/(\"\"\")$/, [{ token: 'string.quote', next: '@maybeStringIsSQL', },]],\n\t\t\t\t],\n\t\t\t\tmaybeStringIsSQL: [\n\t\t\t\t\t[/(.*)/, {\n\t\t\t\t\t\tcases: {\n\t\t\t\t\t\t\t[`${SQL_QUERY_START}\\\\b.*`]: { token: '@rematch', next: '@endStringWithSQL', nextEmbedded: 'sql', },\n\t\t\t\t\t\t\t'@default': { token: '@rematch', switchTo: '@endDblDocString', },\n\t\t\t\t\t\t}\n\t\t\t\t\t}],\n\t\t\t\t],\n\t\t\t\tendDblDocString: [\n\t\t\t\t\t['[^\\']+', 'string'],\n\t\t\t\t\t['\\\\\\\\\\'', 'string'],\n\t\t\t\t\t['\\'\\'\\'', 'string', '@popall'],\n\t\t\t\t\t['\\'', 'string']\n\t\t\t\t],\n\t\t\t\tendStringWithSQL: [[/\"\"\"/, {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\t'\"\"\"': {\n\t\t\t\t\t\t\tcases: {\n\t\t\t\t\t\t\t\t'': { token: 'string.quote', next: '@popall', nextEmbedded: '@pop', }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'@default': ''\n\t\t\t\t\t}\n\t\t\t\t}]],\n\t\t\t}\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t`mysql_query(\"\"\"SELECT * FROM table_name WHERE ds = '<DATEID>'\"\"\")`,\n\t\t\t`mysql_query(\"\"\"`,\n\t\t\t`SELECT *`,\n\t\t\t`FROM table_name`,\n\t\t\t`WHERE ds = '<DATEID>'`,\n\t\t\t`\"\"\")`,\n\t\t];\n\n\t\tconst actualTokens = getTokens(tokenizer, lines);\n\n\t\tassert.deepStrictEqual(actualTokens, [\n\t\t\t[\n\t\t\t\tnew Token(0, 'source.test1', 'test1'),\n\t\t\t\tnew Token(12, 'string.quote.test1', 'test1'),\n\t\t\t\tnew Token(15, 'token.sql', 'sql'),\n\t\t\t\tnew Token(61, 'string.quote.test1', 'test1'),\n\t\t\t\tnew Token(64, 'source.test1', 'test1')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'source.test1', 'test1'),\n\t\t\t\tnew Token(12, 'string.quote.test1', 'test1')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'token.sql', 'sql')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'token.sql', 'sql')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'token.sql', 'sql')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'string.quote.test1', 'test1'),\n\t\t\t\tnew Token(3, 'source.test1', 'test1')\n\t\t\t]\n\t\t]);\n\t\tdisposables.dispose();\n\t});\n\n\n\ttest('microsoft/monaco-editor#1235: Empty Line Handling', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tconst languageService = disposables.add(new LanguageService());\n\t\tconst tokenizer = disposables.add(createMonarchTokenizer(languageService, 'test', {\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t{ include: '@comments' },\n\t\t\t\t],\n\n\t\t\t\tcomments: [\n\t\t\t\t\t[/\\/\\/$/, 'comment'], // empty single-line comment\n\t\t\t\t\t[/\\/\\//, 'comment', '@comment_cpp'],\n\t\t\t\t],\n\n\t\t\t\tcomment_cpp: [\n\t\t\t\t\t[/(?:[^\\\\]|(?:\\\\.))+$/, 'comment', '@pop'],\n\t\t\t\t\t[/.+$/, 'comment'],\n\t\t\t\t\t[/$/, 'comment', '@pop']\n\t\t\t\t\t// No possible rule to detect an empty line and @pop?\n\t\t\t\t],\n\t\t\t},\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t`// This comment \\\\`,\n\t\t\t`   continues on the following line`,\n\t\t\t``,\n\t\t\t`// This comment does NOT continue \\\\\\\\`,\n\t\t\t`   because the escape char was itself escaped`,\n\t\t\t``,\n\t\t\t`// This comment DOES continue because \\\\\\\\\\\\`,\n\t\t\t`   the 1st '\\\\' escapes the 2nd; the 3rd escapes EOL`,\n\t\t\t``,\n\t\t\t`// This comment continues to the following line \\\\`,\n\t\t\t``,\n\t\t\t`But the line was empty. This line should not be commented.`,\n\t\t];\n\n\t\tconst actualTokens = getTokens(tokenizer, lines);\n\n\t\tassert.deepStrictEqual(actualTokens, [\n\t\t\t[new Token(0, 'comment.test', 'test')],\n\t\t\t[new Token(0, 'comment.test', 'test')],\n\t\t\t[],\n\t\t\t[new Token(0, 'comment.test', 'test')],\n\t\t\t[new Token(0, 'source.test', 'test')],\n\t\t\t[],\n\t\t\t[new Token(0, 'comment.test', 'test')],\n\t\t\t[new Token(0, 'comment.test', 'test')],\n\t\t\t[],\n\t\t\t[new Token(0, 'comment.test', 'test')],\n\t\t\t[],\n\t\t\t[new Token(0, 'source.test', 'test')]\n\t\t]);\n\n\t\tdisposables.dispose();\n\t});\n\n\ttest('microsoft/monaco-editor#2265: Exit a state at end of line', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tconst languageService = disposables.add(new LanguageService());\n\t\tconst tokenizer = disposables.add(createMonarchTokenizer(languageService, 'test', {\n\t\t\tincludeLF: true,\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t[/^\\*/, '', '@inner'],\n\t\t\t\t\t[/\\:\\*/, '', '@inner'],\n\t\t\t\t\t[/[^*:]+/, 'string'],\n\t\t\t\t\t[/[*:]/, 'string']\n\t\t\t\t],\n\t\t\t\tinner: [\n\t\t\t\t\t[/\\n/, '', '@pop'],\n\t\t\t\t\t[/\\d+/, 'number'],\n\t\t\t\t\t[/[^\\d]+/, '']\n\t\t\t\t]\n\t\t\t}\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t`PRINT 10 * 20`,\n\t\t\t`*FX200, 3`,\n\t\t\t`PRINT 2*3:*FX200, 3`\n\t\t];\n\n\t\tconst actualTokens = getTokens(tokenizer, lines);\n\n\t\tassert.deepStrictEqual(actualTokens, [\n\t\t\t[\n\t\t\t\tnew Token(0, 'string.test', 'test'),\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, '', 'test'),\n\t\t\t\tnew Token(3, 'number.test', 'test'),\n\t\t\t\tnew Token(6, '', 'test'),\n\t\t\t\tnew Token(8, 'number.test', 'test'),\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'string.test', 'test'),\n\t\t\t\tnew Token(9, '', 'test'),\n\t\t\t\tnew Token(13, 'number.test', 'test'),\n\t\t\t\tnew Token(16, '', 'test'),\n\t\t\t\tnew Token(18, 'number.test', 'test'),\n\t\t\t]\n\t\t]);\n\n\t\tdisposables.dispose();\n\t});\n\n\ttest('issue #115662: monarchCompile function need an extra option which can control replacement', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tconst languageService = disposables.add(new LanguageService());\n\n\t\tconst tokenizer1 = disposables.add(createMonarchTokenizer(languageService, 'test', {\n\t\t\tignoreCase: false,\n\t\t\tuselessReplaceKey1: '@uselessReplaceKey2',\n\t\t\tuselessReplaceKey2: '@uselessReplaceKey3',\n\t\t\tuselessReplaceKey3: '@uselessReplaceKey4',\n\t\t\tuselessReplaceKey4: '@uselessReplaceKey5',\n\t\t\tuselessReplaceKey5: '@ham',\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t{\n\t\t\t\t\t\tregex: /@\\w+/.test('@ham')\n\t\t\t\t\t\t\t? new RegExp(`^${'@uselessReplaceKey1'}$`)\n\t\t\t\t\t\t\t: new RegExp(`^${'@ham'}$`),\n\t\t\t\t\t\taction: { token: 'ham' }\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t}, configurationService));\n\n\t\tconst tokenizer2 = disposables.add(createMonarchTokenizer(languageService, 'test', {\n\t\t\tignoreCase: false,\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t{\n\t\t\t\t\t\tregex: /@@ham/,\n\t\t\t\t\t\taction: { token: 'ham' }\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t`@ham`\n\t\t];\n\n\t\tconst actualTokens1 = getTokens(tokenizer1, lines);\n\t\tassert.deepStrictEqual(actualTokens1, [\n\t\t\t[\n\t\t\t\tnew Token(0, 'ham.test', 'test'),\n\t\t\t]\n\t\t]);\n\n\t\tconst actualTokens2 = getTokens(tokenizer2, lines);\n\t\tassert.deepStrictEqual(actualTokens2, [\n\t\t\t[\n\t\t\t\tnew Token(0, 'ham.test', 'test'),\n\t\t\t]\n\t\t]);\n\n\t\tdisposables.dispose();\n\t});\n\n\ttest('microsoft/monaco-editor#2424: Allow to target @@', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tconst languageService = disposables.add(new LanguageService());\n\n\t\tconst tokenizer = disposables.add(createMonarchTokenizer(languageService, 'test', {\n\t\t\tignoreCase: false,\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t{\n\t\t\t\t\t\tregex: /@@@@/,\n\t\t\t\t\t\taction: { token: 'ham' }\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t`@@`\n\t\t];\n\n\t\tconst actualTokens = getTokens(tokenizer, lines);\n\t\tassert.deepStrictEqual(actualTokens, [\n\t\t\t[\n\t\t\t\tnew Token(0, 'ham.test', 'test'),\n\t\t\t]\n\t\t]);\n\n\t\tdisposables.dispose();\n\t});\n\n\ttest('microsoft/monaco-editor#3025: Check maxTokenizationLineLength before tokenizing', async () => {\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tconst languageService = disposables.add(new LanguageService());\n\n\t\t// Set maxTokenizationLineLength to 4 so that \"ham\" works but \"hamham\" would fail\n\t\tawait configurationService.updateValue('editor.maxTokenizationLineLength', 4);\n\n\t\tconst tokenizer = disposables.add(createMonarchTokenizer(languageService, 'test', {\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t{\n\t\t\t\t\t\tregex: /ham/,\n\t\t\t\t\t\taction: { token: 'ham' }\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t'ham', // length 3, should be tokenized\n\t\t\t'hamham' // length 6, should NOT be tokenized\n\t\t];\n\n\t\tconst actualTokens = getTokens(tokenizer, lines);\n\t\tassert.deepStrictEqual(actualTokens, [\n\t\t\t[\n\t\t\t\tnew Token(0, 'ham.test', 'test'),\n\t\t\t], [\n\t\t\t\tnew Token(0, '', 'test')\n\t\t\t]\n\t\t]);\n\n\t\tdisposables.dispose();\n\t});\n\n\ttest('microsoft/monaco-editor#3128: allow state access within rules', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tconst languageService = disposables.add(new LanguageService());\n\n\t\tconst tokenizer = disposables.add(createMonarchTokenizer(languageService, 'test', {\n\t\t\tignoreCase: false,\n\t\t\tencoding: /u|u8|U|L/,\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t// C++ 11 Raw String\n\t\t\t\t\t[/@encoding?R\\\"(?:([^ ()\\\\\\t]*))\\(/, { token: 'string.raw.begin', next: '@raw.$1' }],\n\t\t\t\t],\n\n\t\t\t\traw: [\n\t\t\t\t\t[/.*\\)$S2\\\"/, 'string.raw', '@pop'],\n\t\t\t\t\t[/.*/, 'string.raw']\n\t\t\t\t],\n\t\t\t},\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t`int main(){`,\n\t\t\t``,\n\t\t\t`\tauto s = R\"\"\"\"(`,\n\t\t\t`\tHello World`,\n\t\t\t`\t)\"\"\"\";`,\n\t\t\t``,\n\t\t\t`\tstd::cout << \"hello\";`,\n\t\t\t``,\n\t\t\t`}`,\n\t\t];\n\n\t\tconst actualTokens = getTokens(tokenizer, lines);\n\t\tassert.deepStrictEqual(actualTokens, [\n\t\t\t[new Token(0, 'source.test', 'test')],\n\t\t\t[],\n\t\t\t[new Token(0, 'source.test', 'test'), new Token(10, 'string.raw.begin.test', 'test')],\n\t\t\t[new Token(0, 'string.raw.test', 'test')],\n\t\t\t[new Token(0, 'string.raw.test', 'test'), new Token(6, 'source.test', 'test')],\n\t\t\t[],\n\t\t\t[new Token(0, 'source.test', 'test')],\n\t\t\t[],\n\t\t\t[new Token(0, 'source.test', 'test')],\n\t\t]);\n\n\t\tdisposables.dispose();\n\t});\n\n\ttest('microsoft/monaco-editor#4775: Raw-strings in c++ can break monarch', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tconst languageService = disposables.add(new LanguageService());\n\n\t\tconst tokenizer = disposables.add(createMonarchTokenizer(languageService, 'test', {\n\t\t\tignoreCase: false,\n\t\t\tencoding: /u|u8|U|L/,\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t// C++ 11 Raw String\n\t\t\t\t\t[/@encoding?R\\\"(?:([^ ()\\\\\\t]*))\\(/, { token: 'string.raw.begin', next: '@raw.$1' }],\n\t\t\t\t],\n\n\t\t\t\traw: [\n\t\t\t\t\t[/.*\\)$S2\\\"/, 'string.raw', '@pop'],\n\t\t\t\t\t[/.*/, 'string.raw']\n\t\t\t\t],\n\t\t\t},\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t`R\"[())\"`,\n\t\t];\n\n\t\tconst actualTokens = getTokens(tokenizer, lines);\n\t\tassert.deepStrictEqual(actualTokens, [\n\t\t\t[new Token(0, 'string.raw.begin.test', 'test'), new Token(4, 'string.raw.test', 'test')],\n\t\t]);\n\n\t\tdisposables.dispose();\n\t});\n\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { Token, TokenizationRegistry } from '../../../common/languages.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { LanguageService } from '../../../common/services/languageService.js';\nimport { StandaloneConfigurationService } from '../../browser/standaloneServices.js';\nimport { compile } from '../../common/monarch/monarchCompile.js';\nimport { MonarchTokenizer } from '../../common/monarch/monarchLexer.js';\nimport { IMonarchLanguage } from '../../common/monarch/monarchTypes.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { NullLogService } from '../../../../platform/log/common/log.js';\n\nsuite('Monarch', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction createMonarchTokenizer(languageService: ILanguageService, languageId: string, language: IMonarchLanguage, configurationService: IConfigurationService): MonarchTokenizer {\n\t\treturn new MonarchTokenizer(languageService, null!, languageId, compile(languageId, language), configurationService);\n\t}\n\n\tfunction getTokens(tokenizer: MonarchTokenizer, lines: string[]): Token[][] {\n\t\tconst actualTokens: Token[][] = [];\n\t\tlet state = tokenizer.getInitialState();\n\t\tfor (const line of lines) {\n\t\t\tconst result = tokenizer.tokenize(line, true, state);\n\t\t\tactualTokens.push(result.tokens);\n\t\t\tstate = result.endState;\n\t\t}\n\t\treturn actualTokens;\n\t}\n\n\ttest('Ensure @rematch and nextEmbedded can be used together in Monarch grammar', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst languageService = disposables.add(new LanguageService());\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tdisposables.add(languageService.registerLanguage({ id: 'sql' }));\n\t\tdisposables.add(TokenizationRegistry.register('sql', disposables.add(createMonarchTokenizer(languageService, 'sql', {\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t[/./, 'token']\n\t\t\t\t]\n\t\t\t}\n\t\t}, configurationService))));\n\t\tconst SQL_QUERY_START = '(SELECT|INSERT|UPDATE|DELETE|CREATE|REPLACE|ALTER|WITH)';\n\t\tconst tokenizer = disposables.add(createMonarchTokenizer(languageService, 'test1', {\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t[`(\\\"\\\"\\\")${SQL_QUERY_START}`, [{ 'token': 'string.quote', }, { token: '@rematch', next: '@endStringWithSQL', nextEmbedded: 'sql', },]],\n\t\t\t\t\t[/(\"\"\")$/, [{ token: 'string.quote', next: '@maybeStringIsSQL', },]],\n\t\t\t\t],\n\t\t\t\tmaybeStringIsSQL: [\n\t\t\t\t\t[/(.*)/, {\n\t\t\t\t\t\tcases: {\n\t\t\t\t\t\t\t[`${SQL_QUERY_START}\\\\b.*`]: { token: '@rematch', next: '@endStringWithSQL', nextEmbedded: 'sql', },\n\t\t\t\t\t\t\t'@default': { token: '@rematch', switchTo: '@endDblDocString', },\n\t\t\t\t\t\t}\n\t\t\t\t\t}],\n\t\t\t\t],\n\t\t\t\tendDblDocString: [\n\t\t\t\t\t['[^\\']+', 'string'],\n\t\t\t\t\t['\\\\\\\\\\'', 'string'],\n\t\t\t\t\t['\\'\\'\\'', 'string', '@popall'],\n\t\t\t\t\t['\\'', 'string']\n\t\t\t\t],\n\t\t\t\tendStringWithSQL: [[/\"\"\"/, { token: 'string.quote', next: '@popall', nextEmbedded: '@pop', },]],\n\t\t\t}\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t`mysql_query(\"\"\"SELECT * FROM table_name WHERE ds = '<DATEID>'\"\"\")`,\n\t\t\t`mysql_query(\"\"\"`,\n\t\t\t`SELECT *`,\n\t\t\t`FROM table_name`,\n\t\t\t`WHERE ds = '<DATEID>'`,\n\t\t\t`\"\"\")`,\n\t\t];\n\n\t\tconst actualTokens = getTokens(tokenizer, lines);\n\n\t\tassert.deepStrictEqual(actualTokens, [\n\t\t\t[\n\t\t\t\tnew Token(0, 'source.test1', 'test1'),\n\t\t\t\tnew Token(12, 'string.quote.test1', 'test1'),\n\t\t\t\tnew Token(15, 'token.sql', 'sql'),\n\t\t\t\tnew Token(61, 'string.quote.test1', 'test1'),\n\t\t\t\tnew Token(64, 'source.test1', 'test1')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'source.test1', 'test1'),\n\t\t\t\tnew Token(12, 'string.quote.test1', 'test1')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'token.sql', 'sql')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'token.sql', 'sql')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'token.sql', 'sql')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'string.quote.test1', 'test1'),\n\t\t\t\tnew Token(3, 'source.test1', 'test1')\n\t\t\t]\n\t\t]);\n\t\tdisposables.dispose();\n\t});\n\n\ttest('Test nextEmbedded: \"@pop\" in cases statement', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst languageService = disposables.add(new LanguageService());\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tdisposables.add(languageService.registerLanguage({ id: 'sql' }));\n\t\tdisposables.add(TokenizationRegistry.register('sql', disposables.add(createMonarchTokenizer(languageService, 'sql', {\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t[/./, 'token']\n\t\t\t\t]\n\t\t\t}\n\t\t}, configurationService))));\n\t\tconst SQL_QUERY_START = '(SELECT|INSERT|UPDATE|DELETE|CREATE|REPLACE|ALTER|WITH)';\n\t\tconst tokenizer = disposables.add(createMonarchTokenizer(languageService, 'test1', {\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t[`(\\\"\\\"\\\")${SQL_QUERY_START}`, [{ 'token': 'string.quote', }, { token: '@rematch', next: '@endStringWithSQL', nextEmbedded: 'sql', },]],\n\t\t\t\t\t[/(\"\"\")$/, [{ token: 'string.quote', next: '@maybeStringIsSQL', },]],\n\t\t\t\t],\n\t\t\t\tmaybeStringIsSQL: [\n\t\t\t\t\t[/(.*)/, {\n\t\t\t\t\t\tcases: {\n\t\t\t\t\t\t\t[`${SQL_QUERY_START}\\\\b.*`]: { token: '@rematch', next: '@endStringWithSQL', nextEmbedded: 'sql', },\n\t\t\t\t\t\t\t'@default': { token: '@rematch', switchTo: '@endDblDocString', },\n\t\t\t\t\t\t}\n\t\t\t\t\t}],\n\t\t\t\t],\n\t\t\t\tendDblDocString: [\n\t\t\t\t\t['[^\\']+', 'string'],\n\t\t\t\t\t['\\\\\\\\\\'', 'string'],\n\t\t\t\t\t['\\'\\'\\'', 'string', '@popall'],\n\t\t\t\t\t['\\'', 'string']\n\t\t\t\t],\n\t\t\t\tendStringWithSQL: [[/\"\"\"/, {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\t'\"\"\"': {\n\t\t\t\t\t\t\tcases: {\n\t\t\t\t\t\t\t\t'': { token: 'string.quote', next: '@popall', nextEmbedded: '@pop', }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'@default': ''\n\t\t\t\t\t}\n\t\t\t\t}]],\n\t\t\t}\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t`mysql_query(\"\"\"SELECT * FROM table_name WHERE ds = '<DATEID>'\"\"\")`,\n\t\t\t`mysql_query(\"\"\"`,\n\t\t\t`SELECT *`,\n\t\t\t`FROM table_name`,\n\t\t\t`WHERE ds = '<DATEID>'`,\n\t\t\t`\"\"\")`,\n\t\t];\n\n\t\tconst actualTokens = getTokens(tokenizer, lines);\n\n\t\tassert.deepStrictEqual(actualTokens, [\n\t\t\t[\n\t\t\t\tnew Token(0, 'source.test1', 'test1'),\n\t\t\t\tnew Token(12, 'string.quote.test1', 'test1'),\n\t\t\t\tnew Token(15, 'token.sql', 'sql'),\n\t\t\t\tnew Token(61, 'string.quote.test1', 'test1'),\n\t\t\t\tnew Token(64, 'source.test1', 'test1')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'source.test1', 'test1'),\n\t\t\t\tnew Token(12, 'string.quote.test1', 'test1')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'token.sql', 'sql')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'token.sql', 'sql')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'token.sql', 'sql')\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'string.quote.test1', 'test1'),\n\t\t\t\tnew Token(3, 'source.test1', 'test1')\n\t\t\t]\n\t\t]);\n\t\tdisposables.dispose();\n\t});\n\n\n\ttest('microsoft/monaco-editor#1235: Empty Line Handling', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tconst languageService = disposables.add(new LanguageService());\n\t\tconst tokenizer = disposables.add(createMonarchTokenizer(languageService, 'test', {\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t{ include: '@comments' },\n\t\t\t\t],\n\n\t\t\t\tcomments: [\n\t\t\t\t\t[/\\/\\/$/, 'comment'], // empty single-line comment\n\t\t\t\t\t[/\\/\\//, 'comment', '@comment_cpp'],\n\t\t\t\t],\n\n\t\t\t\tcomment_cpp: [\n\t\t\t\t\t[/(?:[^\\\\]|(?:\\\\.))+$/, 'comment', '@pop'],\n\t\t\t\t\t[/.+$/, 'comment'],\n\t\t\t\t\t[/$/, 'comment', '@pop']\n\t\t\t\t\t// No possible rule to detect an empty line and @pop?\n\t\t\t\t],\n\t\t\t},\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t`// This comment \\\\`,\n\t\t\t`   continues on the following line`,\n\t\t\t``,\n\t\t\t`// This comment does NOT continue \\\\\\\\`,\n\t\t\t`   because the escape char was itself escaped`,\n\t\t\t``,\n\t\t\t`// This comment DOES continue because \\\\\\\\\\\\`,\n\t\t\t`   the 1st '\\\\' escapes the 2nd; the 3rd escapes EOL`,\n\t\t\t``,\n\t\t\t`// This comment continues to the following line \\\\`,\n\t\t\t``,\n\t\t\t`But the line was empty. This line should not be commented.`,\n\t\t];\n\n\t\tconst actualTokens = getTokens(tokenizer, lines);\n\n\t\tassert.deepStrictEqual(actualTokens, [\n\t\t\t[new Token(0, 'comment.test', 'test')],\n\t\t\t[new Token(0, 'comment.test', 'test')],\n\t\t\t[],\n\t\t\t[new Token(0, 'comment.test', 'test')],\n\t\t\t[new Token(0, 'source.test', 'test')],\n\t\t\t[],\n\t\t\t[new Token(0, 'comment.test', 'test')],\n\t\t\t[new Token(0, 'comment.test', 'test')],\n\t\t\t[],\n\t\t\t[new Token(0, 'comment.test', 'test')],\n\t\t\t[],\n\t\t\t[new Token(0, 'source.test', 'test')]\n\t\t]);\n\n\t\tdisposables.dispose();\n\t});\n\n\ttest('microsoft/monaco-editor#2265: Exit a state at end of line', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tconst languageService = disposables.add(new LanguageService());\n\t\tconst tokenizer = disposables.add(createMonarchTokenizer(languageService, 'test', {\n\t\t\tincludeLF: true,\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t[/^\\*/, '', '@inner'],\n\t\t\t\t\t[/\\:\\*/, '', '@inner'],\n\t\t\t\t\t[/[^*:]+/, 'string'],\n\t\t\t\t\t[/[*:]/, 'string']\n\t\t\t\t],\n\t\t\t\tinner: [\n\t\t\t\t\t[/\\n/, '', '@pop'],\n\t\t\t\t\t[/\\d+/, 'number'],\n\t\t\t\t\t[/[^\\d]+/, '']\n\t\t\t\t]\n\t\t\t}\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t`PRINT 10 * 20`,\n\t\t\t`*FX200, 3`,\n\t\t\t`PRINT 2*3:*FX200, 3`\n\t\t];\n\n\t\tconst actualTokens = getTokens(tokenizer, lines);\n\n\t\tassert.deepStrictEqual(actualTokens, [\n\t\t\t[\n\t\t\t\tnew Token(0, 'string.test', 'test'),\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, '', 'test'),\n\t\t\t\tnew Token(3, 'number.test', 'test'),\n\t\t\t\tnew Token(6, '', 'test'),\n\t\t\t\tnew Token(8, 'number.test', 'test'),\n\t\t\t],\n\t\t\t[\n\t\t\t\tnew Token(0, 'string.test', 'test'),\n\t\t\t\tnew Token(9, '', 'test'),\n\t\t\t\tnew Token(13, 'number.test', 'test'),\n\t\t\t\tnew Token(16, '', 'test'),\n\t\t\t\tnew Token(18, 'number.test', 'test'),\n\t\t\t]\n\t\t]);\n\n\t\tdisposables.dispose();\n\t});\n\n\ttest('issue #115662: monarchCompile function need an extra option which can control replacement', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tconst languageService = disposables.add(new LanguageService());\n\n\t\tconst tokenizer1 = disposables.add(createMonarchTokenizer(languageService, 'test', {\n\t\t\tignoreCase: false,\n\t\t\tuselessReplaceKey1: '@uselessReplaceKey2',\n\t\t\tuselessReplaceKey2: '@uselessReplaceKey3',\n\t\t\tuselessReplaceKey3: '@uselessReplaceKey4',\n\t\t\tuselessReplaceKey4: '@uselessReplaceKey5',\n\t\t\tuselessReplaceKey5: '@ham',\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t{\n\t\t\t\t\t\tregex: /@\\w+/.test('@ham')\n\t\t\t\t\t\t\t? new RegExp(`^${'@uselessReplaceKey1'}$`)\n\t\t\t\t\t\t\t: new RegExp(`^${'@ham'}$`),\n\t\t\t\t\t\taction: { token: 'ham' }\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t}, configurationService));\n\n\t\tconst tokenizer2 = disposables.add(createMonarchTokenizer(languageService, 'test', {\n\t\t\tignoreCase: false,\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t{\n\t\t\t\t\t\tregex: /@@ham/,\n\t\t\t\t\t\taction: { token: 'ham' }\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t`@ham`\n\t\t];\n\n\t\tconst actualTokens1 = getTokens(tokenizer1, lines);\n\t\tassert.deepStrictEqual(actualTokens1, [\n\t\t\t[\n\t\t\t\tnew Token(0, 'ham.test', 'test'),\n\t\t\t]\n\t\t]);\n\n\t\tconst actualTokens2 = getTokens(tokenizer2, lines);\n\t\tassert.deepStrictEqual(actualTokens2, [\n\t\t\t[\n\t\t\t\tnew Token(0, 'ham.test', 'test'),\n\t\t\t]\n\t\t]);\n\n\t\tdisposables.dispose();\n\t});\n\n\ttest('microsoft/monaco-editor#2424: Allow to target @@', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tconst languageService = disposables.add(new LanguageService());\n\n\t\tconst tokenizer = disposables.add(createMonarchTokenizer(languageService, 'test', {\n\t\t\tignoreCase: false,\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t{\n\t\t\t\t\t\tregex: /@@@@/,\n\t\t\t\t\t\taction: { token: 'ham' }\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t`@@`\n\t\t];\n\n\t\tconst actualTokens = getTokens(tokenizer, lines);\n\t\tassert.deepStrictEqual(actualTokens, [\n\t\t\t[\n\t\t\t\tnew Token(0, 'ham.test', 'test'),\n\t\t\t]\n\t\t]);\n\n\t\tdisposables.dispose();\n\t});\n\n\ttest('microsoft/monaco-editor#3025: Check maxTokenizationLineLength before tokenizing', async () => {\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tconst languageService = disposables.add(new LanguageService());\n\n\t\t// Set maxTokenizationLineLength to 4 so that \"ham\" works but \"hamham\" would fail\n\t\tawait configurationService.updateValue('editor.maxTokenizationLineLength', 4);\n\n\t\tconst tokenizer = disposables.add(createMonarchTokenizer(languageService, 'test', {\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t{\n\t\t\t\t\t\tregex: /ham/,\n\t\t\t\t\t\taction: { token: 'ham' }\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t'ham', // length 3, should be tokenized\n\t\t\t'hamham' // length 6, should NOT be tokenized\n\t\t];\n\n\t\tconst actualTokens = getTokens(tokenizer, lines);\n\t\tassert.deepStrictEqual(actualTokens, [\n\t\t\t[\n\t\t\t\tnew Token(0, 'ham.test', 'test'),\n\t\t\t], [\n\t\t\t\tnew Token(0, '', 'test')\n\t\t\t]\n\t\t]);\n\n\t\tdisposables.dispose();\n\t});\n\n\ttest('microsoft/monaco-editor#3128: allow state access within rules', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tconst languageService = disposables.add(new LanguageService());\n\n\t\tconst tokenizer = disposables.add(createMonarchTokenizer(languageService, 'test', {\n\t\t\tignoreCase: false,\n\t\t\tencoding: /u|u8|U|L/,\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t// C++ 11 Raw String\n\t\t\t\t\t[/@encoding?R\\\"(?:([^ ()\\\\\\t]*))\\(/, { token: 'string.raw.begin', next: '@raw.$1' }],\n\t\t\t\t],\n\n\t\t\t\traw: [\n\t\t\t\t\t[/.*\\)$S2\\\"/, 'string.raw', '@pop'],\n\t\t\t\t\t[/.*/, 'string.raw']\n\t\t\t\t],\n\t\t\t},\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t`int main(){`,\n\t\t\t``,\n\t\t\t`\tauto s = R\"\"\"\"(`,\n\t\t\t`\tHello World`,\n\t\t\t`\t)\"\"\"\";`,\n\t\t\t``,\n\t\t\t`\tstd::cout << \"hello\";`,\n\t\t\t``,\n\t\t\t`}`,\n\t\t];\n\n\t\tconst actualTokens = getTokens(tokenizer, lines);\n\t\tassert.deepStrictEqual(actualTokens, [\n\t\t\t[new Token(0, 'source.test', 'test')],\n\t\t\t[],\n\t\t\t[new Token(0, 'source.test', 'test'), new Token(10, 'string.raw.begin.test', 'test')],\n\t\t\t[new Token(0, 'string.raw.test', 'test')],\n\t\t\t[new Token(0, 'string.raw.test', 'test'), new Token(6, 'source.test', 'test')],\n\t\t\t[],\n\t\t\t[new Token(0, 'source.test', 'test')],\n\t\t\t[],\n\t\t\t[new Token(0, 'source.test', 'test')],\n\t\t]);\n\n\t\tdisposables.dispose();\n\t});\n\n\ttest('microsoft/monaco-editor#4775: Raw-strings in c++ can break monarch', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst configurationService = new StandaloneConfigurationService(new NullLogService());\n\t\tconst languageService = disposables.add(new LanguageService());\n\n\t\tconst tokenizer = disposables.add(createMonarchTokenizer(languageService, 'test', {\n\t\t\tignoreCase: false,\n\t\t\tencoding: /u|u8|U|L/,\n\t\t\ttokenizer: {\n\t\t\t\troot: [\n\t\t\t\t\t// C++ 11 Raw String\n\t\t\t\t\t[/@encoding?R\\\"(?:([^ ()\\\\\\t]*))\\(/, { token: 'string.raw.begin', next: '@raw.$1' }],\n\t\t\t\t],\n\n\t\t\t\traw: [\n\t\t\t\t\t[/.*\\)$S2\\\"/, 'string.raw', '@pop'],\n\t\t\t\t\t[/.*/, 'string.raw']\n\t\t\t\t],\n\t\t\t},\n\t\t}, configurationService));\n\n\t\tconst lines = [\n\t\t\t`R\"[())\"`,\n\t\t];\n\n\t\tconst actualTokens = getTokens(tokenizer, lines);\n\t\tassert.deepStrictEqual(actualTokens, [\n\t\t\t[new Token(0, 'string.raw.begin.test', 'test'), new Token(4, 'string.raw.test', 'test')],\n\t\t]);\n\n\t\tdisposables.dispose();\n\t});\n\n});\n"]}