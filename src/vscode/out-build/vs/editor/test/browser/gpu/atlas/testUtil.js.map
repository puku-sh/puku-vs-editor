{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/test/browser/gpu/atlas/testUtil.ts","vs/editor/test/browser/gpu/atlas/testUtil.ts"],"names":[],"mappings":"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","file":"testUtil.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { fail, ok } from 'assert';\nimport type { ITextureAtlasPageGlyph } from '../../../../browser/gpu/atlas/atlas.js';\nimport { TextureAtlas } from '../../../../browser/gpu/atlas/textureAtlas.js';\nimport { isNumber } from '../../../../../base/common/types.js';\nimport { ensureNonNullable } from '../../../../browser/gpu/gpuUtils.js';\n\nexport function assertIsValidGlyph(glyph: Readonly<ITextureAtlasPageGlyph> | undefined, atlasOrSource: TextureAtlas | OffscreenCanvas) {\n\tif (glyph === undefined) {\n\t\tfail('glyph is undefined');\n\t}\n\tconst pageW = atlasOrSource instanceof TextureAtlas ? atlasOrSource.pageSize : atlasOrSource.width;\n\tconst pageH = atlasOrSource instanceof TextureAtlas ? atlasOrSource.pageSize : atlasOrSource.width;\n\tconst source = atlasOrSource instanceof TextureAtlas ? atlasOrSource.pages[glyph.pageIndex].source : atlasOrSource;\n\n\t// (x,y) are valid coordinates\n\tok(isNumber(glyph.x));\n\tok(glyph.x >= 0);\n\tok(glyph.x < pageW);\n\tok(isNumber(glyph.y));\n\tok(glyph.y >= 0);\n\tok(glyph.y < pageH);\n\n\t// (w,h) are valid dimensions\n\tok(isNumber(glyph.w));\n\tok(glyph.w > 0);\n\tok(glyph.w <= pageW);\n\tok(isNumber(glyph.h));\n\tok(glyph.h > 0);\n\tok(glyph.h <= pageH);\n\n\t// (originOffsetX, originOffsetY) are valid offsets\n\tok(isNumber(glyph.originOffsetX));\n\tok(isNumber(glyph.originOffsetY));\n\n\t// (x,y) + (w,h) are within the bounds of the atlas\n\tok(glyph.x + glyph.w <= pageW);\n\tok(glyph.y + glyph.h <= pageH);\n\n\t// Each of the glyph's outer pixel edges contain at least 1 non-transparent pixel\n\tconst ctx = ensureNonNullable(source.getContext('2d'));\n\tconst edges = [\n\t\tctx.getImageData(glyph.x, glyph.y, glyph.w, 1).data,\n\t\tctx.getImageData(glyph.x, glyph.y + glyph.h - 1, glyph.w, 1).data,\n\t\tctx.getImageData(glyph.x, glyph.y, 1, glyph.h).data,\n\t\tctx.getImageData(glyph.x + glyph.w - 1, glyph.y, 1, glyph.h).data,\n\t];\n\tfor (const edge of edges) {\n\t\tok(edge.some(color => (color & 0xFF) !== 0));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { fail, ok } from 'assert';\nimport type { ITextureAtlasPageGlyph } from '../../../../browser/gpu/atlas/atlas.js';\nimport { TextureAtlas } from '../../../../browser/gpu/atlas/textureAtlas.js';\nimport { isNumber } from '../../../../../base/common/types.js';\nimport { ensureNonNullable } from '../../../../browser/gpu/gpuUtils.js';\n\nexport function assertIsValidGlyph(glyph: Readonly<ITextureAtlasPageGlyph> | undefined, atlasOrSource: TextureAtlas | OffscreenCanvas) {\n\tif (glyph === undefined) {\n\t\tfail('glyph is undefined');\n\t}\n\tconst pageW = atlasOrSource instanceof TextureAtlas ? atlasOrSource.pageSize : atlasOrSource.width;\n\tconst pageH = atlasOrSource instanceof TextureAtlas ? atlasOrSource.pageSize : atlasOrSource.width;\n\tconst source = atlasOrSource instanceof TextureAtlas ? atlasOrSource.pages[glyph.pageIndex].source : atlasOrSource;\n\n\t// (x,y) are valid coordinates\n\tok(isNumber(glyph.x));\n\tok(glyph.x >= 0);\n\tok(glyph.x < pageW);\n\tok(isNumber(glyph.y));\n\tok(glyph.y >= 0);\n\tok(glyph.y < pageH);\n\n\t// (w,h) are valid dimensions\n\tok(isNumber(glyph.w));\n\tok(glyph.w > 0);\n\tok(glyph.w <= pageW);\n\tok(isNumber(glyph.h));\n\tok(glyph.h > 0);\n\tok(glyph.h <= pageH);\n\n\t// (originOffsetX, originOffsetY) are valid offsets\n\tok(isNumber(glyph.originOffsetX));\n\tok(isNumber(glyph.originOffsetY));\n\n\t// (x,y) + (w,h) are within the bounds of the atlas\n\tok(glyph.x + glyph.w <= pageW);\n\tok(glyph.y + glyph.h <= pageH);\n\n\t// Each of the glyph's outer pixel edges contain at least 1 non-transparent pixel\n\tconst ctx = ensureNonNullable(source.getContext('2d'));\n\tconst edges = [\n\t\tctx.getImageData(glyph.x, glyph.y, glyph.w, 1).data,\n\t\tctx.getImageData(glyph.x, glyph.y + glyph.h - 1, glyph.w, 1).data,\n\t\tctx.getImageData(glyph.x, glyph.y, 1, glyph.h).data,\n\t\tctx.getImageData(glyph.x + glyph.w - 1, glyph.y, 1, glyph.h).data,\n\t];\n\tfor (const edge of edges) {\n\t\tok(edge.some(color => (color & 0xFF) !== 0));\n\t}\n}\n"]}