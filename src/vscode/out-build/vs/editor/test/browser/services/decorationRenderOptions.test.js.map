{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/test/browser/services/decorationRenderOptions.test.ts","vs/editor/test/browser/services/decorationRenderOptions.test.ts"],"names":[],"mappings":"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","file":"decorationRenderOptions.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as platform from '../../../../base/common/platform.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { IDecorationRenderOptions } from '../../../common/editorCommon.js';\nimport { TestCodeEditorService, TestGlobalStyleSheet } from '../editorTestServices.js';\nimport { TestColorTheme, TestThemeService } from '../../../../platform/theme/test/common/testThemeService.js';\n\nsuite('Decoration Render Options', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tconst themeServiceMock = new TestThemeService();\n\n\tconst options: IDecorationRenderOptions = {\n\t\tgutterIconPath: URI.parse('https://github.com/microsoft/vscode/blob/main/resources/linux/code.png'),\n\t\tgutterIconSize: 'contain',\n\t\tbackgroundColor: 'red',\n\t\tborderColor: 'yellow'\n\t};\n\ttest('register and resolve decoration type', () => {\n\t\tconst s = store.add(new TestCodeEditorService(themeServiceMock));\n\t\tstore.add(s.registerDecorationType('test', 'example', options));\n\t\tassert.notStrictEqual(s.resolveDecorationOptions('example', false), undefined);\n\t});\n\ttest('remove decoration type', () => {\n\t\tconst s = store.add(new TestCodeEditorService(themeServiceMock));\n\t\ts.registerDecorationType('test', 'example', options);\n\t\tassert.notStrictEqual(s.resolveDecorationOptions('example', false), undefined);\n\t\ts.removeDecorationType('example');\n\t\tassert.throws(() => s.resolveDecorationOptions('example', false));\n\t});\n\n\tfunction readStyleSheet(styleSheet: TestGlobalStyleSheet): string {\n\t\treturn styleSheet.read();\n\t}\n\n\ttest('css properties', () => {\n\t\tconst s = store.add(new TestCodeEditorService(themeServiceMock));\n\t\tconst styleSheet = s.globalStyleSheet;\n\t\tstore.add(s.registerDecorationType('test', 'example', options));\n\t\tconst sheet = readStyleSheet(styleSheet);\n\t\tassert(sheet.indexOf(`{background:url('${CSS.escape('https://github.com/microsoft/vscode/blob/main/resources/linux/code.png')}') center center no-repeat;background-size:contain;}`) >= 0);\n\t\tassert(sheet.indexOf(`{background-color:red;border-color:yellow;box-sizing: border-box;}`) >= 0);\n\t});\n\n\ttest('theme color', () => {\n\t\tconst options: IDecorationRenderOptions = {\n\t\t\tbackgroundColor: { id: 'editorBackground' },\n\t\t\tborderColor: { id: 'editorBorder' },\n\t\t};\n\n\t\tconst themeService = new TestThemeService(new TestColorTheme({\n\t\t\teditorBackground: '#FF0000'\n\t\t}));\n\t\tconst s = store.add(new TestCodeEditorService(themeService));\n\t\tconst styleSheet = s.globalStyleSheet;\n\t\ts.registerDecorationType('test', 'example', options);\n\t\tassert.strictEqual(readStyleSheet(styleSheet), '.monaco-editor .ced-example-0 {background-color:#ff0000;border-color:transparent;box-sizing: border-box;}');\n\n\t\tthemeService.setTheme(new TestColorTheme({\n\t\t\teditorBackground: '#EE0000',\n\t\t\teditorBorder: '#00FFFF'\n\t\t}));\n\t\tassert.strictEqual(readStyleSheet(styleSheet), '.monaco-editor .ced-example-0 {background-color:#ee0000;border-color:#00ffff;box-sizing: border-box;}');\n\n\t\ts.removeDecorationType('example');\n\t\tassert.strictEqual(readStyleSheet(styleSheet), '');\n\t});\n\n\ttest('theme overrides', () => {\n\t\tconst options: IDecorationRenderOptions = {\n\t\t\tcolor: { id: 'editorBackground' },\n\t\t\tlight: {\n\t\t\t\tcolor: '#FF00FF'\n\t\t\t},\n\t\t\tdark: {\n\t\t\t\tcolor: '#000000',\n\t\t\t\tafter: {\n\t\t\t\t\tcolor: { id: 'infoForeground' }\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst themeService = new TestThemeService(new TestColorTheme({\n\t\t\teditorBackground: '#FF0000',\n\t\t\tinfoForeground: '#444444'\n\t\t}));\n\t\tconst s = store.add(new TestCodeEditorService(themeService));\n\t\tconst styleSheet = s.globalStyleSheet;\n\t\ts.registerDecorationType('test', 'example', options);\n\t\tconst expected = [\n\t\t\t'.vs-dark.monaco-editor .ced-example-4::after, .hc-black.monaco-editor .ced-example-4::after {color:#444444 !important;}',\n\t\t\t'.vs-dark.monaco-editor .ced-example-1, .hc-black.monaco-editor .ced-example-1 {color:#000000 !important;}',\n\t\t\t'.vs.monaco-editor .ced-example-1, .hc-light.monaco-editor .ced-example-1 {color:#FF00FF !important;}',\n\t\t\t'.monaco-editor .ced-example-1 {color:#ff0000 !important;}'\n\t\t].join('\\n');\n\t\tassert.strictEqual(readStyleSheet(styleSheet), expected);\n\n\t\ts.removeDecorationType('example');\n\t\tassert.strictEqual(readStyleSheet(styleSheet), '');\n\t});\n\n\ttest('css properties, gutterIconPaths', () => {\n\t\tconst s = store.add(new TestCodeEditorService(themeServiceMock));\n\t\tconst styleSheet = s.globalStyleSheet;\n\n\t\t// URI, only minimal encoding\n\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.parse('data:image/svg+xml;base64,PHN2ZyB4b+') });\n\t\tassert(readStyleSheet(styleSheet).indexOf(`{background:url('${CSS.escape('data:image/svg+xml;base64,PHN2ZyB4b+')}') center center no-repeat;}`) > 0);\n\t\ts.removeDecorationType('example');\n\n\t\tfunction assertBackground(url1: string, url2: string) {\n\t\t\tconst actual = readStyleSheet(styleSheet);\n\t\t\tassert(\n\t\t\t\tactual.indexOf(`{background:url('${url1}') center center no-repeat;}`) > 0\n\t\t\t\t|| actual.indexOf(`{background:url('${url2}') center center no-repeat;}`) > 0\n\t\t\t);\n\t\t}\n\n\t\tif (platform.isWindows) {\n\t\t\t// windows file path (used as string)\n\t\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.file('c:\\\\files\\\\miles\\\\more.png') });\n\t\t\tassertBackground(CSS.escape('file:///c:/files/miles/more.png'), CSS.escape('vscode-file://vscode-app/c:/files/miles/more.png'));\n\t\t\ts.removeDecorationType('example');\n\n\t\t\t// single quote must always be escaped/encoded\n\t\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.file('c:\\\\files\\\\foo\\\\b\\'ar.png') });\n\t\t\tassertBackground(CSS.escape('file:///c:/files/foo/b\\'ar.png'), CSS.escape('vscode-file://vscode-app/c:/files/foo/b\\'ar.png'));\n\t\t\ts.removeDecorationType('example');\n\t\t} else {\n\t\t\t// unix file path (used as string)\n\t\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.file('/Users/foo/bar.png') });\n\t\t\tassertBackground(CSS.escape('file:///Users/foo/bar.png'), CSS.escape('vscode-file://vscode-app/Users/foo/bar.png'));\n\t\t\ts.removeDecorationType('example');\n\n\t\t\t// single quote must always be escaped/encoded\n\t\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.file('/Users/foo/b\\'ar.png') });\n\t\t\tassertBackground(CSS.escape('file:///Users/foo/b\\'ar.png'), CSS.escape('vscode-file://vscode-app/Users/foo/b\\'ar.png'));\n\t\t\ts.removeDecorationType('example');\n\t\t}\n\n\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.parse('http://test/pa\\'th') });\n\t\tassert(readStyleSheet(styleSheet).indexOf(`{background:url('${CSS.escape('http://test/pa\\'th')}') center center no-repeat;}`) > 0);\n\t\ts.removeDecorationType('example');\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as platform from '../../../../base/common/platform.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { IDecorationRenderOptions } from '../../../common/editorCommon.js';\nimport { TestCodeEditorService, TestGlobalStyleSheet } from '../editorTestServices.js';\nimport { TestColorTheme, TestThemeService } from '../../../../platform/theme/test/common/testThemeService.js';\n\nsuite('Decoration Render Options', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tconst themeServiceMock = new TestThemeService();\n\n\tconst options: IDecorationRenderOptions = {\n\t\tgutterIconPath: URI.parse('https://github.com/microsoft/vscode/blob/main/resources/linux/code.png'),\n\t\tgutterIconSize: 'contain',\n\t\tbackgroundColor: 'red',\n\t\tborderColor: 'yellow'\n\t};\n\ttest('register and resolve decoration type', () => {\n\t\tconst s = store.add(new TestCodeEditorService(themeServiceMock));\n\t\tstore.add(s.registerDecorationType('test', 'example', options));\n\t\tassert.notStrictEqual(s.resolveDecorationOptions('example', false), undefined);\n\t});\n\ttest('remove decoration type', () => {\n\t\tconst s = store.add(new TestCodeEditorService(themeServiceMock));\n\t\ts.registerDecorationType('test', 'example', options);\n\t\tassert.notStrictEqual(s.resolveDecorationOptions('example', false), undefined);\n\t\ts.removeDecorationType('example');\n\t\tassert.throws(() => s.resolveDecorationOptions('example', false));\n\t});\n\n\tfunction readStyleSheet(styleSheet: TestGlobalStyleSheet): string {\n\t\treturn styleSheet.read();\n\t}\n\n\ttest('css properties', () => {\n\t\tconst s = store.add(new TestCodeEditorService(themeServiceMock));\n\t\tconst styleSheet = s.globalStyleSheet;\n\t\tstore.add(s.registerDecorationType('test', 'example', options));\n\t\tconst sheet = readStyleSheet(styleSheet);\n\t\tassert(sheet.indexOf(`{background:url('${CSS.escape('https://github.com/microsoft/vscode/blob/main/resources/linux/code.png')}') center center no-repeat;background-size:contain;}`) >= 0);\n\t\tassert(sheet.indexOf(`{background-color:red;border-color:yellow;box-sizing: border-box;}`) >= 0);\n\t});\n\n\ttest('theme color', () => {\n\t\tconst options: IDecorationRenderOptions = {\n\t\t\tbackgroundColor: { id: 'editorBackground' },\n\t\t\tborderColor: { id: 'editorBorder' },\n\t\t};\n\n\t\tconst themeService = new TestThemeService(new TestColorTheme({\n\t\t\teditorBackground: '#FF0000'\n\t\t}));\n\t\tconst s = store.add(new TestCodeEditorService(themeService));\n\t\tconst styleSheet = s.globalStyleSheet;\n\t\ts.registerDecorationType('test', 'example', options);\n\t\tassert.strictEqual(readStyleSheet(styleSheet), '.monaco-editor .ced-example-0 {background-color:#ff0000;border-color:transparent;box-sizing: border-box;}');\n\n\t\tthemeService.setTheme(new TestColorTheme({\n\t\t\teditorBackground: '#EE0000',\n\t\t\teditorBorder: '#00FFFF'\n\t\t}));\n\t\tassert.strictEqual(readStyleSheet(styleSheet), '.monaco-editor .ced-example-0 {background-color:#ee0000;border-color:#00ffff;box-sizing: border-box;}');\n\n\t\ts.removeDecorationType('example');\n\t\tassert.strictEqual(readStyleSheet(styleSheet), '');\n\t});\n\n\ttest('theme overrides', () => {\n\t\tconst options: IDecorationRenderOptions = {\n\t\t\tcolor: { id: 'editorBackground' },\n\t\t\tlight: {\n\t\t\t\tcolor: '#FF00FF'\n\t\t\t},\n\t\t\tdark: {\n\t\t\t\tcolor: '#000000',\n\t\t\t\tafter: {\n\t\t\t\t\tcolor: { id: 'infoForeground' }\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst themeService = new TestThemeService(new TestColorTheme({\n\t\t\teditorBackground: '#FF0000',\n\t\t\tinfoForeground: '#444444'\n\t\t}));\n\t\tconst s = store.add(new TestCodeEditorService(themeService));\n\t\tconst styleSheet = s.globalStyleSheet;\n\t\ts.registerDecorationType('test', 'example', options);\n\t\tconst expected = [\n\t\t\t'.vs-dark.monaco-editor .ced-example-4::after, .hc-black.monaco-editor .ced-example-4::after {color:#444444 !important;}',\n\t\t\t'.vs-dark.monaco-editor .ced-example-1, .hc-black.monaco-editor .ced-example-1 {color:#000000 !important;}',\n\t\t\t'.vs.monaco-editor .ced-example-1, .hc-light.monaco-editor .ced-example-1 {color:#FF00FF !important;}',\n\t\t\t'.monaco-editor .ced-example-1 {color:#ff0000 !important;}'\n\t\t].join('\\n');\n\t\tassert.strictEqual(readStyleSheet(styleSheet), expected);\n\n\t\ts.removeDecorationType('example');\n\t\tassert.strictEqual(readStyleSheet(styleSheet), '');\n\t});\n\n\ttest('css properties, gutterIconPaths', () => {\n\t\tconst s = store.add(new TestCodeEditorService(themeServiceMock));\n\t\tconst styleSheet = s.globalStyleSheet;\n\n\t\t// URI, only minimal encoding\n\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.parse('data:image/svg+xml;base64,PHN2ZyB4b+') });\n\t\tassert(readStyleSheet(styleSheet).indexOf(`{background:url('${CSS.escape('data:image/svg+xml;base64,PHN2ZyB4b+')}') center center no-repeat;}`) > 0);\n\t\ts.removeDecorationType('example');\n\n\t\tfunction assertBackground(url1: string, url2: string) {\n\t\t\tconst actual = readStyleSheet(styleSheet);\n\t\t\tassert(\n\t\t\t\tactual.indexOf(`{background:url('${url1}') center center no-repeat;}`) > 0\n\t\t\t\t|| actual.indexOf(`{background:url('${url2}') center center no-repeat;}`) > 0\n\t\t\t);\n\t\t}\n\n\t\tif (platform.isWindows) {\n\t\t\t// windows file path (used as string)\n\t\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.file('c:\\\\files\\\\miles\\\\more.png') });\n\t\t\tassertBackground(CSS.escape('file:///c:/files/miles/more.png'), CSS.escape('vscode-file://vscode-app/c:/files/miles/more.png'));\n\t\t\ts.removeDecorationType('example');\n\n\t\t\t// single quote must always be escaped/encoded\n\t\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.file('c:\\\\files\\\\foo\\\\b\\'ar.png') });\n\t\t\tassertBackground(CSS.escape('file:///c:/files/foo/b\\'ar.png'), CSS.escape('vscode-file://vscode-app/c:/files/foo/b\\'ar.png'));\n\t\t\ts.removeDecorationType('example');\n\t\t} else {\n\t\t\t// unix file path (used as string)\n\t\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.file('/Users/foo/bar.png') });\n\t\t\tassertBackground(CSS.escape('file:///Users/foo/bar.png'), CSS.escape('vscode-file://vscode-app/Users/foo/bar.png'));\n\t\t\ts.removeDecorationType('example');\n\n\t\t\t// single quote must always be escaped/encoded\n\t\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.file('/Users/foo/b\\'ar.png') });\n\t\t\tassertBackground(CSS.escape('file:///Users/foo/b\\'ar.png'), CSS.escape('vscode-file://vscode-app/Users/foo/b\\'ar.png'));\n\t\t\ts.removeDecorationType('example');\n\t\t}\n\n\t\ts.registerDecorationType('test', 'example', { gutterIconPath: URI.parse('http://test/pa\\'th') });\n\t\tassert(readStyleSheet(styleSheet).indexOf(`{background:url('${CSS.escape('http://test/pa\\'th')}') center center no-repeat;}`) > 0);\n\t\ts.removeDecorationType('example');\n\t});\n});\n"]}