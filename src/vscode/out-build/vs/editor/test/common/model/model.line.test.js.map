{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/test/common/model/model.line.test.ts","vs/editor/test/common/model/model.line.test.ts"],"names":[],"mappings":"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","file":"model.line.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { Range } from '../../../common/core/range.js';\nimport { MetadataConsts } from '../../../common/encodedTokenAttributes.js';\nimport { EncodedTokenizationResult, IBackgroundTokenizationStore, IBackgroundTokenizer, IState, ITokenizationSupport, TokenizationRegistry, TokenizationResult } from '../../../common/languages.js';\nimport { ITextModel } from '../../../common/model.js';\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport { ContiguousMultilineTokensBuilder } from '../../../common/tokens/contiguousMultilineTokensBuilder.js';\nimport { LineTokens } from '../../../common/tokens/lineTokens.js';\nimport { TestLineToken, TestLineTokenFactory } from '../core/testLineToken.js';\nimport { createTextModel } from '../testTextModel.js';\n\ninterface ILineEdit {\n\tstartColumn: number;\n\tendColumn: number;\n\ttext: string;\n}\n\nfunction assertLineTokens(__actual: LineTokens, _expected: TestToken[]): void {\n\tconst tmp = TestToken.toTokens(_expected);\n\tLineTokens.convertToEndOffset(tmp, __actual.getLineContent().length);\n\tconst expected = TestLineTokenFactory.inflateArr(tmp);\n\tconst _actual = __actual.inflate();\n\tinterface ITestToken {\n\t\tendIndex: number;\n\t\ttype: string;\n\t}\n\tconst actual: ITestToken[] = [];\n\tfor (let i = 0, len = _actual.getCount(); i < len; i++) {\n\t\tactual[i] = {\n\t\t\tendIndex: _actual.getEndOffset(i),\n\t\t\ttype: _actual.getClassName(i)\n\t\t};\n\t}\n\tconst decode = (token: TestLineToken) => {\n\t\treturn {\n\t\t\tendIndex: token.endIndex,\n\t\t\ttype: token.getType()\n\t\t};\n\t};\n\tassert.deepStrictEqual(actual, expected.map(decode));\n}\n\nsuite('ModelLine - getIndentLevel', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction assertIndentLevel(text: string, expected: number, tabSize: number = 4): void {\n\t\tconst actual = computeIndentLevel(text, tabSize);\n\t\tassert.strictEqual(actual, expected, text);\n\t}\n\n\ttest('getIndentLevel', () => {\n\t\tassertIndentLevel('', -1);\n\t\tassertIndentLevel(' ', -1);\n\t\tassertIndentLevel('   \\t', -1);\n\t\tassertIndentLevel('Hello', 0);\n\t\tassertIndentLevel(' Hello', 1);\n\t\tassertIndentLevel('   Hello', 3);\n\t\tassertIndentLevel('\\tHello', 4);\n\t\tassertIndentLevel(' \\tHello', 4);\n\t\tassertIndentLevel('  \\tHello', 4);\n\t\tassertIndentLevel('   \\tHello', 4);\n\t\tassertIndentLevel('    \\tHello', 8);\n\t\tassertIndentLevel('     \\tHello', 8);\n\t\tassertIndentLevel('\\t Hello', 5);\n\t\tassertIndentLevel('\\t \\tHello', 8);\n\t});\n});\n\nclass TestToken {\n\tpublic readonly startOffset: number;\n\tpublic readonly color: number;\n\n\tconstructor(startOffset: number, color: number) {\n\t\tthis.startOffset = startOffset;\n\t\tthis.color = color;\n\t}\n\n\tpublic static toTokens(tokens: TestToken[]): Uint32Array;\n\tpublic static toTokens(tokens: TestToken[] | null): Uint32Array | null {\n\t\tif (tokens === null) {\n\t\t\treturn null;\n\t\t}\n\t\tconst tokensLen = tokens.length;\n\t\tconst result = new Uint32Array((tokensLen << 1));\n\t\tfor (let i = 0; i < tokensLen; i++) {\n\t\t\tconst token = tokens[i];\n\t\t\tresult[(i << 1)] = token.startOffset;\n\t\t\tresult[(i << 1) + 1] = (\n\t\t\t\ttoken.color << MetadataConsts.FOREGROUND_OFFSET\n\t\t\t) >>> 0;\n\t\t}\n\t\treturn result;\n\t}\n}\n\nclass ManualTokenizationSupport implements ITokenizationSupport {\n\tprivate readonly tokens = new Map<number, Uint32Array>();\n\tprivate readonly stores = new Set<IBackgroundTokenizationStore>();\n\n\tpublic setLineTokens(lineNumber: number, tokens: Uint32Array): void {\n\t\tconst b = new ContiguousMultilineTokensBuilder();\n\t\tb.add(lineNumber, tokens);\n\t\tfor (const s of this.stores) {\n\t\t\ts.setTokens(b.finalize());\n\t\t}\n\t}\n\n\tgetInitialState(): IState {\n\t\treturn new LineState(1);\n\t}\n\n\ttokenize(line: string, hasEOL: boolean, state: IState): TokenizationResult {\n\t\tthrow new Error();\n\t}\n\n\ttokenizeEncoded(line: string, hasEOL: boolean, state: IState): EncodedTokenizationResult {\n\t\tconst s = state as LineState;\n\t\treturn new EncodedTokenizationResult(this.tokens.get(s.lineNumber)!, new LineState(s.lineNumber + 1));\n\t}\n\n\t/**\n\t * Can be/return undefined if default background tokenization should be used.\n\t */\n\tcreateBackgroundTokenizer?(textModel: ITextModel, store: IBackgroundTokenizationStore): IBackgroundTokenizer | undefined {\n\t\tthis.stores.add(store);\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tthis.stores.delete(store);\n\t\t\t},\n\t\t\trequestTokens(startLineNumber, endLineNumberExclusive) {\n\t\t\t},\n\t\t};\n\t}\n}\n\nclass LineState implements IState {\n\tconstructor(public readonly lineNumber: number) { }\n\tclone(): IState {\n\t\treturn this;\n\t}\n\tequals(other: IState): boolean {\n\t\treturn (other as LineState).lineNumber === this.lineNumber;\n\t}\n}\n\nsuite('ModelLinesTokens', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tinterface IBufferLineState {\n\t\ttext: string;\n\t\ttokens: TestToken[];\n\t}\n\n\tinterface IEdit {\n\t\trange: Range;\n\t\ttext: string;\n\t}\n\n\tfunction testApplyEdits(initial: IBufferLineState[], edits: IEdit[], expected: IBufferLineState[]): void {\n\t\tconst initialText = initial.map(el => el.text).join('\\n');\n\n\t\tconst s = new ManualTokenizationSupport();\n\t\tconst d = TokenizationRegistry.register('test', s);\n\n\t\tconst model = createTextModel(initialText, 'test');\n\t\tmodel.onBeforeAttached();\n\t\tfor (let lineIndex = 0; lineIndex < initial.length; lineIndex++) {\n\t\t\tconst lineTokens = initial[lineIndex].tokens;\n\t\t\tconst lineTextLength = model.getLineMaxColumn(lineIndex + 1) - 1;\n\t\t\tconst tokens = TestToken.toTokens(lineTokens);\n\t\t\tLineTokens.convertToEndOffset(tokens, lineTextLength);\n\t\t\ts.setLineTokens(lineIndex + 1, tokens);\n\t\t}\n\n\t\tmodel.applyEdits(edits.map((ed) => ({\n\t\t\tidentifier: null,\n\t\t\trange: ed.range,\n\t\t\ttext: ed.text,\n\t\t\tforceMoveMarkers: false\n\t\t})));\n\n\t\tfor (let lineIndex = 0; lineIndex < expected.length; lineIndex++) {\n\t\t\tconst actualLine = model.getLineContent(lineIndex + 1);\n\t\t\tconst actualTokens = model.tokenization.getLineTokens(lineIndex + 1);\n\t\t\tassert.strictEqual(actualLine, expected[lineIndex].text);\n\t\t\tassertLineTokens(actualTokens, expected[lineIndex].tokens);\n\t\t}\n\n\t\tmodel.dispose();\n\t\td.dispose();\n\t}\n\n\ttest('single delete 1', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 1, 1, 2), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: 'ello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(4, 2), new TestToken(5, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single delete 2', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'helloworld',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 3, 1, 8), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: 'herld',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(2, 2)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single delete 3', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 1, 1, 6), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: ' world',\n\t\t\t\ttokens: [new TestToken(0, 2), new TestToken(1, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single delete 4', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 2, 1, 7), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: 'hworld',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(1, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single delete 5', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 1, 1, 12), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: '',\n\t\t\t\ttokens: [new TestToken(0, 1)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('multi delete 6', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 4), new TestToken(5, 5), new TestToken(6, 6)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 7), new TestToken(5, 8), new TestToken(6, 9)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 6, 3, 6), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 8), new TestToken(6, 9)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('multi delete 7', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 4), new TestToken(5, 5), new TestToken(6, 6)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 7), new TestToken(5, 8), new TestToken(6, 9)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 12, 3, 12), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('multi delete 8', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 4), new TestToken(5, 5), new TestToken(6, 6)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 7), new TestToken(5, 8), new TestToken(6, 9)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 1, 3, 1), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 7), new TestToken(5, 8), new TestToken(6, 9)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('multi delete 9', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 4), new TestToken(5, 5), new TestToken(6, 6)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 7), new TestToken(5, 8), new TestToken(6, 9)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 12, 3, 1), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello worldhello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3), new TestToken(11, 7), new TestToken(16, 8), new TestToken(17, 9)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single insert 1', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 1, 1, 1), text: 'xx' }],\n\t\t\t[{\n\t\t\t\ttext: 'xxhello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(7, 2), new TestToken(8, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single insert 2', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 2, 1, 2), text: 'xx' }],\n\t\t\t[{\n\t\t\t\ttext: 'hxxello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(7, 2), new TestToken(8, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single insert 3', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 6, 1, 6), text: 'xx' }],\n\t\t\t[{\n\t\t\t\ttext: 'helloxx world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(7, 2), new TestToken(8, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single insert 4', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 7, 1, 7), text: 'xx' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello xxworld',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(8, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single insert 5', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 12, 1, 12), text: 'xx' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello worldxx',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('multi insert 6', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 1, 1, 1), text: '\\n' }],\n\t\t\t[{\n\t\t\t\ttext: '',\n\t\t\t\ttokens: [new TestToken(0, 1)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('multi insert 7', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 12, 1, 12), text: '\\n' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}, {\n\t\t\t\ttext: '',\n\t\t\t\ttokens: [new TestToken(0, 1)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('multi insert 8', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 7, 1, 7), text: '\\n' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello ',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2)]\n\t\t\t}, {\n\t\t\t\ttext: 'world',\n\t\t\t\ttokens: [new TestToken(0, 1)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('multi insert 9', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 4), new TestToken(5, 5), new TestToken(6, 6)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 7, 1, 7), text: 'xx\\nyy' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello xx',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2)]\n\t\t\t}, {\n\t\t\t\ttext: 'yyworld',\n\t\t\t\ttokens: [new TestToken(0, 1)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 4), new TestToken(5, 5), new TestToken(6, 6)]\n\t\t\t}]\n\t\t);\n\t});\n\n\tfunction testLineEditTokens(initialText: string, initialTokens: TestToken[], edits: ILineEdit[], expectedText: string, expectedTokens: TestToken[]): void {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: initialText,\n\t\t\t\ttokens: initialTokens\n\t\t\t}],\n\t\t\tedits.map((ed) => ({\n\t\t\t\trange: new Range(1, ed.startColumn, 1, ed.endColumn),\n\t\t\t\ttext: ed.text\n\t\t\t})),\n\t\t\t[{\n\t\t\t\ttext: expectedText,\n\t\t\t\ttokens: expectedTokens\n\t\t\t}]\n\t\t);\n\t}\n\n\ttest('insertion on empty line', () => {\n\t\tconst s = new ManualTokenizationSupport();\n\t\tconst d = TokenizationRegistry.register('test', s);\n\n\t\tconst model = createTextModel('some text', 'test');\n\t\tconst tokens = TestToken.toTokens([new TestToken(0, 1)]);\n\t\tLineTokens.convertToEndOffset(tokens, model.getLineMaxColumn(1) - 1);\n\t\ts.setLineTokens(1, tokens);\n\n\t\tmodel.applyEdits([{\n\t\t\trange: new Range(1, 1, 1, 10),\n\t\t\ttext: ''\n\t\t}]);\n\n\t\ts.setLineTokens(1, new Uint32Array(0));\n\n\t\tmodel.applyEdits([{\n\t\t\trange: new Range(1, 1, 1, 1),\n\t\t\ttext: 'a'\n\t\t}]);\n\n\t\tconst actualTokens = model.tokenization.getLineTokens(1);\n\t\tassertLineTokens(actualTokens, [new TestToken(0, 1)]);\n\n\t\tmodel.dispose();\n\t\td.dispose();\n\t});\n\n\ttest('updates tokens on insertion 1', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 1,\n\t\t\t\ttext: 'a',\n\t\t\t}],\n\t\t\t'aabcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(5, 2),\n\t\t\t\tnew TestToken(6, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 2', () => {\n\t\ttestLineEditTokens(\n\t\t\t'aabcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(5, 2),\n\t\t\t\tnew TestToken(6, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 2,\n\t\t\t\tendColumn: 2,\n\t\t\t\ttext: 'x',\n\t\t\t}],\n\t\t\t'axabcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(6, 2),\n\t\t\t\tnew TestToken(7, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 3', () => {\n\t\ttestLineEditTokens(\n\t\t\t'axabcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(6, 2),\n\t\t\t\tnew TestToken(7, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 3,\n\t\t\t\tendColumn: 3,\n\t\t\t\ttext: 'stu',\n\t\t\t}],\n\t\t\t'axstuabcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(9, 2),\n\t\t\t\tnew TestToken(10, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 4', () => {\n\t\ttestLineEditTokens(\n\t\t\t'axstuabcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(9, 2),\n\t\t\t\tnew TestToken(10, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 10,\n\t\t\t\tendColumn: 10,\n\t\t\t\ttext: '\\t',\n\t\t\t}],\n\t\t\t'axstuabcd\\t efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(10, 2),\n\t\t\t\tnew TestToken(11, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 5', () => {\n\t\ttestLineEditTokens(\n\t\t\t'axstuabcd\\t efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(10, 2),\n\t\t\t\tnew TestToken(11, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 12,\n\t\t\t\tendColumn: 12,\n\t\t\t\ttext: 'dd',\n\t\t\t}],\n\t\t\t'axstuabcd\\t ddefgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(10, 2),\n\t\t\t\tnew TestToken(13, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 6', () => {\n\t\ttestLineEditTokens(\n\t\t\t'axstuabcd\\t ddefgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(10, 2),\n\t\t\t\tnew TestToken(13, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 18,\n\t\t\t\tendColumn: 18,\n\t\t\t\ttext: 'xyz',\n\t\t\t}],\n\t\t\t'axstuabcd\\t ddefghxyz',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(10, 2),\n\t\t\t\tnew TestToken(13, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 7', () => {\n\t\ttestLineEditTokens(\n\t\t\t'axstuabcd\\t ddefghxyz',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(10, 2),\n\t\t\t\tnew TestToken(13, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 1,\n\t\t\t\ttext: 'x',\n\t\t\t}],\n\t\t\t'xaxstuabcd\\t ddefghxyz',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(11, 2),\n\t\t\t\tnew TestToken(14, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 8', () => {\n\t\ttestLineEditTokens(\n\t\t\t'xaxstuabcd\\t ddefghxyz',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(11, 2),\n\t\t\t\tnew TestToken(14, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 22,\n\t\t\t\tendColumn: 22,\n\t\t\t\ttext: 'x',\n\t\t\t}],\n\t\t\t'xaxstuabcd\\t ddefghxyzx',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(11, 2),\n\t\t\t\tnew TestToken(14, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 9', () => {\n\t\ttestLineEditTokens(\n\t\t\t'xaxstuabcd\\t ddefghxyzx',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(11, 2),\n\t\t\t\tnew TestToken(14, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 2,\n\t\t\t\tendColumn: 2,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'xaxstuabcd\\t ddefghxyzx',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(11, 2),\n\t\t\t\tnew TestToken(14, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 10', () => {\n\t\ttestLineEditTokens(\n\t\t\t'',\n\t\t\t[],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 1,\n\t\t\t\ttext: 'a',\n\t\t\t}],\n\t\t\t'a',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('delete second token 2', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcdefghij',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(3, 2),\n\t\t\t\tnew TestToken(6, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 4,\n\t\t\t\tendColumn: 7,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'abcghij',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(3, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('insert right before second token', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcdefghij',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(3, 2),\n\t\t\t\tnew TestToken(6, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 4,\n\t\t\t\tendColumn: 4,\n\t\t\t\ttext: 'hello',\n\t\t\t}],\n\t\t\t'abchellodefghij',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(8, 2),\n\t\t\t\tnew TestToken(11, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('delete first char', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 2,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'bcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(3, 2),\n\t\t\t\tnew TestToken(4, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('delete 2nd and 3rd chars', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 2,\n\t\t\t\tendColumn: 4,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'ad efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(2, 2),\n\t\t\t\tnew TestToken(3, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('delete first token', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 5,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t' efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 2),\n\t\t\t\tnew TestToken(1, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('delete second token', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 5,\n\t\t\t\tendColumn: 6,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'abcdefgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('delete second token + a bit of the third one', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 5,\n\t\t\t\tendColumn: 7,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'abcdfgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('delete second and third token', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 5,\n\t\t\t\tendColumn: 10,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'abcd',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('delete everything', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 10,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('noop', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 1,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('equivalent to deleting first two chars', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 3,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'cd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(2, 2),\n\t\t\t\tnew TestToken(3, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('equivalent to deleting from 5 to the end', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 5,\n\t\t\t\tendColumn: 10,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'abcd',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on replace 1', () => {\n\t\ttestLineEditTokens(\n\t\t\t'Hello world, ciao',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(5, 0),\n\t\t\t\tnew TestToken(6, 2),\n\t\t\t\tnew TestToken(11, 0),\n\t\t\t\tnew TestToken(13, 0)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 6,\n\t\t\t\ttext: 'Hi',\n\t\t\t}],\n\t\t\t'Hi world, ciao',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 0),\n\t\t\t\tnew TestToken(3, 2),\n\t\t\t\tnew TestToken(8, 0),\n\t\t\t\tnew TestToken(10, 0),\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on replace 2', () => {\n\t\ttestLineEditTokens(\n\t\t\t'Hello world, ciao',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(5, 0),\n\t\t\t\tnew TestToken(6, 2),\n\t\t\t\tnew TestToken(11, 0),\n\t\t\t\tnew TestToken(13, 0),\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 6,\n\t\t\t\ttext: 'Hi',\n\t\t\t}, {\n\t\t\t\tstartColumn: 8,\n\t\t\t\tendColumn: 12,\n\t\t\t\ttext: 'my friends',\n\t\t\t}],\n\t\t\t'Hi wmy friends, ciao',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 0),\n\t\t\t\tnew TestToken(3, 2),\n\t\t\t\tnew TestToken(14, 0),\n\t\t\t\tnew TestToken(16, 0),\n\t\t\t]\n\t\t);\n\t});\n\n\tfunction testLineSplitTokens(initialText: string, initialTokens: TestToken[], splitColumn: number, expectedText1: string, expectedText2: string, expectedTokens: TestToken[]): void {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: initialText,\n\t\t\t\ttokens: initialTokens\n\t\t\t}],\n\t\t\t[{\n\t\t\t\trange: new Range(1, splitColumn, 1, splitColumn),\n\t\t\t\ttext: '\\n'\n\t\t\t}],\n\t\t\t[{\n\t\t\t\ttext: expectedText1,\n\t\t\t\ttokens: expectedTokens\n\t\t\t}, {\n\t\t\t\ttext: expectedText2,\n\t\t\t\ttokens: [new TestToken(0, 1)]\n\t\t\t}]\n\t\t);\n\t}\n\n\ttest('split at the beginning', () => {\n\t\ttestLineSplitTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t1,\n\t\t\t'',\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('split at the end', () => {\n\t\ttestLineSplitTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t10,\n\t\t\t'abcd efgh',\n\t\t\t'',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('split inthe middle 1', () => {\n\t\ttestLineSplitTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t5,\n\t\t\t'abcd',\n\t\t\t' efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('split inthe middle 2', () => {\n\t\ttestLineSplitTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t6,\n\t\t\t'abcd ',\n\t\t\t'efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2)\n\t\t\t]\n\t\t);\n\t});\n\n\tfunction testLineAppendTokens(aText: string, aTokens: TestToken[], bText: string, bTokens: TestToken[], expectedText: string, expectedTokens: TestToken[]): void {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: aText,\n\t\t\t\ttokens: aTokens\n\t\t\t}, {\n\t\t\t\ttext: bText,\n\t\t\t\ttokens: bTokens\n\t\t\t}],\n\t\t\t[{\n\t\t\t\trange: new Range(1, aText.length + 1, 2, 1),\n\t\t\t\ttext: ''\n\t\t\t}],\n\t\t\t[{\n\t\t\t\ttext: expectedText,\n\t\t\t\ttokens: expectedTokens\n\t\t\t}]\n\t\t);\n\t}\n\n\ttest('append empty 1', () => {\n\t\ttestLineAppendTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t'',\n\t\t\t[],\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('append empty 2', () => {\n\t\ttestLineAppendTokens(\n\t\t\t'',\n\t\t\t[],\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('append 1', () => {\n\t\ttestLineAppendTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 4),\n\t\t\t\tnew TestToken(4, 5),\n\t\t\t\tnew TestToken(5, 6)\n\t\t\t],\n\t\t\t'abcd efghabcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3),\n\t\t\t\tnew TestToken(9, 4),\n\t\t\t\tnew TestToken(13, 5),\n\t\t\t\tnew TestToken(14, 6)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('append 2', () => {\n\t\ttestLineAppendTokens(\n\t\t\t'abcd ',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2)\n\t\t\t],\n\t\t\t'efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 3)\n\t\t\t],\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('append 3', () => {\n\t\ttestLineAppendTokens(\n\t\t\t'abcd',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t],\n\t\t\t' efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 2),\n\t\t\t\tnew TestToken(1, 3)\n\t\t\t],\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t]\n\t\t);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { Range } from '../../../common/core/range.js';\nimport { MetadataConsts } from '../../../common/encodedTokenAttributes.js';\nimport { EncodedTokenizationResult, IBackgroundTokenizationStore, IBackgroundTokenizer, IState, ITokenizationSupport, TokenizationRegistry, TokenizationResult } from '../../../common/languages.js';\nimport { ITextModel } from '../../../common/model.js';\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport { ContiguousMultilineTokensBuilder } from '../../../common/tokens/contiguousMultilineTokensBuilder.js';\nimport { LineTokens } from '../../../common/tokens/lineTokens.js';\nimport { TestLineToken, TestLineTokenFactory } from '../core/testLineToken.js';\nimport { createTextModel } from '../testTextModel.js';\n\ninterface ILineEdit {\n\tstartColumn: number;\n\tendColumn: number;\n\ttext: string;\n}\n\nfunction assertLineTokens(__actual: LineTokens, _expected: TestToken[]): void {\n\tconst tmp = TestToken.toTokens(_expected);\n\tLineTokens.convertToEndOffset(tmp, __actual.getLineContent().length);\n\tconst expected = TestLineTokenFactory.inflateArr(tmp);\n\tconst _actual = __actual.inflate();\n\tinterface ITestToken {\n\t\tendIndex: number;\n\t\ttype: string;\n\t}\n\tconst actual: ITestToken[] = [];\n\tfor (let i = 0, len = _actual.getCount(); i < len; i++) {\n\t\tactual[i] = {\n\t\t\tendIndex: _actual.getEndOffset(i),\n\t\t\ttype: _actual.getClassName(i)\n\t\t};\n\t}\n\tconst decode = (token: TestLineToken) => {\n\t\treturn {\n\t\t\tendIndex: token.endIndex,\n\t\t\ttype: token.getType()\n\t\t};\n\t};\n\tassert.deepStrictEqual(actual, expected.map(decode));\n}\n\nsuite('ModelLine - getIndentLevel', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction assertIndentLevel(text: string, expected: number, tabSize: number = 4): void {\n\t\tconst actual = computeIndentLevel(text, tabSize);\n\t\tassert.strictEqual(actual, expected, text);\n\t}\n\n\ttest('getIndentLevel', () => {\n\t\tassertIndentLevel('', -1);\n\t\tassertIndentLevel(' ', -1);\n\t\tassertIndentLevel('   \\t', -1);\n\t\tassertIndentLevel('Hello', 0);\n\t\tassertIndentLevel(' Hello', 1);\n\t\tassertIndentLevel('   Hello', 3);\n\t\tassertIndentLevel('\\tHello', 4);\n\t\tassertIndentLevel(' \\tHello', 4);\n\t\tassertIndentLevel('  \\tHello', 4);\n\t\tassertIndentLevel('   \\tHello', 4);\n\t\tassertIndentLevel('    \\tHello', 8);\n\t\tassertIndentLevel('     \\tHello', 8);\n\t\tassertIndentLevel('\\t Hello', 5);\n\t\tassertIndentLevel('\\t \\tHello', 8);\n\t});\n});\n\nclass TestToken {\n\tpublic readonly startOffset: number;\n\tpublic readonly color: number;\n\n\tconstructor(startOffset: number, color: number) {\n\t\tthis.startOffset = startOffset;\n\t\tthis.color = color;\n\t}\n\n\tpublic static toTokens(tokens: TestToken[]): Uint32Array;\n\tpublic static toTokens(tokens: TestToken[] | null): Uint32Array | null {\n\t\tif (tokens === null) {\n\t\t\treturn null;\n\t\t}\n\t\tconst tokensLen = tokens.length;\n\t\tconst result = new Uint32Array((tokensLen << 1));\n\t\tfor (let i = 0; i < tokensLen; i++) {\n\t\t\tconst token = tokens[i];\n\t\t\tresult[(i << 1)] = token.startOffset;\n\t\t\tresult[(i << 1) + 1] = (\n\t\t\t\ttoken.color << MetadataConsts.FOREGROUND_OFFSET\n\t\t\t) >>> 0;\n\t\t}\n\t\treturn result;\n\t}\n}\n\nclass ManualTokenizationSupport implements ITokenizationSupport {\n\tprivate readonly tokens = new Map<number, Uint32Array>();\n\tprivate readonly stores = new Set<IBackgroundTokenizationStore>();\n\n\tpublic setLineTokens(lineNumber: number, tokens: Uint32Array): void {\n\t\tconst b = new ContiguousMultilineTokensBuilder();\n\t\tb.add(lineNumber, tokens);\n\t\tfor (const s of this.stores) {\n\t\t\ts.setTokens(b.finalize());\n\t\t}\n\t}\n\n\tgetInitialState(): IState {\n\t\treturn new LineState(1);\n\t}\n\n\ttokenize(line: string, hasEOL: boolean, state: IState): TokenizationResult {\n\t\tthrow new Error();\n\t}\n\n\ttokenizeEncoded(line: string, hasEOL: boolean, state: IState): EncodedTokenizationResult {\n\t\tconst s = state as LineState;\n\t\treturn new EncodedTokenizationResult(this.tokens.get(s.lineNumber)!, new LineState(s.lineNumber + 1));\n\t}\n\n\t/**\n\t * Can be/return undefined if default background tokenization should be used.\n\t */\n\tcreateBackgroundTokenizer?(textModel: ITextModel, store: IBackgroundTokenizationStore): IBackgroundTokenizer | undefined {\n\t\tthis.stores.add(store);\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tthis.stores.delete(store);\n\t\t\t},\n\t\t\trequestTokens(startLineNumber, endLineNumberExclusive) {\n\t\t\t},\n\t\t};\n\t}\n}\n\nclass LineState implements IState {\n\tconstructor(public readonly lineNumber: number) { }\n\tclone(): IState {\n\t\treturn this;\n\t}\n\tequals(other: IState): boolean {\n\t\treturn (other as LineState).lineNumber === this.lineNumber;\n\t}\n}\n\nsuite('ModelLinesTokens', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tinterface IBufferLineState {\n\t\ttext: string;\n\t\ttokens: TestToken[];\n\t}\n\n\tinterface IEdit {\n\t\trange: Range;\n\t\ttext: string;\n\t}\n\n\tfunction testApplyEdits(initial: IBufferLineState[], edits: IEdit[], expected: IBufferLineState[]): void {\n\t\tconst initialText = initial.map(el => el.text).join('\\n');\n\n\t\tconst s = new ManualTokenizationSupport();\n\t\tconst d = TokenizationRegistry.register('test', s);\n\n\t\tconst model = createTextModel(initialText, 'test');\n\t\tmodel.onBeforeAttached();\n\t\tfor (let lineIndex = 0; lineIndex < initial.length; lineIndex++) {\n\t\t\tconst lineTokens = initial[lineIndex].tokens;\n\t\t\tconst lineTextLength = model.getLineMaxColumn(lineIndex + 1) - 1;\n\t\t\tconst tokens = TestToken.toTokens(lineTokens);\n\t\t\tLineTokens.convertToEndOffset(tokens, lineTextLength);\n\t\t\ts.setLineTokens(lineIndex + 1, tokens);\n\t\t}\n\n\t\tmodel.applyEdits(edits.map((ed) => ({\n\t\t\tidentifier: null,\n\t\t\trange: ed.range,\n\t\t\ttext: ed.text,\n\t\t\tforceMoveMarkers: false\n\t\t})));\n\n\t\tfor (let lineIndex = 0; lineIndex < expected.length; lineIndex++) {\n\t\t\tconst actualLine = model.getLineContent(lineIndex + 1);\n\t\t\tconst actualTokens = model.tokenization.getLineTokens(lineIndex + 1);\n\t\t\tassert.strictEqual(actualLine, expected[lineIndex].text);\n\t\t\tassertLineTokens(actualTokens, expected[lineIndex].tokens);\n\t\t}\n\n\t\tmodel.dispose();\n\t\td.dispose();\n\t}\n\n\ttest('single delete 1', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 1, 1, 2), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: 'ello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(4, 2), new TestToken(5, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single delete 2', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'helloworld',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 3, 1, 8), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: 'herld',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(2, 2)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single delete 3', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 1, 1, 6), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: ' world',\n\t\t\t\ttokens: [new TestToken(0, 2), new TestToken(1, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single delete 4', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 2, 1, 7), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: 'hworld',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(1, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single delete 5', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 1, 1, 12), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: '',\n\t\t\t\ttokens: [new TestToken(0, 1)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('multi delete 6', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 4), new TestToken(5, 5), new TestToken(6, 6)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 7), new TestToken(5, 8), new TestToken(6, 9)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 6, 3, 6), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 8), new TestToken(6, 9)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('multi delete 7', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 4), new TestToken(5, 5), new TestToken(6, 6)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 7), new TestToken(5, 8), new TestToken(6, 9)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 12, 3, 12), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('multi delete 8', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 4), new TestToken(5, 5), new TestToken(6, 6)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 7), new TestToken(5, 8), new TestToken(6, 9)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 1, 3, 1), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 7), new TestToken(5, 8), new TestToken(6, 9)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('multi delete 9', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 4), new TestToken(5, 5), new TestToken(6, 6)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 7), new TestToken(5, 8), new TestToken(6, 9)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 12, 3, 1), text: '' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello worldhello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3), new TestToken(11, 7), new TestToken(16, 8), new TestToken(17, 9)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single insert 1', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 1, 1, 1), text: 'xx' }],\n\t\t\t[{\n\t\t\t\ttext: 'xxhello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(7, 2), new TestToken(8, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single insert 2', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 2, 1, 2), text: 'xx' }],\n\t\t\t[{\n\t\t\t\ttext: 'hxxello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(7, 2), new TestToken(8, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single insert 3', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 6, 1, 6), text: 'xx' }],\n\t\t\t[{\n\t\t\t\ttext: 'helloxx world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(7, 2), new TestToken(8, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single insert 4', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 7, 1, 7), text: 'xx' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello xxworld',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(8, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('single insert 5', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 12, 1, 12), text: 'xx' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello worldxx',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('multi insert 6', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 1, 1, 1), text: '\\n' }],\n\t\t\t[{\n\t\t\t\ttext: '',\n\t\t\t\ttokens: [new TestToken(0, 1)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('multi insert 7', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 12, 1, 12), text: '\\n' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}, {\n\t\t\t\ttext: '',\n\t\t\t\ttokens: [new TestToken(0, 1)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('multi insert 8', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 7, 1, 7), text: '\\n' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello ',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2)]\n\t\t\t}, {\n\t\t\t\ttext: 'world',\n\t\t\t\ttokens: [new TestToken(0, 1)]\n\t\t\t}]\n\t\t);\n\t});\n\n\ttest('multi insert 9', () => {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2), new TestToken(6, 3)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 4), new TestToken(5, 5), new TestToken(6, 6)]\n\t\t\t}],\n\t\t\t[{ range: new Range(1, 7, 1, 7), text: 'xx\\nyy' }],\n\t\t\t[{\n\t\t\t\ttext: 'hello xx',\n\t\t\t\ttokens: [new TestToken(0, 1), new TestToken(5, 2)]\n\t\t\t}, {\n\t\t\t\ttext: 'yyworld',\n\t\t\t\ttokens: [new TestToken(0, 1)]\n\t\t\t}, {\n\t\t\t\ttext: 'hello world',\n\t\t\t\ttokens: [new TestToken(0, 4), new TestToken(5, 5), new TestToken(6, 6)]\n\t\t\t}]\n\t\t);\n\t});\n\n\tfunction testLineEditTokens(initialText: string, initialTokens: TestToken[], edits: ILineEdit[], expectedText: string, expectedTokens: TestToken[]): void {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: initialText,\n\t\t\t\ttokens: initialTokens\n\t\t\t}],\n\t\t\tedits.map((ed) => ({\n\t\t\t\trange: new Range(1, ed.startColumn, 1, ed.endColumn),\n\t\t\t\ttext: ed.text\n\t\t\t})),\n\t\t\t[{\n\t\t\t\ttext: expectedText,\n\t\t\t\ttokens: expectedTokens\n\t\t\t}]\n\t\t);\n\t}\n\n\ttest('insertion on empty line', () => {\n\t\tconst s = new ManualTokenizationSupport();\n\t\tconst d = TokenizationRegistry.register('test', s);\n\n\t\tconst model = createTextModel('some text', 'test');\n\t\tconst tokens = TestToken.toTokens([new TestToken(0, 1)]);\n\t\tLineTokens.convertToEndOffset(tokens, model.getLineMaxColumn(1) - 1);\n\t\ts.setLineTokens(1, tokens);\n\n\t\tmodel.applyEdits([{\n\t\t\trange: new Range(1, 1, 1, 10),\n\t\t\ttext: ''\n\t\t}]);\n\n\t\ts.setLineTokens(1, new Uint32Array(0));\n\n\t\tmodel.applyEdits([{\n\t\t\trange: new Range(1, 1, 1, 1),\n\t\t\ttext: 'a'\n\t\t}]);\n\n\t\tconst actualTokens = model.tokenization.getLineTokens(1);\n\t\tassertLineTokens(actualTokens, [new TestToken(0, 1)]);\n\n\t\tmodel.dispose();\n\t\td.dispose();\n\t});\n\n\ttest('updates tokens on insertion 1', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 1,\n\t\t\t\ttext: 'a',\n\t\t\t}],\n\t\t\t'aabcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(5, 2),\n\t\t\t\tnew TestToken(6, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 2', () => {\n\t\ttestLineEditTokens(\n\t\t\t'aabcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(5, 2),\n\t\t\t\tnew TestToken(6, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 2,\n\t\t\t\tendColumn: 2,\n\t\t\t\ttext: 'x',\n\t\t\t}],\n\t\t\t'axabcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(6, 2),\n\t\t\t\tnew TestToken(7, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 3', () => {\n\t\ttestLineEditTokens(\n\t\t\t'axabcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(6, 2),\n\t\t\t\tnew TestToken(7, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 3,\n\t\t\t\tendColumn: 3,\n\t\t\t\ttext: 'stu',\n\t\t\t}],\n\t\t\t'axstuabcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(9, 2),\n\t\t\t\tnew TestToken(10, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 4', () => {\n\t\ttestLineEditTokens(\n\t\t\t'axstuabcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(9, 2),\n\t\t\t\tnew TestToken(10, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 10,\n\t\t\t\tendColumn: 10,\n\t\t\t\ttext: '\\t',\n\t\t\t}],\n\t\t\t'axstuabcd\\t efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(10, 2),\n\t\t\t\tnew TestToken(11, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 5', () => {\n\t\ttestLineEditTokens(\n\t\t\t'axstuabcd\\t efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(10, 2),\n\t\t\t\tnew TestToken(11, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 12,\n\t\t\t\tendColumn: 12,\n\t\t\t\ttext: 'dd',\n\t\t\t}],\n\t\t\t'axstuabcd\\t ddefgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(10, 2),\n\t\t\t\tnew TestToken(13, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 6', () => {\n\t\ttestLineEditTokens(\n\t\t\t'axstuabcd\\t ddefgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(10, 2),\n\t\t\t\tnew TestToken(13, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 18,\n\t\t\t\tendColumn: 18,\n\t\t\t\ttext: 'xyz',\n\t\t\t}],\n\t\t\t'axstuabcd\\t ddefghxyz',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(10, 2),\n\t\t\t\tnew TestToken(13, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 7', () => {\n\t\ttestLineEditTokens(\n\t\t\t'axstuabcd\\t ddefghxyz',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(10, 2),\n\t\t\t\tnew TestToken(13, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 1,\n\t\t\t\ttext: 'x',\n\t\t\t}],\n\t\t\t'xaxstuabcd\\t ddefghxyz',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(11, 2),\n\t\t\t\tnew TestToken(14, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 8', () => {\n\t\ttestLineEditTokens(\n\t\t\t'xaxstuabcd\\t ddefghxyz',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(11, 2),\n\t\t\t\tnew TestToken(14, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 22,\n\t\t\t\tendColumn: 22,\n\t\t\t\ttext: 'x',\n\t\t\t}],\n\t\t\t'xaxstuabcd\\t ddefghxyzx',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(11, 2),\n\t\t\t\tnew TestToken(14, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 9', () => {\n\t\ttestLineEditTokens(\n\t\t\t'xaxstuabcd\\t ddefghxyzx',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(11, 2),\n\t\t\t\tnew TestToken(14, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 2,\n\t\t\t\tendColumn: 2,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'xaxstuabcd\\t ddefghxyzx',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(11, 2),\n\t\t\t\tnew TestToken(14, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on insertion 10', () => {\n\t\ttestLineEditTokens(\n\t\t\t'',\n\t\t\t[],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 1,\n\t\t\t\ttext: 'a',\n\t\t\t}],\n\t\t\t'a',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('delete second token 2', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcdefghij',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(3, 2),\n\t\t\t\tnew TestToken(6, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 4,\n\t\t\t\tendColumn: 7,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'abcghij',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(3, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('insert right before second token', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcdefghij',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(3, 2),\n\t\t\t\tnew TestToken(6, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 4,\n\t\t\t\tendColumn: 4,\n\t\t\t\ttext: 'hello',\n\t\t\t}],\n\t\t\t'abchellodefghij',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(8, 2),\n\t\t\t\tnew TestToken(11, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('delete first char', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 2,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'bcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(3, 2),\n\t\t\t\tnew TestToken(4, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('delete 2nd and 3rd chars', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 2,\n\t\t\t\tendColumn: 4,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'ad efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(2, 2),\n\t\t\t\tnew TestToken(3, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('delete first token', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 5,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t' efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 2),\n\t\t\t\tnew TestToken(1, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('delete second token', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 5,\n\t\t\t\tendColumn: 6,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'abcdefgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('delete second token + a bit of the third one', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 5,\n\t\t\t\tendColumn: 7,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'abcdfgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('delete second and third token', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 5,\n\t\t\t\tendColumn: 10,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'abcd',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('delete everything', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 10,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('noop', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 1,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('equivalent to deleting first two chars', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 3,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'cd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(2, 2),\n\t\t\t\tnew TestToken(3, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('equivalent to deleting from 5 to the end', () => {\n\t\ttestLineEditTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 5,\n\t\t\t\tendColumn: 10,\n\t\t\t\ttext: '',\n\t\t\t}],\n\t\t\t'abcd',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on replace 1', () => {\n\t\ttestLineEditTokens(\n\t\t\t'Hello world, ciao',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(5, 0),\n\t\t\t\tnew TestToken(6, 2),\n\t\t\t\tnew TestToken(11, 0),\n\t\t\t\tnew TestToken(13, 0)\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 6,\n\t\t\t\ttext: 'Hi',\n\t\t\t}],\n\t\t\t'Hi world, ciao',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 0),\n\t\t\t\tnew TestToken(3, 2),\n\t\t\t\tnew TestToken(8, 0),\n\t\t\t\tnew TestToken(10, 0),\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('updates tokens on replace 2', () => {\n\t\ttestLineEditTokens(\n\t\t\t'Hello world, ciao',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(5, 0),\n\t\t\t\tnew TestToken(6, 2),\n\t\t\t\tnew TestToken(11, 0),\n\t\t\t\tnew TestToken(13, 0),\n\t\t\t],\n\t\t\t[{\n\t\t\t\tstartColumn: 1,\n\t\t\t\tendColumn: 6,\n\t\t\t\ttext: 'Hi',\n\t\t\t}, {\n\t\t\t\tstartColumn: 8,\n\t\t\t\tendColumn: 12,\n\t\t\t\ttext: 'my friends',\n\t\t\t}],\n\t\t\t'Hi wmy friends, ciao',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 0),\n\t\t\t\tnew TestToken(3, 2),\n\t\t\t\tnew TestToken(14, 0),\n\t\t\t\tnew TestToken(16, 0),\n\t\t\t]\n\t\t);\n\t});\n\n\tfunction testLineSplitTokens(initialText: string, initialTokens: TestToken[], splitColumn: number, expectedText1: string, expectedText2: string, expectedTokens: TestToken[]): void {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: initialText,\n\t\t\t\ttokens: initialTokens\n\t\t\t}],\n\t\t\t[{\n\t\t\t\trange: new Range(1, splitColumn, 1, splitColumn),\n\t\t\t\ttext: '\\n'\n\t\t\t}],\n\t\t\t[{\n\t\t\t\ttext: expectedText1,\n\t\t\t\ttokens: expectedTokens\n\t\t\t}, {\n\t\t\t\ttext: expectedText2,\n\t\t\t\ttokens: [new TestToken(0, 1)]\n\t\t\t}]\n\t\t);\n\t}\n\n\ttest('split at the beginning', () => {\n\t\ttestLineSplitTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t1,\n\t\t\t'',\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('split at the end', () => {\n\t\ttestLineSplitTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t10,\n\t\t\t'abcd efgh',\n\t\t\t'',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('split inthe middle 1', () => {\n\t\ttestLineSplitTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t5,\n\t\t\t'abcd',\n\t\t\t' efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('split inthe middle 2', () => {\n\t\ttestLineSplitTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t6,\n\t\t\t'abcd ',\n\t\t\t'efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2)\n\t\t\t]\n\t\t);\n\t});\n\n\tfunction testLineAppendTokens(aText: string, aTokens: TestToken[], bText: string, bTokens: TestToken[], expectedText: string, expectedTokens: TestToken[]): void {\n\t\ttestApplyEdits(\n\t\t\t[{\n\t\t\t\ttext: aText,\n\t\t\t\ttokens: aTokens\n\t\t\t}, {\n\t\t\t\ttext: bText,\n\t\t\t\ttokens: bTokens\n\t\t\t}],\n\t\t\t[{\n\t\t\t\trange: new Range(1, aText.length + 1, 2, 1),\n\t\t\t\ttext: ''\n\t\t\t}],\n\t\t\t[{\n\t\t\t\ttext: expectedText,\n\t\t\t\ttokens: expectedTokens\n\t\t\t}]\n\t\t);\n\t}\n\n\ttest('append empty 1', () => {\n\t\ttestLineAppendTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t'',\n\t\t\t[],\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('append empty 2', () => {\n\t\ttestLineAppendTokens(\n\t\t\t'',\n\t\t\t[],\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('append 1', () => {\n\t\ttestLineAppendTokens(\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t],\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 4),\n\t\t\t\tnew TestToken(4, 5),\n\t\t\t\tnew TestToken(5, 6)\n\t\t\t],\n\t\t\t'abcd efghabcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3),\n\t\t\t\tnew TestToken(9, 4),\n\t\t\t\tnew TestToken(13, 5),\n\t\t\t\tnew TestToken(14, 6)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('append 2', () => {\n\t\ttestLineAppendTokens(\n\t\t\t'abcd ',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2)\n\t\t\t],\n\t\t\t'efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 3)\n\t\t\t],\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('append 3', () => {\n\t\ttestLineAppendTokens(\n\t\t\t'abcd',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t],\n\t\t\t' efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 2),\n\t\t\t\tnew TestToken(1, 3)\n\t\t\t],\n\t\t\t'abcd efgh',\n\t\t\t[\n\t\t\t\tnew TestToken(0, 1),\n\t\t\t\tnew TestToken(4, 2),\n\t\t\t\tnew TestToken(5, 3)\n\t\t\t]\n\t\t);\n\t});\n});\n"]}