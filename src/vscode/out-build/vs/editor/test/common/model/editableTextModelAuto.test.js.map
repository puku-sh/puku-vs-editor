{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/test/common/model/editableTextModelAuto.test.ts","vs/editor/test/common/model/editableTextModelAuto.test.ts"],"names":[],"mappings":"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","file":"editableTextModelAuto.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CharCode } from '../../../../base/common/charCode.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { ISingleEditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { testApplyEditsWithSyncedModels } from './editableTextModelTestUtils.js';\n\nconst GENERATE_TESTS = false;\n\nsuite('EditorModel Auto Tests', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction editOp(startLineNumber: number, startColumn: number, endLineNumber: number, endColumn: number, text: string[]): ISingleEditOperation {\n\t\treturn {\n\t\t\trange: new Range(startLineNumber, startColumn, endLineNumber, endColumn),\n\t\t\ttext: text.join('\\n'),\n\t\t\tforceMoveMarkers: false\n\t\t};\n\t}\n\n\ttest('auto1', () => {\n\t\ttestApplyEditsWithSyncedModels(\n\t\t\t[\n\t\t\t\t'ioe',\n\t\t\t\t'',\n\t\t\t\t'yjct',\n\t\t\t\t'',\n\t\t\t\t'',\n\t\t\t],\n\t\t\t[\n\t\t\t\teditOp(1, 2, 1, 2, ['b', 'r', 'fq']),\n\t\t\t\teditOp(1, 4, 2, 1, ['', '']),\n\t\t\t],\n\t\t\t[\n\t\t\t\t'ib',\n\t\t\t\t'r',\n\t\t\t\t'fqoe',\n\t\t\t\t'',\n\t\t\t\t'yjct',\n\t\t\t\t'',\n\t\t\t\t'',\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('auto2', () => {\n\t\ttestApplyEditsWithSyncedModels(\n\t\t\t[\n\t\t\t\t'f',\n\t\t\t\t'littnhskrq',\n\t\t\t\t'utxvsizqnk',\n\t\t\t\t'lslqz',\n\t\t\t\t'jxn',\n\t\t\t\t'gmm',\n\t\t\t],\n\t\t\t[\n\t\t\t\teditOp(1, 2, 1, 2, ['', 'o']),\n\t\t\t\teditOp(2, 4, 2, 4, ['zaq', 'avb']),\n\t\t\t\teditOp(2, 5, 6, 2, ['jlr', 'zl', 'j']),\n\t\t\t],\n\t\t\t[\n\t\t\t\t'f',\n\t\t\t\t'o',\n\t\t\t\t'litzaq',\n\t\t\t\t'avbtjlr',\n\t\t\t\t'zl',\n\t\t\t\t'jmm',\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('auto3', () => {\n\t\ttestApplyEditsWithSyncedModels(\n\t\t\t[\n\t\t\t\t'ofw',\n\t\t\t\t'qsxmziuvzw',\n\t\t\t\t'rp',\n\t\t\t\t'qsnymek',\n\t\t\t\t'elth',\n\t\t\t\t'wmgzbwudxz',\n\t\t\t\t'iwsdkndh',\n\t\t\t\t'bujlbwb',\n\t\t\t\t'asuouxfv',\n\t\t\t\t'xuccnb',\n\t\t\t],\n\t\t\t[\n\t\t\t\teditOp(4, 3, 4, 3, ['']),\n\t\t\t],\n\t\t\t[\n\t\t\t\t'ofw',\n\t\t\t\t'qsxmziuvzw',\n\t\t\t\t'rp',\n\t\t\t\t'qsnymek',\n\t\t\t\t'elth',\n\t\t\t\t'wmgzbwudxz',\n\t\t\t\t'iwsdkndh',\n\t\t\t\t'bujlbwb',\n\t\t\t\t'asuouxfv',\n\t\t\t\t'xuccnb',\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('auto4', () => {\n\t\ttestApplyEditsWithSyncedModels(\n\t\t\t[\n\t\t\t\t'fefymj',\n\t\t\t\t'qum',\n\t\t\t\t'vmiwxxaiqq',\n\t\t\t\t'dz',\n\t\t\t\t'lnqdgorosf',\n\t\t\t],\n\t\t\t[\n\t\t\t\teditOp(1, 3, 1, 5, ['hp']),\n\t\t\t\teditOp(1, 7, 2, 1, ['kcg', '', 'mpx']),\n\t\t\t\teditOp(2, 2, 2, 2, ['', 'aw', '']),\n\t\t\t\teditOp(2, 2, 2, 2, ['vqr', 'mo']),\n\t\t\t\teditOp(4, 2, 5, 3, ['xyc']),\n\t\t\t],\n\t\t\t[\n\t\t\t\t'fehpmjkcg',\n\t\t\t\t'',\n\t\t\t\t'mpxq',\n\t\t\t\t'aw',\n\t\t\t\t'vqr',\n\t\t\t\t'moum',\n\t\t\t\t'vmiwxxaiqq',\n\t\t\t\t'dxycqdgorosf',\n\t\t\t]\n\t\t);\n\t});\n});\n\nfunction getRandomInt(min: number, max: number): number {\n\treturn Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction getRandomString(minLength: number, maxLength: number): string {\n\tconst length = getRandomInt(minLength, maxLength);\n\tlet r = '';\n\tfor (let i = 0; i < length; i++) {\n\t\tr += String.fromCharCode(getRandomInt(CharCode.a, CharCode.z));\n\t}\n\treturn r;\n}\n\nfunction generateFile(small: boolean): string {\n\tconst lineCount = getRandomInt(1, small ? 3 : 10);\n\tconst lines: string[] = [];\n\tfor (let i = 0; i < lineCount; i++) {\n\t\tlines.push(getRandomString(0, small ? 3 : 10));\n\t}\n\treturn lines.join('\\n');\n}\n\nfunction generateEdits(content: string): ITestModelEdit[] {\n\n\tconst result: ITestModelEdit[] = [];\n\tlet cnt = getRandomInt(1, 5);\n\n\tlet maxOffset = content.length;\n\n\twhile (cnt > 0 && maxOffset > 0) {\n\n\t\tconst offset = getRandomInt(0, maxOffset);\n\t\tconst length = getRandomInt(0, maxOffset - offset);\n\t\tconst text = generateFile(true);\n\n\t\tresult.push({\n\t\t\toffset: offset,\n\t\t\tlength: length,\n\t\t\ttext: text\n\t\t});\n\n\t\tmaxOffset = offset;\n\t\tcnt--;\n\t}\n\n\tresult.reverse();\n\n\treturn result;\n}\n\ninterface ITestModelEdit {\n\toffset: number;\n\tlength: number;\n\ttext: string;\n}\n\nclass TestModel {\n\n\tpublic initialContent: string;\n\tpublic resultingContent: string;\n\tpublic edits: ISingleEditOperation[];\n\n\tprivate static _generateOffsetToPosition(content: string): Position[] {\n\t\tconst result: Position[] = [];\n\t\tlet lineNumber = 1;\n\t\tlet column = 1;\n\n\t\tfor (let offset = 0, len = content.length; offset <= len; offset++) {\n\t\t\tconst ch = content.charAt(offset);\n\n\t\t\tresult[offset] = new Position(lineNumber, column);\n\n\t\t\tif (ch === '\\n') {\n\t\t\t\tlineNumber++;\n\t\t\t\tcolumn = 1;\n\t\t\t} else {\n\t\t\t\tcolumn++;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tconstructor() {\n\t\tthis.initialContent = generateFile(false);\n\n\t\tconst edits = generateEdits(this.initialContent);\n\n\t\tconst offsetToPosition = TestModel._generateOffsetToPosition(this.initialContent);\n\t\tthis.edits = [];\n\t\tfor (const edit of edits) {\n\t\t\tconst startPosition = offsetToPosition[edit.offset];\n\t\t\tconst endPosition = offsetToPosition[edit.offset + edit.length];\n\t\t\tthis.edits.push({\n\t\t\t\trange: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\n\t\t\t\ttext: edit.text\n\t\t\t});\n\t\t}\n\n\t\tthis.resultingContent = this.initialContent;\n\t\tfor (let i = edits.length - 1; i >= 0; i--) {\n\t\t\tthis.resultingContent = (\n\t\t\t\tthis.resultingContent.substring(0, edits[i].offset) +\n\t\t\t\tedits[i].text +\n\t\t\t\tthis.resultingContent.substring(edits[i].offset + edits[i].length)\n\t\t\t);\n\t\t}\n\t}\n\n\tpublic print(): string {\n\t\tlet r: string[] = [];\n\t\tr.push('testApplyEditsWithSyncedModels(');\n\t\tr.push('\\t[');\n\t\tconst initialLines = this.initialContent.split('\\n');\n\t\tr = r.concat(initialLines.map((i) => `\\t\\t'${i}',`));\n\t\tr.push('\\t],');\n\t\tr.push('\\t[');\n\t\tr = r.concat(this.edits.map((i) => {\n\t\t\tconst text = `['` + i.text!.split('\\n').join(`', '`) + `']`;\n\t\t\treturn `\\t\\teditOp(${i.range.startLineNumber}, ${i.range.startColumn}, ${i.range.endLineNumber}, ${i.range.endColumn}, ${text}),`;\n\t\t}));\n\t\tr.push('\\t],');\n\t\tr.push('\\t[');\n\t\tconst resultLines = this.resultingContent.split('\\n');\n\t\tr = r.concat(resultLines.map((i) => `\\t\\t'${i}',`));\n\t\tr.push('\\t]');\n\t\tr.push(');');\n\n\t\treturn r.join('\\n');\n\t}\n}\n\nif (GENERATE_TESTS) {\n\tlet number = 1;\n\twhile (true) {\n\n\t\tconsole.log('------BEGIN NEW TEST: ' + number);\n\n\t\tconst testModel = new TestModel();\n\n\t\t// console.log(testModel.print());\n\n\t\tconsole.log('------END NEW TEST: ' + (number++));\n\n\t\ttry {\n\t\t\ttestApplyEditsWithSyncedModels(\n\t\t\t\ttestModel.initialContent.split('\\n'),\n\t\t\t\ttestModel.edits,\n\t\t\t\ttestModel.resultingContent.split('\\n')\n\t\t\t);\n\t\t\t// throw new Error('a');\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\tconsole.log(testModel.print());\n\t\t\tbreak;\n\t\t}\n\n\t\t// break;\n\t}\n\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CharCode } from '../../../../base/common/charCode.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { ISingleEditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { testApplyEditsWithSyncedModels } from './editableTextModelTestUtils.js';\n\nconst GENERATE_TESTS = false;\n\nsuite('EditorModel Auto Tests', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction editOp(startLineNumber: number, startColumn: number, endLineNumber: number, endColumn: number, text: string[]): ISingleEditOperation {\n\t\treturn {\n\t\t\trange: new Range(startLineNumber, startColumn, endLineNumber, endColumn),\n\t\t\ttext: text.join('\\n'),\n\t\t\tforceMoveMarkers: false\n\t\t};\n\t}\n\n\ttest('auto1', () => {\n\t\ttestApplyEditsWithSyncedModels(\n\t\t\t[\n\t\t\t\t'ioe',\n\t\t\t\t'',\n\t\t\t\t'yjct',\n\t\t\t\t'',\n\t\t\t\t'',\n\t\t\t],\n\t\t\t[\n\t\t\t\teditOp(1, 2, 1, 2, ['b', 'r', 'fq']),\n\t\t\t\teditOp(1, 4, 2, 1, ['', '']),\n\t\t\t],\n\t\t\t[\n\t\t\t\t'ib',\n\t\t\t\t'r',\n\t\t\t\t'fqoe',\n\t\t\t\t'',\n\t\t\t\t'yjct',\n\t\t\t\t'',\n\t\t\t\t'',\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('auto2', () => {\n\t\ttestApplyEditsWithSyncedModels(\n\t\t\t[\n\t\t\t\t'f',\n\t\t\t\t'littnhskrq',\n\t\t\t\t'utxvsizqnk',\n\t\t\t\t'lslqz',\n\t\t\t\t'jxn',\n\t\t\t\t'gmm',\n\t\t\t],\n\t\t\t[\n\t\t\t\teditOp(1, 2, 1, 2, ['', 'o']),\n\t\t\t\teditOp(2, 4, 2, 4, ['zaq', 'avb']),\n\t\t\t\teditOp(2, 5, 6, 2, ['jlr', 'zl', 'j']),\n\t\t\t],\n\t\t\t[\n\t\t\t\t'f',\n\t\t\t\t'o',\n\t\t\t\t'litzaq',\n\t\t\t\t'avbtjlr',\n\t\t\t\t'zl',\n\t\t\t\t'jmm',\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('auto3', () => {\n\t\ttestApplyEditsWithSyncedModels(\n\t\t\t[\n\t\t\t\t'ofw',\n\t\t\t\t'qsxmziuvzw',\n\t\t\t\t'rp',\n\t\t\t\t'qsnymek',\n\t\t\t\t'elth',\n\t\t\t\t'wmgzbwudxz',\n\t\t\t\t'iwsdkndh',\n\t\t\t\t'bujlbwb',\n\t\t\t\t'asuouxfv',\n\t\t\t\t'xuccnb',\n\t\t\t],\n\t\t\t[\n\t\t\t\teditOp(4, 3, 4, 3, ['']),\n\t\t\t],\n\t\t\t[\n\t\t\t\t'ofw',\n\t\t\t\t'qsxmziuvzw',\n\t\t\t\t'rp',\n\t\t\t\t'qsnymek',\n\t\t\t\t'elth',\n\t\t\t\t'wmgzbwudxz',\n\t\t\t\t'iwsdkndh',\n\t\t\t\t'bujlbwb',\n\t\t\t\t'asuouxfv',\n\t\t\t\t'xuccnb',\n\t\t\t]\n\t\t);\n\t});\n\n\ttest('auto4', () => {\n\t\ttestApplyEditsWithSyncedModels(\n\t\t\t[\n\t\t\t\t'fefymj',\n\t\t\t\t'qum',\n\t\t\t\t'vmiwxxaiqq',\n\t\t\t\t'dz',\n\t\t\t\t'lnqdgorosf',\n\t\t\t],\n\t\t\t[\n\t\t\t\teditOp(1, 3, 1, 5, ['hp']),\n\t\t\t\teditOp(1, 7, 2, 1, ['kcg', '', 'mpx']),\n\t\t\t\teditOp(2, 2, 2, 2, ['', 'aw', '']),\n\t\t\t\teditOp(2, 2, 2, 2, ['vqr', 'mo']),\n\t\t\t\teditOp(4, 2, 5, 3, ['xyc']),\n\t\t\t],\n\t\t\t[\n\t\t\t\t'fehpmjkcg',\n\t\t\t\t'',\n\t\t\t\t'mpxq',\n\t\t\t\t'aw',\n\t\t\t\t'vqr',\n\t\t\t\t'moum',\n\t\t\t\t'vmiwxxaiqq',\n\t\t\t\t'dxycqdgorosf',\n\t\t\t]\n\t\t);\n\t});\n});\n\nfunction getRandomInt(min: number, max: number): number {\n\treturn Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction getRandomString(minLength: number, maxLength: number): string {\n\tconst length = getRandomInt(minLength, maxLength);\n\tlet r = '';\n\tfor (let i = 0; i < length; i++) {\n\t\tr += String.fromCharCode(getRandomInt(CharCode.a, CharCode.z));\n\t}\n\treturn r;\n}\n\nfunction generateFile(small: boolean): string {\n\tconst lineCount = getRandomInt(1, small ? 3 : 10);\n\tconst lines: string[] = [];\n\tfor (let i = 0; i < lineCount; i++) {\n\t\tlines.push(getRandomString(0, small ? 3 : 10));\n\t}\n\treturn lines.join('\\n');\n}\n\nfunction generateEdits(content: string): ITestModelEdit[] {\n\n\tconst result: ITestModelEdit[] = [];\n\tlet cnt = getRandomInt(1, 5);\n\n\tlet maxOffset = content.length;\n\n\twhile (cnt > 0 && maxOffset > 0) {\n\n\t\tconst offset = getRandomInt(0, maxOffset);\n\t\tconst length = getRandomInt(0, maxOffset - offset);\n\t\tconst text = generateFile(true);\n\n\t\tresult.push({\n\t\t\toffset: offset,\n\t\t\tlength: length,\n\t\t\ttext: text\n\t\t});\n\n\t\tmaxOffset = offset;\n\t\tcnt--;\n\t}\n\n\tresult.reverse();\n\n\treturn result;\n}\n\ninterface ITestModelEdit {\n\toffset: number;\n\tlength: number;\n\ttext: string;\n}\n\nclass TestModel {\n\n\tpublic initialContent: string;\n\tpublic resultingContent: string;\n\tpublic edits: ISingleEditOperation[];\n\n\tprivate static _generateOffsetToPosition(content: string): Position[] {\n\t\tconst result: Position[] = [];\n\t\tlet lineNumber = 1;\n\t\tlet column = 1;\n\n\t\tfor (let offset = 0, len = content.length; offset <= len; offset++) {\n\t\t\tconst ch = content.charAt(offset);\n\n\t\t\tresult[offset] = new Position(lineNumber, column);\n\n\t\t\tif (ch === '\\n') {\n\t\t\t\tlineNumber++;\n\t\t\t\tcolumn = 1;\n\t\t\t} else {\n\t\t\t\tcolumn++;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tconstructor() {\n\t\tthis.initialContent = generateFile(false);\n\n\t\tconst edits = generateEdits(this.initialContent);\n\n\t\tconst offsetToPosition = TestModel._generateOffsetToPosition(this.initialContent);\n\t\tthis.edits = [];\n\t\tfor (const edit of edits) {\n\t\t\tconst startPosition = offsetToPosition[edit.offset];\n\t\t\tconst endPosition = offsetToPosition[edit.offset + edit.length];\n\t\t\tthis.edits.push({\n\t\t\t\trange: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\n\t\t\t\ttext: edit.text\n\t\t\t});\n\t\t}\n\n\t\tthis.resultingContent = this.initialContent;\n\t\tfor (let i = edits.length - 1; i >= 0; i--) {\n\t\t\tthis.resultingContent = (\n\t\t\t\tthis.resultingContent.substring(0, edits[i].offset) +\n\t\t\t\tedits[i].text +\n\t\t\t\tthis.resultingContent.substring(edits[i].offset + edits[i].length)\n\t\t\t);\n\t\t}\n\t}\n\n\tpublic print(): string {\n\t\tlet r: string[] = [];\n\t\tr.push('testApplyEditsWithSyncedModels(');\n\t\tr.push('\\t[');\n\t\tconst initialLines = this.initialContent.split('\\n');\n\t\tr = r.concat(initialLines.map((i) => `\\t\\t'${i}',`));\n\t\tr.push('\\t],');\n\t\tr.push('\\t[');\n\t\tr = r.concat(this.edits.map((i) => {\n\t\t\tconst text = `['` + i.text!.split('\\n').join(`', '`) + `']`;\n\t\t\treturn `\\t\\teditOp(${i.range.startLineNumber}, ${i.range.startColumn}, ${i.range.endLineNumber}, ${i.range.endColumn}, ${text}),`;\n\t\t}));\n\t\tr.push('\\t],');\n\t\tr.push('\\t[');\n\t\tconst resultLines = this.resultingContent.split('\\n');\n\t\tr = r.concat(resultLines.map((i) => `\\t\\t'${i}',`));\n\t\tr.push('\\t]');\n\t\tr.push(');');\n\n\t\treturn r.join('\\n');\n\t}\n}\n\nif (GENERATE_TESTS) {\n\tlet number = 1;\n\twhile (true) {\n\n\t\tconsole.log('------BEGIN NEW TEST: ' + number);\n\n\t\tconst testModel = new TestModel();\n\n\t\t// console.log(testModel.print());\n\n\t\tconsole.log('------END NEW TEST: ' + (number++));\n\n\t\ttry {\n\t\t\ttestApplyEditsWithSyncedModels(\n\t\t\t\ttestModel.initialContent.split('\\n'),\n\t\t\t\ttestModel.edits,\n\t\t\t\ttestModel.resultingContent.split('\\n')\n\t\t\t);\n\t\t\t// throw new Error('a');\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\tconsole.log(testModel.print());\n\t\t\tbreak;\n\t\t}\n\n\t\t// break;\n\t}\n\n}\n"]}