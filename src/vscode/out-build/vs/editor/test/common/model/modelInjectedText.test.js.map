{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/test/common/model/modelInjectedText.test.ts","vs/editor/test/common/model/modelInjectedText.test.ts"],"names":[],"mappings":"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","file":"modelInjectedText.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { InternalModelContentChangeEvent, LineInjectedText, ModelRawChange, RawContentChangedType } from '../../../common/textModelEvents.js';\nimport { createTextModel } from '../testTextModel.js';\n\nsuite('Editor Model - Injected Text Events', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('Basic', () => {\n\t\tconst thisModel = store.add(createTextModel('First Line\\nSecond Line'));\n\n\t\tconst recordedChanges = new Array<unknown>();\n\n\t\tstore.add(thisModel.onDidChangeContentOrInjectedText((e) => {\n\t\t\tconst changes = (e instanceof InternalModelContentChangeEvent ? e.rawContentChangedEvent.changes : e.changes);\n\t\t\tfor (const change of changes) {\n\t\t\t\trecordedChanges.push(mapChange(change));\n\t\t\t}\n\t\t}));\n\n\t\t// Initial decoration\n\t\tlet decorations = thisModel.deltaDecorations([], [{\n\t\t\toptions: {\n\t\t\t\tafter: { content: 'injected1' },\n\t\t\t\tdescription: 'test1',\n\t\t\t\tshowIfCollapsed: true\n\t\t\t},\n\t\t\trange: new Range(1, 1, 1, 1),\n\t\t}]);\n\t\tassert.deepStrictEqual(recordedChanges.splice(0), [\n\t\t\t{\n\t\t\t\tkind: 'lineChanged',\n\t\t\t\tline: '[injected1]First Line',\n\t\t\t\tlineNumber: 1,\n\t\t\t}\n\t\t]);\n\n\t\t// Decoration change\n\t\tdecorations = thisModel.deltaDecorations(decorations, [{\n\t\t\toptions: {\n\t\t\t\tafter: { content: 'injected1' },\n\t\t\t\tdescription: 'test1',\n\t\t\t\tshowIfCollapsed: true\n\t\t\t},\n\t\t\trange: new Range(2, 1, 2, 1),\n\t\t}, {\n\t\t\toptions: {\n\t\t\t\tafter: { content: 'injected2' },\n\t\t\t\tdescription: 'test2',\n\t\t\t\tshowIfCollapsed: true\n\t\t\t},\n\t\t\trange: new Range(2, 2, 2, 2),\n\t\t}]);\n\t\tassert.deepStrictEqual(recordedChanges.splice(0), [\n\t\t\t{\n\t\t\t\tkind: 'lineChanged',\n\t\t\t\tline: 'First Line',\n\t\t\t\tlineNumber: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkind: 'lineChanged',\n\t\t\t\tline: '[injected1]S[injected2]econd Line',\n\t\t\t\tlineNumber: 2,\n\t\t\t}\n\t\t]);\n\n\t\t// Simple Insert\n\t\tthisModel.applyEdits([EditOperation.replace(new Range(2, 2, 2, 2), 'Hello')]);\n\t\tassert.deepStrictEqual(recordedChanges.splice(0), [\n\t\t\t{\n\t\t\t\tkind: 'lineChanged',\n\t\t\t\tline: '[injected1]SHello[injected2]econd Line',\n\t\t\t\tlineNumber: 2,\n\t\t\t}\n\t\t]);\n\n\t\t// Multi-Line Insert\n\t\tthisModel.pushEditOperations(null, [EditOperation.replace(new Range(2, 2, 2, 2), '\\n\\n\\n')], null);\n\t\tassert.deepStrictEqual(thisModel.getAllDecorations(undefined).map(d => ({ description: d.options.description, range: d.range.toString() })), [{\n\t\t\t'description': 'test1',\n\t\t\t'range': '[2,1 -> 2,1]'\n\t\t},\n\t\t{\n\t\t\t'description': 'test2',\n\t\t\t'range': '[2,2 -> 5,6]'\n\t\t}]);\n\t\tassert.deepStrictEqual(recordedChanges.splice(0), [\n\t\t\t{\n\t\t\t\tkind: 'lineChanged',\n\t\t\t\tline: '[injected1]S',\n\t\t\t\tlineNumber: 2,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfromLineNumber: 3,\n\t\t\t\tkind: 'linesInserted',\n\t\t\t\tlines: [\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'Hello[injected2]econd Line',\n\t\t\t\t]\n\t\t\t}\n\t\t]);\n\n\n\t\t// Multi-Line Replace\n\t\tthisModel.pushEditOperations(null, [EditOperation.replace(new Range(3, 1, 5, 1), '\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n')], null);\n\t\tassert.deepStrictEqual(recordedChanges.splice(0), [\n\t\t\t{\n\t\t\t\t'kind': 'lineChanged',\n\t\t\t\t'line': '',\n\t\t\t\t'lineNumber': 5,\n\t\t\t},\n\t\t\t{\n\t\t\t\t'kind': 'lineChanged',\n\t\t\t\t'line': '',\n\t\t\t\t'lineNumber': 4,\n\t\t\t},\n\t\t\t{\n\t\t\t\t'kind': 'lineChanged',\n\t\t\t\t'line': '',\n\t\t\t\t'lineNumber': 3,\n\t\t\t},\n\t\t\t{\n\t\t\t\t'fromLineNumber': 6,\n\t\t\t\t'kind': 'linesInserted',\n\t\t\t\t'lines': [\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'Hello[injected2]econd Line',\n\t\t\t\t]\n\t\t\t}\n\t\t]);\n\n\t\t// Multi-Line Replace undo\n\t\tassert.strictEqual(thisModel.undo(), undefined);\n\t\tassert.deepStrictEqual(recordedChanges.splice(0), [\n\t\t\t{\n\t\t\t\tkind: 'lineChanged',\n\t\t\t\tline: '[injected1]SHello[injected2]econd Line',\n\t\t\t\tlineNumber: 2,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkind: 'linesDeleted',\n\t\t\t}\n\t\t]);\n\t});\n});\n\nfunction mapChange(change: ModelRawChange): unknown {\n\tif (change.changeType === RawContentChangedType.LineChanged) {\n\t\t(change.injectedText || []).every(e => {\n\t\t\tassert.deepStrictEqual(e.lineNumber, change.lineNumber);\n\t\t});\n\n\t\treturn {\n\t\t\tkind: 'lineChanged',\n\t\t\tline: getDetail(change.detail, change.injectedText),\n\t\t\tlineNumber: change.lineNumber,\n\t\t};\n\t} else if (change.changeType === RawContentChangedType.LinesInserted) {\n\t\treturn {\n\t\t\tkind: 'linesInserted',\n\t\t\tlines: change.detail.map((e, idx) => getDetail(e, change.injectedTexts[idx])),\n\t\t\tfromLineNumber: change.fromLineNumber\n\t\t};\n\t} else if (change.changeType === RawContentChangedType.LinesDeleted) {\n\t\treturn {\n\t\t\tkind: 'linesDeleted',\n\t\t};\n\t} else if (change.changeType === RawContentChangedType.EOLChanged) {\n\t\treturn {\n\t\t\tkind: 'eolChanged'\n\t\t};\n\t} else if (change.changeType === RawContentChangedType.Flush) {\n\t\treturn {\n\t\t\tkind: 'flush'\n\t\t};\n\t}\n\treturn { kind: 'unknown' };\n}\n\nfunction getDetail(line: string, injectedTexts: LineInjectedText[] | null): string {\n\treturn LineInjectedText.applyInjectedText(line, (injectedTexts || []).map(t => t.withText(`[${t.options.content}]`)));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { InternalModelContentChangeEvent, LineInjectedText, ModelRawChange, RawContentChangedType } from '../../../common/textModelEvents.js';\nimport { createTextModel } from '../testTextModel.js';\n\nsuite('Editor Model - Injected Text Events', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('Basic', () => {\n\t\tconst thisModel = store.add(createTextModel('First Line\\nSecond Line'));\n\n\t\tconst recordedChanges = new Array<unknown>();\n\n\t\tstore.add(thisModel.onDidChangeContentOrInjectedText((e) => {\n\t\t\tconst changes = (e instanceof InternalModelContentChangeEvent ? e.rawContentChangedEvent.changes : e.changes);\n\t\t\tfor (const change of changes) {\n\t\t\t\trecordedChanges.push(mapChange(change));\n\t\t\t}\n\t\t}));\n\n\t\t// Initial decoration\n\t\tlet decorations = thisModel.deltaDecorations([], [{\n\t\t\toptions: {\n\t\t\t\tafter: { content: 'injected1' },\n\t\t\t\tdescription: 'test1',\n\t\t\t\tshowIfCollapsed: true\n\t\t\t},\n\t\t\trange: new Range(1, 1, 1, 1),\n\t\t}]);\n\t\tassert.deepStrictEqual(recordedChanges.splice(0), [\n\t\t\t{\n\t\t\t\tkind: 'lineChanged',\n\t\t\t\tline: '[injected1]First Line',\n\t\t\t\tlineNumber: 1,\n\t\t\t}\n\t\t]);\n\n\t\t// Decoration change\n\t\tdecorations = thisModel.deltaDecorations(decorations, [{\n\t\t\toptions: {\n\t\t\t\tafter: { content: 'injected1' },\n\t\t\t\tdescription: 'test1',\n\t\t\t\tshowIfCollapsed: true\n\t\t\t},\n\t\t\trange: new Range(2, 1, 2, 1),\n\t\t}, {\n\t\t\toptions: {\n\t\t\t\tafter: { content: 'injected2' },\n\t\t\t\tdescription: 'test2',\n\t\t\t\tshowIfCollapsed: true\n\t\t\t},\n\t\t\trange: new Range(2, 2, 2, 2),\n\t\t}]);\n\t\tassert.deepStrictEqual(recordedChanges.splice(0), [\n\t\t\t{\n\t\t\t\tkind: 'lineChanged',\n\t\t\t\tline: 'First Line',\n\t\t\t\tlineNumber: 1,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkind: 'lineChanged',\n\t\t\t\tline: '[injected1]S[injected2]econd Line',\n\t\t\t\tlineNumber: 2,\n\t\t\t}\n\t\t]);\n\n\t\t// Simple Insert\n\t\tthisModel.applyEdits([EditOperation.replace(new Range(2, 2, 2, 2), 'Hello')]);\n\t\tassert.deepStrictEqual(recordedChanges.splice(0), [\n\t\t\t{\n\t\t\t\tkind: 'lineChanged',\n\t\t\t\tline: '[injected1]SHello[injected2]econd Line',\n\t\t\t\tlineNumber: 2,\n\t\t\t}\n\t\t]);\n\n\t\t// Multi-Line Insert\n\t\tthisModel.pushEditOperations(null, [EditOperation.replace(new Range(2, 2, 2, 2), '\\n\\n\\n')], null);\n\t\tassert.deepStrictEqual(thisModel.getAllDecorations(undefined).map(d => ({ description: d.options.description, range: d.range.toString() })), [{\n\t\t\t'description': 'test1',\n\t\t\t'range': '[2,1 -> 2,1]'\n\t\t},\n\t\t{\n\t\t\t'description': 'test2',\n\t\t\t'range': '[2,2 -> 5,6]'\n\t\t}]);\n\t\tassert.deepStrictEqual(recordedChanges.splice(0), [\n\t\t\t{\n\t\t\t\tkind: 'lineChanged',\n\t\t\t\tline: '[injected1]S',\n\t\t\t\tlineNumber: 2,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfromLineNumber: 3,\n\t\t\t\tkind: 'linesInserted',\n\t\t\t\tlines: [\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'Hello[injected2]econd Line',\n\t\t\t\t]\n\t\t\t}\n\t\t]);\n\n\n\t\t// Multi-Line Replace\n\t\tthisModel.pushEditOperations(null, [EditOperation.replace(new Range(3, 1, 5, 1), '\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n')], null);\n\t\tassert.deepStrictEqual(recordedChanges.splice(0), [\n\t\t\t{\n\t\t\t\t'kind': 'lineChanged',\n\t\t\t\t'line': '',\n\t\t\t\t'lineNumber': 5,\n\t\t\t},\n\t\t\t{\n\t\t\t\t'kind': 'lineChanged',\n\t\t\t\t'line': '',\n\t\t\t\t'lineNumber': 4,\n\t\t\t},\n\t\t\t{\n\t\t\t\t'kind': 'lineChanged',\n\t\t\t\t'line': '',\n\t\t\t\t'lineNumber': 3,\n\t\t\t},\n\t\t\t{\n\t\t\t\t'fromLineNumber': 6,\n\t\t\t\t'kind': 'linesInserted',\n\t\t\t\t'lines': [\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'',\n\t\t\t\t\t'Hello[injected2]econd Line',\n\t\t\t\t]\n\t\t\t}\n\t\t]);\n\n\t\t// Multi-Line Replace undo\n\t\tassert.strictEqual(thisModel.undo(), undefined);\n\t\tassert.deepStrictEqual(recordedChanges.splice(0), [\n\t\t\t{\n\t\t\t\tkind: 'lineChanged',\n\t\t\t\tline: '[injected1]SHello[injected2]econd Line',\n\t\t\t\tlineNumber: 2,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkind: 'linesDeleted',\n\t\t\t}\n\t\t]);\n\t});\n});\n\nfunction mapChange(change: ModelRawChange): unknown {\n\tif (change.changeType === RawContentChangedType.LineChanged) {\n\t\t(change.injectedText || []).every(e => {\n\t\t\tassert.deepStrictEqual(e.lineNumber, change.lineNumber);\n\t\t});\n\n\t\treturn {\n\t\t\tkind: 'lineChanged',\n\t\t\tline: getDetail(change.detail, change.injectedText),\n\t\t\tlineNumber: change.lineNumber,\n\t\t};\n\t} else if (change.changeType === RawContentChangedType.LinesInserted) {\n\t\treturn {\n\t\t\tkind: 'linesInserted',\n\t\t\tlines: change.detail.map((e, idx) => getDetail(e, change.injectedTexts[idx])),\n\t\t\tfromLineNumber: change.fromLineNumber\n\t\t};\n\t} else if (change.changeType === RawContentChangedType.LinesDeleted) {\n\t\treturn {\n\t\t\tkind: 'linesDeleted',\n\t\t};\n\t} else if (change.changeType === RawContentChangedType.EOLChanged) {\n\t\treturn {\n\t\t\tkind: 'eolChanged'\n\t\t};\n\t} else if (change.changeType === RawContentChangedType.Flush) {\n\t\treturn {\n\t\t\tkind: 'flush'\n\t\t};\n\t}\n\treturn { kind: 'unknown' };\n}\n\nfunction getDetail(line: string, injectedTexts: LineInjectedText[] | null): string {\n\treturn LineInjectedText.applyInjectedText(line, (injectedTexts || []).map(t => t.withText(`[${t.options.content}]`)));\n}\n"]}