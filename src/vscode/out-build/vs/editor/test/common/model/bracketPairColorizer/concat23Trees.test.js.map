{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/test/common/model/bracketPairColorizer/concat23Trees.test.ts","vs/editor/test/common/model/bracketPairColorizer/concat23Trees.test.ts"],"names":[],"mappings":"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","file":"concat23Trees.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { AstNode, AstNodeKind, ListAstNode, TextAstNode } from '../../../../common/model/bracketPairsTextModelPart/bracketPairsTree/ast.js';\nimport { concat23Trees } from '../../../../common/model/bracketPairsTextModelPart/bracketPairsTree/concat23Trees.js';\nimport { toLength } from '../../../../common/model/bracketPairsTextModelPart/bracketPairsTree/length.js';\n\nsuite('Bracket Pair Colorizer - mergeItems', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('Clone', () => {\n\t\tconst tree = ListAstNode.create([\n\t\t\tnew TextAstNode(toLength(1, 1)),\n\t\t\tnew TextAstNode(toLength(1, 1)),\n\t\t]);\n\n\t\tassert.ok(equals(tree, tree.deepClone()));\n\t});\n\n\tfunction equals(node1: AstNode, node2: AstNode): boolean {\n\t\tif (node1.length !== node2.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (node1.children.length !== node2.children.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (let i = 0; i < node1.children.length; i++) {\n\t\t\tif (!equals(node1.children[i], node2.children[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif (!node1.missingOpeningBracketIds.equals(node2.missingOpeningBracketIds)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (node1.kind === AstNodeKind.Pair && node2.kind === AstNodeKind.Pair) {\n\t\t\treturn true;\n\t\t} else if (node1.kind === node2.kind) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction testMerge(lists: AstNode[]) {\n\t\tconst node = (concat23Trees(lists.map(l => l.deepClone())) || ListAstNode.create([])).flattenLists();\n\t\t// This trivial merge does not maintain the (2,3) tree invariant.\n\t\tconst referenceNode = ListAstNode.create(lists).flattenLists();\n\n\t\tassert.ok(equals(node, referenceNode), 'merge23Trees failed');\n\t}\n\n\ttest('Empty List', () => {\n\t\ttestMerge([]);\n\t});\n\n\ttest('Same Height Lists', () => {\n\t\tconst textNode = new TextAstNode(toLength(1, 1));\n\t\tconst tree = ListAstNode.create([textNode.deepClone(), textNode.deepClone()]);\n\t\ttestMerge([tree.deepClone(), tree.deepClone(), tree.deepClone(), tree.deepClone(), tree.deepClone()]);\n\t});\n\n\ttest('Different Height Lists 1', () => {\n\t\tconst textNode = new TextAstNode(toLength(1, 1));\n\t\tconst tree1 = ListAstNode.create([textNode.deepClone(), textNode.deepClone()]);\n\t\tconst tree2 = ListAstNode.create([tree1.deepClone(), tree1.deepClone()]);\n\n\t\ttestMerge([tree1, tree2]);\n\t});\n\n\ttest('Different Height Lists 2', () => {\n\t\tconst textNode = new TextAstNode(toLength(1, 1));\n\t\tconst tree1 = ListAstNode.create([textNode.deepClone(), textNode.deepClone()]);\n\t\tconst tree2 = ListAstNode.create([tree1.deepClone(), tree1.deepClone()]);\n\n\t\ttestMerge([tree2, tree1]);\n\t});\n\n\ttest('Different Height Lists 3', () => {\n\t\tconst textNode = new TextAstNode(toLength(1, 1));\n\t\tconst tree1 = ListAstNode.create([textNode.deepClone(), textNode.deepClone()]);\n\t\tconst tree2 = ListAstNode.create([tree1.deepClone(), tree1.deepClone()]);\n\n\t\ttestMerge([tree2, tree1, tree1, tree2, tree2]);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { AstNode, AstNodeKind, ListAstNode, TextAstNode } from '../../../../common/model/bracketPairsTextModelPart/bracketPairsTree/ast.js';\nimport { concat23Trees } from '../../../../common/model/bracketPairsTextModelPart/bracketPairsTree/concat23Trees.js';\nimport { toLength } from '../../../../common/model/bracketPairsTextModelPart/bracketPairsTree/length.js';\n\nsuite('Bracket Pair Colorizer - mergeItems', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('Clone', () => {\n\t\tconst tree = ListAstNode.create([\n\t\t\tnew TextAstNode(toLength(1, 1)),\n\t\t\tnew TextAstNode(toLength(1, 1)),\n\t\t]);\n\n\t\tassert.ok(equals(tree, tree.deepClone()));\n\t});\n\n\tfunction equals(node1: AstNode, node2: AstNode): boolean {\n\t\tif (node1.length !== node2.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (node1.children.length !== node2.children.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (let i = 0; i < node1.children.length; i++) {\n\t\t\tif (!equals(node1.children[i], node2.children[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif (!node1.missingOpeningBracketIds.equals(node2.missingOpeningBracketIds)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (node1.kind === AstNodeKind.Pair && node2.kind === AstNodeKind.Pair) {\n\t\t\treturn true;\n\t\t} else if (node1.kind === node2.kind) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction testMerge(lists: AstNode[]) {\n\t\tconst node = (concat23Trees(lists.map(l => l.deepClone())) || ListAstNode.create([])).flattenLists();\n\t\t// This trivial merge does not maintain the (2,3) tree invariant.\n\t\tconst referenceNode = ListAstNode.create(lists).flattenLists();\n\n\t\tassert.ok(equals(node, referenceNode), 'merge23Trees failed');\n\t}\n\n\ttest('Empty List', () => {\n\t\ttestMerge([]);\n\t});\n\n\ttest('Same Height Lists', () => {\n\t\tconst textNode = new TextAstNode(toLength(1, 1));\n\t\tconst tree = ListAstNode.create([textNode.deepClone(), textNode.deepClone()]);\n\t\ttestMerge([tree.deepClone(), tree.deepClone(), tree.deepClone(), tree.deepClone(), tree.deepClone()]);\n\t});\n\n\ttest('Different Height Lists 1', () => {\n\t\tconst textNode = new TextAstNode(toLength(1, 1));\n\t\tconst tree1 = ListAstNode.create([textNode.deepClone(), textNode.deepClone()]);\n\t\tconst tree2 = ListAstNode.create([tree1.deepClone(), tree1.deepClone()]);\n\n\t\ttestMerge([tree1, tree2]);\n\t});\n\n\ttest('Different Height Lists 2', () => {\n\t\tconst textNode = new TextAstNode(toLength(1, 1));\n\t\tconst tree1 = ListAstNode.create([textNode.deepClone(), textNode.deepClone()]);\n\t\tconst tree2 = ListAstNode.create([tree1.deepClone(), tree1.deepClone()]);\n\n\t\ttestMerge([tree2, tree1]);\n\t});\n\n\ttest('Different Height Lists 3', () => {\n\t\tconst textNode = new TextAstNode(toLength(1, 1));\n\t\tconst tree1 = ListAstNode.create([textNode.deepClone(), textNode.deepClone()]);\n\t\tconst tree2 = ListAstNode.create([tree1.deepClone(), tree1.deepClone()]);\n\n\t\ttestMerge([tree2, tree1, tree1, tree2, tree2]);\n\t});\n});\n"]}