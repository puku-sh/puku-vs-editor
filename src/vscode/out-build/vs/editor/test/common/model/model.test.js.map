{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/test/common/model/model.test.ts","vs/editor/test/common/model/model.test.ts"],"names":[],"mappings":"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","file":"model.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Disposable, DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { MetadataConsts } from '../../../common/encodedTokenAttributes.js';\nimport { EncodedTokenizationResult, IState, TokenizationRegistry } from '../../../common/languages.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { NullState } from '../../../common/languages/nullTokenize.js';\nimport { TextModel } from '../../../common/model/textModel.js';\nimport { InternalModelContentChangeEvent, ModelRawContentChangedEvent, ModelRawFlush, ModelRawLineChanged, ModelRawLinesDeleted, ModelRawLinesInserted } from '../../../common/textModelEvents.js';\nimport { createModelServices, createTextModel, instantiateTextModel } from '../testTextModel.js';\n\n// --------- utils\n\nconst LINE1 = 'My First Line';\nconst LINE2 = '\\t\\tMy Second Line';\nconst LINE3 = '    Third Line';\nconst LINE4 = '';\nconst LINE5 = '1';\n\nsuite('Editor Model - Model', () => {\n\n\tlet thisModel: TextModel;\n\n\tsetup(() => {\n\t\tconst text =\n\t\t\tLINE1 + '\\r\\n' +\n\t\t\tLINE2 + '\\n' +\n\t\t\tLINE3 + '\\n' +\n\t\t\tLINE4 + '\\r\\n' +\n\t\t\tLINE5;\n\t\tthisModel = createTextModel(text);\n\t});\n\n\tteardown(() => {\n\t\tthisModel.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\t// --------- insert text\n\n\ttest('model getValue', () => {\n\t\tassert.strictEqual(thisModel.getValue(), 'My First Line\\n\\t\\tMy Second Line\\n    Third Line\\n\\n1');\n\t});\n\n\ttest('model insert empty text', () => {\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 1), '')]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 5);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'My First Line');\n\t});\n\n\ttest('model insert text without newline 1', () => {\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 1), 'foo ')]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 5);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'foo My First Line');\n\t});\n\n\ttest('model insert text without newline 2', () => {\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 3), ' foo')]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 5);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'My foo First Line');\n\t});\n\n\ttest('model insert text with one newline', () => {\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 3), ' new line\\nNo longer')]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 6);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'My new line');\n\t\tassert.strictEqual(thisModel.getLineContent(2), 'No longer First Line');\n\t});\n\n\ttest('model insert text with two newlines', () => {\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 3), ' new line\\nOne more line in the middle\\nNo longer')]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 7);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'My new line');\n\t\tassert.strictEqual(thisModel.getLineContent(2), 'One more line in the middle');\n\t\tassert.strictEqual(thisModel.getLineContent(3), 'No longer First Line');\n\t});\n\n\ttest('model insert text with many newlines', () => {\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 3), '\\n\\n\\n\\n')]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 9);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'My');\n\t\tassert.strictEqual(thisModel.getLineContent(2), '');\n\t\tassert.strictEqual(thisModel.getLineContent(3), '');\n\t\tassert.strictEqual(thisModel.getLineContent(4), '');\n\t\tassert.strictEqual(thisModel.getLineContent(5), ' First Line');\n\t});\n\n\n\t// --------- insert text eventing\n\n\ttest('model insert empty text does not trigger eventing', () => {\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((e) => {\n\t\t\tassert.ok(false, 'was not expecting event');\n\t\t});\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 1), '')]);\n\t\tdisposable.dispose();\n\t});\n\n\ttest('model insert text without newline eventing', () => {\n\t\tlet e: ModelRawContentChangedEvent | null = null;\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((_e) => {\n\t\t\tif (e !== null || !(_e instanceof InternalModelContentChangeEvent)) {\n\t\t\t\tassert.fail('Unexpected assertion error');\n\t\t\t}\n\t\t\te = _e.rawContentChangedEvent;\n\t\t});\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 1), 'foo ')]);\n\t\tassert.deepStrictEqual(e, new ModelRawContentChangedEvent(\n\t\t\t[\n\t\t\t\tnew ModelRawLineChanged(1, 'foo My First Line', null)\n\t\t\t],\n\t\t\t2,\n\t\t\tfalse,\n\t\t\tfalse\n\t\t));\n\t\tdisposable.dispose();\n\t});\n\n\ttest('model insert text with one newline eventing', () => {\n\t\tlet e: ModelRawContentChangedEvent | null = null;\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((_e) => {\n\t\t\tif (e !== null || !(_e instanceof InternalModelContentChangeEvent)) {\n\t\t\t\tassert.fail('Unexpected assertion error');\n\t\t\t}\n\t\t\te = _e.rawContentChangedEvent;\n\t\t});\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 3), ' new line\\nNo longer')]);\n\t\tassert.deepStrictEqual(e, new ModelRawContentChangedEvent(\n\t\t\t[\n\t\t\t\tnew ModelRawLineChanged(1, 'My new line', null),\n\t\t\t\tnew ModelRawLinesInserted(2, 2, ['No longer First Line'], [null]),\n\t\t\t],\n\t\t\t2,\n\t\t\tfalse,\n\t\t\tfalse\n\t\t));\n\t\tdisposable.dispose();\n\t});\n\n\n\t// --------- delete text\n\n\ttest('model delete empty text', () => {\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 1, 1))]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 5);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'My First Line');\n\t});\n\n\ttest('model delete text from one line', () => {\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 1, 2))]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 5);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'y First Line');\n\t});\n\n\ttest('model delete text from one line 2', () => {\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 1), 'a')]);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'aMy First Line');\n\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 2, 1, 4))]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 5);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'a First Line');\n\t});\n\n\ttest('model delete all text from a line', () => {\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 1, 14))]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 5);\n\t\tassert.strictEqual(thisModel.getLineContent(1), '');\n\t});\n\n\ttest('model delete text from two lines', () => {\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 4, 2, 6))]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 4);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'My Second Line');\n\t});\n\n\ttest('model delete text from many lines', () => {\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 4, 3, 5))]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 3);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'My Third Line');\n\t});\n\n\ttest('model delete everything', () => {\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 5, 2))]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 1);\n\t\tassert.strictEqual(thisModel.getLineContent(1), '');\n\t});\n\n\t// --------- delete text eventing\n\n\ttest('model delete empty text does not trigger eventing', () => {\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((e) => {\n\t\t\tassert.ok(false, 'was not expecting event');\n\t\t});\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 1, 1))]);\n\t\tdisposable.dispose();\n\t});\n\n\ttest('model delete text from one line eventing', () => {\n\t\tlet e: ModelRawContentChangedEvent | null = null;\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((_e) => {\n\t\t\tif (e !== null || !(_e instanceof InternalModelContentChangeEvent)) {\n\t\t\t\tassert.fail('Unexpected assertion error');\n\t\t\t}\n\t\t\te = _e.rawContentChangedEvent;\n\t\t});\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 1, 2))]);\n\t\tassert.deepStrictEqual(e, new ModelRawContentChangedEvent(\n\t\t\t[\n\t\t\t\tnew ModelRawLineChanged(1, 'y First Line', null),\n\t\t\t],\n\t\t\t2,\n\t\t\tfalse,\n\t\t\tfalse\n\t\t));\n\t\tdisposable.dispose();\n\t});\n\n\ttest('model delete all text from a line eventing', () => {\n\t\tlet e: ModelRawContentChangedEvent | null = null;\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((_e) => {\n\t\t\tif (e !== null || !(_e instanceof InternalModelContentChangeEvent)) {\n\t\t\t\tassert.fail('Unexpected assertion error');\n\t\t\t}\n\t\t\te = _e.rawContentChangedEvent;\n\t\t});\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 1, 14))]);\n\t\tassert.deepStrictEqual(e, new ModelRawContentChangedEvent(\n\t\t\t[\n\t\t\t\tnew ModelRawLineChanged(1, '', null),\n\t\t\t],\n\t\t\t2,\n\t\t\tfalse,\n\t\t\tfalse\n\t\t));\n\t\tdisposable.dispose();\n\t});\n\n\ttest('model delete text from two lines eventing', () => {\n\t\tlet e: ModelRawContentChangedEvent | null = null;\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((_e) => {\n\t\t\tif (e !== null || !(_e instanceof InternalModelContentChangeEvent)) {\n\t\t\t\tassert.fail('Unexpected assertion error');\n\t\t\t}\n\t\t\te = _e.rawContentChangedEvent;\n\t\t});\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 4, 2, 6))]);\n\t\tassert.deepStrictEqual(e, new ModelRawContentChangedEvent(\n\t\t\t[\n\t\t\t\tnew ModelRawLineChanged(1, 'My Second Line', null),\n\t\t\t\tnew ModelRawLinesDeleted(2, 2),\n\t\t\t],\n\t\t\t2,\n\t\t\tfalse,\n\t\t\tfalse\n\t\t));\n\t\tdisposable.dispose();\n\t});\n\n\ttest('model delete text from many lines eventing', () => {\n\t\tlet e: ModelRawContentChangedEvent | null = null;\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((_e) => {\n\t\t\tif (e !== null || !(_e instanceof InternalModelContentChangeEvent)) {\n\t\t\t\tassert.fail('Unexpected assertion error');\n\t\t\t}\n\t\t\te = _e.rawContentChangedEvent;\n\t\t});\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 4, 3, 5))]);\n\t\tassert.deepStrictEqual(e, new ModelRawContentChangedEvent(\n\t\t\t[\n\t\t\t\tnew ModelRawLineChanged(1, 'My Third Line', null),\n\t\t\t\tnew ModelRawLinesDeleted(2, 3),\n\t\t\t],\n\t\t\t2,\n\t\t\tfalse,\n\t\t\tfalse\n\t\t));\n\t\tdisposable.dispose();\n\t});\n\n\t// --------- getValueInRange\n\n\ttest('getValueInRange', () => {\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 1, 1)), '');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 1, 2)), 'M');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 2, 1, 3)), 'y');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 1, 14)), 'My First Line');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 2, 1)), 'My First Line\\n');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 2, 2)), 'My First Line\\n\\t');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 2, 3)), 'My First Line\\n\\t\\t');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 2, 17)), 'My First Line\\n\\t\\tMy Second Line');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 3, 1)), 'My First Line\\n\\t\\tMy Second Line\\n');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 4, 1)), 'My First Line\\n\\t\\tMy Second Line\\n    Third Line\\n');\n\t});\n\n\t// --------- getValueLengthInRange\n\n\ttest('getValueLengthInRange', () => {\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 1, 1)), ''.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 1, 2)), 'M'.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 2, 1, 3)), 'y'.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 1, 14)), 'My First Line'.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 2, 1)), 'My First Line\\n'.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 2, 2)), 'My First Line\\n\\t'.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 2, 3)), 'My First Line\\n\\t\\t'.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 2, 17)), 'My First Line\\n\\t\\tMy Second Line'.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 3, 1)), 'My First Line\\n\\t\\tMy Second Line\\n'.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 4, 1)), 'My First Line\\n\\t\\tMy Second Line\\n    Third Line\\n'.length);\n\t});\n\n\t// --------- setValue\n\ttest('setValue eventing', () => {\n\t\tlet e: ModelRawContentChangedEvent | null = null;\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((_e) => {\n\t\t\tif (e !== null || !(_e instanceof InternalModelContentChangeEvent)) {\n\t\t\t\tassert.fail('Unexpected assertion error');\n\t\t\t}\n\t\t\te = _e.rawContentChangedEvent;\n\t\t});\n\t\tthisModel.setValue('new value');\n\t\tassert.deepStrictEqual(e, new ModelRawContentChangedEvent(\n\t\t\t[\n\t\t\t\tnew ModelRawFlush()\n\t\t\t],\n\t\t\t2,\n\t\t\tfalse,\n\t\t\tfalse\n\t\t));\n\t\tdisposable.dispose();\n\t});\n\n\ttest('issue #46342: Maintain edit operation order in applyEdits', () => {\n\t\tconst res = thisModel.applyEdits([\n\t\t\t{ range: new Range(2, 1, 2, 1), text: 'a' },\n\t\t\t{ range: new Range(1, 1, 1, 1), text: 'b' },\n\t\t], true);\n\n\t\tassert.deepStrictEqual(res[0].range, new Range(2, 1, 2, 2));\n\t\tassert.deepStrictEqual(res[1].range, new Range(1, 1, 1, 2));\n\t});\n});\n\n\n// --------- Special Unicode LINE SEPARATOR character\nsuite('Editor Model - Model Line Separators', () => {\n\n\tlet thisModel: TextModel;\n\n\tsetup(() => {\n\t\tconst text =\n\t\t\tLINE1 + '\\u2028' +\n\t\t\tLINE2 + '\\n' +\n\t\t\tLINE3 + '\\u2028' +\n\t\t\tLINE4 + '\\r\\n' +\n\t\t\tLINE5;\n\t\tthisModel = createTextModel(text);\n\t});\n\n\tteardown(() => {\n\t\tthisModel.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('model getValue', () => {\n\t\tassert.strictEqual(thisModel.getValue(), 'My First Line\\u2028\\t\\tMy Second Line\\n    Third Line\\u2028\\n1');\n\t});\n\n\ttest('model lines', () => {\n\t\tassert.strictEqual(thisModel.getLineCount(), 3);\n\t});\n\n\ttest('Bug 13333:Model should line break on lonely CR too', () => {\n\t\tconst model = createTextModel('Hello\\rWorld!\\r\\nAnother line');\n\t\tassert.strictEqual(model.getLineCount(), 3);\n\t\tassert.strictEqual(model.getValue(), 'Hello\\r\\nWorld!\\r\\nAnother line');\n\t\tmodel.dispose();\n\t});\n});\n\n\n// --------- Words\n\nsuite('Editor Model - Words', () => {\n\n\tconst OUTER_LANGUAGE_ID = 'outerMode';\n\tconst INNER_LANGUAGE_ID = 'innerMode';\n\n\tclass OuterMode extends Disposable {\n\n\t\tpublic readonly languageId = OUTER_LANGUAGE_ID;\n\n\t\tconstructor(\n\t\t\t@ILanguageService languageService: ILanguageService,\n\t\t\t@ILanguageConfigurationService languageConfigurationService: ILanguageConfigurationService\n\t\t) {\n\t\t\tsuper();\n\t\t\tthis._register(languageService.registerLanguage({ id: this.languageId }));\n\t\t\tthis._register(languageConfigurationService.register(this.languageId, {}));\n\n\t\t\tconst languageIdCodec = languageService.languageIdCodec;\n\t\t\tthis._register(TokenizationRegistry.register(this.languageId, {\n\t\t\t\tgetInitialState: (): IState => NullState,\n\t\t\t\ttokenize: undefined!,\n\t\t\t\ttokenizeEncoded: (line: string, hasEOL: boolean, state: IState): EncodedTokenizationResult => {\n\t\t\t\t\tconst tokensArr: number[] = [];\n\t\t\t\t\tlet prevLanguageId: string | undefined = undefined;\n\t\t\t\t\tfor (let i = 0; i < line.length; i++) {\n\t\t\t\t\t\tconst languageId = (line.charAt(i) === 'x' ? INNER_LANGUAGE_ID : OUTER_LANGUAGE_ID);\n\t\t\t\t\t\tconst encodedLanguageId = languageIdCodec.encodeLanguageId(languageId);\n\t\t\t\t\t\tif (prevLanguageId !== languageId) {\n\t\t\t\t\t\t\ttokensArr.push(i);\n\t\t\t\t\t\t\ttokensArr.push((encodedLanguageId << MetadataConsts.LANGUAGEID_OFFSET));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprevLanguageId = languageId;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst tokens = new Uint32Array(tokensArr.length);\n\t\t\t\t\tfor (let i = 0; i < tokens.length; i++) {\n\t\t\t\t\t\ttokens[i] = tokensArr[i];\n\t\t\t\t\t}\n\t\t\t\t\treturn new EncodedTokenizationResult(tokens, state);\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tclass InnerMode extends Disposable {\n\n\t\tpublic readonly languageId = INNER_LANGUAGE_ID;\n\n\t\tconstructor(\n\t\t\t@ILanguageService languageService: ILanguageService,\n\t\t\t@ILanguageConfigurationService languageConfigurationService: ILanguageConfigurationService\n\t\t) {\n\t\t\tsuper();\n\t\t\tthis._register(languageService.registerLanguage({ id: this.languageId }));\n\t\t\tthis._register(languageConfigurationService.register(this.languageId, {}));\n\t\t}\n\t}\n\n\tlet disposables: Disposable[] = [];\n\n\tsetup(() => {\n\t\tdisposables = [];\n\t});\n\n\tteardown(() => {\n\t\tdispose(disposables);\n\t\tdisposables = [];\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('Get word at position', () => {\n\t\tconst text = ['This text has some  words. '];\n\t\tconst thisModel = createTextModel(text.join('\\n'));\n\t\tdisposables.push(thisModel);\n\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 1)), { word: 'This', startColumn: 1, endColumn: 5 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 2)), { word: 'This', startColumn: 1, endColumn: 5 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 4)), { word: 'This', startColumn: 1, endColumn: 5 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 5)), { word: 'This', startColumn: 1, endColumn: 5 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 6)), { word: 'text', startColumn: 6, endColumn: 10 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 19)), { word: 'some', startColumn: 15, endColumn: 19 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 20)), null);\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 21)), { word: 'words', startColumn: 21, endColumn: 26 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 26)), { word: 'words', startColumn: 21, endColumn: 26 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 27)), null);\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 28)), null);\n\t});\n\n\ttest('getWordAtPosition at embedded language boundaries', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst instantiationService = createModelServices(disposables);\n\t\tconst outerMode = disposables.add(instantiationService.createInstance(OuterMode));\n\t\tdisposables.add(instantiationService.createInstance(InnerMode));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'ab<xx>ab<x>', outerMode.languageId));\n\n\t\tassert.deepStrictEqual(model.getWordAtPosition(new Position(1, 1)), { word: 'ab', startColumn: 1, endColumn: 3 });\n\t\tassert.deepStrictEqual(model.getWordAtPosition(new Position(1, 2)), { word: 'ab', startColumn: 1, endColumn: 3 });\n\t\tassert.deepStrictEqual(model.getWordAtPosition(new Position(1, 3)), { word: 'ab', startColumn: 1, endColumn: 3 });\n\t\tassert.deepStrictEqual(model.getWordAtPosition(new Position(1, 4)), { word: 'xx', startColumn: 4, endColumn: 6 });\n\t\tassert.deepStrictEqual(model.getWordAtPosition(new Position(1, 5)), { word: 'xx', startColumn: 4, endColumn: 6 });\n\t\tassert.deepStrictEqual(model.getWordAtPosition(new Position(1, 6)), { word: 'xx', startColumn: 4, endColumn: 6 });\n\t\tassert.deepStrictEqual(model.getWordAtPosition(new Position(1, 7)), { word: 'ab', startColumn: 7, endColumn: 9 });\n\n\t\tdisposables.dispose();\n\t});\n\n\ttest('issue #61296: VS code freezes when editing CSS file with emoji', () => {\n\t\tconst MODE_ID = 'testMode';\n\t\tconst disposables = new DisposableStore();\n\t\tconst instantiationService = createModelServices(disposables);\n\t\tconst languageConfigurationService = instantiationService.get(ILanguageConfigurationService);\n\t\tconst languageService = instantiationService.get(ILanguageService);\n\n\t\tdisposables.add(languageService.registerLanguage({ id: MODE_ID }));\n\t\tdisposables.add(languageConfigurationService.register(MODE_ID, {\n\t\t\twordPattern: /(#?-?\\d*\\.\\d\\w*%?)|(::?[\\w-]*(?=[^,{;]*[,{]))|(([@#.!])?[\\w-?]+%?|[@#!.])/g\n\t\t}));\n\n\t\tconst thisModel = disposables.add(instantiateTextModel(instantiationService, '.ðŸ·-a-b', MODE_ID));\n\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 1)), { word: '.', startColumn: 1, endColumn: 2 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 2)), { word: '.', startColumn: 1, endColumn: 2 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 3)), null);\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 4)), { word: '-a-b', startColumn: 4, endColumn: 8 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 5)), { word: '-a-b', startColumn: 4, endColumn: 8 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 6)), { word: '-a-b', startColumn: 4, endColumn: 8 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 7)), { word: '-a-b', startColumn: 4, endColumn: 8 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 8)), { word: '-a-b', startColumn: 4, endColumn: 8 });\n\n\t\tdisposables.dispose();\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Disposable, DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { MetadataConsts } from '../../../common/encodedTokenAttributes.js';\nimport { EncodedTokenizationResult, IState, TokenizationRegistry } from '../../../common/languages.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { NullState } from '../../../common/languages/nullTokenize.js';\nimport { TextModel } from '../../../common/model/textModel.js';\nimport { InternalModelContentChangeEvent, ModelRawContentChangedEvent, ModelRawFlush, ModelRawLineChanged, ModelRawLinesDeleted, ModelRawLinesInserted } from '../../../common/textModelEvents.js';\nimport { createModelServices, createTextModel, instantiateTextModel } from '../testTextModel.js';\n\n// --------- utils\n\nconst LINE1 = 'My First Line';\nconst LINE2 = '\\t\\tMy Second Line';\nconst LINE3 = '    Third Line';\nconst LINE4 = '';\nconst LINE5 = '1';\n\nsuite('Editor Model - Model', () => {\n\n\tlet thisModel: TextModel;\n\n\tsetup(() => {\n\t\tconst text =\n\t\t\tLINE1 + '\\r\\n' +\n\t\t\tLINE2 + '\\n' +\n\t\t\tLINE3 + '\\n' +\n\t\t\tLINE4 + '\\r\\n' +\n\t\t\tLINE5;\n\t\tthisModel = createTextModel(text);\n\t});\n\n\tteardown(() => {\n\t\tthisModel.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\t// --------- insert text\n\n\ttest('model getValue', () => {\n\t\tassert.strictEqual(thisModel.getValue(), 'My First Line\\n\\t\\tMy Second Line\\n    Third Line\\n\\n1');\n\t});\n\n\ttest('model insert empty text', () => {\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 1), '')]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 5);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'My First Line');\n\t});\n\n\ttest('model insert text without newline 1', () => {\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 1), 'foo ')]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 5);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'foo My First Line');\n\t});\n\n\ttest('model insert text without newline 2', () => {\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 3), ' foo')]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 5);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'My foo First Line');\n\t});\n\n\ttest('model insert text with one newline', () => {\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 3), ' new line\\nNo longer')]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 6);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'My new line');\n\t\tassert.strictEqual(thisModel.getLineContent(2), 'No longer First Line');\n\t});\n\n\ttest('model insert text with two newlines', () => {\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 3), ' new line\\nOne more line in the middle\\nNo longer')]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 7);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'My new line');\n\t\tassert.strictEqual(thisModel.getLineContent(2), 'One more line in the middle');\n\t\tassert.strictEqual(thisModel.getLineContent(3), 'No longer First Line');\n\t});\n\n\ttest('model insert text with many newlines', () => {\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 3), '\\n\\n\\n\\n')]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 9);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'My');\n\t\tassert.strictEqual(thisModel.getLineContent(2), '');\n\t\tassert.strictEqual(thisModel.getLineContent(3), '');\n\t\tassert.strictEqual(thisModel.getLineContent(4), '');\n\t\tassert.strictEqual(thisModel.getLineContent(5), ' First Line');\n\t});\n\n\n\t// --------- insert text eventing\n\n\ttest('model insert empty text does not trigger eventing', () => {\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((e) => {\n\t\t\tassert.ok(false, 'was not expecting event');\n\t\t});\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 1), '')]);\n\t\tdisposable.dispose();\n\t});\n\n\ttest('model insert text without newline eventing', () => {\n\t\tlet e: ModelRawContentChangedEvent | null = null;\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((_e) => {\n\t\t\tif (e !== null || !(_e instanceof InternalModelContentChangeEvent)) {\n\t\t\t\tassert.fail('Unexpected assertion error');\n\t\t\t}\n\t\t\te = _e.rawContentChangedEvent;\n\t\t});\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 1), 'foo ')]);\n\t\tassert.deepStrictEqual(e, new ModelRawContentChangedEvent(\n\t\t\t[\n\t\t\t\tnew ModelRawLineChanged(1, 'foo My First Line', null)\n\t\t\t],\n\t\t\t2,\n\t\t\tfalse,\n\t\t\tfalse\n\t\t));\n\t\tdisposable.dispose();\n\t});\n\n\ttest('model insert text with one newline eventing', () => {\n\t\tlet e: ModelRawContentChangedEvent | null = null;\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((_e) => {\n\t\t\tif (e !== null || !(_e instanceof InternalModelContentChangeEvent)) {\n\t\t\t\tassert.fail('Unexpected assertion error');\n\t\t\t}\n\t\t\te = _e.rawContentChangedEvent;\n\t\t});\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 3), ' new line\\nNo longer')]);\n\t\tassert.deepStrictEqual(e, new ModelRawContentChangedEvent(\n\t\t\t[\n\t\t\t\tnew ModelRawLineChanged(1, 'My new line', null),\n\t\t\t\tnew ModelRawLinesInserted(2, 2, ['No longer First Line'], [null]),\n\t\t\t],\n\t\t\t2,\n\t\t\tfalse,\n\t\t\tfalse\n\t\t));\n\t\tdisposable.dispose();\n\t});\n\n\n\t// --------- delete text\n\n\ttest('model delete empty text', () => {\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 1, 1))]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 5);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'My First Line');\n\t});\n\n\ttest('model delete text from one line', () => {\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 1, 2))]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 5);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'y First Line');\n\t});\n\n\ttest('model delete text from one line 2', () => {\n\t\tthisModel.applyEdits([EditOperation.insert(new Position(1, 1), 'a')]);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'aMy First Line');\n\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 2, 1, 4))]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 5);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'a First Line');\n\t});\n\n\ttest('model delete all text from a line', () => {\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 1, 14))]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 5);\n\t\tassert.strictEqual(thisModel.getLineContent(1), '');\n\t});\n\n\ttest('model delete text from two lines', () => {\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 4, 2, 6))]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 4);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'My Second Line');\n\t});\n\n\ttest('model delete text from many lines', () => {\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 4, 3, 5))]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 3);\n\t\tassert.strictEqual(thisModel.getLineContent(1), 'My Third Line');\n\t});\n\n\ttest('model delete everything', () => {\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 5, 2))]);\n\t\tassert.strictEqual(thisModel.getLineCount(), 1);\n\t\tassert.strictEqual(thisModel.getLineContent(1), '');\n\t});\n\n\t// --------- delete text eventing\n\n\ttest('model delete empty text does not trigger eventing', () => {\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((e) => {\n\t\t\tassert.ok(false, 'was not expecting event');\n\t\t});\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 1, 1))]);\n\t\tdisposable.dispose();\n\t});\n\n\ttest('model delete text from one line eventing', () => {\n\t\tlet e: ModelRawContentChangedEvent | null = null;\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((_e) => {\n\t\t\tif (e !== null || !(_e instanceof InternalModelContentChangeEvent)) {\n\t\t\t\tassert.fail('Unexpected assertion error');\n\t\t\t}\n\t\t\te = _e.rawContentChangedEvent;\n\t\t});\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 1, 2))]);\n\t\tassert.deepStrictEqual(e, new ModelRawContentChangedEvent(\n\t\t\t[\n\t\t\t\tnew ModelRawLineChanged(1, 'y First Line', null),\n\t\t\t],\n\t\t\t2,\n\t\t\tfalse,\n\t\t\tfalse\n\t\t));\n\t\tdisposable.dispose();\n\t});\n\n\ttest('model delete all text from a line eventing', () => {\n\t\tlet e: ModelRawContentChangedEvent | null = null;\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((_e) => {\n\t\t\tif (e !== null || !(_e instanceof InternalModelContentChangeEvent)) {\n\t\t\t\tassert.fail('Unexpected assertion error');\n\t\t\t}\n\t\t\te = _e.rawContentChangedEvent;\n\t\t});\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 1, 1, 14))]);\n\t\tassert.deepStrictEqual(e, new ModelRawContentChangedEvent(\n\t\t\t[\n\t\t\t\tnew ModelRawLineChanged(1, '', null),\n\t\t\t],\n\t\t\t2,\n\t\t\tfalse,\n\t\t\tfalse\n\t\t));\n\t\tdisposable.dispose();\n\t});\n\n\ttest('model delete text from two lines eventing', () => {\n\t\tlet e: ModelRawContentChangedEvent | null = null;\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((_e) => {\n\t\t\tif (e !== null || !(_e instanceof InternalModelContentChangeEvent)) {\n\t\t\t\tassert.fail('Unexpected assertion error');\n\t\t\t}\n\t\t\te = _e.rawContentChangedEvent;\n\t\t});\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 4, 2, 6))]);\n\t\tassert.deepStrictEqual(e, new ModelRawContentChangedEvent(\n\t\t\t[\n\t\t\t\tnew ModelRawLineChanged(1, 'My Second Line', null),\n\t\t\t\tnew ModelRawLinesDeleted(2, 2),\n\t\t\t],\n\t\t\t2,\n\t\t\tfalse,\n\t\t\tfalse\n\t\t));\n\t\tdisposable.dispose();\n\t});\n\n\ttest('model delete text from many lines eventing', () => {\n\t\tlet e: ModelRawContentChangedEvent | null = null;\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((_e) => {\n\t\t\tif (e !== null || !(_e instanceof InternalModelContentChangeEvent)) {\n\t\t\t\tassert.fail('Unexpected assertion error');\n\t\t\t}\n\t\t\te = _e.rawContentChangedEvent;\n\t\t});\n\t\tthisModel.applyEdits([EditOperation.delete(new Range(1, 4, 3, 5))]);\n\t\tassert.deepStrictEqual(e, new ModelRawContentChangedEvent(\n\t\t\t[\n\t\t\t\tnew ModelRawLineChanged(1, 'My Third Line', null),\n\t\t\t\tnew ModelRawLinesDeleted(2, 3),\n\t\t\t],\n\t\t\t2,\n\t\t\tfalse,\n\t\t\tfalse\n\t\t));\n\t\tdisposable.dispose();\n\t});\n\n\t// --------- getValueInRange\n\n\ttest('getValueInRange', () => {\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 1, 1)), '');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 1, 2)), 'M');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 2, 1, 3)), 'y');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 1, 14)), 'My First Line');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 2, 1)), 'My First Line\\n');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 2, 2)), 'My First Line\\n\\t');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 2, 3)), 'My First Line\\n\\t\\t');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 2, 17)), 'My First Line\\n\\t\\tMy Second Line');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 3, 1)), 'My First Line\\n\\t\\tMy Second Line\\n');\n\t\tassert.strictEqual(thisModel.getValueInRange(new Range(1, 1, 4, 1)), 'My First Line\\n\\t\\tMy Second Line\\n    Third Line\\n');\n\t});\n\n\t// --------- getValueLengthInRange\n\n\ttest('getValueLengthInRange', () => {\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 1, 1)), ''.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 1, 2)), 'M'.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 2, 1, 3)), 'y'.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 1, 14)), 'My First Line'.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 2, 1)), 'My First Line\\n'.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 2, 2)), 'My First Line\\n\\t'.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 2, 3)), 'My First Line\\n\\t\\t'.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 2, 17)), 'My First Line\\n\\t\\tMy Second Line'.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 3, 1)), 'My First Line\\n\\t\\tMy Second Line\\n'.length);\n\t\tassert.strictEqual(thisModel.getValueLengthInRange(new Range(1, 1, 4, 1)), 'My First Line\\n\\t\\tMy Second Line\\n    Third Line\\n'.length);\n\t});\n\n\t// --------- setValue\n\ttest('setValue eventing', () => {\n\t\tlet e: ModelRawContentChangedEvent | null = null;\n\t\tconst disposable = thisModel.onDidChangeContentOrInjectedText((_e) => {\n\t\t\tif (e !== null || !(_e instanceof InternalModelContentChangeEvent)) {\n\t\t\t\tassert.fail('Unexpected assertion error');\n\t\t\t}\n\t\t\te = _e.rawContentChangedEvent;\n\t\t});\n\t\tthisModel.setValue('new value');\n\t\tassert.deepStrictEqual(e, new ModelRawContentChangedEvent(\n\t\t\t[\n\t\t\t\tnew ModelRawFlush()\n\t\t\t],\n\t\t\t2,\n\t\t\tfalse,\n\t\t\tfalse\n\t\t));\n\t\tdisposable.dispose();\n\t});\n\n\ttest('issue #46342: Maintain edit operation order in applyEdits', () => {\n\t\tconst res = thisModel.applyEdits([\n\t\t\t{ range: new Range(2, 1, 2, 1), text: 'a' },\n\t\t\t{ range: new Range(1, 1, 1, 1), text: 'b' },\n\t\t], true);\n\n\t\tassert.deepStrictEqual(res[0].range, new Range(2, 1, 2, 2));\n\t\tassert.deepStrictEqual(res[1].range, new Range(1, 1, 1, 2));\n\t});\n});\n\n\n// --------- Special Unicode LINE SEPARATOR character\nsuite('Editor Model - Model Line Separators', () => {\n\n\tlet thisModel: TextModel;\n\n\tsetup(() => {\n\t\tconst text =\n\t\t\tLINE1 + '\\u2028' +\n\t\t\tLINE2 + '\\n' +\n\t\t\tLINE3 + '\\u2028' +\n\t\t\tLINE4 + '\\r\\n' +\n\t\t\tLINE5;\n\t\tthisModel = createTextModel(text);\n\t});\n\n\tteardown(() => {\n\t\tthisModel.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('model getValue', () => {\n\t\tassert.strictEqual(thisModel.getValue(), 'My First Line\\u2028\\t\\tMy Second Line\\n    Third Line\\u2028\\n1');\n\t});\n\n\ttest('model lines', () => {\n\t\tassert.strictEqual(thisModel.getLineCount(), 3);\n\t});\n\n\ttest('Bug 13333:Model should line break on lonely CR too', () => {\n\t\tconst model = createTextModel('Hello\\rWorld!\\r\\nAnother line');\n\t\tassert.strictEqual(model.getLineCount(), 3);\n\t\tassert.strictEqual(model.getValue(), 'Hello\\r\\nWorld!\\r\\nAnother line');\n\t\tmodel.dispose();\n\t});\n});\n\n\n// --------- Words\n\nsuite('Editor Model - Words', () => {\n\n\tconst OUTER_LANGUAGE_ID = 'outerMode';\n\tconst INNER_LANGUAGE_ID = 'innerMode';\n\n\tclass OuterMode extends Disposable {\n\n\t\tpublic readonly languageId = OUTER_LANGUAGE_ID;\n\n\t\tconstructor(\n\t\t\t@ILanguageService languageService: ILanguageService,\n\t\t\t@ILanguageConfigurationService languageConfigurationService: ILanguageConfigurationService\n\t\t) {\n\t\t\tsuper();\n\t\t\tthis._register(languageService.registerLanguage({ id: this.languageId }));\n\t\t\tthis._register(languageConfigurationService.register(this.languageId, {}));\n\n\t\t\tconst languageIdCodec = languageService.languageIdCodec;\n\t\t\tthis._register(TokenizationRegistry.register(this.languageId, {\n\t\t\t\tgetInitialState: (): IState => NullState,\n\t\t\t\ttokenize: undefined!,\n\t\t\t\ttokenizeEncoded: (line: string, hasEOL: boolean, state: IState): EncodedTokenizationResult => {\n\t\t\t\t\tconst tokensArr: number[] = [];\n\t\t\t\t\tlet prevLanguageId: string | undefined = undefined;\n\t\t\t\t\tfor (let i = 0; i < line.length; i++) {\n\t\t\t\t\t\tconst languageId = (line.charAt(i) === 'x' ? INNER_LANGUAGE_ID : OUTER_LANGUAGE_ID);\n\t\t\t\t\t\tconst encodedLanguageId = languageIdCodec.encodeLanguageId(languageId);\n\t\t\t\t\t\tif (prevLanguageId !== languageId) {\n\t\t\t\t\t\t\ttokensArr.push(i);\n\t\t\t\t\t\t\ttokensArr.push((encodedLanguageId << MetadataConsts.LANGUAGEID_OFFSET));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprevLanguageId = languageId;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst tokens = new Uint32Array(tokensArr.length);\n\t\t\t\t\tfor (let i = 0; i < tokens.length; i++) {\n\t\t\t\t\t\ttokens[i] = tokensArr[i];\n\t\t\t\t\t}\n\t\t\t\t\treturn new EncodedTokenizationResult(tokens, state);\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tclass InnerMode extends Disposable {\n\n\t\tpublic readonly languageId = INNER_LANGUAGE_ID;\n\n\t\tconstructor(\n\t\t\t@ILanguageService languageService: ILanguageService,\n\t\t\t@ILanguageConfigurationService languageConfigurationService: ILanguageConfigurationService\n\t\t) {\n\t\t\tsuper();\n\t\t\tthis._register(languageService.registerLanguage({ id: this.languageId }));\n\t\t\tthis._register(languageConfigurationService.register(this.languageId, {}));\n\t\t}\n\t}\n\n\tlet disposables: Disposable[] = [];\n\n\tsetup(() => {\n\t\tdisposables = [];\n\t});\n\n\tteardown(() => {\n\t\tdispose(disposables);\n\t\tdisposables = [];\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('Get word at position', () => {\n\t\tconst text = ['This text has some  words. '];\n\t\tconst thisModel = createTextModel(text.join('\\n'));\n\t\tdisposables.push(thisModel);\n\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 1)), { word: 'This', startColumn: 1, endColumn: 5 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 2)), { word: 'This', startColumn: 1, endColumn: 5 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 4)), { word: 'This', startColumn: 1, endColumn: 5 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 5)), { word: 'This', startColumn: 1, endColumn: 5 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 6)), { word: 'text', startColumn: 6, endColumn: 10 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 19)), { word: 'some', startColumn: 15, endColumn: 19 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 20)), null);\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 21)), { word: 'words', startColumn: 21, endColumn: 26 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 26)), { word: 'words', startColumn: 21, endColumn: 26 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 27)), null);\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 28)), null);\n\t});\n\n\ttest('getWordAtPosition at embedded language boundaries', () => {\n\t\tconst disposables = new DisposableStore();\n\t\tconst instantiationService = createModelServices(disposables);\n\t\tconst outerMode = disposables.add(instantiationService.createInstance(OuterMode));\n\t\tdisposables.add(instantiationService.createInstance(InnerMode));\n\n\t\tconst model = disposables.add(instantiateTextModel(instantiationService, 'ab<xx>ab<x>', outerMode.languageId));\n\n\t\tassert.deepStrictEqual(model.getWordAtPosition(new Position(1, 1)), { word: 'ab', startColumn: 1, endColumn: 3 });\n\t\tassert.deepStrictEqual(model.getWordAtPosition(new Position(1, 2)), { word: 'ab', startColumn: 1, endColumn: 3 });\n\t\tassert.deepStrictEqual(model.getWordAtPosition(new Position(1, 3)), { word: 'ab', startColumn: 1, endColumn: 3 });\n\t\tassert.deepStrictEqual(model.getWordAtPosition(new Position(1, 4)), { word: 'xx', startColumn: 4, endColumn: 6 });\n\t\tassert.deepStrictEqual(model.getWordAtPosition(new Position(1, 5)), { word: 'xx', startColumn: 4, endColumn: 6 });\n\t\tassert.deepStrictEqual(model.getWordAtPosition(new Position(1, 6)), { word: 'xx', startColumn: 4, endColumn: 6 });\n\t\tassert.deepStrictEqual(model.getWordAtPosition(new Position(1, 7)), { word: 'ab', startColumn: 7, endColumn: 9 });\n\n\t\tdisposables.dispose();\n\t});\n\n\ttest('issue #61296: VS code freezes when editing CSS file with emoji', () => {\n\t\tconst MODE_ID = 'testMode';\n\t\tconst disposables = new DisposableStore();\n\t\tconst instantiationService = createModelServices(disposables);\n\t\tconst languageConfigurationService = instantiationService.get(ILanguageConfigurationService);\n\t\tconst languageService = instantiationService.get(ILanguageService);\n\n\t\tdisposables.add(languageService.registerLanguage({ id: MODE_ID }));\n\t\tdisposables.add(languageConfigurationService.register(MODE_ID, {\n\t\t\twordPattern: /(#?-?\\d*\\.\\d\\w*%?)|(::?[\\w-]*(?=[^,{;]*[,{]))|(([@#.!])?[\\w-?]+%?|[@#!.])/g\n\t\t}));\n\n\t\tconst thisModel = disposables.add(instantiateTextModel(instantiationService, '.ðŸ·-a-b', MODE_ID));\n\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 1)), { word: '.', startColumn: 1, endColumn: 2 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 2)), { word: '.', startColumn: 1, endColumn: 2 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 3)), null);\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 4)), { word: '-a-b', startColumn: 4, endColumn: 8 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 5)), { word: '-a-b', startColumn: 4, endColumn: 8 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 6)), { word: '-a-b', startColumn: 4, endColumn: 8 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 7)), { word: '-a-b', startColumn: 4, endColumn: 8 });\n\t\tassert.deepStrictEqual(thisModel.getWordAtPosition(new Position(1, 8)), { word: '-a-b', startColumn: 4, endColumn: 8 });\n\n\t\tdisposables.dispose();\n\t});\n});\n"]}