{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/test/common/viewModel/lineBreakData.test.ts","vs/editor/test/common/viewModel/lineBreakData.test.ts"],"names":[],"mappings":"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","file":"lineBreakData.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { PositionAffinity } from '../../../common/model.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { ModelLineProjectionData } from '../../../common/modelLineProjectionData.js';\n\nsuite('Editor ViewModel - LineBreakData', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('Basic', () => {\n\t\tconst data = new ModelLineProjectionData([], [], [100], [0], 10);\n\n\t\tassert.strictEqual(data.translateToInputOffset(0, 50), 50);\n\t\tassert.strictEqual(data.translateToInputOffset(1, 60), 150);\n\t});\n\n\tfunction sequence(length: number, start = 0): number[] {\n\t\tconst result = new Array<number>();\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tresult.push(i + start);\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction testInverse(data: ModelLineProjectionData) {\n\t\tfor (let i = 0; i < 100; i++) {\n\t\t\tconst output = data.translateToOutputPosition(i);\n\t\t\tassert.deepStrictEqual(data.translateToInputOffset(output.outputLineIndex, output.outputOffset), i);\n\t\t}\n\t}\n\n\tfunction getInputOffsets(data: ModelLineProjectionData, outputLineIdx: number): number[] {\n\t\treturn sequence(20).map(i => data.translateToInputOffset(outputLineIdx, i));\n\t}\n\n\tfunction getOutputOffsets(data: ModelLineProjectionData, affinity: PositionAffinity): string[] {\n\t\treturn sequence(25).map(i => data.translateToOutputPosition(i, affinity).toString());\n\t}\n\n\tfunction mapTextToInjectedTextOptions(arr: string[]): ModelDecorationInjectedTextOptions[] {\n\t\treturn arr.map(e => ModelDecorationInjectedTextOptions.from({ content: e }));\n\t}\n\n\tsuite('Injected Text 1', () => {\n\t\tconst data = new ModelLineProjectionData([2, 3, 10], mapTextToInjectedTextOptions(['1', '22', '333']), [10, 100], [], 10);\n\n\t\ttest('getInputOffsetOfOutputPosition', () => {\n\t\t\t// For every view model position, what is the model position?\n\t\t\tassert.deepStrictEqual(getInputOffsets(data, 0), ([0, 1, 2, 2, 3, 3, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10, 11, 12, 13]));\n\t\t\tassert.deepStrictEqual(getInputOffsets(data, 1), ([7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 8, 9, 10, 10, 10, 10, 11, 12, 13]));\n\t\t});\n\n\t\ttest('getOutputPositionOfInputOffset', () => {\n\t\t\tdata.translateToOutputPosition(20);\n\t\t\tassert.deepStrictEqual(getOutputOffsets(data, PositionAffinity.None), [\n\t\t\t\t'0:0',\n\t\t\t\t'0:1',\n\t\t\t\t'0:2',\n\t\t\t\t'0:4',\n\t\t\t\t'0:7',\n\t\t\t\t'0:8',\n\t\t\t\t'0:9',\n\t\t\t\t'1:10',\n\t\t\t\t'1:11',\n\t\t\t\t'1:12',\n\t\t\t\t'1:13',\n\t\t\t\t'1:17',\n\t\t\t\t'1:18',\n\t\t\t\t'1:19',\n\t\t\t\t'1:20',\n\t\t\t\t'1:21',\n\t\t\t\t'1:22',\n\t\t\t\t'1:23',\n\t\t\t\t'1:24',\n\t\t\t\t'1:25',\n\t\t\t\t'1:26',\n\t\t\t\t'1:27',\n\t\t\t\t'1:28',\n\t\t\t\t'1:29',\n\t\t\t\t'1:30',\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(getOutputOffsets(data, PositionAffinity.Left), [\n\t\t\t\t'0:0',\n\t\t\t\t'0:1',\n\t\t\t\t'0:2',\n\t\t\t\t'0:4',\n\t\t\t\t'0:7',\n\t\t\t\t'0:8',\n\t\t\t\t'0:9',\n\t\t\t\t'0:10',\n\t\t\t\t'1:11',\n\t\t\t\t'1:12',\n\t\t\t\t'1:13',\n\t\t\t\t'1:17',\n\t\t\t\t'1:18',\n\t\t\t\t'1:19',\n\t\t\t\t'1:20',\n\t\t\t\t'1:21',\n\t\t\t\t'1:22',\n\t\t\t\t'1:23',\n\t\t\t\t'1:24',\n\t\t\t\t'1:25',\n\t\t\t\t'1:26',\n\t\t\t\t'1:27',\n\t\t\t\t'1:28',\n\t\t\t\t'1:29',\n\t\t\t\t'1:30',\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(getOutputOffsets(data, PositionAffinity.Right), [\n\t\t\t\t'0:0',\n\t\t\t\t'0:1',\n\t\t\t\t'0:3',\n\t\t\t\t'0:6',\n\t\t\t\t'0:7',\n\t\t\t\t'0:8',\n\t\t\t\t'0:9',\n\t\t\t\t'1:10',\n\t\t\t\t'1:11',\n\t\t\t\t'1:12',\n\t\t\t\t'1:16',\n\t\t\t\t'1:17',\n\t\t\t\t'1:18',\n\t\t\t\t'1:19',\n\t\t\t\t'1:20',\n\t\t\t\t'1:21',\n\t\t\t\t'1:22',\n\t\t\t\t'1:23',\n\t\t\t\t'1:24',\n\t\t\t\t'1:25',\n\t\t\t\t'1:26',\n\t\t\t\t'1:27',\n\t\t\t\t'1:28',\n\t\t\t\t'1:29',\n\t\t\t\t'1:30',\n\t\t\t]);\n\t\t});\n\n\t\ttest('getInputOffsetOfOutputPosition is inverse of getOutputPositionOfInputOffset', () => {\n\t\t\ttestInverse(data);\n\t\t});\n\n\n\t\ttest('normalization', () => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\tsequence(25)\n\t\t\t\t\t.map((v) =>\n\t\t\t\t\t\tdata.normalizeOutputPosition(1, v, PositionAffinity.Right)\n\t\t\t\t\t)\n\t\t\t\t\t.map((s) => s.toString()),\n\t\t\t\t[\n\t\t\t\t\t'1:0',\n\t\t\t\t\t'1:1',\n\t\t\t\t\t'1:2',\n\t\t\t\t\t'1:3',\n\t\t\t\t\t'1:4',\n\t\t\t\t\t'1:5',\n\t\t\t\t\t'1:6',\n\t\t\t\t\t'1:7',\n\t\t\t\t\t'1:8',\n\t\t\t\t\t'1:9',\n\t\t\t\t\t'1:10',\n\t\t\t\t\t'1:11',\n\t\t\t\t\t'1:12',\n\t\t\t\t\t'1:16',\n\t\t\t\t\t'1:16',\n\t\t\t\t\t'1:16',\n\t\t\t\t\t'1:16',\n\t\t\t\t\t'1:17',\n\t\t\t\t\t'1:18',\n\t\t\t\t\t'1:19',\n\t\t\t\t\t'1:20',\n\t\t\t\t\t'1:21',\n\t\t\t\t\t'1:22',\n\t\t\t\t\t'1:23',\n\t\t\t\t\t'1:24',\n\t\t\t\t]\n\t\t\t);\n\t\t});\n\t});\n\n\tsuite('Injected Text 2', () => {\n\t\tconst data = new ModelLineProjectionData([2, 2, 6], mapTextToInjectedTextOptions(['1', '22', '333']), [10, 100], [], 0);\n\n\t\ttest('getInputOffsetOfOutputPosition', () => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\tgetInputOffsets(data, 0),\n\t\t\t\t[0, 1, 2, 2, 2, 2, 3, 4, 5, 6, 6, 6, 6, 7, 8, 9, 10, 11, 12, 13]\n\t\t\t);\n\t\t\tassert.deepStrictEqual(\n\t\t\t\tgetInputOffsets(data, 1),\n\t\t\t\t[\n\t\t\t\t\t6, 6, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22,\n\t\t\t\t\t23,\n\t\t\t\t]\n\t\t\t);\n\t\t});\n\n\t\ttest('getInputOffsetOfOutputPosition is inverse of getOutputPositionOfInputOffset', () => {\n\t\t\ttestInverse(data);\n\t\t});\n\t});\n\n\tsuite('Injected Text 3', () => {\n\t\tconst data = new ModelLineProjectionData([2, 2, 7], mapTextToInjectedTextOptions(['1', '22', '333']), [10, 100], [], 0);\n\n\t\ttest('getInputOffsetOfOutputPosition', () => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\tgetInputOffsets(data, 0),\n\t\t\t\t[0, 1, 2, 2, 2, 2, 3, 4, 5, 6, 7, 7, 7, 7, 8, 9, 10, 11, 12, 13]\n\t\t\t);\n\t\t\tassert.deepStrictEqual(\n\t\t\t\tgetInputOffsets(data, 1),\n\t\t\t\t[\n\t\t\t\t\t7, 7, 7, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22,\n\t\t\t\t\t23,\n\t\t\t\t]\n\t\t\t);\n\t\t});\n\n\t\ttest('getInputOffsetOfOutputPosition is inverse of getOutputPositionOfInputOffset', () => {\n\t\t\ttestInverse(data);\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\nimport { PositionAffinity } from '../../../common/model.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../common/model/textModel.js';\nimport { ModelLineProjectionData } from '../../../common/modelLineProjectionData.js';\n\nsuite('Editor ViewModel - LineBreakData', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('Basic', () => {\n\t\tconst data = new ModelLineProjectionData([], [], [100], [0], 10);\n\n\t\tassert.strictEqual(data.translateToInputOffset(0, 50), 50);\n\t\tassert.strictEqual(data.translateToInputOffset(1, 60), 150);\n\t});\n\n\tfunction sequence(length: number, start = 0): number[] {\n\t\tconst result = new Array<number>();\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tresult.push(i + start);\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction testInverse(data: ModelLineProjectionData) {\n\t\tfor (let i = 0; i < 100; i++) {\n\t\t\tconst output = data.translateToOutputPosition(i);\n\t\t\tassert.deepStrictEqual(data.translateToInputOffset(output.outputLineIndex, output.outputOffset), i);\n\t\t}\n\t}\n\n\tfunction getInputOffsets(data: ModelLineProjectionData, outputLineIdx: number): number[] {\n\t\treturn sequence(20).map(i => data.translateToInputOffset(outputLineIdx, i));\n\t}\n\n\tfunction getOutputOffsets(data: ModelLineProjectionData, affinity: PositionAffinity): string[] {\n\t\treturn sequence(25).map(i => data.translateToOutputPosition(i, affinity).toString());\n\t}\n\n\tfunction mapTextToInjectedTextOptions(arr: string[]): ModelDecorationInjectedTextOptions[] {\n\t\treturn arr.map(e => ModelDecorationInjectedTextOptions.from({ content: e }));\n\t}\n\n\tsuite('Injected Text 1', () => {\n\t\tconst data = new ModelLineProjectionData([2, 3, 10], mapTextToInjectedTextOptions(['1', '22', '333']), [10, 100], [], 10);\n\n\t\ttest('getInputOffsetOfOutputPosition', () => {\n\t\t\t// For every view model position, what is the model position?\n\t\t\tassert.deepStrictEqual(getInputOffsets(data, 0), ([0, 1, 2, 2, 3, 3, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10, 11, 12, 13]));\n\t\t\tassert.deepStrictEqual(getInputOffsets(data, 1), ([7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 8, 9, 10, 10, 10, 10, 11, 12, 13]));\n\t\t});\n\n\t\ttest('getOutputPositionOfInputOffset', () => {\n\t\t\tdata.translateToOutputPosition(20);\n\t\t\tassert.deepStrictEqual(getOutputOffsets(data, PositionAffinity.None), [\n\t\t\t\t'0:0',\n\t\t\t\t'0:1',\n\t\t\t\t'0:2',\n\t\t\t\t'0:4',\n\t\t\t\t'0:7',\n\t\t\t\t'0:8',\n\t\t\t\t'0:9',\n\t\t\t\t'1:10',\n\t\t\t\t'1:11',\n\t\t\t\t'1:12',\n\t\t\t\t'1:13',\n\t\t\t\t'1:17',\n\t\t\t\t'1:18',\n\t\t\t\t'1:19',\n\t\t\t\t'1:20',\n\t\t\t\t'1:21',\n\t\t\t\t'1:22',\n\t\t\t\t'1:23',\n\t\t\t\t'1:24',\n\t\t\t\t'1:25',\n\t\t\t\t'1:26',\n\t\t\t\t'1:27',\n\t\t\t\t'1:28',\n\t\t\t\t'1:29',\n\t\t\t\t'1:30',\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(getOutputOffsets(data, PositionAffinity.Left), [\n\t\t\t\t'0:0',\n\t\t\t\t'0:1',\n\t\t\t\t'0:2',\n\t\t\t\t'0:4',\n\t\t\t\t'0:7',\n\t\t\t\t'0:8',\n\t\t\t\t'0:9',\n\t\t\t\t'0:10',\n\t\t\t\t'1:11',\n\t\t\t\t'1:12',\n\t\t\t\t'1:13',\n\t\t\t\t'1:17',\n\t\t\t\t'1:18',\n\t\t\t\t'1:19',\n\t\t\t\t'1:20',\n\t\t\t\t'1:21',\n\t\t\t\t'1:22',\n\t\t\t\t'1:23',\n\t\t\t\t'1:24',\n\t\t\t\t'1:25',\n\t\t\t\t'1:26',\n\t\t\t\t'1:27',\n\t\t\t\t'1:28',\n\t\t\t\t'1:29',\n\t\t\t\t'1:30',\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(getOutputOffsets(data, PositionAffinity.Right), [\n\t\t\t\t'0:0',\n\t\t\t\t'0:1',\n\t\t\t\t'0:3',\n\t\t\t\t'0:6',\n\t\t\t\t'0:7',\n\t\t\t\t'0:8',\n\t\t\t\t'0:9',\n\t\t\t\t'1:10',\n\t\t\t\t'1:11',\n\t\t\t\t'1:12',\n\t\t\t\t'1:16',\n\t\t\t\t'1:17',\n\t\t\t\t'1:18',\n\t\t\t\t'1:19',\n\t\t\t\t'1:20',\n\t\t\t\t'1:21',\n\t\t\t\t'1:22',\n\t\t\t\t'1:23',\n\t\t\t\t'1:24',\n\t\t\t\t'1:25',\n\t\t\t\t'1:26',\n\t\t\t\t'1:27',\n\t\t\t\t'1:28',\n\t\t\t\t'1:29',\n\t\t\t\t'1:30',\n\t\t\t]);\n\t\t});\n\n\t\ttest('getInputOffsetOfOutputPosition is inverse of getOutputPositionOfInputOffset', () => {\n\t\t\ttestInverse(data);\n\t\t});\n\n\n\t\ttest('normalization', () => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\tsequence(25)\n\t\t\t\t\t.map((v) =>\n\t\t\t\t\t\tdata.normalizeOutputPosition(1, v, PositionAffinity.Right)\n\t\t\t\t\t)\n\t\t\t\t\t.map((s) => s.toString()),\n\t\t\t\t[\n\t\t\t\t\t'1:0',\n\t\t\t\t\t'1:1',\n\t\t\t\t\t'1:2',\n\t\t\t\t\t'1:3',\n\t\t\t\t\t'1:4',\n\t\t\t\t\t'1:5',\n\t\t\t\t\t'1:6',\n\t\t\t\t\t'1:7',\n\t\t\t\t\t'1:8',\n\t\t\t\t\t'1:9',\n\t\t\t\t\t'1:10',\n\t\t\t\t\t'1:11',\n\t\t\t\t\t'1:12',\n\t\t\t\t\t'1:16',\n\t\t\t\t\t'1:16',\n\t\t\t\t\t'1:16',\n\t\t\t\t\t'1:16',\n\t\t\t\t\t'1:17',\n\t\t\t\t\t'1:18',\n\t\t\t\t\t'1:19',\n\t\t\t\t\t'1:20',\n\t\t\t\t\t'1:21',\n\t\t\t\t\t'1:22',\n\t\t\t\t\t'1:23',\n\t\t\t\t\t'1:24',\n\t\t\t\t]\n\t\t\t);\n\t\t});\n\t});\n\n\tsuite('Injected Text 2', () => {\n\t\tconst data = new ModelLineProjectionData([2, 2, 6], mapTextToInjectedTextOptions(['1', '22', '333']), [10, 100], [], 0);\n\n\t\ttest('getInputOffsetOfOutputPosition', () => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\tgetInputOffsets(data, 0),\n\t\t\t\t[0, 1, 2, 2, 2, 2, 3, 4, 5, 6, 6, 6, 6, 7, 8, 9, 10, 11, 12, 13]\n\t\t\t);\n\t\t\tassert.deepStrictEqual(\n\t\t\t\tgetInputOffsets(data, 1),\n\t\t\t\t[\n\t\t\t\t\t6, 6, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22,\n\t\t\t\t\t23,\n\t\t\t\t]\n\t\t\t);\n\t\t});\n\n\t\ttest('getInputOffsetOfOutputPosition is inverse of getOutputPositionOfInputOffset', () => {\n\t\t\ttestInverse(data);\n\t\t});\n\t});\n\n\tsuite('Injected Text 3', () => {\n\t\tconst data = new ModelLineProjectionData([2, 2, 7], mapTextToInjectedTextOptions(['1', '22', '333']), [10, 100], [], 0);\n\n\t\ttest('getInputOffsetOfOutputPosition', () => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\tgetInputOffsets(data, 0),\n\t\t\t\t[0, 1, 2, 2, 2, 2, 3, 4, 5, 6, 7, 7, 7, 7, 8, 9, 10, 11, 12, 13]\n\t\t\t);\n\t\t\tassert.deepStrictEqual(\n\t\t\t\tgetInputOffsets(data, 1),\n\t\t\t\t[\n\t\t\t\t\t7, 7, 7, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22,\n\t\t\t\t\t23,\n\t\t\t\t]\n\t\t\t);\n\t\t});\n\n\t\ttest('getInputOffsetOfOutputPosition is inverse of getOutputPositionOfInputOffset', () => {\n\t\t\ttestInverse(data);\n\t\t});\n\t});\n});\n"]}