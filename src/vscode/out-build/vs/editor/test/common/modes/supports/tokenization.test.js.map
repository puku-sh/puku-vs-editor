{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/test/common/modes/supports/tokenization.test.ts","vs/editor/test/common/modes/supports/tokenization.test.ts"],"names":[],"mappings":"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","file":"tokenization.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { FontStyle } from '../../../../common/encodedTokenAttributes.js';\nimport { ColorMap, ExternalThemeTrieElement, ParsedTokenThemeRule, ThemeTrieElementRule, TokenTheme, parseTokenTheme, strcmp } from '../../../../common/languages/supports/tokenization.js';\n\nsuite('Token theme matching', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('gives higher priority to deeper matches', () => {\n\t\tconst theme = TokenTheme.createFromRawTokenTheme([\n\t\t\t{ token: '', foreground: '100000', background: '200000' },\n\t\t\t{ token: 'punctuation.definition.string.begin.html', foreground: '300000' },\n\t\t\t{ token: 'punctuation.definition.string', foreground: '400000' },\n\t\t], []);\n\n\t\tconst colorMap = new ColorMap();\n\t\tcolorMap.getId('100000');\n\t\tconst _B = colorMap.getId('200000');\n\t\tcolorMap.getId('400000');\n\t\tconst _D = colorMap.getId('300000');\n\n\t\tconst actual = theme._match('punctuation.definition.string.begin.html');\n\n\t\tassert.deepStrictEqual(actual, new ThemeTrieElementRule(FontStyle.None, _D, _B));\n\t});\n\n\ttest('can match', () => {\n\t\tconst theme = TokenTheme.createFromRawTokenTheme([\n\t\t\t{ token: '', foreground: 'F8F8F2', background: '272822' },\n\t\t\t{ token: 'source', background: '100000' },\n\t\t\t{ token: 'something', background: '100000' },\n\t\t\t{ token: 'bar', background: '200000' },\n\t\t\t{ token: 'baz', background: '200000' },\n\t\t\t{ token: 'bar', fontStyle: 'bold' },\n\t\t\t{ token: 'constant', fontStyle: 'italic', foreground: '300000' },\n\t\t\t{ token: 'constant.numeric', foreground: '400000' },\n\t\t\t{ token: 'constant.numeric.hex', fontStyle: 'bold' },\n\t\t\t{ token: 'constant.numeric.oct', fontStyle: 'bold italic underline' },\n\t\t\t{ token: 'constant.numeric.bin', fontStyle: 'bold strikethrough' },\n\t\t\t{ token: 'constant.numeric.dec', fontStyle: '', foreground: '500000' },\n\t\t\t{ token: 'storage.object.bar', fontStyle: '', foreground: '600000' },\n\t\t], []);\n\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('F8F8F2');\n\t\tconst _B = colorMap.getId('272822');\n\t\tconst _C = colorMap.getId('200000');\n\t\tconst _D = colorMap.getId('300000');\n\t\tconst _E = colorMap.getId('400000');\n\t\tconst _F = colorMap.getId('500000');\n\t\tconst _G = colorMap.getId('100000');\n\t\tconst _H = colorMap.getId('600000');\n\n\t\tfunction assertMatch(scopeName: string, expected: ThemeTrieElementRule): void {\n\t\t\tconst actual = theme._match(scopeName);\n\t\t\tassert.deepStrictEqual(actual, expected, 'when matching <<' + scopeName + '>>');\n\t\t}\n\n\t\tfunction assertSimpleMatch(scopeName: string, fontStyle: FontStyle, foreground: number, background: number): void {\n\t\t\tassertMatch(scopeName, new ThemeTrieElementRule(fontStyle, foreground, background));\n\t\t}\n\n\t\tfunction assertNoMatch(scopeName: string): void {\n\t\t\tassertMatch(scopeName, new ThemeTrieElementRule(FontStyle.None, _A, _B));\n\t\t}\n\n\t\t// matches defaults\n\t\tassertNoMatch('');\n\t\tassertNoMatch('bazz');\n\t\tassertNoMatch('asdfg');\n\n\t\t// matches source\n\t\tassertSimpleMatch('source', FontStyle.None, _A, _G);\n\t\tassertSimpleMatch('source.ts', FontStyle.None, _A, _G);\n\t\tassertSimpleMatch('source.tss', FontStyle.None, _A, _G);\n\n\t\t// matches something\n\t\tassertSimpleMatch('something', FontStyle.None, _A, _G);\n\t\tassertSimpleMatch('something.ts', FontStyle.None, _A, _G);\n\t\tassertSimpleMatch('something.tss', FontStyle.None, _A, _G);\n\n\t\t// matches baz\n\t\tassertSimpleMatch('baz', FontStyle.None, _A, _C);\n\t\tassertSimpleMatch('baz.ts', FontStyle.None, _A, _C);\n\t\tassertSimpleMatch('baz.tss', FontStyle.None, _A, _C);\n\n\t\t// matches constant\n\t\tassertSimpleMatch('constant', FontStyle.Italic, _D, _B);\n\t\tassertSimpleMatch('constant.string', FontStyle.Italic, _D, _B);\n\t\tassertSimpleMatch('constant.hex', FontStyle.Italic, _D, _B);\n\n\t\t// matches constant.numeric\n\t\tassertSimpleMatch('constant.numeric', FontStyle.Italic, _E, _B);\n\t\tassertSimpleMatch('constant.numeric.baz', FontStyle.Italic, _E, _B);\n\n\t\t// matches constant.numeric.hex\n\t\tassertSimpleMatch('constant.numeric.hex', FontStyle.Bold, _E, _B);\n\t\tassertSimpleMatch('constant.numeric.hex.baz', FontStyle.Bold, _E, _B);\n\n\t\t// matches constant.numeric.oct\n\t\tassertSimpleMatch('constant.numeric.oct', FontStyle.Bold | FontStyle.Italic | FontStyle.Underline, _E, _B);\n\t\tassertSimpleMatch('constant.numeric.oct.baz', FontStyle.Bold | FontStyle.Italic | FontStyle.Underline, _E, _B);\n\n\t\t// matches constant.numeric.bin\n\t\tassertSimpleMatch('constant.numeric.bin', FontStyle.Bold | FontStyle.Strikethrough, _E, _B);\n\t\tassertSimpleMatch('constant.numeric.bin.baz', FontStyle.Bold | FontStyle.Strikethrough, _E, _B);\n\n\t\t// matches constant.numeric.dec\n\t\tassertSimpleMatch('constant.numeric.dec', FontStyle.None, _F, _B);\n\t\tassertSimpleMatch('constant.numeric.dec.baz', FontStyle.None, _F, _B);\n\n\t\t// matches storage.object.bar\n\t\tassertSimpleMatch('storage.object.bar', FontStyle.None, _H, _B);\n\t\tassertSimpleMatch('storage.object.bar.baz', FontStyle.None, _H, _B);\n\n\t\t// does not match storage.object.bar\n\t\tassertSimpleMatch('storage.object.bart', FontStyle.None, _A, _B);\n\t\tassertSimpleMatch('storage.object', FontStyle.None, _A, _B);\n\t\tassertSimpleMatch('storage', FontStyle.None, _A, _B);\n\n\t\tassertSimpleMatch('bar', FontStyle.Bold, _A, _C);\n\t});\n});\n\nsuite('Token theme parsing', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('can parse', () => {\n\n\t\tconst actual = parseTokenTheme([\n\t\t\t{ token: '', foreground: 'F8F8F2', background: '272822' },\n\t\t\t{ token: 'source', background: '100000' },\n\t\t\t{ token: 'something', background: '100000' },\n\t\t\t{ token: 'bar', background: '010000' },\n\t\t\t{ token: 'baz', background: '010000' },\n\t\t\t{ token: 'bar', fontStyle: 'bold' },\n\t\t\t{ token: 'constant', fontStyle: 'italic', foreground: 'ff0000' },\n\t\t\t{ token: 'constant.numeric', foreground: '00ff00' },\n\t\t\t{ token: 'constant.numeric.hex', fontStyle: 'bold' },\n\t\t\t{ token: 'constant.numeric.oct', fontStyle: 'bold italic underline' },\n\t\t\t{ token: 'constant.numeric.dec', fontStyle: '', foreground: '0000ff' },\n\t\t]);\n\n\t\tconst expected = [\n\t\t\tnew ParsedTokenThemeRule('', 0, FontStyle.NotSet, 'F8F8F2', '272822'),\n\t\t\tnew ParsedTokenThemeRule('source', 1, FontStyle.NotSet, null, '100000'),\n\t\t\tnew ParsedTokenThemeRule('something', 2, FontStyle.NotSet, null, '100000'),\n\t\t\tnew ParsedTokenThemeRule('bar', 3, FontStyle.NotSet, null, '010000'),\n\t\t\tnew ParsedTokenThemeRule('baz', 4, FontStyle.NotSet, null, '010000'),\n\t\t\tnew ParsedTokenThemeRule('bar', 5, FontStyle.Bold, null, null),\n\t\t\tnew ParsedTokenThemeRule('constant', 6, FontStyle.Italic, 'ff0000', null),\n\t\t\tnew ParsedTokenThemeRule('constant.numeric', 7, FontStyle.NotSet, '00ff00', null),\n\t\t\tnew ParsedTokenThemeRule('constant.numeric.hex', 8, FontStyle.Bold, null, null),\n\t\t\tnew ParsedTokenThemeRule('constant.numeric.oct', 9, FontStyle.Bold | FontStyle.Italic | FontStyle.Underline, null, null),\n\t\t\tnew ParsedTokenThemeRule('constant.numeric.dec', 10, FontStyle.None, '0000ff', null),\n\t\t];\n\n\t\tassert.deepStrictEqual(actual, expected);\n\t});\n});\n\nsuite('Token theme resolving', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('strcmp works', () => {\n\t\tconst actual = ['bar', 'z', 'zu', 'a', 'ab', ''].sort(strcmp);\n\n\t\tconst expected = ['', 'a', 'ab', 'bar', 'z', 'zu'];\n\t\tassert.deepStrictEqual(actual, expected);\n\t});\n\n\ttest('always has defaults', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('000000');\n\t\tconst _B = colorMap.getId('ffffff');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B)));\n\t});\n\n\ttest('respects incoming defaults 1', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, null, null)\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('000000');\n\t\tconst _B = colorMap.getId('ffffff');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B)));\n\t});\n\n\ttest('respects incoming defaults 2', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.None, null, null)\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('000000');\n\t\tconst _B = colorMap.getId('ffffff');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B)));\n\t});\n\n\ttest('respects incoming defaults 3', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.Bold, null, null)\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('000000');\n\t\tconst _B = colorMap.getId('ffffff');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold, _A, _B)));\n\t});\n\n\ttest('respects incoming defaults 4', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, 'ff0000', null)\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('ff0000');\n\t\tconst _B = colorMap.getId('ffffff');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B)));\n\t});\n\n\ttest('respects incoming defaults 5', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, null, 'ff0000')\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('000000');\n\t\tconst _B = colorMap.getId('ff0000');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B)));\n\t});\n\n\ttest('can merge incoming defaults', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, null, 'ff0000'),\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, '00ff00', null),\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.Bold, null, null),\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('00ff00');\n\t\tconst _B = colorMap.getId('ff0000');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold, _A, _B)));\n\t});\n\n\ttest('defaults are inherited', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, 'F8F8F2', '272822'),\n\t\t\tnew ParsedTokenThemeRule('var', -1, FontStyle.NotSet, 'ff0000', null)\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('F8F8F2');\n\t\tconst _B = colorMap.getId('272822');\n\t\tconst _C = colorMap.getId('ff0000');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tconst root = new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B), {\n\t\t\t'var': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _C, _B))\n\t\t});\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), root);\n\t});\n\n\ttest('same rules get merged', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, 'F8F8F2', '272822'),\n\t\t\tnew ParsedTokenThemeRule('var', 1, FontStyle.Bold, null, null),\n\t\t\tnew ParsedTokenThemeRule('var', 0, FontStyle.NotSet, 'ff0000', null),\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('F8F8F2');\n\t\tconst _B = colorMap.getId('272822');\n\t\tconst _C = colorMap.getId('ff0000');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tconst root = new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B), {\n\t\t\t'var': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold, _C, _B))\n\t\t});\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), root);\n\t});\n\n\ttest('rules are inherited 1', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, 'F8F8F2', '272822'),\n\t\t\tnew ParsedTokenThemeRule('var', -1, FontStyle.Bold, 'ff0000', null),\n\t\t\tnew ParsedTokenThemeRule('var.identifier', -1, FontStyle.NotSet, '00ff00', null),\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('F8F8F2');\n\t\tconst _B = colorMap.getId('272822');\n\t\tconst _C = colorMap.getId('ff0000');\n\t\tconst _D = colorMap.getId('00ff00');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tconst root = new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B), {\n\t\t\t'var': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold, _C, _B), {\n\t\t\t\t'identifier': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold, _D, _B))\n\t\t\t})\n\t\t});\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), root);\n\t});\n\n\ttest('rules are inherited 2', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, 'F8F8F2', '272822'),\n\t\t\tnew ParsedTokenThemeRule('var', -1, FontStyle.Bold, 'ff0000', null),\n\t\t\tnew ParsedTokenThemeRule('var.identifier', -1, FontStyle.NotSet, '00ff00', null),\n\t\t\tnew ParsedTokenThemeRule('constant', 4, FontStyle.Italic, '100000', null),\n\t\t\tnew ParsedTokenThemeRule('constant.numeric', 5, FontStyle.NotSet, '200000', null),\n\t\t\tnew ParsedTokenThemeRule('constant.numeric.hex', 6, FontStyle.Bold, null, null),\n\t\t\tnew ParsedTokenThemeRule('constant.numeric.oct', 7, FontStyle.Bold | FontStyle.Italic | FontStyle.Underline, null, null),\n\t\t\tnew ParsedTokenThemeRule('constant.numeric.dec', 8, FontStyle.None, '300000', null),\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('F8F8F2');\n\t\tconst _B = colorMap.getId('272822');\n\t\tconst _C = colorMap.getId('100000');\n\t\tconst _D = colorMap.getId('200000');\n\t\tconst _E = colorMap.getId('300000');\n\t\tconst _F = colorMap.getId('ff0000');\n\t\tconst _G = colorMap.getId('00ff00');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tconst root = new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B), {\n\t\t\t'var': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold, _F, _B), {\n\t\t\t\t'identifier': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold, _G, _B))\n\t\t\t}),\n\t\t\t'constant': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Italic, _C, _B), {\n\t\t\t\t'numeric': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Italic, _D, _B), {\n\t\t\t\t\t'hex': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold, _D, _B)),\n\t\t\t\t\t'oct': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold | FontStyle.Italic | FontStyle.Underline, _D, _B)),\n\t\t\t\t\t'dec': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _E, _B)),\n\t\t\t\t})\n\t\t\t})\n\t\t});\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), root);\n\t});\n\n\ttest('custom colors are first in color map', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('var', -1, FontStyle.NotSet, 'F8F8F2', null)\n\t\t], [\n\t\t\t'000000', 'FFFFFF', '0F0F0F'\n\t\t]);\n\t\tconst colorMap = new ColorMap();\n\t\tcolorMap.getId('000000');\n\t\tcolorMap.getId('FFFFFF');\n\t\tcolorMap.getId('0F0F0F');\n\t\tcolorMap.getId('F8F8F2');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { FontStyle } from '../../../../common/encodedTokenAttributes.js';\nimport { ColorMap, ExternalThemeTrieElement, ParsedTokenThemeRule, ThemeTrieElementRule, TokenTheme, parseTokenTheme, strcmp } from '../../../../common/languages/supports/tokenization.js';\n\nsuite('Token theme matching', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('gives higher priority to deeper matches', () => {\n\t\tconst theme = TokenTheme.createFromRawTokenTheme([\n\t\t\t{ token: '', foreground: '100000', background: '200000' },\n\t\t\t{ token: 'punctuation.definition.string.begin.html', foreground: '300000' },\n\t\t\t{ token: 'punctuation.definition.string', foreground: '400000' },\n\t\t], []);\n\n\t\tconst colorMap = new ColorMap();\n\t\tcolorMap.getId('100000');\n\t\tconst _B = colorMap.getId('200000');\n\t\tcolorMap.getId('400000');\n\t\tconst _D = colorMap.getId('300000');\n\n\t\tconst actual = theme._match('punctuation.definition.string.begin.html');\n\n\t\tassert.deepStrictEqual(actual, new ThemeTrieElementRule(FontStyle.None, _D, _B));\n\t});\n\n\ttest('can match', () => {\n\t\tconst theme = TokenTheme.createFromRawTokenTheme([\n\t\t\t{ token: '', foreground: 'F8F8F2', background: '272822' },\n\t\t\t{ token: 'source', background: '100000' },\n\t\t\t{ token: 'something', background: '100000' },\n\t\t\t{ token: 'bar', background: '200000' },\n\t\t\t{ token: 'baz', background: '200000' },\n\t\t\t{ token: 'bar', fontStyle: 'bold' },\n\t\t\t{ token: 'constant', fontStyle: 'italic', foreground: '300000' },\n\t\t\t{ token: 'constant.numeric', foreground: '400000' },\n\t\t\t{ token: 'constant.numeric.hex', fontStyle: 'bold' },\n\t\t\t{ token: 'constant.numeric.oct', fontStyle: 'bold italic underline' },\n\t\t\t{ token: 'constant.numeric.bin', fontStyle: 'bold strikethrough' },\n\t\t\t{ token: 'constant.numeric.dec', fontStyle: '', foreground: '500000' },\n\t\t\t{ token: 'storage.object.bar', fontStyle: '', foreground: '600000' },\n\t\t], []);\n\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('F8F8F2');\n\t\tconst _B = colorMap.getId('272822');\n\t\tconst _C = colorMap.getId('200000');\n\t\tconst _D = colorMap.getId('300000');\n\t\tconst _E = colorMap.getId('400000');\n\t\tconst _F = colorMap.getId('500000');\n\t\tconst _G = colorMap.getId('100000');\n\t\tconst _H = colorMap.getId('600000');\n\n\t\tfunction assertMatch(scopeName: string, expected: ThemeTrieElementRule): void {\n\t\t\tconst actual = theme._match(scopeName);\n\t\t\tassert.deepStrictEqual(actual, expected, 'when matching <<' + scopeName + '>>');\n\t\t}\n\n\t\tfunction assertSimpleMatch(scopeName: string, fontStyle: FontStyle, foreground: number, background: number): void {\n\t\t\tassertMatch(scopeName, new ThemeTrieElementRule(fontStyle, foreground, background));\n\t\t}\n\n\t\tfunction assertNoMatch(scopeName: string): void {\n\t\t\tassertMatch(scopeName, new ThemeTrieElementRule(FontStyle.None, _A, _B));\n\t\t}\n\n\t\t// matches defaults\n\t\tassertNoMatch('');\n\t\tassertNoMatch('bazz');\n\t\tassertNoMatch('asdfg');\n\n\t\t// matches source\n\t\tassertSimpleMatch('source', FontStyle.None, _A, _G);\n\t\tassertSimpleMatch('source.ts', FontStyle.None, _A, _G);\n\t\tassertSimpleMatch('source.tss', FontStyle.None, _A, _G);\n\n\t\t// matches something\n\t\tassertSimpleMatch('something', FontStyle.None, _A, _G);\n\t\tassertSimpleMatch('something.ts', FontStyle.None, _A, _G);\n\t\tassertSimpleMatch('something.tss', FontStyle.None, _A, _G);\n\n\t\t// matches baz\n\t\tassertSimpleMatch('baz', FontStyle.None, _A, _C);\n\t\tassertSimpleMatch('baz.ts', FontStyle.None, _A, _C);\n\t\tassertSimpleMatch('baz.tss', FontStyle.None, _A, _C);\n\n\t\t// matches constant\n\t\tassertSimpleMatch('constant', FontStyle.Italic, _D, _B);\n\t\tassertSimpleMatch('constant.string', FontStyle.Italic, _D, _B);\n\t\tassertSimpleMatch('constant.hex', FontStyle.Italic, _D, _B);\n\n\t\t// matches constant.numeric\n\t\tassertSimpleMatch('constant.numeric', FontStyle.Italic, _E, _B);\n\t\tassertSimpleMatch('constant.numeric.baz', FontStyle.Italic, _E, _B);\n\n\t\t// matches constant.numeric.hex\n\t\tassertSimpleMatch('constant.numeric.hex', FontStyle.Bold, _E, _B);\n\t\tassertSimpleMatch('constant.numeric.hex.baz', FontStyle.Bold, _E, _B);\n\n\t\t// matches constant.numeric.oct\n\t\tassertSimpleMatch('constant.numeric.oct', FontStyle.Bold | FontStyle.Italic | FontStyle.Underline, _E, _B);\n\t\tassertSimpleMatch('constant.numeric.oct.baz', FontStyle.Bold | FontStyle.Italic | FontStyle.Underline, _E, _B);\n\n\t\t// matches constant.numeric.bin\n\t\tassertSimpleMatch('constant.numeric.bin', FontStyle.Bold | FontStyle.Strikethrough, _E, _B);\n\t\tassertSimpleMatch('constant.numeric.bin.baz', FontStyle.Bold | FontStyle.Strikethrough, _E, _B);\n\n\t\t// matches constant.numeric.dec\n\t\tassertSimpleMatch('constant.numeric.dec', FontStyle.None, _F, _B);\n\t\tassertSimpleMatch('constant.numeric.dec.baz', FontStyle.None, _F, _B);\n\n\t\t// matches storage.object.bar\n\t\tassertSimpleMatch('storage.object.bar', FontStyle.None, _H, _B);\n\t\tassertSimpleMatch('storage.object.bar.baz', FontStyle.None, _H, _B);\n\n\t\t// does not match storage.object.bar\n\t\tassertSimpleMatch('storage.object.bart', FontStyle.None, _A, _B);\n\t\tassertSimpleMatch('storage.object', FontStyle.None, _A, _B);\n\t\tassertSimpleMatch('storage', FontStyle.None, _A, _B);\n\n\t\tassertSimpleMatch('bar', FontStyle.Bold, _A, _C);\n\t});\n});\n\nsuite('Token theme parsing', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('can parse', () => {\n\n\t\tconst actual = parseTokenTheme([\n\t\t\t{ token: '', foreground: 'F8F8F2', background: '272822' },\n\t\t\t{ token: 'source', background: '100000' },\n\t\t\t{ token: 'something', background: '100000' },\n\t\t\t{ token: 'bar', background: '010000' },\n\t\t\t{ token: 'baz', background: '010000' },\n\t\t\t{ token: 'bar', fontStyle: 'bold' },\n\t\t\t{ token: 'constant', fontStyle: 'italic', foreground: 'ff0000' },\n\t\t\t{ token: 'constant.numeric', foreground: '00ff00' },\n\t\t\t{ token: 'constant.numeric.hex', fontStyle: 'bold' },\n\t\t\t{ token: 'constant.numeric.oct', fontStyle: 'bold italic underline' },\n\t\t\t{ token: 'constant.numeric.dec', fontStyle: '', foreground: '0000ff' },\n\t\t]);\n\n\t\tconst expected = [\n\t\t\tnew ParsedTokenThemeRule('', 0, FontStyle.NotSet, 'F8F8F2', '272822'),\n\t\t\tnew ParsedTokenThemeRule('source', 1, FontStyle.NotSet, null, '100000'),\n\t\t\tnew ParsedTokenThemeRule('something', 2, FontStyle.NotSet, null, '100000'),\n\t\t\tnew ParsedTokenThemeRule('bar', 3, FontStyle.NotSet, null, '010000'),\n\t\t\tnew ParsedTokenThemeRule('baz', 4, FontStyle.NotSet, null, '010000'),\n\t\t\tnew ParsedTokenThemeRule('bar', 5, FontStyle.Bold, null, null),\n\t\t\tnew ParsedTokenThemeRule('constant', 6, FontStyle.Italic, 'ff0000', null),\n\t\t\tnew ParsedTokenThemeRule('constant.numeric', 7, FontStyle.NotSet, '00ff00', null),\n\t\t\tnew ParsedTokenThemeRule('constant.numeric.hex', 8, FontStyle.Bold, null, null),\n\t\t\tnew ParsedTokenThemeRule('constant.numeric.oct', 9, FontStyle.Bold | FontStyle.Italic | FontStyle.Underline, null, null),\n\t\t\tnew ParsedTokenThemeRule('constant.numeric.dec', 10, FontStyle.None, '0000ff', null),\n\t\t];\n\n\t\tassert.deepStrictEqual(actual, expected);\n\t});\n});\n\nsuite('Token theme resolving', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('strcmp works', () => {\n\t\tconst actual = ['bar', 'z', 'zu', 'a', 'ab', ''].sort(strcmp);\n\n\t\tconst expected = ['', 'a', 'ab', 'bar', 'z', 'zu'];\n\t\tassert.deepStrictEqual(actual, expected);\n\t});\n\n\ttest('always has defaults', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('000000');\n\t\tconst _B = colorMap.getId('ffffff');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B)));\n\t});\n\n\ttest('respects incoming defaults 1', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, null, null)\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('000000');\n\t\tconst _B = colorMap.getId('ffffff');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B)));\n\t});\n\n\ttest('respects incoming defaults 2', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.None, null, null)\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('000000');\n\t\tconst _B = colorMap.getId('ffffff');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B)));\n\t});\n\n\ttest('respects incoming defaults 3', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.Bold, null, null)\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('000000');\n\t\tconst _B = colorMap.getId('ffffff');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold, _A, _B)));\n\t});\n\n\ttest('respects incoming defaults 4', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, 'ff0000', null)\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('ff0000');\n\t\tconst _B = colorMap.getId('ffffff');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B)));\n\t});\n\n\ttest('respects incoming defaults 5', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, null, 'ff0000')\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('000000');\n\t\tconst _B = colorMap.getId('ff0000');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B)));\n\t});\n\n\ttest('can merge incoming defaults', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, null, 'ff0000'),\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, '00ff00', null),\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.Bold, null, null),\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('00ff00');\n\t\tconst _B = colorMap.getId('ff0000');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold, _A, _B)));\n\t});\n\n\ttest('defaults are inherited', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, 'F8F8F2', '272822'),\n\t\t\tnew ParsedTokenThemeRule('var', -1, FontStyle.NotSet, 'ff0000', null)\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('F8F8F2');\n\t\tconst _B = colorMap.getId('272822');\n\t\tconst _C = colorMap.getId('ff0000');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tconst root = new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B), {\n\t\t\t'var': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _C, _B))\n\t\t});\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), root);\n\t});\n\n\ttest('same rules get merged', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, 'F8F8F2', '272822'),\n\t\t\tnew ParsedTokenThemeRule('var', 1, FontStyle.Bold, null, null),\n\t\t\tnew ParsedTokenThemeRule('var', 0, FontStyle.NotSet, 'ff0000', null),\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('F8F8F2');\n\t\tconst _B = colorMap.getId('272822');\n\t\tconst _C = colorMap.getId('ff0000');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tconst root = new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B), {\n\t\t\t'var': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold, _C, _B))\n\t\t});\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), root);\n\t});\n\n\ttest('rules are inherited 1', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, 'F8F8F2', '272822'),\n\t\t\tnew ParsedTokenThemeRule('var', -1, FontStyle.Bold, 'ff0000', null),\n\t\t\tnew ParsedTokenThemeRule('var.identifier', -1, FontStyle.NotSet, '00ff00', null),\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('F8F8F2');\n\t\tconst _B = colorMap.getId('272822');\n\t\tconst _C = colorMap.getId('ff0000');\n\t\tconst _D = colorMap.getId('00ff00');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tconst root = new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B), {\n\t\t\t'var': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold, _C, _B), {\n\t\t\t\t'identifier': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold, _D, _B))\n\t\t\t})\n\t\t});\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), root);\n\t});\n\n\ttest('rules are inherited 2', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('', -1, FontStyle.NotSet, 'F8F8F2', '272822'),\n\t\t\tnew ParsedTokenThemeRule('var', -1, FontStyle.Bold, 'ff0000', null),\n\t\t\tnew ParsedTokenThemeRule('var.identifier', -1, FontStyle.NotSet, '00ff00', null),\n\t\t\tnew ParsedTokenThemeRule('constant', 4, FontStyle.Italic, '100000', null),\n\t\t\tnew ParsedTokenThemeRule('constant.numeric', 5, FontStyle.NotSet, '200000', null),\n\t\t\tnew ParsedTokenThemeRule('constant.numeric.hex', 6, FontStyle.Bold, null, null),\n\t\t\tnew ParsedTokenThemeRule('constant.numeric.oct', 7, FontStyle.Bold | FontStyle.Italic | FontStyle.Underline, null, null),\n\t\t\tnew ParsedTokenThemeRule('constant.numeric.dec', 8, FontStyle.None, '300000', null),\n\t\t], []);\n\t\tconst colorMap = new ColorMap();\n\t\tconst _A = colorMap.getId('F8F8F2');\n\t\tconst _B = colorMap.getId('272822');\n\t\tconst _C = colorMap.getId('100000');\n\t\tconst _D = colorMap.getId('200000');\n\t\tconst _E = colorMap.getId('300000');\n\t\tconst _F = colorMap.getId('ff0000');\n\t\tconst _G = colorMap.getId('00ff00');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t\tconst root = new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _A, _B), {\n\t\t\t'var': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold, _F, _B), {\n\t\t\t\t'identifier': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold, _G, _B))\n\t\t\t}),\n\t\t\t'constant': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Italic, _C, _B), {\n\t\t\t\t'numeric': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Italic, _D, _B), {\n\t\t\t\t\t'hex': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold, _D, _B)),\n\t\t\t\t\t'oct': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.Bold | FontStyle.Italic | FontStyle.Underline, _D, _B)),\n\t\t\t\t\t'dec': new ExternalThemeTrieElement(new ThemeTrieElementRule(FontStyle.None, _E, _B)),\n\t\t\t\t})\n\t\t\t})\n\t\t});\n\t\tassert.deepStrictEqual(actual.getThemeTrieElement(), root);\n\t});\n\n\ttest('custom colors are first in color map', () => {\n\t\tconst actual = TokenTheme.createFromParsedTokenTheme([\n\t\t\tnew ParsedTokenThemeRule('var', -1, FontStyle.NotSet, 'F8F8F2', null)\n\t\t], [\n\t\t\t'000000', 'FFFFFF', '0F0F0F'\n\t\t]);\n\t\tconst colorMap = new ColorMap();\n\t\tcolorMap.getId('000000');\n\t\tcolorMap.getId('FFFFFF');\n\t\tcolorMap.getId('0F0F0F');\n\t\tcolorMap.getId('F8F8F2');\n\t\tassert.deepStrictEqual(actual.getColorMap(), colorMap.getColorMap());\n\t});\n});\n"]}