{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/test/common/modes/supports/onEnter.test.ts","vs/editor/test/common/modes/supports/onEnter.test.ts"],"names":[],"mappings":"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","file":"onEnter.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { CharacterPair, IndentAction } from '../../../../common/languages/languageConfiguration.js';\nimport { OnEnterSupport } from '../../../../common/languages/supports/onEnter.js';\nimport { javascriptOnEnterRules } from './onEnterRules.js';\nimport { EditorAutoIndentStrategy } from '../../../../common/config/editorOptions.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nsuite('OnEnter', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('uses brackets', () => {\n\t\tconst brackets: CharacterPair[] = [\n\t\t\t['(', ')'],\n\t\t\t['begin', 'end']\n\t\t];\n\t\tconst support = new OnEnterSupport({\n\t\t\tbrackets: brackets\n\t\t});\n\t\tconst testIndentAction = (beforeText: string, afterText: string, expected: IndentAction) => {\n\t\t\tconst actual = support.onEnter(EditorAutoIndentStrategy.Advanced, '', beforeText, afterText);\n\t\t\tif (expected === IndentAction.None) {\n\t\t\t\tassert.strictEqual(actual, null);\n\t\t\t} else {\n\t\t\t\tassert.strictEqual(actual!.indentAction, expected);\n\t\t\t}\n\t\t};\n\n\t\ttestIndentAction('a', '', IndentAction.None);\n\t\ttestIndentAction('', 'b', IndentAction.None);\n\t\ttestIndentAction('(', 'b', IndentAction.Indent);\n\t\ttestIndentAction('a', ')', IndentAction.None);\n\t\ttestIndentAction('begin', 'ending', IndentAction.Indent);\n\t\ttestIndentAction('abegin', 'end', IndentAction.None);\n\t\ttestIndentAction('begin', ')', IndentAction.Indent);\n\t\ttestIndentAction('begin', 'end', IndentAction.IndentOutdent);\n\t\ttestIndentAction('begin ', ' end', IndentAction.IndentOutdent);\n\t\ttestIndentAction(' begin', 'end//as', IndentAction.IndentOutdent);\n\t\ttestIndentAction('(', ')', IndentAction.IndentOutdent);\n\t\ttestIndentAction('( ', ')', IndentAction.IndentOutdent);\n\t\ttestIndentAction('a(', ')b', IndentAction.IndentOutdent);\n\n\t\ttestIndentAction('(', '', IndentAction.Indent);\n\t\ttestIndentAction('(', 'foo', IndentAction.Indent);\n\t\ttestIndentAction('begin', 'foo', IndentAction.Indent);\n\t\ttestIndentAction('begin', '', IndentAction.Indent);\n\t});\n\n\n\ttest('Issue #121125: onEnterRules with global modifier', () => {\n\t\tconst support = new OnEnterSupport({\n\t\t\tonEnterRules: [\n\t\t\t\t{\n\t\t\t\t\taction: {\n\t\t\t\t\t\tappendText: '/// ',\n\t\t\t\t\t\tindentAction: IndentAction.Outdent\n\t\t\t\t\t},\n\t\t\t\t\tbeforeText: /^\\s*\\/{3}.*$/gm\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\n\t\tconst testIndentAction = (previousLineText: string, beforeText: string, afterText: string, expectedIndentAction: IndentAction | null, expectedAppendText: string | null, removeText: number = 0) => {\n\t\t\tconst actual = support.onEnter(EditorAutoIndentStrategy.Advanced, previousLineText, beforeText, afterText);\n\t\t\tif (expectedIndentAction === null) {\n\t\t\t\tassert.strictEqual(actual, null, 'isNull:' + beforeText);\n\t\t\t} else {\n\t\t\t\tassert.strictEqual(actual !== null, true, 'isNotNull:' + beforeText);\n\t\t\t\tassert.strictEqual(actual!.indentAction, expectedIndentAction, 'indentAction:' + beforeText);\n\t\t\t\tif (expectedAppendText !== null) {\n\t\t\t\t\tassert.strictEqual(actual!.appendText, expectedAppendText, 'appendText:' + beforeText);\n\t\t\t\t}\n\t\t\t\tif (removeText !== 0) {\n\t\t\t\t\tassert.strictEqual(actual!.removeText, removeText, 'removeText:' + beforeText);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\ttestIndentAction('/// line', '/// line', '', IndentAction.Outdent, '/// ');\n\t\ttestIndentAction('/// line', '/// line', '', IndentAction.Outdent, '/// ');\n\t});\n\n\ttest('uses regExpRules', () => {\n\t\tconst support = new OnEnterSupport({\n\t\t\tonEnterRules: javascriptOnEnterRules\n\t\t});\n\t\tconst testIndentAction = (previousLineText: string, beforeText: string, afterText: string, expectedIndentAction: IndentAction | null, expectedAppendText: string | null, removeText: number = 0) => {\n\t\t\tconst actual = support.onEnter(EditorAutoIndentStrategy.Advanced, previousLineText, beforeText, afterText);\n\t\t\tif (expectedIndentAction === null) {\n\t\t\t\tassert.strictEqual(actual, null, 'isNull:' + beforeText);\n\t\t\t} else {\n\t\t\t\tassert.strictEqual(actual !== null, true, 'isNotNull:' + beforeText);\n\t\t\t\tassert.strictEqual(actual!.indentAction, expectedIndentAction, 'indentAction:' + beforeText);\n\t\t\t\tif (expectedAppendText !== null) {\n\t\t\t\t\tassert.strictEqual(actual!.appendText, expectedAppendText, 'appendText:' + beforeText);\n\t\t\t\t}\n\t\t\t\tif (removeText !== 0) {\n\t\t\t\t\tassert.strictEqual(actual!.removeText, removeText, 'removeText:' + beforeText);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\ttestIndentAction('', '\\t/**', ' */', IndentAction.IndentOutdent, ' * ');\n\t\ttestIndentAction('', '\\t/**', '', IndentAction.None, ' * ');\n\t\ttestIndentAction('', '\\t/** * / * / * /', '', IndentAction.None, ' * ');\n\t\ttestIndentAction('', '\\t/** /*', '', IndentAction.None, ' * ');\n\t\ttestIndentAction('', '/**', '', IndentAction.None, ' * ');\n\t\ttestIndentAction('', '\\t/**/', '', null, null);\n\t\ttestIndentAction('', '\\t/***/', '', null, null);\n\t\ttestIndentAction('', '\\t/*******/', '', null, null);\n\t\ttestIndentAction('', '\\t/** * * * * */', '', null, null);\n\t\ttestIndentAction('', '\\t/** */', '', null, null);\n\t\ttestIndentAction('', '\\t/** asdfg */', '', null, null);\n\t\ttestIndentAction('', '\\t/* asdfg */', '', null, null);\n\t\ttestIndentAction('', '\\t/* asdfg */', '', null, null);\n\t\ttestIndentAction('', '\\t/** asdfg */', '', null, null);\n\t\ttestIndentAction('', '*/', '', null, null);\n\t\ttestIndentAction('', '\\t/*', '', null, null);\n\t\ttestIndentAction('', '\\t*', '', null, null);\n\n\t\ttestIndentAction('\\t/**', '\\t *', '', IndentAction.None, '* ');\n\t\ttestIndentAction('\\t * something', '\\t *', '', IndentAction.None, '* ');\n\t\ttestIndentAction('\\t *', '\\t *', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('', '\\t */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '\\t * */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '\\t * * / * / * / */', '', null, null);\n\n\t\ttestIndentAction('\\t/**', '\\t * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction('\\t * something', '\\t * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction('\\t *', '\\t * ', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('/**', ' * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' * something', ' * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' *', ' * asdfsfagadfg', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('/**', ' * asdfsfagadfg * * * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' * something', ' * asdfsfagadfg * * * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' *', ' * asdfsfagadfg * * * ', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('/**', ' * /*', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' * something', ' * /*', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' *', ' * /*', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('/**', ' * asdfsfagadfg * / * / * /', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' * something', ' * asdfsfagadfg * / * / * /', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' *', ' * asdfsfagadfg * / * / * /', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('/**', ' * asdfsfagadfg * / * / * /*', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' * something', ' * asdfsfagadfg * / * / * /*', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' *', ' * asdfsfagadfg * / * / * /*', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('', ' */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction(' */', ' * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('', '\\t */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '\\t\\t */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '   */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '     */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '\\t     */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', ' *--------------------------------------------------------------------------------------------*/', '', IndentAction.None, null, 1);\n\n\t\t// issue #43469\n\t\ttestIndentAction('class A {', '    * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('', '    * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('    ', '    * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('class A {', '  * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('', '  * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('  ', '  * test() {', '', IndentAction.Indent, null, 0);\n\t});\n\n\ttest('issue #141816', () => {\n\t\tconst support = new OnEnterSupport({\n\t\t\tonEnterRules: javascriptOnEnterRules\n\t\t});\n\t\tconst testIndentAction = (beforeText: string, afterText: string, expected: IndentAction) => {\n\t\t\tconst actual = support.onEnter(EditorAutoIndentStrategy.Advanced, '', beforeText, afterText);\n\t\t\tif (expected === IndentAction.None) {\n\t\t\t\tassert.strictEqual(actual, null);\n\t\t\t} else {\n\t\t\t\tassert.strictEqual(actual!.indentAction, expected);\n\t\t\t}\n\t\t};\n\n\t\ttestIndentAction('const r = /{/;', '', IndentAction.None);\n\t\ttestIndentAction('const r = /{[0-9]/;', '', IndentAction.None);\n\t\ttestIndentAction('const r = /[a-zA-Z]{/;', '', IndentAction.None);\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { CharacterPair, IndentAction } from '../../../../common/languages/languageConfiguration.js';\nimport { OnEnterSupport } from '../../../../common/languages/supports/onEnter.js';\nimport { javascriptOnEnterRules } from './onEnterRules.js';\nimport { EditorAutoIndentStrategy } from '../../../../common/config/editorOptions.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nsuite('OnEnter', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('uses brackets', () => {\n\t\tconst brackets: CharacterPair[] = [\n\t\t\t['(', ')'],\n\t\t\t['begin', 'end']\n\t\t];\n\t\tconst support = new OnEnterSupport({\n\t\t\tbrackets: brackets\n\t\t});\n\t\tconst testIndentAction = (beforeText: string, afterText: string, expected: IndentAction) => {\n\t\t\tconst actual = support.onEnter(EditorAutoIndentStrategy.Advanced, '', beforeText, afterText);\n\t\t\tif (expected === IndentAction.None) {\n\t\t\t\tassert.strictEqual(actual, null);\n\t\t\t} else {\n\t\t\t\tassert.strictEqual(actual!.indentAction, expected);\n\t\t\t}\n\t\t};\n\n\t\ttestIndentAction('a', '', IndentAction.None);\n\t\ttestIndentAction('', 'b', IndentAction.None);\n\t\ttestIndentAction('(', 'b', IndentAction.Indent);\n\t\ttestIndentAction('a', ')', IndentAction.None);\n\t\ttestIndentAction('begin', 'ending', IndentAction.Indent);\n\t\ttestIndentAction('abegin', 'end', IndentAction.None);\n\t\ttestIndentAction('begin', ')', IndentAction.Indent);\n\t\ttestIndentAction('begin', 'end', IndentAction.IndentOutdent);\n\t\ttestIndentAction('begin ', ' end', IndentAction.IndentOutdent);\n\t\ttestIndentAction(' begin', 'end//as', IndentAction.IndentOutdent);\n\t\ttestIndentAction('(', ')', IndentAction.IndentOutdent);\n\t\ttestIndentAction('( ', ')', IndentAction.IndentOutdent);\n\t\ttestIndentAction('a(', ')b', IndentAction.IndentOutdent);\n\n\t\ttestIndentAction('(', '', IndentAction.Indent);\n\t\ttestIndentAction('(', 'foo', IndentAction.Indent);\n\t\ttestIndentAction('begin', 'foo', IndentAction.Indent);\n\t\ttestIndentAction('begin', '', IndentAction.Indent);\n\t});\n\n\n\ttest('Issue #121125: onEnterRules with global modifier', () => {\n\t\tconst support = new OnEnterSupport({\n\t\t\tonEnterRules: [\n\t\t\t\t{\n\t\t\t\t\taction: {\n\t\t\t\t\t\tappendText: '/// ',\n\t\t\t\t\t\tindentAction: IndentAction.Outdent\n\t\t\t\t\t},\n\t\t\t\t\tbeforeText: /^\\s*\\/{3}.*$/gm\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\n\t\tconst testIndentAction = (previousLineText: string, beforeText: string, afterText: string, expectedIndentAction: IndentAction | null, expectedAppendText: string | null, removeText: number = 0) => {\n\t\t\tconst actual = support.onEnter(EditorAutoIndentStrategy.Advanced, previousLineText, beforeText, afterText);\n\t\t\tif (expectedIndentAction === null) {\n\t\t\t\tassert.strictEqual(actual, null, 'isNull:' + beforeText);\n\t\t\t} else {\n\t\t\t\tassert.strictEqual(actual !== null, true, 'isNotNull:' + beforeText);\n\t\t\t\tassert.strictEqual(actual!.indentAction, expectedIndentAction, 'indentAction:' + beforeText);\n\t\t\t\tif (expectedAppendText !== null) {\n\t\t\t\t\tassert.strictEqual(actual!.appendText, expectedAppendText, 'appendText:' + beforeText);\n\t\t\t\t}\n\t\t\t\tif (removeText !== 0) {\n\t\t\t\t\tassert.strictEqual(actual!.removeText, removeText, 'removeText:' + beforeText);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\ttestIndentAction('/// line', '/// line', '', IndentAction.Outdent, '/// ');\n\t\ttestIndentAction('/// line', '/// line', '', IndentAction.Outdent, '/// ');\n\t});\n\n\ttest('uses regExpRules', () => {\n\t\tconst support = new OnEnterSupport({\n\t\t\tonEnterRules: javascriptOnEnterRules\n\t\t});\n\t\tconst testIndentAction = (previousLineText: string, beforeText: string, afterText: string, expectedIndentAction: IndentAction | null, expectedAppendText: string | null, removeText: number = 0) => {\n\t\t\tconst actual = support.onEnter(EditorAutoIndentStrategy.Advanced, previousLineText, beforeText, afterText);\n\t\t\tif (expectedIndentAction === null) {\n\t\t\t\tassert.strictEqual(actual, null, 'isNull:' + beforeText);\n\t\t\t} else {\n\t\t\t\tassert.strictEqual(actual !== null, true, 'isNotNull:' + beforeText);\n\t\t\t\tassert.strictEqual(actual!.indentAction, expectedIndentAction, 'indentAction:' + beforeText);\n\t\t\t\tif (expectedAppendText !== null) {\n\t\t\t\t\tassert.strictEqual(actual!.appendText, expectedAppendText, 'appendText:' + beforeText);\n\t\t\t\t}\n\t\t\t\tif (removeText !== 0) {\n\t\t\t\t\tassert.strictEqual(actual!.removeText, removeText, 'removeText:' + beforeText);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\ttestIndentAction('', '\\t/**', ' */', IndentAction.IndentOutdent, ' * ');\n\t\ttestIndentAction('', '\\t/**', '', IndentAction.None, ' * ');\n\t\ttestIndentAction('', '\\t/** * / * / * /', '', IndentAction.None, ' * ');\n\t\ttestIndentAction('', '\\t/** /*', '', IndentAction.None, ' * ');\n\t\ttestIndentAction('', '/**', '', IndentAction.None, ' * ');\n\t\ttestIndentAction('', '\\t/**/', '', null, null);\n\t\ttestIndentAction('', '\\t/***/', '', null, null);\n\t\ttestIndentAction('', '\\t/*******/', '', null, null);\n\t\ttestIndentAction('', '\\t/** * * * * */', '', null, null);\n\t\ttestIndentAction('', '\\t/** */', '', null, null);\n\t\ttestIndentAction('', '\\t/** asdfg */', '', null, null);\n\t\ttestIndentAction('', '\\t/* asdfg */', '', null, null);\n\t\ttestIndentAction('', '\\t/* asdfg */', '', null, null);\n\t\ttestIndentAction('', '\\t/** asdfg */', '', null, null);\n\t\ttestIndentAction('', '*/', '', null, null);\n\t\ttestIndentAction('', '\\t/*', '', null, null);\n\t\ttestIndentAction('', '\\t*', '', null, null);\n\n\t\ttestIndentAction('\\t/**', '\\t *', '', IndentAction.None, '* ');\n\t\ttestIndentAction('\\t * something', '\\t *', '', IndentAction.None, '* ');\n\t\ttestIndentAction('\\t *', '\\t *', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('', '\\t */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '\\t * */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '\\t * * / * / * / */', '', null, null);\n\n\t\ttestIndentAction('\\t/**', '\\t * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction('\\t * something', '\\t * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction('\\t *', '\\t * ', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('/**', ' * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' * something', ' * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' *', ' * asdfsfagadfg', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('/**', ' * asdfsfagadfg * * * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' * something', ' * asdfsfagadfg * * * ', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' *', ' * asdfsfagadfg * * * ', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('/**', ' * /*', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' * something', ' * /*', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' *', ' * /*', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('/**', ' * asdfsfagadfg * / * / * /', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' * something', ' * asdfsfagadfg * / * / * /', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' *', ' * asdfsfagadfg * / * / * /', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('/**', ' * asdfsfagadfg * / * / * /*', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' * something', ' * asdfsfagadfg * / * / * /*', '', IndentAction.None, '* ');\n\t\ttestIndentAction(' *', ' * asdfsfagadfg * / * / * /*', '', IndentAction.None, '* ');\n\n\t\ttestIndentAction('', ' */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction(' */', ' * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('', '\\t */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '\\t\\t */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '   */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '     */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', '\\t     */', '', IndentAction.None, null, 1);\n\t\ttestIndentAction('', ' *--------------------------------------------------------------------------------------------*/', '', IndentAction.None, null, 1);\n\n\t\t// issue #43469\n\t\ttestIndentAction('class A {', '    * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('', '    * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('    ', '    * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('class A {', '  * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('', '  * test() {', '', IndentAction.Indent, null, 0);\n\t\ttestIndentAction('  ', '  * test() {', '', IndentAction.Indent, null, 0);\n\t});\n\n\ttest('issue #141816', () => {\n\t\tconst support = new OnEnterSupport({\n\t\t\tonEnterRules: javascriptOnEnterRules\n\t\t});\n\t\tconst testIndentAction = (beforeText: string, afterText: string, expected: IndentAction) => {\n\t\t\tconst actual = support.onEnter(EditorAutoIndentStrategy.Advanced, '', beforeText, afterText);\n\t\t\tif (expected === IndentAction.None) {\n\t\t\t\tassert.strictEqual(actual, null);\n\t\t\t} else {\n\t\t\t\tassert.strictEqual(actual!.indentAction, expected);\n\t\t\t}\n\t\t};\n\n\t\ttestIndentAction('const r = /{/;', '', IndentAction.None);\n\t\ttestIndentAction('const r = /{[0-9]/;', '', IndentAction.None);\n\t\ttestIndentAction('const r = /[a-zA-Z]{/;', '', IndentAction.None);\n\t});\n});\n"]}