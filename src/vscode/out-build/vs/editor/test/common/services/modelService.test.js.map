{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/editor/test/common/services/modelService.test.ts","vs/editor/test/common/services/modelService.test.ts"],"names":[],"mappings":"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","file":"modelService.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { CharCode } from '../../../../base/common/charCode.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { StringBuilder } from '../../../common/core/stringBuilder.js';\nimport { DefaultEndOfLine, ITextBuffer, ITextBufferFactory, ITextSnapshot } from '../../../common/model.js';\nimport { createTextBuffer } from '../../../common/model/textModel.js';\nimport { ModelService } from '../../../common/services/modelService.js';\nimport { TestConfigurationService } from '../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { createModelServices, createTextModel } from '../testTextModel.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { TestInstantiationService } from '../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\n\nconst GENERATE_TESTS = false;\n\nsuite('ModelService', () => {\n\tlet disposables: DisposableStore;\n\tlet modelService: IModelService;\n\tlet instantiationService: TestInstantiationService;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\n\t\tconst configService = new TestConfigurationService();\n\t\tconfigService.setUserConfiguration('files', { 'eol': '\\n' });\n\t\tconfigService.setUserConfiguration('files', { 'eol': '\\r\\n' }, URI.file(platform.isWindows ? 'c:\\\\myroot' : '/myroot'));\n\n\t\tinstantiationService = createModelServices(disposables, [\n\t\t\t[IConfigurationService, configService]\n\t\t]);\n\t\tmodelService = instantiationService.get(IModelService);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('EOL setting respected depending on root', () => {\n\t\tconst model1 = modelService.createModel('farboo', null);\n\t\tconst model2 = modelService.createModel('farboo', null, URI.file(platform.isWindows ? 'c:\\\\myroot\\\\myfile.txt' : '/myroot/myfile.txt'));\n\t\tconst model3 = modelService.createModel('farboo', null, URI.file(platform.isWindows ? 'c:\\\\other\\\\myfile.txt' : '/other/myfile.txt'));\n\n\t\tassert.strictEqual(model1.getOptions().defaultEOL, DefaultEndOfLine.LF);\n\t\tassert.strictEqual(model2.getOptions().defaultEOL, DefaultEndOfLine.CRLF);\n\t\tassert.strictEqual(model3.getOptions().defaultEOL, DefaultEndOfLine.LF);\n\n\t\tmodel1.dispose();\n\t\tmodel2.dispose();\n\t\tmodel3.dispose();\n\t});\n\n\ttest('_computeEdits no change', function () {\n\n\t\tconst model = disposables.add(createTextModel(\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n')\n\t\t));\n\n\t\tconst textBuffer = createAndRegisterTextBuffer(\n\t\t\tdisposables,\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n'),\n\t\t\tDefaultEndOfLine.LF\n\t\t);\n\n\t\tconst actual = ModelService._computeEdits(model, textBuffer);\n\n\t\tassert.deepStrictEqual(actual, []);\n\t});\n\n\ttest('_computeEdits first line changed', function () {\n\n\t\tconst model = disposables.add(createTextModel(\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n')\n\t\t));\n\n\t\tconst textBuffer = createAndRegisterTextBuffer(\n\t\t\tdisposables,\n\t\t\t[\n\t\t\t\t'This is line One', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n'),\n\t\t\tDefaultEndOfLine.LF\n\t\t);\n\n\t\tconst actual = ModelService._computeEdits(model, textBuffer);\n\n\t\tassert.deepStrictEqual(actual, [\n\t\t\tEditOperation.replaceMove(new Range(1, 1, 2, 1), 'This is line One\\n')\n\t\t]);\n\t});\n\n\ttest('_computeEdits EOL changed', function () {\n\n\t\tconst model = disposables.add(createTextModel(\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n')\n\t\t));\n\n\t\tconst textBuffer = createAndRegisterTextBuffer(\n\t\t\tdisposables,\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\r\\n'),\n\t\t\tDefaultEndOfLine.LF\n\t\t);\n\n\t\tconst actual = ModelService._computeEdits(model, textBuffer);\n\n\t\tassert.deepStrictEqual(actual, []);\n\t});\n\n\ttest('_computeEdits EOL and other change 1', function () {\n\n\t\tconst model = disposables.add(createTextModel(\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n')\n\t\t));\n\n\t\tconst textBuffer = createAndRegisterTextBuffer(\n\t\t\tdisposables,\n\t\t\t[\n\t\t\t\t'This is line One', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'It is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\r\\n'),\n\t\t\tDefaultEndOfLine.LF\n\t\t);\n\n\t\tconst actual = ModelService._computeEdits(model, textBuffer);\n\n\t\tassert.deepStrictEqual(actual, [\n\t\t\tEditOperation.replaceMove(\n\t\t\t\tnew Range(1, 1, 4, 1),\n\t\t\t\t[\n\t\t\t\t\t'This is line One',\n\t\t\t\t\t'and this is line number two',\n\t\t\t\t\t'It is followed by #3',\n\t\t\t\t\t''\n\t\t\t\t].join('\\r\\n')\n\t\t\t)\n\t\t]);\n\t});\n\n\ttest('_computeEdits EOL and other change 2', function () {\n\n\t\tconst model = disposables.add(createTextModel(\n\t\t\t[\n\t\t\t\t'package main',\t// 1\n\t\t\t\t'func foo() {',\t// 2\n\t\t\t\t'}'\t\t\t\t// 3\n\t\t\t].join('\\n')\n\t\t));\n\n\t\tconst textBuffer = createAndRegisterTextBuffer(\n\t\t\tdisposables,\n\t\t\t[\n\t\t\t\t'package main',\t// 1\n\t\t\t\t'func foo() {',\t// 2\n\t\t\t\t'}',\t\t\t// 3\n\t\t\t\t''\n\t\t\t].join('\\r\\n'),\n\t\t\tDefaultEndOfLine.LF\n\t\t);\n\n\t\tconst actual = ModelService._computeEdits(model, textBuffer);\n\n\t\tassert.deepStrictEqual(actual, [\n\t\t\tEditOperation.replaceMove(new Range(3, 2, 3, 2), '\\r\\n')\n\t\t]);\n\t});\n\n\ttest('generated1', () => {\n\t\tconst file1 = ['pram', 'okctibad', 'pjuwtemued', 'knnnm', 'u', ''];\n\t\tconst file2 = ['tcnr', 'rxwlicro', 'vnzy', '', '', 'pjzcogzur', 'ptmxyp', 'dfyshia', 'pee', 'ygg'];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('generated2', () => {\n\t\tconst file1 = ['', 'itls', 'hrilyhesv', ''];\n\t\tconst file2 = ['vdl', '', 'tchgz', 'bhx', 'nyl'];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('generated3', () => {\n\t\tconst file1 = ['ubrbrcv', 'wv', 'xodspybszt', 's', 'wednjxm', 'fklajt', 'fyfc', 'lvejgge', 'rtpjlodmmk', 'arivtgmjdm'];\n\t\tconst file2 = ['s', 'qj', 'tu', 'ur', 'qerhjjhyvx', 't'];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('generated4', () => {\n\t\tconst file1 = ['ig', 'kh', 'hxegci', 'smvker', 'pkdmjjdqnv', 'vgkkqqx', '', 'jrzeb'];\n\t\tconst file2 = ['yk', ''];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does insertions in the middle of the document', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 5',\n\t\t\t'line 3'\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does insertions at the end of the document', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3',\n\t\t\t'line 4'\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does insertions at the beginning of the document', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 0',\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does replacements', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 1',\n\t\t\t'line 7',\n\t\t\t'line 3'\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does deletions', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 1',\n\t\t\t'line 3'\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does insert, replace, and delete', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3',\n\t\t\t'line 4',\n\t\t\t'line 5',\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 0', // insert line 0\n\t\t\t'line 1',\n\t\t\t'replace line 2', // replace line 2\n\t\t\t'line 3',\n\t\t\t// delete line 4\n\t\t\t'line 5',\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('maintains undo for same resource and same content', () => {\n\t\tconst resource = URI.parse('file://test.txt');\n\n\t\t// create a model\n\t\tconst model1 = modelService.createModel('text', null, resource);\n\t\t// make an edit\n\t\tmodel1.pushEditOperations(null, [{ range: new Range(1, 5, 1, 5), text: '1' }], () => [new Selection(1, 5, 1, 5)]);\n\t\tassert.strictEqual(model1.getValue(), 'text1');\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\n\t\t// create a new model with the same content\n\t\tconst model2 = modelService.createModel('text1', null, resource);\n\t\t// undo\n\t\tmodel2.undo();\n\t\tassert.strictEqual(model2.getValue(), 'text');\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\t});\n\n\ttest('maintains version id and alternative version id for same resource and same content', () => {\n\t\tconst resource = URI.parse('file://test.txt');\n\n\t\t// create a model\n\t\tconst model1 = modelService.createModel('text', null, resource);\n\t\t// make an edit\n\t\tmodel1.pushEditOperations(null, [{ range: new Range(1, 5, 1, 5), text: '1' }], () => [new Selection(1, 5, 1, 5)]);\n\t\tassert.strictEqual(model1.getValue(), 'text1');\n\t\tconst versionId = model1.getVersionId();\n\t\tconst alternativeVersionId = model1.getAlternativeVersionId();\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\n\t\t// create a new model with the same content\n\t\tconst model2 = modelService.createModel('text1', null, resource);\n\t\tassert.strictEqual(model2.getVersionId(), versionId);\n\t\tassert.strictEqual(model2.getAlternativeVersionId(), alternativeVersionId);\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\t});\n\n\ttest('does not maintain undo for same resource and different content', () => {\n\t\tconst resource = URI.parse('file://test.txt');\n\n\t\t// create a model\n\t\tconst model1 = modelService.createModel('text', null, resource);\n\t\t// make an edit\n\t\tmodel1.pushEditOperations(null, [{ range: new Range(1, 5, 1, 5), text: '1' }], () => [new Selection(1, 5, 1, 5)]);\n\t\tassert.strictEqual(model1.getValue(), 'text1');\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\n\t\t// create a new model with the same content\n\t\tconst model2 = modelService.createModel('text2', null, resource);\n\t\t// undo\n\t\tmodel2.undo();\n\t\tassert.strictEqual(model2.getValue(), 'text2');\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\t});\n\n\ttest('setValue should clear undo stack', () => {\n\t\tconst resource = URI.parse('file://test.txt');\n\n\t\tconst model = modelService.createModel('text', null, resource);\n\t\tmodel.pushEditOperations(null, [{ range: new Range(1, 5, 1, 5), text: '1' }], () => [new Selection(1, 5, 1, 5)]);\n\t\tassert.strictEqual(model.getValue(), 'text1');\n\n\t\tmodel.setValue('text2');\n\t\tmodel.undo();\n\t\tassert.strictEqual(model.getValue(), 'text2');\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\t});\n});\n\nfunction assertComputeEdits(lines1: string[], lines2: string[]): void {\n\tconst model = createTextModel(lines1.join('\\n'));\n\tconst { disposable, textBuffer } = createTextBuffer(lines2.join('\\n'), DefaultEndOfLine.LF);\n\n\t// compute required edits\n\t// let start = Date.now();\n\tconst edits = ModelService._computeEdits(model, textBuffer);\n\t// console.log(`took ${Date.now() - start} ms.`);\n\n\t// apply edits\n\tmodel.pushEditOperations([], edits, null);\n\n\tassert.strictEqual(model.getValue(), lines2.join('\\n'));\n\tdisposable.dispose();\n\tmodel.dispose();\n}\n\nfunction getRandomInt(min: number, max: number): number {\n\treturn Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction getRandomString(minLength: number, maxLength: number): string {\n\tconst length = getRandomInt(minLength, maxLength);\n\tconst t = new StringBuilder(length);\n\tfor (let i = 0; i < length; i++) {\n\t\tt.appendASCIICharCode(getRandomInt(CharCode.a, CharCode.z));\n\t}\n\treturn t.build();\n}\n\nfunction generateFile(small: boolean): string[] {\n\tconst lineCount = getRandomInt(1, small ? 3 : 10000);\n\tconst lines: string[] = [];\n\tfor (let i = 0; i < lineCount; i++) {\n\t\tlines.push(getRandomString(0, small ? 3 : 10000));\n\t}\n\treturn lines;\n}\n\nif (GENERATE_TESTS) {\n\tlet number = 1;\n\twhile (true) {\n\n\t\tconsole.log('------TEST: ' + number++);\n\n\t\tconst file1 = generateFile(true);\n\t\tconst file2 = generateFile(true);\n\n\t\tconsole.log('------TEST GENERATED');\n\n\t\ttry {\n\t\t\tassertComputeEdits(file1, file2);\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\tconsole.log(`\nconst file1 = ${JSON.stringify(file1).replace(/\"/g, '\\'')};\nconst file2 = ${JSON.stringify(file2).replace(/\"/g, '\\'')};\nassertComputeEdits(file1, file2);\n`);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nfunction createAndRegisterTextBuffer(store: DisposableStore, value: string | ITextBufferFactory | ITextSnapshot, defaultEOL: DefaultEndOfLine): ITextBuffer {\n\tconst { disposable, textBuffer } = createTextBuffer(value, defaultEOL);\n\tstore.add(disposable);\n\treturn textBuffer;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { CharCode } from '../../../../base/common/charCode.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { StringBuilder } from '../../../common/core/stringBuilder.js';\nimport { DefaultEndOfLine, ITextBuffer, ITextBufferFactory, ITextSnapshot } from '../../../common/model.js';\nimport { createTextBuffer } from '../../../common/model/textModel.js';\nimport { ModelService } from '../../../common/services/modelService.js';\nimport { TestConfigurationService } from '../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { createModelServices, createTextModel } from '../testTextModel.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { TestInstantiationService } from '../../../../platform/instantiation/test/common/instantiationServiceMock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../base/test/common/utils.js';\n\nconst GENERATE_TESTS = false;\n\nsuite('ModelService', () => {\n\tlet disposables: DisposableStore;\n\tlet modelService: IModelService;\n\tlet instantiationService: TestInstantiationService;\n\n\tsetup(() => {\n\t\tdisposables = new DisposableStore();\n\n\t\tconst configService = new TestConfigurationService();\n\t\tconfigService.setUserConfiguration('files', { 'eol': '\\n' });\n\t\tconfigService.setUserConfiguration('files', { 'eol': '\\r\\n' }, URI.file(platform.isWindows ? 'c:\\\\myroot' : '/myroot'));\n\n\t\tinstantiationService = createModelServices(disposables, [\n\t\t\t[IConfigurationService, configService]\n\t\t]);\n\t\tmodelService = instantiationService.get(IModelService);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.dispose();\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('EOL setting respected depending on root', () => {\n\t\tconst model1 = modelService.createModel('farboo', null);\n\t\tconst model2 = modelService.createModel('farboo', null, URI.file(platform.isWindows ? 'c:\\\\myroot\\\\myfile.txt' : '/myroot/myfile.txt'));\n\t\tconst model3 = modelService.createModel('farboo', null, URI.file(platform.isWindows ? 'c:\\\\other\\\\myfile.txt' : '/other/myfile.txt'));\n\n\t\tassert.strictEqual(model1.getOptions().defaultEOL, DefaultEndOfLine.LF);\n\t\tassert.strictEqual(model2.getOptions().defaultEOL, DefaultEndOfLine.CRLF);\n\t\tassert.strictEqual(model3.getOptions().defaultEOL, DefaultEndOfLine.LF);\n\n\t\tmodel1.dispose();\n\t\tmodel2.dispose();\n\t\tmodel3.dispose();\n\t});\n\n\ttest('_computeEdits no change', function () {\n\n\t\tconst model = disposables.add(createTextModel(\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n')\n\t\t));\n\n\t\tconst textBuffer = createAndRegisterTextBuffer(\n\t\t\tdisposables,\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n'),\n\t\t\tDefaultEndOfLine.LF\n\t\t);\n\n\t\tconst actual = ModelService._computeEdits(model, textBuffer);\n\n\t\tassert.deepStrictEqual(actual, []);\n\t});\n\n\ttest('_computeEdits first line changed', function () {\n\n\t\tconst model = disposables.add(createTextModel(\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n')\n\t\t));\n\n\t\tconst textBuffer = createAndRegisterTextBuffer(\n\t\t\tdisposables,\n\t\t\t[\n\t\t\t\t'This is line One', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n'),\n\t\t\tDefaultEndOfLine.LF\n\t\t);\n\n\t\tconst actual = ModelService._computeEdits(model, textBuffer);\n\n\t\tassert.deepStrictEqual(actual, [\n\t\t\tEditOperation.replaceMove(new Range(1, 1, 2, 1), 'This is line One\\n')\n\t\t]);\n\t});\n\n\ttest('_computeEdits EOL changed', function () {\n\n\t\tconst model = disposables.add(createTextModel(\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n')\n\t\t));\n\n\t\tconst textBuffer = createAndRegisterTextBuffer(\n\t\t\tdisposables,\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\r\\n'),\n\t\t\tDefaultEndOfLine.LF\n\t\t);\n\n\t\tconst actual = ModelService._computeEdits(model, textBuffer);\n\n\t\tassert.deepStrictEqual(actual, []);\n\t});\n\n\ttest('_computeEdits EOL and other change 1', function () {\n\n\t\tconst model = disposables.add(createTextModel(\n\t\t\t[\n\t\t\t\t'This is line one', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'it is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\n')\n\t\t));\n\n\t\tconst textBuffer = createAndRegisterTextBuffer(\n\t\t\tdisposables,\n\t\t\t[\n\t\t\t\t'This is line One', //16\n\t\t\t\t'and this is line number two', //27\n\t\t\t\t'It is followed by #3', //20\n\t\t\t\t'and finished with the fourth.', //29\n\t\t\t].join('\\r\\n'),\n\t\t\tDefaultEndOfLine.LF\n\t\t);\n\n\t\tconst actual = ModelService._computeEdits(model, textBuffer);\n\n\t\tassert.deepStrictEqual(actual, [\n\t\t\tEditOperation.replaceMove(\n\t\t\t\tnew Range(1, 1, 4, 1),\n\t\t\t\t[\n\t\t\t\t\t'This is line One',\n\t\t\t\t\t'and this is line number two',\n\t\t\t\t\t'It is followed by #3',\n\t\t\t\t\t''\n\t\t\t\t].join('\\r\\n')\n\t\t\t)\n\t\t]);\n\t});\n\n\ttest('_computeEdits EOL and other change 2', function () {\n\n\t\tconst model = disposables.add(createTextModel(\n\t\t\t[\n\t\t\t\t'package main',\t// 1\n\t\t\t\t'func foo() {',\t// 2\n\t\t\t\t'}'\t\t\t\t// 3\n\t\t\t].join('\\n')\n\t\t));\n\n\t\tconst textBuffer = createAndRegisterTextBuffer(\n\t\t\tdisposables,\n\t\t\t[\n\t\t\t\t'package main',\t// 1\n\t\t\t\t'func foo() {',\t// 2\n\t\t\t\t'}',\t\t\t// 3\n\t\t\t\t''\n\t\t\t].join('\\r\\n'),\n\t\t\tDefaultEndOfLine.LF\n\t\t);\n\n\t\tconst actual = ModelService._computeEdits(model, textBuffer);\n\n\t\tassert.deepStrictEqual(actual, [\n\t\t\tEditOperation.replaceMove(new Range(3, 2, 3, 2), '\\r\\n')\n\t\t]);\n\t});\n\n\ttest('generated1', () => {\n\t\tconst file1 = ['pram', 'okctibad', 'pjuwtemued', 'knnnm', 'u', ''];\n\t\tconst file2 = ['tcnr', 'rxwlicro', 'vnzy', '', '', 'pjzcogzur', 'ptmxyp', 'dfyshia', 'pee', 'ygg'];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('generated2', () => {\n\t\tconst file1 = ['', 'itls', 'hrilyhesv', ''];\n\t\tconst file2 = ['vdl', '', 'tchgz', 'bhx', 'nyl'];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('generated3', () => {\n\t\tconst file1 = ['ubrbrcv', 'wv', 'xodspybszt', 's', 'wednjxm', 'fklajt', 'fyfc', 'lvejgge', 'rtpjlodmmk', 'arivtgmjdm'];\n\t\tconst file2 = ['s', 'qj', 'tu', 'ur', 'qerhjjhyvx', 't'];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('generated4', () => {\n\t\tconst file1 = ['ig', 'kh', 'hxegci', 'smvker', 'pkdmjjdqnv', 'vgkkqqx', '', 'jrzeb'];\n\t\tconst file2 = ['yk', ''];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does insertions in the middle of the document', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 5',\n\t\t\t'line 3'\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does insertions at the end of the document', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3',\n\t\t\t'line 4'\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does insertions at the beginning of the document', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 0',\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does replacements', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 1',\n\t\t\t'line 7',\n\t\t\t'line 3'\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does deletions', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3'\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 1',\n\t\t\t'line 3'\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('does insert, replace, and delete', () => {\n\t\tconst file1 = [\n\t\t\t'line 1',\n\t\t\t'line 2',\n\t\t\t'line 3',\n\t\t\t'line 4',\n\t\t\t'line 5',\n\t\t];\n\t\tconst file2 = [\n\t\t\t'line 0', // insert line 0\n\t\t\t'line 1',\n\t\t\t'replace line 2', // replace line 2\n\t\t\t'line 3',\n\t\t\t// delete line 4\n\t\t\t'line 5',\n\t\t];\n\t\tassertComputeEdits(file1, file2);\n\t});\n\n\ttest('maintains undo for same resource and same content', () => {\n\t\tconst resource = URI.parse('file://test.txt');\n\n\t\t// create a model\n\t\tconst model1 = modelService.createModel('text', null, resource);\n\t\t// make an edit\n\t\tmodel1.pushEditOperations(null, [{ range: new Range(1, 5, 1, 5), text: '1' }], () => [new Selection(1, 5, 1, 5)]);\n\t\tassert.strictEqual(model1.getValue(), 'text1');\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\n\t\t// create a new model with the same content\n\t\tconst model2 = modelService.createModel('text1', null, resource);\n\t\t// undo\n\t\tmodel2.undo();\n\t\tassert.strictEqual(model2.getValue(), 'text');\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\t});\n\n\ttest('maintains version id and alternative version id for same resource and same content', () => {\n\t\tconst resource = URI.parse('file://test.txt');\n\n\t\t// create a model\n\t\tconst model1 = modelService.createModel('text', null, resource);\n\t\t// make an edit\n\t\tmodel1.pushEditOperations(null, [{ range: new Range(1, 5, 1, 5), text: '1' }], () => [new Selection(1, 5, 1, 5)]);\n\t\tassert.strictEqual(model1.getValue(), 'text1');\n\t\tconst versionId = model1.getVersionId();\n\t\tconst alternativeVersionId = model1.getAlternativeVersionId();\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\n\t\t// create a new model with the same content\n\t\tconst model2 = modelService.createModel('text1', null, resource);\n\t\tassert.strictEqual(model2.getVersionId(), versionId);\n\t\tassert.strictEqual(model2.getAlternativeVersionId(), alternativeVersionId);\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\t});\n\n\ttest('does not maintain undo for same resource and different content', () => {\n\t\tconst resource = URI.parse('file://test.txt');\n\n\t\t// create a model\n\t\tconst model1 = modelService.createModel('text', null, resource);\n\t\t// make an edit\n\t\tmodel1.pushEditOperations(null, [{ range: new Range(1, 5, 1, 5), text: '1' }], () => [new Selection(1, 5, 1, 5)]);\n\t\tassert.strictEqual(model1.getValue(), 'text1');\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\n\t\t// create a new model with the same content\n\t\tconst model2 = modelService.createModel('text2', null, resource);\n\t\t// undo\n\t\tmodel2.undo();\n\t\tassert.strictEqual(model2.getValue(), 'text2');\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\t});\n\n\ttest('setValue should clear undo stack', () => {\n\t\tconst resource = URI.parse('file://test.txt');\n\n\t\tconst model = modelService.createModel('text', null, resource);\n\t\tmodel.pushEditOperations(null, [{ range: new Range(1, 5, 1, 5), text: '1' }], () => [new Selection(1, 5, 1, 5)]);\n\t\tassert.strictEqual(model.getValue(), 'text1');\n\n\t\tmodel.setValue('text2');\n\t\tmodel.undo();\n\t\tassert.strictEqual(model.getValue(), 'text2');\n\t\t// dispose it\n\t\tmodelService.destroyModel(resource);\n\t});\n});\n\nfunction assertComputeEdits(lines1: string[], lines2: string[]): void {\n\tconst model = createTextModel(lines1.join('\\n'));\n\tconst { disposable, textBuffer } = createTextBuffer(lines2.join('\\n'), DefaultEndOfLine.LF);\n\n\t// compute required edits\n\t// let start = Date.now();\n\tconst edits = ModelService._computeEdits(model, textBuffer);\n\t// console.log(`took ${Date.now() - start} ms.`);\n\n\t// apply edits\n\tmodel.pushEditOperations([], edits, null);\n\n\tassert.strictEqual(model.getValue(), lines2.join('\\n'));\n\tdisposable.dispose();\n\tmodel.dispose();\n}\n\nfunction getRandomInt(min: number, max: number): number {\n\treturn Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction getRandomString(minLength: number, maxLength: number): string {\n\tconst length = getRandomInt(minLength, maxLength);\n\tconst t = new StringBuilder(length);\n\tfor (let i = 0; i < length; i++) {\n\t\tt.appendASCIICharCode(getRandomInt(CharCode.a, CharCode.z));\n\t}\n\treturn t.build();\n}\n\nfunction generateFile(small: boolean): string[] {\n\tconst lineCount = getRandomInt(1, small ? 3 : 10000);\n\tconst lines: string[] = [];\n\tfor (let i = 0; i < lineCount; i++) {\n\t\tlines.push(getRandomString(0, small ? 3 : 10000));\n\t}\n\treturn lines;\n}\n\nif (GENERATE_TESTS) {\n\tlet number = 1;\n\twhile (true) {\n\n\t\tconsole.log('------TEST: ' + number++);\n\n\t\tconst file1 = generateFile(true);\n\t\tconst file2 = generateFile(true);\n\n\t\tconsole.log('------TEST GENERATED');\n\n\t\ttry {\n\t\t\tassertComputeEdits(file1, file2);\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\tconsole.log(`\nconst file1 = ${JSON.stringify(file1).replace(/\"/g, '\\'')};\nconst file2 = ${JSON.stringify(file2).replace(/\"/g, '\\'')};\nassertComputeEdits(file1, file2);\n`);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nfunction createAndRegisterTextBuffer(store: DisposableStore, value: string | ITextBufferFactory | ITextSnapshot, defaultEOL: DefaultEndOfLine): ITextBuffer {\n\tconst { disposable, textBuffer } = createTextBuffer(value, defaultEOL);\n\tstore.add(disposable);\n\treturn textBuffer;\n}\n"]}