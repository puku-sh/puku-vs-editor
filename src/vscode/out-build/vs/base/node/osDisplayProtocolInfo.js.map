{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/base/node/osDisplayProtocolInfo.ts","vs/base/node/osDisplayProtocolInfo.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,EAAE,SAAS,IAAI,WAAW,EAAE,QAAQ,IAAI,UAAU,EAAE,MAAM,IAAI,CAAC;AACtE,OAAO,EAAE,IAAI,EAAE,MAAM,mBAAmB,CAAC;AACzC,OAAO,EAAE,GAAG,EAAE,MAAM,sBAAsB,CAAC;AAE3C,MAAM,gBAAgB,GAAG,kBAAkB,CAAC;AAC5C,MAAM,eAAe,GAAG,iBAAiB,CAAC;AAC1C,MAAM,eAAe,GAAG,iBAAiB,CAAC;AAE1C,IAAW,mBAKV;AALD,WAAW,mBAAmB;IAC7B,0CAAmB,CAAA;IACnB,4CAAqB,CAAA;IACrB,kCAAW,CAAA;IACX,0CAAmB,CAAA;AACpB,CAAC,EALU,mBAAmB,KAAnB,mBAAmB,QAK7B;AAED,MAAM,CAAC,KAAK,UAAU,kBAAkB,CAAC,WAA4C;IACpF,MAAM,cAAc,GAAG,GAAG,CAAC,gBAAgB,CAAC,CAAC;IAE7C,IAAI,cAAc,EAAE,CAAC;QACpB,kFAAkF;QAClF,oFAAoF;QACpF,+BAA+B;QAC/B,OAAO,cAAc,gDAAgC,IAAI,cAAc,wCAA4B,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,4CAA4B,CAAC;IACpJ,CAAC;SAAM,CAAC;QACP,MAAM,cAAc,GAAG,GAAG,CAAC,eAAe,CAAC,CAAC;QAE5C,IAAI,CAAC,cAAc,EAAE,CAAC;YACrB,wDAAwD;YACxD,2CAA+B;QAChC,CAAC;aAAM,CAAC;YACP,MAAM,aAAa,GAAG,GAAG,CAAC,eAAe,CAAC,CAAC;YAE3C,IAAI,CAAC,aAAa,EAAE,CAAC;gBACpB,qEAAqE;gBACrE,mDAAmC;YACpC,CAAC;iBAAM,CAAC;gBACP,iEAAiE;gBACjE,MAAM,iBAAiB,GAAG,IAAI,CAAC,aAAa,EAAE,WAAW,CAAC,CAAC;gBAE3D,IAAI,CAAC;oBACJ,MAAM,UAAU,CAAC,MAAM,CAAC,iBAAiB,EAAE,WAAW,CAAC,IAAI,CAAC,CAAC;oBAE7D,mDAAmD;oBACnD,mDAAmC;gBACpC,CAAC;gBAAC,OAAO,GAAG,EAAE,CAAC;oBACd,oEAAoE;oBACpE,0EAA0E;oBAC1E,WAAW,CAAC,GAAG,CAAC,CAAC;oBACjB,mDAAmC;gBACpC,CAAC;YACF,CAAC;QACF,CAAC;IACF,CAAC;AACF,CAAC;AAGD,MAAM,UAAU,sBAAsB,CAAC,eAAoC,EAAE,aAAiC;IAC7G,IAAI,CAAC,aAAa,EAAE,CAAC;QACpB,OAAO,eAAe,gDAAgC,CAAC,CAAC,+CAA8B,CAAC,oCAAwB,CAAC;IACjH,CAAC;SAAM,CAAC;QACP,QAAQ,aAAa,EAAE,CAAC;YACvB,KAAK,MAAM;gBACV,OAAO,eAAe,CAAC;YACxB,KAAK,KAAK;gBACT,OAAO,eAAe,gDAAgC,CAAC,CAAC,+CAA8B,CAAC,oCAAwB,CAAC;YACjH,KAAK,SAAS;gBACb,mDAAmC;YACpC;gBACC,mDAAmC;QACrC,CAAC;IACF,CAAC;AACF,CAAC","file":"osDisplayProtocolInfo.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { constants as FSConstants, promises as FSPromises } from 'fs';\nimport { join } from '../common/path.js';\nimport { env } from '../common/process.js';\n\nconst XDG_SESSION_TYPE = 'XDG_SESSION_TYPE';\nconst WAYLAND_DISPLAY = 'WAYLAND_DISPLAY';\nconst XDG_RUNTIME_DIR = 'XDG_RUNTIME_DIR';\n\nconst enum DisplayProtocolType {\n\tWayland = 'wayland',\n\tXWayland = 'xwayland',\n\tX11 = 'x11',\n\tUnknown = 'unknown'\n}\n\nexport async function getDisplayProtocol(errorLogger: (error: string | Error) => void): Promise<DisplayProtocolType> {\n\tconst xdgSessionType = env[XDG_SESSION_TYPE];\n\n\tif (xdgSessionType) {\n\t\t// If XDG_SESSION_TYPE is set, return its value if it's either 'wayland' or 'x11'.\n\t\t// We assume that any value other than 'wayland' or 'x11' is an error or unexpected,\n\t\t// hence 'unknown' is returned.\n\t\treturn xdgSessionType === DisplayProtocolType.Wayland || xdgSessionType === DisplayProtocolType.X11 ? xdgSessionType : DisplayProtocolType.Unknown;\n\t} else {\n\t\tconst waylandDisplay = env[WAYLAND_DISPLAY];\n\n\t\tif (!waylandDisplay) {\n\t\t\t// If WAYLAND_DISPLAY is empty, then the session is x11.\n\t\t\treturn DisplayProtocolType.X11;\n\t\t} else {\n\t\t\tconst xdgRuntimeDir = env[XDG_RUNTIME_DIR];\n\n\t\t\tif (!xdgRuntimeDir) {\n\t\t\t\t// If XDG_RUNTIME_DIR is empty, then the session can only be guessed.\n\t\t\t\treturn DisplayProtocolType.Unknown;\n\t\t\t} else {\n\t\t\t\t// Check for the presence of the file $XDG_RUNTIME_DIR/wayland-0.\n\t\t\t\tconst waylandServerPipe = join(xdgRuntimeDir, 'wayland-0');\n\n\t\t\t\ttry {\n\t\t\t\t\tawait FSPromises.access(waylandServerPipe, FSConstants.R_OK);\n\n\t\t\t\t\t// If the file exists, then the session is wayland.\n\t\t\t\t\treturn DisplayProtocolType.Wayland;\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// If the file does not exist or an error occurs, we guess 'unknown'\n\t\t\t\t\t// since WAYLAND_DISPLAY was set but no wayland-0 pipe could be confirmed.\n\t\t\t\t\terrorLogger(err);\n\t\t\t\t\treturn DisplayProtocolType.Unknown;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n\nexport function getCodeDisplayProtocol(displayProtocol: DisplayProtocolType, ozonePlatform: string | undefined): DisplayProtocolType {\n\tif (!ozonePlatform) {\n\t\treturn displayProtocol === DisplayProtocolType.Wayland ? DisplayProtocolType.XWayland : DisplayProtocolType.X11;\n\t} else {\n\t\tswitch (ozonePlatform) {\n\t\t\tcase 'auto':\n\t\t\t\treturn displayProtocol;\n\t\t\tcase 'x11':\n\t\t\t\treturn displayProtocol === DisplayProtocolType.Wayland ? DisplayProtocolType.XWayland : DisplayProtocolType.X11;\n\t\t\tcase 'wayland':\n\t\t\t\treturn DisplayProtocolType.Wayland;\n\t\t\tdefault:\n\t\t\t\treturn DisplayProtocolType.Unknown;\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { constants as FSConstants, promises as FSPromises } from 'fs';\nimport { join } from '../common/path.js';\nimport { env } from '../common/process.js';\n\nconst XDG_SESSION_TYPE = 'XDG_SESSION_TYPE';\nconst WAYLAND_DISPLAY = 'WAYLAND_DISPLAY';\nconst XDG_RUNTIME_DIR = 'XDG_RUNTIME_DIR';\n\nconst enum DisplayProtocolType {\n\tWayland = 'wayland',\n\tXWayland = 'xwayland',\n\tX11 = 'x11',\n\tUnknown = 'unknown'\n}\n\nexport async function getDisplayProtocol(errorLogger: (error: string | Error) => void): Promise<DisplayProtocolType> {\n\tconst xdgSessionType = env[XDG_SESSION_TYPE];\n\n\tif (xdgSessionType) {\n\t\t// If XDG_SESSION_TYPE is set, return its value if it's either 'wayland' or 'x11'.\n\t\t// We assume that any value other than 'wayland' or 'x11' is an error or unexpected,\n\t\t// hence 'unknown' is returned.\n\t\treturn xdgSessionType === DisplayProtocolType.Wayland || xdgSessionType === DisplayProtocolType.X11 ? xdgSessionType : DisplayProtocolType.Unknown;\n\t} else {\n\t\tconst waylandDisplay = env[WAYLAND_DISPLAY];\n\n\t\tif (!waylandDisplay) {\n\t\t\t// If WAYLAND_DISPLAY is empty, then the session is x11.\n\t\t\treturn DisplayProtocolType.X11;\n\t\t} else {\n\t\t\tconst xdgRuntimeDir = env[XDG_RUNTIME_DIR];\n\n\t\t\tif (!xdgRuntimeDir) {\n\t\t\t\t// If XDG_RUNTIME_DIR is empty, then the session can only be guessed.\n\t\t\t\treturn DisplayProtocolType.Unknown;\n\t\t\t} else {\n\t\t\t\t// Check for the presence of the file $XDG_RUNTIME_DIR/wayland-0.\n\t\t\t\tconst waylandServerPipe = join(xdgRuntimeDir, 'wayland-0');\n\n\t\t\t\ttry {\n\t\t\t\t\tawait FSPromises.access(waylandServerPipe, FSConstants.R_OK);\n\n\t\t\t\t\t// If the file exists, then the session is wayland.\n\t\t\t\t\treturn DisplayProtocolType.Wayland;\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// If the file does not exist or an error occurs, we guess 'unknown'\n\t\t\t\t\t// since WAYLAND_DISPLAY was set but no wayland-0 pipe could be confirmed.\n\t\t\t\t\terrorLogger(err);\n\t\t\t\t\treturn DisplayProtocolType.Unknown;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n\nexport function getCodeDisplayProtocol(displayProtocol: DisplayProtocolType, ozonePlatform: string | undefined): DisplayProtocolType {\n\tif (!ozonePlatform) {\n\t\treturn displayProtocol === DisplayProtocolType.Wayland ? DisplayProtocolType.XWayland : DisplayProtocolType.X11;\n\t} else {\n\t\tswitch (ozonePlatform) {\n\t\t\tcase 'auto':\n\t\t\t\treturn displayProtocol;\n\t\t\tcase 'x11':\n\t\t\t\treturn displayProtocol === DisplayProtocolType.Wayland ? DisplayProtocolType.XWayland : DisplayProtocolType.X11;\n\t\t\tcase 'wayland':\n\t\t\t\treturn DisplayProtocolType.Wayland;\n\t\t\tdefault:\n\t\t\t\treturn DisplayProtocolType.Unknown;\n\t\t}\n\t}\n}\n"]}