{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/base/node/osReleaseInfo.ts","vs/base/node/osReleaseInfo.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,EAAE,SAAS,IAAI,WAAW,EAAE,QAAQ,IAAI,UAAU,EAAE,MAAM,IAAI,CAAC;AACtE,OAAO,EAAE,eAAe,IAAI,SAAS,EAAE,MAAM,UAAU,CAAC;AACxD,OAAO,KAAK,QAAQ,MAAM,uBAAuB,CAAC;AAQlD,MAAM,CAAC,KAAK,UAAU,gBAAgB,CAAC,WAA4C;IAClF,IAAI,QAAQ,CAAC,WAAW,IAAI,QAAQ,CAAC,SAAS,EAAE,CAAC;QAChD,OAAO;IACR,CAAC;IAED,qDAAqD;IACrD,qCAAqC;IACrC,mEAAmE;IACnE,IAAI,MAAyC,CAAC;IAC9C,KAAK,MAAM,QAAQ,IAAI,CAAC,iBAAiB,EAAE,qBAAqB,EAAE,kBAAkB,CAAC,EAAE,CAAC;QACvF,IAAI,CAAC;YACJ,MAAM,GAAG,MAAM,UAAU,CAAC,IAAI,CAAC,QAAQ,EAAE,WAAW,CAAC,IAAI,CAAC,CAAC;YAC3D,MAAM;QACP,CAAC;QAAC,OAAO,GAAG,EAAE,CAAC,CAAC,CAAC;IAClB,CAAC;IAED,IAAI,CAAC,MAAM,EAAE,CAAC;QACb,WAAW,CAAC,qEAAqE,CAAC,CAAC;QACnF,OAAO;IACR,CAAC;IAED,IAAI,CAAC;QACJ,MAAM,aAAa,GAAG,IAAI,GAAG,CAAC;YAC7B,IAAI;YACJ,YAAY;YACZ,SAAS;YACT,YAAY;YACZ,iBAAiB;SACjB,CAAC,CAAC;QACH,MAAM,WAAW,GAAgB;YAChC,EAAE,EAAE,SAAS;SACb,CAAC;QAEF,IAAI,KAAK,EAAE,MAAM,IAAI,IAAI,SAAS,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,gBAAgB,EAAE,EAAE,SAAS,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC;YAC/F,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;gBACzB,SAAS;YACV,CAAC;YACD,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC;YACpD,IAAI,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC;gBAC5B,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC;gBACxE,IAAI,GAAG,KAAK,IAAI,IAAI,GAAG,KAAK,YAAY,EAAE,CAAC;oBAC1C,WAAW,CAAC,EAAE,GAAG,KAAK,CAAC;gBACxB,CAAC;qBAAM,IAAI,GAAG,KAAK,SAAS,EAAE,CAAC;oBAC9B,WAAW,CAAC,OAAO,GAAG,KAAK,CAAC;gBAC7B,CAAC;qBAAM,IAAI,GAAG,KAAK,YAAY,IAAI,GAAG,KAAK,iBAAiB,EAAE,CAAC;oBAC9D,WAAW,CAAC,UAAU,GAAG,KAAK,CAAC;gBAChC,CAAC;YACF,CAAC;QACF,CAAC;QAED,OAAO,WAAW,CAAC;IACpB,CAAC;IAAC,OAAO,GAAG,EAAE,CAAC;QACd,WAAW,CAAC,GAAG,CAAC,CAAC;IAClB,CAAC;IAED,OAAO;AACR,CAAC","file":"osReleaseInfo.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { constants as FSConstants, promises as FSPromises } from 'fs';\nimport { createInterface as readLines } from 'readline';\nimport * as Platform from '../common/platform.js';\n\ntype ReleaseInfo = {\n\tid: string;\n\tid_like?: string;\n\tversion_id?: string;\n};\n\nexport async function getOSReleaseInfo(errorLogger: (error: string | Error) => void): Promise<ReleaseInfo | undefined> {\n\tif (Platform.isMacintosh || Platform.isWindows) {\n\t\treturn;\n\t}\n\n\t// Extract release information on linux based systems\n\t// using the identifiers specified in\n\t// https://www.freedesktop.org/software/systemd/man/os-release.html\n\tlet handle: FSPromises.FileHandle | undefined;\n\tfor (const filePath of ['/etc/os-release', '/usr/lib/os-release', '/etc/lsb-release']) {\n\t\ttry {\n\t\t\thandle = await FSPromises.open(filePath, FSConstants.R_OK);\n\t\t\tbreak;\n\t\t} catch (err) { }\n\t}\n\n\tif (!handle) {\n\t\terrorLogger('Unable to retrieve release information from known identifier paths.');\n\t\treturn;\n\t}\n\n\ttry {\n\t\tconst osReleaseKeys = new Set([\n\t\t\t'ID',\n\t\t\t'DISTRIB_ID',\n\t\t\t'ID_LIKE',\n\t\t\t'VERSION_ID',\n\t\t\t'DISTRIB_RELEASE',\n\t\t]);\n\t\tconst releaseInfo: ReleaseInfo = {\n\t\t\tid: 'unknown'\n\t\t};\n\n\t\tfor await (const line of readLines({ input: handle.createReadStream(), crlfDelay: Infinity })) {\n\t\t\tif (!line.includes('=')) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst key = line.split('=')[0].toUpperCase().trim();\n\t\t\tif (osReleaseKeys.has(key)) {\n\t\t\t\tconst value = line.split('=')[1].replace(/\"/g, '').toLowerCase().trim();\n\t\t\t\tif (key === 'ID' || key === 'DISTRIB_ID') {\n\t\t\t\t\treleaseInfo.id = value;\n\t\t\t\t} else if (key === 'ID_LIKE') {\n\t\t\t\t\treleaseInfo.id_like = value;\n\t\t\t\t} else if (key === 'VERSION_ID' || key === 'DISTRIB_RELEASE') {\n\t\t\t\t\treleaseInfo.version_id = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn releaseInfo;\n\t} catch (err) {\n\t\terrorLogger(err);\n\t}\n\n\treturn;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { constants as FSConstants, promises as FSPromises } from 'fs';\nimport { createInterface as readLines } from 'readline';\nimport * as Platform from '../common/platform.js';\n\ntype ReleaseInfo = {\n\tid: string;\n\tid_like?: string;\n\tversion_id?: string;\n};\n\nexport async function getOSReleaseInfo(errorLogger: (error: string | Error) => void): Promise<ReleaseInfo | undefined> {\n\tif (Platform.isMacintosh || Platform.isWindows) {\n\t\treturn;\n\t}\n\n\t// Extract release information on linux based systems\n\t// using the identifiers specified in\n\t// https://www.freedesktop.org/software/systemd/man/os-release.html\n\tlet handle: FSPromises.FileHandle | undefined;\n\tfor (const filePath of ['/etc/os-release', '/usr/lib/os-release', '/etc/lsb-release']) {\n\t\ttry {\n\t\t\thandle = await FSPromises.open(filePath, FSConstants.R_OK);\n\t\t\tbreak;\n\t\t} catch (err) { }\n\t}\n\n\tif (!handle) {\n\t\terrorLogger('Unable to retrieve release information from known identifier paths.');\n\t\treturn;\n\t}\n\n\ttry {\n\t\tconst osReleaseKeys = new Set([\n\t\t\t'ID',\n\t\t\t'DISTRIB_ID',\n\t\t\t'ID_LIKE',\n\t\t\t'VERSION_ID',\n\t\t\t'DISTRIB_RELEASE',\n\t\t]);\n\t\tconst releaseInfo: ReleaseInfo = {\n\t\t\tid: 'unknown'\n\t\t};\n\n\t\tfor await (const line of readLines({ input: handle.createReadStream(), crlfDelay: Infinity })) {\n\t\t\tif (!line.includes('=')) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst key = line.split('=')[0].toUpperCase().trim();\n\t\t\tif (osReleaseKeys.has(key)) {\n\t\t\t\tconst value = line.split('=')[1].replace(/\"/g, '').toLowerCase().trim();\n\t\t\t\tif (key === 'ID' || key === 'DISTRIB_ID') {\n\t\t\t\t\treleaseInfo.id = value;\n\t\t\t\t} else if (key === 'ID_LIKE') {\n\t\t\t\t\treleaseInfo.id_like = value;\n\t\t\t\t} else if (key === 'VERSION_ID' || key === 'DISTRIB_RELEASE') {\n\t\t\t\t\treleaseInfo.version_id = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn releaseInfo;\n\t} catch (err) {\n\t\terrorLogger(err);\n\t}\n\n\treturn;\n}\n"]}