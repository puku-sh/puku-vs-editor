{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/base/parts/sandbox/electron-browser/preload.ts","vs/base/parts/sandbox/electron-browser/preload.ts"],"names":[],"mappings":"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","file":"preload.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/* eslint-disable no-restricted-globals */\n\n(function () {\n\n\tconst { ipcRenderer, webFrame, contextBridge, webUtils } = require('electron');\n\n\ttype ISandboxConfiguration = import('../common/sandboxTypes.js').ISandboxConfiguration;\n\n\t//#region Utilities\n\n\tfunction validateIPC(channel: string): true | never {\n\t\tif (!channel?.startsWith('vscode:')) {\n\t\t\tthrow new Error(`Unsupported event IPC channel '${channel}'`);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction parseArgv(key: string): string | undefined {\n\t\tfor (const arg of process.argv) {\n\t\t\tif (arg.indexOf(`--${key}=`) === 0) {\n\t\t\t\treturn arg.split('=')[1];\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\t//#endregion\n\n\t//#region Resolve Configuration\n\n\tlet configuration: ISandboxConfiguration | undefined = undefined;\n\n\tconst resolveConfiguration: Promise<ISandboxConfiguration> = (async () => {\n\t\tconst windowConfigIpcChannel = parseArgv('vscode-window-config');\n\t\tif (!windowConfigIpcChannel) {\n\t\t\tthrow new Error('Preload: did not find expected vscode-window-config in renderer process arguments list.');\n\t\t}\n\n\t\ttry {\n\t\t\tvalidateIPC(windowConfigIpcChannel);\n\n\t\t\t// Resolve configuration from electron-main\n\t\t\tconst resolvedConfiguration: ISandboxConfiguration = configuration = await ipcRenderer.invoke(windowConfigIpcChannel);\n\n\t\t\t// Apply `userEnv` directly\n\t\t\tObject.assign(process.env, resolvedConfiguration.userEnv);\n\n\t\t\t// Apply zoom level early before even building the\n\t\t\t// window DOM elements to avoid UI flicker. We always\n\t\t\t// have to set the zoom level from within the window\n\t\t\t// because Chrome has it's own way of remembering zoom\n\t\t\t// settings per origin (if vscode-file:// is used) and\n\t\t\t// we want to ensure that the user configuration wins.\n\t\t\twebFrame.setZoomLevel(resolvedConfiguration.zoomLevel ?? 0);\n\n\t\t\treturn resolvedConfiguration;\n\t\t} catch (error) {\n\t\t\tthrow new Error(`Preload: unable to fetch vscode-window-config: ${error}`);\n\t\t}\n\t})();\n\n\t//#endregion\n\n\t//#region Resolve Shell Environment\n\n\t/**\n\t * If VSCode is not run from a terminal, we should resolve additional\n\t * shell specific environment from the OS shell to ensure we are seeing\n\t * all development related environment variables. We do this from the\n\t * main process because it may involve spawning a shell.\n\t */\n\tconst resolveShellEnv: Promise<typeof process.env> = (async () => {\n\n\t\t// Resolve `userEnv` from configuration and\n\t\t// `shellEnv` from the main side\n\t\tconst [userEnv, shellEnv] = await Promise.all([\n\t\t\t(async () => (await resolveConfiguration).userEnv)(),\n\t\t\tipcRenderer.invoke('vscode:fetchShellEnv')\n\t\t]);\n\n\t\treturn { ...process.env, ...shellEnv, ...userEnv };\n\t})();\n\n\t//#endregion\n\n\t//#region Globals Definition\n\n\t// #######################################################################\n\t// ###                                                                 ###\n\t// ###       !!! DO NOT USE GET/SET PROPERTIES ANYWHERE HERE !!!       ###\n\t// ###       !!!  UNLESS THE ACCESS IS WITHOUT SIDE EFFECTS  !!!       ###\n\t// ###       (https://github.com/electron/electron/issues/25516)       ###\n\t// ###                                                                 ###\n\t// #######################################################################\n\n\tconst globals = {\n\n\t\t/**\n\t\t * A minimal set of methods exposed from Electron's `ipcRenderer`\n\t\t * to support communication to main process.\n\t\t */\n\n\t\tipcRenderer: {\n\n\t\t\tsend(channel: string, ...args: unknown[]): void {\n\t\t\t\tif (validateIPC(channel)) {\n\t\t\t\t\tipcRenderer.send(channel, ...args);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tinvoke(channel: string, ...args: unknown[]): Promise<unknown> {\n\t\t\t\tvalidateIPC(channel);\n\n\t\t\t\treturn ipcRenderer.invoke(channel, ...args);\n\t\t\t},\n\n\t\t\ton(channel: string, listener: (event: Electron.IpcRendererEvent, ...args: unknown[]) => void) {\n\t\t\t\tvalidateIPC(channel);\n\n\t\t\t\tipcRenderer.on(channel, listener);\n\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\tonce(channel: string, listener: (event: Electron.IpcRendererEvent, ...args: unknown[]) => void) {\n\t\t\t\tvalidateIPC(channel);\n\n\t\t\t\tipcRenderer.once(channel, listener);\n\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\tremoveListener(channel: string, listener: (event: Electron.IpcRendererEvent, ...args: unknown[]) => void) {\n\t\t\t\tvalidateIPC(channel);\n\n\t\t\t\tipcRenderer.removeListener(channel, listener);\n\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\n\t\tipcMessagePort: {\n\n\t\t\tacquire(responseChannel: string, nonce: string) {\n\t\t\t\tif (validateIPC(responseChannel)) {\n\t\t\t\t\tconst responseListener = (e: Electron.IpcRendererEvent, responseNonce: string) => {\n\t\t\t\t\t\t// validate that the nonce from the response is the same\n\t\t\t\t\t\t// as when requested. and if so, use `postMessage` to\n\t\t\t\t\t\t// send the `MessagePort` safely over, even when context\n\t\t\t\t\t\t// isolation is enabled\n\t\t\t\t\t\tif (nonce === responseNonce) {\n\t\t\t\t\t\t\tipcRenderer.off(responseChannel, responseListener);\n\t\t\t\t\t\t\twindow.postMessage(nonce, '*', e.ports);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// handle reply from main\n\t\t\t\t\tipcRenderer.on(responseChannel, responseListener);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Support for subset of methods of Electron's `webFrame` type.\n\t\t */\n\t\twebFrame: {\n\n\t\t\tsetZoomLevel(level: number): void {\n\t\t\t\tif (typeof level === 'number') {\n\t\t\t\t\twebFrame.setZoomLevel(level);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Support for subset of Electron's `webUtils` type.\n\t\t */\n\t\twebUtils: {\n\n\t\t\tgetPathForFile(file: File): string {\n\t\t\t\treturn webUtils.getPathForFile(file);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Support for a subset of access to node.js global `process`.\n\t\t *\n\t\t * Note: when `sandbox` is enabled, the only properties available\n\t\t * are https://github.com/electron/electron/blob/master/docs/api/process.md#sandbox\n\t\t */\n\t\tprocess: {\n\t\t\tget platform() { return process.platform; },\n\t\t\tget arch() { return process.arch; },\n\t\t\tget env() { return { ...process.env }; },\n\t\t\tget versions() { return process.versions; },\n\t\t\tget type() { return 'renderer'; },\n\t\t\tget execPath() { return process.execPath; },\n\n\t\t\tcwd(): string {\n\t\t\t\treturn process.env['VSCODE_CWD'] || process.execPath.substr(0, process.execPath.lastIndexOf(process.platform === 'win32' ? '\\\\' : '/'));\n\t\t\t},\n\n\t\t\tshellEnv(): Promise<typeof process.env> {\n\t\t\t\treturn resolveShellEnv;\n\t\t\t},\n\n\t\t\tgetProcessMemoryInfo(): Promise<Electron.ProcessMemoryInfo> {\n\t\t\t\treturn process.getProcessMemoryInfo();\n\t\t\t},\n\n\t\t\ton(type: string, callback: (...args: unknown[]) => void): void {\n\t\t\t\tprocess.on(type, callback);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Some information about the context we are running in.\n\t\t */\n\t\tcontext: {\n\n\t\t\t/**\n\t\t\t * A configuration object made accessible from the main side\n\t\t\t * to configure the sandbox browser window.\n\t\t\t *\n\t\t\t * Note: intentionally not using a getter here because the\n\t\t\t * actual value will be set after `resolveConfiguration`\n\t\t\t * has finished.\n\t\t\t */\n\t\t\tconfiguration(): ISandboxConfiguration | undefined {\n\t\t\t\treturn configuration;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Allows to await the resolution of the configuration object.\n\t\t\t */\n\t\t\tasync resolveConfiguration(): Promise<ISandboxConfiguration> {\n\t\t\t\treturn resolveConfiguration;\n\t\t\t}\n\t\t}\n\t};\n\n\ttry {\n\t\t// Use `contextBridge` APIs to expose globals to VSCode\n\t\tcontextBridge.exposeInMainWorld('vscode', globals);\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n}());\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/* eslint-disable no-restricted-globals */\n\n(function () {\n\n\tconst { ipcRenderer, webFrame, contextBridge, webUtils } = require('electron');\n\n\ttype ISandboxConfiguration = import('../common/sandboxTypes.js').ISandboxConfiguration;\n\n\t//#region Utilities\n\n\tfunction validateIPC(channel: string): true | never {\n\t\tif (!channel?.startsWith('vscode:')) {\n\t\t\tthrow new Error(`Unsupported event IPC channel '${channel}'`);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction parseArgv(key: string): string | undefined {\n\t\tfor (const arg of process.argv) {\n\t\t\tif (arg.indexOf(`--${key}=`) === 0) {\n\t\t\t\treturn arg.split('=')[1];\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\t//#endregion\n\n\t//#region Resolve Configuration\n\n\tlet configuration: ISandboxConfiguration | undefined = undefined;\n\n\tconst resolveConfiguration: Promise<ISandboxConfiguration> = (async () => {\n\t\tconst windowConfigIpcChannel = parseArgv('vscode-window-config');\n\t\tif (!windowConfigIpcChannel) {\n\t\t\tthrow new Error('Preload: did not find expected vscode-window-config in renderer process arguments list.');\n\t\t}\n\n\t\ttry {\n\t\t\tvalidateIPC(windowConfigIpcChannel);\n\n\t\t\t// Resolve configuration from electron-main\n\t\t\tconst resolvedConfiguration: ISandboxConfiguration = configuration = await ipcRenderer.invoke(windowConfigIpcChannel);\n\n\t\t\t// Apply `userEnv` directly\n\t\t\tObject.assign(process.env, resolvedConfiguration.userEnv);\n\n\t\t\t// Apply zoom level early before even building the\n\t\t\t// window DOM elements to avoid UI flicker. We always\n\t\t\t// have to set the zoom level from within the window\n\t\t\t// because Chrome has it's own way of remembering zoom\n\t\t\t// settings per origin (if vscode-file:// is used) and\n\t\t\t// we want to ensure that the user configuration wins.\n\t\t\twebFrame.setZoomLevel(resolvedConfiguration.zoomLevel ?? 0);\n\n\t\t\treturn resolvedConfiguration;\n\t\t} catch (error) {\n\t\t\tthrow new Error(`Preload: unable to fetch vscode-window-config: ${error}`);\n\t\t}\n\t})();\n\n\t//#endregion\n\n\t//#region Resolve Shell Environment\n\n\t/**\n\t * If VSCode is not run from a terminal, we should resolve additional\n\t * shell specific environment from the OS shell to ensure we are seeing\n\t * all development related environment variables. We do this from the\n\t * main process because it may involve spawning a shell.\n\t */\n\tconst resolveShellEnv: Promise<typeof process.env> = (async () => {\n\n\t\t// Resolve `userEnv` from configuration and\n\t\t// `shellEnv` from the main side\n\t\tconst [userEnv, shellEnv] = await Promise.all([\n\t\t\t(async () => (await resolveConfiguration).userEnv)(),\n\t\t\tipcRenderer.invoke('vscode:fetchShellEnv')\n\t\t]);\n\n\t\treturn { ...process.env, ...shellEnv, ...userEnv };\n\t})();\n\n\t//#endregion\n\n\t//#region Globals Definition\n\n\t// #######################################################################\n\t// ###                                                                 ###\n\t// ###       !!! DO NOT USE GET/SET PROPERTIES ANYWHERE HERE !!!       ###\n\t// ###       !!!  UNLESS THE ACCESS IS WITHOUT SIDE EFFECTS  !!!       ###\n\t// ###       (https://github.com/electron/electron/issues/25516)       ###\n\t// ###                                                                 ###\n\t// #######################################################################\n\n\tconst globals = {\n\n\t\t/**\n\t\t * A minimal set of methods exposed from Electron's `ipcRenderer`\n\t\t * to support communication to main process.\n\t\t */\n\n\t\tipcRenderer: {\n\n\t\t\tsend(channel: string, ...args: unknown[]): void {\n\t\t\t\tif (validateIPC(channel)) {\n\t\t\t\t\tipcRenderer.send(channel, ...args);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tinvoke(channel: string, ...args: unknown[]): Promise<unknown> {\n\t\t\t\tvalidateIPC(channel);\n\n\t\t\t\treturn ipcRenderer.invoke(channel, ...args);\n\t\t\t},\n\n\t\t\ton(channel: string, listener: (event: Electron.IpcRendererEvent, ...args: unknown[]) => void) {\n\t\t\t\tvalidateIPC(channel);\n\n\t\t\t\tipcRenderer.on(channel, listener);\n\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\tonce(channel: string, listener: (event: Electron.IpcRendererEvent, ...args: unknown[]) => void) {\n\t\t\t\tvalidateIPC(channel);\n\n\t\t\t\tipcRenderer.once(channel, listener);\n\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\tremoveListener(channel: string, listener: (event: Electron.IpcRendererEvent, ...args: unknown[]) => void) {\n\t\t\t\tvalidateIPC(channel);\n\n\t\t\t\tipcRenderer.removeListener(channel, listener);\n\n\t\t\t\treturn this;\n\t\t\t}\n\t\t},\n\n\t\tipcMessagePort: {\n\n\t\t\tacquire(responseChannel: string, nonce: string) {\n\t\t\t\tif (validateIPC(responseChannel)) {\n\t\t\t\t\tconst responseListener = (e: Electron.IpcRendererEvent, responseNonce: string) => {\n\t\t\t\t\t\t// validate that the nonce from the response is the same\n\t\t\t\t\t\t// as when requested. and if so, use `postMessage` to\n\t\t\t\t\t\t// send the `MessagePort` safely over, even when context\n\t\t\t\t\t\t// isolation is enabled\n\t\t\t\t\t\tif (nonce === responseNonce) {\n\t\t\t\t\t\t\tipcRenderer.off(responseChannel, responseListener);\n\t\t\t\t\t\t\twindow.postMessage(nonce, '*', e.ports);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// handle reply from main\n\t\t\t\t\tipcRenderer.on(responseChannel, responseListener);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Support for subset of methods of Electron's `webFrame` type.\n\t\t */\n\t\twebFrame: {\n\n\t\t\tsetZoomLevel(level: number): void {\n\t\t\t\tif (typeof level === 'number') {\n\t\t\t\t\twebFrame.setZoomLevel(level);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Support for subset of Electron's `webUtils` type.\n\t\t */\n\t\twebUtils: {\n\n\t\t\tgetPathForFile(file: File): string {\n\t\t\t\treturn webUtils.getPathForFile(file);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Support for a subset of access to node.js global `process`.\n\t\t *\n\t\t * Note: when `sandbox` is enabled, the only properties available\n\t\t * are https://github.com/electron/electron/blob/master/docs/api/process.md#sandbox\n\t\t */\n\t\tprocess: {\n\t\t\tget platform() { return process.platform; },\n\t\t\tget arch() { return process.arch; },\n\t\t\tget env() { return { ...process.env }; },\n\t\t\tget versions() { return process.versions; },\n\t\t\tget type() { return 'renderer'; },\n\t\t\tget execPath() { return process.execPath; },\n\n\t\t\tcwd(): string {\n\t\t\t\treturn process.env['VSCODE_CWD'] || process.execPath.substr(0, process.execPath.lastIndexOf(process.platform === 'win32' ? '\\\\' : '/'));\n\t\t\t},\n\n\t\t\tshellEnv(): Promise<typeof process.env> {\n\t\t\t\treturn resolveShellEnv;\n\t\t\t},\n\n\t\t\tgetProcessMemoryInfo(): Promise<Electron.ProcessMemoryInfo> {\n\t\t\t\treturn process.getProcessMemoryInfo();\n\t\t\t},\n\n\t\t\ton(type: string, callback: (...args: unknown[]) => void): void {\n\t\t\t\tprocess.on(type, callback);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Some information about the context we are running in.\n\t\t */\n\t\tcontext: {\n\n\t\t\t/**\n\t\t\t * A configuration object made accessible from the main side\n\t\t\t * to configure the sandbox browser window.\n\t\t\t *\n\t\t\t * Note: intentionally not using a getter here because the\n\t\t\t * actual value will be set after `resolveConfiguration`\n\t\t\t * has finished.\n\t\t\t */\n\t\t\tconfiguration(): ISandboxConfiguration | undefined {\n\t\t\t\treturn configuration;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Allows to await the resolution of the configuration object.\n\t\t\t */\n\t\t\tasync resolveConfiguration(): Promise<ISandboxConfiguration> {\n\t\t\t\treturn resolveConfiguration;\n\t\t\t}\n\t\t}\n\t};\n\n\ttry {\n\t\t// Use `contextBridge` APIs to expose globals to VSCode\n\t\tcontextBridge.exposeInMainWorld('vscode', globals);\n\t} catch (error) {\n\t\tconsole.error(error);\n\t}\n}());\n"]}