{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/base/parts/sandbox/electron-browser/globals.ts","vs/base/parts/sandbox/electron-browser/globals.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AA6HhG,MAAM,YAAY,GAAI,UAAwC,CAAC,MAAM,CAAC;AACtE,MAAM,CAAC,MAAM,WAAW,GAAgB,YAAY,CAAC,WAAW,CAAC;AACjE,MAAM,CAAC,MAAM,cAAc,GAAmB,YAAY,CAAC,cAAc,CAAC;AAC1E,MAAM,CAAC,MAAM,QAAQ,GAAa,YAAY,CAAC,QAAQ,CAAC;AACxD,MAAM,CAAC,MAAM,OAAO,GAAwB,YAAY,CAAC,OAAO,CAAC;AACjE,MAAM,CAAC,MAAM,OAAO,GAAoB,YAAY,CAAC,OAAO,CAAC;AAC7D,MAAM,CAAC,MAAM,QAAQ,GAAa,YAAY,CAAC,QAAQ,CAAC","file":"globals.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { INodeProcess, IProcessEnvironment } from '../../../common/platform.js';\nimport { ISandboxConfiguration } from '../common/sandboxTypes.js';\nimport { IpcRenderer, ProcessMemoryInfo, WebFrame, WebUtils } from './electronTypes.js';\n\n/**\n * In Electron renderers we cannot expose all of the `process` global of node.js\n */\nexport interface ISandboxNodeProcess extends INodeProcess {\n\n\t/**\n\t * The process.platform property returns a string identifying the operating system platform\n\t * on which the Node.js process is running.\n\t */\n\treadonly platform: string;\n\n\t/**\n\t * The process.arch property returns a string identifying the CPU architecture\n\t * on which the Node.js process is running.\n\t */\n\treadonly arch: string;\n\n\t/**\n\t * The type will always be `renderer`.\n\t */\n\treadonly type: string;\n\n\t/**\n\t * A list of versions for the current node.js/electron configuration.\n\t */\n\treadonly versions: { [key: string]: string | undefined };\n\n\t/**\n\t * The process.env property returns an object containing the user environment.\n\t */\n\treadonly env: IProcessEnvironment;\n\n\t/**\n\t * The `execPath` will be the location of the executable of this application.\n\t */\n\treadonly execPath: string;\n\n\t/**\n\t * A listener on the process. Only a small subset of listener types are allowed.\n\t */\n\ton: (type: string, callback: Function) => void;\n\n\t/**\n\t * The current working directory of the process.\n\t */\n\tcwd: () => string;\n\n\t/**\n\t * Resolves with a ProcessMemoryInfo\n\t *\n\t * Returns an object giving memory usage statistics about the current process. Note\n\t * that all statistics are reported in Kilobytes. This api should be called after\n\t * app ready.\n\t *\n\t * Chromium does not provide `residentSet` value for macOS. This is because macOS\n\t * performs in-memory compression of pages that haven't been recently used. As a\n\t * result the resident set size value is not what one would expect. `private`\n\t * memory is more representative of the actual pre-compression memory usage of the\n\t * process on macOS.\n\t */\n\tgetProcessMemoryInfo: () => Promise<ProcessMemoryInfo>;\n\n\t/**\n\t * Returns a process environment that includes all shell environment variables even if\n\t * the application was not started from a shell / terminal / console.\n\t *\n\t * There are different layers of environment that will apply:\n\t * - `process.env`: this is the actual environment of the process before this method\n\t * - `shellEnv`   : if the program was not started from a terminal, we resolve all shell\n\t *                  variables to get the same experience as if the program was started from\n\t *                  a terminal (Linux, macOS)\n\t * - `userEnv`    : this is instance specific environment, e.g. if the user started the program\n\t *                  from a terminal and changed certain variables\n\t *\n\t * The order of overwrites is `process.env` < `shellEnv` < `userEnv`.\n\t */\n\tshellEnv(): Promise<IProcessEnvironment>;\n}\n\nexport interface IpcMessagePort {\n\n\t/**\n\t * Acquire a `MessagePort`. The main process will transfer the port over to\n\t * the `responseChannel` with a payload of `requestNonce` so that the source can\n\t * correlate the response.\n\t *\n\t * The source should install a `window.on('message')` listener, ensuring `e.data`\n\t * matches `nonce`, `e.source` matches `window` and then receiving the `MessagePort`\n\t * via `e.ports[0]`.\n\t */\n\tacquire(responseChannel: string, nonce: string): void;\n}\n\nexport interface ISandboxContext {\n\n\t/**\n\t * A configuration object made accessible from the main side\n\t * to configure the sandbox browser window. Will be `undefined`\n\t * for as long as `resolveConfiguration` is not awaited.\n\t */\n\tconfiguration(): ISandboxConfiguration | undefined;\n\n\t/**\n\t * Allows to await the resolution of the configuration object.\n\t */\n\tresolveConfiguration(): Promise<ISandboxConfiguration>;\n}\n\ninterface ISandboxGlobal {\n\tvscode: {\n\t\treadonly ipcRenderer: IpcRenderer;\n\t\treadonly ipcMessagePort: IpcMessagePort;\n\t\treadonly webFrame: WebFrame;\n\t\treadonly process: ISandboxNodeProcess;\n\t\treadonly context: ISandboxContext;\n\t\treadonly webUtils: WebUtils;\n\t};\n}\n\nconst vscodeGlobal = (globalThis as unknown as ISandboxGlobal).vscode;\nexport const ipcRenderer: IpcRenderer = vscodeGlobal.ipcRenderer;\nexport const ipcMessagePort: IpcMessagePort = vscodeGlobal.ipcMessagePort;\nexport const webFrame: WebFrame = vscodeGlobal.webFrame;\nexport const process: ISandboxNodeProcess = vscodeGlobal.process;\nexport const context: ISandboxContext = vscodeGlobal.context;\nexport const webUtils: WebUtils = vscodeGlobal.webUtils;\n\n/**\n * A set of globals only available to main windows that depend\n * on `preload.js`.\n */\nexport interface IMainWindowSandboxGlobals {\n\treadonly ipcRenderer: IpcRenderer;\n\treadonly ipcMessagePort: IpcMessagePort;\n\treadonly webFrame: WebFrame;\n\treadonly process: ISandboxNodeProcess;\n\treadonly context: ISandboxContext;\n\treadonly webUtils: WebUtils;\n}\n\n/**\n * A set of globals that are available in all windows that either\n * depend on `preload.js` or `preload-aux.js`.\n */\nexport interface ISandboxGlobals {\n\treadonly ipcRenderer: Pick<import('./electronTypes.js').IpcRenderer, 'send' | 'invoke'>;\n\treadonly webFrame: import('./electronTypes.js').WebFrame;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { INodeProcess, IProcessEnvironment } from '../../../common/platform.js';\nimport { ISandboxConfiguration } from '../common/sandboxTypes.js';\nimport { IpcRenderer, ProcessMemoryInfo, WebFrame, WebUtils } from './electronTypes.js';\n\n/**\n * In Electron renderers we cannot expose all of the `process` global of node.js\n */\nexport interface ISandboxNodeProcess extends INodeProcess {\n\n\t/**\n\t * The process.platform property returns a string identifying the operating system platform\n\t * on which the Node.js process is running.\n\t */\n\treadonly platform: string;\n\n\t/**\n\t * The process.arch property returns a string identifying the CPU architecture\n\t * on which the Node.js process is running.\n\t */\n\treadonly arch: string;\n\n\t/**\n\t * The type will always be `renderer`.\n\t */\n\treadonly type: string;\n\n\t/**\n\t * A list of versions for the current node.js/electron configuration.\n\t */\n\treadonly versions: { [key: string]: string | undefined };\n\n\t/**\n\t * The process.env property returns an object containing the user environment.\n\t */\n\treadonly env: IProcessEnvironment;\n\n\t/**\n\t * The `execPath` will be the location of the executable of this application.\n\t */\n\treadonly execPath: string;\n\n\t/**\n\t * A listener on the process. Only a small subset of listener types are allowed.\n\t */\n\ton: (type: string, callback: Function) => void;\n\n\t/**\n\t * The current working directory of the process.\n\t */\n\tcwd: () => string;\n\n\t/**\n\t * Resolves with a ProcessMemoryInfo\n\t *\n\t * Returns an object giving memory usage statistics about the current process. Note\n\t * that all statistics are reported in Kilobytes. This api should be called after\n\t * app ready.\n\t *\n\t * Chromium does not provide `residentSet` value for macOS. This is because macOS\n\t * performs in-memory compression of pages that haven't been recently used. As a\n\t * result the resident set size value is not what one would expect. `private`\n\t * memory is more representative of the actual pre-compression memory usage of the\n\t * process on macOS.\n\t */\n\tgetProcessMemoryInfo: () => Promise<ProcessMemoryInfo>;\n\n\t/**\n\t * Returns a process environment that includes all shell environment variables even if\n\t * the application was not started from a shell / terminal / console.\n\t *\n\t * There are different layers of environment that will apply:\n\t * - `process.env`: this is the actual environment of the process before this method\n\t * - `shellEnv`   : if the program was not started from a terminal, we resolve all shell\n\t *                  variables to get the same experience as if the program was started from\n\t *                  a terminal (Linux, macOS)\n\t * - `userEnv`    : this is instance specific environment, e.g. if the user started the program\n\t *                  from a terminal and changed certain variables\n\t *\n\t * The order of overwrites is `process.env` < `shellEnv` < `userEnv`.\n\t */\n\tshellEnv(): Promise<IProcessEnvironment>;\n}\n\nexport interface IpcMessagePort {\n\n\t/**\n\t * Acquire a `MessagePort`. The main process will transfer the port over to\n\t * the `responseChannel` with a payload of `requestNonce` so that the source can\n\t * correlate the response.\n\t *\n\t * The source should install a `window.on('message')` listener, ensuring `e.data`\n\t * matches `nonce`, `e.source` matches `window` and then receiving the `MessagePort`\n\t * via `e.ports[0]`.\n\t */\n\tacquire(responseChannel: string, nonce: string): void;\n}\n\nexport interface ISandboxContext {\n\n\t/**\n\t * A configuration object made accessible from the main side\n\t * to configure the sandbox browser window. Will be `undefined`\n\t * for as long as `resolveConfiguration` is not awaited.\n\t */\n\tconfiguration(): ISandboxConfiguration | undefined;\n\n\t/**\n\t * Allows to await the resolution of the configuration object.\n\t */\n\tresolveConfiguration(): Promise<ISandboxConfiguration>;\n}\n\ninterface ISandboxGlobal {\n\tvscode: {\n\t\treadonly ipcRenderer: IpcRenderer;\n\t\treadonly ipcMessagePort: IpcMessagePort;\n\t\treadonly webFrame: WebFrame;\n\t\treadonly process: ISandboxNodeProcess;\n\t\treadonly context: ISandboxContext;\n\t\treadonly webUtils: WebUtils;\n\t};\n}\n\nconst vscodeGlobal = (globalThis as unknown as ISandboxGlobal).vscode;\nexport const ipcRenderer: IpcRenderer = vscodeGlobal.ipcRenderer;\nexport const ipcMessagePort: IpcMessagePort = vscodeGlobal.ipcMessagePort;\nexport const webFrame: WebFrame = vscodeGlobal.webFrame;\nexport const process: ISandboxNodeProcess = vscodeGlobal.process;\nexport const context: ISandboxContext = vscodeGlobal.context;\nexport const webUtils: WebUtils = vscodeGlobal.webUtils;\n\n/**\n * A set of globals only available to main windows that depend\n * on `preload.js`.\n */\nexport interface IMainWindowSandboxGlobals {\n\treadonly ipcRenderer: IpcRenderer;\n\treadonly ipcMessagePort: IpcMessagePort;\n\treadonly webFrame: WebFrame;\n\treadonly process: ISandboxNodeProcess;\n\treadonly context: ISandboxContext;\n\treadonly webUtils: WebUtils;\n}\n\n/**\n * A set of globals that are available in all windows that either\n * depend on `preload.js` or `preload-aux.js`.\n */\nexport interface ISandboxGlobals {\n\treadonly ipcRenderer: Pick<import('./electronTypes.js').IpcRenderer, 'send' | 'invoke'>;\n\treadonly webFrame: import('./electronTypes.js').WebFrame;\n}\n"]}