{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/base/test/browser/ui/tree/compressedObjectTreeModel.test.ts","vs/base/test/browser/ui/tree/compressedObjectTreeModel.test.ts"],"names":[],"mappings":"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","file":"compressedObjectTreeModel.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { compress, CompressedObjectTreeModel, decompress, ICompressedTreeElement, ICompressedTreeNode } from '../../../../browser/ui/tree/compressedObjectTreeModel.js';\nimport { IObjectTreeModelSetChildrenOptions } from '../../../../browser/ui/tree/objectTreeModel.js';\nimport { ITreeModel, ITreeNode } from '../../../../browser/ui/tree/tree.js';\nimport { Iterable } from '../../../../common/iterator.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../common/utils.js';\nimport { IDisposable } from '../../../../common/lifecycle.js';\n\ninterface IResolvedCompressedTreeElement<T> extends ICompressedTreeElement<T> {\n\treadonly element: T;\n\treadonly children?: ICompressedTreeElement<T>[];\n}\n\nfunction resolve<T>(treeElement: ICompressedTreeElement<T>): IResolvedCompressedTreeElement<T> {\n\tconst result: any = { element: treeElement.element };\n\tconst children = Array.from(Iterable.from(treeElement.children), resolve);\n\n\tif (treeElement.incompressible) {\n\t\tresult.incompressible = true;\n\t}\n\n\tif (children.length > 0) {\n\t\tresult.children = children;\n\t}\n\n\treturn result;\n}\n\nsuite('CompressedObjectTree', function () {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuite('compress & decompress', function () {\n\n\t\ttest('small', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = { element: 1 };\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> =\n\t\t\t\t{ element: { elements: [1], incompressible: false } };\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\n\t\ttest('no compression', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = {\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t{ element: 12 },\n\t\t\t\t\t{ element: 13 }\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> = {\n\t\t\t\telement: { elements: [1], incompressible: false },\n\t\t\t\tchildren: [\n\t\t\t\t\t{ element: { elements: [11], incompressible: false } },\n\t\t\t\t\t{ element: { elements: [12], incompressible: false } },\n\t\t\t\t\t{ element: { elements: [13], incompressible: false } }\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\n\t\ttest('single hierarchy', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = {\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 11, children: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: 111, children: [\n\t\t\t\t\t\t\t\t\t{ element: 1111 }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> = {\n\t\t\t\telement: { elements: [1, 11, 111, 1111], incompressible: false }\n\t\t\t};\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\n\t\ttest('deep compression', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = {\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 11, children: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: 111, children: [\n\t\t\t\t\t\t\t\t\t{ element: 1111 },\n\t\t\t\t\t\t\t\t\t{ element: 1112 },\n\t\t\t\t\t\t\t\t\t{ element: 1113 },\n\t\t\t\t\t\t\t\t\t{ element: 1114 },\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> = {\n\t\t\t\telement: { elements: [1, 11, 111], incompressible: false },\n\t\t\t\tchildren: [\n\t\t\t\t\t{ element: { elements: [1111], incompressible: false } },\n\t\t\t\t\t{ element: { elements: [1112], incompressible: false } },\n\t\t\t\t\t{ element: { elements: [1113], incompressible: false } },\n\t\t\t\t\t{ element: { elements: [1114], incompressible: false } },\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\n\t\ttest('double deep compression', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = {\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 11, children: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: 111, children: [\n\t\t\t\t\t\t\t\t\t{ element: 1112 },\n\t\t\t\t\t\t\t\t\t{ element: 1113 },\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 12, children: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: 121, children: [\n\t\t\t\t\t\t\t\t\t{ element: 1212 },\n\t\t\t\t\t\t\t\t\t{ element: 1213 },\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> = {\n\t\t\t\telement: { elements: [1], incompressible: false },\n\t\t\t\tchildren: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: { elements: [11, 111], incompressible: false },\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t{ element: { elements: [1112], incompressible: false } },\n\t\t\t\t\t\t\t{ element: { elements: [1113], incompressible: false } },\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\telement: { elements: [12, 121], incompressible: false },\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t{ element: { elements: [1212], incompressible: false } },\n\t\t\t\t\t\t\t{ element: { elements: [1213], incompressible: false } },\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\n\t\ttest('incompressible leaf', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = {\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 11, children: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: 111, children: [\n\t\t\t\t\t\t\t\t\t{ element: 1111, incompressible: true }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> = {\n\t\t\t\telement: { elements: [1, 11, 111], incompressible: false },\n\t\t\t\tchildren: [\n\t\t\t\t\t{ element: { elements: [1111], incompressible: true } }\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\n\t\ttest('incompressible branch', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = {\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 11, children: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: 111, incompressible: true, children: [\n\t\t\t\t\t\t\t\t\t{ element: 1111 }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> = {\n\t\t\t\telement: { elements: [1, 11], incompressible: false },\n\t\t\t\tchildren: [\n\t\t\t\t\t{ element: { elements: [111, 1111], incompressible: true } }\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\n\t\ttest('incompressible chain', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = {\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 11, children: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: 111, incompressible: true, children: [\n\t\t\t\t\t\t\t\t\t{ element: 1111, incompressible: true }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> = {\n\t\t\t\telement: { elements: [1, 11], incompressible: false },\n\t\t\t\tchildren: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: { elements: [111], incompressible: true },\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t{ element: { elements: [1111], incompressible: true } }\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\n\t\ttest('incompressible tree', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = {\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 11, incompressible: true, children: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: 111, incompressible: true, children: [\n\t\t\t\t\t\t\t\t\t{ element: 1111, incompressible: true }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> = {\n\t\t\t\telement: { elements: [1], incompressible: false },\n\t\t\t\tchildren: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: { elements: [11], incompressible: true },\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: { elements: [111], incompressible: true },\n\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t{ element: { elements: [1111], incompressible: true } }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\t});\n\n\tfunction bindListToModel<T>(list: ITreeNode<T>[], model: ITreeModel<T, any, any>): IDisposable {\n\t\treturn model.onDidSpliceRenderedNodes(({ start, deleteCount, elements }) => {\n\t\t\tlist.splice(start, deleteCount, ...elements);\n\t\t});\n\t}\n\n\tfunction toArray<T>(list: ITreeNode<ICompressedTreeNode<T>>[]): T[][] {\n\t\treturn list.map(i => i.element.elements);\n\t}\n\n\tsuite('CompressedObjectTreeModel', function () {\n\n\t\t/**\n\t\t * Calls that test function twice, once with an empty options and\n\t\t * once with `diffIdentityProvider`.\n\t\t */\n\t\tfunction withSmartSplice(fn: (options: IObjectTreeModelSetChildrenOptions<number, any>) => void) {\n\t\t\tfn({});\n\t\t\tfn({ diffIdentityProvider: { getId: n => String(n) } });\n\t\t}\n\n\n\t\ttest('ctor', () => {\n\t\t\tconst model = new CompressedObjectTreeModel<number>('test');\n\t\t\tassert(model);\n\t\t\tassert.strictEqual(model.size, 0);\n\t\t});\n\n\t\ttest('flat', () => withSmartSplice(options => {\n\t\t\tconst list: ITreeNode<ICompressedTreeNode<number>>[] = [];\n\t\t\tconst model = new CompressedObjectTreeModel<number>('test');\n\t\t\tconst disposable = bindListToModel(list, model);\n\n\t\t\tmodel.setChildren(null, [\n\t\t\t\t{ element: 0 },\n\t\t\t\t{ element: 1 },\n\t\t\t\t{ element: 2 }\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[0], [1], [2]]);\n\t\t\tassert.strictEqual(model.size, 3);\n\n\t\t\tmodel.setChildren(null, [\n\t\t\t\t{ element: 3 },\n\t\t\t\t{ element: 4 },\n\t\t\t\t{ element: 5 },\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[3], [4], [5]]);\n\t\t\tassert.strictEqual(model.size, 3);\n\n\t\t\tmodel.setChildren(null, [], options);\n\t\t\tassert.deepStrictEqual(toArray(list), []);\n\t\t\tassert.strictEqual(model.size, 0);\n\n\t\t\tdisposable.dispose();\n\t\t}));\n\n\t\ttest('nested', () => withSmartSplice(options => {\n\t\t\tconst list: ITreeNode<ICompressedTreeNode<number>>[] = [];\n\t\t\tconst model = new CompressedObjectTreeModel<number>('test');\n\t\t\tconst disposable = bindListToModel(list, model);\n\n\t\t\tmodel.setChildren(null, [\n\t\t\t\t{\n\t\t\t\t\telement: 0, children: [\n\t\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t\t{ element: 12 },\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{ element: 1 },\n\t\t\t\t{ element: 2 }\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[0], [10], [11], [12], [1], [2]]);\n\t\t\tassert.strictEqual(model.size, 6);\n\n\t\t\tmodel.setChildren(12, [\n\t\t\t\t{ element: 120 },\n\t\t\t\t{ element: 121 }\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[0], [10], [11], [12], [120], [121], [1], [2]]);\n\t\t\tassert.strictEqual(model.size, 8);\n\n\t\t\tmodel.setChildren(0, [], options);\n\t\t\tassert.deepStrictEqual(toArray(list), [[0], [1], [2]]);\n\t\t\tassert.strictEqual(model.size, 3);\n\n\t\t\tmodel.setChildren(null, [], options);\n\t\t\tassert.deepStrictEqual(toArray(list), []);\n\t\t\tassert.strictEqual(model.size, 0);\n\n\t\t\tdisposable.dispose();\n\t\t}));\n\n\t\ttest('compressed', () => withSmartSplice(options => {\n\t\t\tconst list: ITreeNode<ICompressedTreeNode<number>>[] = [];\n\t\t\tconst model = new CompressedObjectTreeModel<number>('test');\n\t\t\tconst disposable = bindListToModel(list, model);\n\n\t\t\tmodel.setChildren(null, [\n\t\t\t\t{\n\t\t\t\t\telement: 1, children: [{\n\t\t\t\t\t\telement: 11, children: [{\n\t\t\t\t\t\t\telement: 111, children: [\n\t\t\t\t\t\t\t\t{ element: 1111 },\n\t\t\t\t\t\t\t\t{ element: 1112 },\n\t\t\t\t\t\t\t\t{ element: 1113 },\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}]\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[1, 11, 111], [1111], [1112], [1113]]);\n\t\t\tassert.strictEqual(model.size, 6);\n\n\t\t\tmodel.setChildren(11, [\n\t\t\t\t{ element: 111 },\n\t\t\t\t{ element: 112 },\n\t\t\t\t{ element: 113 },\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[1, 11], [111], [112], [113]]);\n\t\t\tassert.strictEqual(model.size, 5);\n\n\t\t\tmodel.setChildren(113, [\n\t\t\t\t{ element: 1131 }\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[1, 11], [111], [112], [113, 1131]]);\n\t\t\tassert.strictEqual(model.size, 6);\n\n\t\t\tmodel.setChildren(1131, [\n\t\t\t\t{ element: 1132 }\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[1, 11], [111], [112], [113, 1131, 1132]]);\n\t\t\tassert.strictEqual(model.size, 7);\n\n\t\t\tmodel.setChildren(1131, [\n\t\t\t\t{ element: 1132 },\n\t\t\t\t{ element: 1133 },\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[1, 11], [111], [112], [113, 1131], [1132], [1133]]);\n\t\t\tassert.strictEqual(model.size, 8);\n\n\t\t\tdisposable.dispose();\n\t\t}));\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { compress, CompressedObjectTreeModel, decompress, ICompressedTreeElement, ICompressedTreeNode } from '../../../../browser/ui/tree/compressedObjectTreeModel.js';\nimport { IObjectTreeModelSetChildrenOptions } from '../../../../browser/ui/tree/objectTreeModel.js';\nimport { ITreeModel, ITreeNode } from '../../../../browser/ui/tree/tree.js';\nimport { Iterable } from '../../../../common/iterator.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../common/utils.js';\nimport { IDisposable } from '../../../../common/lifecycle.js';\n\ninterface IResolvedCompressedTreeElement<T> extends ICompressedTreeElement<T> {\n\treadonly element: T;\n\treadonly children?: ICompressedTreeElement<T>[];\n}\n\nfunction resolve<T>(treeElement: ICompressedTreeElement<T>): IResolvedCompressedTreeElement<T> {\n\tconst result: any = { element: treeElement.element };\n\tconst children = Array.from(Iterable.from(treeElement.children), resolve);\n\n\tif (treeElement.incompressible) {\n\t\tresult.incompressible = true;\n\t}\n\n\tif (children.length > 0) {\n\t\tresult.children = children;\n\t}\n\n\treturn result;\n}\n\nsuite('CompressedObjectTree', function () {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuite('compress & decompress', function () {\n\n\t\ttest('small', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = { element: 1 };\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> =\n\t\t\t\t{ element: { elements: [1], incompressible: false } };\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\n\t\ttest('no compression', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = {\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t{ element: 12 },\n\t\t\t\t\t{ element: 13 }\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> = {\n\t\t\t\telement: { elements: [1], incompressible: false },\n\t\t\t\tchildren: [\n\t\t\t\t\t{ element: { elements: [11], incompressible: false } },\n\t\t\t\t\t{ element: { elements: [12], incompressible: false } },\n\t\t\t\t\t{ element: { elements: [13], incompressible: false } }\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\n\t\ttest('single hierarchy', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = {\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 11, children: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: 111, children: [\n\t\t\t\t\t\t\t\t\t{ element: 1111 }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> = {\n\t\t\t\telement: { elements: [1, 11, 111, 1111], incompressible: false }\n\t\t\t};\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\n\t\ttest('deep compression', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = {\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 11, children: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: 111, children: [\n\t\t\t\t\t\t\t\t\t{ element: 1111 },\n\t\t\t\t\t\t\t\t\t{ element: 1112 },\n\t\t\t\t\t\t\t\t\t{ element: 1113 },\n\t\t\t\t\t\t\t\t\t{ element: 1114 },\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> = {\n\t\t\t\telement: { elements: [1, 11, 111], incompressible: false },\n\t\t\t\tchildren: [\n\t\t\t\t\t{ element: { elements: [1111], incompressible: false } },\n\t\t\t\t\t{ element: { elements: [1112], incompressible: false } },\n\t\t\t\t\t{ element: { elements: [1113], incompressible: false } },\n\t\t\t\t\t{ element: { elements: [1114], incompressible: false } },\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\n\t\ttest('double deep compression', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = {\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 11, children: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: 111, children: [\n\t\t\t\t\t\t\t\t\t{ element: 1112 },\n\t\t\t\t\t\t\t\t\t{ element: 1113 },\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 12, children: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: 121, children: [\n\t\t\t\t\t\t\t\t\t{ element: 1212 },\n\t\t\t\t\t\t\t\t\t{ element: 1213 },\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> = {\n\t\t\t\telement: { elements: [1], incompressible: false },\n\t\t\t\tchildren: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: { elements: [11, 111], incompressible: false },\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t{ element: { elements: [1112], incompressible: false } },\n\t\t\t\t\t\t\t{ element: { elements: [1113], incompressible: false } },\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\telement: { elements: [12, 121], incompressible: false },\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t{ element: { elements: [1212], incompressible: false } },\n\t\t\t\t\t\t\t{ element: { elements: [1213], incompressible: false } },\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\n\t\ttest('incompressible leaf', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = {\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 11, children: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: 111, children: [\n\t\t\t\t\t\t\t\t\t{ element: 1111, incompressible: true }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> = {\n\t\t\t\telement: { elements: [1, 11, 111], incompressible: false },\n\t\t\t\tchildren: [\n\t\t\t\t\t{ element: { elements: [1111], incompressible: true } }\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\n\t\ttest('incompressible branch', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = {\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 11, children: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: 111, incompressible: true, children: [\n\t\t\t\t\t\t\t\t\t{ element: 1111 }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> = {\n\t\t\t\telement: { elements: [1, 11], incompressible: false },\n\t\t\t\tchildren: [\n\t\t\t\t\t{ element: { elements: [111, 1111], incompressible: true } }\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\n\t\ttest('incompressible chain', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = {\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 11, children: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: 111, incompressible: true, children: [\n\t\t\t\t\t\t\t\t\t{ element: 1111, incompressible: true }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> = {\n\t\t\t\telement: { elements: [1, 11], incompressible: false },\n\t\t\t\tchildren: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: { elements: [111], incompressible: true },\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t{ element: { elements: [1111], incompressible: true } }\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\n\t\ttest('incompressible tree', function () {\n\t\t\tconst decompressed: ICompressedTreeElement<number> = {\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 11, incompressible: true, children: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: 111, incompressible: true, children: [\n\t\t\t\t\t\t\t\t\t{ element: 1111, incompressible: true }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tconst compressed: IResolvedCompressedTreeElement<ICompressedTreeNode<number>> = {\n\t\t\t\telement: { elements: [1], incompressible: false },\n\t\t\t\tchildren: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: { elements: [11], incompressible: true },\n\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement: { elements: [111], incompressible: true },\n\t\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t\t{ element: { elements: [1111], incompressible: true } }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tassert.deepStrictEqual(resolve(compress(decompressed)), compressed);\n\t\t\tassert.deepStrictEqual(resolve(decompress(compressed)), decompressed);\n\t\t});\n\t});\n\n\tfunction bindListToModel<T>(list: ITreeNode<T>[], model: ITreeModel<T, any, any>): IDisposable {\n\t\treturn model.onDidSpliceRenderedNodes(({ start, deleteCount, elements }) => {\n\t\t\tlist.splice(start, deleteCount, ...elements);\n\t\t});\n\t}\n\n\tfunction toArray<T>(list: ITreeNode<ICompressedTreeNode<T>>[]): T[][] {\n\t\treturn list.map(i => i.element.elements);\n\t}\n\n\tsuite('CompressedObjectTreeModel', function () {\n\n\t\t/**\n\t\t * Calls that test function twice, once with an empty options and\n\t\t * once with `diffIdentityProvider`.\n\t\t */\n\t\tfunction withSmartSplice(fn: (options: IObjectTreeModelSetChildrenOptions<number, any>) => void) {\n\t\t\tfn({});\n\t\t\tfn({ diffIdentityProvider: { getId: n => String(n) } });\n\t\t}\n\n\n\t\ttest('ctor', () => {\n\t\t\tconst model = new CompressedObjectTreeModel<number>('test');\n\t\t\tassert(model);\n\t\t\tassert.strictEqual(model.size, 0);\n\t\t});\n\n\t\ttest('flat', () => withSmartSplice(options => {\n\t\t\tconst list: ITreeNode<ICompressedTreeNode<number>>[] = [];\n\t\t\tconst model = new CompressedObjectTreeModel<number>('test');\n\t\t\tconst disposable = bindListToModel(list, model);\n\n\t\t\tmodel.setChildren(null, [\n\t\t\t\t{ element: 0 },\n\t\t\t\t{ element: 1 },\n\t\t\t\t{ element: 2 }\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[0], [1], [2]]);\n\t\t\tassert.strictEqual(model.size, 3);\n\n\t\t\tmodel.setChildren(null, [\n\t\t\t\t{ element: 3 },\n\t\t\t\t{ element: 4 },\n\t\t\t\t{ element: 5 },\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[3], [4], [5]]);\n\t\t\tassert.strictEqual(model.size, 3);\n\n\t\t\tmodel.setChildren(null, [], options);\n\t\t\tassert.deepStrictEqual(toArray(list), []);\n\t\t\tassert.strictEqual(model.size, 0);\n\n\t\t\tdisposable.dispose();\n\t\t}));\n\n\t\ttest('nested', () => withSmartSplice(options => {\n\t\t\tconst list: ITreeNode<ICompressedTreeNode<number>>[] = [];\n\t\t\tconst model = new CompressedObjectTreeModel<number>('test');\n\t\t\tconst disposable = bindListToModel(list, model);\n\n\t\t\tmodel.setChildren(null, [\n\t\t\t\t{\n\t\t\t\t\telement: 0, children: [\n\t\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t\t{ element: 12 },\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{ element: 1 },\n\t\t\t\t{ element: 2 }\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[0], [10], [11], [12], [1], [2]]);\n\t\t\tassert.strictEqual(model.size, 6);\n\n\t\t\tmodel.setChildren(12, [\n\t\t\t\t{ element: 120 },\n\t\t\t\t{ element: 121 }\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[0], [10], [11], [12], [120], [121], [1], [2]]);\n\t\t\tassert.strictEqual(model.size, 8);\n\n\t\t\tmodel.setChildren(0, [], options);\n\t\t\tassert.deepStrictEqual(toArray(list), [[0], [1], [2]]);\n\t\t\tassert.strictEqual(model.size, 3);\n\n\t\t\tmodel.setChildren(null, [], options);\n\t\t\tassert.deepStrictEqual(toArray(list), []);\n\t\t\tassert.strictEqual(model.size, 0);\n\n\t\t\tdisposable.dispose();\n\t\t}));\n\n\t\ttest('compressed', () => withSmartSplice(options => {\n\t\t\tconst list: ITreeNode<ICompressedTreeNode<number>>[] = [];\n\t\t\tconst model = new CompressedObjectTreeModel<number>('test');\n\t\t\tconst disposable = bindListToModel(list, model);\n\n\t\t\tmodel.setChildren(null, [\n\t\t\t\t{\n\t\t\t\t\telement: 1, children: [{\n\t\t\t\t\t\telement: 11, children: [{\n\t\t\t\t\t\t\telement: 111, children: [\n\t\t\t\t\t\t\t\t{ element: 1111 },\n\t\t\t\t\t\t\t\t{ element: 1112 },\n\t\t\t\t\t\t\t\t{ element: 1113 },\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}]\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[1, 11, 111], [1111], [1112], [1113]]);\n\t\t\tassert.strictEqual(model.size, 6);\n\n\t\t\tmodel.setChildren(11, [\n\t\t\t\t{ element: 111 },\n\t\t\t\t{ element: 112 },\n\t\t\t\t{ element: 113 },\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[1, 11], [111], [112], [113]]);\n\t\t\tassert.strictEqual(model.size, 5);\n\n\t\t\tmodel.setChildren(113, [\n\t\t\t\t{ element: 1131 }\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[1, 11], [111], [112], [113, 1131]]);\n\t\t\tassert.strictEqual(model.size, 6);\n\n\t\t\tmodel.setChildren(1131, [\n\t\t\t\t{ element: 1132 }\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[1, 11], [111], [112], [113, 1131, 1132]]);\n\t\t\tassert.strictEqual(model.size, 7);\n\n\t\t\tmodel.setChildren(1131, [\n\t\t\t\t{ element: 1132 },\n\t\t\t\t{ element: 1133 },\n\t\t\t], options);\n\n\t\t\tassert.deepStrictEqual(toArray(list), [[1, 11], [111], [112], [113, 1131], [1132], [1133]]);\n\t\t\tassert.strictEqual(model.size, 8);\n\n\t\t\tdisposable.dispose();\n\t\t}));\n\t});\n});\n"]}