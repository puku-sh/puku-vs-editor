{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/base/test/browser/ui/tree/indexTreeModel.test.ts","vs/base/test/browser/ui/tree/indexTreeModel.test.ts"],"names":[],"mappings":"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","file":"indexTreeModel.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { IIndexTreeModelSpliceOptions, IIndexTreeNode, IndexTreeModel } from '../../../../browser/ui/tree/indexTreeModel.js';\nimport { ITreeElement, ITreeFilter, ITreeNode, TreeVisibility } from '../../../../browser/ui/tree/tree.js';\nimport { timeout } from '../../../../common/async.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../common/utils.js';\nimport { DisposableStore, IDisposable } from '../../../../common/lifecycle.js';\n\nfunction bindListToModel<T>(list: ITreeNode<T>[], model: IndexTreeModel<T>): IDisposable {\n\treturn model.onDidSpliceRenderedNodes(({ start, deleteCount, elements }) => {\n\t\tlist.splice(start, deleteCount, ...elements);\n\t});\n}\n\nfunction toArray<T>(list: ITreeNode<T>[]): T[] {\n\treturn list.map(i => i.element);\n}\n\n\nfunction toElements<T>(node: ITreeNode<T>): any {\n\treturn node.children?.length ? { e: node.element, children: node.children.map(toElements) } : node.element;\n}\n\nconst diffIdentityProvider = { getId: (n: number) => String(n) };\n\n/**\n * Calls that test function twice, once with an empty options and\n * once with `diffIdentityProvider`.\n */\nfunction withSmartSplice(fn: (options: IIndexTreeModelSpliceOptions<number, any>) => void) {\n\tfn({});\n\tfn({ diffIdentityProvider });\n}\n\nsuite('IndexTreeModel', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tconst disposables = new DisposableStore();\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\ttest('ctor', () => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tassert(model);\n\t\tassert.strictEqual(list.length, 0);\n\t});\n\n\ttest('insert', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{ element: 0 },\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t], options);\n\n\t\tassert.deepStrictEqual(list.length, 3);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[0].depth, 1);\n\t\tassert.deepStrictEqual(list[1].element, 1);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].depth, 1);\n\t\tassert.deepStrictEqual(list[2].element, 2);\n\t\tassert.deepStrictEqual(list[2].collapsed, false);\n\t\tassert.deepStrictEqual(list[2].depth, 1);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('deep insert', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, children: [\n\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t{ element: 12 },\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t]);\n\n\t\tassert.deepStrictEqual(list.length, 6);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[0].depth, 1);\n\t\tassert.deepStrictEqual(list[1].element, 10);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].depth, 2);\n\t\tassert.deepStrictEqual(list[2].element, 11);\n\t\tassert.deepStrictEqual(list[2].collapsed, false);\n\t\tassert.deepStrictEqual(list[2].depth, 2);\n\t\tassert.deepStrictEqual(list[3].element, 12);\n\t\tassert.deepStrictEqual(list[3].collapsed, false);\n\t\tassert.deepStrictEqual(list[3].depth, 2);\n\t\tassert.deepStrictEqual(list[4].element, 1);\n\t\tassert.deepStrictEqual(list[4].collapsed, false);\n\t\tassert.deepStrictEqual(list[4].depth, 1);\n\t\tassert.deepStrictEqual(list[5].element, 2);\n\t\tassert.deepStrictEqual(list[5].collapsed, false);\n\t\tassert.deepStrictEqual(list[5].depth, 1);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('deep insert collapsed', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, collapsed: true, children: [\n\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t{ element: 12 },\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t], options);\n\n\t\tassert.deepStrictEqual(list.length, 3);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsed, true);\n\t\tassert.deepStrictEqual(list[0].depth, 1);\n\t\tassert.deepStrictEqual(list[1].element, 1);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].depth, 1);\n\t\tassert.deepStrictEqual(list[2].element, 2);\n\t\tassert.deepStrictEqual(list[2].collapsed, false);\n\t\tassert.deepStrictEqual(list[2].depth, 1);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('delete', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{ element: 0 },\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t], options);\n\n\t\tassert.deepStrictEqual(list.length, 3);\n\n\t\tmodel.splice([1], 1, undefined, options);\n\t\tassert.deepStrictEqual(list.length, 2);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[0].depth, 1);\n\t\tassert.deepStrictEqual(list[1].element, 2);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].depth, 1);\n\n\t\tmodel.splice([0], 2, undefined, options);\n\t\tassert.deepStrictEqual(list.length, 0);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('nested delete', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, children: [\n\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t{ element: 12 },\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t], options);\n\n\t\tassert.deepStrictEqual(list.length, 6);\n\n\t\tmodel.splice([1], 2, undefined, options);\n\t\tassert.deepStrictEqual(list.length, 4);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[0].depth, 1);\n\t\tassert.deepStrictEqual(list[1].element, 10);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].depth, 2);\n\t\tassert.deepStrictEqual(list[2].element, 11);\n\t\tassert.deepStrictEqual(list[2].collapsed, false);\n\t\tassert.deepStrictEqual(list[2].depth, 2);\n\t\tassert.deepStrictEqual(list[3].element, 12);\n\t\tassert.deepStrictEqual(list[3].collapsed, false);\n\t\tassert.deepStrictEqual(list[3].depth, 2);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('deep delete', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, children: [\n\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t{ element: 12 },\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t], options);\n\n\t\tassert.deepStrictEqual(list.length, 6);\n\n\t\tmodel.splice([0], 1, undefined, options);\n\t\tassert.deepStrictEqual(list.length, 2);\n\t\tassert.deepStrictEqual(list[0].element, 1);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[0].depth, 1);\n\t\tassert.deepStrictEqual(list[1].element, 2);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].depth, 1);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('smart splice deep', () => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{ element: 0 },\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 },\n\t\t\t{ element: 3 },\n\t\t], { diffIdentityProvider });\n\n\t\tassert.deepStrictEqual(list.filter(l => l.depth === 1).map(toElements), [\n\t\t\t0,\n\t\t\t1,\n\t\t\t2,\n\t\t\t3,\n\t\t]);\n\n\t\tmodel.splice([0], 3, [\n\t\t\t{ element: -0.5 },\n\t\t\t{ element: 0, children: [{ element: 0.1 }] },\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2, children: [{ element: 2.1 }, { element: 2.2, children: [{ element: 2.21 }] }] },\n\t\t], { diffIdentityProvider, diffDepth: Infinity });\n\n\t\tassert.deepStrictEqual(list.filter(l => l.depth === 1).map(toElements), [\n\t\t\t-0.5,\n\t\t\t{ e: 0, children: [0.1] },\n\t\t\t1,\n\t\t\t{ e: 2, children: [2.1, { e: 2.2, children: [2.21] }] },\n\t\t\t3,\n\t\t]);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('hidden delete', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, collapsed: true, children: [\n\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t{ element: 12 },\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t], options);\n\n\t\tassert.deepStrictEqual(list.length, 3);\n\n\t\tmodel.splice([0, 1], 1, undefined, options);\n\t\tassert.deepStrictEqual(list.length, 3);\n\n\t\tmodel.splice([0, 0], 2, undefined, options);\n\t\tassert.deepStrictEqual(list.length, 3);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('collapse', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, children: [\n\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t{ element: 12 },\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t], options);\n\n\t\tassert.deepStrictEqual(list.length, 6);\n\n\t\tmodel.setCollapsed([0], true);\n\t\tassert.deepStrictEqual(list.length, 3);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsed, true);\n\t\tassert.deepStrictEqual(list[0].depth, 1);\n\t\tassert.deepStrictEqual(list[1].element, 1);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].depth, 1);\n\t\tassert.deepStrictEqual(list[2].element, 2);\n\t\tassert.deepStrictEqual(list[2].collapsed, false);\n\t\tassert.deepStrictEqual(list[2].depth, 1);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('expand', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, collapsed: true, children: [\n\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t{ element: 12 },\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t], options);\n\n\t\tassert.deepStrictEqual(list.length, 3);\n\n\t\tmodel.expandTo([0, 1]);\n\t\tassert.deepStrictEqual(list.length, 6);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[0].depth, 1);\n\t\tassert.deepStrictEqual(list[1].element, 10);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].depth, 2);\n\t\tassert.deepStrictEqual(list[2].element, 11);\n\t\tassert.deepStrictEqual(list[2].collapsed, false);\n\t\tassert.deepStrictEqual(list[2].depth, 2);\n\t\tassert.deepStrictEqual(list[3].element, 12);\n\t\tassert.deepStrictEqual(list[3].collapsed, false);\n\t\tassert.deepStrictEqual(list[3].depth, 2);\n\t\tassert.deepStrictEqual(list[4].element, 1);\n\t\tassert.deepStrictEqual(list[4].collapsed, false);\n\t\tassert.deepStrictEqual(list[4].depth, 1);\n\t\tassert.deepStrictEqual(list[5].element, 2);\n\t\tassert.deepStrictEqual(list[5].collapsed, false);\n\t\tassert.deepStrictEqual(list[5].depth, 1);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('smart diff consistency', () => {\n\t\tconst times = 500;\n\t\tconst minEdits = 1;\n\t\tconst maxEdits = 10;\n\t\tconst maxInserts = 5;\n\n\t\tfor (let i = 0; i < times; i++) {\n\t\t\tconst list: ITreeNode<number>[] = [];\n\t\t\tconst options = { diffIdentityProvider: { getId: (n: number) => String(n) } };\n\t\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\t\tconst disposable = bindListToModel(list, model);\n\n\t\t\tconst changes = [];\n\t\t\tconst expected: number[] = [];\n\t\t\tlet elementCounter = 0;\n\n\t\t\tfor (let edits = Math.random() * (maxEdits - minEdits) + minEdits; edits > 0; edits--) {\n\t\t\t\tconst spliceIndex = Math.floor(Math.random() * list.length);\n\t\t\t\tconst deleteCount = Math.ceil(Math.random() * (list.length - spliceIndex));\n\t\t\t\tconst insertCount = Math.floor(Math.random() * maxInserts + 1);\n\n\t\t\t\tconst inserts: ITreeElement<number>[] = [];\n\t\t\t\tfor (let i = 0; i < insertCount; i++) {\n\t\t\t\t\tconst element = elementCounter++;\n\t\t\t\t\tinserts.push({ element, children: [] });\n\t\t\t\t}\n\n\t\t\t\t// move existing items\n\t\t\t\tif (Math.random() < 0.5) {\n\t\t\t\t\tconst elements = list.slice(spliceIndex, spliceIndex + Math.floor(deleteCount / 2));\n\t\t\t\t\tinserts.push(...elements.map(({ element }) => ({ element, children: [] })));\n\t\t\t\t}\n\n\t\t\t\tmodel.splice([spliceIndex], deleteCount, inserts, options);\n\t\t\t\texpected.splice(spliceIndex, deleteCount, ...inserts.map(i => i.element));\n\n\t\t\t\tconst listElements = list.map(l => l.element);\n\t\t\t\tchanges.push(`splice(${spliceIndex}, ${deleteCount}, [${inserts.map(e => e.element).join(', ')}]) -> ${listElements.join(', ')}`);\n\n\t\t\t\tassert.deepStrictEqual(expected, listElements, `Expected ${listElements.join(', ')} to equal ${expected.join(', ')}. Steps:\\n\\n${changes.join('\\n')}`);\n\t\t\t}\n\n\t\t\tdisposable.dispose();\n\t\t}\n\t});\n\n\ttest('collapse should recursively adjust visible count', () => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 11, children: [\n\t\t\t\t\t\t\t{ element: 111 }\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\telement: 2, children: [\n\t\t\t\t\t{ element: 21 }\n\t\t\t\t]\n\t\t\t}\n\t\t]);\n\n\t\tassert.deepStrictEqual(list.length, 5);\n\t\tassert.deepStrictEqual(toArray(list), [1, 11, 111, 2, 21]);\n\n\t\tmodel.setCollapsed([0, 0], true);\n\t\tassert.deepStrictEqual(list.length, 4);\n\t\tassert.deepStrictEqual(toArray(list), [1, 11, 2, 21]);\n\n\t\tmodel.setCollapsed([1], true);\n\t\tassert.deepStrictEqual(list.length, 3);\n\t\tassert.deepStrictEqual(toArray(list), [1, 11, 2]);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('setCollapsible', () => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, children: [\n\t\t\t\t\t{ element: 10 }\n\t\t\t\t]\n\t\t\t}\n\t\t]);\n\n\t\tassert.deepStrictEqual(list.length, 2);\n\n\t\tmodel.setCollapsible([0], false);\n\t\tassert.deepStrictEqual(list.length, 2);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsible, false);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].element, 10);\n\t\tassert.deepStrictEqual(list[1].collapsible, false);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\n\t\tassert.deepStrictEqual(model.setCollapsed([0], true), false);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsible, false);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].element, 10);\n\t\tassert.deepStrictEqual(list[1].collapsible, false);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\n\t\tassert.deepStrictEqual(model.setCollapsed([0], false), false);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsible, false);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].element, 10);\n\t\tassert.deepStrictEqual(list[1].collapsible, false);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\n\t\tmodel.setCollapsible([0], true);\n\t\tassert.deepStrictEqual(list.length, 2);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsible, true);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].element, 10);\n\t\tassert.deepStrictEqual(list[1].collapsible, false);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\n\t\tassert.deepStrictEqual(model.setCollapsed([0], true), true);\n\t\tassert.deepStrictEqual(list.length, 1);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsible, true);\n\t\tassert.deepStrictEqual(list[0].collapsed, true);\n\n\t\tassert.deepStrictEqual(model.setCollapsed([0], false), true);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsible, true);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].element, 10);\n\t\tassert.deepStrictEqual(list[1].collapsible, false);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('simple filter', () => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst filter = new class implements ITreeFilter<number> {\n\t\t\tfilter(element: number): TreeVisibility {\n\t\t\t\treturn element % 2 === 0 ? TreeVisibility.Visible : TreeVisibility.Hidden;\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<number>('test', -1, { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, children: [\n\t\t\t\t\t{ element: 1 },\n\t\t\t\t\t{ element: 2 },\n\t\t\t\t\t{ element: 3 },\n\t\t\t\t\t{ element: 4 },\n\t\t\t\t\t{ element: 5 },\n\t\t\t\t\t{ element: 6 },\n\t\t\t\t\t{ element: 7 }\n\t\t\t\t]\n\t\t\t}\n\t\t]);\n\n\t\tassert.deepStrictEqual(list.length, 4);\n\t\tassert.deepStrictEqual(toArray(list), [0, 2, 4, 6]);\n\n\t\tmodel.setCollapsed([0], true);\n\t\tassert.deepStrictEqual(toArray(list), [0]);\n\n\t\tmodel.setCollapsed([0], false);\n\t\tassert.deepStrictEqual(toArray(list), [0, 2, 4, 6]);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('recursive filter on initial model', () => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst filter = new class implements ITreeFilter<number> {\n\t\t\tfilter(element: number): TreeVisibility {\n\t\t\t\treturn element === 0 ? TreeVisibility.Recurse : TreeVisibility.Hidden;\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<number>('test', -1, { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, children: [\n\t\t\t\t\t{ element: 1 },\n\t\t\t\t\t{ element: 2 }\n\t\t\t\t]\n\t\t\t}\n\t\t]);\n\n\t\tassert.deepStrictEqual(toArray(list), []);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('refilter', () => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tlet shouldFilter = false;\n\t\tconst filter = new class implements ITreeFilter<number> {\n\t\t\tfilter(element: number): TreeVisibility {\n\t\t\t\treturn (!shouldFilter || element % 2 === 0) ? TreeVisibility.Visible : TreeVisibility.Hidden;\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<number>('test', -1, { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, children: [\n\t\t\t\t\t{ element: 1 },\n\t\t\t\t\t{ element: 2 },\n\t\t\t\t\t{ element: 3 },\n\t\t\t\t\t{ element: 4 },\n\t\t\t\t\t{ element: 5 },\n\t\t\t\t\t{ element: 6 },\n\t\t\t\t\t{ element: 7 }\n\t\t\t\t]\n\t\t\t},\n\t\t]);\n\n\t\tassert.deepStrictEqual(toArray(list), [0, 1, 2, 3, 4, 5, 6, 7]);\n\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), [0, 1, 2, 3, 4, 5, 6, 7]);\n\n\t\tshouldFilter = true;\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), [0, 2, 4, 6]);\n\n\t\tshouldFilter = false;\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), [0, 1, 2, 3, 4, 5, 6, 7]);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('recursive filter', () => {\n\t\tconst list: ITreeNode<string>[] = [];\n\t\tlet query = new RegExp('');\n\t\tconst filter = new class implements ITreeFilter<string> {\n\t\t\tfilter(element: string): TreeVisibility {\n\t\t\t\treturn query.test(element) ? TreeVisibility.Visible : TreeVisibility.Recurse;\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<string>('test', 'root', { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 'vscode', children: [\n\t\t\t\t\t{ element: '.build' },\n\t\t\t\t\t{ element: 'git' },\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 'github', children: [\n\t\t\t\t\t\t\t{ element: 'calendar.yml' },\n\t\t\t\t\t\t\t{ element: 'endgame' },\n\t\t\t\t\t\t\t{ element: 'build.js' },\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 'build', children: [\n\t\t\t\t\t\t\t{ element: 'lib' },\n\t\t\t\t\t\t\t{ element: 'gulpfile.js' }\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t]);\n\n\t\tassert.deepStrictEqual(list.length, 10);\n\n\t\tquery = /build/;\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), ['vscode', '.build', 'github', 'build.js', 'build']);\n\n\t\tmodel.setCollapsed([0], true);\n\t\tassert.deepStrictEqual(toArray(list), ['vscode']);\n\n\t\tmodel.setCollapsed([0], false);\n\t\tassert.deepStrictEqual(toArray(list), ['vscode', '.build', 'github', 'build.js', 'build']);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('recursive filter updates when children change (#133272)', async () => {\n\t\tconst list: ITreeNode<string>[] = [];\n\t\tlet query = '';\n\t\tconst filter = new class implements ITreeFilter<string> {\n\t\t\tfilter(element: string): TreeVisibility {\n\t\t\t\treturn element.includes(query) ? TreeVisibility.Visible : TreeVisibility.Recurse;\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<string>('test', 'root', { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 'a',\n\t\t\t\tchildren: [\n\t\t\t\t\t{ element: 'b' },\n\t\t\t\t],\n\t\t\t},\n\t\t]);\n\n\t\tassert.deepStrictEqual(toArray(list), ['a', 'b']);\n\t\tquery = 'visible';\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), []);\n\n\t\tmodel.splice([0, 0, 0], 0, [\n\t\t\t{\n\t\t\t\telement: 'visible', children: []\n\t\t\t},\n\t\t]);\n\n\t\tawait timeout(0); // wait for refilter microtask\n\n\t\tassert.deepStrictEqual(toArray(list), ['a', 'b', 'visible']);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('recursive filter with collapse', () => {\n\t\tconst list: ITreeNode<string>[] = [];\n\t\tlet query = new RegExp('');\n\t\tconst filter = new class implements ITreeFilter<string> {\n\t\t\tfilter(element: string): TreeVisibility {\n\t\t\t\treturn query.test(element) ? TreeVisibility.Visible : TreeVisibility.Recurse;\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<string>('test', 'root', { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 'vscode', children: [\n\t\t\t\t\t{ element: '.build' },\n\t\t\t\t\t{ element: 'git' },\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 'github', children: [\n\t\t\t\t\t\t\t{ element: 'calendar.yml' },\n\t\t\t\t\t\t\t{ element: 'endgame' },\n\t\t\t\t\t\t\t{ element: 'build.js' },\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 'build', children: [\n\t\t\t\t\t\t\t{ element: 'lib' },\n\t\t\t\t\t\t\t{ element: 'gulpfile.js' }\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t]);\n\n\t\tassert.deepStrictEqual(list.length, 10);\n\n\t\tquery = /gulp/;\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), ['vscode', 'build', 'gulpfile.js']);\n\n\t\tmodel.setCollapsed([0, 3], true);\n\t\tassert.deepStrictEqual(toArray(list), ['vscode', 'build']);\n\n\t\tmodel.setCollapsed([0], true);\n\t\tassert.deepStrictEqual(toArray(list), ['vscode']);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('recursive filter while collapsed', () => {\n\t\tconst list: ITreeNode<string>[] = [];\n\t\tlet query = new RegExp('');\n\t\tconst filter = new class implements ITreeFilter<string> {\n\t\t\tfilter(element: string): TreeVisibility {\n\t\t\t\treturn query.test(element) ? TreeVisibility.Visible : TreeVisibility.Recurse;\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<string>('test', 'root', { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 'vscode', collapsed: true, children: [\n\t\t\t\t\t{ element: '.build' },\n\t\t\t\t\t{ element: 'git' },\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 'github', children: [\n\t\t\t\t\t\t\t{ element: 'calendar.yml' },\n\t\t\t\t\t\t\t{ element: 'endgame' },\n\t\t\t\t\t\t\t{ element: 'build.js' },\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 'build', children: [\n\t\t\t\t\t\t\t{ element: 'lib' },\n\t\t\t\t\t\t\t{ element: 'gulpfile.js' }\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t]);\n\n\t\tassert.deepStrictEqual(toArray(list), ['vscode']);\n\n\t\tquery = /gulp/;\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), ['vscode']);\n\n\t\tmodel.setCollapsed([0], false);\n\t\tassert.deepStrictEqual(toArray(list), ['vscode', 'build', 'gulpfile.js']);\n\n\t\tmodel.setCollapsed([0], true);\n\t\tassert.deepStrictEqual(toArray(list), ['vscode']);\n\n\t\tquery = new RegExp('');\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), ['vscode']);\n\n\t\tmodel.setCollapsed([0], false);\n\t\tassert.deepStrictEqual(list.length, 10);\n\n\t\tdisposable.dispose();\n\t});\n\n\tsuite('getNodeLocation', () => {\n\n\t\ttest('simple', () => {\n\t\t\tconst list: IIndexTreeNode<number>[] = [];\n\t\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\t\tconst disposable = bindListToModel(list, model);\n\n\t\t\tmodel.splice([0], 0, [\n\t\t\t\t{\n\t\t\t\t\telement: 0, children: [\n\t\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t\t{ element: 12 },\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{ element: 1 },\n\t\t\t\t{ element: 2 }\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[0]), [0]);\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[1]), [0, 0]);\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[2]), [0, 1]);\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[3]), [0, 2]);\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[4]), [1]);\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[5]), [2]);\n\n\t\t\tdisposable.dispose();\n\t\t});\n\n\t\ttest('with filter', () => {\n\t\t\tconst list: IIndexTreeNode<number>[] = [];\n\t\t\tconst filter = new class implements ITreeFilter<number> {\n\t\t\t\tfilter(element: number): TreeVisibility {\n\t\t\t\t\treturn element % 2 === 0 ? TreeVisibility.Visible : TreeVisibility.Hidden;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst model = new IndexTreeModel<number>('test', -1, { filter });\n\t\t\tconst disposable = bindListToModel(list, model);\n\n\t\t\tmodel.splice([0], 0, [\n\t\t\t\t{\n\t\t\t\t\telement: 0, children: [\n\t\t\t\t\t\t{ element: 1 },\n\t\t\t\t\t\t{ element: 2 },\n\t\t\t\t\t\t{ element: 3 },\n\t\t\t\t\t\t{ element: 4 },\n\t\t\t\t\t\t{ element: 5 },\n\t\t\t\t\t\t{ element: 6 },\n\t\t\t\t\t\t{ element: 7 }\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[0]), [0]);\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[1]), [0, 1]);\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[2]), [0, 3]);\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[3]), [0, 5]);\n\n\t\t\tdisposable.dispose();\n\t\t});\n\t});\n\n\ttest('refilter with filtered out nodes', () => {\n\t\tconst list: ITreeNode<string>[] = [];\n\t\tlet query = new RegExp('');\n\t\tconst filter = new class implements ITreeFilter<string> {\n\t\t\tfilter(element: string): boolean {\n\t\t\t\treturn query.test(element);\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<string>('test', 'root', { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{ element: 'silver' },\n\t\t\t{ element: 'gold' },\n\t\t\t{ element: 'platinum' }\n\t\t]);\n\n\t\tassert.deepStrictEqual(toArray(list), ['silver', 'gold', 'platinum']);\n\n\t\tquery = /platinum/;\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), ['platinum']);\n\n\t\tmodel.splice([0], Number.POSITIVE_INFINITY, [\n\t\t\t{ element: 'silver' },\n\t\t\t{ element: 'gold' },\n\t\t\t{ element: 'platinum' }\n\t\t]);\n\t\tassert.deepStrictEqual(toArray(list), ['platinum']);\n\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), ['platinum']);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('explicit hidden nodes should have renderNodeCount == 0, issue #83211', () => {\n\t\tconst list: ITreeNode<string>[] = [];\n\t\tlet query = new RegExp('');\n\t\tconst filter = new class implements ITreeFilter<string> {\n\t\t\tfilter(element: string): boolean {\n\t\t\t\treturn query.test(element);\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<string>('test', 'root', { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{ element: 'a', children: [{ element: 'aa' }] },\n\t\t\t{ element: 'b', children: [{ element: 'bb' }] }\n\t\t]);\n\n\t\tassert.deepStrictEqual(toArray(list), ['a', 'aa', 'b', 'bb']);\n\t\tassert.deepStrictEqual(model.getListIndex([0]), 0);\n\t\tassert.deepStrictEqual(model.getListIndex([0, 0]), 1);\n\t\tassert.deepStrictEqual(model.getListIndex([1]), 2);\n\t\tassert.deepStrictEqual(model.getListIndex([1, 0]), 3);\n\n\t\tquery = /b/;\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), ['b', 'bb']);\n\t\tassert.deepStrictEqual(model.getListIndex([0]), -1);\n\t\tassert.deepStrictEqual(model.getListIndex([0, 0]), -1);\n\t\tassert.deepStrictEqual(model.getListIndex([1]), 0);\n\t\tassert.deepStrictEqual(model.getListIndex([1, 0]), 1);\n\n\t\tdisposable.dispose();\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { IIndexTreeModelSpliceOptions, IIndexTreeNode, IndexTreeModel } from '../../../../browser/ui/tree/indexTreeModel.js';\nimport { ITreeElement, ITreeFilter, ITreeNode, TreeVisibility } from '../../../../browser/ui/tree/tree.js';\nimport { timeout } from '../../../../common/async.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../common/utils.js';\nimport { DisposableStore, IDisposable } from '../../../../common/lifecycle.js';\n\nfunction bindListToModel<T>(list: ITreeNode<T>[], model: IndexTreeModel<T>): IDisposable {\n\treturn model.onDidSpliceRenderedNodes(({ start, deleteCount, elements }) => {\n\t\tlist.splice(start, deleteCount, ...elements);\n\t});\n}\n\nfunction toArray<T>(list: ITreeNode<T>[]): T[] {\n\treturn list.map(i => i.element);\n}\n\n\nfunction toElements<T>(node: ITreeNode<T>): any {\n\treturn node.children?.length ? { e: node.element, children: node.children.map(toElements) } : node.element;\n}\n\nconst diffIdentityProvider = { getId: (n: number) => String(n) };\n\n/**\n * Calls that test function twice, once with an empty options and\n * once with `diffIdentityProvider`.\n */\nfunction withSmartSplice(fn: (options: IIndexTreeModelSpliceOptions<number, any>) => void) {\n\tfn({});\n\tfn({ diffIdentityProvider });\n}\n\nsuite('IndexTreeModel', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tconst disposables = new DisposableStore();\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\ttest('ctor', () => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tassert(model);\n\t\tassert.strictEqual(list.length, 0);\n\t});\n\n\ttest('insert', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{ element: 0 },\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t], options);\n\n\t\tassert.deepStrictEqual(list.length, 3);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[0].depth, 1);\n\t\tassert.deepStrictEqual(list[1].element, 1);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].depth, 1);\n\t\tassert.deepStrictEqual(list[2].element, 2);\n\t\tassert.deepStrictEqual(list[2].collapsed, false);\n\t\tassert.deepStrictEqual(list[2].depth, 1);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('deep insert', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, children: [\n\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t{ element: 12 },\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t]);\n\n\t\tassert.deepStrictEqual(list.length, 6);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[0].depth, 1);\n\t\tassert.deepStrictEqual(list[1].element, 10);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].depth, 2);\n\t\tassert.deepStrictEqual(list[2].element, 11);\n\t\tassert.deepStrictEqual(list[2].collapsed, false);\n\t\tassert.deepStrictEqual(list[2].depth, 2);\n\t\tassert.deepStrictEqual(list[3].element, 12);\n\t\tassert.deepStrictEqual(list[3].collapsed, false);\n\t\tassert.deepStrictEqual(list[3].depth, 2);\n\t\tassert.deepStrictEqual(list[4].element, 1);\n\t\tassert.deepStrictEqual(list[4].collapsed, false);\n\t\tassert.deepStrictEqual(list[4].depth, 1);\n\t\tassert.deepStrictEqual(list[5].element, 2);\n\t\tassert.deepStrictEqual(list[5].collapsed, false);\n\t\tassert.deepStrictEqual(list[5].depth, 1);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('deep insert collapsed', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, collapsed: true, children: [\n\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t{ element: 12 },\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t], options);\n\n\t\tassert.deepStrictEqual(list.length, 3);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsed, true);\n\t\tassert.deepStrictEqual(list[0].depth, 1);\n\t\tassert.deepStrictEqual(list[1].element, 1);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].depth, 1);\n\t\tassert.deepStrictEqual(list[2].element, 2);\n\t\tassert.deepStrictEqual(list[2].collapsed, false);\n\t\tassert.deepStrictEqual(list[2].depth, 1);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('delete', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{ element: 0 },\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t], options);\n\n\t\tassert.deepStrictEqual(list.length, 3);\n\n\t\tmodel.splice([1], 1, undefined, options);\n\t\tassert.deepStrictEqual(list.length, 2);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[0].depth, 1);\n\t\tassert.deepStrictEqual(list[1].element, 2);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].depth, 1);\n\n\t\tmodel.splice([0], 2, undefined, options);\n\t\tassert.deepStrictEqual(list.length, 0);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('nested delete', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, children: [\n\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t{ element: 12 },\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t], options);\n\n\t\tassert.deepStrictEqual(list.length, 6);\n\n\t\tmodel.splice([1], 2, undefined, options);\n\t\tassert.deepStrictEqual(list.length, 4);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[0].depth, 1);\n\t\tassert.deepStrictEqual(list[1].element, 10);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].depth, 2);\n\t\tassert.deepStrictEqual(list[2].element, 11);\n\t\tassert.deepStrictEqual(list[2].collapsed, false);\n\t\tassert.deepStrictEqual(list[2].depth, 2);\n\t\tassert.deepStrictEqual(list[3].element, 12);\n\t\tassert.deepStrictEqual(list[3].collapsed, false);\n\t\tassert.deepStrictEqual(list[3].depth, 2);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('deep delete', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, children: [\n\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t{ element: 12 },\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t], options);\n\n\t\tassert.deepStrictEqual(list.length, 6);\n\n\t\tmodel.splice([0], 1, undefined, options);\n\t\tassert.deepStrictEqual(list.length, 2);\n\t\tassert.deepStrictEqual(list[0].element, 1);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[0].depth, 1);\n\t\tassert.deepStrictEqual(list[1].element, 2);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].depth, 1);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('smart splice deep', () => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{ element: 0 },\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 },\n\t\t\t{ element: 3 },\n\t\t], { diffIdentityProvider });\n\n\t\tassert.deepStrictEqual(list.filter(l => l.depth === 1).map(toElements), [\n\t\t\t0,\n\t\t\t1,\n\t\t\t2,\n\t\t\t3,\n\t\t]);\n\n\t\tmodel.splice([0], 3, [\n\t\t\t{ element: -0.5 },\n\t\t\t{ element: 0, children: [{ element: 0.1 }] },\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2, children: [{ element: 2.1 }, { element: 2.2, children: [{ element: 2.21 }] }] },\n\t\t], { diffIdentityProvider, diffDepth: Infinity });\n\n\t\tassert.deepStrictEqual(list.filter(l => l.depth === 1).map(toElements), [\n\t\t\t-0.5,\n\t\t\t{ e: 0, children: [0.1] },\n\t\t\t1,\n\t\t\t{ e: 2, children: [2.1, { e: 2.2, children: [2.21] }] },\n\t\t\t3,\n\t\t]);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('hidden delete', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, collapsed: true, children: [\n\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t{ element: 12 },\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t], options);\n\n\t\tassert.deepStrictEqual(list.length, 3);\n\n\t\tmodel.splice([0, 1], 1, undefined, options);\n\t\tassert.deepStrictEqual(list.length, 3);\n\n\t\tmodel.splice([0, 0], 2, undefined, options);\n\t\tassert.deepStrictEqual(list.length, 3);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('collapse', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, children: [\n\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t{ element: 12 },\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t], options);\n\n\t\tassert.deepStrictEqual(list.length, 6);\n\n\t\tmodel.setCollapsed([0], true);\n\t\tassert.deepStrictEqual(list.length, 3);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsed, true);\n\t\tassert.deepStrictEqual(list[0].depth, 1);\n\t\tassert.deepStrictEqual(list[1].element, 1);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].depth, 1);\n\t\tassert.deepStrictEqual(list[2].element, 2);\n\t\tassert.deepStrictEqual(list[2].collapsed, false);\n\t\tassert.deepStrictEqual(list[2].depth, 1);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('expand', () => withSmartSplice(options => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, collapsed: true, children: [\n\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t{ element: 12 },\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ element: 1 },\n\t\t\t{ element: 2 }\n\t\t], options);\n\n\t\tassert.deepStrictEqual(list.length, 3);\n\n\t\tmodel.expandTo([0, 1]);\n\t\tassert.deepStrictEqual(list.length, 6);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[0].depth, 1);\n\t\tassert.deepStrictEqual(list[1].element, 10);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].depth, 2);\n\t\tassert.deepStrictEqual(list[2].element, 11);\n\t\tassert.deepStrictEqual(list[2].collapsed, false);\n\t\tassert.deepStrictEqual(list[2].depth, 2);\n\t\tassert.deepStrictEqual(list[3].element, 12);\n\t\tassert.deepStrictEqual(list[3].collapsed, false);\n\t\tassert.deepStrictEqual(list[3].depth, 2);\n\t\tassert.deepStrictEqual(list[4].element, 1);\n\t\tassert.deepStrictEqual(list[4].collapsed, false);\n\t\tassert.deepStrictEqual(list[4].depth, 1);\n\t\tassert.deepStrictEqual(list[5].element, 2);\n\t\tassert.deepStrictEqual(list[5].collapsed, false);\n\t\tassert.deepStrictEqual(list[5].depth, 1);\n\n\t\tdisposable.dispose();\n\t}));\n\n\ttest('smart diff consistency', () => {\n\t\tconst times = 500;\n\t\tconst minEdits = 1;\n\t\tconst maxEdits = 10;\n\t\tconst maxInserts = 5;\n\n\t\tfor (let i = 0; i < times; i++) {\n\t\t\tconst list: ITreeNode<number>[] = [];\n\t\t\tconst options = { diffIdentityProvider: { getId: (n: number) => String(n) } };\n\t\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\t\tconst disposable = bindListToModel(list, model);\n\n\t\t\tconst changes = [];\n\t\t\tconst expected: number[] = [];\n\t\t\tlet elementCounter = 0;\n\n\t\t\tfor (let edits = Math.random() * (maxEdits - minEdits) + minEdits; edits > 0; edits--) {\n\t\t\t\tconst spliceIndex = Math.floor(Math.random() * list.length);\n\t\t\t\tconst deleteCount = Math.ceil(Math.random() * (list.length - spliceIndex));\n\t\t\t\tconst insertCount = Math.floor(Math.random() * maxInserts + 1);\n\n\t\t\t\tconst inserts: ITreeElement<number>[] = [];\n\t\t\t\tfor (let i = 0; i < insertCount; i++) {\n\t\t\t\t\tconst element = elementCounter++;\n\t\t\t\t\tinserts.push({ element, children: [] });\n\t\t\t\t}\n\n\t\t\t\t// move existing items\n\t\t\t\tif (Math.random() < 0.5) {\n\t\t\t\t\tconst elements = list.slice(spliceIndex, spliceIndex + Math.floor(deleteCount / 2));\n\t\t\t\t\tinserts.push(...elements.map(({ element }) => ({ element, children: [] })));\n\t\t\t\t}\n\n\t\t\t\tmodel.splice([spliceIndex], deleteCount, inserts, options);\n\t\t\t\texpected.splice(spliceIndex, deleteCount, ...inserts.map(i => i.element));\n\n\t\t\t\tconst listElements = list.map(l => l.element);\n\t\t\t\tchanges.push(`splice(${spliceIndex}, ${deleteCount}, [${inserts.map(e => e.element).join(', ')}]) -> ${listElements.join(', ')}`);\n\n\t\t\t\tassert.deepStrictEqual(expected, listElements, `Expected ${listElements.join(', ')} to equal ${expected.join(', ')}. Steps:\\n\\n${changes.join('\\n')}`);\n\t\t\t}\n\n\t\t\tdisposable.dispose();\n\t\t}\n\t});\n\n\ttest('collapse should recursively adjust visible count', () => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 1, children: [\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 11, children: [\n\t\t\t\t\t\t\t{ element: 111 }\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\telement: 2, children: [\n\t\t\t\t\t{ element: 21 }\n\t\t\t\t]\n\t\t\t}\n\t\t]);\n\n\t\tassert.deepStrictEqual(list.length, 5);\n\t\tassert.deepStrictEqual(toArray(list), [1, 11, 111, 2, 21]);\n\n\t\tmodel.setCollapsed([0, 0], true);\n\t\tassert.deepStrictEqual(list.length, 4);\n\t\tassert.deepStrictEqual(toArray(list), [1, 11, 2, 21]);\n\n\t\tmodel.setCollapsed([1], true);\n\t\tassert.deepStrictEqual(list.length, 3);\n\t\tassert.deepStrictEqual(toArray(list), [1, 11, 2]);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('setCollapsible', () => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, children: [\n\t\t\t\t\t{ element: 10 }\n\t\t\t\t]\n\t\t\t}\n\t\t]);\n\n\t\tassert.deepStrictEqual(list.length, 2);\n\n\t\tmodel.setCollapsible([0], false);\n\t\tassert.deepStrictEqual(list.length, 2);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsible, false);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].element, 10);\n\t\tassert.deepStrictEqual(list[1].collapsible, false);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\n\t\tassert.deepStrictEqual(model.setCollapsed([0], true), false);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsible, false);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].element, 10);\n\t\tassert.deepStrictEqual(list[1].collapsible, false);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\n\t\tassert.deepStrictEqual(model.setCollapsed([0], false), false);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsible, false);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].element, 10);\n\t\tassert.deepStrictEqual(list[1].collapsible, false);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\n\t\tmodel.setCollapsible([0], true);\n\t\tassert.deepStrictEqual(list.length, 2);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsible, true);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].element, 10);\n\t\tassert.deepStrictEqual(list[1].collapsible, false);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\n\t\tassert.deepStrictEqual(model.setCollapsed([0], true), true);\n\t\tassert.deepStrictEqual(list.length, 1);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsible, true);\n\t\tassert.deepStrictEqual(list[0].collapsed, true);\n\n\t\tassert.deepStrictEqual(model.setCollapsed([0], false), true);\n\t\tassert.deepStrictEqual(list[0].element, 0);\n\t\tassert.deepStrictEqual(list[0].collapsible, true);\n\t\tassert.deepStrictEqual(list[0].collapsed, false);\n\t\tassert.deepStrictEqual(list[1].element, 10);\n\t\tassert.deepStrictEqual(list[1].collapsible, false);\n\t\tassert.deepStrictEqual(list[1].collapsed, false);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('simple filter', () => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst filter = new class implements ITreeFilter<number> {\n\t\t\tfilter(element: number): TreeVisibility {\n\t\t\t\treturn element % 2 === 0 ? TreeVisibility.Visible : TreeVisibility.Hidden;\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<number>('test', -1, { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, children: [\n\t\t\t\t\t{ element: 1 },\n\t\t\t\t\t{ element: 2 },\n\t\t\t\t\t{ element: 3 },\n\t\t\t\t\t{ element: 4 },\n\t\t\t\t\t{ element: 5 },\n\t\t\t\t\t{ element: 6 },\n\t\t\t\t\t{ element: 7 }\n\t\t\t\t]\n\t\t\t}\n\t\t]);\n\n\t\tassert.deepStrictEqual(list.length, 4);\n\t\tassert.deepStrictEqual(toArray(list), [0, 2, 4, 6]);\n\n\t\tmodel.setCollapsed([0], true);\n\t\tassert.deepStrictEqual(toArray(list), [0]);\n\n\t\tmodel.setCollapsed([0], false);\n\t\tassert.deepStrictEqual(toArray(list), [0, 2, 4, 6]);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('recursive filter on initial model', () => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tconst filter = new class implements ITreeFilter<number> {\n\t\t\tfilter(element: number): TreeVisibility {\n\t\t\t\treturn element === 0 ? TreeVisibility.Recurse : TreeVisibility.Hidden;\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<number>('test', -1, { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, children: [\n\t\t\t\t\t{ element: 1 },\n\t\t\t\t\t{ element: 2 }\n\t\t\t\t]\n\t\t\t}\n\t\t]);\n\n\t\tassert.deepStrictEqual(toArray(list), []);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('refilter', () => {\n\t\tconst list: ITreeNode<number>[] = [];\n\t\tlet shouldFilter = false;\n\t\tconst filter = new class implements ITreeFilter<number> {\n\t\t\tfilter(element: number): TreeVisibility {\n\t\t\t\treturn (!shouldFilter || element % 2 === 0) ? TreeVisibility.Visible : TreeVisibility.Hidden;\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<number>('test', -1, { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 0, children: [\n\t\t\t\t\t{ element: 1 },\n\t\t\t\t\t{ element: 2 },\n\t\t\t\t\t{ element: 3 },\n\t\t\t\t\t{ element: 4 },\n\t\t\t\t\t{ element: 5 },\n\t\t\t\t\t{ element: 6 },\n\t\t\t\t\t{ element: 7 }\n\t\t\t\t]\n\t\t\t},\n\t\t]);\n\n\t\tassert.deepStrictEqual(toArray(list), [0, 1, 2, 3, 4, 5, 6, 7]);\n\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), [0, 1, 2, 3, 4, 5, 6, 7]);\n\n\t\tshouldFilter = true;\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), [0, 2, 4, 6]);\n\n\t\tshouldFilter = false;\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), [0, 1, 2, 3, 4, 5, 6, 7]);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('recursive filter', () => {\n\t\tconst list: ITreeNode<string>[] = [];\n\t\tlet query = new RegExp('');\n\t\tconst filter = new class implements ITreeFilter<string> {\n\t\t\tfilter(element: string): TreeVisibility {\n\t\t\t\treturn query.test(element) ? TreeVisibility.Visible : TreeVisibility.Recurse;\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<string>('test', 'root', { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 'vscode', children: [\n\t\t\t\t\t{ element: '.build' },\n\t\t\t\t\t{ element: 'git' },\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 'github', children: [\n\t\t\t\t\t\t\t{ element: 'calendar.yml' },\n\t\t\t\t\t\t\t{ element: 'endgame' },\n\t\t\t\t\t\t\t{ element: 'build.js' },\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 'build', children: [\n\t\t\t\t\t\t\t{ element: 'lib' },\n\t\t\t\t\t\t\t{ element: 'gulpfile.js' }\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t]);\n\n\t\tassert.deepStrictEqual(list.length, 10);\n\n\t\tquery = /build/;\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), ['vscode', '.build', 'github', 'build.js', 'build']);\n\n\t\tmodel.setCollapsed([0], true);\n\t\tassert.deepStrictEqual(toArray(list), ['vscode']);\n\n\t\tmodel.setCollapsed([0], false);\n\t\tassert.deepStrictEqual(toArray(list), ['vscode', '.build', 'github', 'build.js', 'build']);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('recursive filter updates when children change (#133272)', async () => {\n\t\tconst list: ITreeNode<string>[] = [];\n\t\tlet query = '';\n\t\tconst filter = new class implements ITreeFilter<string> {\n\t\t\tfilter(element: string): TreeVisibility {\n\t\t\t\treturn element.includes(query) ? TreeVisibility.Visible : TreeVisibility.Recurse;\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<string>('test', 'root', { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 'a',\n\t\t\t\tchildren: [\n\t\t\t\t\t{ element: 'b' },\n\t\t\t\t],\n\t\t\t},\n\t\t]);\n\n\t\tassert.deepStrictEqual(toArray(list), ['a', 'b']);\n\t\tquery = 'visible';\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), []);\n\n\t\tmodel.splice([0, 0, 0], 0, [\n\t\t\t{\n\t\t\t\telement: 'visible', children: []\n\t\t\t},\n\t\t]);\n\n\t\tawait timeout(0); // wait for refilter microtask\n\n\t\tassert.deepStrictEqual(toArray(list), ['a', 'b', 'visible']);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('recursive filter with collapse', () => {\n\t\tconst list: ITreeNode<string>[] = [];\n\t\tlet query = new RegExp('');\n\t\tconst filter = new class implements ITreeFilter<string> {\n\t\t\tfilter(element: string): TreeVisibility {\n\t\t\t\treturn query.test(element) ? TreeVisibility.Visible : TreeVisibility.Recurse;\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<string>('test', 'root', { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 'vscode', children: [\n\t\t\t\t\t{ element: '.build' },\n\t\t\t\t\t{ element: 'git' },\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 'github', children: [\n\t\t\t\t\t\t\t{ element: 'calendar.yml' },\n\t\t\t\t\t\t\t{ element: 'endgame' },\n\t\t\t\t\t\t\t{ element: 'build.js' },\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 'build', children: [\n\t\t\t\t\t\t\t{ element: 'lib' },\n\t\t\t\t\t\t\t{ element: 'gulpfile.js' }\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t]);\n\n\t\tassert.deepStrictEqual(list.length, 10);\n\n\t\tquery = /gulp/;\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), ['vscode', 'build', 'gulpfile.js']);\n\n\t\tmodel.setCollapsed([0, 3], true);\n\t\tassert.deepStrictEqual(toArray(list), ['vscode', 'build']);\n\n\t\tmodel.setCollapsed([0], true);\n\t\tassert.deepStrictEqual(toArray(list), ['vscode']);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('recursive filter while collapsed', () => {\n\t\tconst list: ITreeNode<string>[] = [];\n\t\tlet query = new RegExp('');\n\t\tconst filter = new class implements ITreeFilter<string> {\n\t\t\tfilter(element: string): TreeVisibility {\n\t\t\t\treturn query.test(element) ? TreeVisibility.Visible : TreeVisibility.Recurse;\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<string>('test', 'root', { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{\n\t\t\t\telement: 'vscode', collapsed: true, children: [\n\t\t\t\t\t{ element: '.build' },\n\t\t\t\t\t{ element: 'git' },\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 'github', children: [\n\t\t\t\t\t\t\t{ element: 'calendar.yml' },\n\t\t\t\t\t\t\t{ element: 'endgame' },\n\t\t\t\t\t\t\t{ element: 'build.js' },\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\telement: 'build', children: [\n\t\t\t\t\t\t\t{ element: 'lib' },\n\t\t\t\t\t\t\t{ element: 'gulpfile.js' }\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t]);\n\n\t\tassert.deepStrictEqual(toArray(list), ['vscode']);\n\n\t\tquery = /gulp/;\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), ['vscode']);\n\n\t\tmodel.setCollapsed([0], false);\n\t\tassert.deepStrictEqual(toArray(list), ['vscode', 'build', 'gulpfile.js']);\n\n\t\tmodel.setCollapsed([0], true);\n\t\tassert.deepStrictEqual(toArray(list), ['vscode']);\n\n\t\tquery = new RegExp('');\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), ['vscode']);\n\n\t\tmodel.setCollapsed([0], false);\n\t\tassert.deepStrictEqual(list.length, 10);\n\n\t\tdisposable.dispose();\n\t});\n\n\tsuite('getNodeLocation', () => {\n\n\t\ttest('simple', () => {\n\t\t\tconst list: IIndexTreeNode<number>[] = [];\n\t\t\tconst model = new IndexTreeModel<number>('test', -1);\n\t\t\tconst disposable = bindListToModel(list, model);\n\n\t\t\tmodel.splice([0], 0, [\n\t\t\t\t{\n\t\t\t\t\telement: 0, children: [\n\t\t\t\t\t\t{ element: 10 },\n\t\t\t\t\t\t{ element: 11 },\n\t\t\t\t\t\t{ element: 12 },\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{ element: 1 },\n\t\t\t\t{ element: 2 }\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[0]), [0]);\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[1]), [0, 0]);\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[2]), [0, 1]);\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[3]), [0, 2]);\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[4]), [1]);\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[5]), [2]);\n\n\t\t\tdisposable.dispose();\n\t\t});\n\n\t\ttest('with filter', () => {\n\t\t\tconst list: IIndexTreeNode<number>[] = [];\n\t\t\tconst filter = new class implements ITreeFilter<number> {\n\t\t\t\tfilter(element: number): TreeVisibility {\n\t\t\t\t\treturn element % 2 === 0 ? TreeVisibility.Visible : TreeVisibility.Hidden;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst model = new IndexTreeModel<number>('test', -1, { filter });\n\t\t\tconst disposable = bindListToModel(list, model);\n\n\t\t\tmodel.splice([0], 0, [\n\t\t\t\t{\n\t\t\t\t\telement: 0, children: [\n\t\t\t\t\t\t{ element: 1 },\n\t\t\t\t\t\t{ element: 2 },\n\t\t\t\t\t\t{ element: 3 },\n\t\t\t\t\t\t{ element: 4 },\n\t\t\t\t\t\t{ element: 5 },\n\t\t\t\t\t\t{ element: 6 },\n\t\t\t\t\t\t{ element: 7 }\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[0]), [0]);\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[1]), [0, 1]);\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[2]), [0, 3]);\n\t\t\tassert.deepStrictEqual(model.getNodeLocation(list[3]), [0, 5]);\n\n\t\t\tdisposable.dispose();\n\t\t});\n\t});\n\n\ttest('refilter with filtered out nodes', () => {\n\t\tconst list: ITreeNode<string>[] = [];\n\t\tlet query = new RegExp('');\n\t\tconst filter = new class implements ITreeFilter<string> {\n\t\t\tfilter(element: string): boolean {\n\t\t\t\treturn query.test(element);\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<string>('test', 'root', { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{ element: 'silver' },\n\t\t\t{ element: 'gold' },\n\t\t\t{ element: 'platinum' }\n\t\t]);\n\n\t\tassert.deepStrictEqual(toArray(list), ['silver', 'gold', 'platinum']);\n\n\t\tquery = /platinum/;\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), ['platinum']);\n\n\t\tmodel.splice([0], Number.POSITIVE_INFINITY, [\n\t\t\t{ element: 'silver' },\n\t\t\t{ element: 'gold' },\n\t\t\t{ element: 'platinum' }\n\t\t]);\n\t\tassert.deepStrictEqual(toArray(list), ['platinum']);\n\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), ['platinum']);\n\n\t\tdisposable.dispose();\n\t});\n\n\ttest('explicit hidden nodes should have renderNodeCount == 0, issue #83211', () => {\n\t\tconst list: ITreeNode<string>[] = [];\n\t\tlet query = new RegExp('');\n\t\tconst filter = new class implements ITreeFilter<string> {\n\t\t\tfilter(element: string): boolean {\n\t\t\t\treturn query.test(element);\n\t\t\t}\n\t\t};\n\n\t\tconst model = new IndexTreeModel<string>('test', 'root', { filter });\n\t\tconst disposable = bindListToModel(list, model);\n\n\t\tmodel.splice([0], 0, [\n\t\t\t{ element: 'a', children: [{ element: 'aa' }] },\n\t\t\t{ element: 'b', children: [{ element: 'bb' }] }\n\t\t]);\n\n\t\tassert.deepStrictEqual(toArray(list), ['a', 'aa', 'b', 'bb']);\n\t\tassert.deepStrictEqual(model.getListIndex([0]), 0);\n\t\tassert.deepStrictEqual(model.getListIndex([0, 0]), 1);\n\t\tassert.deepStrictEqual(model.getListIndex([1]), 2);\n\t\tassert.deepStrictEqual(model.getListIndex([1, 0]), 3);\n\n\t\tquery = /b/;\n\t\tmodel.refilter();\n\t\tassert.deepStrictEqual(toArray(list), ['b', 'bb']);\n\t\tassert.deepStrictEqual(model.getListIndex([0]), -1);\n\t\tassert.deepStrictEqual(model.getListIndex([0, 0]), -1);\n\t\tassert.deepStrictEqual(model.getListIndex([1]), 0);\n\t\tassert.deepStrictEqual(model.getListIndex([1, 0]), 1);\n\n\t\tdisposable.dispose();\n\t});\n});\n"]}