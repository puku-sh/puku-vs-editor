{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/base/test/browser/markdownRenderer.test.ts","vs/base/test/browser/markdownRenderer.test.ts"],"names":[],"mappings":"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","file":"markdownRenderer.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/* eslint-disable no-restricted-syntax */\n\nimport assert from 'assert';\nimport { fillInIncompleteTokens, renderMarkdown, renderAsPlaintext } from '../../browser/markdownRenderer.js';\nimport { IMarkdownString, MarkdownString } from '../../common/htmlContent.js';\nimport * as marked from '../../common/marked/marked.js';\nimport { parse } from '../../common/marshalling.js';\nimport { isWeb } from '../../common/platform.js';\nimport { URI } from '../../common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../common/utils.js';\n\nfunction strToNode(str: string): HTMLElement {\n\treturn new DOMParser().parseFromString(str, 'text/html').body.firstChild as HTMLElement;\n}\n\nfunction assertNodeEquals(actualNode: HTMLElement, expectedHtml: string) {\n\tconst expectedNode = strToNode(expectedHtml);\n\tassert.ok(\n\t\tactualNode.isEqualNode(expectedNode),\n\t\t`Expected: ${expectedNode.outerHTML}\\nActual: ${actualNode.outerHTML}`);\n}\n\nsuite('MarkdownRenderer', () => {\n\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuite('Sanitization', () => {\n\t\ttest('Should not render images with unknown schemes', () => {\n\t\t\tconst markdown = { value: `![image](no-such://example.com/cat.gif)` };\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(markdown)).element;\n\t\t\tassert.strictEqual(result.innerHTML, '<p><img alt=\"image\"></p>');\n\t\t});\n\t});\n\n\tsuite('Images', () => {\n\t\ttest('image rendering conforms to default', () => {\n\t\t\tconst markdown = { value: `![image](http://example.com/cat.gif 'caption')` };\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(markdown)).element;\n\t\t\tassertNodeEquals(result, '<div><p><img title=\"caption\" alt=\"image\" src=\"http://example.com/cat.gif\"></p></div>');\n\t\t});\n\n\t\ttest('image rendering conforms to default without title', () => {\n\t\t\tconst markdown = { value: `![image](http://example.com/cat.gif)` };\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(markdown)).element;\n\t\t\tassertNodeEquals(result, '<div><p><img alt=\"image\" src=\"http://example.com/cat.gif\"></p></div>');\n\t\t});\n\n\t\ttest('image width from title params', () => {\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown({ value: `![image](http://example.com/cat.gif|width=100px 'caption')` })).element;\n\t\t\tassertNodeEquals(result, `<div><p><img width=\"100\" title=\"caption\" alt=\"image\" src=\"http://example.com/cat.gif\"></p></div>`);\n\t\t});\n\n\t\ttest('image height from title params', () => {\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown({ value: `![image](http://example.com/cat.gif|height=100 'caption')` })).element;\n\t\t\tassertNodeEquals(result, `<div><p><img height=\"100\" title=\"caption\" alt=\"image\" src=\"http://example.com/cat.gif\"></p></div>`);\n\t\t});\n\n\t\ttest('image width and height from title params', () => {\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown({ value: `![image](http://example.com/cat.gif|height=200,width=100 'caption')` })).element;\n\t\t\tassertNodeEquals(result, `<div><p><img height=\"200\" width=\"100\" title=\"caption\" alt=\"image\" src=\"http://example.com/cat.gif\"></p></div>`);\n\t\t});\n\n\t\ttest('image with file uri should render as same origin uri', () => {\n\t\t\tif (isWeb) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown({ value: `![image](file:///images/cat.gif)` })).element;\n\t\t\tassertNodeEquals(result, '<div><p><img src=\"vscode-file://vscode-app/images/cat.gif\" alt=\"image\"></p></div>');\n\t\t});\n\t});\n\n\tsuite('Code block renderer', () => {\n\t\tconst simpleCodeBlockRenderer = (lang: string, code: string): Promise<HTMLElement> => {\n\t\t\tconst element = document.createElement('code');\n\t\t\telement.textContent = code;\n\t\t\treturn Promise.resolve(element);\n\t\t};\n\n\t\ttest('asyncRenderCallback should be invoked for code blocks', () => {\n\t\t\tconst markdown = { value: '```js\\n1 + 1;\\n```' };\n\t\t\treturn new Promise<void>(resolve => {\n\t\t\t\tstore.add(renderMarkdown(markdown, {\n\t\t\t\t\tasyncRenderCallback: resolve,\n\t\t\t\t\tcodeBlockRenderer: simpleCodeBlockRenderer\n\t\t\t\t}));\n\t\t\t});\n\t\t});\n\n\t\ttest('asyncRenderCallback should not be invoked if result is immediately disposed', () => {\n\t\t\tconst markdown = { value: '```js\\n1 + 1;\\n```' };\n\t\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\t\tconst result = renderMarkdown(markdown, {\n\t\t\t\t\tasyncRenderCallback: reject,\n\t\t\t\t\tcodeBlockRenderer: simpleCodeBlockRenderer\n\t\t\t\t});\n\t\t\t\tresult.dispose();\n\t\t\t\tsetTimeout(resolve, 10);\n\t\t\t});\n\t\t});\n\n\t\ttest('asyncRenderCallback should not be invoked if dispose is called before code block is rendered', () => {\n\t\t\tconst markdown = { value: '```js\\n1 + 1;\\n```' };\n\t\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\t\tlet resolveCodeBlockRendering: (x: HTMLElement) => void;\n\t\t\t\tconst result = renderMarkdown(markdown, {\n\t\t\t\t\tasyncRenderCallback: reject,\n\t\t\t\t\tcodeBlockRenderer: () => {\n\t\t\t\t\t\treturn new Promise(resolve => {\n\t\t\t\t\t\t\tresolveCodeBlockRendering = resolve;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tresult.dispose();\n\t\t\t\t\tresolveCodeBlockRendering(document.createElement('code'));\n\t\t\t\t\tsetTimeout(resolve, 10);\n\t\t\t\t}, 10);\n\t\t\t});\n\t\t});\n\n\t\ttest('Code blocks should use leading language id (#157793)', async () => {\n\t\t\tconst markdown = { value: '```js some other stuff\\n1 + 1;\\n```' };\n\t\t\tconst lang = await new Promise<string>(resolve => {\n\t\t\t\tstore.add(renderMarkdown(markdown, {\n\t\t\t\t\tcodeBlockRenderer: async (lang, value) => {\n\t\t\t\t\t\tresolve(lang);\n\t\t\t\t\t\treturn simpleCodeBlockRenderer(lang, value);\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t});\n\t\t\tassert.strictEqual(lang, 'js');\n\t\t});\n\t});\n\n\tsuite('ThemeIcons Support On', () => {\n\n\t\ttest('render appendText', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\tmds.appendText('$(zap) $(not a theme icon) $(add)');\n\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p>$(zap)&nbsp;$(not&nbsp;a&nbsp;theme&nbsp;icon)&nbsp;$(add)</p>`);\n\t\t});\n\n\t\ttest('render appendMarkdown', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\tmds.appendMarkdown('$(zap) $(not a theme icon) $(add)');\n\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p><span class=\"codicon codicon-zap\"></span> $(not a theme icon) <span class=\"codicon codicon-add\"></span></p>`);\n\t\t});\n\n\t\ttest('render appendMarkdown with escaped icon', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\tmds.appendMarkdown('\\\\$(zap) $(not a theme icon) $(add)');\n\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p>$(zap) $(not a theme icon) <span class=\"codicon codicon-add\"></span></p>`);\n\t\t});\n\n\t\ttest('render icon in link', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\tmds.appendMarkdown(`[$(zap)-link](#link)`);\n\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p><a href=\"\" title=\"#link\" draggable=\"false\" data-href=\"#link\"><span class=\"codicon codicon-zap\"></span>-link</a></p>`);\n\t\t});\n\n\t\ttest('render icon in table', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\tmds.appendMarkdown(`\n| text   | text                 |\n|--------|----------------------|\n| $(zap) | [$(zap)-link](#link) |`);\n\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<table>\n<thead>\n<tr>\n<th>text</th>\n<th>text</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><span class=\"codicon codicon-zap\"></span></td>\n<td><a href=\"\" title=\"#link\" draggable=\"false\" data-href=\"#link\"><span class=\"codicon codicon-zap\"></span>-link</a></td>\n</tr>\n</tbody></table>\n`);\n\t\t});\n\n\t\ttest('render icon in <a> without href (#152170)', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true, supportHtml: true });\n\t\t\tmds.appendMarkdown(`<a>$(sync)</a>`);\n\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p><span class=\"codicon codicon-sync\"></span></p>`);\n\t\t});\n\t});\n\n\tsuite('ThemeIcons Support Off', () => {\n\n\t\ttest('render appendText', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: false });\n\t\t\tmds.appendText('$(zap) $(not a theme icon) $(add)');\n\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p>$(zap)&nbsp;$(not&nbsp;a&nbsp;theme&nbsp;icon)&nbsp;$(add)</p>`);\n\t\t});\n\n\t\ttest('render appendMarkdown with escaped icon', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: false });\n\t\t\tmds.appendMarkdown('\\\\$(zap) $(not a theme icon) $(add)');\n\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p>$(zap) $(not a theme icon) $(add)</p>`);\n\t\t});\n\t});\n\n\tsuite('Alerts', () => {\n\t\ttest('Should render alert with data-severity attribute and icon', () => {\n\t\t\tconst markdown = new MarkdownString('> [!NOTE]\\n> This is a note alert', { supportAlertSyntax: true });\n\t\t\tconst result = store.add(renderMarkdown(markdown)).element;\n\n\t\t\tconst blockquote = result.querySelector('blockquote[data-severity=\"note\"]');\n\t\t\tassert.ok(blockquote, 'Should have blockquote with data-severity=\"note\"');\n\t\t\tassert.ok(result.innerHTML.includes('This is a note alert'), 'Should contain alert text');\n\t\t\tassert.ok(result.innerHTML.includes('codicon-info'), 'Should contain info icon');\n\t\t});\n\n\t\ttest('Should render regular blockquote when supportAlertSyntax is disabled', () => {\n\t\t\tconst markdown = new MarkdownString('> [!NOTE]\\n> This should be a regular blockquote');\n\t\t\tconst result = store.add(renderMarkdown(markdown)).element;\n\n\t\t\tconst blockquote = result.querySelector('blockquote');\n\t\t\tassert.ok(blockquote, 'Should have blockquote');\n\t\t\tassert.strictEqual(blockquote?.getAttribute('data-severity'), null, 'Should not have data-severity attribute');\n\t\t\tassert.ok(result.innerHTML.includes('[!NOTE]'), 'Should contain literal [!NOTE] text');\n\t\t});\n\n\t\ttest('Should not transform blockquotes without alert syntax', () => {\n\t\t\tconst markdown = new MarkdownString('> This is a regular blockquote', { supportAlertSyntax: true });\n\t\t\tconst result = store.add(renderMarkdown(markdown)).element;\n\n\t\t\tconst blockquote = result.querySelector('blockquote');\n\t\t\tassert.strictEqual(blockquote?.getAttribute('data-severity'), null, 'Should not have data-severity attribute');\n\t\t});\n\t});\n\n\ttest('npm Hover Run Script not working #90855', function () {\n\n\t\tconst md: IMarkdownString = JSON.parse('{\"value\":\"[Run Script](command:npm.runScriptFromHover?%7B%22documentUri%22%3A%7B%22%24mid%22%3A1%2C%22fsPath%22%3A%22c%3A%5C%5CUsers%5C%5Cjrieken%5C%5CCode%5C%5C_sample%5C%5Cfoo%5C%5Cpackage.json%22%2C%22_sep%22%3A1%2C%22external%22%3A%22file%3A%2F%2F%2Fc%253A%2FUsers%2Fjrieken%2FCode%2F_sample%2Ffoo%2Fpackage.json%22%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fjrieken%2FCode%2F_sample%2Ffoo%2Fpackage.json%22%2C%22scheme%22%3A%22file%22%7D%2C%22script%22%3A%22echo%22%7D \\\\\"Run the script as a task\\\\\")\",\"supportThemeIcons\":false,\"isTrusted\":true,\"uris\":{\"__uri_e49443\":{\"$mid\":1,\"fsPath\":\"c:\\\\\\\\Users\\\\\\\\jrieken\\\\\\\\Code\\\\\\\\_sample\\\\\\\\foo\\\\\\\\package.json\",\"_sep\":1,\"external\":\"file:///c%3A/Users/jrieken/Code/_sample/foo/package.json\",\"path\":\"/c:/Users/jrieken/Code/_sample/foo/package.json\",\"scheme\":\"file\"},\"command:npm.runScriptFromHover?%7B%22documentUri%22%3A%7B%22%24mid%22%3A1%2C%22fsPath%22%3A%22c%3A%5C%5CUsers%5C%5Cjrieken%5C%5CCode%5C%5C_sample%5C%5Cfoo%5C%5Cpackage.json%22%2C%22_sep%22%3A1%2C%22external%22%3A%22file%3A%2F%2F%2Fc%253A%2FUsers%2Fjrieken%2FCode%2F_sample%2Ffoo%2Fpackage.json%22%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fjrieken%2FCode%2F_sample%2Ffoo%2Fpackage.json%22%2C%22scheme%22%3A%22file%22%7D%2C%22script%22%3A%22echo%22%7D\":{\"$mid\":1,\"path\":\"npm.runScriptFromHover\",\"scheme\":\"command\",\"query\":\"{\\\\\"documentUri\\\\\":\\\\\"__uri_e49443\\\\\",\\\\\"script\\\\\":\\\\\"echo\\\\\"}\"}}}');\n\t\tconst element = store.add(renderMarkdown(md)).element;\n\n\t\tconst anchor = element.querySelector('a')!;\n\t\tassert.ok(anchor);\n\t\tassert.ok(anchor.dataset['href']);\n\n\t\tconst uri = URI.parse(anchor.dataset['href']!);\n\n\t\tconst data = <{ script: string; documentUri: URI }>parse(decodeURIComponent(uri.query));\n\t\tassert.ok(data);\n\t\tassert.strictEqual(data.script, 'echo');\n\t\tassert.ok(data.documentUri.toString().startsWith('file:///c%3A/'));\n\t});\n\n\ttest('Should not render command links by default', () => {\n\t\tconst md = new MarkdownString(`[command1](command:doFoo) <a href=\"command:doFoo\">command2</a>`, {\n\t\t\tsupportHtml: true\n\t\t});\n\n\t\tconst result: HTMLElement = store.add(renderMarkdown(md)).element;\n\t\tassert.strictEqual(result.innerHTML, `<p>command1 command2</p>`);\n\t});\n\n\ttest('Should render command links in trusted strings', () => {\n\t\tconst md = new MarkdownString(`[command1](command:doFoo) <a href=\"command:doFoo\">command2</a>`, {\n\t\t\tisTrusted: true,\n\t\t\tsupportHtml: true,\n\t\t});\n\n\t\tconst result: HTMLElement = store.add(renderMarkdown(md)).element;\n\t\tassert.strictEqual(result.innerHTML, `<p><a href=\"\" title=\"command:doFoo\" draggable=\"false\" data-href=\"command:doFoo\">command1</a> <a href=\"\" data-href=\"command:doFoo\">command2</a></p>`);\n\t});\n\n\ttest('Should remove relative links if there is no base url', () => {\n\t\tconst md = new MarkdownString(`[text](./foo) <a href=\"./bar\">bar</a>`, {\n\t\t\tisTrusted: true,\n\t\t\tsupportHtml: true,\n\t\t});\n\n\t\tconst result = store.add(renderMarkdown(md)).element;\n\t\tassert.strictEqual(result.innerHTML, `<p>text bar</p>`);\n\t});\n\n\ttest('Should support relative links if baseurl is set', () => {\n\t\tconst md = new MarkdownString(`[text](./foo) <a href=\"./bar\">bar</a> <img src=\"cat.gif\">`, {\n\t\t\tisTrusted: true,\n\t\t\tsupportHtml: true,\n\t\t});\n\t\tmd.baseUri = URI.parse('https://example.com/path/');\n\n\t\tconst result = store.add(renderMarkdown(md)).element;\n\t\tassert.strictEqual(result.innerHTML, `<p><a href=\"\" title=\"./foo\" draggable=\"false\" data-href=\"https://example.com/path/foo\">text</a> <a href=\"\" data-href=\"https://example.com/path/bar\">bar</a> <img src=\"https://example.com/path/cat.gif\"></p>`);\n\t});\n\n\tsuite('PlaintextMarkdownRender', () => {\n\n\t\ttest('test code, blockquote, heading, list, listitem, paragraph, table, tablerow, tablecell, strong, em, br, del, text are rendered plaintext', () => {\n\t\t\tconst markdown = { value: '`code`\\n>quote\\n# heading\\n- list\\n\\ntable | table2\\n--- | --- \\none | two\\n\\n\\nbo**ld**\\n_italic_\\n~~del~~\\nsome text' };\n\t\t\tconst expected = 'code\\nquote\\nheading\\nlist\\n\\ntable table2\\none two\\nbold\\nitalic\\ndel\\nsome text';\n\t\t\tconst result: string = renderAsPlaintext(markdown);\n\t\t\tassert.strictEqual(result, expected);\n\t\t});\n\n\t\ttest('test html, hr, image, link are rendered plaintext', () => {\n\t\t\tconst markdown = { value: '<div>html</div>\\n\\n---\\n![image](imageLink)\\n[text](textLink)' };\n\t\t\tconst expected = 'text';\n\t\t\tconst result: string = renderAsPlaintext(markdown);\n\t\t\tassert.strictEqual(result, expected);\n\t\t});\n\n\t\ttest(`Should not remove html inside of code blocks`, () => {\n\t\t\tconst markdown = {\n\t\t\t\tvalue: [\n\t\t\t\t\t'```html',\n\t\t\t\t\t'<form>html</form>',\n\t\t\t\t\t'```',\n\t\t\t\t].join('\\n')\n\t\t\t};\n\t\t\tconst expected = [\n\t\t\t\t'```',\n\t\t\t\t'<form>html</form>',\n\t\t\t\t'```',\n\t\t\t].join('\\n');\n\t\t\tconst result: string = renderAsPlaintext(markdown, { includeCodeBlocksFences: true });\n\t\t\tassert.strictEqual(result, expected);\n\t\t});\n\t});\n\n\tsuite('supportHtml', () => {\n\t\ttest('supportHtml is disabled by default', () => {\n\t\t\tconst mds = new MarkdownString(undefined, {});\n\t\t\tmds.appendMarkdown('a<b>b</b>c');\n\n\t\t\tconst result = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p>abc</p>`);\n\t\t});\n\n\t\ttest('Renders html when supportHtml=true', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportHtml: true });\n\t\t\tmds.appendMarkdown('a<b>b</b>c');\n\n\t\t\tconst result = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p>a<b>b</b>c</p>`);\n\t\t});\n\n\t\ttest('Should not include scripts even when supportHtml=true', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportHtml: true });\n\t\t\tmds.appendMarkdown('a<b onclick=\"alert(1)\">b</b><script>alert(2)</script>c');\n\n\t\t\tconst result = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p>a<b>b</b>c</p>`);\n\t\t});\n\n\t\ttest('Should not render html appended as text', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportHtml: true });\n\t\t\tmds.appendText('a<b>b</b>c');\n\n\t\t\tconst result = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p>a&lt;b&gt;b&lt;/b&gt;c</p>`);\n\t\t});\n\n\t\ttest('Should render html images', () => {\n\t\t\tif (isWeb) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst mds = new MarkdownString(undefined, { supportHtml: true });\n\t\t\tmds.appendMarkdown(`<img src=\"http://example.com/cat.gif\">`);\n\n\t\t\tconst result = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<img src=\"http://example.com/cat.gif\">`);\n\t\t});\n\n\t\ttest('Should render html images with file uri as same origin uri', () => {\n\t\t\tif (isWeb) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst mds = new MarkdownString(undefined, { supportHtml: true });\n\t\t\tmds.appendMarkdown(`<img src=\"file:///images/cat.gif\">`);\n\n\t\t\tconst result = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<img src=\"vscode-file://vscode-app/images/cat.gif\">`);\n\t\t});\n\n\t\ttest('Should only allow checkbox inputs', () => {\n\t\t\tconst mds = new MarkdownString(\n\t\t\t\t'text: <input type=\"text\">\\ncheckbox:<input type=\"checkbox\">',\n\t\t\t\t{ supportHtml: true });\n\n\t\t\tconst result = store.add(renderMarkdown(mds)).element;\n\n\t\t\t// Inputs should always be disabled too\n\t\t\tassert.strictEqual(result.innerHTML, `<p>text: \\ncheckbox:<input type=\"checkbox\" disabled=\"\"></p>`);\n\t\t});\n\t});\n\n\tsuite('fillInIncompleteTokens', () => {\n\t\tfunction ignoreRaw(...tokenLists: marked.Token[][]): void {\n\t\t\ttokenLists.forEach(tokens => {\n\t\t\t\ttokens.forEach(t => t.raw = '');\n\t\t\t});\n\t\t}\n\n\t\tconst completeTable = '| a | b |\\n| --- | --- |';\n\n\t\tsuite('table', () => {\n\t\t\ttest('complete table', () => {\n\t\t\t\tconst tokens = marked.marked.lexer(completeTable);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.equal(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest('full header only', () => {\n\t\t\t\tconst incompleteTable = '| a | b |';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(completeTable);\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('full header only with trailing space', () => {\n\t\t\t\tconst incompleteTable = '| a | b | ';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(completeTable);\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tif (newTokens) {\n\t\t\t\t\tignoreRaw(newTokens, completeTableTokens);\n\t\t\t\t}\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete header', () => {\n\t\t\t\tconst incompleteTable = '| a | b';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(completeTable);\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tif (newTokens) {\n\t\t\t\t\tignoreRaw(newTokens, completeTableTokens);\n\t\t\t\t}\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete header one column', () => {\n\t\t\t\tconst incompleteTable = '| a ';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(incompleteTable + '|\\n| --- |');\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tif (newTokens) {\n\t\t\t\t\tignoreRaw(newTokens, completeTableTokens);\n\t\t\t\t}\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('full header with extras', () => {\n\t\t\t\tconst incompleteTable = '| a **bold** | b _italics_ |';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(incompleteTable + '\\n| --- | --- |');\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('full header with leading text', () => {\n\t\t\t\t// Parsing this gives one token and one 'text' subtoken\n\t\t\t\tconst incompleteTable = 'here is a table\\n| a | b |';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(incompleteTable + '\\n| --- | --- |');\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('full header with leading other stuff', () => {\n\t\t\t\t// Parsing this gives one token and one 'text' subtoken\n\t\t\t\tconst incompleteTable = '```js\\nconst xyz = 123;\\n```\\n| a | b |';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(incompleteTable + '\\n| --- | --- |');\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('full header with incomplete separator', () => {\n\t\t\t\tconst incompleteTable = '| a | b |\\n| ---';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(completeTable);\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('full header with incomplete separator 2', () => {\n\t\t\t\tconst incompleteTable = '| a | b |\\n| --- |';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(completeTable);\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('full header with incomplete separator 3', () => {\n\t\t\t\tconst incompleteTable = '| a | b |\\n|';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(completeTable);\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('not a table', () => {\n\t\t\t\tconst incompleteTable = '| a | b |\\nsome text';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest('not a table 2', () => {\n\t\t\t\tconst incompleteTable = '| a | b |\\n| --- |\\nsome text';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\t\t});\n\n\t\tfunction simpleMarkdownTestSuite(name: string, delimiter: string): void {\n\t\t\ttest(`incomplete ${name}`, () => {\n\t\t\t\tconst incomplete = `${delimiter}code`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + delimiter);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest(`complete ${name}`, () => {\n\t\t\t\tconst text = `leading text ${delimiter}code${delimiter} trailing text`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest(`${name} with leading text`, () => {\n\t\t\t\tconst incomplete = `some text and ${delimiter}some code`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + delimiter);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest(`${name} with trailing space`, () => {\n\t\t\t\tconst incomplete = `some text and ${delimiter}some code `;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete.trimEnd() + delimiter);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest(`single loose \"${delimiter}\"`, () => {\n\t\t\t\tconst text = `some text and ${delimiter}by itself\\nmore text here`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest(`incomplete ${name} after newline`, () => {\n\t\t\t\tconst text = `some text\\nmore text here and ${delimiter}text`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + delimiter);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest(`incomplete after complete ${name}`, () => {\n\t\t\t\tconst text = `leading text ${delimiter}code${delimiter} trailing text and ${delimiter}another`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + delimiter);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest(`incomplete ${name} in list`, () => {\n\t\t\t\tconst text = `- list item one\\n- list item two and ${delimiter}text`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + delimiter);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest(`incomplete ${name} in asterisk list`, () => {\n\t\t\t\tconst text = `* list item one\\n* list item two and ${delimiter}text`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + delimiter);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest(`incomplete ${name} in numbered list`, () => {\n\t\t\t\tconst text = `1. list item one\\n2. list item two and ${delimiter}text`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + delimiter);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\t\t}\n\n\t\tsuite('list', () => {\n\t\t\ttest('list with complete codeblock', () => {\n\t\t\t\tconst list = `-\n\t\\`\\`\\`js\n\tlet x = 1;\n\t\\`\\`\\`\n- list item two\n`;\n\t\t\t\tconst tokens = marked.marked.lexer(list);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest.skip('list with incomplete codeblock', () => {\n\t\t\t\tconst incomplete = `- list item one\n\n\t\\`\\`\\`js\n\tlet x = 1;`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '\\n\t```');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('list with subitems', () => {\n\t\t\t\tconst list = `- hello\n\t- sub item\n- text\n\tnewline for some reason\n`;\n\t\t\t\tconst tokens = marked.marked.lexer(list);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest('ordered list with subitems', () => {\n\t\t\t\tconst list = `1. hello\n\t- sub item\n2. text\n\tnewline for some reason\n`;\n\t\t\t\tconst tokens = marked.marked.lexer(list);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest('list with stuff', () => {\n\t\t\t\tconst list = `- list item one \\`codespan\\` **bold** [link](http://microsoft.com) more text`;\n\t\t\t\tconst tokens = marked.marked.lexer(list);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest('list with incomplete link text', () => {\n\t\t\t\tconst incomplete = `- list item one\n- item two [link`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '](https://microsoft.com)');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('list with incomplete link target', () => {\n\t\t\t\tconst incomplete = `- list item one\n- item two [link](`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ')');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('ordered list with incomplete link target', () => {\n\t\t\t\tconst incomplete = `1. list item one\n2. item two [link](`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ')');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('ordered list with extra whitespace', () => {\n\t\t\t\tconst incomplete = `1. list item one\n2. item two [link](`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ')');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('list with extra whitespace', () => {\n\t\t\t\tconst incomplete = `- list item one\n- item two [link](`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ')');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('list with incomplete link with other stuff', () => {\n\t\t\t\tconst incomplete = `- list item one\n- item two [\\`link`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '\\`](https://microsoft.com)');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('ordered list with incomplete link with other stuff', () => {\n\t\t\t\tconst incomplete = `1. list item one\n1. item two [\\`link`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '\\`](https://microsoft.com)');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('list with incomplete subitem', () => {\n\t\t\t\tconst incomplete = `1. list item one\n\t- `;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '&nbsp;');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('list with incomplete nested subitem', () => {\n\t\t\t\tconst incomplete = `1. list item one\n\t- item 2\n\t\t- `;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '&nbsp;');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('text with start of list is not a heading', () => {\n\t\t\t\tconst incomplete = `hello\\n- `;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ' &nbsp;');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('even more text with start of list is not a heading', () => {\n\t\t\t\tconst incomplete = `# hello\\n\\ntext\\n-`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ' &nbsp;');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\t\t});\n\n\t\tsuite('codespan', () => {\n\t\t\tsimpleMarkdownTestSuite('codespan', '`');\n\n\t\t\ttest(`backtick between letters`, () => {\n\t\t\t\tconst text = 'a`b';\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeCodespanTokens = marked.marked.lexer(text + '`');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeCodespanTokens);\n\t\t\t});\n\n\t\t\ttest(`nested pattern`, () => {\n\t\t\t\tconst text = 'sldkfjsd `abc __def__ ghi';\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + '`');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\t\t});\n\n\t\tsuite('star', () => {\n\t\t\tsimpleMarkdownTestSuite('star', '*');\n\n\t\t\ttest(`star between letters`, () => {\n\t\t\t\tconst text = 'sldkfjsd a*b';\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + '*');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest(`nested pattern`, () => {\n\t\t\t\tconst text = 'sldkfjsd *abc __def__ ghi';\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + '*');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\t\t});\n\n\t\tsuite('double star', () => {\n\t\t\tsimpleMarkdownTestSuite('double star', '**');\n\n\t\t\ttest(`double star between letters`, () => {\n\t\t\t\tconst text = 'a**b';\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + '**');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\t// TODO trim these patterns from end\n\t\t\ttest.skip(`ending in doublestar`, () => {\n\t\t\t\tconst incomplete = `some text and **`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete.trimEnd() + '**');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\t\t});\n\n\t\tsuite('underscore', () => {\n\t\t\tsimpleMarkdownTestSuite('underscore', '_');\n\n\t\t\ttest(`underscore between letters`, () => {\n\t\t\t\tconst text = `this_not_italics`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\t\t});\n\n\t\tsuite('double underscore', () => {\n\t\t\tsimpleMarkdownTestSuite('double underscore', '__');\n\n\t\t\ttest(`double underscore between letters`, () => {\n\t\t\t\tconst text = `this__not__bold`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\t\t});\n\n\t\tsuite('link', () => {\n\t\t\ttest('incomplete link text', () => {\n\t\t\t\tconst incomplete = 'abc [text';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '](https://microsoft.com)');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete link target', () => {\n\t\t\t\tconst incomplete = 'foo [text](http://microsoft';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ')');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete link target 2', () => {\n\t\t\t\tconst incomplete = 'foo [text](http://microsoft.com';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ')');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete link target with extra stuff', () => {\n\t\t\t\tconst incomplete = '[before `text` after](http://microsoft.com';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ')');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete link target with extra stuff and incomplete arg', () => {\n\t\t\t\tconst incomplete = '[before `text` after](http://microsoft.com \"more text ';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '\")');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete link target with incomplete arg', () => {\n\t\t\t\tconst incomplete = 'foo [text](http://microsoft.com \"more text here ';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '\")');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete link target with incomplete arg 2', () => {\n\t\t\t\tconst incomplete = '[text](command:vscode.openRelativePath \"arg';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '\")');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete link target with complete arg', () => {\n\t\t\t\tconst incomplete = 'foo [text](http://microsoft.com \"more text here\"';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ')');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('link text with incomplete codespan', () => {\n\t\t\t\tconst incomplete = `text [\\`codespan`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '`](https://microsoft.com)');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('link text with incomplete stuff', () => {\n\t\t\t\tconst incomplete = `text [more text \\`codespan\\` text **bold`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '**](https://microsoft.com)');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('Looks like incomplete link target but isn\\'t', () => {\n\t\t\t\tconst complete = '**bold** `codespan` text](';\n\t\t\t\tconst tokens = marked.marked.lexer(complete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(complete);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest.skip('incomplete link in list', () => {\n\t\t\t\tconst incomplete = '- [text';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '](https://microsoft.com)');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('square brace between letters', () => {\n\t\t\t\tconst incomplete = 'a[b';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest('square brace on previous line', () => {\n\t\t\t\tconst incomplete = 'text[\\nmore text';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest('square braces in text', () => {\n\t\t\t\tconst incomplete = 'hello [what] is going on';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest('complete link', () => {\n\t\t\t\tconst incomplete = 'text [link](http://microsoft.com)';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/* eslint-disable no-restricted-syntax */\n\nimport assert from 'assert';\nimport { fillInIncompleteTokens, renderMarkdown, renderAsPlaintext } from '../../browser/markdownRenderer.js';\nimport { IMarkdownString, MarkdownString } from '../../common/htmlContent.js';\nimport * as marked from '../../common/marked/marked.js';\nimport { parse } from '../../common/marshalling.js';\nimport { isWeb } from '../../common/platform.js';\nimport { URI } from '../../common/uri.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../common/utils.js';\n\nfunction strToNode(str: string): HTMLElement {\n\treturn new DOMParser().parseFromString(str, 'text/html').body.firstChild as HTMLElement;\n}\n\nfunction assertNodeEquals(actualNode: HTMLElement, expectedHtml: string) {\n\tconst expectedNode = strToNode(expectedHtml);\n\tassert.ok(\n\t\tactualNode.isEqualNode(expectedNode),\n\t\t`Expected: ${expectedNode.outerHTML}\\nActual: ${actualNode.outerHTML}`);\n}\n\nsuite('MarkdownRenderer', () => {\n\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuite('Sanitization', () => {\n\t\ttest('Should not render images with unknown schemes', () => {\n\t\t\tconst markdown = { value: `![image](no-such://example.com/cat.gif)` };\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(markdown)).element;\n\t\t\tassert.strictEqual(result.innerHTML, '<p><img alt=\"image\"></p>');\n\t\t});\n\t});\n\n\tsuite('Images', () => {\n\t\ttest('image rendering conforms to default', () => {\n\t\t\tconst markdown = { value: `![image](http://example.com/cat.gif 'caption')` };\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(markdown)).element;\n\t\t\tassertNodeEquals(result, '<div><p><img title=\"caption\" alt=\"image\" src=\"http://example.com/cat.gif\"></p></div>');\n\t\t});\n\n\t\ttest('image rendering conforms to default without title', () => {\n\t\t\tconst markdown = { value: `![image](http://example.com/cat.gif)` };\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(markdown)).element;\n\t\t\tassertNodeEquals(result, '<div><p><img alt=\"image\" src=\"http://example.com/cat.gif\"></p></div>');\n\t\t});\n\n\t\ttest('image width from title params', () => {\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown({ value: `![image](http://example.com/cat.gif|width=100px 'caption')` })).element;\n\t\t\tassertNodeEquals(result, `<div><p><img width=\"100\" title=\"caption\" alt=\"image\" src=\"http://example.com/cat.gif\"></p></div>`);\n\t\t});\n\n\t\ttest('image height from title params', () => {\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown({ value: `![image](http://example.com/cat.gif|height=100 'caption')` })).element;\n\t\t\tassertNodeEquals(result, `<div><p><img height=\"100\" title=\"caption\" alt=\"image\" src=\"http://example.com/cat.gif\"></p></div>`);\n\t\t});\n\n\t\ttest('image width and height from title params', () => {\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown({ value: `![image](http://example.com/cat.gif|height=200,width=100 'caption')` })).element;\n\t\t\tassertNodeEquals(result, `<div><p><img height=\"200\" width=\"100\" title=\"caption\" alt=\"image\" src=\"http://example.com/cat.gif\"></p></div>`);\n\t\t});\n\n\t\ttest('image with file uri should render as same origin uri', () => {\n\t\t\tif (isWeb) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown({ value: `![image](file:///images/cat.gif)` })).element;\n\t\t\tassertNodeEquals(result, '<div><p><img src=\"vscode-file://vscode-app/images/cat.gif\" alt=\"image\"></p></div>');\n\t\t});\n\t});\n\n\tsuite('Code block renderer', () => {\n\t\tconst simpleCodeBlockRenderer = (lang: string, code: string): Promise<HTMLElement> => {\n\t\t\tconst element = document.createElement('code');\n\t\t\telement.textContent = code;\n\t\t\treturn Promise.resolve(element);\n\t\t};\n\n\t\ttest('asyncRenderCallback should be invoked for code blocks', () => {\n\t\t\tconst markdown = { value: '```js\\n1 + 1;\\n```' };\n\t\t\treturn new Promise<void>(resolve => {\n\t\t\t\tstore.add(renderMarkdown(markdown, {\n\t\t\t\t\tasyncRenderCallback: resolve,\n\t\t\t\t\tcodeBlockRenderer: simpleCodeBlockRenderer\n\t\t\t\t}));\n\t\t\t});\n\t\t});\n\n\t\ttest('asyncRenderCallback should not be invoked if result is immediately disposed', () => {\n\t\t\tconst markdown = { value: '```js\\n1 + 1;\\n```' };\n\t\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\t\tconst result = renderMarkdown(markdown, {\n\t\t\t\t\tasyncRenderCallback: reject,\n\t\t\t\t\tcodeBlockRenderer: simpleCodeBlockRenderer\n\t\t\t\t});\n\t\t\t\tresult.dispose();\n\t\t\t\tsetTimeout(resolve, 10);\n\t\t\t});\n\t\t});\n\n\t\ttest('asyncRenderCallback should not be invoked if dispose is called before code block is rendered', () => {\n\t\t\tconst markdown = { value: '```js\\n1 + 1;\\n```' };\n\t\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\t\tlet resolveCodeBlockRendering: (x: HTMLElement) => void;\n\t\t\t\tconst result = renderMarkdown(markdown, {\n\t\t\t\t\tasyncRenderCallback: reject,\n\t\t\t\t\tcodeBlockRenderer: () => {\n\t\t\t\t\t\treturn new Promise(resolve => {\n\t\t\t\t\t\t\tresolveCodeBlockRendering = resolve;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tresult.dispose();\n\t\t\t\t\tresolveCodeBlockRendering(document.createElement('code'));\n\t\t\t\t\tsetTimeout(resolve, 10);\n\t\t\t\t}, 10);\n\t\t\t});\n\t\t});\n\n\t\ttest('Code blocks should use leading language id (#157793)', async () => {\n\t\t\tconst markdown = { value: '```js some other stuff\\n1 + 1;\\n```' };\n\t\t\tconst lang = await new Promise<string>(resolve => {\n\t\t\t\tstore.add(renderMarkdown(markdown, {\n\t\t\t\t\tcodeBlockRenderer: async (lang, value) => {\n\t\t\t\t\t\tresolve(lang);\n\t\t\t\t\t\treturn simpleCodeBlockRenderer(lang, value);\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t});\n\t\t\tassert.strictEqual(lang, 'js');\n\t\t});\n\t});\n\n\tsuite('ThemeIcons Support On', () => {\n\n\t\ttest('render appendText', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\tmds.appendText('$(zap) $(not a theme icon) $(add)');\n\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p>$(zap)&nbsp;$(not&nbsp;a&nbsp;theme&nbsp;icon)&nbsp;$(add)</p>`);\n\t\t});\n\n\t\ttest('render appendMarkdown', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\tmds.appendMarkdown('$(zap) $(not a theme icon) $(add)');\n\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p><span class=\"codicon codicon-zap\"></span> $(not a theme icon) <span class=\"codicon codicon-add\"></span></p>`);\n\t\t});\n\n\t\ttest('render appendMarkdown with escaped icon', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\tmds.appendMarkdown('\\\\$(zap) $(not a theme icon) $(add)');\n\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p>$(zap) $(not a theme icon) <span class=\"codicon codicon-add\"></span></p>`);\n\t\t});\n\n\t\ttest('render icon in link', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\tmds.appendMarkdown(`[$(zap)-link](#link)`);\n\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p><a href=\"\" title=\"#link\" draggable=\"false\" data-href=\"#link\"><span class=\"codicon codicon-zap\"></span>-link</a></p>`);\n\t\t});\n\n\t\ttest('render icon in table', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\tmds.appendMarkdown(`\n| text   | text                 |\n|--------|----------------------|\n| $(zap) | [$(zap)-link](#link) |`);\n\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<table>\n<thead>\n<tr>\n<th>text</th>\n<th>text</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><span class=\"codicon codicon-zap\"></span></td>\n<td><a href=\"\" title=\"#link\" draggable=\"false\" data-href=\"#link\"><span class=\"codicon codicon-zap\"></span>-link</a></td>\n</tr>\n</tbody></table>\n`);\n\t\t});\n\n\t\ttest('render icon in <a> without href (#152170)', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true, supportHtml: true });\n\t\t\tmds.appendMarkdown(`<a>$(sync)</a>`);\n\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p><span class=\"codicon codicon-sync\"></span></p>`);\n\t\t});\n\t});\n\n\tsuite('ThemeIcons Support Off', () => {\n\n\t\ttest('render appendText', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: false });\n\t\t\tmds.appendText('$(zap) $(not a theme icon) $(add)');\n\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p>$(zap)&nbsp;$(not&nbsp;a&nbsp;theme&nbsp;icon)&nbsp;$(add)</p>`);\n\t\t});\n\n\t\ttest('render appendMarkdown with escaped icon', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: false });\n\t\t\tmds.appendMarkdown('\\\\$(zap) $(not a theme icon) $(add)');\n\n\t\t\tconst result: HTMLElement = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p>$(zap) $(not a theme icon) $(add)</p>`);\n\t\t});\n\t});\n\n\tsuite('Alerts', () => {\n\t\ttest('Should render alert with data-severity attribute and icon', () => {\n\t\t\tconst markdown = new MarkdownString('> [!NOTE]\\n> This is a note alert', { supportAlertSyntax: true });\n\t\t\tconst result = store.add(renderMarkdown(markdown)).element;\n\n\t\t\tconst blockquote = result.querySelector('blockquote[data-severity=\"note\"]');\n\t\t\tassert.ok(blockquote, 'Should have blockquote with data-severity=\"note\"');\n\t\t\tassert.ok(result.innerHTML.includes('This is a note alert'), 'Should contain alert text');\n\t\t\tassert.ok(result.innerHTML.includes('codicon-info'), 'Should contain info icon');\n\t\t});\n\n\t\ttest('Should render regular blockquote when supportAlertSyntax is disabled', () => {\n\t\t\tconst markdown = new MarkdownString('> [!NOTE]\\n> This should be a regular blockquote');\n\t\t\tconst result = store.add(renderMarkdown(markdown)).element;\n\n\t\t\tconst blockquote = result.querySelector('blockquote');\n\t\t\tassert.ok(blockquote, 'Should have blockquote');\n\t\t\tassert.strictEqual(blockquote?.getAttribute('data-severity'), null, 'Should not have data-severity attribute');\n\t\t\tassert.ok(result.innerHTML.includes('[!NOTE]'), 'Should contain literal [!NOTE] text');\n\t\t});\n\n\t\ttest('Should not transform blockquotes without alert syntax', () => {\n\t\t\tconst markdown = new MarkdownString('> This is a regular blockquote', { supportAlertSyntax: true });\n\t\t\tconst result = store.add(renderMarkdown(markdown)).element;\n\n\t\t\tconst blockquote = result.querySelector('blockquote');\n\t\t\tassert.strictEqual(blockquote?.getAttribute('data-severity'), null, 'Should not have data-severity attribute');\n\t\t});\n\t});\n\n\ttest('npm Hover Run Script not working #90855', function () {\n\n\t\tconst md: IMarkdownString = JSON.parse('{\"value\":\"[Run Script](command:npm.runScriptFromHover?%7B%22documentUri%22%3A%7B%22%24mid%22%3A1%2C%22fsPath%22%3A%22c%3A%5C%5CUsers%5C%5Cjrieken%5C%5CCode%5C%5C_sample%5C%5Cfoo%5C%5Cpackage.json%22%2C%22_sep%22%3A1%2C%22external%22%3A%22file%3A%2F%2F%2Fc%253A%2FUsers%2Fjrieken%2FCode%2F_sample%2Ffoo%2Fpackage.json%22%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fjrieken%2FCode%2F_sample%2Ffoo%2Fpackage.json%22%2C%22scheme%22%3A%22file%22%7D%2C%22script%22%3A%22echo%22%7D \\\\\"Run the script as a task\\\\\")\",\"supportThemeIcons\":false,\"isTrusted\":true,\"uris\":{\"__uri_e49443\":{\"$mid\":1,\"fsPath\":\"c:\\\\\\\\Users\\\\\\\\jrieken\\\\\\\\Code\\\\\\\\_sample\\\\\\\\foo\\\\\\\\package.json\",\"_sep\":1,\"external\":\"file:///c%3A/Users/jrieken/Code/_sample/foo/package.json\",\"path\":\"/c:/Users/jrieken/Code/_sample/foo/package.json\",\"scheme\":\"file\"},\"command:npm.runScriptFromHover?%7B%22documentUri%22%3A%7B%22%24mid%22%3A1%2C%22fsPath%22%3A%22c%3A%5C%5CUsers%5C%5Cjrieken%5C%5CCode%5C%5C_sample%5C%5Cfoo%5C%5Cpackage.json%22%2C%22_sep%22%3A1%2C%22external%22%3A%22file%3A%2F%2F%2Fc%253A%2FUsers%2Fjrieken%2FCode%2F_sample%2Ffoo%2Fpackage.json%22%2C%22path%22%3A%22%2Fc%3A%2FUsers%2Fjrieken%2FCode%2F_sample%2Ffoo%2Fpackage.json%22%2C%22scheme%22%3A%22file%22%7D%2C%22script%22%3A%22echo%22%7D\":{\"$mid\":1,\"path\":\"npm.runScriptFromHover\",\"scheme\":\"command\",\"query\":\"{\\\\\"documentUri\\\\\":\\\\\"__uri_e49443\\\\\",\\\\\"script\\\\\":\\\\\"echo\\\\\"}\"}}}');\n\t\tconst element = store.add(renderMarkdown(md)).element;\n\n\t\tconst anchor = element.querySelector('a')!;\n\t\tassert.ok(anchor);\n\t\tassert.ok(anchor.dataset['href']);\n\n\t\tconst uri = URI.parse(anchor.dataset['href']!);\n\n\t\tconst data = <{ script: string; documentUri: URI }>parse(decodeURIComponent(uri.query));\n\t\tassert.ok(data);\n\t\tassert.strictEqual(data.script, 'echo');\n\t\tassert.ok(data.documentUri.toString().startsWith('file:///c%3A/'));\n\t});\n\n\ttest('Should not render command links by default', () => {\n\t\tconst md = new MarkdownString(`[command1](command:doFoo) <a href=\"command:doFoo\">command2</a>`, {\n\t\t\tsupportHtml: true\n\t\t});\n\n\t\tconst result: HTMLElement = store.add(renderMarkdown(md)).element;\n\t\tassert.strictEqual(result.innerHTML, `<p>command1 command2</p>`);\n\t});\n\n\ttest('Should render command links in trusted strings', () => {\n\t\tconst md = new MarkdownString(`[command1](command:doFoo) <a href=\"command:doFoo\">command2</a>`, {\n\t\t\tisTrusted: true,\n\t\t\tsupportHtml: true,\n\t\t});\n\n\t\tconst result: HTMLElement = store.add(renderMarkdown(md)).element;\n\t\tassert.strictEqual(result.innerHTML, `<p><a href=\"\" title=\"command:doFoo\" draggable=\"false\" data-href=\"command:doFoo\">command1</a> <a href=\"\" data-href=\"command:doFoo\">command2</a></p>`);\n\t});\n\n\ttest('Should remove relative links if there is no base url', () => {\n\t\tconst md = new MarkdownString(`[text](./foo) <a href=\"./bar\">bar</a>`, {\n\t\t\tisTrusted: true,\n\t\t\tsupportHtml: true,\n\t\t});\n\n\t\tconst result = store.add(renderMarkdown(md)).element;\n\t\tassert.strictEqual(result.innerHTML, `<p>text bar</p>`);\n\t});\n\n\ttest('Should support relative links if baseurl is set', () => {\n\t\tconst md = new MarkdownString(`[text](./foo) <a href=\"./bar\">bar</a> <img src=\"cat.gif\">`, {\n\t\t\tisTrusted: true,\n\t\t\tsupportHtml: true,\n\t\t});\n\t\tmd.baseUri = URI.parse('https://example.com/path/');\n\n\t\tconst result = store.add(renderMarkdown(md)).element;\n\t\tassert.strictEqual(result.innerHTML, `<p><a href=\"\" title=\"./foo\" draggable=\"false\" data-href=\"https://example.com/path/foo\">text</a> <a href=\"\" data-href=\"https://example.com/path/bar\">bar</a> <img src=\"https://example.com/path/cat.gif\"></p>`);\n\t});\n\n\tsuite('PlaintextMarkdownRender', () => {\n\n\t\ttest('test code, blockquote, heading, list, listitem, paragraph, table, tablerow, tablecell, strong, em, br, del, text are rendered plaintext', () => {\n\t\t\tconst markdown = { value: '`code`\\n>quote\\n# heading\\n- list\\n\\ntable | table2\\n--- | --- \\none | two\\n\\n\\nbo**ld**\\n_italic_\\n~~del~~\\nsome text' };\n\t\t\tconst expected = 'code\\nquote\\nheading\\nlist\\n\\ntable table2\\none two\\nbold\\nitalic\\ndel\\nsome text';\n\t\t\tconst result: string = renderAsPlaintext(markdown);\n\t\t\tassert.strictEqual(result, expected);\n\t\t});\n\n\t\ttest('test html, hr, image, link are rendered plaintext', () => {\n\t\t\tconst markdown = { value: '<div>html</div>\\n\\n---\\n![image](imageLink)\\n[text](textLink)' };\n\t\t\tconst expected = 'text';\n\t\t\tconst result: string = renderAsPlaintext(markdown);\n\t\t\tassert.strictEqual(result, expected);\n\t\t});\n\n\t\ttest(`Should not remove html inside of code blocks`, () => {\n\t\t\tconst markdown = {\n\t\t\t\tvalue: [\n\t\t\t\t\t'```html',\n\t\t\t\t\t'<form>html</form>',\n\t\t\t\t\t'```',\n\t\t\t\t].join('\\n')\n\t\t\t};\n\t\t\tconst expected = [\n\t\t\t\t'```',\n\t\t\t\t'<form>html</form>',\n\t\t\t\t'```',\n\t\t\t].join('\\n');\n\t\t\tconst result: string = renderAsPlaintext(markdown, { includeCodeBlocksFences: true });\n\t\t\tassert.strictEqual(result, expected);\n\t\t});\n\t});\n\n\tsuite('supportHtml', () => {\n\t\ttest('supportHtml is disabled by default', () => {\n\t\t\tconst mds = new MarkdownString(undefined, {});\n\t\t\tmds.appendMarkdown('a<b>b</b>c');\n\n\t\t\tconst result = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p>abc</p>`);\n\t\t});\n\n\t\ttest('Renders html when supportHtml=true', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportHtml: true });\n\t\t\tmds.appendMarkdown('a<b>b</b>c');\n\n\t\t\tconst result = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p>a<b>b</b>c</p>`);\n\t\t});\n\n\t\ttest('Should not include scripts even when supportHtml=true', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportHtml: true });\n\t\t\tmds.appendMarkdown('a<b onclick=\"alert(1)\">b</b><script>alert(2)</script>c');\n\n\t\t\tconst result = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p>a<b>b</b>c</p>`);\n\t\t});\n\n\t\ttest('Should not render html appended as text', () => {\n\t\t\tconst mds = new MarkdownString(undefined, { supportHtml: true });\n\t\t\tmds.appendText('a<b>b</b>c');\n\n\t\t\tconst result = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<p>a&lt;b&gt;b&lt;/b&gt;c</p>`);\n\t\t});\n\n\t\ttest('Should render html images', () => {\n\t\t\tif (isWeb) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst mds = new MarkdownString(undefined, { supportHtml: true });\n\t\t\tmds.appendMarkdown(`<img src=\"http://example.com/cat.gif\">`);\n\n\t\t\tconst result = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<img src=\"http://example.com/cat.gif\">`);\n\t\t});\n\n\t\ttest('Should render html images with file uri as same origin uri', () => {\n\t\t\tif (isWeb) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst mds = new MarkdownString(undefined, { supportHtml: true });\n\t\t\tmds.appendMarkdown(`<img src=\"file:///images/cat.gif\">`);\n\n\t\t\tconst result = store.add(renderMarkdown(mds)).element;\n\t\t\tassert.strictEqual(result.innerHTML, `<img src=\"vscode-file://vscode-app/images/cat.gif\">`);\n\t\t});\n\n\t\ttest('Should only allow checkbox inputs', () => {\n\t\t\tconst mds = new MarkdownString(\n\t\t\t\t'text: <input type=\"text\">\\ncheckbox:<input type=\"checkbox\">',\n\t\t\t\t{ supportHtml: true });\n\n\t\t\tconst result = store.add(renderMarkdown(mds)).element;\n\n\t\t\t// Inputs should always be disabled too\n\t\t\tassert.strictEqual(result.innerHTML, `<p>text: \\ncheckbox:<input type=\"checkbox\" disabled=\"\"></p>`);\n\t\t});\n\t});\n\n\tsuite('fillInIncompleteTokens', () => {\n\t\tfunction ignoreRaw(...tokenLists: marked.Token[][]): void {\n\t\t\ttokenLists.forEach(tokens => {\n\t\t\t\ttokens.forEach(t => t.raw = '');\n\t\t\t});\n\t\t}\n\n\t\tconst completeTable = '| a | b |\\n| --- | --- |';\n\n\t\tsuite('table', () => {\n\t\t\ttest('complete table', () => {\n\t\t\t\tconst tokens = marked.marked.lexer(completeTable);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.equal(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest('full header only', () => {\n\t\t\t\tconst incompleteTable = '| a | b |';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(completeTable);\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('full header only with trailing space', () => {\n\t\t\t\tconst incompleteTable = '| a | b | ';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(completeTable);\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tif (newTokens) {\n\t\t\t\t\tignoreRaw(newTokens, completeTableTokens);\n\t\t\t\t}\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete header', () => {\n\t\t\t\tconst incompleteTable = '| a | b';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(completeTable);\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tif (newTokens) {\n\t\t\t\t\tignoreRaw(newTokens, completeTableTokens);\n\t\t\t\t}\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete header one column', () => {\n\t\t\t\tconst incompleteTable = '| a ';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(incompleteTable + '|\\n| --- |');\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tif (newTokens) {\n\t\t\t\t\tignoreRaw(newTokens, completeTableTokens);\n\t\t\t\t}\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('full header with extras', () => {\n\t\t\t\tconst incompleteTable = '| a **bold** | b _italics_ |';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(incompleteTable + '\\n| --- | --- |');\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('full header with leading text', () => {\n\t\t\t\t// Parsing this gives one token and one 'text' subtoken\n\t\t\t\tconst incompleteTable = 'here is a table\\n| a | b |';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(incompleteTable + '\\n| --- | --- |');\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('full header with leading other stuff', () => {\n\t\t\t\t// Parsing this gives one token and one 'text' subtoken\n\t\t\t\tconst incompleteTable = '```js\\nconst xyz = 123;\\n```\\n| a | b |';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(incompleteTable + '\\n| --- | --- |');\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('full header with incomplete separator', () => {\n\t\t\t\tconst incompleteTable = '| a | b |\\n| ---';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(completeTable);\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('full header with incomplete separator 2', () => {\n\t\t\t\tconst incompleteTable = '| a | b |\\n| --- |';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(completeTable);\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('full header with incomplete separator 3', () => {\n\t\t\t\tconst incompleteTable = '| a | b |\\n|';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\t\t\t\tconst completeTableTokens = marked.marked.lexer(completeTable);\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTableTokens);\n\t\t\t});\n\n\t\t\ttest('not a table', () => {\n\t\t\t\tconst incompleteTable = '| a | b |\\nsome text';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest('not a table 2', () => {\n\t\t\t\tconst incompleteTable = '| a | b |\\n| --- |\\nsome text';\n\t\t\t\tconst tokens = marked.marked.lexer(incompleteTable);\n\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\t\t});\n\n\t\tfunction simpleMarkdownTestSuite(name: string, delimiter: string): void {\n\t\t\ttest(`incomplete ${name}`, () => {\n\t\t\t\tconst incomplete = `${delimiter}code`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + delimiter);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest(`complete ${name}`, () => {\n\t\t\t\tconst text = `leading text ${delimiter}code${delimiter} trailing text`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest(`${name} with leading text`, () => {\n\t\t\t\tconst incomplete = `some text and ${delimiter}some code`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + delimiter);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest(`${name} with trailing space`, () => {\n\t\t\t\tconst incomplete = `some text and ${delimiter}some code `;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete.trimEnd() + delimiter);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest(`single loose \"${delimiter}\"`, () => {\n\t\t\t\tconst text = `some text and ${delimiter}by itself\\nmore text here`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest(`incomplete ${name} after newline`, () => {\n\t\t\t\tconst text = `some text\\nmore text here and ${delimiter}text`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + delimiter);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest(`incomplete after complete ${name}`, () => {\n\t\t\t\tconst text = `leading text ${delimiter}code${delimiter} trailing text and ${delimiter}another`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + delimiter);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest(`incomplete ${name} in list`, () => {\n\t\t\t\tconst text = `- list item one\\n- list item two and ${delimiter}text`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + delimiter);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest(`incomplete ${name} in asterisk list`, () => {\n\t\t\t\tconst text = `* list item one\\n* list item two and ${delimiter}text`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + delimiter);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest(`incomplete ${name} in numbered list`, () => {\n\t\t\t\tconst text = `1. list item one\\n2. list item two and ${delimiter}text`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + delimiter);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\t\t}\n\n\t\tsuite('list', () => {\n\t\t\ttest('list with complete codeblock', () => {\n\t\t\t\tconst list = `-\n\t\\`\\`\\`js\n\tlet x = 1;\n\t\\`\\`\\`\n- list item two\n`;\n\t\t\t\tconst tokens = marked.marked.lexer(list);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest.skip('list with incomplete codeblock', () => {\n\t\t\t\tconst incomplete = `- list item one\n\n\t\\`\\`\\`js\n\tlet x = 1;`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '\\n\t```');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('list with subitems', () => {\n\t\t\t\tconst list = `- hello\n\t- sub item\n- text\n\tnewline for some reason\n`;\n\t\t\t\tconst tokens = marked.marked.lexer(list);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest('ordered list with subitems', () => {\n\t\t\t\tconst list = `1. hello\n\t- sub item\n2. text\n\tnewline for some reason\n`;\n\t\t\t\tconst tokens = marked.marked.lexer(list);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest('list with stuff', () => {\n\t\t\t\tconst list = `- list item one \\`codespan\\` **bold** [link](http://microsoft.com) more text`;\n\t\t\t\tconst tokens = marked.marked.lexer(list);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest('list with incomplete link text', () => {\n\t\t\t\tconst incomplete = `- list item one\n- item two [link`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '](https://microsoft.com)');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('list with incomplete link target', () => {\n\t\t\t\tconst incomplete = `- list item one\n- item two [link](`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ')');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('ordered list with incomplete link target', () => {\n\t\t\t\tconst incomplete = `1. list item one\n2. item two [link](`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ')');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('ordered list with extra whitespace', () => {\n\t\t\t\tconst incomplete = `1. list item one\n2. item two [link](`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ')');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('list with extra whitespace', () => {\n\t\t\t\tconst incomplete = `- list item one\n- item two [link](`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ')');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('list with incomplete link with other stuff', () => {\n\t\t\t\tconst incomplete = `- list item one\n- item two [\\`link`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '\\`](https://microsoft.com)');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('ordered list with incomplete link with other stuff', () => {\n\t\t\t\tconst incomplete = `1. list item one\n1. item two [\\`link`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '\\`](https://microsoft.com)');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('list with incomplete subitem', () => {\n\t\t\t\tconst incomplete = `1. list item one\n\t- `;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '&nbsp;');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('list with incomplete nested subitem', () => {\n\t\t\t\tconst incomplete = `1. list item one\n\t- item 2\n\t\t- `;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '&nbsp;');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('text with start of list is not a heading', () => {\n\t\t\t\tconst incomplete = `hello\\n- `;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ' &nbsp;');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('even more text with start of list is not a heading', () => {\n\t\t\t\tconst incomplete = `# hello\\n\\ntext\\n-`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ' &nbsp;');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\t\t});\n\n\t\tsuite('codespan', () => {\n\t\t\tsimpleMarkdownTestSuite('codespan', '`');\n\n\t\t\ttest(`backtick between letters`, () => {\n\t\t\t\tconst text = 'a`b';\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeCodespanTokens = marked.marked.lexer(text + '`');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeCodespanTokens);\n\t\t\t});\n\n\t\t\ttest(`nested pattern`, () => {\n\t\t\t\tconst text = 'sldkfjsd `abc __def__ ghi';\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + '`');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\t\t});\n\n\t\tsuite('star', () => {\n\t\t\tsimpleMarkdownTestSuite('star', '*');\n\n\t\t\ttest(`star between letters`, () => {\n\t\t\t\tconst text = 'sldkfjsd a*b';\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + '*');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest(`nested pattern`, () => {\n\t\t\t\tconst text = 'sldkfjsd *abc __def__ ghi';\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + '*');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\t\t});\n\n\t\tsuite('double star', () => {\n\t\t\tsimpleMarkdownTestSuite('double star', '**');\n\n\t\t\ttest(`double star between letters`, () => {\n\t\t\t\tconst text = 'a**b';\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(text + '**');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\t// TODO trim these patterns from end\n\t\t\ttest.skip(`ending in doublestar`, () => {\n\t\t\t\tconst incomplete = `some text and **`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete.trimEnd() + '**');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\t\t});\n\n\t\tsuite('underscore', () => {\n\t\t\tsimpleMarkdownTestSuite('underscore', '_');\n\n\t\t\ttest(`underscore between letters`, () => {\n\t\t\t\tconst text = `this_not_italics`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\t\t});\n\n\t\tsuite('double underscore', () => {\n\t\t\tsimpleMarkdownTestSuite('double underscore', '__');\n\n\t\t\ttest(`double underscore between letters`, () => {\n\t\t\t\tconst text = `this__not__bold`;\n\t\t\t\tconst tokens = marked.marked.lexer(text);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\t\t});\n\n\t\tsuite('link', () => {\n\t\t\ttest('incomplete link text', () => {\n\t\t\t\tconst incomplete = 'abc [text';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '](https://microsoft.com)');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete link target', () => {\n\t\t\t\tconst incomplete = 'foo [text](http://microsoft';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ')');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete link target 2', () => {\n\t\t\t\tconst incomplete = 'foo [text](http://microsoft.com';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ')');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete link target with extra stuff', () => {\n\t\t\t\tconst incomplete = '[before `text` after](http://microsoft.com';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ')');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete link target with extra stuff and incomplete arg', () => {\n\t\t\t\tconst incomplete = '[before `text` after](http://microsoft.com \"more text ';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '\")');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete link target with incomplete arg', () => {\n\t\t\t\tconst incomplete = 'foo [text](http://microsoft.com \"more text here ';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '\")');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete link target with incomplete arg 2', () => {\n\t\t\t\tconst incomplete = '[text](command:vscode.openRelativePath \"arg';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '\")');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('incomplete link target with complete arg', () => {\n\t\t\t\tconst incomplete = 'foo [text](http://microsoft.com \"more text here\"';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + ')');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('link text with incomplete codespan', () => {\n\t\t\t\tconst incomplete = `text [\\`codespan`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '`](https://microsoft.com)');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('link text with incomplete stuff', () => {\n\t\t\t\tconst incomplete = `text [more text \\`codespan\\` text **bold`;\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '**](https://microsoft.com)');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('Looks like incomplete link target but isn\\'t', () => {\n\t\t\t\tconst complete = '**bold** `codespan` text](';\n\t\t\t\tconst tokens = marked.marked.lexer(complete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(complete);\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest.skip('incomplete link in list', () => {\n\t\t\t\tconst incomplete = '- [text';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tconst completeTokens = marked.marked.lexer(incomplete + '](https://microsoft.com)');\n\t\t\t\tassert.deepStrictEqual(newTokens, completeTokens);\n\t\t\t});\n\n\t\t\ttest('square brace between letters', () => {\n\t\t\t\tconst incomplete = 'a[b';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest('square brace on previous line', () => {\n\t\t\t\tconst incomplete = 'text[\\nmore text';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest('square braces in text', () => {\n\t\t\t\tconst incomplete = 'hello [what] is going on';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\n\t\t\ttest('complete link', () => {\n\t\t\t\tconst incomplete = 'text [link](http://microsoft.com)';\n\t\t\t\tconst tokens = marked.marked.lexer(incomplete);\n\t\t\t\tconst newTokens = fillInIncompleteTokens(tokens);\n\n\t\t\t\tassert.deepStrictEqual(newTokens, tokens);\n\t\t\t});\n\t\t});\n\t});\n});\n"]}