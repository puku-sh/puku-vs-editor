{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/base/test/node/powershell.test.ts","vs/base/test/node/powershell.test.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAChG,OAAO,MAAM,MAAM,QAAQ,CAAC;AAC5B,OAAO,KAAK,EAAE,MAAM,IAAI,CAAC;AACzB,OAAO,KAAK,QAAQ,MAAM,0BAA0B,CAAC;AACrD,OAAO,EAAE,gCAAgC,EAAE,uCAAuC,EAAyB,MAAM,0BAA0B,CAAC;AAC5I,OAAO,EAAE,uCAAuC,EAAE,MAAM,oBAAoB,CAAC;AAE7E,SAAS,SAAS,CAAC,OAAe;IACjC,kCAAkC;IAClC,IAAI,eAAe,GAAG,KAAK,CAAC;IAC5B,IAAI,CAAC;QACJ,MAAM,IAAI,GAAG,EAAE,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAClC,eAAe,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;IACjC,CAAC;IAAC,MAAM,CAAC;QACR,uDAAuD;QACvD,oDAAoD;QACpD,IAAI,CAAC;YACJ,eAAe,GAAG,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;QAClE,CAAC;QAAC,MAAM,CAAC;QAET,CAAC;IACF,CAAC;IAED,MAAM,CAAC,WAAW,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;AAC3C,CAAC;AAED,IAAI,QAAQ,CAAC,SAAS,EAAE,CAAC;IACxB,KAAK,CAAC,mBAAmB,EAAE,GAAG,EAAE;QAC/B,uCAAuC,EAAE,CAAC;QAC1C,IAAI,CAAC,qCAAqC,EAAE,KAAK,IAAI,EAAE;YACtD,MAAM,OAAO,GAAG,MAAM,uCAAuC,EAAE,CAAC;YAChE,MAAM,OAAO,GAAG,OAAO,EAAE,OAAO,CAAC;YACjC,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;YACrC,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC;YAElD,SAAS,CAAC,OAAQ,CAAC,CAAC;QACrB,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,2BAA2B,EAAE,KAAK,IAAI,EAAE;YAC5C,MAAM,KAAK,GAAG,IAAI,KAAK,EAAyB,CAAC;YACjD,IAAI,KAAK,EAAE,MAAM,CAAC,IAAI,gCAAgC,EAAE,EAAE,CAAC;gBAC1D,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACf,CAAC;YAED,MAAM,aAAa,GAAG,4BAA4B,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,WAAW,KAAK,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACjH,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,EAAE,IAAI,EAAE,aAAa,CAAC,CAAC;YAE3D,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE,CAAC;gBAC1B,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACzB,CAAC;YAED,oDAAoD;YACpD,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,WAAW,EAAE,oBAAoB,EAAE,aAAa,CAAC,CAAC;QAC9F,CAAC,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC;AACJ,CAAC","file":"powershell.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport * as fs from 'fs';\nimport * as platform from '../../common/platform.js';\nimport { enumeratePowerShellInstallations, getFirstAvailablePowerShellInstallation, IPowerShellExeDetails } from '../../node/powershell.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../common/utils.js';\n\nfunction checkPath(exePath: string) {\n\t// Check to see if the path exists\n\tlet pathCheckResult = false;\n\ttry {\n\t\tconst stat = fs.statSync(exePath);\n\t\tpathCheckResult = stat.isFile();\n\t} catch {\n\t\t// fs.exists throws on Windows with SymbolicLinks so we\n\t\t// also use lstat to try and see if the file exists.\n\t\ttry {\n\t\t\tpathCheckResult = fs.statSync(fs.readlinkSync(exePath)).isFile();\n\t\t} catch {\n\n\t\t}\n\t}\n\n\tassert.strictEqual(pathCheckResult, true);\n}\n\nif (platform.isWindows) {\n\tsuite('PowerShell finder', () => {\n\t\tensureNoDisposablesAreLeakedInTestSuite();\n\t\ttest('Can find first available PowerShell', async () => {\n\t\t\tconst pwshExe = await getFirstAvailablePowerShellInstallation();\n\t\t\tconst exePath = pwshExe?.exePath;\n\t\t\tassert.notStrictEqual(exePath, null);\n\t\t\tassert.notStrictEqual(pwshExe?.displayName, null);\n\n\t\t\tcheckPath(exePath!);\n\t\t});\n\n\t\ttest('Can enumerate PowerShells', async () => {\n\t\t\tconst pwshs = new Array<IPowerShellExeDetails>();\n\t\t\tfor await (const p of enumeratePowerShellInstallations()) {\n\t\t\t\tpwshs.push(p);\n\t\t\t}\n\n\t\t\tconst powershellLog = 'Found these PowerShells:\\n' + pwshs.map(p => `${p.displayName}: ${p.exePath}`).join('\\n');\n\t\t\tassert.strictEqual(pwshs.length >= 1, true, powershellLog);\n\n\t\t\tfor (const pwsh of pwshs) {\n\t\t\t\tcheckPath(pwsh.exePath);\n\t\t\t}\n\n\t\t\t// The last one should always be Windows PowerShell.\n\t\t\tassert.strictEqual(pwshs[pwshs.length - 1].displayName, 'Windows PowerShell', powershellLog);\n\t\t});\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport * as fs from 'fs';\nimport * as platform from '../../common/platform.js';\nimport { enumeratePowerShellInstallations, getFirstAvailablePowerShellInstallation, IPowerShellExeDetails } from '../../node/powershell.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../common/utils.js';\n\nfunction checkPath(exePath: string) {\n\t// Check to see if the path exists\n\tlet pathCheckResult = false;\n\ttry {\n\t\tconst stat = fs.statSync(exePath);\n\t\tpathCheckResult = stat.isFile();\n\t} catch {\n\t\t// fs.exists throws on Windows with SymbolicLinks so we\n\t\t// also use lstat to try and see if the file exists.\n\t\ttry {\n\t\t\tpathCheckResult = fs.statSync(fs.readlinkSync(exePath)).isFile();\n\t\t} catch {\n\n\t\t}\n\t}\n\n\tassert.strictEqual(pathCheckResult, true);\n}\n\nif (platform.isWindows) {\n\tsuite('PowerShell finder', () => {\n\t\tensureNoDisposablesAreLeakedInTestSuite();\n\t\ttest('Can find first available PowerShell', async () => {\n\t\t\tconst pwshExe = await getFirstAvailablePowerShellInstallation();\n\t\t\tconst exePath = pwshExe?.exePath;\n\t\t\tassert.notStrictEqual(exePath, null);\n\t\t\tassert.notStrictEqual(pwshExe?.displayName, null);\n\n\t\t\tcheckPath(exePath!);\n\t\t});\n\n\t\ttest('Can enumerate PowerShells', async () => {\n\t\t\tconst pwshs = new Array<IPowerShellExeDetails>();\n\t\t\tfor await (const p of enumeratePowerShellInstallations()) {\n\t\t\t\tpwshs.push(p);\n\t\t\t}\n\n\t\t\tconst powershellLog = 'Found these PowerShells:\\n' + pwshs.map(p => `${p.displayName}: ${p.exePath}`).join('\\n');\n\t\t\tassert.strictEqual(pwshs.length >= 1, true, powershellLog);\n\n\t\t\tfor (const pwsh of pwshs) {\n\t\t\t\tcheckPath(pwsh.exePath);\n\t\t\t}\n\n\t\t\t// The last one should always be Windows PowerShell.\n\t\t\tassert.strictEqual(pwshs[pwshs.length - 1].displayName, 'Windows PowerShell', powershellLog);\n\t\t});\n\t});\n}\n"]}