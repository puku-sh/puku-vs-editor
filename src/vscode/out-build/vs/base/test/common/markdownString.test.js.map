{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/base/test/common/markdownString.test.ts","vs/base/test/common/markdownString.test.ts"],"names":[],"mappings":"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","file":"markdownString.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { IMarkdownString, MarkdownString } from '../../common/htmlContent.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from './utils.js';\nimport { URI } from '../../common/uri.js';\n\nsuite('MarkdownString', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('Escape leading whitespace', function () {\n\t\tconst mds = new MarkdownString();\n\t\tmds.appendText('Hello\\n    Not a code block');\n\t\tassert.strictEqual(mds.value, 'Hello\\n\\n&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;a&nbsp;code&nbsp;block');\n\t});\n\n\ttest('MarkdownString.appendText doesn\\'t escape quote #109040', function () {\n\t\tconst mds = new MarkdownString();\n\t\tmds.appendText('> Text\\n>More');\n\t\tassert.strictEqual(mds.value, '\\\\>&nbsp;Text\\n\\n\\\\>More');\n\t});\n\n\ttest('appendText', () => {\n\n\t\tconst mds = new MarkdownString();\n\t\tmds.appendText('# foo\\n*bar*');\n\n\t\tassert.strictEqual(mds.value, '\\\\#&nbsp;foo\\n\\n\\\\*bar\\\\*');\n\t});\n\n\ttest('appendLink', function () {\n\n\t\tfunction assertLink(target: string, label: string, title: string | undefined, expected: string) {\n\t\t\tconst mds = new MarkdownString();\n\t\t\tmds.appendLink(target, label, title);\n\t\t\tassert.strictEqual(mds.value, expected);\n\t\t}\n\n\t\tassertLink(\n\t\t\t'https://example.com\\\\()![](file:///Users/jrieken/Code/_samples/devfest/foo/img.png)', 'hello', undefined,\n\t\t\t'[hello](https://example.com\\\\(\\\\)![](file:///Users/jrieken/Code/_samples/devfest/foo/img.png\\\\))'\n\t\t);\n\t\tassertLink(\n\t\t\t'https://example.com', 'hello', 'title',\n\t\t\t'[hello](https://example.com \"title\")'\n\t\t);\n\t\tassertLink(\n\t\t\t'foo)', 'hello]', undefined,\n\t\t\t'[hello\\\\]](foo\\\\))'\n\t\t);\n\t\tassertLink(\n\t\t\t'foo\\\\)', 'hello]', undefined,\n\t\t\t'[hello\\\\]](foo\\\\))'\n\t\t);\n\t\tassertLink(\n\t\t\t'fo)o', 'hell]o', undefined,\n\t\t\t'[hell\\\\]o](fo\\\\)o)'\n\t\t);\n\t\tassertLink(\n\t\t\t'foo)', 'hello]', 'title\"',\n\t\t\t'[hello\\\\]](foo\\\\) \"title\\\\\"\")'\n\t\t);\n\t});\n\n\ttest('lift', () => {\n\t\tconst dto: IMarkdownString = {\n\t\t\tvalue: 'hello',\n\t\t\tbaseUri: URI.file('/foo/bar'),\n\t\t\tsupportThemeIcons: true,\n\t\t\tisTrusted: true,\n\t\t\tsupportHtml: true,\n\t\t\turis: {\n\t\t\t\t[URI.file('/foo/bar2').toString()]: URI.file('/foo/bar2'),\n\t\t\t\t[URI.file('/foo/bar3').toString()]: URI.file('/foo/bar3')\n\t\t\t}\n\t\t};\n\t\tconst mds = MarkdownString.lift(dto);\n\t\tassert.strictEqual(mds.value, dto.value);\n\t\tassert.strictEqual(mds.baseUri?.toString(), dto.baseUri?.toString());\n\t\tassert.strictEqual(mds.supportThemeIcons, dto.supportThemeIcons);\n\t\tassert.strictEqual(mds.isTrusted, dto.isTrusted);\n\t\tassert.strictEqual(mds.supportHtml, dto.supportHtml);\n\t\tassert.deepStrictEqual(mds.uris, dto.uris);\n\t});\n\n\ttest('lift returns new instance', () => {\n\t\tconst instance = new MarkdownString('hello');\n\t\tconst mds2 = MarkdownString.lift(instance).appendText('world');\n\t\tassert.strictEqual(mds2.value, 'helloworld');\n\t\tassert.strictEqual(instance.value, 'hello');\n\t});\n\n\tsuite('appendCodeBlock', () => {\n\t\tfunction assertCodeBlock(lang: string, code: string, result: string) {\n\t\t\tconst mds = new MarkdownString();\n\t\t\tmds.appendCodeblock(lang, code);\n\t\t\tassert.strictEqual(mds.value, result);\n\t\t}\n\n\t\ttest('common cases', () => {\n\t\t\t// no backticks\n\t\t\tassertCodeBlock('ts', 'const a = 1;', `\\n${[\n\t\t\t\t'```ts',\n\t\t\t\t'const a = 1;',\n\t\t\t\t'```'\n\t\t\t].join('\\n')}\\n`);\n\t\t\t// backticks\n\t\t\tassertCodeBlock('ts', 'const a = `1`;', `\\n${[\n\t\t\t\t'```ts',\n\t\t\t\t'const a = `1`;',\n\t\t\t\t'```'\n\t\t\t].join('\\n')}\\n`);\n\t\t});\n\n\t\t// @see https://github.com/microsoft/vscode/issues/193746\n\t\ttest('escape fence', () => {\n\t\t\t// fence in the first line\n\t\t\tassertCodeBlock('md', '```\\n```', `\\n${[\n\t\t\t\t'````md',\n\t\t\t\t'```\\n```',\n\t\t\t\t'````'\n\t\t\t].join('\\n')}\\n`);\n\t\t\t// fence in the middle of code\n\t\t\tassertCodeBlock('md', '\\n\\n```\\n```', `\\n${[\n\t\t\t\t'````md',\n\t\t\t\t'\\n\\n```\\n```',\n\t\t\t\t'````'\n\t\t\t].join('\\n')}\\n`);\n\t\t\t// longer fence at the end of code\n\t\t\tassertCodeBlock('md', '```\\n```\\n````\\n````', `\\n${[\n\t\t\t\t'`````md',\n\t\t\t\t'```\\n```\\n````\\n````',\n\t\t\t\t'`````'\n\t\t\t].join('\\n')}\\n`);\n\t\t});\n\t});\n\n\tsuite('ThemeIcons', () => {\n\n\t\tsuite('Support On', () => {\n\n\t\t\ttest('appendText', () => {\n\t\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\t\tmds.appendText('$(zap) $(not a theme icon) $(add)');\n\n\t\t\t\tassert.strictEqual(mds.value, '\\\\\\\\$\\\\(zap\\\\)&nbsp;$\\\\(not&nbsp;a&nbsp;theme&nbsp;icon\\\\)&nbsp;\\\\\\\\$\\\\(add\\\\)');\n\t\t\t});\n\n\t\t\ttest('appendMarkdown', () => {\n\t\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\t\tmds.appendMarkdown('$(zap) $(not a theme icon) $(add)');\n\n\t\t\t\tassert.strictEqual(mds.value, '$(zap) $(not a theme icon) $(add)');\n\t\t\t});\n\n\t\t\ttest('appendMarkdown with escaped icon', () => {\n\t\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\t\tmds.appendMarkdown('\\\\$(zap) $(not a theme icon) $(add)');\n\n\t\t\t\tassert.strictEqual(mds.value, '\\\\$(zap) $(not a theme icon) $(add)');\n\t\t\t});\n\n\t\t});\n\n\t\tsuite('Support Off', () => {\n\n\t\t\ttest('appendText', () => {\n\t\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: false });\n\t\t\t\tmds.appendText('$(zap) $(not a theme icon) $(add)');\n\n\t\t\t\tassert.strictEqual(mds.value, '$\\\\(zap\\\\)&nbsp;$\\\\(not&nbsp;a&nbsp;theme&nbsp;icon\\\\)&nbsp;$\\\\(add\\\\)');\n\t\t\t});\n\n\t\t\ttest('appendMarkdown', () => {\n\t\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: false });\n\t\t\t\tmds.appendMarkdown('$(zap) $(not a theme icon) $(add)');\n\n\t\t\t\tassert.strictEqual(mds.value, '$(zap) $(not a theme icon) $(add)');\n\t\t\t});\n\n\t\t\ttest('appendMarkdown with escaped icon', () => {\n\t\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\t\tmds.appendMarkdown('\\\\$(zap) $(not a theme icon) $(add)');\n\n\t\t\t\tassert.strictEqual(mds.value, '\\\\$(zap) $(not a theme icon) $(add)');\n\t\t\t});\n\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { IMarkdownString, MarkdownString } from '../../common/htmlContent.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from './utils.js';\nimport { URI } from '../../common/uri.js';\n\nsuite('MarkdownString', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('Escape leading whitespace', function () {\n\t\tconst mds = new MarkdownString();\n\t\tmds.appendText('Hello\\n    Not a code block');\n\t\tassert.strictEqual(mds.value, 'Hello\\n\\n&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;a&nbsp;code&nbsp;block');\n\t});\n\n\ttest('MarkdownString.appendText doesn\\'t escape quote #109040', function () {\n\t\tconst mds = new MarkdownString();\n\t\tmds.appendText('> Text\\n>More');\n\t\tassert.strictEqual(mds.value, '\\\\>&nbsp;Text\\n\\n\\\\>More');\n\t});\n\n\ttest('appendText', () => {\n\n\t\tconst mds = new MarkdownString();\n\t\tmds.appendText('# foo\\n*bar*');\n\n\t\tassert.strictEqual(mds.value, '\\\\#&nbsp;foo\\n\\n\\\\*bar\\\\*');\n\t});\n\n\ttest('appendLink', function () {\n\n\t\tfunction assertLink(target: string, label: string, title: string | undefined, expected: string) {\n\t\t\tconst mds = new MarkdownString();\n\t\t\tmds.appendLink(target, label, title);\n\t\t\tassert.strictEqual(mds.value, expected);\n\t\t}\n\n\t\tassertLink(\n\t\t\t'https://example.com\\\\()![](file:///Users/jrieken/Code/_samples/devfest/foo/img.png)', 'hello', undefined,\n\t\t\t'[hello](https://example.com\\\\(\\\\)![](file:///Users/jrieken/Code/_samples/devfest/foo/img.png\\\\))'\n\t\t);\n\t\tassertLink(\n\t\t\t'https://example.com', 'hello', 'title',\n\t\t\t'[hello](https://example.com \"title\")'\n\t\t);\n\t\tassertLink(\n\t\t\t'foo)', 'hello]', undefined,\n\t\t\t'[hello\\\\]](foo\\\\))'\n\t\t);\n\t\tassertLink(\n\t\t\t'foo\\\\)', 'hello]', undefined,\n\t\t\t'[hello\\\\]](foo\\\\))'\n\t\t);\n\t\tassertLink(\n\t\t\t'fo)o', 'hell]o', undefined,\n\t\t\t'[hell\\\\]o](fo\\\\)o)'\n\t\t);\n\t\tassertLink(\n\t\t\t'foo)', 'hello]', 'title\"',\n\t\t\t'[hello\\\\]](foo\\\\) \"title\\\\\"\")'\n\t\t);\n\t});\n\n\ttest('lift', () => {\n\t\tconst dto: IMarkdownString = {\n\t\t\tvalue: 'hello',\n\t\t\tbaseUri: URI.file('/foo/bar'),\n\t\t\tsupportThemeIcons: true,\n\t\t\tisTrusted: true,\n\t\t\tsupportHtml: true,\n\t\t\turis: {\n\t\t\t\t[URI.file('/foo/bar2').toString()]: URI.file('/foo/bar2'),\n\t\t\t\t[URI.file('/foo/bar3').toString()]: URI.file('/foo/bar3')\n\t\t\t}\n\t\t};\n\t\tconst mds = MarkdownString.lift(dto);\n\t\tassert.strictEqual(mds.value, dto.value);\n\t\tassert.strictEqual(mds.baseUri?.toString(), dto.baseUri?.toString());\n\t\tassert.strictEqual(mds.supportThemeIcons, dto.supportThemeIcons);\n\t\tassert.strictEqual(mds.isTrusted, dto.isTrusted);\n\t\tassert.strictEqual(mds.supportHtml, dto.supportHtml);\n\t\tassert.deepStrictEqual(mds.uris, dto.uris);\n\t});\n\n\ttest('lift returns new instance', () => {\n\t\tconst instance = new MarkdownString('hello');\n\t\tconst mds2 = MarkdownString.lift(instance).appendText('world');\n\t\tassert.strictEqual(mds2.value, 'helloworld');\n\t\tassert.strictEqual(instance.value, 'hello');\n\t});\n\n\tsuite('appendCodeBlock', () => {\n\t\tfunction assertCodeBlock(lang: string, code: string, result: string) {\n\t\t\tconst mds = new MarkdownString();\n\t\t\tmds.appendCodeblock(lang, code);\n\t\t\tassert.strictEqual(mds.value, result);\n\t\t}\n\n\t\ttest('common cases', () => {\n\t\t\t// no backticks\n\t\t\tassertCodeBlock('ts', 'const a = 1;', `\\n${[\n\t\t\t\t'```ts',\n\t\t\t\t'const a = 1;',\n\t\t\t\t'```'\n\t\t\t].join('\\n')}\\n`);\n\t\t\t// backticks\n\t\t\tassertCodeBlock('ts', 'const a = `1`;', `\\n${[\n\t\t\t\t'```ts',\n\t\t\t\t'const a = `1`;',\n\t\t\t\t'```'\n\t\t\t].join('\\n')}\\n`);\n\t\t});\n\n\t\t// @see https://github.com/microsoft/vscode/issues/193746\n\t\ttest('escape fence', () => {\n\t\t\t// fence in the first line\n\t\t\tassertCodeBlock('md', '```\\n```', `\\n${[\n\t\t\t\t'````md',\n\t\t\t\t'```\\n```',\n\t\t\t\t'````'\n\t\t\t].join('\\n')}\\n`);\n\t\t\t// fence in the middle of code\n\t\t\tassertCodeBlock('md', '\\n\\n```\\n```', `\\n${[\n\t\t\t\t'````md',\n\t\t\t\t'\\n\\n```\\n```',\n\t\t\t\t'````'\n\t\t\t].join('\\n')}\\n`);\n\t\t\t// longer fence at the end of code\n\t\t\tassertCodeBlock('md', '```\\n```\\n````\\n````', `\\n${[\n\t\t\t\t'`````md',\n\t\t\t\t'```\\n```\\n````\\n````',\n\t\t\t\t'`````'\n\t\t\t].join('\\n')}\\n`);\n\t\t});\n\t});\n\n\tsuite('ThemeIcons', () => {\n\n\t\tsuite('Support On', () => {\n\n\t\t\ttest('appendText', () => {\n\t\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\t\tmds.appendText('$(zap) $(not a theme icon) $(add)');\n\n\t\t\t\tassert.strictEqual(mds.value, '\\\\\\\\$\\\\(zap\\\\)&nbsp;$\\\\(not&nbsp;a&nbsp;theme&nbsp;icon\\\\)&nbsp;\\\\\\\\$\\\\(add\\\\)');\n\t\t\t});\n\n\t\t\ttest('appendMarkdown', () => {\n\t\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\t\tmds.appendMarkdown('$(zap) $(not a theme icon) $(add)');\n\n\t\t\t\tassert.strictEqual(mds.value, '$(zap) $(not a theme icon) $(add)');\n\t\t\t});\n\n\t\t\ttest('appendMarkdown with escaped icon', () => {\n\t\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\t\tmds.appendMarkdown('\\\\$(zap) $(not a theme icon) $(add)');\n\n\t\t\t\tassert.strictEqual(mds.value, '\\\\$(zap) $(not a theme icon) $(add)');\n\t\t\t});\n\n\t\t});\n\n\t\tsuite('Support Off', () => {\n\n\t\t\ttest('appendText', () => {\n\t\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: false });\n\t\t\t\tmds.appendText('$(zap) $(not a theme icon) $(add)');\n\n\t\t\t\tassert.strictEqual(mds.value, '$\\\\(zap\\\\)&nbsp;$\\\\(not&nbsp;a&nbsp;theme&nbsp;icon\\\\)&nbsp;$\\\\(add\\\\)');\n\t\t\t});\n\n\t\t\ttest('appendMarkdown', () => {\n\t\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: false });\n\t\t\t\tmds.appendMarkdown('$(zap) $(not a theme icon) $(add)');\n\n\t\t\t\tassert.strictEqual(mds.value, '$(zap) $(not a theme icon) $(add)');\n\t\t\t});\n\n\t\t\ttest('appendMarkdown with escaped icon', () => {\n\t\t\t\tconst mds = new MarkdownString(undefined, { supportThemeIcons: true });\n\t\t\t\tmds.appendMarkdown('\\\\$(zap) $(not a theme icon) $(add)');\n\n\t\t\t\tassert.strictEqual(mds.value, '\\\\$(zap) $(not a theme icon) $(add)');\n\t\t\t});\n\n\t\t});\n\t});\n});\n"]}