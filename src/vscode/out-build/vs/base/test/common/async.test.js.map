{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/base/test/common/async.test.ts","vs/base/test/common/async.test.ts"],"names":[],"mappings":"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","file":"async.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as async from '../../common/async.js';\nimport * as MicrotaskDelay from '../../common/symbols.js';\nimport { CancellationToken, CancellationTokenSource } from '../../common/cancellation.js';\nimport { isCancellationError } from '../../common/errors.js';\nimport { Event } from '../../common/event.js';\nimport { URI } from '../../common/uri.js';\nimport { runWithFakedTimers } from './timeTravelScheduler.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from './utils.js';\nimport { DisposableStore } from '../../common/lifecycle.js';\nimport { Iterable } from '../../common/iterator.js';\n\nsuite('Async', () => {\n\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuite('cancelablePromise', function () {\n\t\ttest('set token, don\\'t wait for inner promise', function () {\n\t\t\tlet canceled = 0;\n\t\t\tconst promise = async.createCancelablePromise(token => {\n\t\t\t\tstore.add(token.onCancellationRequested(_ => { canceled += 1; }));\n\t\t\t\treturn new Promise(resolve => { /*never*/ });\n\t\t\t});\n\t\t\tconst result = promise.then(_ => assert.ok(false), err => {\n\t\t\t\tassert.strictEqual(canceled, 1);\n\t\t\t\tassert.ok(isCancellationError(err));\n\t\t\t});\n\t\t\tpromise.cancel();\n\t\t\tpromise.cancel(); // cancel only once\n\t\t\treturn result;\n\t\t});\n\n\t\ttest('cancel despite inner promise being resolved', function () {\n\t\t\tlet canceled = 0;\n\t\t\tconst promise = async.createCancelablePromise(token => {\n\t\t\t\tstore.add(token.onCancellationRequested(_ => { canceled += 1; }));\n\t\t\t\treturn Promise.resolve(1234);\n\t\t\t});\n\t\t\tconst result = promise.then(_ => assert.ok(false), err => {\n\t\t\t\tassert.strictEqual(canceled, 1);\n\t\t\t\tassert.ok(isCancellationError(err));\n\t\t\t});\n\t\t\tpromise.cancel();\n\t\t\treturn result;\n\t\t});\n\n\t\ttest('cancel disposes result', function () {\n\n\t\t\tconst store = new DisposableStore();\n\n\t\t\tconst promise = async.createCancelablePromise(async token => {\n\t\t\t\treturn store;\n\t\t\t});\n\t\t\tpromise.then(_ => assert.ok(false), err => {\n\n\t\t\t\tassert.ok(isCancellationError(err));\n\t\t\t\tassert.ok(store.isDisposed);\n\t\t\t});\n\n\t\t\tpromise.cancel();\n\t\t});\n\n\t\t// Cancelling a sync cancelable promise will fire the cancelled token.\n\t\t// Also, every `then` callback runs in another execution frame.\n\t\ttest('execution order (sync)', function () {\n\t\t\tconst order: string[] = [];\n\n\t\t\tconst cancellablePromise = async.createCancelablePromise(token => {\n\t\t\t\torder.push('in callback');\n\t\t\t\tstore.add(token.onCancellationRequested(_ => order.push('cancelled')));\n\t\t\t\treturn Promise.resolve(1234);\n\t\t\t});\n\n\t\t\torder.push('afterCreate');\n\n\t\t\tconst promise = cancellablePromise\n\t\t\t\t.then(undefined, err => null)\n\t\t\t\t.then(() => order.push('finally'));\n\n\t\t\tcancellablePromise.cancel();\n\t\t\torder.push('afterCancel');\n\n\t\t\treturn promise.then(() => assert.deepStrictEqual(order, ['in callback', 'afterCreate', 'cancelled', 'afterCancel', 'finally']));\n\t\t});\n\n\t\t// Cancelling an async cancelable promise is just the same as a sync cancellable promise.\n\t\ttest('execution order (async)', function () {\n\t\t\tconst order: string[] = [];\n\n\t\t\tconst cancellablePromise = async.createCancelablePromise(token => {\n\t\t\t\torder.push('in callback');\n\t\t\t\tstore.add(token.onCancellationRequested(_ => order.push('cancelled')));\n\t\t\t\treturn new Promise(c => setTimeout(c.bind(1234), 0));\n\t\t\t});\n\n\t\t\torder.push('afterCreate');\n\n\t\t\tconst promise = cancellablePromise\n\t\t\t\t.then(undefined, err => null)\n\t\t\t\t.then(() => order.push('finally'));\n\n\t\t\tcancellablePromise.cancel();\n\t\t\torder.push('afterCancel');\n\n\t\t\treturn promise.then(() => assert.deepStrictEqual(order, ['in callback', 'afterCreate', 'cancelled', 'afterCancel', 'finally']));\n\t\t});\n\n\t\ttest('execution order (async with late listener)', async function () {\n\t\t\tconst order: string[] = [];\n\n\t\t\tconst cancellablePromise = async.createCancelablePromise(async token => {\n\t\t\t\torder.push('in callback');\n\n\t\t\t\tawait async.timeout(0);\n\t\t\t\tstore.add(token.onCancellationRequested(_ => order.push('cancelled')));\n\t\t\t\tcancellablePromise.cancel();\n\t\t\t\torder.push('afterCancel');\n\t\t\t});\n\n\t\t\torder.push('afterCreate');\n\n\t\t\tconst promise = cancellablePromise\n\t\t\t\t.then(undefined, err => null)\n\t\t\t\t.then(() => order.push('finally'));\n\n\t\t\treturn promise.then(() => assert.deepStrictEqual(order, ['in callback', 'afterCreate', 'cancelled', 'afterCancel', 'finally']));\n\t\t});\n\n\t\ttest('get inner result', async function () {\n\t\t\tconst promise = async.createCancelablePromise(token => {\n\t\t\t\treturn async.timeout(12).then(_ => 1234);\n\t\t\t});\n\n\t\t\tconst result = await promise;\n\t\t\tassert.strictEqual(result, 1234);\n\t\t});\n\t});\n\n\tsuite('Throttler', function () {\n\t\ttest('non async', function () {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst throttler = new async.Throttler();\n\n\t\t\treturn Promise.all([\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 1); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); })\n\t\t\t]).then(() => assert.strictEqual(count, 2));\n\t\t});\n\n\t\ttest('async', () => {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => async.timeout(0).then(() => ++count);\n\n\t\t\tconst throttler = new async.Throttler();\n\n\t\t\treturn Promise.all([\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 1); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); })\n\t\t\t]).then(() => {\n\t\t\t\treturn Promise.all([\n\t\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 3); }),\n\t\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 4); }),\n\t\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 4); }),\n\t\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 4); }),\n\t\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 4); })\n\t\t\t\t]);\n\t\t\t});\n\t\t});\n\n\t\ttest('last factory should be the one getting called', function () {\n\t\t\tconst factoryFactory = (n: number) => () => {\n\t\t\t\treturn async.timeout(0).then(() => n);\n\t\t\t};\n\n\t\t\tconst throttler = new async.Throttler();\n\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tpromises.push(throttler.queue(factoryFactory(1)).then((n) => { assert.strictEqual(n, 1); }));\n\t\t\tpromises.push(throttler.queue(factoryFactory(2)).then((n) => { assert.strictEqual(n, 3); }));\n\t\t\tpromises.push(throttler.queue(factoryFactory(3)).then((n) => { assert.strictEqual(n, 3); }));\n\n\t\t\treturn Promise.all(promises);\n\t\t});\n\n\t\ttest('disposal after queueing', async () => {\n\t\t\tlet factoryCalls = 0;\n\t\t\tconst factory = async () => {\n\t\t\t\tfactoryCalls++;\n\t\t\t\treturn async.timeout(0);\n\t\t\t};\n\n\t\t\tconst throttler = new async.Throttler();\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tpromises.push(throttler.queue(factory));\n\t\t\tpromises.push(throttler.queue(factory));\n\t\t\tthrottler.dispose();\n\n\t\t\tawait Promise.all(promises);\n\t\t\tassert.strictEqual(factoryCalls, 1);\n\t\t});\n\n\t\ttest('disposal before queueing', async () => {\n\t\t\tlet factoryCalls = 0;\n\t\t\tconst factory = async () => {\n\t\t\t\tfactoryCalls++;\n\t\t\t\treturn async.timeout(0);\n\t\t\t};\n\n\t\t\tconst throttler = new async.Throttler();\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tthrottler.dispose();\n\t\t\tpromises.push(throttler.queue(factory));\n\n\t\t\ttry {\n\t\t\t\tawait Promise.all(promises);\n\t\t\t\tassert.fail('should fail');\n\t\t\t} catch (err) {\n\t\t\t\tassert.strictEqual(factoryCalls, 0);\n\t\t\t}\n\t\t});\n\t});\n\n\tsuite('Delayer', function () {\n\t\ttest('simple', () => {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(0);\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\treturn Promise.all(promises).then(() => {\n\t\t\t\tassert(!delayer.isTriggered());\n\t\t\t});\n\t\t});\n\n\t\ttest('microtask delay simple', () => {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(MicrotaskDelay.MicrotaskDelay);\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\treturn Promise.all(promises).then(() => {\n\t\t\t\tassert(!delayer.isTriggered());\n\t\t\t});\n\t\t});\n\n\t\tsuite('ThrottledDelayer', () => {\n\t\t\ttest('promise should resolve if disposed', async () => {\n\t\t\t\tconst throttledDelayer = new async.ThrottledDelayer<void>(100);\n\t\t\t\tconst promise = throttledDelayer.trigger(async () => { }, 0);\n\t\t\t\tthrottledDelayer.dispose();\n\n\t\t\t\ttry {\n\t\t\t\t\tawait promise;\n\t\t\t\t\tassert.fail('SHOULD NOT BE HERE');\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// OK\n\t\t\t\t}\n\t\t\t});\n\n\t\t\ttest('trigger after dispose throws', async () => {\n\t\t\t\tconst throttledDelayer = new async.ThrottledDelayer<void>(100);\n\t\t\t\tthrottledDelayer.dispose();\n\t\t\t\tawait assert.rejects(() => throttledDelayer.trigger(async () => { }, 0));\n\t\t\t});\n\t\t});\n\n\t\ttest('simple cancel', function () {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(0);\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tconst p = delayer.trigger(factory).then(() => {\n\t\t\t\tassert(false);\n\t\t\t}, () => {\n\t\t\t\tassert(true, 'yes, it was cancelled');\n\t\t\t});\n\n\t\t\tassert(delayer.isTriggered());\n\t\t\tdelayer.cancel();\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\treturn p;\n\t\t});\n\n\t\ttest('simple cancel microtask', function () {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(MicrotaskDelay.MicrotaskDelay);\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tconst p = delayer.trigger(factory).then(() => {\n\t\t\t\tassert(false);\n\t\t\t}, () => {\n\t\t\t\tassert(true, 'yes, it was cancelled');\n\t\t\t});\n\n\t\t\tassert(delayer.isTriggered());\n\t\t\tdelayer.cancel();\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\treturn p;\n\t\t});\n\n\t\ttest('cancel should cancel all calls to trigger', function () {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(0);\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then(undefined, () => { assert(true, 'yes, it was cancelled'); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then(undefined, () => { assert(true, 'yes, it was cancelled'); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then(undefined, () => { assert(true, 'yes, it was cancelled'); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tdelayer.cancel();\n\n\t\t\treturn Promise.all(promises).then(() => {\n\t\t\t\tassert(!delayer.isTriggered());\n\t\t\t});\n\t\t});\n\n\t\ttest('trigger, cancel, then trigger again', function () {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(0);\n\t\t\tlet promises: Promise<any>[] = [];\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tconst p = delayer.trigger(factory).then((result) => {\n\t\t\t\tassert.strictEqual(result, 1);\n\t\t\t\tassert(!delayer.isTriggered());\n\n\t\t\t\tpromises.push(delayer.trigger(factory).then(undefined, () => { assert(true, 'yes, it was cancelled'); }));\n\t\t\t\tassert(delayer.isTriggered());\n\n\t\t\t\tpromises.push(delayer.trigger(factory).then(undefined, () => { assert(true, 'yes, it was cancelled'); }));\n\t\t\t\tassert(delayer.isTriggered());\n\n\t\t\t\tdelayer.cancel();\n\n\t\t\t\tconst p = Promise.all(promises).then(() => {\n\t\t\t\t\tpromises = [];\n\n\t\t\t\t\tassert(!delayer.isTriggered());\n\n\t\t\t\t\tpromises.push(delayer.trigger(factory).then(() => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\t\t\tassert(delayer.isTriggered());\n\n\t\t\t\t\tpromises.push(delayer.trigger(factory).then(() => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\t\t\tassert(delayer.isTriggered());\n\n\t\t\t\t\tconst p = Promise.all(promises).then(() => {\n\t\t\t\t\t\tassert(!delayer.isTriggered());\n\t\t\t\t\t});\n\n\t\t\t\t\tassert(delayer.isTriggered());\n\n\t\t\t\t\treturn p;\n\t\t\t\t});\n\n\t\t\t\treturn p;\n\t\t\t});\n\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\treturn p;\n\t\t});\n\n\t\ttest('last task should be the one getting called', function () {\n\t\t\tconst factoryFactory = (n: number) => () => {\n\t\t\t\treturn Promise.resolve(n);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(0);\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factoryFactory(1)).then((n) => { assert.strictEqual(n, 3); }));\n\t\t\tpromises.push(delayer.trigger(factoryFactory(2)).then((n) => { assert.strictEqual(n, 3); }));\n\t\t\tpromises.push(delayer.trigger(factoryFactory(3)).then((n) => { assert.strictEqual(n, 3); }));\n\n\t\t\tconst p = Promise.all(promises).then(() => {\n\t\t\t\tassert(!delayer.isTriggered());\n\t\t\t});\n\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\treturn p;\n\t\t});\n\t});\n\n\tsuite('sequence', () => {\n\t\ttest('simple', () => {\n\t\t\tconst factoryFactory = (n: number) => () => {\n\t\t\t\treturn Promise.resolve(n);\n\t\t\t};\n\n\t\t\treturn async.sequence([\n\t\t\t\tfactoryFactory(1),\n\t\t\t\tfactoryFactory(2),\n\t\t\t\tfactoryFactory(3),\n\t\t\t\tfactoryFactory(4),\n\t\t\t\tfactoryFactory(5),\n\t\t\t]).then((result) => {\n\t\t\t\tassert.strictEqual(5, result.length);\n\t\t\t\tassert.strictEqual(1, result[0]);\n\t\t\t\tassert.strictEqual(2, result[1]);\n\t\t\t\tassert.strictEqual(3, result[2]);\n\t\t\t\tassert.strictEqual(4, result[3]);\n\t\t\t\tassert.strictEqual(5, result[4]);\n\t\t\t});\n\t\t});\n\t});\n\n\tsuite('Limiter', () => {\n\t\ttest('assert degree of paralellism', function () {\n\t\t\tlet activePromises = 0;\n\t\t\tconst factoryFactory = (n: number) => () => {\n\t\t\t\tactivePromises++;\n\t\t\t\tassert(activePromises < 6);\n\t\t\t\treturn async.timeout(0).then(() => { activePromises--; return n; });\n\t\t\t};\n\n\t\t\tconst limiter = new async.Limiter(5);\n\n\t\t\tconst promises: Promise<any>[] = [];\n\t\t\t[0, 1, 2, 3, 4, 5, 6, 7, 8, 9].forEach(n => promises.push(limiter.queue(factoryFactory(n))));\n\n\t\t\treturn Promise.all(promises).then((res) => {\n\t\t\t\tassert.strictEqual(10, res.length);\n\t\t\t\tassert.deepStrictEqual([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], res);\n\t\t\t});\n\t\t});\n\t});\n\n\n\tsuite('Queue', () => {\n\t\ttest('simple', function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tlet syncPromise = false;\n\t\t\tconst f1 = () => Promise.resolve(true).then(() => syncPromise = true);\n\n\t\t\tlet asyncPromise = false;\n\t\t\tconst f2 = () => async.timeout(10).then(() => asyncPromise = true);\n\n\t\t\tassert.strictEqual(queue.size, 0);\n\n\t\t\tqueue.queue(f1);\n\t\t\tassert.strictEqual(queue.size, 1);\n\n\t\t\tconst p = queue.queue(f2);\n\t\t\tassert.strictEqual(queue.size, 2);\n\t\t\treturn p.then(() => {\n\t\t\t\tassert.strictEqual(queue.size, 0);\n\t\t\t\tassert.ok(syncPromise);\n\t\t\t\tassert.ok(asyncPromise);\n\t\t\t});\n\t\t});\n\n\t\ttest('stop processing on dispose', async function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tlet workCounter = 0;\n\t\t\tconst task = async () => {\n\t\t\t\tawait async.timeout(0);\n\t\t\t\tworkCounter++;\n\t\t\t\tqueue.dispose(); // DISPOSE HERE\n\t\t\t};\n\n\t\t\tconst p1 = queue.queue(task);\n\t\t\tqueue.queue(task);\n\t\t\tqueue.queue(task);\n\t\t\tassert.strictEqual(queue.size, 3);\n\n\n\t\t\tawait p1;\n\n\t\t\tassert.strictEqual(workCounter, 1);\n\t\t});\n\n\t\ttest('stop on clear', async function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tlet workCounter = 0;\n\t\t\tconst task = async () => {\n\t\t\t\tawait async.timeout(0);\n\t\t\t\tworkCounter++;\n\t\t\t\tqueue.clear(); // CLEAR HERE\n\t\t\t\tassert.strictEqual(queue.size, 1); // THIS task is still running\n\t\t\t};\n\n\t\t\tconst p1 = queue.queue(task);\n\t\t\tqueue.queue(task);\n\t\t\tqueue.queue(task);\n\t\t\tassert.strictEqual(queue.size, 3);\n\n\t\t\tawait p1;\n\t\t\tassert.strictEqual(workCounter, 1);\n\t\t\tassert.strictEqual(queue.size, 0); // has been cleared\n\n\n\t\t\tconst p2 = queue.queue(task);\n\t\t\tawait p2;\n\t\t\tassert.strictEqual(workCounter, 2);\n\t\t});\n\n\t\ttest('clear and drain (1)', async function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tlet workCounter = 0;\n\t\t\tconst task = async () => {\n\t\t\t\tawait async.timeout(0);\n\t\t\t\tworkCounter++;\n\t\t\t\tqueue.clear(); // CLEAR HERE\n\t\t\t};\n\n\t\t\tconst p0 = Event.toPromise(queue.onDrained);\n\t\t\tconst p1 = queue.queue(task);\n\n\t\t\tawait p1;\n\t\t\tawait p0; // expect drain to fire because a task was running\n\t\t\tassert.strictEqual(workCounter, 1);\n\t\t\tqueue.dispose();\n\t\t});\n\n\t\ttest('clear and drain (2)', async function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tlet didFire = false;\n\t\t\tconst d = queue.onDrained(() => {\n\t\t\t\tdidFire = true;\n\t\t\t});\n\n\t\t\tqueue.clear();\n\n\t\t\tassert.strictEqual(didFire, false); // no work, no drain!\n\t\t\td.dispose();\n\t\t\tqueue.dispose();\n\t\t});\n\n\t\ttest('drain timing', async function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tconst logicClock = new class {\n\t\t\t\tprivate time = 0;\n\t\t\t\ttick() {\n\t\t\t\t\treturn this.time++;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tlet didDrainTime = 0;\n\t\t\tlet didFinishTime1 = 0;\n\t\t\tlet didFinishTime2 = 0;\n\t\t\tconst d = queue.onDrained(() => {\n\t\t\t\tdidDrainTime = logicClock.tick();\n\t\t\t});\n\n\t\t\tconst p1 = queue.queue(() => {\n\t\t\t\t// await async.timeout(10);\n\t\t\t\tdidFinishTime1 = logicClock.tick();\n\t\t\t\treturn Promise.resolve();\n\t\t\t});\n\n\t\t\tconst p2 = queue.queue(async () => {\n\t\t\t\tawait async.timeout(10);\n\t\t\t\tdidFinishTime2 = logicClock.tick();\n\t\t\t});\n\n\n\t\t\tawait Promise.all([p1, p2]);\n\n\t\t\tassert.strictEqual(didFinishTime1, 0);\n\t\t\tassert.strictEqual(didFinishTime2, 1);\n\t\t\tassert.strictEqual(didDrainTime, 2);\n\n\t\t\td.dispose();\n\t\t\tqueue.dispose();\n\t\t});\n\n\t\ttest('drain event is send only once', async function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tlet drainCount = 0;\n\t\t\tconst d = queue.onDrained(() => { drainCount++; });\n\t\t\tqueue.queue(async () => { });\n\t\t\tqueue.queue(async () => { });\n\t\t\tqueue.queue(async () => { });\n\t\t\tqueue.queue(async () => { });\n\t\t\tassert.strictEqual(drainCount, 0);\n\t\t\tassert.strictEqual(queue.size, 4);\n\n\t\t\tawait queue.whenIdle();\n\n\t\t\tassert.strictEqual(drainCount, 1);\n\n\t\t\td.dispose();\n\t\t\tqueue.dispose();\n\t\t});\n\n\t\ttest('order is kept', function () {\n\t\t\treturn runWithFakedTimers({}, () => {\n\t\t\t\tconst queue = new async.Queue();\n\n\t\t\t\tconst res: number[] = [];\n\n\t\t\t\tconst f1 = () => Promise.resolve(true).then(() => res.push(1));\n\t\t\t\tconst f2 = () => async.timeout(10).then(() => res.push(2));\n\t\t\t\tconst f3 = () => Promise.resolve(true).then(() => res.push(3));\n\t\t\t\tconst f4 = () => async.timeout(20).then(() => res.push(4));\n\t\t\t\tconst f5 = () => async.timeout(0).then(() => res.push(5));\n\n\t\t\t\tqueue.queue(f1);\n\t\t\t\tqueue.queue(f2);\n\t\t\t\tqueue.queue(f3);\n\t\t\t\tqueue.queue(f4);\n\t\t\t\treturn queue.queue(f5).then(() => {\n\t\t\t\t\tassert.strictEqual(res[0], 1);\n\t\t\t\t\tassert.strictEqual(res[1], 2);\n\t\t\t\t\tassert.strictEqual(res[2], 3);\n\t\t\t\t\tassert.strictEqual(res[3], 4);\n\t\t\t\t\tassert.strictEqual(res[4], 5);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\ttest('errors bubble individually but not cause stop', function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tconst res: number[] = [];\n\t\t\tlet error = false;\n\n\t\t\tconst f1 = () => Promise.resolve(true).then(() => res.push(1));\n\t\t\tconst f2 = () => async.timeout(10).then(() => res.push(2));\n\t\t\tconst f3 = () => Promise.resolve(true).then(() => Promise.reject(new Error('error')));\n\t\t\tconst f4 = () => async.timeout(20).then(() => res.push(4));\n\t\t\tconst f5 = () => async.timeout(0).then(() => res.push(5));\n\n\t\t\tqueue.queue(f1);\n\t\t\tqueue.queue(f2);\n\t\t\tqueue.queue(f3).then(undefined, () => error = true);\n\t\t\tqueue.queue(f4);\n\t\t\treturn queue.queue(f5).then(() => {\n\t\t\t\tassert.strictEqual(res[0], 1);\n\t\t\t\tassert.strictEqual(res[1], 2);\n\t\t\t\tassert.ok(error);\n\t\t\t\tassert.strictEqual(res[2], 4);\n\t\t\t\tassert.strictEqual(res[3], 5);\n\t\t\t});\n\t\t});\n\n\t\ttest('order is kept (chained)', function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tconst res: number[] = [];\n\n\t\t\tconst f1 = () => Promise.resolve(true).then(() => res.push(1));\n\t\t\tconst f2 = () => async.timeout(10).then(() => res.push(2));\n\t\t\tconst f3 = () => Promise.resolve(true).then(() => res.push(3));\n\t\t\tconst f4 = () => async.timeout(20).then(() => res.push(4));\n\t\t\tconst f5 = () => async.timeout(0).then(() => res.push(5));\n\n\t\t\treturn queue.queue(f1).then(() => {\n\t\t\t\treturn queue.queue(f2).then(() => {\n\t\t\t\t\treturn queue.queue(f3).then(() => {\n\t\t\t\t\t\treturn queue.queue(f4).then(() => {\n\t\t\t\t\t\t\treturn queue.queue(f5).then(() => {\n\t\t\t\t\t\t\t\tassert.strictEqual(res[0], 1);\n\t\t\t\t\t\t\t\tassert.strictEqual(res[1], 2);\n\t\t\t\t\t\t\t\tassert.strictEqual(res[2], 3);\n\t\t\t\t\t\t\t\tassert.strictEqual(res[3], 4);\n\t\t\t\t\t\t\t\tassert.strictEqual(res[4], 5);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\ttest('events', async function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tlet drained = false;\n\t\t\tconst onDrained = Event.toPromise(queue.onDrained).then(() => drained = true);\n\n\t\t\tconst res: number[] = [];\n\n\t\t\tconst f1 = () => async.timeout(10).then(() => res.push(2));\n\t\t\tconst f2 = () => async.timeout(20).then(() => res.push(4));\n\t\t\tconst f3 = () => async.timeout(0).then(() => res.push(5));\n\n\t\t\tconst q1 = queue.queue(f1);\n\t\t\tconst q2 = queue.queue(f2);\n\t\t\tqueue.queue(f3);\n\n\t\t\tq1.then(() => {\n\t\t\t\tassert.ok(!drained);\n\t\t\t\tq2.then(() => {\n\t\t\t\t\tassert.ok(!drained);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tawait onDrained;\n\t\t\tassert.ok(drained);\n\t\t});\n\t});\n\n\tsuite('ResourceQueue', () => {\n\t\ttest('simple', async function () {\n\t\t\tconst queue = new async.ResourceQueue();\n\n\t\t\tawait queue.whenDrained(); // returns immediately since empty\n\n\t\t\tlet done1 = false;\n\t\t\tqueue.queueFor(URI.file('/some/path'), async () => { done1 = true; });\n\t\t\tawait queue.whenDrained(); // returns immediately since no work scheduled\n\t\t\tassert.strictEqual(done1, true);\n\n\t\t\tlet done2 = false;\n\t\t\tqueue.queueFor(URI.file('/some/other/path'), async () => { done2 = true; });\n\t\t\tawait queue.whenDrained(); // returns immediately since no work scheduled\n\t\t\tassert.strictEqual(done2, true);\n\n\t\t\t// schedule some work\n\t\t\tconst w1 = new async.DeferredPromise<void>();\n\t\t\tqueue.queueFor(URI.file('/some/path'), () => w1.p);\n\n\t\t\tlet drained = false;\n\t\t\tqueue.whenDrained().then(() => drained = true);\n\t\t\tassert.strictEqual(drained, false);\n\t\t\tawait w1.complete();\n\t\t\tawait async.timeout(0);\n\t\t\tassert.strictEqual(drained, true);\n\n\t\t\t// schedule some work\n\t\t\tconst w2 = new async.DeferredPromise<void>();\n\t\t\tconst w3 = new async.DeferredPromise<void>();\n\t\t\tqueue.queueFor(URI.file('/some/path'), () => w2.p);\n\t\t\tqueue.queueFor(URI.file('/some/other/path'), () => w3.p);\n\n\t\t\tdrained = false;\n\t\t\tqueue.whenDrained().then(() => drained = true);\n\n\t\t\tqueue.dispose();\n\t\t\tawait async.timeout(0);\n\t\t\tassert.strictEqual(drained, true);\n\t\t});\n\t});\n\n\tsuite('retry', () => {\n\t\ttest('success case', async () => {\n\t\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\t\tlet counter = 0;\n\n\t\t\t\tconst res = await async.retry(() => {\n\t\t\t\t\tcounter++;\n\t\t\t\t\tif (counter < 2) {\n\t\t\t\t\t\treturn Promise.reject(new Error('fail'));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.resolve(true);\n\t\t\t\t}, 10, 3);\n\n\t\t\t\tassert.strictEqual(res, true);\n\t\t\t});\n\t\t});\n\n\t\ttest('error case', async () => {\n\t\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\t\tconst expectedError = new Error('fail');\n\t\t\t\ttry {\n\t\t\t\t\tawait async.retry(() => {\n\t\t\t\t\t\treturn Promise.reject(expectedError);\n\t\t\t\t\t}, 10, 3);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tassert.strictEqual(error, error);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n\n\tsuite('TaskSequentializer', () => {\n\t\ttest('execution basics', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tassert.ok(!sequentializer.isRunning());\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t\tassert.ok(!sequentializer.isRunning(2323));\n\t\t\tassert.ok(!sequentializer.running);\n\n\t\t\t// pending removes itself after done\n\t\t\tawait sequentializer.run(1, Promise.resolve());\n\t\t\tassert.ok(!sequentializer.isRunning());\n\t\t\tassert.ok(!sequentializer.isRunning(1));\n\t\t\tassert.ok(!sequentializer.running);\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\n\t\t\t// pending removes itself after done (use async.timeout)\n\t\t\tsequentializer.run(2, async.timeout(1));\n\t\t\tassert.ok(sequentializer.isRunning());\n\t\t\tassert.ok(sequentializer.isRunning(2));\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t\tassert.strictEqual(sequentializer.isRunning(1), false);\n\t\t\tassert.ok(sequentializer.running);\n\n\t\t\tawait async.timeout(2);\n\t\t\tassert.strictEqual(sequentializer.isRunning(), false);\n\t\t\tassert.strictEqual(sequentializer.isRunning(2), false);\n\t\t\tassert.ok(!sequentializer.running);\n\t\t});\n\n\t\ttest('executing and queued (finishes instantly)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tlet pendingDone = false;\n\t\t\tsequentializer.run(1, async.timeout(1).then(() => { pendingDone = true; return; }));\n\n\t\t\t// queued finishes instantly\n\t\t\tlet queuedDone = false;\n\t\t\tconst res = sequentializer.queue(() => Promise.resolve(null).then(() => { queuedDone = true; return; }));\n\n\t\t\tassert.ok(sequentializer.hasQueued());\n\n\t\t\tawait res;\n\t\t\tassert.ok(pendingDone);\n\t\t\tassert.ok(queuedDone);\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t});\n\n\t\ttest('executing and queued (finishes after timeout)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tlet pendingDone = false;\n\t\t\tsequentializer.run(1, async.timeout(1).then(() => { pendingDone = true; return; }));\n\n\t\t\t// queued finishes after async.timeout\n\t\t\tlet queuedDone = false;\n\t\t\tconst res = sequentializer.queue(() => async.timeout(1).then(() => { queuedDone = true; return; }));\n\n\t\t\tawait res;\n\t\t\tassert.ok(pendingDone);\n\t\t\tassert.ok(queuedDone);\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t});\n\n\t\ttest('join (without executing or queued)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tawait sequentializer.join();\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t});\n\n\t\ttest('join (without queued)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tlet pendingDone = false;\n\t\t\tsequentializer.run(1, async.timeout(1).then(() => { pendingDone = true; return; }));\n\n\t\t\tawait sequentializer.join();\n\t\t\tassert.ok(pendingDone);\n\t\t\tassert.ok(!sequentializer.isRunning());\n\t\t});\n\n\t\ttest('join (with executing and queued)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tlet pendingDone = false;\n\t\t\tsequentializer.run(1, async.timeout(1).then(() => { pendingDone = true; return; }));\n\n\t\t\t// queued finishes after async.timeout\n\t\t\tlet queuedDone = false;\n\t\t\tsequentializer.queue(() => async.timeout(1).then(() => { queuedDone = true; return; }));\n\n\t\t\tawait sequentializer.join();\n\t\t\tassert.ok(pendingDone);\n\t\t\tassert.ok(queuedDone);\n\t\t\tassert.ok(!sequentializer.isRunning());\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t});\n\n\t\ttest('executing and multiple queued (last one wins)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tlet pendingDone = false;\n\t\t\tsequentializer.run(1, async.timeout(1).then(() => { pendingDone = true; return; }));\n\n\t\t\t// queued finishes after async.timeout\n\t\t\tlet firstDone = false;\n\t\t\tconst firstRes = sequentializer.queue(() => async.timeout(2).then(() => { firstDone = true; return; }));\n\n\t\t\tlet secondDone = false;\n\t\t\tconst secondRes = sequentializer.queue(() => async.timeout(3).then(() => { secondDone = true; return; }));\n\n\t\t\tlet thirdDone = false;\n\t\t\tconst thirdRes = sequentializer.queue(() => async.timeout(4).then(() => { thirdDone = true; return; }));\n\n\t\t\tawait Promise.all([firstRes, secondRes, thirdRes]);\n\t\t\tassert.ok(pendingDone);\n\t\t\tassert.ok(!firstDone);\n\t\t\tassert.ok(!secondDone);\n\t\t\tassert.ok(thirdDone);\n\t\t});\n\n\t\ttest('cancel executing', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\t\t\tconst ctsTimeout = store.add(new CancellationTokenSource());\n\n\t\t\tlet pendingCancelled = false;\n\t\t\tconst timeout = async.timeout(1, ctsTimeout.token);\n\t\t\tsequentializer.run(1, timeout, () => pendingCancelled = true);\n\t\t\tsequentializer.cancelRunning();\n\n\t\t\tassert.ok(pendingCancelled);\n\t\t\tctsTimeout.cancel();\n\t\t});\n\t});\n\n\tsuite('disposableTimeout', () => {\n\t\ttest('handler only success', async () => {\n\t\t\tlet cb = false;\n\t\t\tconst t = async.disposableTimeout(() => cb = true);\n\n\t\t\tawait async.timeout(0);\n\n\t\t\tassert.strictEqual(cb, true);\n\n\t\t\tt.dispose();\n\t\t});\n\n\t\ttest('handler only cancel', async () => {\n\t\t\tlet cb = false;\n\t\t\tconst t = async.disposableTimeout(() => cb = true);\n\t\t\tt.dispose();\n\n\t\t\tawait async.timeout(0);\n\n\t\t\tassert.strictEqual(cb, false);\n\t\t});\n\n\t\ttest('store managed success', async () => {\n\t\t\tlet cb = false;\n\t\t\tconst s = new DisposableStore();\n\t\t\tasync.disposableTimeout(() => cb = true, 0, s);\n\n\t\t\tawait async.timeout(0);\n\n\t\t\tassert.strictEqual(cb, true);\n\n\t\t\ts.dispose();\n\t\t});\n\n\t\ttest('store managed cancel via disposable', async () => {\n\t\t\tlet cb = false;\n\t\t\tconst s = new DisposableStore();\n\t\t\tconst t = async.disposableTimeout(() => cb = true, 0, s);\n\t\t\tt.dispose();\n\n\t\t\tawait async.timeout(0);\n\n\t\t\tassert.strictEqual(cb, false);\n\n\t\t\ts.dispose();\n\t\t});\n\n\t\ttest('store managed cancel via store', async () => {\n\t\t\tlet cb = false;\n\t\t\tconst s = new DisposableStore();\n\t\t\tasync.disposableTimeout(() => cb = true, 0, s);\n\t\t\ts.dispose();\n\n\t\t\tawait async.timeout(0);\n\n\t\t\tassert.strictEqual(cb, false);\n\t\t});\n\t});\n\n\ttest('raceCancellation', async () => {\n\t\tconst cts = store.add(new CancellationTokenSource());\n\t\tconst ctsTimeout = store.add(new CancellationTokenSource());\n\n\t\tlet triggered = false;\n\t\tconst timeout = async.timeout(100, ctsTimeout.token);\n\t\tconst p = async.raceCancellation(timeout.then(() => triggered = true), cts.token);\n\t\tcts.cancel();\n\n\t\tawait p;\n\n\t\tassert.ok(!triggered);\n\t\tctsTimeout.cancel();\n\t});\n\n\ttest('raceTimeout', async () => {\n\t\tconst cts = store.add(new CancellationTokenSource());\n\n\t\t// timeout wins\n\t\tlet timedout = false;\n\t\tlet triggered = false;\n\n\t\tconst ctsTimeout1 = store.add(new CancellationTokenSource());\n\t\tconst timeout1 = async.timeout(100, ctsTimeout1.token);\n\t\tconst p1 = async.raceTimeout(timeout1.then(() => triggered = true), 1, () => timedout = true);\n\t\tcts.cancel();\n\n\t\tawait p1;\n\n\t\tassert.ok(!triggered);\n\t\tassert.strictEqual(timedout, true);\n\t\tctsTimeout1.cancel();\n\n\t\t// promise wins\n\t\ttimedout = false;\n\n\t\tconst ctsTimeout2 = store.add(new CancellationTokenSource());\n\t\tconst timeout2 = async.timeout(1, ctsTimeout2.token);\n\t\tconst p2 = async.raceTimeout(timeout2.then(() => triggered = true), 100, () => timedout = true);\n\t\tcts.cancel();\n\n\t\tawait p2;\n\n\t\tassert.ok(triggered);\n\t\tassert.strictEqual(timedout, false);\n\t\tctsTimeout2.cancel();\n\t});\n\n\ttest('SequencerByKey', async () => {\n\t\tconst s = new async.SequencerByKey<string>();\n\n\t\tconst r1 = await s.queue('key1', () => Promise.resolve('hello'));\n\t\tassert.strictEqual(r1, 'hello');\n\n\t\tawait s.queue('key2', () => Promise.reject(new Error('failed'))).then(() => {\n\t\t\tthrow new Error('should not be resolved');\n\t\t}, err => {\n\t\t\t// Expected error\n\t\t\tassert.strictEqual(err.message, 'failed');\n\t\t});\n\n\t\t// Still works after a queued promise is rejected\n\t\tconst r3 = await s.queue('key2', () => Promise.resolve('hello'));\n\t\tassert.strictEqual(r3, 'hello');\n\t});\n\n\ttest('IntervalCounter', async () => {\n\t\tlet now = 0;\n\t\tconst counter = new async.IntervalCounter(5, () => now);\n\n\t\tassert.strictEqual(counter.increment(), 1);\n\t\tassert.strictEqual(counter.increment(), 2);\n\t\tassert.strictEqual(counter.increment(), 3);\n\n\t\tnow = 10;\n\n\t\tassert.strictEqual(counter.increment(), 1);\n\t\tassert.strictEqual(counter.increment(), 2);\n\t\tassert.strictEqual(counter.increment(), 3);\n\t});\n\n\tsuite('firstParallel', () => {\n\t\ttest('simple', async () => {\n\t\t\tconst a = await async.firstParallel([\n\t\t\t\tPromise.resolve(1),\n\t\t\t\tPromise.resolve(2),\n\t\t\t\tPromise.resolve(3),\n\t\t\t], v => v === 2);\n\t\t\tassert.strictEqual(a, 2);\n\t\t});\n\n\t\ttest('uses null default', async () => {\n\t\t\tassert.strictEqual(await async.firstParallel([Promise.resolve(1)], v => v === 2), null);\n\t\t});\n\n\t\ttest('uses value default', async () => {\n\t\t\tassert.strictEqual(await async.firstParallel([Promise.resolve(1)], v => v === 2, 4), 4);\n\t\t});\n\n\t\ttest('empty', async () => {\n\t\t\tassert.strictEqual(await async.firstParallel([], v => v === 2, 4), 4);\n\t\t});\n\n\t\ttest('cancels', async () => {\n\t\t\tlet ct1: CancellationToken;\n\t\t\tconst p1 = async.createCancelablePromise(async (ct) => {\n\t\t\t\tct1 = ct;\n\t\t\t\tawait async.timeout(200, ct);\n\t\t\t\treturn 1;\n\t\t\t});\n\t\t\tlet ct2: CancellationToken;\n\t\t\tconst p2 = async.createCancelablePromise(async (ct) => {\n\t\t\t\tct2 = ct;\n\t\t\t\tawait async.timeout(2, ct);\n\t\t\t\treturn 2;\n\t\t\t});\n\n\t\t\tassert.strictEqual(await async.firstParallel([p1, p2], v => v === 2, 4), 2);\n\t\t\tassert.strictEqual(ct1!.isCancellationRequested, true, 'should cancel a');\n\t\t\tassert.strictEqual(ct2!.isCancellationRequested, true, 'should cancel b');\n\t\t});\n\n\t\ttest('rejection handling', async () => {\n\t\t\tlet ct1: CancellationToken;\n\t\t\tconst p1 = async.createCancelablePromise(async (ct) => {\n\t\t\t\tct1 = ct;\n\t\t\t\tawait async.timeout(200, ct);\n\t\t\t\treturn 1;\n\t\t\t});\n\t\t\tlet ct2: CancellationToken;\n\t\t\tconst p2 = async.createCancelablePromise(async (ct) => {\n\t\t\t\tct2 = ct;\n\t\t\t\tawait async.timeout(2, ct);\n\t\t\t\tthrow new Error('oh no');\n\t\t\t});\n\n\t\t\tassert.strictEqual(await async.firstParallel([p1, p2], v => v === 2, 4).catch(() => 'ok'), 'ok');\n\t\t\tassert.strictEqual(ct1!.isCancellationRequested, true, 'should cancel a');\n\t\t\tassert.strictEqual(ct2!.isCancellationRequested, true, 'should cancel b');\n\t\t});\n\t});\n\n\tsuite('DeferredPromise', () => {\n\t\ttest('resolves', async () => {\n\t\t\tconst deferred = new async.DeferredPromise<number>();\n\t\t\tassert.strictEqual(deferred.isResolved, false);\n\t\t\tdeferred.complete(42);\n\t\t\tassert.strictEqual(await deferred.p, 42);\n\t\t\tassert.strictEqual(deferred.isResolved, true);\n\t\t});\n\n\t\ttest('rejects', async () => {\n\t\t\tconst deferred = new async.DeferredPromise<number>();\n\t\t\tassert.strictEqual(deferred.isRejected, false);\n\t\t\tconst err = new Error('oh no!');\n\t\t\tdeferred.error(err);\n\t\t\tassert.strictEqual(await deferred.p.catch(e => e), err);\n\t\t\tassert.strictEqual(deferred.isRejected, true);\n\t\t});\n\n\t\ttest('cancels', async () => {\n\t\t\tconst deferred = new async.DeferredPromise<number>();\n\t\t\tassert.strictEqual(deferred.isRejected, false);\n\t\t\tdeferred.cancel();\n\t\t\tassert.strictEqual((await deferred.p.catch(e => e)).name, 'Canceled');\n\t\t\tassert.strictEqual(deferred.isRejected, true);\n\t\t});\n\n\t\ttest('retains the original settled value', async () => {\n\t\t\tconst deferred = new async.DeferredPromise<number>();\n\t\t\tassert.strictEqual(deferred.isResolved, false);\n\t\t\tassert.strictEqual(deferred.value, undefined);\n\n\t\t\tdeferred.complete(42);\n\t\t\tassert.strictEqual(await deferred.p, 42);\n\t\t\tassert.strictEqual(deferred.value, 42);\n\t\t\tassert.strictEqual(deferred.isResolved, true);\n\n\t\t\tdeferred.complete(-1);\n\t\t\tassert.strictEqual(await deferred.p, 42);\n\t\t\tassert.strictEqual(deferred.value, 42);\n\t\t\tassert.strictEqual(deferred.isResolved, true);\n\t\t});\n\t});\n\n\tsuite('Promises.settled', () => {\n\t\ttest('resolves', async () => {\n\t\t\tconst p1 = Promise.resolve(1);\n\t\t\tconst p2 = async.timeout(1).then(() => 2);\n\t\t\tconst p3 = async.timeout(2).then(() => 3);\n\n\t\t\tconst result = await async.Promises.settled<number>([p1, p2, p3]);\n\n\t\t\tassert.strictEqual(result.length, 3);\n\t\t\tassert.deepStrictEqual(result[0], 1);\n\t\t\tassert.deepStrictEqual(result[1], 2);\n\t\t\tassert.deepStrictEqual(result[2], 3);\n\t\t});\n\n\t\ttest('resolves in order', async () => {\n\t\t\tconst p1 = async.timeout(2).then(() => 1);\n\t\t\tconst p2 = async.timeout(1).then(() => 2);\n\t\t\tconst p3 = Promise.resolve(3);\n\n\t\t\tconst result = await async.Promises.settled<number>([p1, p2, p3]);\n\n\t\t\tassert.strictEqual(result.length, 3);\n\t\t\tassert.deepStrictEqual(result[0], 1);\n\t\t\tassert.deepStrictEqual(result[1], 2);\n\t\t\tassert.deepStrictEqual(result[2], 3);\n\t\t});\n\n\t\ttest('rejects with first error but handles all promises (all errors)', async () => {\n\t\t\tconst p1 = Promise.reject(1);\n\n\t\t\tlet p2Handled = false;\n\t\t\tconst p2Error = new Error('2');\n\t\t\tconst p2 = async.timeout(1).then(() => {\n\t\t\t\tp2Handled = true;\n\t\t\t\tthrow p2Error;\n\t\t\t});\n\n\t\t\tlet p3Handled = false;\n\t\t\tconst p3Error = new Error('3');\n\t\t\tconst p3 = async.timeout(2).then(() => {\n\t\t\t\tp3Handled = true;\n\t\t\t\tthrow p3Error;\n\t\t\t});\n\n\t\t\tlet error: Error | undefined = undefined;\n\t\t\ttry {\n\t\t\t\tawait async.Promises.settled<number>([p1, p2, p3]);\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\n\t\t\tassert.ok(error);\n\t\t\tassert.notStrictEqual(error, p2Error);\n\t\t\tassert.notStrictEqual(error, p3Error);\n\t\t\tassert.ok(p2Handled);\n\t\t\tassert.ok(p3Handled);\n\t\t});\n\n\t\ttest('rejects with first error but handles all promises (1 error)', async () => {\n\t\t\tconst p1 = Promise.resolve(1);\n\n\t\t\tlet p2Handled = false;\n\t\t\tconst p2Error = new Error('2');\n\t\t\tconst p2 = async.timeout(1).then(() => {\n\t\t\t\tp2Handled = true;\n\t\t\t\tthrow p2Error;\n\t\t\t});\n\n\t\t\tlet p3Handled = false;\n\t\t\tconst p3 = async.timeout(2).then(() => {\n\t\t\t\tp3Handled = true;\n\t\t\t\treturn 3;\n\t\t\t});\n\n\t\t\tlet error: Error | undefined = undefined;\n\t\t\ttry {\n\t\t\t\tawait async.Promises.settled<number>([p1, p2, p3]);\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\n\t\t\tassert.strictEqual(error, p2Error);\n\t\t\tassert.ok(p2Handled);\n\t\t\tassert.ok(p3Handled);\n\t\t});\n\t});\n\n\tsuite('Promises.withAsyncBody', () => {\n\t\ttest('basics', async () => {\n\n\t\t\tconst p1 = async.Promises.withAsyncBody(async (resolve, reject) => {\n\t\t\t\tresolve(1);\n\t\t\t});\n\n\t\t\tconst p2 = async.Promises.withAsyncBody(async (resolve, reject) => {\n\t\t\t\treject(new Error('error'));\n\t\t\t});\n\n\t\t\tconst p3 = async.Promises.withAsyncBody(async (resolve, reject) => {\n\t\t\t\tthrow new Error('error');\n\t\t\t});\n\n\t\t\tconst r1 = await p1;\n\t\t\tassert.strictEqual(r1, 1);\n\n\t\t\tlet e2: Error | undefined = undefined;\n\t\t\ttry {\n\t\t\t\tawait p2;\n\t\t\t} catch (error) {\n\t\t\t\te2 = error;\n\t\t\t}\n\n\t\t\tassert.ok(e2 instanceof Error);\n\n\t\t\tlet e3: Error | undefined = undefined;\n\t\t\ttry {\n\t\t\t\tawait p3;\n\t\t\t} catch (error) {\n\t\t\t\te3 = error;\n\t\t\t}\n\n\t\t\tassert.ok(e3 instanceof Error);\n\t\t});\n\t});\n\n\tsuite('ThrottledWorker', () => {\n\n\t\tfunction assertArrayEquals(actual: unknown[], expected: unknown[]) {\n\t\t\tassert.strictEqual(actual.length, expected.length);\n\n\t\t\tfor (let i = 0; i < actual.length; i++) {\n\t\t\t\tassert.strictEqual(actual[i], expected[i]);\n\t\t\t}\n\t\t}\n\n\t\ttest('basics', async () => {\n\t\t\tlet handled: number[] = [];\n\n\t\t\tlet handledCallback: Function;\n\t\t\tlet handledPromise = new Promise(resolve => handledCallback = resolve);\n\t\t\tlet handledCounterToResolve = 1;\n\t\t\tlet currentHandledCounter = 0;\n\n\t\t\tconst handler = (units: readonly number[]) => {\n\t\t\t\thandled.push(...units);\n\n\t\t\t\tcurrentHandledCounter++;\n\t\t\t\tif (currentHandledCounter === handledCounterToResolve) {\n\t\t\t\t\thandledCallback();\n\n\t\t\t\t\thandledPromise = new Promise(resolve => handledCallback = resolve);\n\t\t\t\t\tcurrentHandledCounter = 0;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst worker = store.add(new async.ThrottledWorker<number>({\n\t\t\t\tmaxWorkChunkSize: 5,\n\t\t\t\tmaxBufferedWork: undefined,\n\t\t\t\tthrottleDelay: 1\n\t\t\t}, handler));\n\n\t\t\t// Work less than chunk size\n\n\t\t\tlet worked = worker.work([1, 2, 3]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3]);\n\t\t\tassert.strictEqual(worker.pending, 0);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tworker.work([4, 5]);\n\t\t\tworked = worker.work([6]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6]);\n\t\t\tassert.strictEqual(worker.pending, 0);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\t// Work more than chunk size (variant 1)\n\n\t\t\thandled = [];\n\t\t\thandledCounterToResolve = 2;\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worker.pending, 2);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tawait handledPromise;\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6, 7]);\n\n\t\t\thandled = [];\n\t\t\thandledCounterToResolve = 4;\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worker.pending, 14);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tawait handledPromise;\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]);\n\n\t\t\t// Work more than chunk size (variant 2)\n\n\t\t\thandled = [];\n\t\t\thandledCounterToResolve = 2;\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worker.pending, 5);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tawait handledPromise;\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\n\n\t\t\t// Work more while throttled (variant 1)\n\n\t\t\thandled = [];\n\t\t\thandledCounterToResolve = 3;\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worker.pending, 2);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tworker.work([8]);\n\t\t\tworked = worker.work([9, 10, 11]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worker.pending, 6);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tawait handledPromise;\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]);\n\t\t\tassert.strictEqual(worker.pending, 0);\n\n\t\t\t// Work more while throttled (variant 2)\n\n\t\t\thandled = [];\n\t\t\thandledCounterToResolve = 2;\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tworker.work([8]);\n\t\t\tworked = worker.work([9, 10]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tawait handledPromise;\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\n\t\t});\n\n\t\ttest('do not accept too much work', async () => {\n\t\t\tconst handled: number[] = [];\n\t\t\tconst handler = (units: readonly number[]) => handled.push(...units);\n\n\t\t\tconst worker = store.add(new async.ThrottledWorker<number>({\n\t\t\t\tmaxWorkChunkSize: 5,\n\t\t\t\tmaxBufferedWork: 5,\n\t\t\t\tthrottleDelay: 1\n\t\t\t}, handler));\n\n\t\t\tlet worked = worker.work([1, 2, 3]);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6]);\n\t\t\tassert.strictEqual(worked, true);\n\t\t\tassert.strictEqual(worker.pending, 1);\n\n\t\t\tworked = worker.work([7]);\n\t\t\tassert.strictEqual(worked, true);\n\t\t\tassert.strictEqual(worker.pending, 2);\n\n\t\t\tworked = worker.work([8, 9, 10, 11]);\n\t\t\tassert.strictEqual(worked, false);\n\t\t\tassert.strictEqual(worker.pending, 2);\n\t\t});\n\n\t\ttest('do not accept too much work (account for max chunk size', async () => {\n\t\t\tconst handled: number[] = [];\n\t\t\tconst handler = (units: readonly number[]) => handled.push(...units);\n\n\t\t\tconst worker = store.add(new async.ThrottledWorker<number>({\n\t\t\t\tmaxWorkChunkSize: 5,\n\t\t\t\tmaxBufferedWork: 5,\n\t\t\t\tthrottleDelay: 1\n\t\t\t}, handler));\n\n\t\t\tlet worked = worker.work([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]);\n\t\t\tassert.strictEqual(worked, false);\n\t\t\tassert.strictEqual(worker.pending, 0);\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\n\t\t\tassert.strictEqual(worked, true);\n\t\t\tassert.strictEqual(worker.pending, 5);\n\t\t});\n\n\t\ttest('disposed', async () => {\n\t\t\tconst handled: number[] = [];\n\t\t\tconst handler = (units: readonly number[]) => handled.push(...units);\n\n\t\t\tconst worker = store.add(new async.ThrottledWorker<number>({\n\t\t\t\tmaxWorkChunkSize: 5,\n\t\t\t\tmaxBufferedWork: undefined,\n\t\t\t\tthrottleDelay: 1\n\t\t\t}, handler));\n\t\t\tworker.dispose();\n\t\t\tconst worked = worker.work([1, 2, 3]);\n\n\t\t\tassertArrayEquals(handled, []);\n\t\t\tassert.strictEqual(worker.pending, 0);\n\t\t\tassert.strictEqual(worked, false);\n\t\t});\n\n\t\t//  https://github.com/microsoft/vscode/issues/230366\n\t\t// \ttest('waitThrottleDelayBetweenWorkUnits option', async () => {\n\t\t// \t\tconst handled: number[] = [];\n\t\t// \t\tlet handledCallback: Function;\n\t\t// \t\tlet handledPromise = new Promise(resolve => handledCallback = resolve);\n\t\t// \t\tlet currentTime = 0;\n\n\t\t// \t\tconst handler = (units: readonly number[]) => {\n\t\t// \t\t\thandled.push(...units);\n\t\t// \t\t\thandledCallback();\n\t\t// \t\t\thandledPromise = new Promise(resolve => handledCallback = resolve);\n\t\t// \t\t};\n\n\t\t// \t\tconst worker = store.add(new async.ThrottledWorker<number>({\n\t\t// \t\t\tmaxWorkChunkSize: 5,\n\t\t// \t\t\tmaxBufferedWork: undefined,\n\t\t// \t\t\tthrottleDelay: 5,\n\t\t// \t\t\twaitThrottleDelayBetweenWorkUnits: true\n\t\t// \t\t}, handler));\n\n\t\t// \t\t// Schedule work, it should execute immediately\n\t\t// \t\tcurrentTime = Date.now();\n\t\t// \t\tlet worked = worker.work([1, 2, 3]);\n\t\t// \t\tassert.strictEqual(worked, true);\n\t\t// \t\tassertArrayEquals(handled, [1, 2, 3]);\n\t\t// \t\tassert.strictEqual(Date.now() - currentTime < 5, true);\n\n\t\t// \t\t// Schedule work again, it should wait at least throttle delay before executing\n\t\t// \t\tcurrentTime = Date.now();\n\t\t// \t\tworked = worker.work([4, 5]);\n\t\t// \t\tassert.strictEqual(worked, true);\n\t\t// \t\t// Throttle delay hasn't reset so we still must wait\n\t\t// \t\tassertArrayEquals(handled, [1, 2, 3]);\n\t\t// \t\tawait handledPromise;\n\t\t// \t\tassert.strictEqual(Date.now() - currentTime >= 5, true);\n\t\t// \t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t// \t});\n\t});\n\n\tsuite('LimitedQueue', () => {\n\n\t\ttest('basics (with long running task)', async () => {\n\t\t\tconst limitedQueue = new async.LimitedQueue();\n\n\t\t\tlet counter = 0;\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < 5; i++) {\n\t\t\t\tpromises.push(limitedQueue.queue(async () => {\n\t\t\t\t\tcounter = i;\n\t\t\t\t\tawait async.timeout(1);\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tawait Promise.all(promises);\n\n\t\t\t// only the last task executed\n\t\t\tassert.strictEqual(counter, 4);\n\t\t});\n\n\t\ttest('basics (with sync running task)', async () => {\n\t\t\tconst limitedQueue = new async.LimitedQueue();\n\n\t\t\tlet counter = 0;\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < 5; i++) {\n\t\t\t\tpromises.push(limitedQueue.queue(async () => {\n\t\t\t\t\tcounter = i;\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tawait Promise.all(promises);\n\n\t\t\t// only the last task executed\n\t\t\tassert.strictEqual(counter, 4);\n\t\t});\n\t});\n\n\tsuite('AsyncIterableObject', function () {\n\n\n\t\ttest('onReturn NOT called', async function () {\n\n\t\t\tlet calledOnReturn = false;\n\t\t\tconst iter = new async.AsyncIterableObject<number>(writer => {\n\t\t\t\twriter.emitMany([1, 2, 3, 4, 5]);\n\t\t\t}, () => {\n\t\t\t\tcalledOnReturn = true;\n\t\t\t});\n\n\t\t\tfor await (const item of iter) {\n\t\t\t\tassert.strictEqual(typeof item, 'number');\n\t\t\t}\n\n\t\t\tassert.strictEqual(calledOnReturn, false);\n\n\t\t});\n\n\t\ttest('onReturn called on break', async function () {\n\n\t\t\tlet calledOnReturn = false;\n\t\t\tconst iter = new async.AsyncIterableObject<number>(writer => {\n\t\t\t\twriter.emitMany([1, 2, 3, 4, 5]);\n\t\t\t}, () => {\n\t\t\t\tcalledOnReturn = true;\n\t\t\t});\n\n\t\t\tfor await (const item of iter) {\n\t\t\t\tassert.strictEqual(item, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tassert.strictEqual(calledOnReturn, true);\n\n\t\t});\n\n\t\ttest('onReturn called on return', async function () {\n\n\t\t\tlet calledOnReturn = false;\n\t\t\tconst iter = new async.AsyncIterableObject<number>(writer => {\n\t\t\t\twriter.emitMany([1, 2, 3, 4, 5]);\n\t\t\t}, () => {\n\t\t\t\tcalledOnReturn = true;\n\t\t\t});\n\n\t\t\tawait (async function test() {\n\t\t\t\tfor await (const item of iter) {\n\t\t\t\t\tassert.strictEqual(item, 1);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t})();\n\n\n\t\t\tassert.strictEqual(calledOnReturn, true);\n\n\t\t});\n\n\n\t\ttest('onReturn called on throwing', async function () {\n\n\t\t\tlet calledOnReturn = false;\n\t\t\tconst iter = new async.AsyncIterableObject<number>(writer => {\n\t\t\t\twriter.emitMany([1, 2, 3, 4, 5]);\n\t\t\t}, () => {\n\t\t\t\tcalledOnReturn = true;\n\t\t\t});\n\n\t\t\ttry {\n\t\t\t\tfor await (const item of iter) {\n\t\t\t\t\tassert.strictEqual(item, 1);\n\t\t\t\t\tthrow new Error();\n\t\t\t\t}\n\t\t\t} catch (e) {\n\n\t\t\t}\n\n\t\t\tassert.strictEqual(calledOnReturn, true);\n\t\t});\n\t});\n\n\tsuite('AsyncIterableSource', function () {\n\n\t\ttest('onReturn is wired up', async function () {\n\t\t\tlet calledOnReturn = false;\n\t\t\tconst source = new async.AsyncIterableSource<number>(() => { calledOnReturn = true; });\n\n\t\t\tsource.emitOne(1);\n\t\t\tsource.emitOne(2);\n\t\t\tsource.emitOne(3);\n\t\t\tsource.resolve();\n\n\t\t\tfor await (const item of source.asyncIterable) {\n\t\t\t\tassert.strictEqual(item, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tassert.strictEqual(calledOnReturn, true);\n\n\t\t});\n\n\t\ttest('onReturn is wired up 2', async function () {\n\t\t\tlet calledOnReturn = false;\n\t\t\tconst source = new async.AsyncIterableSource<number>(() => { calledOnReturn = true; });\n\n\t\t\tsource.emitOne(1);\n\t\t\tsource.emitOne(2);\n\t\t\tsource.emitOne(3);\n\t\t\tsource.resolve();\n\n\t\t\tfor await (const item of source.asyncIterable) {\n\t\t\t\tassert.strictEqual(typeof item, 'number');\n\t\t\t}\n\n\t\t\tassert.strictEqual(calledOnReturn, false);\n\t\t});\n\n\t\ttest('emitMany emits all items', async function () {\n\t\t\tconst source = new async.AsyncIterableSource<number>();\n\t\t\tconst values = [10, 20, 30, 40];\n\t\t\tsource.emitMany(values);\n\t\t\tsource.resolve();\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of source.asyncIterable) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, values);\n\t\t});\n\t});\n\n\tsuite('cancellableIterable', () => {\n\t\tlet cts: CancellationTokenSource;\n\t\tsetup(() => {\n\t\t\tcts = store.add(new CancellationTokenSource());\n\t\t});\n\n\t\ttest('should iterate through all values when not canceled', async function () {\n\t\t\tconst asyncIterable = {\n\t\t\t\tasync *[Symbol.asyncIterator]() {\n\t\t\t\t\tyield 'a';\n\t\t\t\t\tyield 'b';\n\t\t\t\t\tyield 'c';\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst cancelableIterable = async.cancellableIterable(asyncIterable, cts.token);\n\n\t\t\tconst result = await Iterable.asyncToArray(cancelableIterable);\n\t\t\tassert.deepStrictEqual(result, ['a', 'b', 'c']);\n\t\t});\n\n\t\ttest('should stop iteration immediately when cancelled before starting', async function () {\n\t\t\tconst values: string[] = [];\n\n\t\t\tconst asyncIterable = {\n\t\t\t\tasync *[Symbol.asyncIterator]() {\n\t\t\t\t\tvalues.push('iterator created');\n\t\t\t\t\tyield 'a';\n\t\t\t\t\tvalues.push('after a');\n\t\t\t\t\tyield 'b';\n\t\t\t\t\tvalues.push('after b');\n\t\t\t\t\tyield 'c';\n\t\t\t\t\tvalues.push('after c');\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Cancel before iteration starts\n\t\t\tcts.cancel();\n\t\t\tconst cancelableIterable = async.cancellableIterable(asyncIterable, cts.token);\n\n\t\t\tconst result = await Iterable.asyncToArray(cancelableIterable);\n\t\t\tassert.deepStrictEqual(result, []);\n\t\t\tassert.deepStrictEqual(values, []);\n\t\t});\n\n\t\ttest('should stop iteration when cancelled during iteration', async function () {\n\t\t\tconst cts = new CancellationTokenSource();\n\t\t\tconst deferredA = new async.DeferredPromise<void>();\n\t\t\tconst deferredB = new async.DeferredPromise<void>();\n\t\t\tconst deferredC = new async.DeferredPromise<void>();\n\n\t\t\tconst values: string[] = [];\n\n\t\t\tconst asyncIterable = {\n\t\t\t\tasync *[Symbol.asyncIterator]() {\n\t\t\t\t\tvalues.push('a yielded');\n\t\t\t\t\tyield 'a';\n\t\t\t\t\tawait deferredA.p;\n\n\t\t\t\t\tvalues.push('b yielded');\n\t\t\t\t\tyield 'b';\n\t\t\t\t\tawait deferredB.p;\n\n\t\t\t\t\tvalues.push('c yielded');\n\t\t\t\t\tyield 'c';\n\t\t\t\t\tawait deferredC.p;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfor await (const value of async.cancellableIterable(asyncIterable, cts.token)) {\n\t\t\t\tif (value === 'a') {\n\t\t\t\t\tdeferredA.complete();\n\t\t\t\t} else if (value === 'b') {\n\t\t\t\t\tcts.cancel();\n\t\t\t\t\tdeferredB.complete();\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error('Unexpected value');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(values, ['a yielded', 'b yielded']);\n\t\t});\n\n\t\ttest('should handle return method correctly', async function () {\n\t\t\tlet returnCalled = false;\n\t\t\tlet n = 0;\n\t\t\tconst asyncIterable = {\n\t\t\t\tasync *[Symbol.asyncIterator]() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tyield 'a'; n++;\n\t\t\t\t\t\tyield 'b'; n++;\n\t\t\t\t\t\tyield 'c'; n++;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\treturnCalled = true;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t};\n\n\t\t\t// Add a return method to the iterator\n\t\t\tconst originalIterable = asyncIterable[Symbol.asyncIterator]();\n\t\t\toriginalIterable.return = async function () {\n\t\t\t\treturnCalled = true;\n\t\t\t\treturn Promise.resolve({ done: true, value: undefined });\n\t\t\t};\n\n\t\t\t// Create a test-specific iterable with our mocked iterator\n\t\t\tconst testIterable = {\n\t\t\t\t[Symbol.asyncIterator]: () => originalIterable\n\t\t\t};\n\n\t\t\tfor await (const value of async.cancellableIterable(testIterable, cts.token)) {\n\t\t\t\tif (value === 'b') {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tassert.strictEqual(returnCalled, true);\n\t\t\tassert.strictEqual(n < 2, true);\n\t\t});\n\t});\n\n\n\tsuite('AsyncIterableProducer', () => {\n\t\ttest('emitOne produces single values', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\temitter.emitOne(2);\n\t\t\t\temitter.emitOne(3);\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3]);\n\t\t});\n\n\t\ttest('emitMany produces multiple values', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitMany([1, 2, 3]);\n\t\t\t\temitter.emitMany([4, 5]);\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3, 4, 5]);\n\t\t});\n\n\t\ttest('mixed emitOne and emitMany', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\temitter.emitMany([2, 3]);\n\t\t\t\temitter.emitOne(4);\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3, 4]);\n\t\t});\n\n\t\ttest('async executor with emitOne', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(async emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\tawait async.timeout(1);\n\t\t\t\temitter.emitOne(2);\n\t\t\t\tawait async.timeout(1);\n\t\t\t\temitter.emitOne(3);\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3]);\n\t\t});\n\n\t\ttest('async executor with emitMany', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(async emitter => {\n\t\t\t\temitter.emitMany([1, 2]);\n\t\t\t\tawait async.timeout(1);\n\t\t\t\temitter.emitMany([3, 4]);\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3, 4]);\n\t\t});\n\n\t\ttest('reject with error', async () => {\n\t\t\tconst expectedError = new Error('test error');\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\temitter.reject(expectedError);\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tlet caughtError: Error | undefined;\n\n\t\t\ttry {\n\t\t\t\tfor await (const item of producer) {\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tcaughtError = error as Error;\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1]);\n\t\t\tassert.strictEqual(caughtError, expectedError);\n\t\t});\n\n\t\ttest('async executor throws error', async () => {\n\t\t\tconst expectedError = new Error('executor error');\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(async emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\tthrow expectedError;\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tlet caughtError: Error | undefined;\n\n\t\t\ttry {\n\t\t\t\tfor await (const item of producer) {\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tcaughtError = error as Error;\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1]);\n\t\t\tassert.strictEqual(caughtError, expectedError);\n\t\t});\n\n\t\ttest('empty producer', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\t// Don't emit anything\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, []);\n\t\t});\n\n\t\ttest('async executor resolves without emitting', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(async emitter => {\n\t\t\t\tawait async.timeout(1);\n\t\t\t\t// Don't emit anything\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, []);\n\t\t});\n\n\t\ttest('multiple iterators on same producer', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitMany([1, 2, 3]);\n\t\t\t});\n\n\t\t\t// First iterator should consume all values\n\t\t\tconst result1: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult1.push(item);\n\t\t\t}\n\n\t\t\t// Second iterator should not see any values (already consumed)\n\t\t\tconst result2: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult2.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result1, [1, 2, 3]);\n\t\t\tassert.deepStrictEqual(result2, []);\n\t\t});\n\n\t\ttest('concurrent iteration', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(async emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\tawait async.timeout(1);\n\t\t\t\temitter.emitOne(2);\n\t\t\t\tawait async.timeout(1);\n\t\t\t\temitter.emitOne(3);\n\t\t\t});\n\n\t\t\tconst iterator1 = producer[Symbol.asyncIterator]();\n\t\t\tconst iterator2 = producer[Symbol.asyncIterator]();\n\n\t\t\t// Both iterators share the same underlying producer\n\t\t\tconst first1 = await iterator1.next();\n\t\t\tconst first2 = await iterator2.next();\n\t\t\tconst second1 = await iterator1.next();\n\t\t\tconst second2 = await iterator2.next();\n\n\t\t\t// Since they share the same producer, values are consumed in order\n\t\t\tassert.strictEqual(first1.value, 1);\n\t\t\tassert.strictEqual(first2.value, 2);\n\t\t\tassert.strictEqual(second1.value, 3);\n\t\t\tassert.strictEqual(second2.done, true);\n\t\t});\n\n\t\ttest('executor with promise return value', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\temitter.emitOne(2);\n\t\t\t\treturn Promise.resolve();\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1, 2]);\n\t\t});\n\n\t\ttest('executor with non-promise return value', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\temitter.emitOne(2);\n\t\t\t\treturn 'some value';\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1, 2]);\n\t\t});\n\n\t\ttest('emitMany with empty array', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\temitter.emitMany([]);\n\t\t\t\temitter.emitOne(2);\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1, 2]);\n\t\t});\n\n\t\ttest('reject immediately without emitting', async () => {\n\t\t\tconst expectedError = new Error('immediate error');\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.reject(expectedError);\n\t\t\t});\n\n\t\t\tlet caughtError: Error | undefined;\n\t\t\ttry {\n\t\t\t\tfor await (const _item of producer) {\n\t\t\t\t\tassert.fail('Should not iterate when rejected immediately');\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tcaughtError = error as Error;\n\t\t\t}\n\n\t\t\tassert.strictEqual(caughtError, expectedError);\n\t\t});\n\n\t\ttest('string values', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<string>(emitter => {\n\t\t\t\temitter.emitOne('hello');\n\t\t\t\temitter.emitMany(['world', 'test']);\n\t\t\t});\n\n\t\t\tconst result: string[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, ['hello', 'world', 'test']);\n\t\t});\n\n\t\ttest('object values', async () => {\n\t\t\tinterface TestObject {\n\t\t\t\tid: number;\n\t\t\t\tname: string;\n\t\t\t}\n\n\t\t\tconst producer = new async.AsyncIterableProducer<TestObject>(emitter => {\n\t\t\t\temitter.emitOne({ id: 1, name: 'first' });\n\t\t\t\temitter.emitMany([\n\t\t\t\t\t{ id: 2, name: 'second' },\n\t\t\t\t\t{ id: 3, name: 'third' }\n\t\t\t\t]);\n\t\t\t});\n\n\t\t\tconst result: TestObject[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{ id: 1, name: 'first' },\n\t\t\t\t{ id: 2, name: 'second' },\n\t\t\t\t{ id: 3, name: 'third' }\n\t\t\t]);\n\t\t});\n\n\t\ttest('tee - both iterators receive all values', async () => {\n\t\t\t// TODO: Implementation bug - executors don't await start(), causing producers to finalize early\n\t\t\tasync function* sourceGenerator() {\n\t\t\t\tyield 1;\n\t\t\t\tyield 2;\n\t\t\t\tyield 3;\n\t\t\t\tyield 4;\n\t\t\t\tyield 5;\n\t\t\t}\n\n\t\t\tconst [iter1, iter2] = async.AsyncIterableProducer.tee(sourceGenerator());\n\n\t\t\tconst result1: number[] = [];\n\t\t\tconst result2: number[] = [];\n\n\t\t\t// Consume both iterables concurrently\n\t\t\tawait Promise.all([\n\t\t\t\t(async () => {\n\t\t\t\t\tfor await (const item of iter1) {\n\t\t\t\t\t\tresult1.push(item);\n\t\t\t\t\t}\n\t\t\t\t})(),\n\t\t\t\t(async () => {\n\t\t\t\t\tfor await (const item of iter2) {\n\t\t\t\t\t\tresult2.push(item);\n\t\t\t\t\t}\n\t\t\t\t})()\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result1, [1, 2, 3, 4, 5]);\n\t\t\tassert.deepStrictEqual(result2, [1, 2, 3, 4, 5]);\n\t\t});\n\n\t\ttest('tee - sequential consumption', async () => {\n\t\t\t// TODO: Implementation bug - executors don't await start(), causing producers to finalize early\n\t\t\tconst source = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitMany([1, 2, 3]);\n\t\t\t});\n\n\t\t\tconst [iter1, iter2] = async.AsyncIterableProducer.tee(source);\n\n\t\t\t// Consume first iterator completely\n\t\t\tconst result1: number[] = [];\n\t\t\tfor await (const item of iter1) {\n\t\t\t\tresult1.push(item);\n\t\t\t}\n\n\t\t\t// Then consume second iterator\n\t\t\tconst result2: number[] = [];\n\t\t\tfor await (const item of iter2) {\n\t\t\t\tresult2.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result1, [1, 2, 3]);\n\t\t\tassert.deepStrictEqual(result2, [1, 2, 3]);\n\t\t});\n\n\t\ttest.skip('tee - empty source', async () => {\n\t\t\t// TODO: Implementation bug - executors don't await start(), causing producers to finalize early\n\t\t\tconst source = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\t// Emit nothing\n\t\t\t});\n\n\t\t\tconst [iter1, iter2] = async.AsyncIterableProducer.tee(source);\n\n\t\t\tconst result1: number[] = [];\n\t\t\tconst result2: number[] = [];\n\n\t\t\tawait Promise.all([\n\t\t\t\t(async () => {\n\t\t\t\t\tfor await (const item of iter1) {\n\t\t\t\t\t\tresult1.push(item);\n\t\t\t\t\t}\n\t\t\t\t})(),\n\t\t\t\t(async () => {\n\t\t\t\t\tfor await (const item of iter2) {\n\t\t\t\t\t\tresult2.push(item);\n\t\t\t\t\t}\n\t\t\t\t})()\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result1, []);\n\t\t\tassert.deepStrictEqual(result2, []);\n\t\t});\n\n\t\ttest.skip('tee - handles errors in source', async () => {\n\t\t\t// TODO: Implementation bug - executors don't await start(), causing producers to finalize early\n\t\t\tconst expectedError = new Error('source error');\n\t\t\tconst source = new async.AsyncIterableProducer<number>(async emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\temitter.emitOne(2);\n\t\t\t\tthrow expectedError;\n\t\t\t});\n\n\t\t\tconst [iter1, iter2] = async.AsyncIterableProducer.tee(source);\n\n\t\t\tlet error1: Error | undefined;\n\t\t\tlet error2: Error | undefined;\n\t\t\tconst result1: number[] = [];\n\t\t\tconst result2: number[] = [];\n\n\t\t\tawait Promise.all([\n\t\t\t\t(async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor await (const item of iter1) {\n\t\t\t\t\t\t\tresult1.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\terror1 = e as Error;\n\t\t\t\t\t}\n\t\t\t\t})(),\n\t\t\t\t(async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor await (const item of iter2) {\n\t\t\t\t\t\t\tresult2.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\terror2 = e as Error;\n\t\t\t\t\t}\n\t\t\t\t})()\n\t\t\t]);\n\n\t\t\t// Both iterators should have received the same values before error\n\t\t\tassert.deepStrictEqual(result1, [1, 2]);\n\t\t\tassert.deepStrictEqual(result2, [1, 2]);\n\n\t\t\t// Both should have received the error\n\t\t\tassert.strictEqual(error1, expectedError);\n\t\t\tassert.strictEqual(error2, expectedError);\n\t\t});\n\t});\n\n\tsuite('AsyncReader', () => {\n\t\tasync function* createAsyncIterator<T>(values: T[]): AsyncIterator<T> {\n\t\t\tfor (const value of values) {\n\t\t\t\tyield value;\n\t\t\t}\n\t\t}\n\n\t\tasync function* createDelayedAsyncIterator<T>(values: T[], delayMs: number = 1): AsyncIterator<T> {\n\t\t\tfor (const value of values) {\n\t\t\t\tawait async.timeout(delayMs);\n\t\t\t\tyield value;\n\t\t\t}\n\t\t}\n\n\t\ttest('read - basic functionality', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3]));\n\n\t\t\tassert.strictEqual(await reader.read(), 1);\n\t\t\tassert.strictEqual(await reader.read(), 2);\n\t\t\tassert.strictEqual(await reader.read(), 3);\n\t\t\tassert.strictEqual(await reader.read(), async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('read - empty iterator', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([]));\n\n\t\t\tassert.strictEqual(await reader.read(), async.AsyncReaderEndOfStream);\n\t\t\tassert.strictEqual(await reader.read(), async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('endOfStream property', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2]));\n\n\t\t\tassert.strictEqual(reader.endOfStream, false);\n\n\t\t\tawait reader.read(); // 1\n\t\t\tassert.strictEqual(reader.endOfStream, false);\n\n\t\t\tawait reader.read(); // 2\n\t\t\tassert.strictEqual(reader.endOfStream, false);\n\n\t\t\tawait reader.read(); // end\n\t\t\tassert.strictEqual(reader.endOfStream, true);\n\t\t});\n\n\t\ttest('peek - basic functionality', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3]));\n\n\t\t\tassert.strictEqual(await reader.peek(), 1);\n\t\t\tassert.strictEqual(await reader.peek(), 1); // Should return same value\n\t\t\tassert.strictEqual(await reader.read(), 1); // Should consume the peeked value\n\n\t\t\tassert.strictEqual(await reader.peek(), 2);\n\t\t\tassert.strictEqual(await reader.read(), 2);\n\t\t});\n\n\t\ttest('peek - empty iterator', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([]));\n\n\t\t\tassert.strictEqual(await reader.peek(), async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('readSyncOrThrow - throws when no data available', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1]));\n\n\t\t\t// Read the only item\n\t\t\tawait reader.read();\n\n\t\t\t// Should throw since no more data and not at end yet\n\t\t\tassert.throws(() => reader.readBufferedOrThrow());\n\t\t});\n\n\t\ttest('readSyncOrThrow - returns end of stream when at end', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([]));\n\n\t\t\t// Trigger end detection\n\t\t\tawait reader.read();\n\n\t\t\tassert.strictEqual(reader.readBufferedOrThrow(), async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('peekSyncOrThrow - with buffered data', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3]));\n\n\t\t\t// First peek to populate buffer\n\t\t\tawait reader.peek();\n\n\t\t\t// Should be able to peek sync now\n\t\t\tassert.strictEqual(reader.peekBufferedOrThrow(), 1);\n\t\t\tassert.strictEqual(reader.peekBufferedOrThrow(), 1); // Should return same value\n\t\t});\n\n\t\ttest('peekSyncOrThrow - throws when no data available', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1]));\n\n\t\t\t// Should throw since buffer is empty and we haven't loaded anything\n\t\t\tassert.throws(() => reader.peekBufferedOrThrow());\n\t\t});\n\n\t\ttest('peekSyncOrThrow - returns end of stream when at end', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([]));\n\n\t\t\t// Trigger end detection\n\t\t\tawait reader.peek();\n\n\t\t\tassert.strictEqual(reader.peekBufferedOrThrow(), async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('consumeToEnd - consumes all remaining data', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3, 4, 5]));\n\n\t\t\t// Read some data first\n\t\t\tassert.strictEqual(await reader.read(), 1);\n\t\t\tassert.strictEqual(await reader.read(), 2);\n\n\t\t\t// Consume the rest\n\t\t\tawait reader.consumeToEnd();\n\n\t\t\tassert.strictEqual(reader.endOfStream, true);\n\t\t\tassert.strictEqual(await reader.read(), async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('consumeToEnd - on empty reader', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([]));\n\n\t\t\tawait reader.consumeToEnd();\n\n\t\t\tassert.strictEqual(reader.endOfStream, true);\n\t\t});\n\n\t\ttest('readWhile - basic functionality', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3, 4, 5]));\n\t\t\tconst collected: number[] = [];\n\n\t\t\tawait reader.readWhile(\n\t\t\t\tvalue => value < 4,\n\t\t\t\tasync value => {\n\t\t\t\t\tcollected.push(value);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tassert.deepStrictEqual(collected, [1, 2, 3]);\n\n\t\t\t// Next read should return 4\n\t\t\tassert.strictEqual(await reader.read(), 4);\n\t\t});\n\n\t\ttest('readWhile - stops at end of stream', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3]));\n\t\t\tconst collected: number[] = [];\n\n\t\t\tawait reader.readWhile(\n\t\t\t\tvalue => value < 10, // Always true\n\t\t\t\tasync value => {\n\t\t\t\t\tcollected.push(value);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tassert.deepStrictEqual(collected, [1, 2, 3]);\n\t\t\tassert.strictEqual(reader.endOfStream, true);\n\t\t});\n\n\t\ttest('readWhile - empty iterator', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([]));\n\t\t\tconst collected: number[] = [];\n\n\t\t\tawait reader.readWhile(\n\t\t\t\tvalue => true,\n\t\t\t\tasync value => {\n\t\t\t\t\tcollected.push(value);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tassert.deepStrictEqual(collected, []);\n\t\t});\n\n\t\ttest('readWhile - predicate returns false immediately', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3]));\n\t\t\tconst collected: number[] = [];\n\n\t\t\tawait reader.readWhile(\n\t\t\t\tvalue => false, // Always false\n\t\t\t\tasync value => {\n\t\t\t\t\tcollected.push(value);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tassert.deepStrictEqual(collected, []);\n\n\t\t\t// First item should still be available\n\t\t\tassert.strictEqual(await reader.read(), 1);\n\t\t});\n\n\t\ttest('peekTimeout - with immediate data', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3]));\n\n\t\t\tconst result = await reader.peekTimeout(100);\n\t\t\tassert.strictEqual(result, 1);\n\t\t});\n\n\t\ttest('peekTimeout - with delayed data', async () => {\n\t\t\tconst reader = new async.AsyncReader(createDelayedAsyncIterator([1, 2, 3], 10));\n\n\t\t\tconst result = await reader.peekTimeout(50);\n\t\t\tassert.strictEqual(result, 1);\n\t\t});\n\n\t\ttest('peekTimeout - timeout occurs', async () => {\n\t\t\treturn runWithFakedTimers({}, async () => {\n\t\t\t\tconst reader = new async.AsyncReader(createDelayedAsyncIterator([1, 2, 3], 50));\n\n\t\t\t\tconst result = await reader.peekTimeout(10);\n\t\t\t\tassert.strictEqual(result, undefined);\n\n\t\t\t\tawait reader.consumeToEnd();\n\t\t\t});\n\t\t});\n\n\t\ttest('peekTimeout - empty iterator', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([]));\n\n\t\t\tconst result = await reader.peekTimeout(10);\n\t\t\tassert.strictEqual(result, async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('peekTimeout - after consuming all data', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1]));\n\n\t\t\tawait reader.consumeToEnd();\n\t\t\tconst result = await reader.peekTimeout(10);\n\t\t\tassert.strictEqual(result, async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('mixed operations - complex scenario', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]));\n\n\t\t\t// Peek first\n\t\t\tassert.strictEqual(await reader.peek(), 1);\n\n\t\t\t// Read some\n\t\t\tassert.strictEqual(await reader.read(), 1);\n\t\t\tassert.strictEqual(await reader.read(), 2);\n\n\t\t\t// Peek again\n\t\t\tassert.strictEqual(await reader.peek(), 3);\n\n\t\t\t// Read while\n\t\t\tconst collected: number[] = [];\n\t\t\tawait reader.readWhile(\n\t\t\t\tvalue => value <= 5,\n\t\t\t\tasync value => collected.push(value)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(collected, [3, 4, 5]);\n\n\t\t\t// Use sync operations\n\t\t\tassert.strictEqual(await reader.peek(), 6);\n\t\t\tassert.strictEqual(reader.peekBufferedOrThrow(), 6);\n\t\t\tassert.strictEqual(reader.readBufferedOrThrow(), 6);\n\n\t\t\t// Consume rest\n\t\t\tawait reader.consumeToEnd();\n\t\t\tassert.strictEqual(reader.endOfStream, true);\n\t\t});\n\n\t\ttest('string values', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator(['hello', 'world', 'test']));\n\n\t\t\tassert.strictEqual(await reader.read(), 'hello');\n\t\t\tassert.strictEqual(await reader.peek(), 'world');\n\t\t\tassert.strictEqual(await reader.read(), 'world');\n\t\t\tassert.strictEqual(await reader.read(), 'test');\n\t\t\tassert.strictEqual(await reader.read(), async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('object values', async () => {\n\t\t\tinterface TestObj {\n\t\t\t\tid: number;\n\t\t\t\tname: string;\n\t\t\t}\n\n\t\t\tconst objects: TestObj[] = [\n\t\t\t\t{ id: 1, name: 'first' },\n\t\t\t\t{ id: 2, name: 'second' },\n\t\t\t\t{ id: 3, name: 'third' }\n\t\t\t];\n\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator(objects));\n\n\t\t\tassert.deepStrictEqual(await reader.read(), { id: 1, name: 'first' });\n\t\t\tassert.deepStrictEqual(await reader.peek(), { id: 2, name: 'second' });\n\t\t\tassert.deepStrictEqual(await reader.read(), { id: 2, name: 'second' });\n\t\t});\n\n\t\ttest('concurrent operations', async () => {\n\t\t\tconst reader = new async.AsyncReader(createDelayedAsyncIterator([1, 2, 3], 5));\n\n\t\t\t// Start multiple operations concurrently\n\t\t\tconst peekPromise = reader.peek();\n\t\t\tconst readPromise = reader.read();\n\n\t\t\tconst [peekResult, readResult] = await Promise.all([peekPromise, readPromise]);\n\n\t\t\t// Both should return the same first value\n\t\t\tassert.strictEqual(peekResult, 1);\n\t\t\tassert.strictEqual(readResult, 1);\n\n\t\t\t// Next read should get the second value\n\t\t\tassert.strictEqual(await reader.read(), 2);\n\t\t});\n\n\t\ttest('buffer management - single extend buffer call', async () => {\n\t\t\tlet nextCallCount = 0;\n\t\t\tconst mockIterator: AsyncIterator<number> = {\n\t\t\t\tasync next() {\n\t\t\t\t\tnextCallCount++;\n\t\t\t\t\tif (nextCallCount === 1) {\n\t\t\t\t\t\tawait async.timeout(1);\n\t\t\t\t\t\treturn { value: 1, done: false };\n\t\t\t\t\t}\n\t\t\t\t\treturn { value: undefined, done: true };\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst reader = new async.AsyncReader(mockIterator);\n\n\t\t\t// Multiple concurrent operations should only trigger one extend buffer call\n\t\t\tconst promises = [\n\t\t\t\treader.peek(),\n\t\t\t\treader.peek(),\n\t\t\t\treader.read()\n\t\t\t];\n\n\t\t\tawait Promise.all(promises);\n\n\t\t\t// Should have called next() only once despite multiple concurrent operations\n\t\t\tassert.strictEqual(nextCallCount, 1);\n\t\t});\n\t});\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as async from '../../common/async.js';\nimport * as MicrotaskDelay from '../../common/symbols.js';\nimport { CancellationToken, CancellationTokenSource } from '../../common/cancellation.js';\nimport { isCancellationError } from '../../common/errors.js';\nimport { Event } from '../../common/event.js';\nimport { URI } from '../../common/uri.js';\nimport { runWithFakedTimers } from './timeTravelScheduler.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from './utils.js';\nimport { DisposableStore } from '../../common/lifecycle.js';\nimport { Iterable } from '../../common/iterator.js';\n\nsuite('Async', () => {\n\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuite('cancelablePromise', function () {\n\t\ttest('set token, don\\'t wait for inner promise', function () {\n\t\t\tlet canceled = 0;\n\t\t\tconst promise = async.createCancelablePromise(token => {\n\t\t\t\tstore.add(token.onCancellationRequested(_ => { canceled += 1; }));\n\t\t\t\treturn new Promise(resolve => { /*never*/ });\n\t\t\t});\n\t\t\tconst result = promise.then(_ => assert.ok(false), err => {\n\t\t\t\tassert.strictEqual(canceled, 1);\n\t\t\t\tassert.ok(isCancellationError(err));\n\t\t\t});\n\t\t\tpromise.cancel();\n\t\t\tpromise.cancel(); // cancel only once\n\t\t\treturn result;\n\t\t});\n\n\t\ttest('cancel despite inner promise being resolved', function () {\n\t\t\tlet canceled = 0;\n\t\t\tconst promise = async.createCancelablePromise(token => {\n\t\t\t\tstore.add(token.onCancellationRequested(_ => { canceled += 1; }));\n\t\t\t\treturn Promise.resolve(1234);\n\t\t\t});\n\t\t\tconst result = promise.then(_ => assert.ok(false), err => {\n\t\t\t\tassert.strictEqual(canceled, 1);\n\t\t\t\tassert.ok(isCancellationError(err));\n\t\t\t});\n\t\t\tpromise.cancel();\n\t\t\treturn result;\n\t\t});\n\n\t\ttest('cancel disposes result', function () {\n\n\t\t\tconst store = new DisposableStore();\n\n\t\t\tconst promise = async.createCancelablePromise(async token => {\n\t\t\t\treturn store;\n\t\t\t});\n\t\t\tpromise.then(_ => assert.ok(false), err => {\n\n\t\t\t\tassert.ok(isCancellationError(err));\n\t\t\t\tassert.ok(store.isDisposed);\n\t\t\t});\n\n\t\t\tpromise.cancel();\n\t\t});\n\n\t\t// Cancelling a sync cancelable promise will fire the cancelled token.\n\t\t// Also, every `then` callback runs in another execution frame.\n\t\ttest('execution order (sync)', function () {\n\t\t\tconst order: string[] = [];\n\n\t\t\tconst cancellablePromise = async.createCancelablePromise(token => {\n\t\t\t\torder.push('in callback');\n\t\t\t\tstore.add(token.onCancellationRequested(_ => order.push('cancelled')));\n\t\t\t\treturn Promise.resolve(1234);\n\t\t\t});\n\n\t\t\torder.push('afterCreate');\n\n\t\t\tconst promise = cancellablePromise\n\t\t\t\t.then(undefined, err => null)\n\t\t\t\t.then(() => order.push('finally'));\n\n\t\t\tcancellablePromise.cancel();\n\t\t\torder.push('afterCancel');\n\n\t\t\treturn promise.then(() => assert.deepStrictEqual(order, ['in callback', 'afterCreate', 'cancelled', 'afterCancel', 'finally']));\n\t\t});\n\n\t\t// Cancelling an async cancelable promise is just the same as a sync cancellable promise.\n\t\ttest('execution order (async)', function () {\n\t\t\tconst order: string[] = [];\n\n\t\t\tconst cancellablePromise = async.createCancelablePromise(token => {\n\t\t\t\torder.push('in callback');\n\t\t\t\tstore.add(token.onCancellationRequested(_ => order.push('cancelled')));\n\t\t\t\treturn new Promise(c => setTimeout(c.bind(1234), 0));\n\t\t\t});\n\n\t\t\torder.push('afterCreate');\n\n\t\t\tconst promise = cancellablePromise\n\t\t\t\t.then(undefined, err => null)\n\t\t\t\t.then(() => order.push('finally'));\n\n\t\t\tcancellablePromise.cancel();\n\t\t\torder.push('afterCancel');\n\n\t\t\treturn promise.then(() => assert.deepStrictEqual(order, ['in callback', 'afterCreate', 'cancelled', 'afterCancel', 'finally']));\n\t\t});\n\n\t\ttest('execution order (async with late listener)', async function () {\n\t\t\tconst order: string[] = [];\n\n\t\t\tconst cancellablePromise = async.createCancelablePromise(async token => {\n\t\t\t\torder.push('in callback');\n\n\t\t\t\tawait async.timeout(0);\n\t\t\t\tstore.add(token.onCancellationRequested(_ => order.push('cancelled')));\n\t\t\t\tcancellablePromise.cancel();\n\t\t\t\torder.push('afterCancel');\n\t\t\t});\n\n\t\t\torder.push('afterCreate');\n\n\t\t\tconst promise = cancellablePromise\n\t\t\t\t.then(undefined, err => null)\n\t\t\t\t.then(() => order.push('finally'));\n\n\t\t\treturn promise.then(() => assert.deepStrictEqual(order, ['in callback', 'afterCreate', 'cancelled', 'afterCancel', 'finally']));\n\t\t});\n\n\t\ttest('get inner result', async function () {\n\t\t\tconst promise = async.createCancelablePromise(token => {\n\t\t\t\treturn async.timeout(12).then(_ => 1234);\n\t\t\t});\n\n\t\t\tconst result = await promise;\n\t\t\tassert.strictEqual(result, 1234);\n\t\t});\n\t});\n\n\tsuite('Throttler', function () {\n\t\ttest('non async', function () {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst throttler = new async.Throttler();\n\n\t\t\treturn Promise.all([\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 1); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); })\n\t\t\t]).then(() => assert.strictEqual(count, 2));\n\t\t});\n\n\t\ttest('async', () => {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => async.timeout(0).then(() => ++count);\n\n\t\t\tconst throttler = new async.Throttler();\n\n\t\t\treturn Promise.all([\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 1); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); }),\n\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 2); })\n\t\t\t]).then(() => {\n\t\t\t\treturn Promise.all([\n\t\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 3); }),\n\t\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 4); }),\n\t\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 4); }),\n\t\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 4); }),\n\t\t\t\t\tthrottler.queue(factory).then((result) => { assert.strictEqual(result, 4); })\n\t\t\t\t]);\n\t\t\t});\n\t\t});\n\n\t\ttest('last factory should be the one getting called', function () {\n\t\t\tconst factoryFactory = (n: number) => () => {\n\t\t\t\treturn async.timeout(0).then(() => n);\n\t\t\t};\n\n\t\t\tconst throttler = new async.Throttler();\n\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tpromises.push(throttler.queue(factoryFactory(1)).then((n) => { assert.strictEqual(n, 1); }));\n\t\t\tpromises.push(throttler.queue(factoryFactory(2)).then((n) => { assert.strictEqual(n, 3); }));\n\t\t\tpromises.push(throttler.queue(factoryFactory(3)).then((n) => { assert.strictEqual(n, 3); }));\n\n\t\t\treturn Promise.all(promises);\n\t\t});\n\n\t\ttest('disposal after queueing', async () => {\n\t\t\tlet factoryCalls = 0;\n\t\t\tconst factory = async () => {\n\t\t\t\tfactoryCalls++;\n\t\t\t\treturn async.timeout(0);\n\t\t\t};\n\n\t\t\tconst throttler = new async.Throttler();\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tpromises.push(throttler.queue(factory));\n\t\t\tpromises.push(throttler.queue(factory));\n\t\t\tthrottler.dispose();\n\n\t\t\tawait Promise.all(promises);\n\t\t\tassert.strictEqual(factoryCalls, 1);\n\t\t});\n\n\t\ttest('disposal before queueing', async () => {\n\t\t\tlet factoryCalls = 0;\n\t\t\tconst factory = async () => {\n\t\t\t\tfactoryCalls++;\n\t\t\t\treturn async.timeout(0);\n\t\t\t};\n\n\t\t\tconst throttler = new async.Throttler();\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tthrottler.dispose();\n\t\t\tpromises.push(throttler.queue(factory));\n\n\t\t\ttry {\n\t\t\t\tawait Promise.all(promises);\n\t\t\t\tassert.fail('should fail');\n\t\t\t} catch (err) {\n\t\t\t\tassert.strictEqual(factoryCalls, 0);\n\t\t\t}\n\t\t});\n\t});\n\n\tsuite('Delayer', function () {\n\t\ttest('simple', () => {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(0);\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\treturn Promise.all(promises).then(() => {\n\t\t\t\tassert(!delayer.isTriggered());\n\t\t\t});\n\t\t});\n\n\t\ttest('microtask delay simple', () => {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(MicrotaskDelay.MicrotaskDelay);\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then((result) => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\treturn Promise.all(promises).then(() => {\n\t\t\t\tassert(!delayer.isTriggered());\n\t\t\t});\n\t\t});\n\n\t\tsuite('ThrottledDelayer', () => {\n\t\t\ttest('promise should resolve if disposed', async () => {\n\t\t\t\tconst throttledDelayer = new async.ThrottledDelayer<void>(100);\n\t\t\t\tconst promise = throttledDelayer.trigger(async () => { }, 0);\n\t\t\t\tthrottledDelayer.dispose();\n\n\t\t\t\ttry {\n\t\t\t\t\tawait promise;\n\t\t\t\t\tassert.fail('SHOULD NOT BE HERE');\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// OK\n\t\t\t\t}\n\t\t\t});\n\n\t\t\ttest('trigger after dispose throws', async () => {\n\t\t\t\tconst throttledDelayer = new async.ThrottledDelayer<void>(100);\n\t\t\t\tthrottledDelayer.dispose();\n\t\t\t\tawait assert.rejects(() => throttledDelayer.trigger(async () => { }, 0));\n\t\t\t});\n\t\t});\n\n\t\ttest('simple cancel', function () {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(0);\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tconst p = delayer.trigger(factory).then(() => {\n\t\t\t\tassert(false);\n\t\t\t}, () => {\n\t\t\t\tassert(true, 'yes, it was cancelled');\n\t\t\t});\n\n\t\t\tassert(delayer.isTriggered());\n\t\t\tdelayer.cancel();\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\treturn p;\n\t\t});\n\n\t\ttest('simple cancel microtask', function () {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(MicrotaskDelay.MicrotaskDelay);\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tconst p = delayer.trigger(factory).then(() => {\n\t\t\t\tassert(false);\n\t\t\t}, () => {\n\t\t\t\tassert(true, 'yes, it was cancelled');\n\t\t\t});\n\n\t\t\tassert(delayer.isTriggered());\n\t\t\tdelayer.cancel();\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\treturn p;\n\t\t});\n\n\t\ttest('cancel should cancel all calls to trigger', function () {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(0);\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then(undefined, () => { assert(true, 'yes, it was cancelled'); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then(undefined, () => { assert(true, 'yes, it was cancelled'); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factory).then(undefined, () => { assert(true, 'yes, it was cancelled'); }));\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\tdelayer.cancel();\n\n\t\t\treturn Promise.all(promises).then(() => {\n\t\t\t\tassert(!delayer.isTriggered());\n\t\t\t});\n\t\t});\n\n\t\ttest('trigger, cancel, then trigger again', function () {\n\t\t\tlet count = 0;\n\t\t\tconst factory = () => {\n\t\t\t\treturn Promise.resolve(++count);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(0);\n\t\t\tlet promises: Promise<any>[] = [];\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tconst p = delayer.trigger(factory).then((result) => {\n\t\t\t\tassert.strictEqual(result, 1);\n\t\t\t\tassert(!delayer.isTriggered());\n\n\t\t\t\tpromises.push(delayer.trigger(factory).then(undefined, () => { assert(true, 'yes, it was cancelled'); }));\n\t\t\t\tassert(delayer.isTriggered());\n\n\t\t\t\tpromises.push(delayer.trigger(factory).then(undefined, () => { assert(true, 'yes, it was cancelled'); }));\n\t\t\t\tassert(delayer.isTriggered());\n\n\t\t\t\tdelayer.cancel();\n\n\t\t\t\tconst p = Promise.all(promises).then(() => {\n\t\t\t\t\tpromises = [];\n\n\t\t\t\t\tassert(!delayer.isTriggered());\n\n\t\t\t\t\tpromises.push(delayer.trigger(factory).then(() => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\t\t\tassert(delayer.isTriggered());\n\n\t\t\t\t\tpromises.push(delayer.trigger(factory).then(() => { assert.strictEqual(result, 1); assert(!delayer.isTriggered()); }));\n\t\t\t\t\tassert(delayer.isTriggered());\n\n\t\t\t\t\tconst p = Promise.all(promises).then(() => {\n\t\t\t\t\t\tassert(!delayer.isTriggered());\n\t\t\t\t\t});\n\n\t\t\t\t\tassert(delayer.isTriggered());\n\n\t\t\t\t\treturn p;\n\t\t\t\t});\n\n\t\t\t\treturn p;\n\t\t\t});\n\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\treturn p;\n\t\t});\n\n\t\ttest('last task should be the one getting called', function () {\n\t\t\tconst factoryFactory = (n: number) => () => {\n\t\t\t\treturn Promise.resolve(n);\n\t\t\t};\n\n\t\t\tconst delayer = new async.Delayer(0);\n\t\t\tconst promises: Promise<any>[] = [];\n\n\t\t\tassert(!delayer.isTriggered());\n\n\t\t\tpromises.push(delayer.trigger(factoryFactory(1)).then((n) => { assert.strictEqual(n, 3); }));\n\t\t\tpromises.push(delayer.trigger(factoryFactory(2)).then((n) => { assert.strictEqual(n, 3); }));\n\t\t\tpromises.push(delayer.trigger(factoryFactory(3)).then((n) => { assert.strictEqual(n, 3); }));\n\n\t\t\tconst p = Promise.all(promises).then(() => {\n\t\t\t\tassert(!delayer.isTriggered());\n\t\t\t});\n\n\t\t\tassert(delayer.isTriggered());\n\n\t\t\treturn p;\n\t\t});\n\t});\n\n\tsuite('sequence', () => {\n\t\ttest('simple', () => {\n\t\t\tconst factoryFactory = (n: number) => () => {\n\t\t\t\treturn Promise.resolve(n);\n\t\t\t};\n\n\t\t\treturn async.sequence([\n\t\t\t\tfactoryFactory(1),\n\t\t\t\tfactoryFactory(2),\n\t\t\t\tfactoryFactory(3),\n\t\t\t\tfactoryFactory(4),\n\t\t\t\tfactoryFactory(5),\n\t\t\t]).then((result) => {\n\t\t\t\tassert.strictEqual(5, result.length);\n\t\t\t\tassert.strictEqual(1, result[0]);\n\t\t\t\tassert.strictEqual(2, result[1]);\n\t\t\t\tassert.strictEqual(3, result[2]);\n\t\t\t\tassert.strictEqual(4, result[3]);\n\t\t\t\tassert.strictEqual(5, result[4]);\n\t\t\t});\n\t\t});\n\t});\n\n\tsuite('Limiter', () => {\n\t\ttest('assert degree of paralellism', function () {\n\t\t\tlet activePromises = 0;\n\t\t\tconst factoryFactory = (n: number) => () => {\n\t\t\t\tactivePromises++;\n\t\t\t\tassert(activePromises < 6);\n\t\t\t\treturn async.timeout(0).then(() => { activePromises--; return n; });\n\t\t\t};\n\n\t\t\tconst limiter = new async.Limiter(5);\n\n\t\t\tconst promises: Promise<any>[] = [];\n\t\t\t[0, 1, 2, 3, 4, 5, 6, 7, 8, 9].forEach(n => promises.push(limiter.queue(factoryFactory(n))));\n\n\t\t\treturn Promise.all(promises).then((res) => {\n\t\t\t\tassert.strictEqual(10, res.length);\n\t\t\t\tassert.deepStrictEqual([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], res);\n\t\t\t});\n\t\t});\n\t});\n\n\n\tsuite('Queue', () => {\n\t\ttest('simple', function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tlet syncPromise = false;\n\t\t\tconst f1 = () => Promise.resolve(true).then(() => syncPromise = true);\n\n\t\t\tlet asyncPromise = false;\n\t\t\tconst f2 = () => async.timeout(10).then(() => asyncPromise = true);\n\n\t\t\tassert.strictEqual(queue.size, 0);\n\n\t\t\tqueue.queue(f1);\n\t\t\tassert.strictEqual(queue.size, 1);\n\n\t\t\tconst p = queue.queue(f2);\n\t\t\tassert.strictEqual(queue.size, 2);\n\t\t\treturn p.then(() => {\n\t\t\t\tassert.strictEqual(queue.size, 0);\n\t\t\t\tassert.ok(syncPromise);\n\t\t\t\tassert.ok(asyncPromise);\n\t\t\t});\n\t\t});\n\n\t\ttest('stop processing on dispose', async function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tlet workCounter = 0;\n\t\t\tconst task = async () => {\n\t\t\t\tawait async.timeout(0);\n\t\t\t\tworkCounter++;\n\t\t\t\tqueue.dispose(); // DISPOSE HERE\n\t\t\t};\n\n\t\t\tconst p1 = queue.queue(task);\n\t\t\tqueue.queue(task);\n\t\t\tqueue.queue(task);\n\t\t\tassert.strictEqual(queue.size, 3);\n\n\n\t\t\tawait p1;\n\n\t\t\tassert.strictEqual(workCounter, 1);\n\t\t});\n\n\t\ttest('stop on clear', async function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tlet workCounter = 0;\n\t\t\tconst task = async () => {\n\t\t\t\tawait async.timeout(0);\n\t\t\t\tworkCounter++;\n\t\t\t\tqueue.clear(); // CLEAR HERE\n\t\t\t\tassert.strictEqual(queue.size, 1); // THIS task is still running\n\t\t\t};\n\n\t\t\tconst p1 = queue.queue(task);\n\t\t\tqueue.queue(task);\n\t\t\tqueue.queue(task);\n\t\t\tassert.strictEqual(queue.size, 3);\n\n\t\t\tawait p1;\n\t\t\tassert.strictEqual(workCounter, 1);\n\t\t\tassert.strictEqual(queue.size, 0); // has been cleared\n\n\n\t\t\tconst p2 = queue.queue(task);\n\t\t\tawait p2;\n\t\t\tassert.strictEqual(workCounter, 2);\n\t\t});\n\n\t\ttest('clear and drain (1)', async function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tlet workCounter = 0;\n\t\t\tconst task = async () => {\n\t\t\t\tawait async.timeout(0);\n\t\t\t\tworkCounter++;\n\t\t\t\tqueue.clear(); // CLEAR HERE\n\t\t\t};\n\n\t\t\tconst p0 = Event.toPromise(queue.onDrained);\n\t\t\tconst p1 = queue.queue(task);\n\n\t\t\tawait p1;\n\t\t\tawait p0; // expect drain to fire because a task was running\n\t\t\tassert.strictEqual(workCounter, 1);\n\t\t\tqueue.dispose();\n\t\t});\n\n\t\ttest('clear and drain (2)', async function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tlet didFire = false;\n\t\t\tconst d = queue.onDrained(() => {\n\t\t\t\tdidFire = true;\n\t\t\t});\n\n\t\t\tqueue.clear();\n\n\t\t\tassert.strictEqual(didFire, false); // no work, no drain!\n\t\t\td.dispose();\n\t\t\tqueue.dispose();\n\t\t});\n\n\t\ttest('drain timing', async function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tconst logicClock = new class {\n\t\t\t\tprivate time = 0;\n\t\t\t\ttick() {\n\t\t\t\t\treturn this.time++;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tlet didDrainTime = 0;\n\t\t\tlet didFinishTime1 = 0;\n\t\t\tlet didFinishTime2 = 0;\n\t\t\tconst d = queue.onDrained(() => {\n\t\t\t\tdidDrainTime = logicClock.tick();\n\t\t\t});\n\n\t\t\tconst p1 = queue.queue(() => {\n\t\t\t\t// await async.timeout(10);\n\t\t\t\tdidFinishTime1 = logicClock.tick();\n\t\t\t\treturn Promise.resolve();\n\t\t\t});\n\n\t\t\tconst p2 = queue.queue(async () => {\n\t\t\t\tawait async.timeout(10);\n\t\t\t\tdidFinishTime2 = logicClock.tick();\n\t\t\t});\n\n\n\t\t\tawait Promise.all([p1, p2]);\n\n\t\t\tassert.strictEqual(didFinishTime1, 0);\n\t\t\tassert.strictEqual(didFinishTime2, 1);\n\t\t\tassert.strictEqual(didDrainTime, 2);\n\n\t\t\td.dispose();\n\t\t\tqueue.dispose();\n\t\t});\n\n\t\ttest('drain event is send only once', async function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tlet drainCount = 0;\n\t\t\tconst d = queue.onDrained(() => { drainCount++; });\n\t\t\tqueue.queue(async () => { });\n\t\t\tqueue.queue(async () => { });\n\t\t\tqueue.queue(async () => { });\n\t\t\tqueue.queue(async () => { });\n\t\t\tassert.strictEqual(drainCount, 0);\n\t\t\tassert.strictEqual(queue.size, 4);\n\n\t\t\tawait queue.whenIdle();\n\n\t\t\tassert.strictEqual(drainCount, 1);\n\n\t\t\td.dispose();\n\t\t\tqueue.dispose();\n\t\t});\n\n\t\ttest('order is kept', function () {\n\t\t\treturn runWithFakedTimers({}, () => {\n\t\t\t\tconst queue = new async.Queue();\n\n\t\t\t\tconst res: number[] = [];\n\n\t\t\t\tconst f1 = () => Promise.resolve(true).then(() => res.push(1));\n\t\t\t\tconst f2 = () => async.timeout(10).then(() => res.push(2));\n\t\t\t\tconst f3 = () => Promise.resolve(true).then(() => res.push(3));\n\t\t\t\tconst f4 = () => async.timeout(20).then(() => res.push(4));\n\t\t\t\tconst f5 = () => async.timeout(0).then(() => res.push(5));\n\n\t\t\t\tqueue.queue(f1);\n\t\t\t\tqueue.queue(f2);\n\t\t\t\tqueue.queue(f3);\n\t\t\t\tqueue.queue(f4);\n\t\t\t\treturn queue.queue(f5).then(() => {\n\t\t\t\t\tassert.strictEqual(res[0], 1);\n\t\t\t\t\tassert.strictEqual(res[1], 2);\n\t\t\t\t\tassert.strictEqual(res[2], 3);\n\t\t\t\t\tassert.strictEqual(res[3], 4);\n\t\t\t\t\tassert.strictEqual(res[4], 5);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\ttest('errors bubble individually but not cause stop', function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tconst res: number[] = [];\n\t\t\tlet error = false;\n\n\t\t\tconst f1 = () => Promise.resolve(true).then(() => res.push(1));\n\t\t\tconst f2 = () => async.timeout(10).then(() => res.push(2));\n\t\t\tconst f3 = () => Promise.resolve(true).then(() => Promise.reject(new Error('error')));\n\t\t\tconst f4 = () => async.timeout(20).then(() => res.push(4));\n\t\t\tconst f5 = () => async.timeout(0).then(() => res.push(5));\n\n\t\t\tqueue.queue(f1);\n\t\t\tqueue.queue(f2);\n\t\t\tqueue.queue(f3).then(undefined, () => error = true);\n\t\t\tqueue.queue(f4);\n\t\t\treturn queue.queue(f5).then(() => {\n\t\t\t\tassert.strictEqual(res[0], 1);\n\t\t\t\tassert.strictEqual(res[1], 2);\n\t\t\t\tassert.ok(error);\n\t\t\t\tassert.strictEqual(res[2], 4);\n\t\t\t\tassert.strictEqual(res[3], 5);\n\t\t\t});\n\t\t});\n\n\t\ttest('order is kept (chained)', function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tconst res: number[] = [];\n\n\t\t\tconst f1 = () => Promise.resolve(true).then(() => res.push(1));\n\t\t\tconst f2 = () => async.timeout(10).then(() => res.push(2));\n\t\t\tconst f3 = () => Promise.resolve(true).then(() => res.push(3));\n\t\t\tconst f4 = () => async.timeout(20).then(() => res.push(4));\n\t\t\tconst f5 = () => async.timeout(0).then(() => res.push(5));\n\n\t\t\treturn queue.queue(f1).then(() => {\n\t\t\t\treturn queue.queue(f2).then(() => {\n\t\t\t\t\treturn queue.queue(f3).then(() => {\n\t\t\t\t\t\treturn queue.queue(f4).then(() => {\n\t\t\t\t\t\t\treturn queue.queue(f5).then(() => {\n\t\t\t\t\t\t\t\tassert.strictEqual(res[0], 1);\n\t\t\t\t\t\t\t\tassert.strictEqual(res[1], 2);\n\t\t\t\t\t\t\t\tassert.strictEqual(res[2], 3);\n\t\t\t\t\t\t\t\tassert.strictEqual(res[3], 4);\n\t\t\t\t\t\t\t\tassert.strictEqual(res[4], 5);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\ttest('events', async function () {\n\t\t\tconst queue = new async.Queue();\n\n\t\t\tlet drained = false;\n\t\t\tconst onDrained = Event.toPromise(queue.onDrained).then(() => drained = true);\n\n\t\t\tconst res: number[] = [];\n\n\t\t\tconst f1 = () => async.timeout(10).then(() => res.push(2));\n\t\t\tconst f2 = () => async.timeout(20).then(() => res.push(4));\n\t\t\tconst f3 = () => async.timeout(0).then(() => res.push(5));\n\n\t\t\tconst q1 = queue.queue(f1);\n\t\t\tconst q2 = queue.queue(f2);\n\t\t\tqueue.queue(f3);\n\n\t\t\tq1.then(() => {\n\t\t\t\tassert.ok(!drained);\n\t\t\t\tq2.then(() => {\n\t\t\t\t\tassert.ok(!drained);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tawait onDrained;\n\t\t\tassert.ok(drained);\n\t\t});\n\t});\n\n\tsuite('ResourceQueue', () => {\n\t\ttest('simple', async function () {\n\t\t\tconst queue = new async.ResourceQueue();\n\n\t\t\tawait queue.whenDrained(); // returns immediately since empty\n\n\t\t\tlet done1 = false;\n\t\t\tqueue.queueFor(URI.file('/some/path'), async () => { done1 = true; });\n\t\t\tawait queue.whenDrained(); // returns immediately since no work scheduled\n\t\t\tassert.strictEqual(done1, true);\n\n\t\t\tlet done2 = false;\n\t\t\tqueue.queueFor(URI.file('/some/other/path'), async () => { done2 = true; });\n\t\t\tawait queue.whenDrained(); // returns immediately since no work scheduled\n\t\t\tassert.strictEqual(done2, true);\n\n\t\t\t// schedule some work\n\t\t\tconst w1 = new async.DeferredPromise<void>();\n\t\t\tqueue.queueFor(URI.file('/some/path'), () => w1.p);\n\n\t\t\tlet drained = false;\n\t\t\tqueue.whenDrained().then(() => drained = true);\n\t\t\tassert.strictEqual(drained, false);\n\t\t\tawait w1.complete();\n\t\t\tawait async.timeout(0);\n\t\t\tassert.strictEqual(drained, true);\n\n\t\t\t// schedule some work\n\t\t\tconst w2 = new async.DeferredPromise<void>();\n\t\t\tconst w3 = new async.DeferredPromise<void>();\n\t\t\tqueue.queueFor(URI.file('/some/path'), () => w2.p);\n\t\t\tqueue.queueFor(URI.file('/some/other/path'), () => w3.p);\n\n\t\t\tdrained = false;\n\t\t\tqueue.whenDrained().then(() => drained = true);\n\n\t\t\tqueue.dispose();\n\t\t\tawait async.timeout(0);\n\t\t\tassert.strictEqual(drained, true);\n\t\t});\n\t});\n\n\tsuite('retry', () => {\n\t\ttest('success case', async () => {\n\t\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\t\tlet counter = 0;\n\n\t\t\t\tconst res = await async.retry(() => {\n\t\t\t\t\tcounter++;\n\t\t\t\t\tif (counter < 2) {\n\t\t\t\t\t\treturn Promise.reject(new Error('fail'));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.resolve(true);\n\t\t\t\t}, 10, 3);\n\n\t\t\t\tassert.strictEqual(res, true);\n\t\t\t});\n\t\t});\n\n\t\ttest('error case', async () => {\n\t\t\treturn runWithFakedTimers({ useFakeTimers: true }, async () => {\n\t\t\t\tconst expectedError = new Error('fail');\n\t\t\t\ttry {\n\t\t\t\t\tawait async.retry(() => {\n\t\t\t\t\t\treturn Promise.reject(expectedError);\n\t\t\t\t\t}, 10, 3);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tassert.strictEqual(error, error);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n\n\tsuite('TaskSequentializer', () => {\n\t\ttest('execution basics', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tassert.ok(!sequentializer.isRunning());\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t\tassert.ok(!sequentializer.isRunning(2323));\n\t\t\tassert.ok(!sequentializer.running);\n\n\t\t\t// pending removes itself after done\n\t\t\tawait sequentializer.run(1, Promise.resolve());\n\t\t\tassert.ok(!sequentializer.isRunning());\n\t\t\tassert.ok(!sequentializer.isRunning(1));\n\t\t\tassert.ok(!sequentializer.running);\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\n\t\t\t// pending removes itself after done (use async.timeout)\n\t\t\tsequentializer.run(2, async.timeout(1));\n\t\t\tassert.ok(sequentializer.isRunning());\n\t\t\tassert.ok(sequentializer.isRunning(2));\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t\tassert.strictEqual(sequentializer.isRunning(1), false);\n\t\t\tassert.ok(sequentializer.running);\n\n\t\t\tawait async.timeout(2);\n\t\t\tassert.strictEqual(sequentializer.isRunning(), false);\n\t\t\tassert.strictEqual(sequentializer.isRunning(2), false);\n\t\t\tassert.ok(!sequentializer.running);\n\t\t});\n\n\t\ttest('executing and queued (finishes instantly)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tlet pendingDone = false;\n\t\t\tsequentializer.run(1, async.timeout(1).then(() => { pendingDone = true; return; }));\n\n\t\t\t// queued finishes instantly\n\t\t\tlet queuedDone = false;\n\t\t\tconst res = sequentializer.queue(() => Promise.resolve(null).then(() => { queuedDone = true; return; }));\n\n\t\t\tassert.ok(sequentializer.hasQueued());\n\n\t\t\tawait res;\n\t\t\tassert.ok(pendingDone);\n\t\t\tassert.ok(queuedDone);\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t});\n\n\t\ttest('executing and queued (finishes after timeout)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tlet pendingDone = false;\n\t\t\tsequentializer.run(1, async.timeout(1).then(() => { pendingDone = true; return; }));\n\n\t\t\t// queued finishes after async.timeout\n\t\t\tlet queuedDone = false;\n\t\t\tconst res = sequentializer.queue(() => async.timeout(1).then(() => { queuedDone = true; return; }));\n\n\t\t\tawait res;\n\t\t\tassert.ok(pendingDone);\n\t\t\tassert.ok(queuedDone);\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t});\n\n\t\ttest('join (without executing or queued)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tawait sequentializer.join();\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t});\n\n\t\ttest('join (without queued)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tlet pendingDone = false;\n\t\t\tsequentializer.run(1, async.timeout(1).then(() => { pendingDone = true; return; }));\n\n\t\t\tawait sequentializer.join();\n\t\t\tassert.ok(pendingDone);\n\t\t\tassert.ok(!sequentializer.isRunning());\n\t\t});\n\n\t\ttest('join (with executing and queued)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tlet pendingDone = false;\n\t\t\tsequentializer.run(1, async.timeout(1).then(() => { pendingDone = true; return; }));\n\n\t\t\t// queued finishes after async.timeout\n\t\t\tlet queuedDone = false;\n\t\t\tsequentializer.queue(() => async.timeout(1).then(() => { queuedDone = true; return; }));\n\n\t\t\tawait sequentializer.join();\n\t\t\tassert.ok(pendingDone);\n\t\t\tassert.ok(queuedDone);\n\t\t\tassert.ok(!sequentializer.isRunning());\n\t\t\tassert.ok(!sequentializer.hasQueued());\n\t\t});\n\n\t\ttest('executing and multiple queued (last one wins)', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\n\t\t\tlet pendingDone = false;\n\t\t\tsequentializer.run(1, async.timeout(1).then(() => { pendingDone = true; return; }));\n\n\t\t\t// queued finishes after async.timeout\n\t\t\tlet firstDone = false;\n\t\t\tconst firstRes = sequentializer.queue(() => async.timeout(2).then(() => { firstDone = true; return; }));\n\n\t\t\tlet secondDone = false;\n\t\t\tconst secondRes = sequentializer.queue(() => async.timeout(3).then(() => { secondDone = true; return; }));\n\n\t\t\tlet thirdDone = false;\n\t\t\tconst thirdRes = sequentializer.queue(() => async.timeout(4).then(() => { thirdDone = true; return; }));\n\n\t\t\tawait Promise.all([firstRes, secondRes, thirdRes]);\n\t\t\tassert.ok(pendingDone);\n\t\t\tassert.ok(!firstDone);\n\t\t\tassert.ok(!secondDone);\n\t\t\tassert.ok(thirdDone);\n\t\t});\n\n\t\ttest('cancel executing', async function () {\n\t\t\tconst sequentializer = new async.TaskSequentializer();\n\t\t\tconst ctsTimeout = store.add(new CancellationTokenSource());\n\n\t\t\tlet pendingCancelled = false;\n\t\t\tconst timeout = async.timeout(1, ctsTimeout.token);\n\t\t\tsequentializer.run(1, timeout, () => pendingCancelled = true);\n\t\t\tsequentializer.cancelRunning();\n\n\t\t\tassert.ok(pendingCancelled);\n\t\t\tctsTimeout.cancel();\n\t\t});\n\t});\n\n\tsuite('disposableTimeout', () => {\n\t\ttest('handler only success', async () => {\n\t\t\tlet cb = false;\n\t\t\tconst t = async.disposableTimeout(() => cb = true);\n\n\t\t\tawait async.timeout(0);\n\n\t\t\tassert.strictEqual(cb, true);\n\n\t\t\tt.dispose();\n\t\t});\n\n\t\ttest('handler only cancel', async () => {\n\t\t\tlet cb = false;\n\t\t\tconst t = async.disposableTimeout(() => cb = true);\n\t\t\tt.dispose();\n\n\t\t\tawait async.timeout(0);\n\n\t\t\tassert.strictEqual(cb, false);\n\t\t});\n\n\t\ttest('store managed success', async () => {\n\t\t\tlet cb = false;\n\t\t\tconst s = new DisposableStore();\n\t\t\tasync.disposableTimeout(() => cb = true, 0, s);\n\n\t\t\tawait async.timeout(0);\n\n\t\t\tassert.strictEqual(cb, true);\n\n\t\t\ts.dispose();\n\t\t});\n\n\t\ttest('store managed cancel via disposable', async () => {\n\t\t\tlet cb = false;\n\t\t\tconst s = new DisposableStore();\n\t\t\tconst t = async.disposableTimeout(() => cb = true, 0, s);\n\t\t\tt.dispose();\n\n\t\t\tawait async.timeout(0);\n\n\t\t\tassert.strictEqual(cb, false);\n\n\t\t\ts.dispose();\n\t\t});\n\n\t\ttest('store managed cancel via store', async () => {\n\t\t\tlet cb = false;\n\t\t\tconst s = new DisposableStore();\n\t\t\tasync.disposableTimeout(() => cb = true, 0, s);\n\t\t\ts.dispose();\n\n\t\t\tawait async.timeout(0);\n\n\t\t\tassert.strictEqual(cb, false);\n\t\t});\n\t});\n\n\ttest('raceCancellation', async () => {\n\t\tconst cts = store.add(new CancellationTokenSource());\n\t\tconst ctsTimeout = store.add(new CancellationTokenSource());\n\n\t\tlet triggered = false;\n\t\tconst timeout = async.timeout(100, ctsTimeout.token);\n\t\tconst p = async.raceCancellation(timeout.then(() => triggered = true), cts.token);\n\t\tcts.cancel();\n\n\t\tawait p;\n\n\t\tassert.ok(!triggered);\n\t\tctsTimeout.cancel();\n\t});\n\n\ttest('raceTimeout', async () => {\n\t\tconst cts = store.add(new CancellationTokenSource());\n\n\t\t// timeout wins\n\t\tlet timedout = false;\n\t\tlet triggered = false;\n\n\t\tconst ctsTimeout1 = store.add(new CancellationTokenSource());\n\t\tconst timeout1 = async.timeout(100, ctsTimeout1.token);\n\t\tconst p1 = async.raceTimeout(timeout1.then(() => triggered = true), 1, () => timedout = true);\n\t\tcts.cancel();\n\n\t\tawait p1;\n\n\t\tassert.ok(!triggered);\n\t\tassert.strictEqual(timedout, true);\n\t\tctsTimeout1.cancel();\n\n\t\t// promise wins\n\t\ttimedout = false;\n\n\t\tconst ctsTimeout2 = store.add(new CancellationTokenSource());\n\t\tconst timeout2 = async.timeout(1, ctsTimeout2.token);\n\t\tconst p2 = async.raceTimeout(timeout2.then(() => triggered = true), 100, () => timedout = true);\n\t\tcts.cancel();\n\n\t\tawait p2;\n\n\t\tassert.ok(triggered);\n\t\tassert.strictEqual(timedout, false);\n\t\tctsTimeout2.cancel();\n\t});\n\n\ttest('SequencerByKey', async () => {\n\t\tconst s = new async.SequencerByKey<string>();\n\n\t\tconst r1 = await s.queue('key1', () => Promise.resolve('hello'));\n\t\tassert.strictEqual(r1, 'hello');\n\n\t\tawait s.queue('key2', () => Promise.reject(new Error('failed'))).then(() => {\n\t\t\tthrow new Error('should not be resolved');\n\t\t}, err => {\n\t\t\t// Expected error\n\t\t\tassert.strictEqual(err.message, 'failed');\n\t\t});\n\n\t\t// Still works after a queued promise is rejected\n\t\tconst r3 = await s.queue('key2', () => Promise.resolve('hello'));\n\t\tassert.strictEqual(r3, 'hello');\n\t});\n\n\ttest('IntervalCounter', async () => {\n\t\tlet now = 0;\n\t\tconst counter = new async.IntervalCounter(5, () => now);\n\n\t\tassert.strictEqual(counter.increment(), 1);\n\t\tassert.strictEqual(counter.increment(), 2);\n\t\tassert.strictEqual(counter.increment(), 3);\n\n\t\tnow = 10;\n\n\t\tassert.strictEqual(counter.increment(), 1);\n\t\tassert.strictEqual(counter.increment(), 2);\n\t\tassert.strictEqual(counter.increment(), 3);\n\t});\n\n\tsuite('firstParallel', () => {\n\t\ttest('simple', async () => {\n\t\t\tconst a = await async.firstParallel([\n\t\t\t\tPromise.resolve(1),\n\t\t\t\tPromise.resolve(2),\n\t\t\t\tPromise.resolve(3),\n\t\t\t], v => v === 2);\n\t\t\tassert.strictEqual(a, 2);\n\t\t});\n\n\t\ttest('uses null default', async () => {\n\t\t\tassert.strictEqual(await async.firstParallel([Promise.resolve(1)], v => v === 2), null);\n\t\t});\n\n\t\ttest('uses value default', async () => {\n\t\t\tassert.strictEqual(await async.firstParallel([Promise.resolve(1)], v => v === 2, 4), 4);\n\t\t});\n\n\t\ttest('empty', async () => {\n\t\t\tassert.strictEqual(await async.firstParallel([], v => v === 2, 4), 4);\n\t\t});\n\n\t\ttest('cancels', async () => {\n\t\t\tlet ct1: CancellationToken;\n\t\t\tconst p1 = async.createCancelablePromise(async (ct) => {\n\t\t\t\tct1 = ct;\n\t\t\t\tawait async.timeout(200, ct);\n\t\t\t\treturn 1;\n\t\t\t});\n\t\t\tlet ct2: CancellationToken;\n\t\t\tconst p2 = async.createCancelablePromise(async (ct) => {\n\t\t\t\tct2 = ct;\n\t\t\t\tawait async.timeout(2, ct);\n\t\t\t\treturn 2;\n\t\t\t});\n\n\t\t\tassert.strictEqual(await async.firstParallel([p1, p2], v => v === 2, 4), 2);\n\t\t\tassert.strictEqual(ct1!.isCancellationRequested, true, 'should cancel a');\n\t\t\tassert.strictEqual(ct2!.isCancellationRequested, true, 'should cancel b');\n\t\t});\n\n\t\ttest('rejection handling', async () => {\n\t\t\tlet ct1: CancellationToken;\n\t\t\tconst p1 = async.createCancelablePromise(async (ct) => {\n\t\t\t\tct1 = ct;\n\t\t\t\tawait async.timeout(200, ct);\n\t\t\t\treturn 1;\n\t\t\t});\n\t\t\tlet ct2: CancellationToken;\n\t\t\tconst p2 = async.createCancelablePromise(async (ct) => {\n\t\t\t\tct2 = ct;\n\t\t\t\tawait async.timeout(2, ct);\n\t\t\t\tthrow new Error('oh no');\n\t\t\t});\n\n\t\t\tassert.strictEqual(await async.firstParallel([p1, p2], v => v === 2, 4).catch(() => 'ok'), 'ok');\n\t\t\tassert.strictEqual(ct1!.isCancellationRequested, true, 'should cancel a');\n\t\t\tassert.strictEqual(ct2!.isCancellationRequested, true, 'should cancel b');\n\t\t});\n\t});\n\n\tsuite('DeferredPromise', () => {\n\t\ttest('resolves', async () => {\n\t\t\tconst deferred = new async.DeferredPromise<number>();\n\t\t\tassert.strictEqual(deferred.isResolved, false);\n\t\t\tdeferred.complete(42);\n\t\t\tassert.strictEqual(await deferred.p, 42);\n\t\t\tassert.strictEqual(deferred.isResolved, true);\n\t\t});\n\n\t\ttest('rejects', async () => {\n\t\t\tconst deferred = new async.DeferredPromise<number>();\n\t\t\tassert.strictEqual(deferred.isRejected, false);\n\t\t\tconst err = new Error('oh no!');\n\t\t\tdeferred.error(err);\n\t\t\tassert.strictEqual(await deferred.p.catch(e => e), err);\n\t\t\tassert.strictEqual(deferred.isRejected, true);\n\t\t});\n\n\t\ttest('cancels', async () => {\n\t\t\tconst deferred = new async.DeferredPromise<number>();\n\t\t\tassert.strictEqual(deferred.isRejected, false);\n\t\t\tdeferred.cancel();\n\t\t\tassert.strictEqual((await deferred.p.catch(e => e)).name, 'Canceled');\n\t\t\tassert.strictEqual(deferred.isRejected, true);\n\t\t});\n\n\t\ttest('retains the original settled value', async () => {\n\t\t\tconst deferred = new async.DeferredPromise<number>();\n\t\t\tassert.strictEqual(deferred.isResolved, false);\n\t\t\tassert.strictEqual(deferred.value, undefined);\n\n\t\t\tdeferred.complete(42);\n\t\t\tassert.strictEqual(await deferred.p, 42);\n\t\t\tassert.strictEqual(deferred.value, 42);\n\t\t\tassert.strictEqual(deferred.isResolved, true);\n\n\t\t\tdeferred.complete(-1);\n\t\t\tassert.strictEqual(await deferred.p, 42);\n\t\t\tassert.strictEqual(deferred.value, 42);\n\t\t\tassert.strictEqual(deferred.isResolved, true);\n\t\t});\n\t});\n\n\tsuite('Promises.settled', () => {\n\t\ttest('resolves', async () => {\n\t\t\tconst p1 = Promise.resolve(1);\n\t\t\tconst p2 = async.timeout(1).then(() => 2);\n\t\t\tconst p3 = async.timeout(2).then(() => 3);\n\n\t\t\tconst result = await async.Promises.settled<number>([p1, p2, p3]);\n\n\t\t\tassert.strictEqual(result.length, 3);\n\t\t\tassert.deepStrictEqual(result[0], 1);\n\t\t\tassert.deepStrictEqual(result[1], 2);\n\t\t\tassert.deepStrictEqual(result[2], 3);\n\t\t});\n\n\t\ttest('resolves in order', async () => {\n\t\t\tconst p1 = async.timeout(2).then(() => 1);\n\t\t\tconst p2 = async.timeout(1).then(() => 2);\n\t\t\tconst p3 = Promise.resolve(3);\n\n\t\t\tconst result = await async.Promises.settled<number>([p1, p2, p3]);\n\n\t\t\tassert.strictEqual(result.length, 3);\n\t\t\tassert.deepStrictEqual(result[0], 1);\n\t\t\tassert.deepStrictEqual(result[1], 2);\n\t\t\tassert.deepStrictEqual(result[2], 3);\n\t\t});\n\n\t\ttest('rejects with first error but handles all promises (all errors)', async () => {\n\t\t\tconst p1 = Promise.reject(1);\n\n\t\t\tlet p2Handled = false;\n\t\t\tconst p2Error = new Error('2');\n\t\t\tconst p2 = async.timeout(1).then(() => {\n\t\t\t\tp2Handled = true;\n\t\t\t\tthrow p2Error;\n\t\t\t});\n\n\t\t\tlet p3Handled = false;\n\t\t\tconst p3Error = new Error('3');\n\t\t\tconst p3 = async.timeout(2).then(() => {\n\t\t\t\tp3Handled = true;\n\t\t\t\tthrow p3Error;\n\t\t\t});\n\n\t\t\tlet error: Error | undefined = undefined;\n\t\t\ttry {\n\t\t\t\tawait async.Promises.settled<number>([p1, p2, p3]);\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\n\t\t\tassert.ok(error);\n\t\t\tassert.notStrictEqual(error, p2Error);\n\t\t\tassert.notStrictEqual(error, p3Error);\n\t\t\tassert.ok(p2Handled);\n\t\t\tassert.ok(p3Handled);\n\t\t});\n\n\t\ttest('rejects with first error but handles all promises (1 error)', async () => {\n\t\t\tconst p1 = Promise.resolve(1);\n\n\t\t\tlet p2Handled = false;\n\t\t\tconst p2Error = new Error('2');\n\t\t\tconst p2 = async.timeout(1).then(() => {\n\t\t\t\tp2Handled = true;\n\t\t\t\tthrow p2Error;\n\t\t\t});\n\n\t\t\tlet p3Handled = false;\n\t\t\tconst p3 = async.timeout(2).then(() => {\n\t\t\t\tp3Handled = true;\n\t\t\t\treturn 3;\n\t\t\t});\n\n\t\t\tlet error: Error | undefined = undefined;\n\t\t\ttry {\n\t\t\t\tawait async.Promises.settled<number>([p1, p2, p3]);\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\n\t\t\tassert.strictEqual(error, p2Error);\n\t\t\tassert.ok(p2Handled);\n\t\t\tassert.ok(p3Handled);\n\t\t});\n\t});\n\n\tsuite('Promises.withAsyncBody', () => {\n\t\ttest('basics', async () => {\n\n\t\t\tconst p1 = async.Promises.withAsyncBody(async (resolve, reject) => {\n\t\t\t\tresolve(1);\n\t\t\t});\n\n\t\t\tconst p2 = async.Promises.withAsyncBody(async (resolve, reject) => {\n\t\t\t\treject(new Error('error'));\n\t\t\t});\n\n\t\t\tconst p3 = async.Promises.withAsyncBody(async (resolve, reject) => {\n\t\t\t\tthrow new Error('error');\n\t\t\t});\n\n\t\t\tconst r1 = await p1;\n\t\t\tassert.strictEqual(r1, 1);\n\n\t\t\tlet e2: Error | undefined = undefined;\n\t\t\ttry {\n\t\t\t\tawait p2;\n\t\t\t} catch (error) {\n\t\t\t\te2 = error;\n\t\t\t}\n\n\t\t\tassert.ok(e2 instanceof Error);\n\n\t\t\tlet e3: Error | undefined = undefined;\n\t\t\ttry {\n\t\t\t\tawait p3;\n\t\t\t} catch (error) {\n\t\t\t\te3 = error;\n\t\t\t}\n\n\t\t\tassert.ok(e3 instanceof Error);\n\t\t});\n\t});\n\n\tsuite('ThrottledWorker', () => {\n\n\t\tfunction assertArrayEquals(actual: unknown[], expected: unknown[]) {\n\t\t\tassert.strictEqual(actual.length, expected.length);\n\n\t\t\tfor (let i = 0; i < actual.length; i++) {\n\t\t\t\tassert.strictEqual(actual[i], expected[i]);\n\t\t\t}\n\t\t}\n\n\t\ttest('basics', async () => {\n\t\t\tlet handled: number[] = [];\n\n\t\t\tlet handledCallback: Function;\n\t\t\tlet handledPromise = new Promise(resolve => handledCallback = resolve);\n\t\t\tlet handledCounterToResolve = 1;\n\t\t\tlet currentHandledCounter = 0;\n\n\t\t\tconst handler = (units: readonly number[]) => {\n\t\t\t\thandled.push(...units);\n\n\t\t\t\tcurrentHandledCounter++;\n\t\t\t\tif (currentHandledCounter === handledCounterToResolve) {\n\t\t\t\t\thandledCallback();\n\n\t\t\t\t\thandledPromise = new Promise(resolve => handledCallback = resolve);\n\t\t\t\t\tcurrentHandledCounter = 0;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst worker = store.add(new async.ThrottledWorker<number>({\n\t\t\t\tmaxWorkChunkSize: 5,\n\t\t\t\tmaxBufferedWork: undefined,\n\t\t\t\tthrottleDelay: 1\n\t\t\t}, handler));\n\n\t\t\t// Work less than chunk size\n\n\t\t\tlet worked = worker.work([1, 2, 3]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3]);\n\t\t\tassert.strictEqual(worker.pending, 0);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tworker.work([4, 5]);\n\t\t\tworked = worker.work([6]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6]);\n\t\t\tassert.strictEqual(worker.pending, 0);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\t// Work more than chunk size (variant 1)\n\n\t\t\thandled = [];\n\t\t\thandledCounterToResolve = 2;\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worker.pending, 2);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tawait handledPromise;\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6, 7]);\n\n\t\t\thandled = [];\n\t\t\thandledCounterToResolve = 4;\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worker.pending, 14);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tawait handledPromise;\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]);\n\n\t\t\t// Work more than chunk size (variant 2)\n\n\t\t\thandled = [];\n\t\t\thandledCounterToResolve = 2;\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worker.pending, 5);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tawait handledPromise;\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\n\n\t\t\t// Work more while throttled (variant 1)\n\n\t\t\thandled = [];\n\t\t\thandledCounterToResolve = 3;\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worker.pending, 2);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tworker.work([8]);\n\t\t\tworked = worker.work([9, 10, 11]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worker.pending, 6);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tawait handledPromise;\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]);\n\t\t\tassert.strictEqual(worker.pending, 0);\n\n\t\t\t// Work more while throttled (variant 2)\n\n\t\t\thandled = [];\n\t\t\thandledCounterToResolve = 2;\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tworker.work([8]);\n\t\t\tworked = worker.work([9, 10]);\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tawait handledPromise;\n\n\t\t\tassertArrayEquals(handled, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\n\t\t});\n\n\t\ttest('do not accept too much work', async () => {\n\t\t\tconst handled: number[] = [];\n\t\t\tconst handler = (units: readonly number[]) => handled.push(...units);\n\n\t\t\tconst worker = store.add(new async.ThrottledWorker<number>({\n\t\t\t\tmaxWorkChunkSize: 5,\n\t\t\t\tmaxBufferedWork: 5,\n\t\t\t\tthrottleDelay: 1\n\t\t\t}, handler));\n\n\t\t\tlet worked = worker.work([1, 2, 3]);\n\t\t\tassert.strictEqual(worked, true);\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6]);\n\t\t\tassert.strictEqual(worked, true);\n\t\t\tassert.strictEqual(worker.pending, 1);\n\n\t\t\tworked = worker.work([7]);\n\t\t\tassert.strictEqual(worked, true);\n\t\t\tassert.strictEqual(worker.pending, 2);\n\n\t\t\tworked = worker.work([8, 9, 10, 11]);\n\t\t\tassert.strictEqual(worked, false);\n\t\t\tassert.strictEqual(worker.pending, 2);\n\t\t});\n\n\t\ttest('do not accept too much work (account for max chunk size', async () => {\n\t\t\tconst handled: number[] = [];\n\t\t\tconst handler = (units: readonly number[]) => handled.push(...units);\n\n\t\t\tconst worker = store.add(new async.ThrottledWorker<number>({\n\t\t\t\tmaxWorkChunkSize: 5,\n\t\t\t\tmaxBufferedWork: 5,\n\t\t\t\tthrottleDelay: 1\n\t\t\t}, handler));\n\n\t\t\tlet worked = worker.work([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]);\n\t\t\tassert.strictEqual(worked, false);\n\t\t\tassert.strictEqual(worker.pending, 0);\n\n\t\t\tworked = worker.work([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);\n\t\t\tassert.strictEqual(worked, true);\n\t\t\tassert.strictEqual(worker.pending, 5);\n\t\t});\n\n\t\ttest('disposed', async () => {\n\t\t\tconst handled: number[] = [];\n\t\t\tconst handler = (units: readonly number[]) => handled.push(...units);\n\n\t\t\tconst worker = store.add(new async.ThrottledWorker<number>({\n\t\t\t\tmaxWorkChunkSize: 5,\n\t\t\t\tmaxBufferedWork: undefined,\n\t\t\t\tthrottleDelay: 1\n\t\t\t}, handler));\n\t\t\tworker.dispose();\n\t\t\tconst worked = worker.work([1, 2, 3]);\n\n\t\t\tassertArrayEquals(handled, []);\n\t\t\tassert.strictEqual(worker.pending, 0);\n\t\t\tassert.strictEqual(worked, false);\n\t\t});\n\n\t\t//  https://github.com/microsoft/vscode/issues/230366\n\t\t// \ttest('waitThrottleDelayBetweenWorkUnits option', async () => {\n\t\t// \t\tconst handled: number[] = [];\n\t\t// \t\tlet handledCallback: Function;\n\t\t// \t\tlet handledPromise = new Promise(resolve => handledCallback = resolve);\n\t\t// \t\tlet currentTime = 0;\n\n\t\t// \t\tconst handler = (units: readonly number[]) => {\n\t\t// \t\t\thandled.push(...units);\n\t\t// \t\t\thandledCallback();\n\t\t// \t\t\thandledPromise = new Promise(resolve => handledCallback = resolve);\n\t\t// \t\t};\n\n\t\t// \t\tconst worker = store.add(new async.ThrottledWorker<number>({\n\t\t// \t\t\tmaxWorkChunkSize: 5,\n\t\t// \t\t\tmaxBufferedWork: undefined,\n\t\t// \t\t\tthrottleDelay: 5,\n\t\t// \t\t\twaitThrottleDelayBetweenWorkUnits: true\n\t\t// \t\t}, handler));\n\n\t\t// \t\t// Schedule work, it should execute immediately\n\t\t// \t\tcurrentTime = Date.now();\n\t\t// \t\tlet worked = worker.work([1, 2, 3]);\n\t\t// \t\tassert.strictEqual(worked, true);\n\t\t// \t\tassertArrayEquals(handled, [1, 2, 3]);\n\t\t// \t\tassert.strictEqual(Date.now() - currentTime < 5, true);\n\n\t\t// \t\t// Schedule work again, it should wait at least throttle delay before executing\n\t\t// \t\tcurrentTime = Date.now();\n\t\t// \t\tworked = worker.work([4, 5]);\n\t\t// \t\tassert.strictEqual(worked, true);\n\t\t// \t\t// Throttle delay hasn't reset so we still must wait\n\t\t// \t\tassertArrayEquals(handled, [1, 2, 3]);\n\t\t// \t\tawait handledPromise;\n\t\t// \t\tassert.strictEqual(Date.now() - currentTime >= 5, true);\n\t\t// \t\tassertArrayEquals(handled, [1, 2, 3, 4, 5]);\n\t\t// \t});\n\t});\n\n\tsuite('LimitedQueue', () => {\n\n\t\ttest('basics (with long running task)', async () => {\n\t\t\tconst limitedQueue = new async.LimitedQueue();\n\n\t\t\tlet counter = 0;\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < 5; i++) {\n\t\t\t\tpromises.push(limitedQueue.queue(async () => {\n\t\t\t\t\tcounter = i;\n\t\t\t\t\tawait async.timeout(1);\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tawait Promise.all(promises);\n\n\t\t\t// only the last task executed\n\t\t\tassert.strictEqual(counter, 4);\n\t\t});\n\n\t\ttest('basics (with sync running task)', async () => {\n\t\t\tconst limitedQueue = new async.LimitedQueue();\n\n\t\t\tlet counter = 0;\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < 5; i++) {\n\t\t\t\tpromises.push(limitedQueue.queue(async () => {\n\t\t\t\t\tcounter = i;\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tawait Promise.all(promises);\n\n\t\t\t// only the last task executed\n\t\t\tassert.strictEqual(counter, 4);\n\t\t});\n\t});\n\n\tsuite('AsyncIterableObject', function () {\n\n\n\t\ttest('onReturn NOT called', async function () {\n\n\t\t\tlet calledOnReturn = false;\n\t\t\tconst iter = new async.AsyncIterableObject<number>(writer => {\n\t\t\t\twriter.emitMany([1, 2, 3, 4, 5]);\n\t\t\t}, () => {\n\t\t\t\tcalledOnReturn = true;\n\t\t\t});\n\n\t\t\tfor await (const item of iter) {\n\t\t\t\tassert.strictEqual(typeof item, 'number');\n\t\t\t}\n\n\t\t\tassert.strictEqual(calledOnReturn, false);\n\n\t\t});\n\n\t\ttest('onReturn called on break', async function () {\n\n\t\t\tlet calledOnReturn = false;\n\t\t\tconst iter = new async.AsyncIterableObject<number>(writer => {\n\t\t\t\twriter.emitMany([1, 2, 3, 4, 5]);\n\t\t\t}, () => {\n\t\t\t\tcalledOnReturn = true;\n\t\t\t});\n\n\t\t\tfor await (const item of iter) {\n\t\t\t\tassert.strictEqual(item, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tassert.strictEqual(calledOnReturn, true);\n\n\t\t});\n\n\t\ttest('onReturn called on return', async function () {\n\n\t\t\tlet calledOnReturn = false;\n\t\t\tconst iter = new async.AsyncIterableObject<number>(writer => {\n\t\t\t\twriter.emitMany([1, 2, 3, 4, 5]);\n\t\t\t}, () => {\n\t\t\t\tcalledOnReturn = true;\n\t\t\t});\n\n\t\t\tawait (async function test() {\n\t\t\t\tfor await (const item of iter) {\n\t\t\t\t\tassert.strictEqual(item, 1);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t})();\n\n\n\t\t\tassert.strictEqual(calledOnReturn, true);\n\n\t\t});\n\n\n\t\ttest('onReturn called on throwing', async function () {\n\n\t\t\tlet calledOnReturn = false;\n\t\t\tconst iter = new async.AsyncIterableObject<number>(writer => {\n\t\t\t\twriter.emitMany([1, 2, 3, 4, 5]);\n\t\t\t}, () => {\n\t\t\t\tcalledOnReturn = true;\n\t\t\t});\n\n\t\t\ttry {\n\t\t\t\tfor await (const item of iter) {\n\t\t\t\t\tassert.strictEqual(item, 1);\n\t\t\t\t\tthrow new Error();\n\t\t\t\t}\n\t\t\t} catch (e) {\n\n\t\t\t}\n\n\t\t\tassert.strictEqual(calledOnReturn, true);\n\t\t});\n\t});\n\n\tsuite('AsyncIterableSource', function () {\n\n\t\ttest('onReturn is wired up', async function () {\n\t\t\tlet calledOnReturn = false;\n\t\t\tconst source = new async.AsyncIterableSource<number>(() => { calledOnReturn = true; });\n\n\t\t\tsource.emitOne(1);\n\t\t\tsource.emitOne(2);\n\t\t\tsource.emitOne(3);\n\t\t\tsource.resolve();\n\n\t\t\tfor await (const item of source.asyncIterable) {\n\t\t\t\tassert.strictEqual(item, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tassert.strictEqual(calledOnReturn, true);\n\n\t\t});\n\n\t\ttest('onReturn is wired up 2', async function () {\n\t\t\tlet calledOnReturn = false;\n\t\t\tconst source = new async.AsyncIterableSource<number>(() => { calledOnReturn = true; });\n\n\t\t\tsource.emitOne(1);\n\t\t\tsource.emitOne(2);\n\t\t\tsource.emitOne(3);\n\t\t\tsource.resolve();\n\n\t\t\tfor await (const item of source.asyncIterable) {\n\t\t\t\tassert.strictEqual(typeof item, 'number');\n\t\t\t}\n\n\t\t\tassert.strictEqual(calledOnReturn, false);\n\t\t});\n\n\t\ttest('emitMany emits all items', async function () {\n\t\t\tconst source = new async.AsyncIterableSource<number>();\n\t\t\tconst values = [10, 20, 30, 40];\n\t\t\tsource.emitMany(values);\n\t\t\tsource.resolve();\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of source.asyncIterable) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, values);\n\t\t});\n\t});\n\n\tsuite('cancellableIterable', () => {\n\t\tlet cts: CancellationTokenSource;\n\t\tsetup(() => {\n\t\t\tcts = store.add(new CancellationTokenSource());\n\t\t});\n\n\t\ttest('should iterate through all values when not canceled', async function () {\n\t\t\tconst asyncIterable = {\n\t\t\t\tasync *[Symbol.asyncIterator]() {\n\t\t\t\t\tyield 'a';\n\t\t\t\t\tyield 'b';\n\t\t\t\t\tyield 'c';\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst cancelableIterable = async.cancellableIterable(asyncIterable, cts.token);\n\n\t\t\tconst result = await Iterable.asyncToArray(cancelableIterable);\n\t\t\tassert.deepStrictEqual(result, ['a', 'b', 'c']);\n\t\t});\n\n\t\ttest('should stop iteration immediately when cancelled before starting', async function () {\n\t\t\tconst values: string[] = [];\n\n\t\t\tconst asyncIterable = {\n\t\t\t\tasync *[Symbol.asyncIterator]() {\n\t\t\t\t\tvalues.push('iterator created');\n\t\t\t\t\tyield 'a';\n\t\t\t\t\tvalues.push('after a');\n\t\t\t\t\tyield 'b';\n\t\t\t\t\tvalues.push('after b');\n\t\t\t\t\tyield 'c';\n\t\t\t\t\tvalues.push('after c');\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Cancel before iteration starts\n\t\t\tcts.cancel();\n\t\t\tconst cancelableIterable = async.cancellableIterable(asyncIterable, cts.token);\n\n\t\t\tconst result = await Iterable.asyncToArray(cancelableIterable);\n\t\t\tassert.deepStrictEqual(result, []);\n\t\t\tassert.deepStrictEqual(values, []);\n\t\t});\n\n\t\ttest('should stop iteration when cancelled during iteration', async function () {\n\t\t\tconst cts = new CancellationTokenSource();\n\t\t\tconst deferredA = new async.DeferredPromise<void>();\n\t\t\tconst deferredB = new async.DeferredPromise<void>();\n\t\t\tconst deferredC = new async.DeferredPromise<void>();\n\n\t\t\tconst values: string[] = [];\n\n\t\t\tconst asyncIterable = {\n\t\t\t\tasync *[Symbol.asyncIterator]() {\n\t\t\t\t\tvalues.push('a yielded');\n\t\t\t\t\tyield 'a';\n\t\t\t\t\tawait deferredA.p;\n\n\t\t\t\t\tvalues.push('b yielded');\n\t\t\t\t\tyield 'b';\n\t\t\t\t\tawait deferredB.p;\n\n\t\t\t\t\tvalues.push('c yielded');\n\t\t\t\t\tyield 'c';\n\t\t\t\t\tawait deferredC.p;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfor await (const value of async.cancellableIterable(asyncIterable, cts.token)) {\n\t\t\t\tif (value === 'a') {\n\t\t\t\t\tdeferredA.complete();\n\t\t\t\t} else if (value === 'b') {\n\t\t\t\t\tcts.cancel();\n\t\t\t\t\tdeferredB.complete();\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error('Unexpected value');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(values, ['a yielded', 'b yielded']);\n\t\t});\n\n\t\ttest('should handle return method correctly', async function () {\n\t\t\tlet returnCalled = false;\n\t\t\tlet n = 0;\n\t\t\tconst asyncIterable = {\n\t\t\t\tasync *[Symbol.asyncIterator]() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tyield 'a'; n++;\n\t\t\t\t\t\tyield 'b'; n++;\n\t\t\t\t\t\tyield 'c'; n++;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\treturnCalled = true;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t};\n\n\t\t\t// Add a return method to the iterator\n\t\t\tconst originalIterable = asyncIterable[Symbol.asyncIterator]();\n\t\t\toriginalIterable.return = async function () {\n\t\t\t\treturnCalled = true;\n\t\t\t\treturn Promise.resolve({ done: true, value: undefined });\n\t\t\t};\n\n\t\t\t// Create a test-specific iterable with our mocked iterator\n\t\t\tconst testIterable = {\n\t\t\t\t[Symbol.asyncIterator]: () => originalIterable\n\t\t\t};\n\n\t\t\tfor await (const value of async.cancellableIterable(testIterable, cts.token)) {\n\t\t\t\tif (value === 'b') {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tassert.strictEqual(returnCalled, true);\n\t\t\tassert.strictEqual(n < 2, true);\n\t\t});\n\t});\n\n\n\tsuite('AsyncIterableProducer', () => {\n\t\ttest('emitOne produces single values', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\temitter.emitOne(2);\n\t\t\t\temitter.emitOne(3);\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3]);\n\t\t});\n\n\t\ttest('emitMany produces multiple values', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitMany([1, 2, 3]);\n\t\t\t\temitter.emitMany([4, 5]);\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3, 4, 5]);\n\t\t});\n\n\t\ttest('mixed emitOne and emitMany', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\temitter.emitMany([2, 3]);\n\t\t\t\temitter.emitOne(4);\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3, 4]);\n\t\t});\n\n\t\ttest('async executor with emitOne', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(async emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\tawait async.timeout(1);\n\t\t\t\temitter.emitOne(2);\n\t\t\t\tawait async.timeout(1);\n\t\t\t\temitter.emitOne(3);\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3]);\n\t\t});\n\n\t\ttest('async executor with emitMany', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(async emitter => {\n\t\t\t\temitter.emitMany([1, 2]);\n\t\t\t\tawait async.timeout(1);\n\t\t\t\temitter.emitMany([3, 4]);\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1, 2, 3, 4]);\n\t\t});\n\n\t\ttest('reject with error', async () => {\n\t\t\tconst expectedError = new Error('test error');\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\temitter.reject(expectedError);\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tlet caughtError: Error | undefined;\n\n\t\t\ttry {\n\t\t\t\tfor await (const item of producer) {\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tcaughtError = error as Error;\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1]);\n\t\t\tassert.strictEqual(caughtError, expectedError);\n\t\t});\n\n\t\ttest('async executor throws error', async () => {\n\t\t\tconst expectedError = new Error('executor error');\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(async emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\tthrow expectedError;\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tlet caughtError: Error | undefined;\n\n\t\t\ttry {\n\t\t\t\tfor await (const item of producer) {\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tcaughtError = error as Error;\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1]);\n\t\t\tassert.strictEqual(caughtError, expectedError);\n\t\t});\n\n\t\ttest('empty producer', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\t// Don't emit anything\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, []);\n\t\t});\n\n\t\ttest('async executor resolves without emitting', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(async emitter => {\n\t\t\t\tawait async.timeout(1);\n\t\t\t\t// Don't emit anything\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, []);\n\t\t});\n\n\t\ttest('multiple iterators on same producer', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitMany([1, 2, 3]);\n\t\t\t});\n\n\t\t\t// First iterator should consume all values\n\t\t\tconst result1: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult1.push(item);\n\t\t\t}\n\n\t\t\t// Second iterator should not see any values (already consumed)\n\t\t\tconst result2: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult2.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result1, [1, 2, 3]);\n\t\t\tassert.deepStrictEqual(result2, []);\n\t\t});\n\n\t\ttest('concurrent iteration', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(async emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\tawait async.timeout(1);\n\t\t\t\temitter.emitOne(2);\n\t\t\t\tawait async.timeout(1);\n\t\t\t\temitter.emitOne(3);\n\t\t\t});\n\n\t\t\tconst iterator1 = producer[Symbol.asyncIterator]();\n\t\t\tconst iterator2 = producer[Symbol.asyncIterator]();\n\n\t\t\t// Both iterators share the same underlying producer\n\t\t\tconst first1 = await iterator1.next();\n\t\t\tconst first2 = await iterator2.next();\n\t\t\tconst second1 = await iterator1.next();\n\t\t\tconst second2 = await iterator2.next();\n\n\t\t\t// Since they share the same producer, values are consumed in order\n\t\t\tassert.strictEqual(first1.value, 1);\n\t\t\tassert.strictEqual(first2.value, 2);\n\t\t\tassert.strictEqual(second1.value, 3);\n\t\t\tassert.strictEqual(second2.done, true);\n\t\t});\n\n\t\ttest('executor with promise return value', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\temitter.emitOne(2);\n\t\t\t\treturn Promise.resolve();\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1, 2]);\n\t\t});\n\n\t\ttest('executor with non-promise return value', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\temitter.emitOne(2);\n\t\t\t\treturn 'some value';\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1, 2]);\n\t\t});\n\n\t\ttest('emitMany with empty array', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\temitter.emitMany([]);\n\t\t\t\temitter.emitOne(2);\n\t\t\t});\n\n\t\t\tconst result: number[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [1, 2]);\n\t\t});\n\n\t\ttest('reject immediately without emitting', async () => {\n\t\t\tconst expectedError = new Error('immediate error');\n\t\t\tconst producer = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.reject(expectedError);\n\t\t\t});\n\n\t\t\tlet caughtError: Error | undefined;\n\t\t\ttry {\n\t\t\t\tfor await (const _item of producer) {\n\t\t\t\t\tassert.fail('Should not iterate when rejected immediately');\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tcaughtError = error as Error;\n\t\t\t}\n\n\t\t\tassert.strictEqual(caughtError, expectedError);\n\t\t});\n\n\t\ttest('string values', async () => {\n\t\t\tconst producer = new async.AsyncIterableProducer<string>(emitter => {\n\t\t\t\temitter.emitOne('hello');\n\t\t\t\temitter.emitMany(['world', 'test']);\n\t\t\t});\n\n\t\t\tconst result: string[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, ['hello', 'world', 'test']);\n\t\t});\n\n\t\ttest('object values', async () => {\n\t\t\tinterface TestObject {\n\t\t\t\tid: number;\n\t\t\t\tname: string;\n\t\t\t}\n\n\t\t\tconst producer = new async.AsyncIterableProducer<TestObject>(emitter => {\n\t\t\t\temitter.emitOne({ id: 1, name: 'first' });\n\t\t\t\temitter.emitMany([\n\t\t\t\t\t{ id: 2, name: 'second' },\n\t\t\t\t\t{ id: 3, name: 'third' }\n\t\t\t\t]);\n\t\t\t});\n\n\t\t\tconst result: TestObject[] = [];\n\t\t\tfor await (const item of producer) {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result, [\n\t\t\t\t{ id: 1, name: 'first' },\n\t\t\t\t{ id: 2, name: 'second' },\n\t\t\t\t{ id: 3, name: 'third' }\n\t\t\t]);\n\t\t});\n\n\t\ttest('tee - both iterators receive all values', async () => {\n\t\t\t// TODO: Implementation bug - executors don't await start(), causing producers to finalize early\n\t\t\tasync function* sourceGenerator() {\n\t\t\t\tyield 1;\n\t\t\t\tyield 2;\n\t\t\t\tyield 3;\n\t\t\t\tyield 4;\n\t\t\t\tyield 5;\n\t\t\t}\n\n\t\t\tconst [iter1, iter2] = async.AsyncIterableProducer.tee(sourceGenerator());\n\n\t\t\tconst result1: number[] = [];\n\t\t\tconst result2: number[] = [];\n\n\t\t\t// Consume both iterables concurrently\n\t\t\tawait Promise.all([\n\t\t\t\t(async () => {\n\t\t\t\t\tfor await (const item of iter1) {\n\t\t\t\t\t\tresult1.push(item);\n\t\t\t\t\t}\n\t\t\t\t})(),\n\t\t\t\t(async () => {\n\t\t\t\t\tfor await (const item of iter2) {\n\t\t\t\t\t\tresult2.push(item);\n\t\t\t\t\t}\n\t\t\t\t})()\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result1, [1, 2, 3, 4, 5]);\n\t\t\tassert.deepStrictEqual(result2, [1, 2, 3, 4, 5]);\n\t\t});\n\n\t\ttest('tee - sequential consumption', async () => {\n\t\t\t// TODO: Implementation bug - executors don't await start(), causing producers to finalize early\n\t\t\tconst source = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\temitter.emitMany([1, 2, 3]);\n\t\t\t});\n\n\t\t\tconst [iter1, iter2] = async.AsyncIterableProducer.tee(source);\n\n\t\t\t// Consume first iterator completely\n\t\t\tconst result1: number[] = [];\n\t\t\tfor await (const item of iter1) {\n\t\t\t\tresult1.push(item);\n\t\t\t}\n\n\t\t\t// Then consume second iterator\n\t\t\tconst result2: number[] = [];\n\t\t\tfor await (const item of iter2) {\n\t\t\t\tresult2.push(item);\n\t\t\t}\n\n\t\t\tassert.deepStrictEqual(result1, [1, 2, 3]);\n\t\t\tassert.deepStrictEqual(result2, [1, 2, 3]);\n\t\t});\n\n\t\ttest.skip('tee - empty source', async () => {\n\t\t\t// TODO: Implementation bug - executors don't await start(), causing producers to finalize early\n\t\t\tconst source = new async.AsyncIterableProducer<number>(emitter => {\n\t\t\t\t// Emit nothing\n\t\t\t});\n\n\t\t\tconst [iter1, iter2] = async.AsyncIterableProducer.tee(source);\n\n\t\t\tconst result1: number[] = [];\n\t\t\tconst result2: number[] = [];\n\n\t\t\tawait Promise.all([\n\t\t\t\t(async () => {\n\t\t\t\t\tfor await (const item of iter1) {\n\t\t\t\t\t\tresult1.push(item);\n\t\t\t\t\t}\n\t\t\t\t})(),\n\t\t\t\t(async () => {\n\t\t\t\t\tfor await (const item of iter2) {\n\t\t\t\t\t\tresult2.push(item);\n\t\t\t\t\t}\n\t\t\t\t})()\n\t\t\t]);\n\n\t\t\tassert.deepStrictEqual(result1, []);\n\t\t\tassert.deepStrictEqual(result2, []);\n\t\t});\n\n\t\ttest.skip('tee - handles errors in source', async () => {\n\t\t\t// TODO: Implementation bug - executors don't await start(), causing producers to finalize early\n\t\t\tconst expectedError = new Error('source error');\n\t\t\tconst source = new async.AsyncIterableProducer<number>(async emitter => {\n\t\t\t\temitter.emitOne(1);\n\t\t\t\temitter.emitOne(2);\n\t\t\t\tthrow expectedError;\n\t\t\t});\n\n\t\t\tconst [iter1, iter2] = async.AsyncIterableProducer.tee(source);\n\n\t\t\tlet error1: Error | undefined;\n\t\t\tlet error2: Error | undefined;\n\t\t\tconst result1: number[] = [];\n\t\t\tconst result2: number[] = [];\n\n\t\t\tawait Promise.all([\n\t\t\t\t(async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor await (const item of iter1) {\n\t\t\t\t\t\t\tresult1.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\terror1 = e as Error;\n\t\t\t\t\t}\n\t\t\t\t})(),\n\t\t\t\t(async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor await (const item of iter2) {\n\t\t\t\t\t\t\tresult2.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\terror2 = e as Error;\n\t\t\t\t\t}\n\t\t\t\t})()\n\t\t\t]);\n\n\t\t\t// Both iterators should have received the same values before error\n\t\t\tassert.deepStrictEqual(result1, [1, 2]);\n\t\t\tassert.deepStrictEqual(result2, [1, 2]);\n\n\t\t\t// Both should have received the error\n\t\t\tassert.strictEqual(error1, expectedError);\n\t\t\tassert.strictEqual(error2, expectedError);\n\t\t});\n\t});\n\n\tsuite('AsyncReader', () => {\n\t\tasync function* createAsyncIterator<T>(values: T[]): AsyncIterator<T> {\n\t\t\tfor (const value of values) {\n\t\t\t\tyield value;\n\t\t\t}\n\t\t}\n\n\t\tasync function* createDelayedAsyncIterator<T>(values: T[], delayMs: number = 1): AsyncIterator<T> {\n\t\t\tfor (const value of values) {\n\t\t\t\tawait async.timeout(delayMs);\n\t\t\t\tyield value;\n\t\t\t}\n\t\t}\n\n\t\ttest('read - basic functionality', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3]));\n\n\t\t\tassert.strictEqual(await reader.read(), 1);\n\t\t\tassert.strictEqual(await reader.read(), 2);\n\t\t\tassert.strictEqual(await reader.read(), 3);\n\t\t\tassert.strictEqual(await reader.read(), async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('read - empty iterator', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([]));\n\n\t\t\tassert.strictEqual(await reader.read(), async.AsyncReaderEndOfStream);\n\t\t\tassert.strictEqual(await reader.read(), async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('endOfStream property', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2]));\n\n\t\t\tassert.strictEqual(reader.endOfStream, false);\n\n\t\t\tawait reader.read(); // 1\n\t\t\tassert.strictEqual(reader.endOfStream, false);\n\n\t\t\tawait reader.read(); // 2\n\t\t\tassert.strictEqual(reader.endOfStream, false);\n\n\t\t\tawait reader.read(); // end\n\t\t\tassert.strictEqual(reader.endOfStream, true);\n\t\t});\n\n\t\ttest('peek - basic functionality', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3]));\n\n\t\t\tassert.strictEqual(await reader.peek(), 1);\n\t\t\tassert.strictEqual(await reader.peek(), 1); // Should return same value\n\t\t\tassert.strictEqual(await reader.read(), 1); // Should consume the peeked value\n\n\t\t\tassert.strictEqual(await reader.peek(), 2);\n\t\t\tassert.strictEqual(await reader.read(), 2);\n\t\t});\n\n\t\ttest('peek - empty iterator', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([]));\n\n\t\t\tassert.strictEqual(await reader.peek(), async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('readSyncOrThrow - throws when no data available', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1]));\n\n\t\t\t// Read the only item\n\t\t\tawait reader.read();\n\n\t\t\t// Should throw since no more data and not at end yet\n\t\t\tassert.throws(() => reader.readBufferedOrThrow());\n\t\t});\n\n\t\ttest('readSyncOrThrow - returns end of stream when at end', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([]));\n\n\t\t\t// Trigger end detection\n\t\t\tawait reader.read();\n\n\t\t\tassert.strictEqual(reader.readBufferedOrThrow(), async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('peekSyncOrThrow - with buffered data', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3]));\n\n\t\t\t// First peek to populate buffer\n\t\t\tawait reader.peek();\n\n\t\t\t// Should be able to peek sync now\n\t\t\tassert.strictEqual(reader.peekBufferedOrThrow(), 1);\n\t\t\tassert.strictEqual(reader.peekBufferedOrThrow(), 1); // Should return same value\n\t\t});\n\n\t\ttest('peekSyncOrThrow - throws when no data available', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1]));\n\n\t\t\t// Should throw since buffer is empty and we haven't loaded anything\n\t\t\tassert.throws(() => reader.peekBufferedOrThrow());\n\t\t});\n\n\t\ttest('peekSyncOrThrow - returns end of stream when at end', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([]));\n\n\t\t\t// Trigger end detection\n\t\t\tawait reader.peek();\n\n\t\t\tassert.strictEqual(reader.peekBufferedOrThrow(), async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('consumeToEnd - consumes all remaining data', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3, 4, 5]));\n\n\t\t\t// Read some data first\n\t\t\tassert.strictEqual(await reader.read(), 1);\n\t\t\tassert.strictEqual(await reader.read(), 2);\n\n\t\t\t// Consume the rest\n\t\t\tawait reader.consumeToEnd();\n\n\t\t\tassert.strictEqual(reader.endOfStream, true);\n\t\t\tassert.strictEqual(await reader.read(), async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('consumeToEnd - on empty reader', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([]));\n\n\t\t\tawait reader.consumeToEnd();\n\n\t\t\tassert.strictEqual(reader.endOfStream, true);\n\t\t});\n\n\t\ttest('readWhile - basic functionality', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3, 4, 5]));\n\t\t\tconst collected: number[] = [];\n\n\t\t\tawait reader.readWhile(\n\t\t\t\tvalue => value < 4,\n\t\t\t\tasync value => {\n\t\t\t\t\tcollected.push(value);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tassert.deepStrictEqual(collected, [1, 2, 3]);\n\n\t\t\t// Next read should return 4\n\t\t\tassert.strictEqual(await reader.read(), 4);\n\t\t});\n\n\t\ttest('readWhile - stops at end of stream', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3]));\n\t\t\tconst collected: number[] = [];\n\n\t\t\tawait reader.readWhile(\n\t\t\t\tvalue => value < 10, // Always true\n\t\t\t\tasync value => {\n\t\t\t\t\tcollected.push(value);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tassert.deepStrictEqual(collected, [1, 2, 3]);\n\t\t\tassert.strictEqual(reader.endOfStream, true);\n\t\t});\n\n\t\ttest('readWhile - empty iterator', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([]));\n\t\t\tconst collected: number[] = [];\n\n\t\t\tawait reader.readWhile(\n\t\t\t\tvalue => true,\n\t\t\t\tasync value => {\n\t\t\t\t\tcollected.push(value);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tassert.deepStrictEqual(collected, []);\n\t\t});\n\n\t\ttest('readWhile - predicate returns false immediately', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3]));\n\t\t\tconst collected: number[] = [];\n\n\t\t\tawait reader.readWhile(\n\t\t\t\tvalue => false, // Always false\n\t\t\t\tasync value => {\n\t\t\t\t\tcollected.push(value);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tassert.deepStrictEqual(collected, []);\n\n\t\t\t// First item should still be available\n\t\t\tassert.strictEqual(await reader.read(), 1);\n\t\t});\n\n\t\ttest('peekTimeout - with immediate data', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3]));\n\n\t\t\tconst result = await reader.peekTimeout(100);\n\t\t\tassert.strictEqual(result, 1);\n\t\t});\n\n\t\ttest('peekTimeout - with delayed data', async () => {\n\t\t\tconst reader = new async.AsyncReader(createDelayedAsyncIterator([1, 2, 3], 10));\n\n\t\t\tconst result = await reader.peekTimeout(50);\n\t\t\tassert.strictEqual(result, 1);\n\t\t});\n\n\t\ttest('peekTimeout - timeout occurs', async () => {\n\t\t\treturn runWithFakedTimers({}, async () => {\n\t\t\t\tconst reader = new async.AsyncReader(createDelayedAsyncIterator([1, 2, 3], 50));\n\n\t\t\t\tconst result = await reader.peekTimeout(10);\n\t\t\t\tassert.strictEqual(result, undefined);\n\n\t\t\t\tawait reader.consumeToEnd();\n\t\t\t});\n\t\t});\n\n\t\ttest('peekTimeout - empty iterator', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([]));\n\n\t\t\tconst result = await reader.peekTimeout(10);\n\t\t\tassert.strictEqual(result, async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('peekTimeout - after consuming all data', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1]));\n\n\t\t\tawait reader.consumeToEnd();\n\t\t\tconst result = await reader.peekTimeout(10);\n\t\t\tassert.strictEqual(result, async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('mixed operations - complex scenario', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]));\n\n\t\t\t// Peek first\n\t\t\tassert.strictEqual(await reader.peek(), 1);\n\n\t\t\t// Read some\n\t\t\tassert.strictEqual(await reader.read(), 1);\n\t\t\tassert.strictEqual(await reader.read(), 2);\n\n\t\t\t// Peek again\n\t\t\tassert.strictEqual(await reader.peek(), 3);\n\n\t\t\t// Read while\n\t\t\tconst collected: number[] = [];\n\t\t\tawait reader.readWhile(\n\t\t\t\tvalue => value <= 5,\n\t\t\t\tasync value => collected.push(value)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(collected, [3, 4, 5]);\n\n\t\t\t// Use sync operations\n\t\t\tassert.strictEqual(await reader.peek(), 6);\n\t\t\tassert.strictEqual(reader.peekBufferedOrThrow(), 6);\n\t\t\tassert.strictEqual(reader.readBufferedOrThrow(), 6);\n\n\t\t\t// Consume rest\n\t\t\tawait reader.consumeToEnd();\n\t\t\tassert.strictEqual(reader.endOfStream, true);\n\t\t});\n\n\t\ttest('string values', async () => {\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator(['hello', 'world', 'test']));\n\n\t\t\tassert.strictEqual(await reader.read(), 'hello');\n\t\t\tassert.strictEqual(await reader.peek(), 'world');\n\t\t\tassert.strictEqual(await reader.read(), 'world');\n\t\t\tassert.strictEqual(await reader.read(), 'test');\n\t\t\tassert.strictEqual(await reader.read(), async.AsyncReaderEndOfStream);\n\t\t});\n\n\t\ttest('object values', async () => {\n\t\t\tinterface TestObj {\n\t\t\t\tid: number;\n\t\t\t\tname: string;\n\t\t\t}\n\n\t\t\tconst objects: TestObj[] = [\n\t\t\t\t{ id: 1, name: 'first' },\n\t\t\t\t{ id: 2, name: 'second' },\n\t\t\t\t{ id: 3, name: 'third' }\n\t\t\t];\n\n\t\t\tconst reader = new async.AsyncReader(createAsyncIterator(objects));\n\n\t\t\tassert.deepStrictEqual(await reader.read(), { id: 1, name: 'first' });\n\t\t\tassert.deepStrictEqual(await reader.peek(), { id: 2, name: 'second' });\n\t\t\tassert.deepStrictEqual(await reader.read(), { id: 2, name: 'second' });\n\t\t});\n\n\t\ttest('concurrent operations', async () => {\n\t\t\tconst reader = new async.AsyncReader(createDelayedAsyncIterator([1, 2, 3], 5));\n\n\t\t\t// Start multiple operations concurrently\n\t\t\tconst peekPromise = reader.peek();\n\t\t\tconst readPromise = reader.read();\n\n\t\t\tconst [peekResult, readResult] = await Promise.all([peekPromise, readPromise]);\n\n\t\t\t// Both should return the same first value\n\t\t\tassert.strictEqual(peekResult, 1);\n\t\t\tassert.strictEqual(readResult, 1);\n\n\t\t\t// Next read should get the second value\n\t\t\tassert.strictEqual(await reader.read(), 2);\n\t\t});\n\n\t\ttest('buffer management - single extend buffer call', async () => {\n\t\t\tlet nextCallCount = 0;\n\t\t\tconst mockIterator: AsyncIterator<number> = {\n\t\t\t\tasync next() {\n\t\t\t\t\tnextCallCount++;\n\t\t\t\t\tif (nextCallCount === 1) {\n\t\t\t\t\t\tawait async.timeout(1);\n\t\t\t\t\t\treturn { value: 1, done: false };\n\t\t\t\t\t}\n\t\t\t\t\treturn { value: undefined, done: true };\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst reader = new async.AsyncReader(mockIterator);\n\n\t\t\t// Multiple concurrent operations should only trigger one extend buffer call\n\t\t\tconst promises = [\n\t\t\t\treader.peek(),\n\t\t\t\treader.peek(),\n\t\t\t\treader.read()\n\t\t\t];\n\n\t\t\tawait Promise.all(promises);\n\n\t\t\t// Should have called next() only once despite multiple concurrent operations\n\t\t\tassert.strictEqual(nextCallCount, 1);\n\t\t});\n\t});\n});\n"]}