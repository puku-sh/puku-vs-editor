{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/base/test/common/jsonEdit.test.ts","vs/base/test/common/jsonEdit.test.ts"],"names":[],"mappings":"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","file":"jsonEdit.test.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { removeProperty, setProperty } from '../../common/jsonEdit.js';\nimport { Edit, FormattingOptions } from '../../common/jsonFormatter.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from './utils.js';\n\nsuite('JSON - edits', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction assertEdit(content: string, edits: Edit[], expected: string) {\n\t\tassert(edits);\n\t\tlet lastEditOffset = content.length;\n\t\tfor (let i = edits.length - 1; i >= 0; i--) {\n\t\t\tconst edit = edits[i];\n\t\t\tassert(edit.offset >= 0 && edit.length >= 0 && edit.offset + edit.length <= content.length);\n\t\t\tassert(typeof edit.content === 'string');\n\t\t\tassert(lastEditOffset >= edit.offset + edit.length); // make sure all edits are ordered\n\t\t\tlastEditOffset = edit.offset;\n\t\t\tcontent = content.substring(0, edit.offset) + edit.content + content.substring(edit.offset + edit.length);\n\t\t}\n\t\tassert.strictEqual(content, expected);\n\t}\n\n\tconst formatterOptions: FormattingOptions = {\n\t\tinsertSpaces: true,\n\t\ttabSize: 2,\n\t\teol: '\\n'\n\t};\n\n\ttest('set property', () => {\n\t\tlet content = '{\\n  \"x\": \"y\"\\n}';\n\t\tlet edits = setProperty(content, ['x'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": \"bar\"\\n}');\n\n\t\tcontent = 'true';\n\t\tedits = setProperty(content, [], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '\"bar\"');\n\n\t\tcontent = '{\\n  \"x\": \"y\"\\n}';\n\t\tedits = setProperty(content, ['x'], { key: true }, formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": {\\n    \"key\": true\\n  }\\n}');\n\t\tcontent = '{\\n  \"a\": \"b\",  \"x\": \"y\"\\n}';\n\t\tedits = setProperty(content, ['a'], null, formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"a\": null,  \"x\": \"y\"\\n}');\n\t});\n\n\ttest('insert property', () => {\n\t\tlet content = '{}';\n\t\tlet edits = setProperty(content, ['foo'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"foo\": \"bar\"\\n}');\n\n\t\tedits = setProperty(content, ['foo', 'foo2'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"foo\": {\\n    \"foo2\": \"bar\"\\n  }\\n}');\n\n\t\tcontent = '{\\n}';\n\t\tedits = setProperty(content, ['foo'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"foo\": \"bar\"\\n}');\n\n\t\tcontent = '  {\\n  }';\n\t\tedits = setProperty(content, ['foo'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '  {\\n    \"foo\": \"bar\"\\n  }');\n\n\t\tcontent = '{\\n  \"x\": \"y\"\\n}';\n\t\tedits = setProperty(content, ['foo'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": \"y\",\\n  \"foo\": \"bar\"\\n}');\n\n\t\tcontent = '{\\n  \"x\": \"y\"\\n}';\n\t\tedits = setProperty(content, ['e'], 'null', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": \"y\",\\n  \"e\": \"null\"\\n}');\n\n\t\tedits = setProperty(content, ['x'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": \"bar\"\\n}');\n\n\t\tcontent = '{\\n  \"x\": {\\n    \"a\": 1,\\n    \"b\": true\\n  }\\n}\\n';\n\t\tedits = setProperty(content, ['x'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": \"bar\"\\n}\\n');\n\n\t\tedits = setProperty(content, ['x', 'b'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": {\\n    \"a\": 1,\\n    \"b\": \"bar\"\\n  }\\n}\\n');\n\n\t\tedits = setProperty(content, ['x', 'c'], 'bar', formatterOptions, () => 0);\n\t\tassertEdit(content, edits, '{\\n  \"x\": {\\n    \"c\": \"bar\",\\n    \"a\": 1,\\n    \"b\": true\\n  }\\n}\\n');\n\n\t\tedits = setProperty(content, ['x', 'c'], 'bar', formatterOptions, () => 1);\n\t\tassertEdit(content, edits, '{\\n  \"x\": {\\n    \"a\": 1,\\n    \"c\": \"bar\",\\n    \"b\": true\\n  }\\n}\\n');\n\n\t\tedits = setProperty(content, ['x', 'c'], 'bar', formatterOptions, () => 2);\n\t\tassertEdit(content, edits, '{\\n  \"x\": {\\n    \"a\": 1,\\n    \"b\": true,\\n    \"c\": \"bar\"\\n  }\\n}\\n');\n\n\t\tedits = setProperty(content, ['c'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": {\\n    \"a\": 1,\\n    \"b\": true\\n  },\\n  \"c\": \"bar\"\\n}\\n');\n\n\t\tcontent = '{\\n  \"a\": [\\n    {\\n    } \\n  ]  \\n}';\n\t\tedits = setProperty(content, ['foo'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"a\": [\\n    {\\n    } \\n  ],\\n  \"foo\": \"bar\"\\n}');\n\n\t\tcontent = '';\n\t\tedits = setProperty(content, ['foo', 0], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"foo\": [\\n    \"bar\"\\n  ]\\n}');\n\n\t\tcontent = '//comment';\n\t\tedits = setProperty(content, ['foo', 0], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"foo\": [\\n    \"bar\"\\n  ]\\n} //comment');\n\t});\n\n\ttest('remove property', () => {\n\t\tlet content = '{\\n  \"x\": \"y\"\\n}';\n\t\tlet edits = removeProperty(content, ['x'], formatterOptions);\n\t\tassertEdit(content, edits, '{\\n}');\n\n\t\tcontent = '{\\n  \"x\": \"y\", \"a\": []\\n}';\n\t\tedits = removeProperty(content, ['x'], formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"a\": []\\n}');\n\n\t\tcontent = '{\\n  \"x\": \"y\", \"a\": []\\n}';\n\t\tedits = removeProperty(content, ['a'], formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": \"y\"\\n}');\n\t});\n\n\ttest('insert item at 0', () => {\n\t\tconst content = '[\\n  2,\\n  3\\n]';\n\t\tconst edits = setProperty(content, [0], 1, formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1,\\n  2,\\n  3\\n]');\n\t});\n\n\ttest('insert item at 0 in empty array', () => {\n\t\tconst content = '[\\n]';\n\t\tconst edits = setProperty(content, [0], 1, formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1\\n]');\n\t});\n\n\ttest('insert item at an index', () => {\n\t\tconst content = '[\\n  1,\\n  3\\n]';\n\t\tconst edits = setProperty(content, [1], 2, formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1,\\n  2,\\n  3\\n]');\n\t});\n\n\ttest('insert item at an index im empty array', () => {\n\t\tconst content = '[\\n]';\n\t\tconst edits = setProperty(content, [1], 1, formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1\\n]');\n\t});\n\n\ttest('insert item at end index', () => {\n\t\tconst content = '[\\n  1,\\n  2\\n]';\n\t\tconst edits = setProperty(content, [2], 3, formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1,\\n  2,\\n  3\\n]');\n\t});\n\n\ttest('insert item at end to empty array', () => {\n\t\tconst content = '[\\n]';\n\t\tconst edits = setProperty(content, [-1], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  \"bar\"\\n]');\n\t});\n\n\ttest('insert item at end', () => {\n\t\tconst content = '[\\n  1,\\n  2\\n]';\n\t\tconst edits = setProperty(content, [-1], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1,\\n  2,\\n  \"bar\"\\n]');\n\t});\n\n\ttest('remove item in array with one item', () => {\n\t\tconst content = '[\\n  1\\n]';\n\t\tconst edits = setProperty(content, [0], undefined, formatterOptions);\n\t\tassertEdit(content, edits, '[]');\n\t});\n\n\ttest('remove item in the middle of the array', () => {\n\t\tconst content = '[\\n  1,\\n  2,\\n  3\\n]';\n\t\tconst edits = setProperty(content, [1], undefined, formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1,\\n  3\\n]');\n\t});\n\n\ttest('remove last item in the array', () => {\n\t\tconst content = '[\\n  1,\\n  2,\\n  \"bar\"\\n]';\n\t\tconst edits = setProperty(content, [2], undefined, formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1,\\n  2\\n]');\n\t});\n\n\ttest('remove last item in the array if ends with comma', () => {\n\t\tconst content = '[\\n  1,\\n  \"foo\",\\n  \"bar\",\\n]';\n\t\tconst edits = setProperty(content, [2], undefined, formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1,\\n  \"foo\"\\n]');\n\t});\n\n\ttest('remove last item in the array if there is a comment in the beginning', () => {\n\t\tconst content = '// This is a comment\\n[\\n  1,\\n  \"foo\",\\n  \"bar\"\\n]';\n\t\tconst edits = setProperty(content, [2], undefined, formatterOptions);\n\t\tassertEdit(content, edits, '// This is a comment\\n[\\n  1,\\n  \"foo\"\\n]');\n\t});\n\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport assert from 'assert';\nimport { removeProperty, setProperty } from '../../common/jsonEdit.js';\nimport { Edit, FormattingOptions } from '../../common/jsonFormatter.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from './utils.js';\n\nsuite('JSON - edits', () => {\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tfunction assertEdit(content: string, edits: Edit[], expected: string) {\n\t\tassert(edits);\n\t\tlet lastEditOffset = content.length;\n\t\tfor (let i = edits.length - 1; i >= 0; i--) {\n\t\t\tconst edit = edits[i];\n\t\t\tassert(edit.offset >= 0 && edit.length >= 0 && edit.offset + edit.length <= content.length);\n\t\t\tassert(typeof edit.content === 'string');\n\t\t\tassert(lastEditOffset >= edit.offset + edit.length); // make sure all edits are ordered\n\t\t\tlastEditOffset = edit.offset;\n\t\t\tcontent = content.substring(0, edit.offset) + edit.content + content.substring(edit.offset + edit.length);\n\t\t}\n\t\tassert.strictEqual(content, expected);\n\t}\n\n\tconst formatterOptions: FormattingOptions = {\n\t\tinsertSpaces: true,\n\t\ttabSize: 2,\n\t\teol: '\\n'\n\t};\n\n\ttest('set property', () => {\n\t\tlet content = '{\\n  \"x\": \"y\"\\n}';\n\t\tlet edits = setProperty(content, ['x'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": \"bar\"\\n}');\n\n\t\tcontent = 'true';\n\t\tedits = setProperty(content, [], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '\"bar\"');\n\n\t\tcontent = '{\\n  \"x\": \"y\"\\n}';\n\t\tedits = setProperty(content, ['x'], { key: true }, formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": {\\n    \"key\": true\\n  }\\n}');\n\t\tcontent = '{\\n  \"a\": \"b\",  \"x\": \"y\"\\n}';\n\t\tedits = setProperty(content, ['a'], null, formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"a\": null,  \"x\": \"y\"\\n}');\n\t});\n\n\ttest('insert property', () => {\n\t\tlet content = '{}';\n\t\tlet edits = setProperty(content, ['foo'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"foo\": \"bar\"\\n}');\n\n\t\tedits = setProperty(content, ['foo', 'foo2'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"foo\": {\\n    \"foo2\": \"bar\"\\n  }\\n}');\n\n\t\tcontent = '{\\n}';\n\t\tedits = setProperty(content, ['foo'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"foo\": \"bar\"\\n}');\n\n\t\tcontent = '  {\\n  }';\n\t\tedits = setProperty(content, ['foo'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '  {\\n    \"foo\": \"bar\"\\n  }');\n\n\t\tcontent = '{\\n  \"x\": \"y\"\\n}';\n\t\tedits = setProperty(content, ['foo'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": \"y\",\\n  \"foo\": \"bar\"\\n}');\n\n\t\tcontent = '{\\n  \"x\": \"y\"\\n}';\n\t\tedits = setProperty(content, ['e'], 'null', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": \"y\",\\n  \"e\": \"null\"\\n}');\n\n\t\tedits = setProperty(content, ['x'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": \"bar\"\\n}');\n\n\t\tcontent = '{\\n  \"x\": {\\n    \"a\": 1,\\n    \"b\": true\\n  }\\n}\\n';\n\t\tedits = setProperty(content, ['x'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": \"bar\"\\n}\\n');\n\n\t\tedits = setProperty(content, ['x', 'b'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": {\\n    \"a\": 1,\\n    \"b\": \"bar\"\\n  }\\n}\\n');\n\n\t\tedits = setProperty(content, ['x', 'c'], 'bar', formatterOptions, () => 0);\n\t\tassertEdit(content, edits, '{\\n  \"x\": {\\n    \"c\": \"bar\",\\n    \"a\": 1,\\n    \"b\": true\\n  }\\n}\\n');\n\n\t\tedits = setProperty(content, ['x', 'c'], 'bar', formatterOptions, () => 1);\n\t\tassertEdit(content, edits, '{\\n  \"x\": {\\n    \"a\": 1,\\n    \"c\": \"bar\",\\n    \"b\": true\\n  }\\n}\\n');\n\n\t\tedits = setProperty(content, ['x', 'c'], 'bar', formatterOptions, () => 2);\n\t\tassertEdit(content, edits, '{\\n  \"x\": {\\n    \"a\": 1,\\n    \"b\": true,\\n    \"c\": \"bar\"\\n  }\\n}\\n');\n\n\t\tedits = setProperty(content, ['c'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": {\\n    \"a\": 1,\\n    \"b\": true\\n  },\\n  \"c\": \"bar\"\\n}\\n');\n\n\t\tcontent = '{\\n  \"a\": [\\n    {\\n    } \\n  ]  \\n}';\n\t\tedits = setProperty(content, ['foo'], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"a\": [\\n    {\\n    } \\n  ],\\n  \"foo\": \"bar\"\\n}');\n\n\t\tcontent = '';\n\t\tedits = setProperty(content, ['foo', 0], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"foo\": [\\n    \"bar\"\\n  ]\\n}');\n\n\t\tcontent = '//comment';\n\t\tedits = setProperty(content, ['foo', 0], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"foo\": [\\n    \"bar\"\\n  ]\\n} //comment');\n\t});\n\n\ttest('remove property', () => {\n\t\tlet content = '{\\n  \"x\": \"y\"\\n}';\n\t\tlet edits = removeProperty(content, ['x'], formatterOptions);\n\t\tassertEdit(content, edits, '{\\n}');\n\n\t\tcontent = '{\\n  \"x\": \"y\", \"a\": []\\n}';\n\t\tedits = removeProperty(content, ['x'], formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"a\": []\\n}');\n\n\t\tcontent = '{\\n  \"x\": \"y\", \"a\": []\\n}';\n\t\tedits = removeProperty(content, ['a'], formatterOptions);\n\t\tassertEdit(content, edits, '{\\n  \"x\": \"y\"\\n}');\n\t});\n\n\ttest('insert item at 0', () => {\n\t\tconst content = '[\\n  2,\\n  3\\n]';\n\t\tconst edits = setProperty(content, [0], 1, formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1,\\n  2,\\n  3\\n]');\n\t});\n\n\ttest('insert item at 0 in empty array', () => {\n\t\tconst content = '[\\n]';\n\t\tconst edits = setProperty(content, [0], 1, formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1\\n]');\n\t});\n\n\ttest('insert item at an index', () => {\n\t\tconst content = '[\\n  1,\\n  3\\n]';\n\t\tconst edits = setProperty(content, [1], 2, formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1,\\n  2,\\n  3\\n]');\n\t});\n\n\ttest('insert item at an index im empty array', () => {\n\t\tconst content = '[\\n]';\n\t\tconst edits = setProperty(content, [1], 1, formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1\\n]');\n\t});\n\n\ttest('insert item at end index', () => {\n\t\tconst content = '[\\n  1,\\n  2\\n]';\n\t\tconst edits = setProperty(content, [2], 3, formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1,\\n  2,\\n  3\\n]');\n\t});\n\n\ttest('insert item at end to empty array', () => {\n\t\tconst content = '[\\n]';\n\t\tconst edits = setProperty(content, [-1], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  \"bar\"\\n]');\n\t});\n\n\ttest('insert item at end', () => {\n\t\tconst content = '[\\n  1,\\n  2\\n]';\n\t\tconst edits = setProperty(content, [-1], 'bar', formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1,\\n  2,\\n  \"bar\"\\n]');\n\t});\n\n\ttest('remove item in array with one item', () => {\n\t\tconst content = '[\\n  1\\n]';\n\t\tconst edits = setProperty(content, [0], undefined, formatterOptions);\n\t\tassertEdit(content, edits, '[]');\n\t});\n\n\ttest('remove item in the middle of the array', () => {\n\t\tconst content = '[\\n  1,\\n  2,\\n  3\\n]';\n\t\tconst edits = setProperty(content, [1], undefined, formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1,\\n  3\\n]');\n\t});\n\n\ttest('remove last item in the array', () => {\n\t\tconst content = '[\\n  1,\\n  2,\\n  \"bar\"\\n]';\n\t\tconst edits = setProperty(content, [2], undefined, formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1,\\n  2\\n]');\n\t});\n\n\ttest('remove last item in the array if ends with comma', () => {\n\t\tconst content = '[\\n  1,\\n  \"foo\",\\n  \"bar\",\\n]';\n\t\tconst edits = setProperty(content, [2], undefined, formatterOptions);\n\t\tassertEdit(content, edits, '[\\n  1,\\n  \"foo\"\\n]');\n\t});\n\n\ttest('remove last item in the array if there is a comment in the beginning', () => {\n\t\tconst content = '// This is a comment\\n[\\n  1,\\n  \"foo\",\\n  \"bar\"\\n]';\n\t\tconst edits = setProperty(content, [2], undefined, formatterOptions);\n\t\tassertEdit(content, edits, '// This is a comment\\n[\\n  1,\\n  \"foo\"\\n]');\n\t});\n\n});\n"]}