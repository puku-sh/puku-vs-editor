{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/base/common/resourceTree.ts","vs/base/common/resourceTree.ts"],"names":[],"mappings":"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","file":"resourceTree.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { memoize } from './decorators.js';\nimport { PathIterator } from './ternarySearchTree.js';\nimport * as paths from './path.js';\nimport { extUri as defaultExtUri, IExtUri } from './resources.js';\nimport { URI } from './uri.js';\n\nexport interface IResourceNode<T, C = void> {\n\treadonly uri: URI;\n\treadonly relativePath: string;\n\treadonly name: string;\n\treadonly element: T | undefined;\n\treadonly children: Iterable<IResourceNode<T, C>>;\n\treadonly childrenCount: number;\n\treadonly parent: IResourceNode<T, C> | undefined;\n\treadonly context: C;\n\tget(childName: string): IResourceNode<T, C> | undefined;\n}\n\nclass Node<T, C> implements IResourceNode<T, C> {\n\n\tprivate _children = new Map<string, Node<T, C>>();\n\n\tget childrenCount(): number {\n\t\treturn this._children.size;\n\t}\n\n\tget children(): Iterable<Node<T, C>> {\n\t\treturn this._children.values();\n\t}\n\n\t@memoize\n\tget name(): string {\n\t\treturn paths.posix.basename(this.relativePath);\n\t}\n\n\tconstructor(\n\t\treadonly uri: URI,\n\t\treadonly relativePath: string,\n\t\treadonly context: C,\n\t\tpublic element: T | undefined = undefined,\n\t\treadonly parent: IResourceNode<T, C> | undefined = undefined\n\t) { }\n\n\tget(path: string): Node<T, C> | undefined {\n\t\treturn this._children.get(path);\n\t}\n\n\tset(path: string, child: Node<T, C>): void {\n\t\tthis._children.set(path, child);\n\t}\n\n\tdelete(path: string): void {\n\t\tthis._children.delete(path);\n\t}\n\n\tclear(): void {\n\t\tthis._children.clear();\n\t}\n}\n\nfunction collect<T, C>(node: IResourceNode<T, C>, result: T[]): T[] {\n\tif (typeof node.element !== 'undefined') {\n\t\tresult.push(node.element);\n\t}\n\n\tfor (const child of node.children) {\n\t\tcollect(child, result);\n\t}\n\n\treturn result;\n}\n\nexport class ResourceTree<T extends NonNullable<unknown>, C> {\n\n\treadonly root: Node<T, C>;\n\n\tstatic getRoot<T, C>(node: IResourceNode<T, C>): IResourceNode<T, C> {\n\t\twhile (node.parent) {\n\t\t\tnode = node.parent;\n\t\t}\n\n\t\treturn node;\n\t}\n\n\tstatic collect<T, C>(node: IResourceNode<T, C>): T[] {\n\t\treturn collect(node, []);\n\t}\n\n\tstatic isResourceNode<T, C>(obj: unknown): obj is IResourceNode<T, C> {\n\t\treturn obj instanceof Node;\n\t}\n\n\tconstructor(context: C, rootURI: URI = URI.file('/'), private extUri: IExtUri = defaultExtUri) {\n\t\tthis.root = new Node(rootURI, '', context);\n\t}\n\n\tadd(uri: URI, element: T): void {\n\t\tconst key = this.extUri.relativePath(this.root.uri, uri) || uri.path;\n\t\tconst iterator = new PathIterator(false).reset(key);\n\t\tlet node = this.root;\n\t\tlet path = '';\n\n\t\twhile (true) {\n\t\t\tconst name = iterator.value();\n\t\t\tpath = path + '/' + name;\n\n\t\t\tlet child = node.get(name);\n\n\t\t\tif (!child) {\n\t\t\t\tchild = new Node(\n\t\t\t\t\tthis.extUri.joinPath(this.root.uri, path),\n\t\t\t\t\tpath,\n\t\t\t\t\tthis.root.context,\n\t\t\t\t\titerator.hasNext() ? undefined : element,\n\t\t\t\t\tnode\n\t\t\t\t);\n\n\t\t\t\tnode.set(name, child);\n\t\t\t} else if (!iterator.hasNext()) {\n\t\t\t\tchild.element = element;\n\t\t\t}\n\n\t\t\tnode = child;\n\n\t\t\tif (!iterator.hasNext()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\titerator.next();\n\t\t}\n\t}\n\n\tdelete(uri: URI): T | undefined {\n\t\tconst key = this.extUri.relativePath(this.root.uri, uri) || uri.path;\n\t\tconst iterator = new PathIterator(false).reset(key);\n\t\treturn this._delete(this.root, iterator);\n\t}\n\n\tprivate _delete(node: Node<T, C>, iterator: PathIterator): T | undefined {\n\t\tconst name = iterator.value();\n\t\tconst child = node.get(name);\n\n\t\tif (!child) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (iterator.hasNext()) {\n\t\t\tconst result = this._delete(child, iterator.next());\n\n\t\t\tif (typeof result !== 'undefined' && child.childrenCount === 0) {\n\t\t\t\tnode.delete(name);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tnode.delete(name);\n\t\treturn child.element;\n\t}\n\n\tclear(): void {\n\t\tthis.root.clear();\n\t}\n\n\tgetNode(uri: URI): IResourceNode<T, C> | undefined {\n\t\tconst key = this.extUri.relativePath(this.root.uri, uri) || uri.path;\n\t\tconst iterator = new PathIterator(false).reset(key);\n\t\tlet node = this.root;\n\n\t\twhile (true) {\n\t\t\tconst name = iterator.value();\n\t\t\tconst child = node.get(name);\n\n\t\t\tif (!child || !iterator.hasNext()) {\n\t\t\t\treturn child;\n\t\t\t}\n\n\t\t\tnode = child;\n\t\t\titerator.next();\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { memoize } from './decorators.js';\nimport { PathIterator } from './ternarySearchTree.js';\nimport * as paths from './path.js';\nimport { extUri as defaultExtUri, IExtUri } from './resources.js';\nimport { URI } from './uri.js';\n\nexport interface IResourceNode<T, C = void> {\n\treadonly uri: URI;\n\treadonly relativePath: string;\n\treadonly name: string;\n\treadonly element: T | undefined;\n\treadonly children: Iterable<IResourceNode<T, C>>;\n\treadonly childrenCount: number;\n\treadonly parent: IResourceNode<T, C> | undefined;\n\treadonly context: C;\n\tget(childName: string): IResourceNode<T, C> | undefined;\n}\n\nclass Node<T, C> implements IResourceNode<T, C> {\n\n\tprivate _children = new Map<string, Node<T, C>>();\n\n\tget childrenCount(): number {\n\t\treturn this._children.size;\n\t}\n\n\tget children(): Iterable<Node<T, C>> {\n\t\treturn this._children.values();\n\t}\n\n\t@memoize\n\tget name(): string {\n\t\treturn paths.posix.basename(this.relativePath);\n\t}\n\n\tconstructor(\n\t\treadonly uri: URI,\n\t\treadonly relativePath: string,\n\t\treadonly context: C,\n\t\tpublic element: T | undefined = undefined,\n\t\treadonly parent: IResourceNode<T, C> | undefined = undefined\n\t) { }\n\n\tget(path: string): Node<T, C> | undefined {\n\t\treturn this._children.get(path);\n\t}\n\n\tset(path: string, child: Node<T, C>): void {\n\t\tthis._children.set(path, child);\n\t}\n\n\tdelete(path: string): void {\n\t\tthis._children.delete(path);\n\t}\n\n\tclear(): void {\n\t\tthis._children.clear();\n\t}\n}\n\nfunction collect<T, C>(node: IResourceNode<T, C>, result: T[]): T[] {\n\tif (typeof node.element !== 'undefined') {\n\t\tresult.push(node.element);\n\t}\n\n\tfor (const child of node.children) {\n\t\tcollect(child, result);\n\t}\n\n\treturn result;\n}\n\nexport class ResourceTree<T extends NonNullable<unknown>, C> {\n\n\treadonly root: Node<T, C>;\n\n\tstatic getRoot<T, C>(node: IResourceNode<T, C>): IResourceNode<T, C> {\n\t\twhile (node.parent) {\n\t\t\tnode = node.parent;\n\t\t}\n\n\t\treturn node;\n\t}\n\n\tstatic collect<T, C>(node: IResourceNode<T, C>): T[] {\n\t\treturn collect(node, []);\n\t}\n\n\tstatic isResourceNode<T, C>(obj: unknown): obj is IResourceNode<T, C> {\n\t\treturn obj instanceof Node;\n\t}\n\n\tconstructor(context: C, rootURI: URI = URI.file('/'), private extUri: IExtUri = defaultExtUri) {\n\t\tthis.root = new Node(rootURI, '', context);\n\t}\n\n\tadd(uri: URI, element: T): void {\n\t\tconst key = this.extUri.relativePath(this.root.uri, uri) || uri.path;\n\t\tconst iterator = new PathIterator(false).reset(key);\n\t\tlet node = this.root;\n\t\tlet path = '';\n\n\t\twhile (true) {\n\t\t\tconst name = iterator.value();\n\t\t\tpath = path + '/' + name;\n\n\t\t\tlet child = node.get(name);\n\n\t\t\tif (!child) {\n\t\t\t\tchild = new Node(\n\t\t\t\t\tthis.extUri.joinPath(this.root.uri, path),\n\t\t\t\t\tpath,\n\t\t\t\t\tthis.root.context,\n\t\t\t\t\titerator.hasNext() ? undefined : element,\n\t\t\t\t\tnode\n\t\t\t\t);\n\n\t\t\t\tnode.set(name, child);\n\t\t\t} else if (!iterator.hasNext()) {\n\t\t\t\tchild.element = element;\n\t\t\t}\n\n\t\t\tnode = child;\n\n\t\t\tif (!iterator.hasNext()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\titerator.next();\n\t\t}\n\t}\n\n\tdelete(uri: URI): T | undefined {\n\t\tconst key = this.extUri.relativePath(this.root.uri, uri) || uri.path;\n\t\tconst iterator = new PathIterator(false).reset(key);\n\t\treturn this._delete(this.root, iterator);\n\t}\n\n\tprivate _delete(node: Node<T, C>, iterator: PathIterator): T | undefined {\n\t\tconst name = iterator.value();\n\t\tconst child = node.get(name);\n\n\t\tif (!child) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (iterator.hasNext()) {\n\t\t\tconst result = this._delete(child, iterator.next());\n\n\t\t\tif (typeof result !== 'undefined' && child.childrenCount === 0) {\n\t\t\t\tnode.delete(name);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tnode.delete(name);\n\t\treturn child.element;\n\t}\n\n\tclear(): void {\n\t\tthis.root.clear();\n\t}\n\n\tgetNode(uri: URI): IResourceNode<T, C> | undefined {\n\t\tconst key = this.extUri.relativePath(this.root.uri, uri) || uri.path;\n\t\tconst iterator = new PathIterator(false).reset(key);\n\t\tlet node = this.root;\n\n\t\twhile (true) {\n\t\t\tconst name = iterator.value();\n\t\t\tconst child = node.get(name);\n\n\t\t\tif (!child || !iterator.hasNext()) {\n\t\t\t\treturn child;\n\t\t\t}\n\n\t\t\tnode = child;\n\t\t\titerator.next();\n\t\t}\n\t}\n}\n"]}