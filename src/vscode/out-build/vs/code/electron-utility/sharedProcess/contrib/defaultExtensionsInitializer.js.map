{"version":3,"sources":["file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src/vs/code/electron-utility/sharedProcess/contrib/defaultExtensionsInitializer.ts","vs/code/electron-utility/sharedProcess/contrib/defaultExtensionsInitializer.ts"],"names":[],"mappings":"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","file":"defaultExtensionsInitializer.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { dirname, join } from '../../../../base/common/path.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { isWindows } from '../../../../base/common/platform.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { INativeEnvironmentService } from '../../../../platform/environment/common/environment.js';\nimport { INativeServerExtensionManagementService } from '../../../../platform/extensionManagement/node/extensionManagementService.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { FileOperationResult, IFileService, IFileStat, toFileOperationResult } from '../../../../platform/files/common/files.js';\nimport { getErrorMessage } from '../../../../base/common/errors.js';\n\nconst defaultExtensionsInitStatusKey = 'initializing-default-extensions';\n\nexport class DefaultExtensionsInitializer extends Disposable {\n\tconstructor(\n\t\t@INativeEnvironmentService private readonly environmentService: INativeEnvironmentService,\n\t\t@INativeServerExtensionManagementService private readonly extensionManagementService: INativeServerExtensionManagementService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@ILogService private readonly logService: ILogService,\n\t) {\n\t\tsuper();\n\n\t\tif (isWindows && storageService.getBoolean(defaultExtensionsInitStatusKey, StorageScope.APPLICATION, true)) {\n\t\t\tstorageService.store(defaultExtensionsInitStatusKey, true, StorageScope.APPLICATION, StorageTarget.MACHINE);\n\t\t\tthis.initializeDefaultExtensions().then(() => storageService.store(defaultExtensionsInitStatusKey, false, StorageScope.APPLICATION, StorageTarget.MACHINE));\n\t\t}\n\t}\n\n\tprivate async initializeDefaultExtensions(): Promise<void> {\n\t\tconst extensionsLocation = this.getDefaultExtensionVSIXsLocation();\n\t\tlet stat: IFileStat;\n\t\ttry {\n\t\t\tstat = await this.fileService.resolve(extensionsLocation);\n\t\t\tif (!stat.children) {\n\t\t\t\tthis.logService.debug('There are no default extensions to initialize', extensionsLocation.toString());\n\t\t\t\treturn;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tif (toFileOperationResult(error) === FileOperationResult.FILE_NOT_FOUND) {\n\t\t\t\tthis.logService.debug('There are no default extensions to initialize', extensionsLocation.toString());\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.logService.error('Error initializing extensions', error);\n\t\t\treturn;\n\t\t}\n\n\t\tconst vsixs = stat.children.filter(child => child.name.toLowerCase().endsWith('.vsix'));\n\t\tif (vsixs.length === 0) {\n\t\t\tthis.logService.debug('There are no default extensions to initialize', extensionsLocation.toString());\n\t\t\treturn;\n\t\t}\n\n\t\tthis.logService.info('Initializing default extensions', extensionsLocation.toString());\n\t\tawait Promise.all(vsixs.map(async vsix => {\n\t\t\tthis.logService.info('Installing default extension', vsix.resource.toString());\n\t\t\ttry {\n\t\t\t\tawait this.extensionManagementService.install(vsix.resource, { donotIncludePackAndDependencies: true, keepExisting: false });\n\t\t\t\tthis.logService.info('Default extension installed', vsix.resource.toString());\n\t\t\t} catch (error) {\n\t\t\t\tthis.logService.error('Error installing default extension', vsix.resource.toString(), getErrorMessage(error));\n\t\t\t}\n\t\t}));\n\t\tthis.logService.info('Default extensions initialized', extensionsLocation.toString());\n\t}\n\n\tprivate getDefaultExtensionVSIXsLocation(): URI {\n\t\t// appRoot = C:\\Users\\<name>\\AppData\\Local\\Programs\\Microsoft VS Code Insiders\\resources\\app\n\t\t// extensionsPath = C:\\Users\\<name>\\AppData\\Local\\Programs\\Microsoft VS Code Insiders\\bootstrap\\extensions\n\t\treturn URI.file(join(dirname(dirname(this.environmentService.appRoot)), 'bootstrap', 'extensions'));\n\t}\n\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { dirname, join } from '../../../../base/common/path.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { isWindows } from '../../../../base/common/platform.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { INativeEnvironmentService } from '../../../../platform/environment/common/environment.js';\nimport { INativeServerExtensionManagementService } from '../../../../platform/extensionManagement/node/extensionManagementService.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { FileOperationResult, IFileService, IFileStat, toFileOperationResult } from '../../../../platform/files/common/files.js';\nimport { getErrorMessage } from '../../../../base/common/errors.js';\n\nconst defaultExtensionsInitStatusKey = 'initializing-default-extensions';\n\nexport class DefaultExtensionsInitializer extends Disposable {\n\tconstructor(\n\t\t@INativeEnvironmentService private readonly environmentService: INativeEnvironmentService,\n\t\t@INativeServerExtensionManagementService private readonly extensionManagementService: INativeServerExtensionManagementService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@ILogService private readonly logService: ILogService,\n\t) {\n\t\tsuper();\n\n\t\tif (isWindows && storageService.getBoolean(defaultExtensionsInitStatusKey, StorageScope.APPLICATION, true)) {\n\t\t\tstorageService.store(defaultExtensionsInitStatusKey, true, StorageScope.APPLICATION, StorageTarget.MACHINE);\n\t\t\tthis.initializeDefaultExtensions().then(() => storageService.store(defaultExtensionsInitStatusKey, false, StorageScope.APPLICATION, StorageTarget.MACHINE));\n\t\t}\n\t}\n\n\tprivate async initializeDefaultExtensions(): Promise<void> {\n\t\tconst extensionsLocation = this.getDefaultExtensionVSIXsLocation();\n\t\tlet stat: IFileStat;\n\t\ttry {\n\t\t\tstat = await this.fileService.resolve(extensionsLocation);\n\t\t\tif (!stat.children) {\n\t\t\t\tthis.logService.debug('There are no default extensions to initialize', extensionsLocation.toString());\n\t\t\t\treturn;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tif (toFileOperationResult(error) === FileOperationResult.FILE_NOT_FOUND) {\n\t\t\t\tthis.logService.debug('There are no default extensions to initialize', extensionsLocation.toString());\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.logService.error('Error initializing extensions', error);\n\t\t\treturn;\n\t\t}\n\n\t\tconst vsixs = stat.children.filter(child => child.name.toLowerCase().endsWith('.vsix'));\n\t\tif (vsixs.length === 0) {\n\t\t\tthis.logService.debug('There are no default extensions to initialize', extensionsLocation.toString());\n\t\t\treturn;\n\t\t}\n\n\t\tthis.logService.info('Initializing default extensions', extensionsLocation.toString());\n\t\tawait Promise.all(vsixs.map(async vsix => {\n\t\t\tthis.logService.info('Installing default extension', vsix.resource.toString());\n\t\t\ttry {\n\t\t\t\tawait this.extensionManagementService.install(vsix.resource, { donotIncludePackAndDependencies: true, keepExisting: false });\n\t\t\t\tthis.logService.info('Default extension installed', vsix.resource.toString());\n\t\t\t} catch (error) {\n\t\t\t\tthis.logService.error('Error installing default extension', vsix.resource.toString(), getErrorMessage(error));\n\t\t\t}\n\t\t}));\n\t\tthis.logService.info('Default extensions initialized', extensionsLocation.toString());\n\t}\n\n\tprivate getDefaultExtensionVSIXsLocation(): URI {\n\t\t// appRoot = C:\\Users\\<name>\\AppData\\Local\\Programs\\Microsoft VS Code Insiders\\resources\\app\n\t\t// extensionsPath = C:\\Users\\<name>\\AppData\\Local\\Programs\\Microsoft VS Code Insiders\\bootstrap\\extensions\n\t\treturn URI.file(join(dirname(dirname(this.environmentService.appRoot)), 'bootstrap', 'extensions'));\n\t}\n\n}\n"]}