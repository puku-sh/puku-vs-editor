{"version":3,"sources":["vs/code/electron-utility/sharedProcess/sharedProcessMain.ts"],"names":[],"mappings":"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","file":"sharedProcessMain.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { hostname, release } from 'os';\nimport { MessagePortMain, MessageEvent } from '../../../base/parts/sandbox/node/electronTypes.js';\nimport { toErrorMessage } from '../../../base/common/errorMessage.js';\nimport { onUnexpectedError, setUnexpectedErrorHandler } from '../../../base/common/errors.js';\nimport { combinedDisposable, Disposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { ProxyChannel, StaticRouter } from '../../../base/parts/ipc/common/ipc.js';\nimport { IClientConnectionFilter, Server as UtilityProcessMessagePortServer, once } from '../../../base/parts/ipc/node/ipc.mp.js';\nimport { CodeCacheCleaner } from './contrib/codeCacheCleaner.js';\nimport { LanguagePackCachedDataCleaner } from './contrib/languagePackCachedDataCleaner.js';\nimport { LocalizationsUpdater } from './contrib/localizationsUpdater.js';\nimport { LogsDataCleaner } from './contrib/logsDataCleaner.js';\nimport { UnusedWorkspaceStorageDataCleaner } from './contrib/storageDataCleaner.js';\nimport { IChecksumService } from '../../../platform/checksum/common/checksumService.js';\nimport { ChecksumService } from '../../../platform/checksum/node/checksumService.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { ConfigurationService } from '../../../platform/configuration/common/configurationService.js';\nimport { IDiagnosticsService } from '../../../platform/diagnostics/common/diagnostics.js';\nimport { DiagnosticsService } from '../../../platform/diagnostics/node/diagnosticsService.js';\nimport { IDownloadService } from '../../../platform/download/common/download.js';\nimport { DownloadService } from '../../../platform/download/common/downloadService.js';\nimport { INativeEnvironmentService } from '../../../platform/environment/common/environment.js';\nimport { GlobalExtensionEnablementService } from '../../../platform/extensionManagement/common/extensionEnablementService.js';\nimport { ExtensionGalleryService } from '../../../platform/extensionManagement/common/extensionGalleryService.js';\nimport { IAllowedExtensionsService, IExtensionGalleryService, IExtensionManagementService, IExtensionTipsService, IGlobalExtensionEnablementService } from '../../../platform/extensionManagement/common/extensionManagement.js';\nimport { ExtensionSignatureVerificationService, IExtensionSignatureVerificationService } from '../../../platform/extensionManagement/node/extensionSignatureVerificationService.js';\nimport { ExtensionManagementChannel, ExtensionTipsChannel } from '../../../platform/extensionManagement/common/extensionManagementIpc.js';\nimport { ExtensionManagementService, INativeServerExtensionManagementService } from '../../../platform/extensionManagement/node/extensionManagementService.js';\nimport { IExtensionRecommendationNotificationService } from '../../../platform/extensionRecommendations/common/extensionRecommendations.js';\nimport { IFileService } from '../../../platform/files/common/files.js';\nimport { FileService } from '../../../platform/files/common/fileService.js';\nimport { DiskFileSystemProvider } from '../../../platform/files/node/diskFileSystemProvider.js';\nimport { SyncDescriptor } from '../../../platform/instantiation/common/descriptors.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../platform/instantiation/common/instantiation.js';\nimport { InstantiationService } from '../../../platform/instantiation/common/instantiationService.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { ILanguagePackService } from '../../../platform/languagePacks/common/languagePacks.js';\nimport { NativeLanguagePackService } from '../../../platform/languagePacks/node/languagePacks.js';\nimport { ConsoleLogger, ILoggerService, ILogService, LoggerGroup } from '../../../platform/log/common/log.js';\nimport { LoggerChannelClient } from '../../../platform/log/common/logIpc.js';\nimport product from '../../../platform/product/common/product.js';\nimport { IProductService } from '../../../platform/product/common/productService.js';\nimport { IRequestService } from '../../../platform/request/common/request.js';\nimport { ISharedProcessConfiguration } from '../../../platform/sharedProcess/node/sharedProcess.js';\nimport { IStorageService } from '../../../platform/storage/common/storage.js';\nimport { resolveCommonProperties } from '../../../platform/telemetry/common/commonProperties.js';\nimport { ICustomEndpointTelemetryService, ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\nimport { TelemetryAppenderChannel } from '../../../platform/telemetry/common/telemetryIpc.js';\nimport { TelemetryLogAppender } from '../../../platform/telemetry/common/telemetryLogAppender.js';\nimport { TelemetryService } from '../../../platform/telemetry/common/telemetryService.js';\nimport { supportsTelemetry, ITelemetryAppender, NullAppender, NullTelemetryService, getPiiPathsFromEnvironment, isInternalTelemetry, isLoggingOnly } from '../../../platform/telemetry/common/telemetryUtils.js';\nimport { CustomEndpointTelemetryService } from '../../../platform/telemetry/node/customEndpointTelemetryService.js';\nimport { ExtensionStorageService, IExtensionStorageService } from '../../../platform/extensionManagement/common/extensionStorage.js';\nimport { IgnoredExtensionsManagementService, IIgnoredExtensionsManagementService } from '../../../platform/userDataSync/common/ignoredExtensions.js';\nimport { IUserDataSyncLocalStoreService, IUserDataSyncLogService, IUserDataSyncEnablementService, IUserDataSyncService, IUserDataSyncStoreManagementService, IUserDataSyncStoreService, IUserDataSyncUtilService, registerConfiguration as registerUserDataSyncConfiguration, IUserDataSyncResourceProviderService } from '../../../platform/userDataSync/common/userDataSync.js';\nimport { IUserDataSyncAccountService, UserDataSyncAccountService } from '../../../platform/userDataSync/common/userDataSyncAccount.js';\nimport { UserDataSyncLocalStoreService } from '../../../platform/userDataSync/common/userDataSyncLocalStoreService.js';\nimport { UserDataSyncAccountServiceChannel, UserDataSyncStoreManagementServiceChannel } from '../../../platform/userDataSync/common/userDataSyncIpc.js';\nimport { UserDataSyncLogService } from '../../../platform/userDataSync/common/userDataSyncLog.js';\nimport { IUserDataSyncMachinesService, UserDataSyncMachinesService } from '../../../platform/userDataSync/common/userDataSyncMachines.js';\nimport { UserDataSyncEnablementService } from '../../../platform/userDataSync/common/userDataSyncEnablementService.js';\nimport { UserDataSyncService } from '../../../platform/userDataSync/common/userDataSyncService.js';\nimport { UserDataSyncServiceChannel } from '../../../platform/userDataSync/common/userDataSyncServiceIpc.js';\nimport { UserDataSyncStoreManagementService, UserDataSyncStoreService } from '../../../platform/userDataSync/common/userDataSyncStoreService.js';\nimport { IUserDataProfileStorageService } from '../../../platform/userDataProfile/common/userDataProfileStorageService.js';\nimport { SharedProcessUserDataProfileStorageService } from '../../../platform/userDataProfile/node/userDataProfileStorageService.js';\nimport { ActiveWindowManager } from '../../../platform/windows/node/windowTracker.js';\nimport { ISignService } from '../../../platform/sign/common/sign.js';\nimport { SignService } from '../../../platform/sign/node/signService.js';\nimport { ISharedTunnelsService } from '../../../platform/tunnel/common/tunnel.js';\nimport { SharedTunnelsService } from '../../../platform/tunnel/node/tunnelService.js';\nimport { ipcSharedProcessTunnelChannelName, ISharedProcessTunnelService } from '../../../platform/remote/common/sharedProcessTunnelService.js';\nimport { SharedProcessTunnelService } from '../../../platform/tunnel/node/sharedProcessTunnelService.js';\nimport { IUriIdentityService } from '../../../platform/uriIdentity/common/uriIdentity.js';\nimport { UriIdentityService } from '../../../platform/uriIdentity/common/uriIdentityService.js';\nimport { isLinux } from '../../../base/common/platform.js';\nimport { FileUserDataProvider } from '../../../platform/userData/common/fileUserDataProvider.js';\nimport { DiskFileSystemProviderClient, LOCAL_FILE_SYSTEM_CHANNEL_NAME } from '../../../platform/files/common/diskFileSystemProviderClient.js';\nimport { InspectProfilingService as V8InspectProfilingService } from '../../../platform/profiling/node/profilingService.js';\nimport { IV8InspectProfilingService } from '../../../platform/profiling/common/profiling.js';\nimport { IExtensionsScannerService } from '../../../platform/extensionManagement/common/extensionsScannerService.js';\nimport { ExtensionsScannerService } from '../../../platform/extensionManagement/node/extensionsScannerService.js';\nimport { IUserDataProfilesService } from '../../../platform/userDataProfile/common/userDataProfile.js';\nimport { IExtensionsProfileScannerService } from '../../../platform/extensionManagement/common/extensionsProfileScannerService.js';\nimport { PolicyChannelClient } from '../../../platform/policy/common/policyIpc.js';\nimport { IPolicyService, NullPolicyService } from '../../../platform/policy/common/policy.js';\nimport { UserDataProfilesService } from '../../../platform/userDataProfile/common/userDataProfileIpc.js';\nimport { OneDataSystemAppender } from '../../../platform/telemetry/node/1dsAppender.js';\nimport { UserDataProfilesCleaner } from './contrib/userDataProfilesCleaner.js';\nimport { IRemoteTunnelService } from '../../../platform/remoteTunnel/common/remoteTunnel.js';\nimport { UserDataSyncResourceProviderService } from '../../../platform/userDataSync/common/userDataSyncResourceProvider.js';\nimport { ExtensionsContributions } from './contrib/extensions.js';\nimport { localize } from '../../../nls.js';\nimport { LogService } from '../../../platform/log/common/logService.js';\nimport { ISharedProcessLifecycleService, SharedProcessLifecycleService } from '../../../platform/lifecycle/node/sharedProcessLifecycleService.js';\nimport { RemoteTunnelService } from '../../../platform/remoteTunnel/node/remoteTunnelService.js';\nimport { ExtensionsProfileScannerService } from '../../../platform/extensionManagement/node/extensionsProfileScannerService.js';\nimport { ExtensionRecommendationNotificationServiceChannelClient } from '../../../platform/extensionRecommendations/common/extensionRecommendationsIpc.js';\nimport { INativeHostService } from '../../../platform/native/common/native.js';\nimport { NativeHostService } from '../../../platform/native/common/nativeHostService.js';\nimport { UserDataAutoSyncService } from '../../../platform/userDataSync/node/userDataAutoSyncService.js';\nimport { ExtensionTipsService } from '../../../platform/extensionManagement/node/extensionTipsService.js';\nimport { IMainProcessService, MainProcessService } from '../../../platform/ipc/common/mainProcessService.js';\nimport { RemoteStorageService } from '../../../platform/storage/common/storageService.js';\nimport { IRemoteSocketFactoryService, RemoteSocketFactoryService } from '../../../platform/remote/common/remoteSocketFactoryService.js';\nimport { RemoteConnectionType } from '../../../platform/remote/common/remoteAuthorityResolver.js';\nimport { nodeSocketFactory } from '../../../platform/remote/node/nodeSocketFactory.js';\nimport { NativeEnvironmentService } from '../../../platform/environment/node/environmentService.js';\nimport { SharedProcessRawConnection, SharedProcessLifecycle } from '../../../platform/sharedProcess/common/sharedProcess.js';\nimport { getOSReleaseInfo } from '../../../base/node/osReleaseInfo.js';\nimport { getDesktopEnvironment } from '../../../base/common/desktopEnvironmentInfo.js';\nimport { getCodeDisplayProtocol, getDisplayProtocol } from '../../../base/node/osDisplayProtocolInfo.js';\nimport { RequestService } from '../../../platform/request/electron-utility/requestService.js';\nimport { DefaultExtensionsInitializer } from './contrib/defaultExtensionsInitializer.js';\nimport { AllowedExtensionsService } from '../../../platform/extensionManagement/common/allowedExtensionsService.js';\nimport { IExtensionGalleryManifestService } from '../../../platform/extensionManagement/common/extensionGalleryManifest.js';\nimport { ExtensionGalleryManifestIPCService } from '../../../platform/extensionManagement/common/extensionGalleryManifestServiceIpc.js';\nimport { ISharedWebContentExtractorService } from '../../../platform/webContentExtractor/common/webContentExtractor.js';\nimport { SharedWebContentExtractorService } from '../../../platform/webContentExtractor/node/sharedWebContentExtractorService.js';\nimport { McpManagementService } from '../../../platform/mcp/node/mcpManagementService.js';\nimport { IAllowedMcpServersService, IMcpGalleryService, IMcpManagementService } from '../../../platform/mcp/common/mcpManagement.js';\nimport { IMcpResourceScannerService, McpResourceScannerService } from '../../../platform/mcp/common/mcpResourceScannerService.js';\nimport { McpGalleryService } from '../../../platform/mcp/common/mcpGalleryService.js';\nimport { McpManagementChannel } from '../../../platform/mcp/common/mcpManagementIpc.js';\nimport { AllowedMcpServersService } from '../../../platform/mcp/common/allowedMcpServersService.js';\nimport { IMcpGalleryManifestService } from '../../../platform/mcp/common/mcpGalleryManifest.js';\nimport { McpGalleryManifestIPCService } from '../../../platform/mcp/common/mcpGalleryManifestServiceIpc.js';\n\nclass SharedProcessMain extends Disposable implements IClientConnectionFilter {\n\n\tprivate readonly server = this._register(new UtilityProcessMessagePortServer(this));\n\n\tprivate lifecycleService: SharedProcessLifecycleService | undefined = undefined;\n\n\tprivate readonly onDidWindowConnectRaw = this._register(new Emitter<MessagePortMain>());\n\n\tconstructor(private configuration: ISharedProcessConfiguration) {\n\t\tsuper();\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// Shared process lifecycle\n\t\tlet didExit = false;\n\t\tconst onExit = () => {\n\t\t\tif (!didExit) {\n\t\t\t\tdidExit = true;\n\n\t\t\t\tthis.lifecycleService?.fireOnWillShutdown();\n\t\t\t\tthis.dispose();\n\t\t\t}\n\t\t};\n\t\tprocess.once('exit', onExit);\n\t\tonce(process.parentPort, SharedProcessLifecycle.exit, onExit);\n\t}\n\n\tasync init(): Promise<void> {\n\n\t\t// Services\n\t\tconst instantiationService = await this.initServices();\n\n\t\t// Config\n\t\tregisterUserDataSyncConfiguration();\n\n\t\tinstantiationService.invokeFunction(accessor => {\n\t\t\tconst logService = accessor.get(ILogService);\n\t\t\tconst telemetryService = accessor.get(ITelemetryService);\n\n\t\t\t// Log info\n\t\t\tlogService.trace('sharedProcess configuration', JSON.stringify(this.configuration));\n\n\t\t\t// Channels\n\t\t\tthis.initChannels(accessor);\n\n\t\t\t// Error handler\n\t\t\tthis.registerErrorHandler(logService);\n\n\t\t\t// Report Client OS/DE Info\n\t\t\tthis.reportClientOSInfo(telemetryService, logService);\n\t\t});\n\n\t\t// Instantiate Contributions\n\t\tthis._register(combinedDisposable(\n\t\t\tinstantiationService.createInstance(CodeCacheCleaner, this.configuration.codeCachePath),\n\t\t\tinstantiationService.createInstance(LanguagePackCachedDataCleaner),\n\t\t\tinstantiationService.createInstance(UnusedWorkspaceStorageDataCleaner),\n\t\t\tinstantiationService.createInstance(LogsDataCleaner),\n\t\t\tinstantiationService.createInstance(LocalizationsUpdater),\n\t\t\tinstantiationService.createInstance(ExtensionsContributions),\n\t\t\tinstantiationService.createInstance(UserDataProfilesCleaner),\n\t\t\tinstantiationService.createInstance(DefaultExtensionsInitializer)\n\t\t));\n\t}\n\n\tprivate async initServices(): Promise<IInstantiationService> {\n\t\tconst services = new ServiceCollection();\n\n\t\t// Product\n\t\tconst productService = { _serviceBrand: undefined, ...product };\n\t\tservices.set(IProductService, productService);\n\n\t\t// Main Process\n\t\tconst mainRouter = new StaticRouter(ctx => ctx === 'main');\n\t\tconst mainProcessService = new MainProcessService(this.server, mainRouter);\n\t\tservices.set(IMainProcessService, mainProcessService);\n\n\t\t// Policies\n\t\tconst policyService = this.configuration.policiesData ? new PolicyChannelClient(this.configuration.policiesData, mainProcessService.getChannel('policy')) : new NullPolicyService();\n\t\tservices.set(IPolicyService, policyService);\n\n\t\t// Environment\n\t\tconst environmentService = new NativeEnvironmentService(this.configuration.args, productService);\n\t\tservices.set(INativeEnvironmentService, environmentService);\n\n\t\t// Logger\n\t\tconst loggerService = new LoggerChannelClient(undefined, this.configuration.logLevel, environmentService.logsHome, this.configuration.loggers.map(loggerResource => ({ ...loggerResource, resource: URI.revive(loggerResource.resource) })), mainProcessService.getChannel('logger'));\n\t\tservices.set(ILoggerService, loggerService);\n\n\t\t// Log\n\t\tconst sharedLogGroup: LoggerGroup = { id: 'shared', name: localize('sharedLog', \"Shared\") };\n\t\tconst logger = this._register(loggerService.createLogger('sharedprocess', { name: localize('sharedLog', \"Shared\"), group: sharedLogGroup }));\n\t\tconst consoleLogger = this._register(new ConsoleLogger(logger.getLevel()));\n\t\tconst logService = this._register(new LogService(logger, [consoleLogger]));\n\t\tservices.set(ILogService, logService);\n\n\t\t// Lifecycle\n\t\tthis.lifecycleService = this._register(new SharedProcessLifecycleService(logService));\n\t\tservices.set(ISharedProcessLifecycleService, this.lifecycleService);\n\n\t\t// Files\n\t\tconst fileService = this._register(new FileService(logService));\n\t\tservices.set(IFileService, fileService);\n\n\t\tconst diskFileSystemProvider = this._register(new DiskFileSystemProvider(logService));\n\t\tfileService.registerProvider(Schemas.file, diskFileSystemProvider);\n\n\t\t// URI Identity\n\t\tconst uriIdentityService = new UriIdentityService(fileService);\n\t\tservices.set(IUriIdentityService, uriIdentityService);\n\n\t\t// User Data Profiles\n\t\tconst userDataProfilesService = this._register(new UserDataProfilesService(this.configuration.profiles.all, URI.revive(this.configuration.profiles.home).with({ scheme: environmentService.userRoamingDataHome.scheme }), mainProcessService.getChannel('userDataProfiles')));\n\t\tservices.set(IUserDataProfilesService, userDataProfilesService);\n\n\t\tconst userDataFileSystemProvider = this._register(new FileUserDataProvider(\n\t\t\tSchemas.file,\n\t\t\t// Specifically for user data, use the disk file system provider\n\t\t\t// from the main process to enable atomic read/write operations.\n\t\t\t// Since user data can change very frequently across multiple\n\t\t\t// processes, we want a single process handling these operations.\n\t\t\tthis._register(new DiskFileSystemProviderClient(mainProcessService.getChannel(LOCAL_FILE_SYSTEM_CHANNEL_NAME), { pathCaseSensitive: isLinux })),\n\t\t\tSchemas.vscodeUserData,\n\t\t\tuserDataProfilesService,\n\t\t\turiIdentityService,\n\t\t\tlogService\n\t\t));\n\t\tfileService.registerProvider(Schemas.vscodeUserData, userDataFileSystemProvider);\n\n\t\t// Configuration\n\t\tconst configurationService = this._register(new ConfigurationService(userDataProfilesService.defaultProfile.settingsResource, fileService, policyService, logService));\n\t\tservices.set(IConfigurationService, configurationService);\n\n\t\t// Storage (global access only)\n\t\tconst storageService = new RemoteStorageService(undefined, { defaultProfile: userDataProfilesService.defaultProfile, currentProfile: userDataProfilesService.defaultProfile }, mainProcessService, environmentService);\n\t\tservices.set(IStorageService, storageService);\n\t\tthis._register(toDisposable(() => storageService.flush()));\n\n\t\t// Initialize config & storage in parallel\n\t\tawait Promise.all([\n\t\t\tconfigurationService.initialize(),\n\t\t\tstorageService.initialize()\n\t\t]);\n\n\t\t// Request\n\t\tconst networkLogger = this._register(loggerService.createLogger(`network-shared`, { name: localize('networkk', \"Network\"), group: sharedLogGroup }));\n\t\tconst requestService = new RequestService(configurationService, environmentService, this._register(new LogService(networkLogger)));\n\t\tservices.set(IRequestService, requestService);\n\n\t\t// Checksum\n\t\tservices.set(IChecksumService, new SyncDescriptor(ChecksumService, undefined, false /* proxied to other processes */));\n\n\t\t// V8 Inspect profiler\n\t\tservices.set(IV8InspectProfilingService, new SyncDescriptor(V8InspectProfilingService, undefined, false /* proxied to other processes */));\n\n\t\t// Native Host\n\t\tconst nativeHostService = new NativeHostService(-1 /* we are not running in a browser window context */, mainProcessService) as INativeHostService;\n\t\tservices.set(INativeHostService, nativeHostService);\n\n\t\t// Download\n\t\tservices.set(IDownloadService, new SyncDescriptor(DownloadService, undefined, true));\n\n\t\t// Extension recommendations\n\t\tconst activeWindowManager = this._register(new ActiveWindowManager(nativeHostService));\n\t\tconst activeWindowRouter = new StaticRouter(ctx => activeWindowManager.getActiveClientId().then(id => ctx === id));\n\t\tservices.set(IExtensionRecommendationNotificationService, new ExtensionRecommendationNotificationServiceChannelClient(this.server.getChannel('extensionRecommendationNotification', activeWindowRouter)));\n\n\t\t// Telemetry\n\t\tlet telemetryService: ITelemetryService;\n\t\tconst appenders: ITelemetryAppender[] = [];\n\t\tconst internalTelemetry = isInternalTelemetry(productService, configurationService);\n\t\tif (supportsTelemetry(productService, environmentService)) {\n\t\t\tconst logAppender = new TelemetryLogAppender('', false, loggerService, environmentService, productService);\n\t\t\tappenders.push(logAppender);\n\t\t\tif (!isLoggingOnly(productService, environmentService) && productService.aiConfig?.ariaKey) {\n\t\t\t\tconst collectorAppender = new OneDataSystemAppender(requestService, internalTelemetry, 'monacoworkbench', null, productService.aiConfig.ariaKey);\n\t\t\t\tthis._register(toDisposable(() => collectorAppender.flush())); // Ensure the 1DS appender is disposed so that it flushes remaining data\n\t\t\t\tappenders.push(collectorAppender);\n\t\t\t}\n\n\t\t\ttelemetryService = new TelemetryService({\n\t\t\t\tappenders,\n\t\t\t\tcommonProperties: resolveCommonProperties(release(), hostname(), process.arch, productService.commit, productService.version, this.configuration.machineId, this.configuration.sqmId, this.configuration.devDeviceId, internalTelemetry, productService.date),\n\t\t\t\tsendErrorTelemetry: true,\n\t\t\t\tpiiPaths: getPiiPathsFromEnvironment(environmentService),\n\t\t\t}, configurationService, productService);\n\t\t} else {\n\t\t\ttelemetryService = NullTelemetryService;\n\t\t\tconst nullAppender = NullAppender;\n\t\t\tappenders.push(nullAppender);\n\t\t}\n\n\t\tthis.server.registerChannel('telemetryAppender', new TelemetryAppenderChannel(appenders));\n\t\tservices.set(ITelemetryService, telemetryService);\n\n\t\t// Custom Endpoint Telemetry\n\t\tconst customEndpointTelemetryService = new CustomEndpointTelemetryService(configurationService, telemetryService, loggerService, environmentService, productService);\n\t\tservices.set(ICustomEndpointTelemetryService, customEndpointTelemetryService);\n\n\t\t// Extension Management\n\t\tservices.set(IExtensionsProfileScannerService, new SyncDescriptor(ExtensionsProfileScannerService, undefined, true));\n\t\tservices.set(IExtensionsScannerService, new SyncDescriptor(ExtensionsScannerService, undefined, true));\n\t\tservices.set(IExtensionSignatureVerificationService, new SyncDescriptor(ExtensionSignatureVerificationService, undefined, true));\n\t\tservices.set(IAllowedExtensionsService, new SyncDescriptor(AllowedExtensionsService, undefined, true));\n\t\tservices.set(INativeServerExtensionManagementService, new SyncDescriptor(ExtensionManagementService, undefined, true));\n\n\t\t// MCP Management\n\t\tservices.set(IAllowedMcpServersService, new SyncDescriptor(AllowedMcpServersService, undefined, true));\n\t\tservices.set(IMcpGalleryManifestService, new McpGalleryManifestIPCService(this.server));\n\t\tservices.set(IMcpGalleryService, new SyncDescriptor(McpGalleryService, undefined, true));\n\t\tservices.set(IMcpResourceScannerService, new SyncDescriptor(McpResourceScannerService, undefined, true));\n\t\tservices.set(IMcpManagementService, new SyncDescriptor(McpManagementService, undefined, true));\n\n\t\t// Extension Gallery\n\t\tservices.set(IExtensionGalleryManifestService, new ExtensionGalleryManifestIPCService(this.server, productService));\n\t\tservices.set(IExtensionGalleryService, new SyncDescriptor(ExtensionGalleryService, undefined, true));\n\n\t\t// Extension Tips\n\t\tservices.set(IExtensionTipsService, new SyncDescriptor(ExtensionTipsService, undefined, false /* Eagerly scans and computes exe based recommendations */));\n\n\t\t// Localizations\n\t\tservices.set(ILanguagePackService, new SyncDescriptor(NativeLanguagePackService, undefined, false /* proxied to other processes */));\n\n\t\t// Diagnostics\n\t\tservices.set(IDiagnosticsService, new SyncDescriptor(DiagnosticsService, undefined, false /* proxied to other processes */));\n\n\t\t// Settings Sync\n\t\tservices.set(IUserDataSyncAccountService, new SyncDescriptor(UserDataSyncAccountService, undefined, true));\n\t\tservices.set(IUserDataSyncLogService, new SyncDescriptor(UserDataSyncLogService, undefined, true));\n\t\tservices.set(IUserDataSyncUtilService, ProxyChannel.toService(this.server.getChannel('userDataSyncUtil', client => client.ctx !== 'main')));\n\t\tservices.set(IGlobalExtensionEnablementService, new SyncDescriptor(GlobalExtensionEnablementService, undefined, false /* Eagerly resets installed extensions */));\n\t\tservices.set(IIgnoredExtensionsManagementService, new SyncDescriptor(IgnoredExtensionsManagementService, undefined, true));\n\t\tservices.set(IExtensionStorageService, new SyncDescriptor(ExtensionStorageService));\n\t\tservices.set(IUserDataSyncStoreManagementService, new SyncDescriptor(UserDataSyncStoreManagementService, undefined, true));\n\t\tservices.set(IUserDataSyncStoreService, new SyncDescriptor(UserDataSyncStoreService, undefined, true));\n\t\tservices.set(IUserDataSyncMachinesService, new SyncDescriptor(UserDataSyncMachinesService, undefined, true));\n\t\tservices.set(IUserDataSyncLocalStoreService, new SyncDescriptor(UserDataSyncLocalStoreService, undefined, false /* Eagerly cleans up old backups */));\n\t\tservices.set(IUserDataSyncEnablementService, new SyncDescriptor(UserDataSyncEnablementService, undefined, true));\n\t\tservices.set(IUserDataSyncService, new SyncDescriptor(UserDataSyncService, undefined, false /* Initializes the Sync State */));\n\t\tservices.set(IUserDataProfileStorageService, new SyncDescriptor(SharedProcessUserDataProfileStorageService, undefined, true));\n\t\tservices.set(IUserDataSyncResourceProviderService, new SyncDescriptor(UserDataSyncResourceProviderService, undefined, true));\n\n\t\t// Signing\n\t\tservices.set(ISignService, new SyncDescriptor(SignService, undefined, false /* proxied to other processes */));\n\n\t\t// Tunnel\n\t\tconst remoteSocketFactoryService = new RemoteSocketFactoryService();\n\t\tservices.set(IRemoteSocketFactoryService, remoteSocketFactoryService);\n\t\tremoteSocketFactoryService.register(RemoteConnectionType.WebSocket, nodeSocketFactory);\n\t\tservices.set(ISharedTunnelsService, new SyncDescriptor(SharedTunnelsService));\n\t\tservices.set(ISharedProcessTunnelService, new SyncDescriptor(SharedProcessTunnelService));\n\n\t\t// Remote Tunnel\n\t\tservices.set(IRemoteTunnelService, new SyncDescriptor(RemoteTunnelService));\n\n\t\t// Web Content Extractor\n\t\tservices.set(ISharedWebContentExtractorService, new SyncDescriptor(SharedWebContentExtractorService));\n\n\t\treturn new InstantiationService(services);\n\t}\n\n\tprivate initChannels(accessor: ServicesAccessor): void {\n\n\t\t// Extensions Management\n\t\tconst channel = new ExtensionManagementChannel(accessor.get(IExtensionManagementService), () => null);\n\t\tthis.server.registerChannel('extensions', channel);\n\n\t\t// Mcp Management\n\t\tconst mcpManagementChannel = new McpManagementChannel(accessor.get(IMcpManagementService), () => null);\n\t\tthis.server.registerChannel('mcpManagement', mcpManagementChannel);\n\n\t\t// Language Packs\n\t\tconst languagePacksChannel = ProxyChannel.fromService(accessor.get(ILanguagePackService), this._store);\n\t\tthis.server.registerChannel('languagePacks', languagePacksChannel);\n\n\t\t// Diagnostics\n\t\tconst diagnosticsChannel = ProxyChannel.fromService(accessor.get(IDiagnosticsService), this._store);\n\t\tthis.server.registerChannel('diagnostics', diagnosticsChannel);\n\n\t\t// Extension Tips\n\t\tconst extensionTipsChannel = new ExtensionTipsChannel(accessor.get(IExtensionTipsService));\n\t\tthis.server.registerChannel('extensionTipsService', extensionTipsChannel);\n\n\t\t// Checksum\n\t\tconst checksumChannel = ProxyChannel.fromService(accessor.get(IChecksumService), this._store);\n\t\tthis.server.registerChannel('checksum', checksumChannel);\n\n\t\t// Profiling\n\t\tconst profilingChannel = ProxyChannel.fromService(accessor.get(IV8InspectProfilingService), this._store);\n\t\tthis.server.registerChannel('v8InspectProfiling', profilingChannel);\n\n\t\t// Settings Sync\n\t\tconst userDataSyncMachineChannel = ProxyChannel.fromService(accessor.get(IUserDataSyncMachinesService), this._store);\n\t\tthis.server.registerChannel('userDataSyncMachines', userDataSyncMachineChannel);\n\n\t\t// Custom Endpoint Telemetry\n\t\tconst customEndpointTelemetryChannel = ProxyChannel.fromService(accessor.get(ICustomEndpointTelemetryService), this._store);\n\t\tthis.server.registerChannel('customEndpointTelemetry', customEndpointTelemetryChannel);\n\n\t\tconst userDataSyncAccountChannel = new UserDataSyncAccountServiceChannel(accessor.get(IUserDataSyncAccountService));\n\t\tthis.server.registerChannel('userDataSyncAccount', userDataSyncAccountChannel);\n\n\t\tconst userDataSyncStoreManagementChannel = new UserDataSyncStoreManagementServiceChannel(accessor.get(IUserDataSyncStoreManagementService));\n\t\tthis.server.registerChannel('userDataSyncStoreManagement', userDataSyncStoreManagementChannel);\n\n\t\tconst userDataSyncChannel = new UserDataSyncServiceChannel(accessor.get(IUserDataSyncService), accessor.get(IUserDataProfilesService), accessor.get(ILogService));\n\t\tthis.server.registerChannel('userDataSync', userDataSyncChannel);\n\n\t\tconst userDataAutoSync = this._register(accessor.get(IInstantiationService).createInstance(UserDataAutoSyncService));\n\t\tthis.server.registerChannel('userDataAutoSync', ProxyChannel.fromService(userDataAutoSync, this._store));\n\n\t\tthis.server.registerChannel('IUserDataSyncResourceProviderService', ProxyChannel.fromService(accessor.get(IUserDataSyncResourceProviderService), this._store));\n\n\t\t// Tunnel\n\t\tconst sharedProcessTunnelChannel = ProxyChannel.fromService(accessor.get(ISharedProcessTunnelService), this._store);\n\t\tthis.server.registerChannel(ipcSharedProcessTunnelChannelName, sharedProcessTunnelChannel);\n\n\t\t// Remote Tunnel\n\t\tconst remoteTunnelChannel = ProxyChannel.fromService(accessor.get(IRemoteTunnelService), this._store);\n\t\tthis.server.registerChannel('remoteTunnel', remoteTunnelChannel);\n\n\t\t// Web Content Extractor\n\t\tconst webContentExtractorChannel = ProxyChannel.fromService(accessor.get(ISharedWebContentExtractorService), this._store);\n\t\tthis.server.registerChannel('sharedWebContentExtractor', webContentExtractorChannel);\n\t}\n\n\tprivate registerErrorHandler(logService: ILogService): void {\n\n\t\t// Listen on global error events\n\t\tprocess.on('uncaughtException', error => onUnexpectedError(error));\n\t\tprocess.on('unhandledRejection', (reason: unknown) => onUnexpectedError(reason));\n\n\t\t// Install handler for unexpected errors\n\t\tsetUnexpectedErrorHandler(error => {\n\t\t\tconst message = toErrorMessage(error, true);\n\t\t\tif (!message) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlogService.error(`[uncaught exception in sharedProcess]: ${message}`);\n\t\t});\n\t}\n\n\tprivate async reportClientOSInfo(telemetryService: ITelemetryService, logService: ILogService): Promise<void> {\n\t\tif (isLinux) {\n\t\t\tconst [releaseInfo, displayProtocol] = await Promise.all([\n\t\t\t\tgetOSReleaseInfo(logService.error.bind(logService)),\n\t\t\t\tgetDisplayProtocol(logService.error.bind(logService))\n\t\t\t]);\n\t\t\tconst desktopEnvironment = getDesktopEnvironment();\n\t\t\tconst codeSessionType = getCodeDisplayProtocol(displayProtocol, this.configuration.args['ozone-platform']);\n\t\t\tif (releaseInfo) {\n\t\t\t\ttype ClientPlatformInfoClassification = {\n\t\t\t\t\tplatformId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'A string identifying the operating system without any version information.' };\n\t\t\t\t\tplatformVersionId: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'A string identifying the operating system version excluding any name information or release code.' };\n\t\t\t\t\tplatformIdLike: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'A string identifying the operating system the current OS derivate is closely related to.' };\n\t\t\t\t\tdesktopEnvironment: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'A string identifying the desktop environment the user is using.' };\n\t\t\t\t\tdisplayProtocol: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'A string identifying the users display protocol type.' };\n\t\t\t\t\tcodeDisplayProtocol: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'A string identifying the vscode display protocol type.' };\n\t\t\t\t\towner: 'benibenj';\n\t\t\t\t\tcomment: 'Provides insight into the distro and desktop environment information on Linux.';\n\t\t\t\t};\n\t\t\t\ttype ClientPlatformInfoEvent = {\n\t\t\t\t\tplatformId: string;\n\t\t\t\t\tplatformVersionId: string | undefined;\n\t\t\t\t\tplatformIdLike: string | undefined;\n\t\t\t\t\tdesktopEnvironment: string | undefined;\n\t\t\t\t\tdisplayProtocol: string | undefined;\n\t\t\t\t\tcodeDisplayProtocol: string | undefined;\n\t\t\t\t};\n\t\t\t\ttelemetryService.publicLog2<ClientPlatformInfoEvent, ClientPlatformInfoClassification>('clientPlatformInfo', {\n\t\t\t\t\tplatformId: releaseInfo.id,\n\t\t\t\t\tplatformVersionId: releaseInfo.version_id,\n\t\t\t\t\tplatformIdLike: releaseInfo.id_like,\n\t\t\t\t\tdesktopEnvironment: desktopEnvironment,\n\t\t\t\t\tdisplayProtocol: displayProtocol,\n\t\t\t\t\tcodeDisplayProtocol: codeSessionType\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\thandledClientConnection(e: MessageEvent): boolean {\n\n\t\t// This filter on message port messages will look for\n\t\t// attempts of a window to connect raw to the shared\n\t\t// process to handle these connections separate from\n\t\t// our IPC based protocol.\n\n\t\tif (e.data !== SharedProcessRawConnection.response) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst port = e.ports.at(0);\n\t\tif (port) {\n\t\t\tthis.onDidWindowConnectRaw.fire(port);\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\nexport async function main(configuration: ISharedProcessConfiguration): Promise<void> {\n\n\t// create shared process and signal back to main that we are\n\t// ready to accept message ports as client connections\n\n\ttry {\n\t\tconst sharedProcess = new SharedProcessMain(configuration);\n\t\tprocess.parentPort.postMessage(SharedProcessLifecycle.ipcReady);\n\n\t\t// await initialization and signal this back to electron-main\n\t\tawait sharedProcess.init();\n\n\t\tprocess.parentPort.postMessage(SharedProcessLifecycle.initDone);\n\t} catch (error) {\n\t\tprocess.parentPort.postMessage({ error: error.toString() });\n\t}\n}\n\nconst handle = setTimeout(() => {\n\tprocess.parentPort.postMessage({ warning: '[SharedProcess] did not receive configuration within 30s...' });\n}, 30000);\n\nprocess.parentPort.once('message', (e: Electron.MessageEvent) => {\n\tclearTimeout(handle);\n\tmain(e.data as ISharedProcessConfiguration);\n});\n"]}