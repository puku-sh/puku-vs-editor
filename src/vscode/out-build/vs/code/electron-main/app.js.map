{"version":3,"sources":["vs/code/electron-main/app.ts"],"names":[],"mappings":"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","file":"app.js","sourceRoot":"file:///Users/sahamed/Desktop/puku-vs-editor/puku-editor/github/vscode/src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { app, protocol, session, Session, systemPreferences, WebFrameMain } from 'electron';\nimport { addUNCHostToAllowlist, disableUNCAccessRestrictions } from '../../base/node/unc.js';\nimport { validatedIpcMain } from '../../base/parts/ipc/electron-main/ipcMain.js';\nimport { hostname, release } from 'os';\nimport { VSBuffer } from '../../base/common/buffer.js';\nimport { toErrorMessage } from '../../base/common/errorMessage.js';\nimport { Event } from '../../base/common/event.js';\nimport { parse } from '../../base/common/jsonc.js';\nimport { getPathLabel } from '../../base/common/labels.js';\nimport { Disposable, DisposableStore } from '../../base/common/lifecycle.js';\nimport { Schemas, VSCODE_AUTHORITY } from '../../base/common/network.js';\nimport { join, posix } from '../../base/common/path.js';\nimport { IProcessEnvironment, isLinux, isLinuxSnap, isMacintosh, isWindows, OS } from '../../base/common/platform.js';\nimport { assertType } from '../../base/common/types.js';\nimport { URI } from '../../base/common/uri.js';\nimport { generateUuid } from '../../base/common/uuid.js';\nimport { registerContextMenuListener } from '../../base/parts/contextmenu/electron-main/contextmenu.js';\nimport { getDelayedChannel, ProxyChannel, StaticRouter } from '../../base/parts/ipc/common/ipc.js';\nimport { Server as ElectronIPCServer } from '../../base/parts/ipc/electron-main/ipc.electron.js';\nimport { Client as MessagePortClient } from '../../base/parts/ipc/electron-main/ipc.mp.js';\nimport { Server as NodeIPCServer } from '../../base/parts/ipc/node/ipc.net.js';\nimport { IProxyAuthService, ProxyAuthService } from '../../platform/native/electron-main/auth.js';\nimport { localize } from '../../nls.js';\nimport { IBackupMainService } from '../../platform/backup/electron-main/backup.js';\nimport { BackupMainService } from '../../platform/backup/electron-main/backupMainService.js';\nimport { IConfigurationService } from '../../platform/configuration/common/configuration.js';\nimport { ElectronExtensionHostDebugBroadcastChannel } from '../../platform/debug/electron-main/extensionHostDebugIpc.js';\nimport { IDiagnosticsService } from '../../platform/diagnostics/common/diagnostics.js';\nimport { DiagnosticsMainService, IDiagnosticsMainService } from '../../platform/diagnostics/electron-main/diagnosticsMainService.js';\nimport { DialogMainService, IDialogMainService } from '../../platform/dialogs/electron-main/dialogMainService.js';\nimport { IEncryptionMainService } from '../../platform/encryption/common/encryptionService.js';\nimport { EncryptionMainService } from '../../platform/encryption/electron-main/encryptionMainService.js';\nimport { NativeBrowserElementsMainService, INativeBrowserElementsMainService } from '../../platform/browserElements/electron-main/nativeBrowserElementsMainService.js';\nimport { NativeParsedArgs } from '../../platform/environment/common/argv.js';\nimport { IEnvironmentMainService } from '../../platform/environment/electron-main/environmentMainService.js';\nimport { isLaunchedFromCli } from '../../platform/environment/node/argvHelper.js';\nimport { getResolvedShellEnv } from '../../platform/shell/node/shellEnv.js';\nimport { IExtensionHostStarter, ipcExtensionHostStarterChannelName } from '../../platform/extensions/common/extensionHostStarter.js';\nimport { ExtensionHostStarter } from '../../platform/extensions/electron-main/extensionHostStarter.js';\nimport { IExternalTerminalMainService } from '../../platform/externalTerminal/electron-main/externalTerminal.js';\nimport { LinuxExternalTerminalService, MacExternalTerminalService, WindowsExternalTerminalService } from '../../platform/externalTerminal/node/externalTerminalService.js';\nimport { LOCAL_FILE_SYSTEM_CHANNEL_NAME } from '../../platform/files/common/diskFileSystemProviderClient.js';\nimport { IFileService } from '../../platform/files/common/files.js';\nimport { DiskFileSystemProviderChannel } from '../../platform/files/electron-main/diskFileSystemProviderServer.js';\nimport { DiskFileSystemProvider } from '../../platform/files/node/diskFileSystemProvider.js';\nimport { SyncDescriptor } from '../../platform/instantiation/common/descriptors.js';\nimport { IInstantiationService, ServicesAccessor } from '../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../platform/instantiation/common/serviceCollection.js';\nimport { ProcessMainService } from '../../platform/process/electron-main/processMainService.js';\nimport { IKeyboardLayoutMainService, KeyboardLayoutMainService } from '../../platform/keyboardLayout/electron-main/keyboardLayoutMainService.js';\nimport { ILaunchMainService, LaunchMainService } from '../../platform/launch/electron-main/launchMainService.js';\nimport { ILifecycleMainService, LifecycleMainPhase, ShutdownReason } from '../../platform/lifecycle/electron-main/lifecycleMainService.js';\nimport { ILoggerService, ILogService } from '../../platform/log/common/log.js';\nimport { IMenubarMainService, MenubarMainService } from '../../platform/menubar/electron-main/menubarMainService.js';\nimport { INativeHostMainService, NativeHostMainService } from '../../platform/native/electron-main/nativeHostMainService.js';\nimport { IProductService } from '../../platform/product/common/productService.js';\nimport { getRemoteAuthority } from '../../platform/remote/common/remoteHosts.js';\nimport { SharedProcess } from '../../platform/sharedProcess/electron-main/sharedProcess.js';\nimport { ISignService } from '../../platform/sign/common/sign.js';\nimport { IStateService } from '../../platform/state/node/state.js';\nimport { StorageDatabaseChannel } from '../../platform/storage/electron-main/storageIpc.js';\nimport { ApplicationStorageMainService, IApplicationStorageMainService, IStorageMainService, StorageMainService } from '../../platform/storage/electron-main/storageMainService.js';\nimport { resolveCommonProperties } from '../../platform/telemetry/common/commonProperties.js';\nimport { ITelemetryService, TelemetryLevel } from '../../platform/telemetry/common/telemetry.js';\nimport { TelemetryAppenderClient } from '../../platform/telemetry/common/telemetryIpc.js';\nimport { ITelemetryServiceConfig, TelemetryService } from '../../platform/telemetry/common/telemetryService.js';\nimport { getPiiPathsFromEnvironment, getTelemetryLevel, isInternalTelemetry, NullTelemetryService, supportsTelemetry } from '../../platform/telemetry/common/telemetryUtils.js';\nimport { IUpdateService } from '../../platform/update/common/update.js';\nimport { UpdateChannel } from '../../platform/update/common/updateIpc.js';\nimport { DarwinUpdateService } from '../../platform/update/electron-main/updateService.darwin.js';\nimport { LinuxUpdateService } from '../../platform/update/electron-main/updateService.linux.js';\nimport { SnapUpdateService } from '../../platform/update/electron-main/updateService.snap.js';\nimport { Win32UpdateService } from '../../platform/update/electron-main/updateService.win32.js';\nimport { IOpenURLOptions, IURLService } from '../../platform/url/common/url.js';\nimport { URLHandlerChannelClient, URLHandlerRouter } from '../../platform/url/common/urlIpc.js';\nimport { NativeURLService } from '../../platform/url/common/urlService.js';\nimport { ElectronURLListener } from '../../platform/url/electron-main/electronUrlListener.js';\nimport { IWebviewManagerService } from '../../platform/webview/common/webviewManagerService.js';\nimport { WebviewMainService } from '../../platform/webview/electron-main/webviewMainService.js';\nimport { isFolderToOpen, isWorkspaceToOpen, IWindowOpenable } from '../../platform/window/common/window.js';\nimport { getAllWindowsExcludingOffscreen, IWindowsMainService, OpenContext } from '../../platform/windows/electron-main/windows.js';\nimport { ICodeWindow } from '../../platform/window/electron-main/window.js';\nimport { WindowsMainService } from '../../platform/windows/electron-main/windowsMainService.js';\nimport { ActiveWindowManager } from '../../platform/windows/node/windowTracker.js';\nimport { hasWorkspaceFileExtension } from '../../platform/workspace/common/workspace.js';\nimport { IWorkspacesService } from '../../platform/workspaces/common/workspaces.js';\nimport { IWorkspacesHistoryMainService, WorkspacesHistoryMainService } from '../../platform/workspaces/electron-main/workspacesHistoryMainService.js';\nimport { WorkspacesMainService } from '../../platform/workspaces/electron-main/workspacesMainService.js';\nimport { IWorkspacesManagementMainService, WorkspacesManagementMainService } from '../../platform/workspaces/electron-main/workspacesManagementMainService.js';\nimport { IPolicyService } from '../../platform/policy/common/policy.js';\nimport { PolicyChannel } from '../../platform/policy/common/policyIpc.js';\nimport { IUserDataProfilesMainService } from '../../platform/userDataProfile/electron-main/userDataProfile.js';\nimport { IExtensionsProfileScannerService } from '../../platform/extensionManagement/common/extensionsProfileScannerService.js';\nimport { IExtensionsScannerService } from '../../platform/extensionManagement/common/extensionsScannerService.js';\nimport { ExtensionsScannerService } from '../../platform/extensionManagement/node/extensionsScannerService.js';\nimport { UserDataProfilesHandler } from '../../platform/userDataProfile/electron-main/userDataProfilesHandler.js';\nimport { ProfileStorageChangesListenerChannel } from '../../platform/userDataProfile/electron-main/userDataProfileStorageIpc.js';\nimport { Promises, RunOnceScheduler, runWhenGlobalIdle } from '../../base/common/async.js';\nimport { resolveMachineId, resolveSqmId, resolveDevDeviceId, validateDevDeviceId } from '../../platform/telemetry/electron-main/telemetryUtils.js';\nimport { ExtensionsProfileScannerService } from '../../platform/extensionManagement/node/extensionsProfileScannerService.js';\nimport { LoggerChannel } from '../../platform/log/electron-main/logIpc.js';\nimport { ILoggerMainService } from '../../platform/log/electron-main/loggerService.js';\nimport { IInitialProtocolUrls, IProtocolUrl } from '../../platform/url/electron-main/url.js';\nimport { IUtilityProcessWorkerMainService, UtilityProcessWorkerMainService } from '../../platform/utilityProcess/electron-main/utilityProcessWorkerMainService.js';\nimport { ipcUtilityProcessWorkerChannelName } from '../../platform/utilityProcess/common/utilityProcessWorkerService.js';\nimport { ILocalPtyService, LocalReconnectConstants, TerminalIpcChannels, TerminalSettingId } from '../../platform/terminal/common/terminal.js';\nimport { ElectronPtyHostStarter } from '../../platform/terminal/electron-main/electronPtyHostStarter.js';\nimport { PtyHostService } from '../../platform/terminal/node/ptyHostService.js';\nimport { NODE_REMOTE_RESOURCE_CHANNEL_NAME, NODE_REMOTE_RESOURCE_IPC_METHOD_NAME, NodeRemoteResourceResponse, NodeRemoteResourceRouter } from '../../platform/remote/common/electronRemoteResources.js';\nimport { Lazy } from '../../base/common/lazy.js';\nimport { IAuxiliaryWindowsMainService } from '../../platform/auxiliaryWindow/electron-main/auxiliaryWindows.js';\nimport { AuxiliaryWindowsMainService } from '../../platform/auxiliaryWindow/electron-main/auxiliaryWindowsMainService.js';\nimport { normalizeNFC } from '../../base/common/normalization.js';\nimport { ICSSDevelopmentService, CSSDevelopmentService } from '../../platform/cssDev/node/cssDevService.js';\nimport { INativeMcpDiscoveryHelperService, NativeMcpDiscoveryHelperChannelName } from '../../platform/mcp/common/nativeMcpDiscoveryHelper.js';\nimport { NativeMcpDiscoveryHelperService } from '../../platform/mcp/node/nativeMcpDiscoveryHelperService.js';\nimport { IWebContentExtractorService } from '../../platform/webContentExtractor/common/webContentExtractor.js';\nimport { NativeWebContentExtractorService } from '../../platform/webContentExtractor/electron-main/webContentExtractorService.js';\nimport ErrorTelemetry from '../../platform/telemetry/electron-main/errorTelemetry.js';\n\n/**\n * The main VS Code application. There will only ever be one instance,\n * even if the user starts many instances (e.g. from the command line).\n */\nexport class CodeApplication extends Disposable {\n\n\tprivate static readonly SECURITY_PROTOCOL_HANDLING_CONFIRMATION_SETTING_KEY = {\n\t\t[Schemas.file]: 'security.promptForLocalFileProtocolHandling' as const,\n\t\t[Schemas.vscodeRemote]: 'security.promptForRemoteFileProtocolHandling' as const\n\t};\n\n\tprivate windowsMainService: IWindowsMainService | undefined;\n\tprivate auxiliaryWindowsMainService: IAuxiliaryWindowsMainService | undefined;\n\tprivate nativeHostMainService: INativeHostMainService | undefined;\n\n\tconstructor(\n\t\tprivate readonly mainProcessNodeIpcServer: NodeIPCServer,\n\t\tprivate readonly userEnv: IProcessEnvironment,\n\t\t@IInstantiationService private readonly mainInstantiationService: IInstantiationService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@ILoggerService private readonly loggerService: ILoggerService,\n\t\t@IEnvironmentMainService private readonly environmentMainService: IEnvironmentMainService,\n\t\t@ILifecycleMainService private readonly lifecycleMainService: ILifecycleMainService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IStateService private readonly stateService: IStateService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IUserDataProfilesMainService private readonly userDataProfilesMainService: IUserDataProfilesMainService\n\t) {\n\t\tsuper();\n\n\t\tthis.configureSession();\n\t\tthis.registerListeners();\n\t}\n\n\tprivate configureSession(): void {\n\n\t\t//#region Security related measures (https://electronjs.org/docs/tutorial/security)\n\t\t//\n\t\t// !!! DO NOT CHANGE without consulting the documentation !!!\n\t\t//\n\n\t\tconst isUrlFromWindow = (requestingUrl?: string | undefined) => requestingUrl?.startsWith(`${Schemas.vscodeFileResource}://${VSCODE_AUTHORITY}`);\n\t\tconst isUrlFromWebview = (requestingUrl: string | undefined) => requestingUrl?.startsWith(`${Schemas.vscodeWebview}://`);\n\n\t\tconst alwaysAllowedPermissions = new Set(['pointerLock', 'notifications']);\n\n\t\tconst allowedPermissionsInWebview = new Set([\n\t\t\t...alwaysAllowedPermissions,\n\t\t\t'clipboard-read',\n\t\t\t'clipboard-sanitized-write',\n\t\t\t// TODO(deepak1556): Should be removed once migration is complete\n\t\t\t// https://github.com/microsoft/vscode/issues/239228\n\t\t\t'deprecated-sync-clipboard-read',\n\t\t]);\n\n\t\tconst allowedPermissionsInCore = new Set([\n\t\t\t...alwaysAllowedPermissions,\n\t\t\t'media',\n\t\t\t'local-fonts',\n\t\t\t// TODO(deepak1556): Should be removed once migration is complete\n\t\t\t// https://github.com/microsoft/vscode/issues/239228\n\t\t\t'deprecated-sync-clipboard-read',\n\t\t]);\n\n\t\tsession.defaultSession.setPermissionRequestHandler((_webContents, permission, callback, details) => {\n\t\t\tif (isUrlFromWebview(details.requestingUrl)) {\n\t\t\t\treturn callback(allowedPermissionsInWebview.has(permission));\n\t\t\t}\n\t\t\tif (isUrlFromWindow(details.requestingUrl)) {\n\t\t\t\treturn callback(allowedPermissionsInCore.has(permission));\n\t\t\t}\n\t\t\treturn callback(false);\n\t\t});\n\n\t\tsession.defaultSession.setPermissionCheckHandler((_webContents, permission, _origin, details) => {\n\t\t\tif (isUrlFromWebview(details.requestingUrl)) {\n\t\t\t\treturn allowedPermissionsInWebview.has(permission);\n\t\t\t}\n\t\t\tif (isUrlFromWindow(details.requestingUrl)) {\n\t\t\t\treturn allowedPermissionsInCore.has(permission);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\t//#endregion\n\n\t\t//#region Request filtering\n\n\t\t// Block all SVG requests from unsupported origins\n\t\tconst supportedSvgSchemes = new Set([Schemas.file, Schemas.vscodeFileResource, Schemas.vscodeRemoteResource, Schemas.vscodeManagedRemoteResource, 'devtools']);\n\n\t\t// But allow them if they are made from inside an webview\n\t\tconst isSafeFrame = (requestFrame: WebFrameMain | null | undefined): boolean => {\n\t\t\tfor (let frame: WebFrameMain | null | undefined = requestFrame; frame; frame = frame.parent) {\n\t\t\t\tif (frame.url.startsWith(`${Schemas.vscodeWebview}://`)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tconst isSvgRequestFromSafeContext = (details: Electron.OnBeforeRequestListenerDetails | Electron.OnHeadersReceivedListenerDetails): boolean => {\n\t\t\treturn details.resourceType === 'xhr' || isSafeFrame(details.frame);\n\t\t};\n\n\t\tconst isAllowedVsCodeFileRequest = (details: Electron.OnBeforeRequestListenerDetails) => {\n\t\t\tconst frame = details.frame;\n\t\t\tif (!frame || !this.windowsMainService) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Check to see if the request comes from one of the main windows (or shared process) and not from embedded content\n\t\t\tconst windows = getAllWindowsExcludingOffscreen();\n\t\t\tfor (const window of windows) {\n\t\t\t\tif (frame.processId === window.webContents.mainFrame.processId) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst isAllowedWebviewRequest = (uri: URI, details: Electron.OnBeforeRequestListenerDetails): boolean => {\n\t\t\tif (uri.path !== '/index.html') {\n\t\t\t\treturn true; // Only restrict top level page of webviews: index.html\n\t\t\t}\n\n\t\t\tconst frame = details.frame;\n\t\t\tif (!frame || !this.windowsMainService) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Check to see if the request comes from one of the main editor windows.\n\t\t\tfor (const window of this.windowsMainService.getWindows()) {\n\t\t\t\tif (window.win) {\n\t\t\t\t\tif (frame.processId === window.win.webContents.mainFrame.processId) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tsession.defaultSession.webRequest.onBeforeRequest((details, callback) => {\n\t\t\tconst uri = URI.parse(details.url);\n\t\t\tif (uri.scheme === Schemas.vscodeWebview) {\n\t\t\t\tif (!isAllowedWebviewRequest(uri, details)) {\n\t\t\t\t\tthis.logService.error('Blocked vscode-webview request', details.url);\n\t\t\t\t\treturn callback({ cancel: true });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (uri.scheme === Schemas.vscodeFileResource) {\n\t\t\t\tif (!isAllowedVsCodeFileRequest(details)) {\n\t\t\t\t\tthis.logService.error('Blocked vscode-file request', details.url);\n\t\t\t\t\treturn callback({ cancel: true });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Block most svgs\n\t\t\tif (uri.path.endsWith('.svg')) {\n\t\t\t\tconst isSafeResourceUrl = supportedSvgSchemes.has(uri.scheme);\n\t\t\t\tif (!isSafeResourceUrl) {\n\t\t\t\t\treturn callback({ cancel: !isSvgRequestFromSafeContext(details) });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn callback({ cancel: false });\n\t\t});\n\n\t\t// Configure SVG header content type properly\n\t\t// https://github.com/microsoft/vscode/issues/97564\n\t\tsession.defaultSession.webRequest.onHeadersReceived((details, callback) => {\n\t\t\tconst responseHeaders = details.responseHeaders as Record<string, (string) | (string[])>;\n\t\t\tconst contentTypes = (responseHeaders['content-type'] || responseHeaders['Content-Type']);\n\n\t\t\tif (contentTypes && Array.isArray(contentTypes)) {\n\t\t\t\tconst uri = URI.parse(details.url);\n\t\t\t\tif (uri.path.endsWith('.svg')) {\n\t\t\t\t\tif (supportedSvgSchemes.has(uri.scheme)) {\n\t\t\t\t\t\tresponseHeaders['Content-Type'] = ['image/svg+xml'];\n\n\t\t\t\t\t\treturn callback({ cancel: false, responseHeaders });\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// remote extension schemes have the following format\n\t\t\t\t// http://127.0.0.1:<port>/vscode-remote-resource?path=\n\t\t\t\tif (!uri.path.endsWith(Schemas.vscodeRemoteResource) && contentTypes.some(contentType => contentType.toLowerCase().includes('image/svg'))) {\n\t\t\t\t\treturn callback({ cancel: !isSvgRequestFromSafeContext(details) });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn callback({ cancel: false });\n\t\t});\n\n\t\t//#endregion\n\n\t\t//#region Allow CORS for the PRSS CDN\n\n\t\t// https://github.com/microsoft/vscode-remote-release/issues/9246\n\t\tsession.defaultSession.webRequest.onHeadersReceived((details, callback) => {\n\t\t\tif (details.url.startsWith('https://vscode.download.prss.microsoft.com/')) {\n\t\t\t\tconst responseHeaders = details.responseHeaders ?? Object.create(null);\n\n\t\t\t\tif (responseHeaders['Access-Control-Allow-Origin'] === undefined) {\n\t\t\t\t\tresponseHeaders['Access-Control-Allow-Origin'] = ['*'];\n\t\t\t\t\treturn callback({ cancel: false, responseHeaders });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn callback({ cancel: false });\n\t\t});\n\n\t\t//#endregion\n\n\t\t//#region Code Cache\n\n\t\ttype SessionWithCodeCachePathSupport = Session & {\n\t\t\t/**\n\t\t\t * Sets code cache directory. By default, the directory will be `Code Cache` under\n\t\t\t * the respective user data folder.\n\t\t\t */\n\t\t\tsetCodeCachePath?(path: string): void;\n\t\t};\n\n\t\tconst defaultSession = session.defaultSession as unknown as SessionWithCodeCachePathSupport;\n\t\tif (typeof defaultSession.setCodeCachePath === 'function' && this.environmentMainService.codeCachePath) {\n\t\t\t// Make sure to partition Chrome's code cache folder\n\t\t\t// in the same way as our code cache path to help\n\t\t\t// invalidate caches that we know are invalid\n\t\t\t// (https://github.com/microsoft/vscode/issues/120655)\n\t\t\tdefaultSession.setCodeCachePath(join(this.environmentMainService.codeCachePath, 'chrome'));\n\t\t}\n\n\t\t//#endregion\n\n\t\t//#region UNC Host Allowlist (Windows)\n\n\t\tif (isWindows) {\n\t\t\tif (this.configurationService.getValue('security.restrictUNCAccess') === false) {\n\t\t\t\tdisableUNCAccessRestrictions();\n\t\t\t} else {\n\t\t\t\taddUNCHostToAllowlist(this.configurationService.getValue('security.allowedUNCHosts'));\n\t\t\t}\n\t\t}\n\n\t\t//#endregion\n\t}\n\n\tprivate registerListeners(): void {\n\n\t\t// Dispose on shutdown\n\t\tEvent.once(this.lifecycleMainService.onWillShutdown)(() => this.dispose());\n\n\t\t// Contextmenu via IPC support\n\t\tregisterContextMenuListener();\n\n\t\t// Accessibility change event\n\t\tapp.on('accessibility-support-changed', (event, accessibilitySupportEnabled) => {\n\t\t\tthis.windowsMainService?.sendToAll('vscode:accessibilitySupportChanged', accessibilitySupportEnabled);\n\t\t});\n\n\t\t// macOS dock activate\n\t\tapp.on('activate', async (event, hasVisibleWindows) => {\n\t\t\tthis.logService.trace('app#activate');\n\n\t\t\t// Mac only event: open new window when we get activated\n\t\t\tif (!hasVisibleWindows) {\n\t\t\t\tawait this.windowsMainService?.openEmptyWindow({ context: OpenContext.DOCK });\n\t\t\t}\n\t\t});\n\n\t\t//#region Security related measures (https://electronjs.org/docs/tutorial/security)\n\t\t//\n\t\t// !!! DO NOT CHANGE without consulting the documentation !!!\n\t\t//\n\t\tapp.on('web-contents-created', (event, contents) => {\n\n\t\t\t// Auxiliary Window: delegate to `AuxiliaryWindow` class\n\t\t\tif (contents?.opener?.url.startsWith(`${Schemas.vscodeFileResource}://${VSCODE_AUTHORITY}/`)) {\n\t\t\t\tthis.logService.trace('[aux window]  app.on(\"web-contents-created\"): Registering auxiliary window');\n\n\t\t\t\tthis.auxiliaryWindowsMainService?.registerWindow(contents);\n\t\t\t}\n\n\t\t\t// Block any in-page navigation\n\t\t\tcontents.on('will-navigate', event => {\n\t\t\t\tthis.logService.error('webContents#will-navigate: Prevented webcontent navigation');\n\n\t\t\t\tevent.preventDefault();\n\t\t\t});\n\n\t\t\t// All Windows: only allow about:blank auxiliary windows to open\n\t\t\t// For all other URLs, delegate to the OS.\n\t\t\tcontents.setWindowOpenHandler(details => {\n\n\t\t\t\t// about:blank windows can open as window witho our default options\n\t\t\t\tif (details.url === 'about:blank') {\n\t\t\t\t\tthis.logService.trace('[aux window] webContents#setWindowOpenHandler: Allowing auxiliary window to open on about:blank');\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\taction: 'allow',\n\t\t\t\t\t\toverrideBrowserWindowOptions: this.auxiliaryWindowsMainService?.createWindow(details)\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Any other URL: delegate to OS\n\t\t\t\telse {\n\t\t\t\t\tthis.logService.trace(`webContents#setWindowOpenHandler: Prevented opening window with URL ${details.url}}`);\n\n\t\t\t\t\tthis.nativeHostMainService?.openExternal(undefined, details.url);\n\n\t\t\t\t\treturn { action: 'deny' };\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t//#endregion\n\n\t\tlet macOpenFileURIs: IWindowOpenable[] = [];\n\t\tlet runningTimeout: Timeout | undefined = undefined;\n\t\tapp.on('open-file', (event, path) => {\n\t\t\tpath = normalizeNFC(path); // macOS only: normalize paths to NFC form\n\n\t\t\tthis.logService.trace('app#open-file: ', path);\n\t\t\tevent.preventDefault();\n\n\t\t\t// Keep in array because more might come!\n\t\t\tmacOpenFileURIs.push(hasWorkspaceFileExtension(path) ? { workspaceUri: URI.file(path) } : { fileUri: URI.file(path) });\n\n\t\t\t// Clear previous handler if any\n\t\t\tif (runningTimeout !== undefined) {\n\t\t\t\tclearTimeout(runningTimeout);\n\t\t\t\trunningTimeout = undefined;\n\t\t\t}\n\n\t\t\t// Handle paths delayed in case more are coming!\n\t\t\trunningTimeout = setTimeout(async () => {\n\t\t\t\tawait this.windowsMainService?.open({\n\t\t\t\t\tcontext: OpenContext.DOCK /* can also be opening from finder while app is running */,\n\t\t\t\t\tcli: this.environmentMainService.args,\n\t\t\t\t\turisToOpen: macOpenFileURIs,\n\t\t\t\t\tgotoLineMode: false,\n\t\t\t\t\tpreferNewWindow: true /* dropping on the dock or opening from finder prefers to open in a new window */\n\t\t\t\t});\n\n\t\t\t\tmacOpenFileURIs = [];\n\t\t\t\trunningTimeout = undefined;\n\t\t\t}, 100);\n\t\t});\n\n\t\tapp.on('new-window-for-tab', async () => {\n\t\t\tawait this.windowsMainService?.openEmptyWindow({ context: OpenContext.DESKTOP }); //macOS native tab \"+\" button\n\t\t});\n\n\t\t//#region Bootstrap IPC Handlers\n\n\t\tvalidatedIpcMain.handle('vscode:fetchShellEnv', event => {\n\n\t\t\t// Prefer to use the args and env from the target window\n\t\t\t// when resolving the shell env. It is possible that\n\t\t\t// a first window was opened from the UI but a second\n\t\t\t// from the CLI and that has implications for whether to\n\t\t\t// resolve the shell environment or not.\n\t\t\t//\n\t\t\t// Window can be undefined for e.g. the shared process\n\t\t\t// that is not part of our windows registry!\n\t\t\tconst window = this.windowsMainService?.getWindowByWebContents(event.sender); // Note: this can be `undefined` for the shared process\n\t\t\tlet args: NativeParsedArgs;\n\t\t\tlet env: IProcessEnvironment;\n\t\t\tif (window?.config) {\n\t\t\t\targs = window.config;\n\t\t\t\tenv = { ...process.env, ...window.config.userEnv };\n\t\t\t} else {\n\t\t\t\targs = this.environmentMainService.args;\n\t\t\t\tenv = process.env;\n\t\t\t}\n\n\t\t\t// Resolve shell env\n\t\t\treturn this.resolveShellEnvironment(args, env, false);\n\t\t});\n\n\t\tvalidatedIpcMain.on('vscode:toggleDevTools', event => event.sender.toggleDevTools());\n\t\tvalidatedIpcMain.on('vscode:openDevTools', event => event.sender.openDevTools());\n\n\t\tvalidatedIpcMain.on('vscode:reloadWindow', event => event.sender.reload());\n\n\t\tvalidatedIpcMain.handle('vscode:notifyZoomLevel', async (event, zoomLevel: number | undefined) => {\n\t\t\tconst window = this.windowsMainService?.getWindowByWebContents(event.sender);\n\t\t\tif (window) {\n\t\t\t\twindow.notifyZoomLevel(zoomLevel);\n\t\t\t}\n\t\t});\n\n\t\t//#endregion\n\t}\n\n\tasync startup(): Promise<void> {\n\t\tthis.logService.debug('Starting VS Code');\n\t\tthis.logService.debug(`from: ${this.environmentMainService.appRoot}`);\n\t\tthis.logService.debug('args:', this.environmentMainService.args);\n\n\t\t// Make sure we associate the program with the app user model id\n\t\t// This will help Windows to associate the running program with\n\t\t// any shortcut that is pinned to the taskbar and prevent showing\n\t\t// two icons in the taskbar for the same app.\n\t\tconst win32AppUserModelId = this.productService.win32AppUserModelId;\n\t\tif (isWindows && win32AppUserModelId) {\n\t\t\tapp.setAppUserModelId(win32AppUserModelId);\n\t\t}\n\n\t\t// Fix native tabs on macOS 10.13\n\t\t// macOS enables a compatibility patch for any bundle ID beginning with\n\t\t// \"com.microsoft.\", which breaks native tabs for VS Code when using this\n\t\t// identifier (from the official build).\n\t\t// Explicitly opt out of the patch here before creating any windows.\n\t\t// See: https://github.com/microsoft/vscode/issues/35361#issuecomment-399794085\n\t\ttry {\n\t\t\tif (isMacintosh && this.configurationService.getValue('window.nativeTabs') === true && !systemPreferences.getUserDefault('NSUseImprovedLayoutPass', 'boolean')) {\n\t\t\t\tsystemPreferences.setUserDefault('NSUseImprovedLayoutPass', 'boolean', true);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.logService.error(error);\n\t\t}\n\n\t\t// Main process server (electron IPC based)\n\t\tconst mainProcessElectronServer = new ElectronIPCServer();\n\t\tEvent.once(this.lifecycleMainService.onWillShutdown)(e => {\n\t\t\tif (e.reason === ShutdownReason.KILL) {\n\t\t\t\t// When we go down abnormally, make sure to free up\n\t\t\t\t// any IPC we accept from other windows to reduce\n\t\t\t\t// the chance of doing work after we go down. Kill\n\t\t\t\t// is special in that it does not orderly shutdown\n\t\t\t\t// windows.\n\t\t\t\tmainProcessElectronServer.dispose();\n\t\t\t}\n\t\t});\n\n\t\t// Resolve unique machine ID\n\t\tconst [machineId, sqmId, devDeviceId] = await Promise.all([\n\t\t\tresolveMachineId(this.stateService, this.logService),\n\t\t\tresolveSqmId(this.stateService, this.logService),\n\t\t\tresolveDevDeviceId(this.stateService, this.logService)\n\t\t]);\n\n\t\t// Shared process\n\t\tconst { sharedProcessReady, sharedProcessClient } = this.setupSharedProcess(machineId, sqmId, devDeviceId);\n\n\t\t// Services\n\t\tconst appInstantiationService = await this.initServices(machineId, sqmId, devDeviceId, sharedProcessReady);\n\n\t\t// Error telemetry\n\t\tappInstantiationService.invokeFunction(accessor => this._register(new ErrorTelemetry(accessor.get(ILogService), accessor.get(ITelemetryService))));\n\n\t\t// Auth Handler\n\t\tappInstantiationService.invokeFunction(accessor => accessor.get(IProxyAuthService));\n\n\t\t// Transient profiles handler\n\t\tthis._register(appInstantiationService.createInstance(UserDataProfilesHandler));\n\n\t\t// Init Channels\n\t\tappInstantiationService.invokeFunction(accessor => this.initChannels(accessor, mainProcessElectronServer, sharedProcessClient));\n\n\t\t// Setup Protocol URL Handlers\n\t\tconst initialProtocolUrls = await appInstantiationService.invokeFunction(accessor => this.setupProtocolUrlHandlers(accessor, mainProcessElectronServer));\n\n\t\t// Setup vscode-remote-resource protocol handler\n\t\tthis.setupManagedRemoteResourceUrlHandler(mainProcessElectronServer);\n\n\t\t// Signal phase: ready - before opening first window\n\t\tthis.lifecycleMainService.phase = LifecycleMainPhase.Ready;\n\n\t\t// Open Windows\n\t\tawait appInstantiationService.invokeFunction(accessor => this.openFirstWindow(accessor, initialProtocolUrls));\n\n\t\t// Signal phase: after window open\n\t\tthis.lifecycleMainService.phase = LifecycleMainPhase.AfterWindowOpen;\n\n\t\t// Post Open Windows Tasks\n\t\tthis.afterWindowOpen();\n\n\t\t// Set lifecycle phase to `Eventually` after a short delay and when idle (min 2.5sec, max 5sec)\n\t\tconst eventuallyPhaseScheduler = this._register(new RunOnceScheduler(() => {\n\t\t\tthis._register(runWhenGlobalIdle(() => {\n\n\t\t\t\t// Signal phase: eventually\n\t\t\t\tthis.lifecycleMainService.phase = LifecycleMainPhase.Eventually;\n\n\t\t\t\t// Eventually Post Open Window Tasks\n\t\t\t\tthis.eventuallyAfterWindowOpen();\n\t\t\t}, 2500));\n\t\t}, 2500));\n\t\teventuallyPhaseScheduler.schedule();\n\t}\n\n\tprivate async setupProtocolUrlHandlers(accessor: ServicesAccessor, mainProcessElectronServer: ElectronIPCServer): Promise<IInitialProtocolUrls | undefined> {\n\t\tconst windowsMainService = this.windowsMainService = accessor.get(IWindowsMainService);\n\t\tconst urlService = accessor.get(IURLService);\n\t\tconst nativeHostMainService = this.nativeHostMainService = accessor.get(INativeHostMainService);\n\t\tconst dialogMainService = accessor.get(IDialogMainService);\n\n\t\t// Install URL handlers that deal with protocl URLs either\n\t\t// from this process by opening windows and/or by forwarding\n\t\t// the URLs into a window process to be handled there.\n\n\t\tconst app = this;\n\t\turlService.registerHandler({\n\t\t\tasync handleURL(uri: URI, options?: IOpenURLOptions): Promise<boolean> {\n\t\t\t\treturn app.handleProtocolUrl(windowsMainService, dialogMainService, urlService, uri, options);\n\t\t\t}\n\t\t});\n\n\t\tconst activeWindowManager = this._register(new ActiveWindowManager({\n\t\t\tonDidOpenMainWindow: nativeHostMainService.onDidOpenMainWindow,\n\t\t\tonDidFocusMainWindow: nativeHostMainService.onDidFocusMainWindow,\n\t\t\tgetActiveWindowId: () => nativeHostMainService.getActiveWindowId(-1)\n\t\t}));\n\t\tconst activeWindowRouter = new StaticRouter(ctx => activeWindowManager.getActiveClientId().then(id => ctx === id));\n\t\tconst urlHandlerRouter = new URLHandlerRouter(activeWindowRouter, this.logService);\n\t\tconst urlHandlerChannel = mainProcessElectronServer.getChannel('urlHandler', urlHandlerRouter);\n\t\turlService.registerHandler(new URLHandlerChannelClient(urlHandlerChannel));\n\n\t\tconst initialProtocolUrls = await this.resolveInitialProtocolUrls(windowsMainService, dialogMainService);\n\t\tthis._register(new ElectronURLListener(initialProtocolUrls?.urls, urlService, windowsMainService, this.environmentMainService, this.productService, this.logService));\n\n\t\treturn initialProtocolUrls;\n\t}\n\n\tprivate setupManagedRemoteResourceUrlHandler(mainProcessElectronServer: ElectronIPCServer) {\n\t\tconst notFound = (): Electron.ProtocolResponse => ({ statusCode: 404, data: 'Not found' });\n\t\tconst remoteResourceChannel = new Lazy(() => mainProcessElectronServer.getChannel(\n\t\t\tNODE_REMOTE_RESOURCE_CHANNEL_NAME,\n\t\t\tnew NodeRemoteResourceRouter(),\n\t\t));\n\n\t\tprotocol.registerBufferProtocol(Schemas.vscodeManagedRemoteResource, (request, callback) => {\n\t\t\tconst url = URI.parse(request.url);\n\t\t\tif (!url.authority.startsWith('window:')) {\n\t\t\t\treturn callback(notFound());\n\t\t\t}\n\n\t\t\tremoteResourceChannel.value.call<NodeRemoteResourceResponse>(NODE_REMOTE_RESOURCE_IPC_METHOD_NAME, [url]).then(\n\t\t\t\tr => callback({ ...r, data: Buffer.from(r.body, 'base64') }),\n\t\t\t\terr => {\n\t\t\t\t\tthis.logService.warn('error dispatching remote resource call', err);\n\t\t\t\t\tcallback({ statusCode: 500, data: String(err) });\n\t\t\t\t});\n\t\t});\n\t}\n\n\tprivate async resolveInitialProtocolUrls(windowsMainService: IWindowsMainService, dialogMainService: IDialogMainService): Promise<IInitialProtocolUrls | undefined> {\n\n\t\t/**\n\t\t * Protocol URL handling on startup is complex, refer to\n\t\t * {@link IInitialProtocolUrls} for an explainer.\n\t\t */\n\n\t\t// Windows/Linux: protocol handler invokes CLI with --open-url\n\t\tconst protocolUrlsFromCommandLine = this.environmentMainService.args['open-url'] ? this.environmentMainService.args._urls || [] : [];\n\t\tif (protocolUrlsFromCommandLine.length > 0) {\n\t\t\tthis.logService.trace('app#resolveInitialProtocolUrls() protocol urls from command line:', protocolUrlsFromCommandLine);\n\t\t}\n\n\t\t// macOS: open-url events that were received before the app is ready\n\t\tconst protocolUrlsFromEvent = ((global as { getOpenUrls?: () => string[] }).getOpenUrls?.() || []);\n\t\tif (protocolUrlsFromEvent.length > 0) {\n\t\t\tthis.logService.trace(`app#resolveInitialProtocolUrls() protocol urls from macOS 'open-url' event:`, protocolUrlsFromEvent);\n\t\t}\n\n\t\tif (protocolUrlsFromCommandLine.length + protocolUrlsFromEvent.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst protocolUrls = [\n\t\t\t...protocolUrlsFromCommandLine,\n\t\t\t...protocolUrlsFromEvent\n\t\t].map(url => {\n\t\t\ttry {\n\t\t\t\treturn { uri: URI.parse(url), originalUrl: url };\n\t\t\t} catch {\n\t\t\t\tthis.logService.trace('app#resolveInitialProtocolUrls() protocol url failed to parse:', url);\n\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t});\n\n\t\tconst openables: IWindowOpenable[] = [];\n\t\tconst urls: IProtocolUrl[] = [];\n\t\tfor (const protocolUrl of protocolUrls) {\n\t\t\tif (!protocolUrl) {\n\t\t\t\tcontinue; // invalid\n\t\t\t}\n\n\t\t\tconst windowOpenable = this.getWindowOpenableFromProtocolUrl(protocolUrl.uri);\n\t\t\tif (windowOpenable) {\n\t\t\t\tif (await this.shouldBlockOpenable(windowOpenable, windowsMainService, dialogMainService)) {\n\t\t\t\t\tthis.logService.trace('app#resolveInitialProtocolUrls() protocol url was blocked:', protocolUrl.uri.toString(true));\n\n\t\t\t\t\tcontinue; // blocked\n\t\t\t\t} else {\n\t\t\t\t\tthis.logService.trace('app#resolveInitialProtocolUrls() protocol url will be handled as window to open:', protocolUrl.uri.toString(true), windowOpenable);\n\n\t\t\t\t\topenables.push(windowOpenable); // handled as window to open\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.logService.trace('app#resolveInitialProtocolUrls() protocol url will be passed to active window for handling:', protocolUrl.uri.toString(true));\n\n\t\t\t\turls.push(protocolUrl); // handled within active window\n\t\t\t}\n\t\t}\n\n\t\treturn { urls, openables };\n\t}\n\n\tprivate async shouldBlockOpenable(openable: IWindowOpenable, windowsMainService: IWindowsMainService, dialogMainService: IDialogMainService): Promise<boolean> {\n\t\tlet openableUri: URI;\n\t\tlet message: string;\n\t\tif (isWorkspaceToOpen(openable)) {\n\t\t\topenableUri = openable.workspaceUri;\n\t\t\tmessage = localize('confirmOpenMessageWorkspace', \"An external application wants to open '{0}' in {1}. Do you want to open this workspace file?\", openableUri.scheme === Schemas.file ? getPathLabel(openableUri, { os: OS, tildify: this.environmentMainService }) : openableUri.toString(true), this.productService.nameShort);\n\t\t} else if (isFolderToOpen(openable)) {\n\t\t\topenableUri = openable.folderUri;\n\t\t\tmessage = localize('confirmOpenMessageFolder', \"An external application wants to open '{0}' in {1}. Do you want to open this folder?\", openableUri.scheme === Schemas.file ? getPathLabel(openableUri, { os: OS, tildify: this.environmentMainService }) : openableUri.toString(true), this.productService.nameShort);\n\t\t} else {\n\t\t\topenableUri = openable.fileUri;\n\t\t\tmessage = localize('confirmOpenMessageFileOrFolder', \"An external application wants to open '{0}' in {1}. Do you want to open this file or folder?\", openableUri.scheme === Schemas.file ? getPathLabel(openableUri, { os: OS, tildify: this.environmentMainService }) : openableUri.toString(true), this.productService.nameShort);\n\t\t}\n\n\t\tif (openableUri.scheme !== Schemas.file && openableUri.scheme !== Schemas.vscodeRemote) {\n\n\t\t\t// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\t\t\t//\n\t\t\t// NOTE: we currently only ask for confirmation for `file` and `vscode-remote`\n\t\t\t// authorities here. There is an additional confirmation for `extension.id`\n\t\t\t// authorities from within the window.\n\t\t\t//\n\t\t\t// IF YOU ARE PLANNING ON ADDING ANOTHER AUTHORITY HERE, MAKE SURE TO ALSO\n\t\t\t// ADD IT TO THE CONFIRMATION CODE BELOW OR INSIDE THE WINDOW!\n\t\t\t//\n\t\t\t// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n\n\t\t\treturn false;\n\t\t}\n\n\t\tconst askForConfirmation = this.configurationService.getValue<unknown>(CodeApplication.SECURITY_PROTOCOL_HANDLING_CONFIRMATION_SETTING_KEY[openableUri.scheme]);\n\t\tif (askForConfirmation === false) {\n\t\t\treturn false; // not blocked via settings\n\t\t}\n\n\t\tconst { response, checkboxChecked } = await dialogMainService.showMessageBox({\n\t\t\ttype: 'warning',\n\t\t\tbuttons: [\n\t\t\t\tlocalize({ key: 'open', comment: ['&& denotes a mnemonic'] }, \"&&Yes\"),\n\t\t\t\tlocalize({ key: 'cancel', comment: ['&& denotes a mnemonic'] }, \"&&No\")\n\t\t\t],\n\t\t\tmessage,\n\t\t\tdetail: localize('confirmOpenDetail', \"If you did not initiate this request, it may represent an attempted attack on your system. Unless you took an explicit action to initiate this request, you should press 'No'\"),\n\t\t\tcheckboxLabel: openableUri.scheme === Schemas.file ? localize('doNotAskAgainLocal', \"Allow opening local paths without asking\") : localize('doNotAskAgainRemote', \"Allow opening remote paths without asking\"),\n\t\t\tcancelId: 1\n\t\t});\n\n\t\tif (response !== 0) {\n\t\t\treturn true; // blocked by user choice\n\t\t}\n\n\t\tif (checkboxChecked) {\n\t\t\t// Due to https://github.com/microsoft/vscode/issues/195436, we can only\n\t\t\t// update settings from within a window. But we do not know if a window\n\t\t\t// is about to open or can already handle the request, so we have to send\n\t\t\t// to any current window and any newly opening window.\n\t\t\tconst request = { channel: 'vscode:disablePromptForProtocolHandling', args: openableUri.scheme === Schemas.file ? 'local' : 'remote' };\n\t\t\twindowsMainService.sendToFocused(request.channel, request.args);\n\t\t\twindowsMainService.sendToOpeningWindow(request.channel, request.args);\n\t\t}\n\n\t\treturn false; // not blocked by user choice\n\t}\n\n\tprivate getWindowOpenableFromProtocolUrl(uri: URI): IWindowOpenable | undefined {\n\t\tif (!uri.path) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// File path\n\t\tif (uri.authority === Schemas.file) {\n\t\t\tconst fileUri = URI.file(uri.fsPath);\n\n\t\t\tif (hasWorkspaceFileExtension(fileUri)) {\n\t\t\t\treturn { workspaceUri: fileUri };\n\t\t\t}\n\n\t\t\treturn { fileUri };\n\t\t}\n\n\t\t// Remote path\n\t\telse if (uri.authority === Schemas.vscodeRemote) {\n\n\t\t\t// Example conversion:\n\t\t\t// From: vscode://vscode-remote/wsl+ubuntu/mnt/c/GitDevelopment/monaco\n\t\t\t//   To: vscode-remote://wsl+ubuntu/mnt/c/GitDevelopment/monaco\n\n\t\t\tconst secondSlash = uri.path.indexOf(posix.sep, 1 /* skip over the leading slash */);\n\t\t\tlet authority: string;\n\t\t\tlet path: string;\n\t\t\tif (secondSlash !== -1) {\n\t\t\t\tauthority = uri.path.substring(1, secondSlash);\n\t\t\t\tpath = uri.path.substring(secondSlash);\n\t\t\t} else {\n\t\t\t\tauthority = uri.path.substring(1);\n\t\t\t\tpath = '/';\n\t\t\t}\n\n\t\t\tlet query = uri.query;\n\t\t\tconst params = new URLSearchParams(uri.query);\n\t\t\tif (params.get('windowId') === '_blank') {\n\t\t\t\t// Make sure to unset any `windowId=_blank` here\n\t\t\t\t// https://github.com/microsoft/vscode/issues/191902\n\t\t\t\tparams.delete('windowId');\n\t\t\t\tquery = params.toString();\n\t\t\t}\n\n\t\t\tconst remoteUri = URI.from({ scheme: Schemas.vscodeRemote, authority, path, query, fragment: uri.fragment });\n\n\t\t\tif (hasWorkspaceFileExtension(path)) {\n\t\t\t\treturn { workspaceUri: remoteUri };\n\t\t\t}\n\n\t\t\tif (/:[\\d]+$/.test(path)) {\n\t\t\t\t// path with :line:column syntax\n\t\t\t\treturn { fileUri: remoteUri };\n\t\t\t}\n\n\t\t\treturn { folderUri: remoteUri };\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate async handleProtocolUrl(windowsMainService: IWindowsMainService, dialogMainService: IDialogMainService, urlService: IURLService, uri: URI, options?: IOpenURLOptions): Promise<boolean> {\n\t\tthis.logService.trace('app#handleProtocolUrl():', uri.toString(true), options);\n\n\t\t// Support 'workspace' URLs (https://github.com/microsoft/vscode/issues/124263)\n\t\tif (uri.scheme === this.productService.urlProtocol && uri.path === 'workspace') {\n\t\t\turi = uri.with({\n\t\t\t\tauthority: 'file',\n\t\t\t\tpath: URI.parse(uri.query).path,\n\t\t\t\tquery: ''\n\t\t\t});\n\t\t}\n\n\t\tlet shouldOpenInNewWindow = false;\n\n\t\t// We should handle the URI in a new window if the URL contains `windowId=_blank`\n\t\tconst params = new URLSearchParams(uri.query);\n\t\tif (params.get('windowId') === '_blank') {\n\t\t\tthis.logService.trace(`app#handleProtocolUrl() found 'windowId=_blank' as parameter, setting shouldOpenInNewWindow=true:`, uri.toString(true));\n\n\t\t\tparams.delete('windowId');\n\t\t\turi = uri.with({ query: params.toString() });\n\n\t\t\tshouldOpenInNewWindow = true;\n\t\t}\n\n\t\t// or if no window is open (macOS only)\n\t\telse if (isMacintosh && windowsMainService.getWindowCount() === 0) {\n\t\t\tthis.logService.trace(`app#handleProtocolUrl() running on macOS with no window open, setting shouldOpenInNewWindow=true:`, uri.toString(true));\n\n\t\t\tshouldOpenInNewWindow = true;\n\t\t}\n\n\t\t// Pass along whether the application is being opened via a Continue On flow\n\t\tconst continueOn = params.get('continueOn');\n\t\tif (continueOn !== null) {\n\t\t\tthis.logService.trace(`app#handleProtocolUrl() found 'continueOn' as parameter:`, uri.toString(true));\n\n\t\t\tparams.delete('continueOn');\n\t\t\turi = uri.with({ query: params.toString() });\n\n\t\t\tthis.environmentMainService.continueOn = continueOn ?? undefined;\n\t\t}\n\n\t\t// Check if the protocol URL is a window openable to open...\n\t\tconst windowOpenableFromProtocolUrl = this.getWindowOpenableFromProtocolUrl(uri);\n\t\tif (windowOpenableFromProtocolUrl) {\n\t\t\tif (await this.shouldBlockOpenable(windowOpenableFromProtocolUrl, windowsMainService, dialogMainService)) {\n\t\t\t\tthis.logService.trace('app#handleProtocolUrl() protocol url was blocked:', uri.toString(true));\n\n\t\t\t\treturn true; // If openable should be blocked, behave as if it's handled\n\t\t\t} else {\n\t\t\t\tthis.logService.trace('app#handleProtocolUrl() opening protocol url as window:', windowOpenableFromProtocolUrl, uri.toString(true));\n\n\t\t\t\tconst window = (await windowsMainService.open({\n\t\t\t\t\tcontext: OpenContext.LINK,\n\t\t\t\t\tcli: { ...this.environmentMainService.args },\n\t\t\t\t\turisToOpen: [windowOpenableFromProtocolUrl],\n\t\t\t\t\tforceNewWindow: shouldOpenInNewWindow,\n\t\t\t\t\tgotoLineMode: true\n\t\t\t\t\t// remoteAuthority: will be determined based on windowOpenableFromProtocolUrl\n\t\t\t\t})).at(0);\n\n\t\t\t\twindow?.focus(); // this should help ensuring that the right window gets focus when multiple are opened\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// ...or if we should open in a new window and then handle it within that window\n\t\tif (shouldOpenInNewWindow) {\n\t\t\tthis.logService.trace('app#handleProtocolUrl() opening empty window and passing in protocol url:', uri.toString(true));\n\n\t\t\tconst window = (await windowsMainService.open({\n\t\t\t\tcontext: OpenContext.LINK,\n\t\t\t\tcli: { ...this.environmentMainService.args },\n\t\t\t\tforceNewWindow: true,\n\t\t\t\tforceEmpty: true,\n\t\t\t\tgotoLineMode: true,\n\t\t\t\tremoteAuthority: getRemoteAuthority(uri)\n\t\t\t})).at(0);\n\n\t\t\tawait window?.ready();\n\n\t\t\treturn urlService.open(uri, options);\n\t\t}\n\n\t\tthis.logService.trace('app#handleProtocolUrl(): not handled', uri.toString(true), options);\n\n\t\treturn false;\n\t}\n\n\tprivate setupSharedProcess(machineId: string, sqmId: string, devDeviceId: string): { sharedProcessReady: Promise<MessagePortClient>; sharedProcessClient: Promise<MessagePortClient> } {\n\t\tconst sharedProcess = this._register(this.mainInstantiationService.createInstance(SharedProcess, machineId, sqmId, devDeviceId));\n\n\t\tthis._register(sharedProcess.onDidCrash(() => this.windowsMainService?.sendToFocused('vscode:reportSharedProcessCrash')));\n\n\t\tconst sharedProcessClient = (async () => {\n\t\t\tthis.logService.trace('Main->SharedProcess#connect');\n\n\t\t\tconst port = await sharedProcess.connect();\n\n\t\t\tthis.logService.trace('Main->SharedProcess#connect: connection established');\n\n\t\t\treturn new MessagePortClient(port, 'main');\n\t\t})();\n\n\t\tconst sharedProcessReady = (async () => {\n\t\t\tawait sharedProcess.whenReady();\n\n\t\t\treturn sharedProcessClient;\n\t\t})();\n\n\t\treturn { sharedProcessReady, sharedProcessClient };\n\t}\n\n\tprivate async initServices(machineId: string, sqmId: string, devDeviceId: string, sharedProcessReady: Promise<MessagePortClient>): Promise<IInstantiationService> {\n\t\tconst services = new ServiceCollection();\n\n\t\t// Update\n\t\tswitch (process.platform) {\n\t\t\tcase 'win32':\n\t\t\t\tservices.set(IUpdateService, new SyncDescriptor(Win32UpdateService));\n\t\t\t\tbreak;\n\n\t\t\tcase 'linux':\n\t\t\t\tif (isLinuxSnap) {\n\t\t\t\t\tservices.set(IUpdateService, new SyncDescriptor(SnapUpdateService, [process.env['SNAP'], process.env['SNAP_REVISION']]));\n\t\t\t\t} else {\n\t\t\t\t\tservices.set(IUpdateService, new SyncDescriptor(LinuxUpdateService));\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'darwin':\n\t\t\t\tservices.set(IUpdateService, new SyncDescriptor(DarwinUpdateService));\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Windows\n\t\tservices.set(IWindowsMainService, new SyncDescriptor(WindowsMainService, [machineId, sqmId, devDeviceId, this.userEnv], false));\n\t\tservices.set(IAuxiliaryWindowsMainService, new SyncDescriptor(AuxiliaryWindowsMainService, undefined, false));\n\n\t\t// Dialogs\n\t\tconst dialogMainService = new DialogMainService(this.logService, this.productService);\n\t\tservices.set(IDialogMainService, dialogMainService);\n\n\t\t// Launch\n\t\tservices.set(ILaunchMainService, new SyncDescriptor(LaunchMainService, undefined, false /* proxied to other processes */));\n\n\t\t// Diagnostics\n\t\tservices.set(IDiagnosticsMainService, new SyncDescriptor(DiagnosticsMainService, undefined, false /* proxied to other processes */));\n\t\tservices.set(IDiagnosticsService, ProxyChannel.toService(getDelayedChannel(sharedProcessReady.then(client => client.getChannel('diagnostics')))));\n\n\t\t// Encryption\n\t\tservices.set(IEncryptionMainService, new SyncDescriptor(EncryptionMainService));\n\n\t\t// Browser Elements\n\t\tservices.set(INativeBrowserElementsMainService, new SyncDescriptor(NativeBrowserElementsMainService, undefined, false /* proxied to other processes */));\n\n\t\t// Keyboard Layout\n\t\tservices.set(IKeyboardLayoutMainService, new SyncDescriptor(KeyboardLayoutMainService));\n\n\t\t// Native Host\n\t\tservices.set(INativeHostMainService, new SyncDescriptor(NativeHostMainService, undefined, false /* proxied to other processes */));\n\n\t\t// Web Contents Extractor\n\t\tservices.set(IWebContentExtractorService, new SyncDescriptor(NativeWebContentExtractorService, undefined, false /* proxied to other processes */));\n\n\t\t// Webview Manager\n\t\tservices.set(IWebviewManagerService, new SyncDescriptor(WebviewMainService));\n\n\t\t// Menubar\n\t\tservices.set(IMenubarMainService, new SyncDescriptor(MenubarMainService));\n\n\t\t// Extension Host Starter\n\t\tservices.set(IExtensionHostStarter, new SyncDescriptor(ExtensionHostStarter));\n\n\t\t// Storage\n\t\tservices.set(IStorageMainService, new SyncDescriptor(StorageMainService));\n\t\tservices.set(IApplicationStorageMainService, new SyncDescriptor(ApplicationStorageMainService));\n\n\t\t// Terminal\n\t\tconst ptyHostStarter = new ElectronPtyHostStarter({\n\t\t\tgraceTime: LocalReconnectConstants.GraceTime,\n\t\t\tshortGraceTime: LocalReconnectConstants.ShortGraceTime,\n\t\t\tscrollback: this.configurationService.getValue<number>(TerminalSettingId.PersistentSessionScrollback) ?? 100\n\t\t}, this.configurationService, this.environmentMainService, this.lifecycleMainService, this.logService);\n\t\tconst ptyHostService = new PtyHostService(\n\t\t\tptyHostStarter,\n\t\t\tthis.configurationService,\n\t\t\tthis.logService,\n\t\t\tthis.loggerService\n\t\t);\n\t\tservices.set(ILocalPtyService, ptyHostService);\n\n\t\t// External terminal\n\t\tif (isWindows) {\n\t\t\tservices.set(IExternalTerminalMainService, new SyncDescriptor(WindowsExternalTerminalService));\n\t\t} else if (isMacintosh) {\n\t\t\tservices.set(IExternalTerminalMainService, new SyncDescriptor(MacExternalTerminalService));\n\t\t} else if (isLinux) {\n\t\t\tservices.set(IExternalTerminalMainService, new SyncDescriptor(LinuxExternalTerminalService));\n\t\t}\n\n\t\t// Backups\n\t\tconst backupMainService = new BackupMainService(this.environmentMainService, this.configurationService, this.logService, this.stateService);\n\t\tservices.set(IBackupMainService, backupMainService);\n\n\t\t// Workspaces\n\t\tconst workspacesManagementMainService = new WorkspacesManagementMainService(this.environmentMainService, this.logService, this.userDataProfilesMainService, backupMainService, dialogMainService);\n\t\tservices.set(IWorkspacesManagementMainService, workspacesManagementMainService);\n\t\tservices.set(IWorkspacesService, new SyncDescriptor(WorkspacesMainService, undefined, false /* proxied to other processes */));\n\t\tservices.set(IWorkspacesHistoryMainService, new SyncDescriptor(WorkspacesHistoryMainService, undefined, false));\n\n\t\t// URL handling\n\t\tservices.set(IURLService, new SyncDescriptor(NativeURLService, undefined, false /* proxied to other processes */));\n\n\t\t// Telemetry\n\t\tif (supportsTelemetry(this.productService, this.environmentMainService)) {\n\t\t\tconst isInternal = isInternalTelemetry(this.productService, this.configurationService);\n\t\t\tconst channel = getDelayedChannel(sharedProcessReady.then(client => client.getChannel('telemetryAppender')));\n\t\t\tconst appender = new TelemetryAppenderClient(channel);\n\t\t\tconst commonProperties = resolveCommonProperties(release(), hostname(), process.arch, this.productService.commit, this.productService.version, machineId, sqmId, devDeviceId, isInternal, this.productService.date);\n\t\t\tconst piiPaths = getPiiPathsFromEnvironment(this.environmentMainService);\n\t\t\tconst config: ITelemetryServiceConfig = { appenders: [appender], commonProperties, piiPaths, sendErrorTelemetry: true };\n\n\t\t\tservices.set(ITelemetryService, new SyncDescriptor(TelemetryService, [config], false));\n\t\t} else {\n\t\t\tservices.set(ITelemetryService, NullTelemetryService);\n\t\t}\n\n\t\t// Default Extensions Profile Init\n\t\tservices.set(IExtensionsProfileScannerService, new SyncDescriptor(ExtensionsProfileScannerService, undefined, true));\n\t\tservices.set(IExtensionsScannerService, new SyncDescriptor(ExtensionsScannerService, undefined, true));\n\n\t\t// Utility Process Worker\n\t\tservices.set(IUtilityProcessWorkerMainService, new SyncDescriptor(UtilityProcessWorkerMainService, undefined, true));\n\n\t\t// Proxy Auth\n\t\tservices.set(IProxyAuthService, new SyncDescriptor(ProxyAuthService));\n\n\t\t// MCP\n\t\tservices.set(INativeMcpDiscoveryHelperService, new SyncDescriptor(NativeMcpDiscoveryHelperService));\n\n\n\t\t// Dev Only: CSS service (for ESM)\n\t\tservices.set(ICSSDevelopmentService, new SyncDescriptor(CSSDevelopmentService, undefined, true));\n\n\t\t// Init services that require it\n\t\tawait Promises.settled([\n\t\t\tbackupMainService.initialize(),\n\t\t\tworkspacesManagementMainService.initialize()\n\t\t]);\n\n\t\treturn this.mainInstantiationService.createChild(services);\n\t}\n\n\tprivate initChannels(accessor: ServicesAccessor, mainProcessElectronServer: ElectronIPCServer, sharedProcessClient: Promise<MessagePortClient>): void {\n\n\t\t// Channels registered to node.js are exposed to second instances\n\t\t// launching because that is the only way the second instance\n\t\t// can talk to the first instance. Electron IPC does not work\n\t\t// across apps until `requestSingleInstance` APIs are adopted.\n\n\t\tconst disposables = this._register(new DisposableStore());\n\n\t\tconst launchChannel = ProxyChannel.fromService(accessor.get(ILaunchMainService), disposables, { disableMarshalling: true });\n\t\tthis.mainProcessNodeIpcServer.registerChannel('launch', launchChannel);\n\n\t\tconst diagnosticsChannel = ProxyChannel.fromService(accessor.get(IDiagnosticsMainService), disposables, { disableMarshalling: true });\n\t\tthis.mainProcessNodeIpcServer.registerChannel('diagnostics', diagnosticsChannel);\n\n\t\t// Policies (main & shared process)\n\t\tconst policyChannel = disposables.add(new PolicyChannel(accessor.get(IPolicyService)));\n\t\tmainProcessElectronServer.registerChannel('policy', policyChannel);\n\t\tsharedProcessClient.then(client => client.registerChannel('policy', policyChannel));\n\n\t\t// Local Files\n\t\tconst diskFileSystemProvider = this.fileService.getProvider(Schemas.file);\n\t\tassertType(diskFileSystemProvider instanceof DiskFileSystemProvider);\n\t\tconst fileSystemProviderChannel = disposables.add(new DiskFileSystemProviderChannel(diskFileSystemProvider, this.logService, this.environmentMainService));\n\t\tmainProcessElectronServer.registerChannel(LOCAL_FILE_SYSTEM_CHANNEL_NAME, fileSystemProviderChannel);\n\t\tsharedProcessClient.then(client => client.registerChannel(LOCAL_FILE_SYSTEM_CHANNEL_NAME, fileSystemProviderChannel));\n\n\t\t// User Data Profiles\n\t\tconst userDataProfilesService = ProxyChannel.fromService(accessor.get(IUserDataProfilesMainService), disposables);\n\t\tmainProcessElectronServer.registerChannel('userDataProfiles', userDataProfilesService);\n\t\tsharedProcessClient.then(client => client.registerChannel('userDataProfiles', userDataProfilesService));\n\n\t\t// Update\n\t\tconst updateChannel = new UpdateChannel(accessor.get(IUpdateService));\n\t\tmainProcessElectronServer.registerChannel('update', updateChannel);\n\n\t\t// Process\n\t\tconst processChannel = ProxyChannel.fromService(new ProcessMainService(this.logService, accessor.get(IDiagnosticsService), accessor.get(IDiagnosticsMainService)), disposables);\n\t\tmainProcessElectronServer.registerChannel('process', processChannel);\n\n\t\t// Encryption\n\t\tconst encryptionChannel = ProxyChannel.fromService(accessor.get(IEncryptionMainService), disposables);\n\t\tmainProcessElectronServer.registerChannel('encryption', encryptionChannel);\n\n\t\t// Browser Elements\n\t\tconst browserElementsChannel = ProxyChannel.fromService(accessor.get(INativeBrowserElementsMainService), disposables);\n\t\tmainProcessElectronServer.registerChannel('browserElements', browserElementsChannel);\n\t\tsharedProcessClient.then(client => client.registerChannel('browserElements', browserElementsChannel));\n\n\t\t// Signing\n\t\tconst signChannel = ProxyChannel.fromService(accessor.get(ISignService), disposables);\n\t\tmainProcessElectronServer.registerChannel('sign', signChannel);\n\n\t\t// Keyboard Layout\n\t\tconst keyboardLayoutChannel = ProxyChannel.fromService(accessor.get(IKeyboardLayoutMainService), disposables);\n\t\tmainProcessElectronServer.registerChannel('keyboardLayout', keyboardLayoutChannel);\n\n\t\t// Native host (main & shared process)\n\t\tthis.nativeHostMainService = accessor.get(INativeHostMainService);\n\t\tconst nativeHostChannel = ProxyChannel.fromService(this.nativeHostMainService, disposables);\n\t\tmainProcessElectronServer.registerChannel('nativeHost', nativeHostChannel);\n\t\tsharedProcessClient.then(client => client.registerChannel('nativeHost', nativeHostChannel));\n\n\t\t// Web Content Extractor\n\t\tconst webContentExtractorChannel = ProxyChannel.fromService(accessor.get(IWebContentExtractorService), disposables);\n\t\tmainProcessElectronServer.registerChannel('webContentExtractor', webContentExtractorChannel);\n\n\t\t// Workspaces\n\t\tconst workspacesChannel = ProxyChannel.fromService(accessor.get(IWorkspacesService), disposables);\n\t\tmainProcessElectronServer.registerChannel('workspaces', workspacesChannel);\n\n\t\t// Menubar\n\t\tconst menubarChannel = ProxyChannel.fromService(accessor.get(IMenubarMainService), disposables);\n\t\tmainProcessElectronServer.registerChannel('menubar', menubarChannel);\n\n\t\t// URL handling\n\t\tconst urlChannel = ProxyChannel.fromService(accessor.get(IURLService), disposables);\n\t\tmainProcessElectronServer.registerChannel('url', urlChannel);\n\n\t\t// Webview Manager\n\t\tconst webviewChannel = ProxyChannel.fromService(accessor.get(IWebviewManagerService), disposables);\n\t\tmainProcessElectronServer.registerChannel('webview', webviewChannel);\n\n\t\t// Storage (main & shared process)\n\t\tconst storageChannel = disposables.add((new StorageDatabaseChannel(this.logService, accessor.get(IStorageMainService))));\n\t\tmainProcessElectronServer.registerChannel('storage', storageChannel);\n\t\tsharedProcessClient.then(client => client.registerChannel('storage', storageChannel));\n\n\t\t// Profile Storage Changes Listener (shared process)\n\t\tconst profileStorageListener = disposables.add((new ProfileStorageChangesListenerChannel(accessor.get(IStorageMainService), accessor.get(IUserDataProfilesMainService), this.logService)));\n\t\tsharedProcessClient.then(client => client.registerChannel('profileStorageListener', profileStorageListener));\n\n\t\t// Terminal\n\t\tconst ptyHostChannel = ProxyChannel.fromService(accessor.get(ILocalPtyService), disposables);\n\t\tmainProcessElectronServer.registerChannel(TerminalIpcChannels.LocalPty, ptyHostChannel);\n\n\t\t// External Terminal\n\t\tconst externalTerminalChannel = ProxyChannel.fromService(accessor.get(IExternalTerminalMainService), disposables);\n\t\tmainProcessElectronServer.registerChannel('externalTerminal', externalTerminalChannel);\n\n\t\t// MCP\n\t\tconst mcpDiscoveryChannel = ProxyChannel.fromService(accessor.get(INativeMcpDiscoveryHelperService), disposables);\n\t\tmainProcessElectronServer.registerChannel(NativeMcpDiscoveryHelperChannelName, mcpDiscoveryChannel);\n\n\t\t// Logger\n\t\tconst loggerChannel = new LoggerChannel(accessor.get(ILoggerMainService),);\n\t\tmainProcessElectronServer.registerChannel('logger', loggerChannel);\n\t\tsharedProcessClient.then(client => client.registerChannel('logger', loggerChannel));\n\n\t\t// Extension Host Debug Broadcasting\n\t\tconst electronExtensionHostDebugBroadcastChannel = new ElectronExtensionHostDebugBroadcastChannel(accessor.get(IWindowsMainService));\n\t\tmainProcessElectronServer.registerChannel('extensionhostdebugservice', electronExtensionHostDebugBroadcastChannel);\n\n\t\t// Extension Host Starter\n\t\tconst extensionHostStarterChannel = ProxyChannel.fromService(accessor.get(IExtensionHostStarter), disposables);\n\t\tmainProcessElectronServer.registerChannel(ipcExtensionHostStarterChannelName, extensionHostStarterChannel);\n\n\t\t// Utility Process Worker\n\t\tconst utilityProcessWorkerChannel = ProxyChannel.fromService(accessor.get(IUtilityProcessWorkerMainService), disposables);\n\t\tmainProcessElectronServer.registerChannel(ipcUtilityProcessWorkerChannelName, utilityProcessWorkerChannel);\n\t}\n\n\tprivate async openFirstWindow(accessor: ServicesAccessor, initialProtocolUrls: IInitialProtocolUrls | undefined): Promise<ICodeWindow[]> {\n\t\tconst windowsMainService = this.windowsMainService = accessor.get(IWindowsMainService);\n\t\tthis.auxiliaryWindowsMainService = accessor.get(IAuxiliaryWindowsMainService);\n\n\t\tconst context = isLaunchedFromCli(process.env) ? OpenContext.CLI : OpenContext.DESKTOP;\n\t\tconst args = this.environmentMainService.args;\n\n\t\t// First check for windows from protocol links to open\n\t\tif (initialProtocolUrls) {\n\n\t\t\t// Openables can open as windows directly\n\t\t\tif (initialProtocolUrls.openables.length > 0) {\n\t\t\t\treturn windowsMainService.open({\n\t\t\t\t\tcontext,\n\t\t\t\t\tcli: args,\n\t\t\t\t\turisToOpen: initialProtocolUrls.openables,\n\t\t\t\t\tgotoLineMode: true,\n\t\t\t\t\tinitialStartup: true\n\t\t\t\t\t// remoteAuthority: will be determined based on openables\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Protocol links with `windowId=_blank` on startup\n\t\t\t// should be handled in a special way:\n\t\t\t// We take the first one of these and open an empty\n\t\t\t// window for it. This ensures we are not restoring\n\t\t\t// all windows of the previous session.\n\t\t\t// If there are any more URLs like these, they will\n\t\t\t// be handled from the URL listeners installed later.\n\n\t\t\tif (initialProtocolUrls.urls.length > 0) {\n\t\t\t\tfor (const protocolUrl of initialProtocolUrls.urls) {\n\t\t\t\t\tconst params = new URLSearchParams(protocolUrl.uri.query);\n\t\t\t\t\tif (params.get('windowId') === '_blank') {\n\n\t\t\t\t\t\t// It is important here that we remove `windowId=_blank` from\n\t\t\t\t\t\t// this URL because here we open an empty window for it.\n\n\t\t\t\t\t\tparams.delete('windowId');\n\t\t\t\t\t\tprotocolUrl.originalUrl = protocolUrl.uri.toString(true);\n\t\t\t\t\t\tprotocolUrl.uri = protocolUrl.uri.with({ query: params.toString() });\n\n\t\t\t\t\t\treturn windowsMainService.open({\n\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\tcli: args,\n\t\t\t\t\t\t\tforceNewWindow: true,\n\t\t\t\t\t\t\tforceEmpty: true,\n\t\t\t\t\t\t\tgotoLineMode: true,\n\t\t\t\t\t\t\tinitialStartup: true\n\t\t\t\t\t\t\t// remoteAuthority: will be determined based on openables\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst macOpenFiles: string[] = (global as { macOpenFiles?: string[] }).macOpenFiles ?? [];\n\t\tconst hasCliArgs = args._.length;\n\t\tconst hasFolderURIs = !!args['folder-uri'];\n\t\tconst hasFileURIs = !!args['file-uri'];\n\t\tconst noRecentEntry = args['skip-add-to-recently-opened'] === true;\n\t\tconst waitMarkerFileURI = args.wait && args.waitMarkerFilePath ? URI.file(args.waitMarkerFilePath) : undefined;\n\t\tconst remoteAuthority = args.remote || undefined;\n\t\tconst forceProfile = args.profile;\n\t\tconst forceTempProfile = args['profile-temp'];\n\n\t\t// Started without file/folder arguments\n\t\tif (!hasCliArgs && !hasFolderURIs && !hasFileURIs) {\n\n\t\t\t// Force new window\n\t\t\tif (args['new-window'] || forceProfile || forceTempProfile) {\n\t\t\t\treturn windowsMainService.open({\n\t\t\t\t\tcontext,\n\t\t\t\t\tcli: args,\n\t\t\t\t\tforceNewWindow: true,\n\t\t\t\t\tforceEmpty: true,\n\t\t\t\t\tnoRecentEntry,\n\t\t\t\t\twaitMarkerFileURI,\n\t\t\t\t\tinitialStartup: true,\n\t\t\t\t\tremoteAuthority,\n\t\t\t\t\tforceProfile,\n\t\t\t\t\tforceTempProfile\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// mac: open-file event received on startup\n\t\t\tif (macOpenFiles.length) {\n\t\t\t\treturn windowsMainService.open({\n\t\t\t\t\tcontext: OpenContext.DOCK,\n\t\t\t\t\tcli: args,\n\t\t\t\t\turisToOpen: macOpenFiles.map(path => {\n\t\t\t\t\t\tpath = normalizeNFC(path); // macOS only: normalize paths to NFC form\n\n\t\t\t\t\t\treturn (hasWorkspaceFileExtension(path) ? { workspaceUri: URI.file(path) } : { fileUri: URI.file(path) });\n\t\t\t\t\t}),\n\t\t\t\t\tnoRecentEntry,\n\t\t\t\t\twaitMarkerFileURI,\n\t\t\t\t\tinitialStartup: true,\n\t\t\t\t\t// remoteAuthority: will be determined based on macOpenFiles\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// default: read paths from cli\n\t\treturn windowsMainService.open({\n\t\t\tcontext,\n\t\t\tcli: args,\n\t\t\tforceNewWindow: args['new-window'],\n\t\t\tdiffMode: args.diff,\n\t\t\tmergeMode: args.merge,\n\t\t\tnoRecentEntry,\n\t\t\twaitMarkerFileURI,\n\t\t\tgotoLineMode: args.goto,\n\t\t\tinitialStartup: true,\n\t\t\tremoteAuthority,\n\t\t\tforceProfile,\n\t\t\tforceTempProfile\n\t\t});\n\t}\n\n\tprivate afterWindowOpen(): void {\n\n\t\t// Windows: mutex\n\t\tthis.installMutex();\n\n\t\t// Remote Authorities\n\t\tprotocol.registerHttpProtocol(Schemas.vscodeRemoteResource, (request, callback) => {\n\t\t\tcallback({\n\t\t\t\turl: request.url.replace(/^vscode-remote-resource:/, 'http:'),\n\t\t\t\tmethod: request.method\n\t\t\t});\n\t\t});\n\n\t\t// Start to fetch shell environment (if needed) after window has opened\n\t\t// Since this operation can take a long time, we want to warm it up while\n\t\t// the window is opening.\n\t\t// We also show an error to the user in case this fails.\n\t\tthis.resolveShellEnvironment(this.environmentMainService.args, process.env, true);\n\n\t\t// Crash reporter\n\t\tthis.updateCrashReporterEnablement();\n\n\t\t// macOS: rosetta translation warning\n\t\tif (isMacintosh && app.runningUnderARM64Translation) {\n\t\t\tthis.windowsMainService?.sendToFocused('vscode:showTranslatedBuildWarning');\n\t\t}\n\t}\n\n\tprivate async installMutex(): Promise<void> {\n\t\tconst win32MutexName = this.productService.win32MutexName;\n\t\tif (isWindows && win32MutexName) {\n\t\t\ttry {\n\t\t\t\tconst WindowsMutex = await import('@vscode/windows-mutex');\n\t\t\t\tconst mutex = new WindowsMutex.Mutex(win32MutexName);\n\t\t\t\tEvent.once(this.lifecycleMainService.onWillShutdown)(() => mutex.release());\n\t\t\t} catch (error) {\n\t\t\t\tthis.logService.error(error);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async resolveShellEnvironment(args: NativeParsedArgs, env: IProcessEnvironment, notifyOnError: boolean): Promise<typeof process.env> {\n\t\ttry {\n\t\t\treturn await getResolvedShellEnv(this.configurationService, this.logService, args, env);\n\t\t} catch (error) {\n\t\t\tconst errorMessage = toErrorMessage(error);\n\t\t\tif (notifyOnError) {\n\t\t\t\tthis.windowsMainService?.sendToFocused('vscode:showResolveShellEnvError', errorMessage);\n\t\t\t} else {\n\t\t\t\tthis.logService.error(errorMessage);\n\t\t\t}\n\t\t}\n\n\t\treturn {};\n\t}\n\n\tprivate async updateCrashReporterEnablement(): Promise<void> {\n\n\t\t// If enable-crash-reporter argv is undefined then this is a fresh start,\n\t\t// based on `telemetry.enableCrashreporter` settings, generate a UUID which\n\t\t// will be used as crash reporter id and also update the json file.\n\n\t\ttry {\n\t\t\tconst argvContent = await this.fileService.readFile(this.environmentMainService.argvResource);\n\t\t\tconst argvString = argvContent.value.toString();\n\t\t\tconst argvJSON = parse<{ 'enable-crash-reporter'?: boolean }>(argvString);\n\t\t\tconst telemetryLevel = getTelemetryLevel(this.configurationService);\n\t\t\tconst enableCrashReporter = telemetryLevel >= TelemetryLevel.CRASH;\n\n\t\t\t// Initial startup\n\t\t\tif (argvJSON['enable-crash-reporter'] === undefined) {\n\t\t\t\tconst additionalArgvContent = [\n\t\t\t\t\t'',\n\t\t\t\t\t'\t// Allows to disable crash reporting.',\n\t\t\t\t\t'\t// Should restart the app if the value is changed.',\n\t\t\t\t\t`\t\"enable-crash-reporter\": ${enableCrashReporter},`,\n\t\t\t\t\t'',\n\t\t\t\t\t'\t// Unique id used for correlating crash reports sent from this instance.',\n\t\t\t\t\t'\t// Do not edit this value.',\n\t\t\t\t\t`\t\"crash-reporter-id\": \"${generateUuid()}\"`,\n\t\t\t\t\t'}'\n\t\t\t\t];\n\t\t\t\tconst newArgvString = argvString.substring(0, argvString.length - 2).concat(',\\n', additionalArgvContent.join('\\n'));\n\n\t\t\t\tawait this.fileService.writeFile(this.environmentMainService.argvResource, VSBuffer.fromString(newArgvString));\n\t\t\t}\n\n\t\t\t// Subsequent startup: update crash reporter value if changed\n\t\t\telse {\n\t\t\t\tconst newArgvString = argvString.replace(/\"enable-crash-reporter\": .*,/, `\"enable-crash-reporter\": ${enableCrashReporter},`);\n\t\t\t\tif (newArgvString !== argvString) {\n\t\t\t\t\tawait this.fileService.writeFile(this.environmentMainService.argvResource, VSBuffer.fromString(newArgvString));\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.logService.error(error);\n\n\t\t\t// Inform the user via notification\n\t\t\tthis.windowsMainService?.sendToFocused('vscode:showArgvParseWarning');\n\t\t}\n\t}\n\n\tprivate eventuallyAfterWindowOpen(): void {\n\n\t\t// Validate Device ID is up to date (delay this as it has shown significant perf impact)\n\t\t// Refs: https://github.com/microsoft/vscode/issues/234064\n\t\tvalidateDevDeviceId(this.stateService, this.logService);\n\t}\n}\n"]}